"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[296],{49863:function(Pe,ee,z){z.d(ee,{Z:function(){return Y}});var F=z(55297),dt=z(49937),q=z(28814);function vt(H,st){if(q.Z){if(!H)return st;var J;return(0,dt.mf)(H)?J=H():"current"in H?J=H.current:J=H,J}}var yt=z(93236),gt=z(80096),xt=z(10672),nt=function(H){var st=function(J,g,Q){var j=(0,yt.useRef)(!1),O=(0,yt.useRef)([]),X=(0,yt.useRef)([]),K=(0,yt.useRef)();H(function(){var G,k=Array.isArray(Q)?Q:[Q],R=k.map(function(T){return vt(T)});if(!j.current){j.current=!0,O.current=R,X.current=g,K.current=J();return}(R.length!==O.current.length||!(0,xt.Z)(R,O.current)||!(0,xt.Z)(g,X.current))&&((G=K.current)===null||G===void 0||G.call(K),O.current=R,X.current=g,K.current=J())}),(0,gt.Z)(function(){var G;(G=K.current)===null||G===void 0||G.call(K),j.current=!1})};return st},Z=nt,tt=Z(yt.useEffect),ot=tt;function W(H,st,J){J===void 0&&(J={});var g=(0,F.Z)(st);ot(function(){var Q=vt(J.target,window);if(Q!=null&&Q.addEventListener){var j=function(O){return g.current(O)};return Q.addEventListener(H,j,{capture:J.capture,once:J.once,passive:J.passive}),function(){Q.removeEventListener(H,j,{capture:J.capture})}}},[H,J.capture,J.once,J.passive],J.target)}var Y=W},15733:function(Pe,ee,z){var F=z(41117),dt=z(11454),q=z(78358),vt=z(72643),yt=z(35913),gt=z(31840);(0,dt.D)([vt.N,yt.N]);var xt={init:function(){return q.S1.apply(null,arguments)}};(0,dt.D)(gt.T);function nt(t,i,l){typeof i=="object"&&(l=i,i=null);var f=this,c;if(!(t instanceof Function)){c=[];for(var p in t)t.hasOwnProperty(p)&&c.push(p)}var y=function(D){if(f.apply(this,arguments),t instanceof Function?Z(this,t.call(this,D)):tt(this,t,c),this.constructor===y)for(var E=y.__initializers__,N=0;N<E.length;N++)E[N].apply(this,arguments)};y.__super__=f,f.__initializers__?y.__initializers__=f.__initializers__.slice():y.__initializers__=[],i&&y.__initializers__.push(i);var x=function(){};return x.prototype=f.prototype,y.prototype=new x,y.prototype.constructor=y,Z(y.prototype,l),y.extend=f.extend,y.derive=f.extend,y}function Z(t,i){if(i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l])}function tt(t,i,l){for(var f=0;f<l.length;f++){var c=l[f];t[c]=i[c]}}var ot={extend:nt,derive:nt};function W(t,i){this.action=t,this.context=i}var Y={trigger:function(t){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(t)){var i=this.__handlers__[t],l=i.length,f=-1,c=arguments;switch(c.length){case 1:for(;++f<l;)i[f].action.call(i[f].context);return;case 2:for(;++f<l;)i[f].action.call(i[f].context,c[1]);return;case 3:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2]);return;case 4:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2],c[3]);return;case 5:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2],c[3],c[4]);return;default:for(;++f<l;)i[f].action.apply(i[f].context,Array.prototype.slice.call(c,1));return}}},on:function(t,i,l){if(!(!t||!i)){var f=this.__handlers__||(this.__handlers__={});if(!f[t])f[t]=[];else if(this.has(t,i))return;var c=new W(i,l||this);return f[t].push(c),this}},once:function(t,i,l){if(!t||!i)return;var f=this;function c(){f.off(t,c),i.apply(this,arguments)}return this.on(t,c,l)},before:function(t,i,l){if(!(!t||!i))return t="before"+t,this.on(t,i,l)},after:function(t,i,l){if(!(!t||!i))return t="after"+t,this.on(t,i,l)},success:function(t,i){return this.once("success",t,i)},error:function(t,i){return this.once("error",t,i)},off:function(t,i){var l=this.__handlers__||(this.__handlers__={});if(!i){l[t]=[];return}if(l[t]){for(var f=l[t],c=[],p=0;p<f.length;p++)i&&f[p].action!==i&&c.push(f[p]);l[t]=c}return this},has:function(t,i){var l=this.__handlers__;if(!l||!l[t])return!1;for(var f=l[t],c=0;c<f.length;c++)if(f[c].action===i)return!0}},H=Y,st=0,J=Array.prototype,g=J.forEach,Q={genGUID:function(){return++st},relative2absolute:function(t,i){if(!i||t.match(/^\//))return t;for(var l=t.split("/"),f=i.split("/"),c=l[0];c==="."||c==="..";)c===".."&&f.pop(),l.shift(),c=l[0];return f.join("/")+"/"+l.join("/")},extend:function(t,i){if(i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l]);return t},defaults:function(t,i){if(i)for(var l in i)t[l]===void 0&&(t[l]=i[l]);return t},extendWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var c=l[f];t[c]=i[c]}return t},defaultsWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var c=l[f];t[c]==null&&(t[c]=i[c])}return t},each:function(t,i,l){if(t&&i)if(t.forEach&&t.forEach===g)t.forEach(i,l);else if(t.length===+t.length)for(var f=0,c=t.length;f<c;f++)i.call(l,t[f],f,t);else for(var p in t)t.hasOwnProperty(p)&&i.call(l,t[p],p,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return t?t.length===+t.length:!1},clone:function(t){if(Q.isObject(t)){if(Q.isArray(t))return t.slice();if(Q.isArrayLike(t)){for(var i=new t.constructor(t.length),l=0;l<t.length;l++)i[l]=t[l];return i}else return Q.extend({},t)}else return t}},j=Q,O=function(){this.__uid__=j.genGUID()};O.__initializers__=[function(t){j.extend(this,t)}],j.extend(O,ot),j.extend(O.prototype,H);var X=O,K=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],G=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function k(t){for(var i={},l={},f=0;f<K.length;f++){var c=K[f];y(c)}for(var f=0;f<G.length;f++){var p=G[f];l[p]=t.getParameter(t[p])}this.getExtension=function(x){return x in i||y(x),i[x]},this.getParameter=function(x){return l[x]};function y(x){if(t.getExtension){var D=t.getExtension(x);D||(D=t.getExtension("MOZ_"+x)),D||(D=t.getExtension("WEBKIT_"+x)),i[x]=D}}}var R=k,T={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444};function P(t){var i=new XMLHttpRequest;i.open("get",t.url),i.responseType=t.responseType||"text",t.onprogress&&(i.onprogress=function(l){if(l.lengthComputable){var f=l.loaded/l.total;t.onprogress(f,l.loaded,l.total)}else t.onprogress(null)}),i.onload=function(l){i.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(i.response)},t.onerror&&(i.onerror=t.onerror),i.send(null)}var M={get:P},b,w={};w.supportWebGL=function(){if(b==null)try{var t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(!i)throw new Error}catch(l){b=!1}return b},w.Int8Array=typeof Int8Array=="undefined"?Array:Int8Array,w.Uint8Array=typeof Uint8Array=="undefined"?Array:Uint8Array,w.Uint16Array=typeof Uint16Array=="undefined"?Array:Uint16Array,w.Uint32Array=typeof Uint32Array=="undefined"?Array:Uint32Array,w.Int16Array=typeof Int16Array=="undefined"?Array:Int16Array,w.Float32Array=typeof Float32Array=="undefined"?Array:Float32Array,w.Float64Array=typeof Float64Array=="undefined"?Array:Float64Array;var C={};typeof window!="undefined"?C=window:typeof z.g!="undefined"&&(C=z.g),w.requestAnimationFrame=C.requestAnimationFrame||C.msRequestAnimationFrame||C.mozRequestAnimationFrame||C.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},w.createCanvas=function(){return document.createElement("canvas")},w.createImage=function(){return new C.Image},w.request={get:M.get},w.addEventListener=function(t,i,l,f){t.addEventListener(i,l,f)},w.removeEventListener=function(t,i,l){t.removeEventListener(i,l)};var V=w,B=function(){this.head=null,this.tail=null,this._length=0};B.prototype.insert=function(t){var i=new B.Entry(t);return this.insertEntry(i),i},B.prototype.insertAt=function(t,i){if(!(t<0)){for(var l=this.head,f=0;l&&f!=t;)l=l.next,f++;if(l){var c=new B.Entry(i),p=l.prev;p?(p.next=c,c.prev=p):this.head=c,c.next=l,l.prev=c}else this.insert(i)}},B.prototype.insertBeforeEntry=function(t,i){var l=new B.Entry(t),f=i.prev;f?(f.next=l,l.prev=f):this.head=l,l.next=i,i.prev=l,this._length++},B.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},B.prototype.remove=function(t){var i=t.prev,l=t.next;i?i.next=l:this.head=l,l?l.prev=i:this.tail=i,t.next=t.prev=null,this._length--},B.prototype.removeAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;if(i)return this.remove(i),i.value}},B.prototype.getHead=function(){if(this.head)return this.head.value},B.prototype.getTail=function(){if(this.tail)return this.tail.value},B.prototype.getAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;return i.value}},B.prototype.indexOf=function(t){for(var i=this.head,l=0;i;){if(i.value===t)return l;i=i.next,l++}},B.prototype.length=function(){return this._length},B.prototype.isEmpty=function(){return this._length===0},B.prototype.forEach=function(t,i){for(var l=this.head,f=0,c=typeof i!="undefined";l;)c?t.call(i,l.value,f):t(l.value,f),l=l.next,f++},B.prototype.clear=function(){this.tail=this.head=null,this._length=0},B.Entry=function(t){this.value=t,this.next=null,this.prev=null};var ut=B,it=function(t){this._list=new ut,this._map={},this._maxSize=t||10};it.prototype.setMaxSize=function(t){this._maxSize=t},it.prototype.put=function(t,i){if(!this._map.hasOwnProperty(t)){var l=this._list.length();if(l>=this._maxSize&&l>0){var f=this._list.head;this._list.remove(f),delete this._map[f.key]}var c=this._list.insert(i);c.key=t,this._map[t]=c}},it.prototype.get=function(t){var i=this._map[t];if(this._map.hasOwnProperty(t))return i!==this._list.tail&&(this._list.remove(i),this._list.insertEntry(i)),i.value},it.prototype.remove=function(t){var i=this._map[t];typeof i!="undefined"&&(delete this._map[t],this._list.remove(i))},it.prototype.clear=function(){this._list.clear(),this._map={}};var lt=it,rt={},ct={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function St(t){return t=Math.round(t),t<0?0:t>255?255:t}function at(t){return t=Math.round(t),t<0?0:t>360?360:t}function mt(t){return t<0?0:t>1?1:t}function Dt(t){return t.length&&t.charAt(t.length-1)==="%"?St(parseFloat(t)/100*255):St(parseInt(t,10))}function wt(t){return t.length&&t.charAt(t.length-1)==="%"?mt(parseFloat(t)/100):mt(parseFloat(t))}function Pt(t,i,l){return l<0?l+=1:l>1&&(l-=1),l*6<1?t+(i-t)*l*6:l*2<1?i:l*3<2?t+(i-t)*(2/3-l)*6:t}function bt(t,i,l){return t+(i-t)*l}function Ot(t,i,l,f,c){return t[0]=i,t[1]=l,t[2]=f,t[3]=c,t}function Bt(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t}var Ht=new lt(20),Qt=null;function re(t,i){Qt&&Bt(Qt,i),Qt=Ht.put(t,Qt||i.slice())}rt.parse=function(t,i){if(t){i=i||[];var l=Ht.get(t);if(l)return Bt(i,l);t=t+"";var f=t.replace(/ /g,"").toLowerCase();if(f in ct)return Bt(i,ct[f]),re(t,i),i;if(f.charAt(0)==="#"){if(f.length===4){var c=parseInt(f.substr(1),16);if(!(c>=0&&c<=4095)){Ot(i,0,0,0,1);return}return Ot(i,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,1),re(t,i),i}else if(f.length===7){var c=parseInt(f.substr(1),16);if(!(c>=0&&c<=16777215)){Ot(i,0,0,0,1);return}return Ot(i,(c&16711680)>>16,(c&65280)>>8,c&255,1),re(t,i),i}return}var p=f.indexOf("("),y=f.indexOf(")");if(p!==-1&&y+1===f.length){var x=f.substr(0,p),D=f.substr(p+1,y-(p+1)).split(","),E=1;switch(x){case"rgba":if(D.length!==4){Ot(i,0,0,0,1);return}E=wt(D.pop());case"rgb":if(D.length!==3){Ot(i,0,0,0,1);return}return Ot(i,Dt(D[0]),Dt(D[1]),Dt(D[2]),E),re(t,i),i;case"hsla":if(D.length!==4){Ot(i,0,0,0,1);return}return D[3]=wt(D[3]),ye(D,i),re(t,i),i;case"hsl":if(D.length!==3){Ot(i,0,0,0,1);return}return ye(D,i),re(t,i),i;default:return}}Ot(i,0,0,0,1)}},rt.parseToFloat=function(t,i){if(i=rt.parse(t,i),!!i)return i[0]/=255,i[1]/=255,i[2]/=255,i};function ye(t,i){var l=(parseFloat(t[0])%360+360)%360/360,f=wt(t[1]),c=wt(t[2]),p=c<=.5?c*(f+1):c+f-c*f,y=c*2-p;return i=i||[],Ot(i,St(Pt(y,p,l+1/3)*255),St(Pt(y,p,l)*255),St(Pt(y,p,l-1/3)*255),1),t.length===4&&(i[3]=t[3]),i}function he(t){if(t){var i=t[0]/255,l=t[1]/255,f=t[2]/255,c=Math.min(i,l,f),p=Math.max(i,l,f),y=p-c,x=(p+c)/2,D,E;if(y===0)D=0,E=0;else{x<.5?E=y/(p+c):E=y/(2-p-c);var N=((p-i)/6+y/2)/y,$=((p-l)/6+y/2)/y,_t=((p-f)/6+y/2)/y;i===p?D=_t-$:l===p?D=1/3+N-_t:f===p&&(D=2/3+$-N),D<0&&(D+=1),D>1&&(D-=1)}var pt=[D*360,E,x];return t[3]!=null&&pt.push(t[3]),pt}}rt.lift=function(t,i){var l=rt.parse(t);if(l){for(var f=0;f<3;f++)i<0?l[f]=l[f]*(1-i)|0:l[f]=(255-l[f])*i+l[f]|0;return rt.stringify(l,l.length===4?"rgba":"rgb")}},rt.toHex=function(t){var i=rt.parse(t);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1)},rt.fastLerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){l=l||[];var f=t*(i.length-1),c=Math.floor(f),p=Math.ceil(f),y=i[c],x=i[p],D=f-c;return l[0]=St(bt(y[0],x[0],D)),l[1]=St(bt(y[1],x[1],D)),l[2]=St(bt(y[2],x[2],D)),l[3]=mt(bt(y[3],x[3],D)),l}},rt.fastMapToColor=rt.fastLerp,rt.lerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){var f=t*(i.length-1),c=Math.floor(f),p=Math.ceil(f),y=rt.parse(i[c]),x=rt.parse(i[p]),D=f-c,E=rt.stringify([St(bt(y[0],x[0],D)),St(bt(y[1],x[1],D)),St(bt(y[2],x[2],D)),mt(bt(y[3],x[3],D))],"rgba");return l?{color:E,leftIndex:c,rightIndex:p,value:f}:E}},rt.mapToColor=rt.lerp,rt.modifyHSL=function(t,i,l,f){if(t=rt.parse(t),t)return t=he(t),i!=null&&(t[0]=at(i)),l!=null&&(t[1]=wt(l)),f!=null&&(t[2]=wt(f)),rt.stringify(ye(t),"rgba")},rt.modifyAlpha=function(t,i){if(t=rt.parse(t),t&&i!=null)return t[3]=mt(i),rt.stringify(t,"rgba")},rt.stringify=function(t,i){if(!(!t||!t.length)){var l=t[0]+","+t[1]+","+t[2];return(i==="rgba"||i==="hsva"||i==="hsla")&&(l+=","+t[3]),i+"("+l+")"}};var be=rt,Be=be.parseToFloat,Ze={};function qe(t){var i=Object.keys(t);i.sort();for(var l=[],f=0;f<i.length;f++){var c=i[f],p=t[c];p===null?l.push(c):l.push(c+" "+p.toString())}return l.join(`
`)}function pr(t,i,l){l.sort();for(var f=[],c=0;c<l.length;c++){var p=l[c];f.push(p)}var y=qe(t)+`
`+qe(i)+`
`+f.join(`
`);if(Ze[y])return Ze[y];var x=j.genGUID();return Ze[y]=x,x}var wr=X.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(t,i){i===void 0&&console.warn('Uniform value "'+t+'" is undefined');var l=this.uniforms[t];l&&(typeof i=="string"&&(i=Be(i)||i),l.value=i,this.autoUpdateTextureStatus&&l.type==="t"&&(i?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var i in t){var l=t[i];this.setUniform(i,l)}},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,i){if(typeof t=="object")for(var l in t){var f=t[l];this.setUniform(l,f)}else this.setUniform(t,i)},get:function(t){var i=this.uniforms[t];if(i)return i.value},attachShader:function(t,i){var l=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var f=this.uniforms;this._enabledUniforms=Object.keys(f),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(E){var N=this.uniforms[E].type;return N==="t"||N==="tv"},this);var c=this.vertexDefines,p=this.fragmentDefines;if(this.vertexDefines=j.clone(t.vertexDefines),this.fragmentDefines=j.clone(t.fragmentDefines),i){for(var y in l)f[y]&&(f[y].value=l[y].value);j.defaults(this.vertexDefines,c),j.defaults(this.fragmentDefines,p)}var x={};for(var D in t.textures)x[D]={shaderType:t.textures[D].shaderType,type:t.textures[D].type,enabled:i&&this._textureStatus[D]?this._textureStatus[D].enabled:!1};this._textureStatus=x,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var i in this.uniforms)t.uniforms[i].value=this.uniforms[i].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=j.clone(this.vertexDefines),t.fragmentDefines=j.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,i,l){var f=this.vertexDefines,c=this.fragmentDefines;t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<3&&(l=i,i=t,t="both"),l=l!=null?l:null,(t==="vertex"||t==="both")&&f[i]!==l&&(f[i]=l,this._programKey=""),(t==="fragment"||t==="both")&&c[i]!==l&&(c[i]=l,t!=="both"&&(this._programKey=""))},undefine:function(t,i){t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<2&&(i=t,t="both"),(t==="vertex"||t==="both")&&this.isDefined("vertex",i)&&(delete this.vertexDefines[i],this._programKey=""),(t==="fragment"||t==="both")&&this.isDefined("fragment",i)&&(delete this.fragmentDefines[i],t!=="both"&&(this._programKey=""))},isDefined:function(t,i){switch(t){case"vertex":return this.vertexDefines[i]!==void 0;case"fragment":return this.fragmentDefines[i]!==void 0}},getDefine:function(t,i){switch(t){case"vertex":return this.vertexDefines[i];case"fragment":return this.fragmentDefines[i]}},enableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.enableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=l.enabled;f||(l.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.disableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=!l.enabled;f||(l.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var i=this._textureStatus;return!!i[t]&&i[t].enabled},getEnabledTextures:function(){var t=[],i=this._textureStatus;for(var l in i)i[l].enabled&&t.push(l);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=pr(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),Or=wr,Sr=1e-6,Vr=Array,sn=Math.random,cr={};cr.create=function(){var t=new Vr(2);return t[0]=0,t[1]=0,t},cr.clone=function(t){var i=new Vr(2);return i[0]=t[0],i[1]=t[1],i},cr.fromValues=function(t,i){var l=new Vr(2);return l[0]=t,l[1]=i,l},cr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t},cr.set=function(t,i,l){return t[0]=i,t[1]=l,t},cr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t},cr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t},cr.sub=cr.subtract,cr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t},cr.mul=cr.multiply,cr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t},cr.div=cr.divide,cr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t},cr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t},cr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t},cr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t},cr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return Math.sqrt(l*l+f*f)},cr.dist=cr.distance,cr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return l*l+f*f},cr.sqrDist=cr.squaredDistance,cr.length=function(t){var i=t[0],l=t[1];return Math.sqrt(i*i+l*l)},cr.len=cr.length,cr.squaredLength=function(t){var i=t[0],l=t[1];return i*i+l*l},cr.sqrLen=cr.squaredLength,cr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t},cr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t},cr.normalize=function(t,i){var l=i[0],f=i[1],c=l*l+f*f;return c>0&&(c=1/Math.sqrt(c),t[0]=i[0]*c,t[1]=i[1]*c),t},cr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]},cr.cross=function(t,i,l){var f=i[0]*l[1]-i[1]*l[0];return t[0]=t[1]=0,t[2]=f,t},cr.lerp=function(t,i,l,f){var c=i[0],p=i[1];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t},cr.random=function(t,i){i=i||1;var l=GLMAT_RANDOM()*2*Math.PI;return t[0]=Math.cos(l)*i,t[1]=Math.sin(l)*i,t},cr.transformMat2=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[2]*c,t[1]=l[1]*f+l[3]*c,t},cr.transformMat2d=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[2]*c+l[4],t[1]=l[1]*f+l[3]*c+l[5],t},cr.transformMat3=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[3]*c+l[6],t[1]=l[1]*f+l[4]*c+l[7],t},cr.transformMat4=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[4]*c+l[12],t[1]=l[1]*f+l[5]*c+l[13],t},cr.forEach=function(){var t=cr.create();return function(i,l,f,c,p,y){var x,D;for(l||(l=2),f||(f=0),c?D=Math.min(c*l+f,i.length):D=i.length,x=f;x<D;x+=l)t[0]=i[x],t[1]=i[x+1],p(t,t,y),i[x]=t[0],i[x+1]=t[1];return i}}();var or=cr,Dr=function(t,i){t=t||0,i=i||0,this.array=or.fromValues(t,i),this._dirty=!0};if(Dr.prototype={constructor:Dr,add:function(t){return or.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i){return this.array[0]=t,this.array[1]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new Dr(this.x,this.y)},copy:function(t){return or.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return or.cross(t.array,this.array,i.array),t._dirty=!0,this},dist:function(t){return or.dist(this.array,t.array)},distance:function(t){return or.distance(this.array,t.array)},div:function(t){return or.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return or.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return or.dot(this.array,t.array)},len:function(){return or.len(this.array)},length:function(){return or.length(this.array)},lerp:function(t,i,l){return or.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return or.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return or.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return or.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return or.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return or.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return or.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return or.random(this.array,t),this._dirty=!0,this},scale:function(t){return or.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return or.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return or.sqrDist(this.array,t.array)},squaredDistance:function(t){return or.squaredDistance(this.array,t.array)},sqrLen:function(){return or.sqrLen(this.array)},squaredLength:function(){return or.squaredLength(this.array)},sub:function(t){return or.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return or.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return or.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return or.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return or.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return or.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var ze=Dr.prototype;Object.defineProperty(ze,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(ze,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}Dr.add=function(t,i,l){return or.add(t.array,i.array,l.array),t._dirty=!0,t},Dr.set=function(t,i,l){return or.set(t.array,i,l),t._dirty=!0,t},Dr.copy=function(t,i){return or.copy(t.array,i.array),t._dirty=!0,t},Dr.cross=function(t,i,l){return or.cross(t.array,i.array,l.array),t._dirty=!0,t},Dr.dist=function(t,i){return or.distance(t.array,i.array)},Dr.distance=Dr.dist,Dr.div=function(t,i,l){return or.divide(t.array,i.array,l.array),t._dirty=!0,t},Dr.divide=Dr.div,Dr.dot=function(t,i){return or.dot(t.array,i.array)},Dr.len=function(t){return or.length(t.array)},Dr.lerp=function(t,i,l,f){return or.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},Dr.min=function(t,i,l){return or.min(t.array,i.array,l.array),t._dirty=!0,t},Dr.max=function(t,i,l){return or.max(t.array,i.array,l.array),t._dirty=!0,t},Dr.mul=function(t,i,l){return or.multiply(t.array,i.array,l.array),t._dirty=!0,t},Dr.multiply=Dr.mul,Dr.negate=function(t,i){return or.negate(t.array,i.array),t._dirty=!0,t},Dr.normalize=function(t,i){return or.normalize(t.array,i.array),t._dirty=!0,t},Dr.random=function(t,i){return or.random(t.array,i),t._dirty=!0,t},Dr.scale=function(t,i,l){return or.scale(t.array,i.array,l),t._dirty=!0,t},Dr.scaleAndAdd=function(t,i,l,f){return or.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},Dr.sqrDist=function(t,i){return or.sqrDist(t.array,i.array)},Dr.squaredDistance=Dr.sqrDist,Dr.sqrLen=function(t){return or.sqrLen(t.array)},Dr.squaredLength=Dr.sqrLen,Dr.sub=function(t,i,l){return or.subtract(t.array,i.array,l.array),t._dirty=!0,t},Dr.subtract=Dr.sub,Dr.transformMat2=function(t,i,l){return or.transformMat2(t.array,i.array,l.array),t._dirty=!0,t},Dr.transformMat2d=function(t,i,l){return or.transformMat2d(t.array,i.array,l.array),t._dirty=!0,t},Dr.transformMat3=function(t,i,l){return or.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},Dr.transformMat4=function(t,i,l){return or.transformMat4(t.array,i.array,l.array),t._dirty=!0,t};var Ne=Dr,He=1,Vt=2,le=3,Ee={};function Fe(t){for(var i=t.split(`
`),l=0,f=i.length;l<f;l++)i[l]=l+1+": "+i[l];return i.join(`
`)}function Xt(t,i,l){if(!t.getShaderParameter(i,t.COMPILE_STATUS))return[t.getShaderInfoLog(i),Fe(l)].join(`
`)}var $t=new V.Float32Array(16),ie=X.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var i=this._locations[t];return i!=null},useTextureSlot:function(t,i,l){i&&(t.gl.activeTexture(t.gl.TEXTURE0+l),i.isRenderable()?i.bind(t):i.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,i){var l=this._textureSlot;return this.useTextureSlot(t,i,l),this._textureSlot++,l},setUniform:function(t,i,l,f){var c=this._locations,p=c[l];if(p==null)return!1;switch(i){case"m4":if(!(f instanceof Float32Array)){for(var y=0;y<f.length;y++)$t[y]=f[y];f=$t}t.uniformMatrix4fv(p,!1,f);break;case"2i":t.uniform2i(p,f[0],f[1]);break;case"2f":t.uniform2f(p,f[0],f[1]);break;case"3i":t.uniform3i(p,f[0],f[1],f[2]);break;case"3f":t.uniform3f(p,f[0],f[1],f[2]);break;case"4i":t.uniform4i(p,f[0],f[1],f[2],f[3]);break;case"4f":t.uniform4f(p,f[0],f[1],f[2],f[3]);break;case"1i":t.uniform1i(p,f);break;case"1f":t.uniform1f(p,f);break;case"1fv":t.uniform1fv(p,f);break;case"1iv":t.uniform1iv(p,f);break;case"2iv":t.uniform2iv(p,f);break;case"2fv":t.uniform2fv(p,f);break;case"3iv":t.uniform3iv(p,f);break;case"3fv":t.uniform3fv(p,f);break;case"4iv":t.uniform4iv(p,f);break;case"4fv":t.uniform4fv(p,f);break;case"m2":case"m2v":t.uniformMatrix2fv(p,!1,f);break;case"m3":case"m3v":t.uniformMatrix3fv(p,!1,f);break;case"m4v":if(Array.isArray(f)&&Array.isArray(f[0])){for(var x=new V.Float32Array(f.length*16),D=0,y=0;y<f.length;y++)for(var E=f[y],N=0;N<16;N++)x[D++]=E[N];t.uniformMatrix4fv(p,!1,x)}else t.uniformMatrix4fv(p,!1,f);break}return!0},setUniformOfSemantic:function(t,i,l){var f=this.uniformSemantics[i];return f?this.setUniform(t,f.type,f.symbol,l):!1},enableAttributes:function(t,i,l){var f=t.gl,c=this._program,p=this._locations,y;l?y=l.__enabledAttributeList:y=Ee[t.__uid__],y||(l?y=l.__enabledAttributeList=[]:y=Ee[t.__uid__]=[]);for(var x=[],D=0;D<i.length;D++){var E=i[D];if(!this.attributes[E]){x[D]=-1;continue}var N=p[E];if(N==null){if(N=f.getAttribLocation(c,E),N===-1){x[D]=-1;continue}p[E]=N}x[D]=N,y[N]?y[N]=Vt:y[N]=He}for(var D=0;D<y.length;D++)switch(y[D]){case He:f.enableVertexAttribArray(D),y[D]=le;break;case Vt:y[D]=le;break;case le:f.disableVertexAttribArray(D),y[D]=0;break}return x},getAttribLocation:function(t,i){var l=this._locations,f=l[i];return f==null&&(f=t.getAttribLocation(this._program,i),l[i]=f),f},buildProgram:function(t,i,l,f){var c=t.createShader(t.VERTEX_SHADER),p=t.createProgram();t.shaderSource(c,l),t.compileShader(c);var y=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(y,f),t.compileShader(y);var x=Xt(t,c,l);if(x||(x=Xt(t,y,f),x))return x;if(t.attachShader(p,c),t.attachShader(p,y),i.attributeSemantics.POSITION)t.bindAttribLocation(p,0,i.attributeSemantics.POSITION.symbol);else{var D=Object.keys(this.attributes);t.bindAttribLocation(p,0,D[0])}if(t.linkProgram(p),t.deleteShader(c),t.deleteShader(y),this._program=p,this.vertexCode=l,this.fragmentCode=f,!t.getProgramParameter(p,t.LINK_STATUS))return`Could not link program
`+t.getProgramInfoLog(p);for(var E=0;E<i.uniforms.length;E++){var N=i.uniforms[E];this._locations[N]=t.getUniformLocation(p,N)}}}),Zt=ie,pe=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function ve(t,i,l){function f(y,x,D,E){var N="";isNaN(x)&&(x in i?x=i[x]:x=c[x]),isNaN(D)&&(D in i?D=i[D]:D=c[D]);for(var $=parseInt(x);$<parseInt(D);$++)N+="{"+E.replace(/float\s*\(\s*_idx_\s*\)/g,$.toFixed(1)).replace(/_idx_/g,$)+"}";return N}var c={};for(var p in l)c[p+"_COUNT"]=l[p];return t.replace(pe,f)}function we(t,i,l){var f=[];if(i)for(var c in i){var p=i[c];p>0&&f.push("#define "+c.toUpperCase()+"_COUNT "+p)}if(l)for(var y=0;y<l.length;y++){var x=l[y];f.push("#define "+x.toUpperCase()+"_ENABLED")}for(var x in t){var D=t[x];D===null?f.push("#define "+x):f.push("#define "+x+" "+D.toString())}return f.join(`
`)}function Ue(t){for(var i=[],l=0;l<t.length;l++)i.push("#extension GL_"+t[l]+" : enable");return i.join(`
`)}function ur(t){return["precision",t,"float"].join(" ")+`;
`+["precision",t,"int"].join(" ")+`;
`+["precision",t,"sampler2D"].join(" ")+`;
`}function gr(t){this._renderer=t,this._cache={}}gr.prototype.getProgram=function(t,i,l){var f=this._cache,c=t.isSkinnedMesh&&t.isSkinnedMesh(),p=t.isInstancedMesh&&t.isInstancedMesh(),y="s"+i.shader.shaderID+"m"+i.getProgramKey();l&&(y+="se"+l.getProgramKey(t.lightGroup)),c&&(y+=",sk"+t.joints.length),p&&(y+=",is");var jt=f[y];if(jt)return jt;var x=l?l.getLightsNumbers(t.lightGroup):{},D=this._renderer,E=D.gl,N=i.getEnabledTextures(),$="";if(c){var _t={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>D.getMaxJointNumber()&&(_t.USE_SKIN_MATRICES_TEXTURE=null),$+=`
`+we(_t)+`
`}p&&($+=`
#define INSTANCING
`);var pt=$+we(i.vertexDefines,x,N),At=$+we(i.fragmentDefines,x,N),Mt=pt+`
`+i.shader.vertex,Nt=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(ue){return D.getGLExtension(ue)!=null});Nt.indexOf("EXT_shader_texture_lod")>=0&&(At+=`
#define SUPPORT_TEXTURE_LOD`),Nt.indexOf("OES_standard_derivatives")>=0&&(At+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var kt=Ue(Nt)+`
`+ur(i.precision)+`
`+At+`
`+i.shader.fragment,te=ve(Mt,i.vertexDefines,x),qt=ve(kt,i.fragmentDefines,x),jt=new Zt;jt.uniformSemantics=i.shader.uniformSemantics,jt.attributes=i.shader.attributes;var fe=jt.buildProgram(E,i.shader,te,qt);return jt.__error=fe,f[y]=jt,jt};var Ir=gr,hn=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Rr=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,Nn=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Vn={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function yi(t){for(var i=[],l=0;l<t;l++)i[l]=0;return i}var Fi={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return yi(2)},vec3:function(){return yi(3)},vec4:function(){return yi(4)},ivec2:function(){return yi(2)},ivec3:function(){return yi(3)},ivec4:function(){return yi(4)},mat2:function(){return yi(4)},mat3:function(){return yi(9)},mat4:function(){return yi(16)},array:function(){return[]}},Ci=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],ri=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],eo=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Lo={vec4:4,vec3:3,vec2:2,float:1},Fa={},ro={};function _s(t,i){var l="vertex:"+t+"fragment:"+i;if(Fa[l])return Fa[l];var f=j.genGUID();return Fa[l]=f,ro[f]={vertex:t,fragment:i},f}function no(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function io(){console.error("Wrong uniform/attributes syntax")}function Ga(t,i){for(var l=/[,=\(\):]/,f=i.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),c=[],p=0;p<f.length;p++)f[p].match(l)?c.push(f[p].charAt(0),f[p].slice(1)):c.push(f[p]);f=c;var y=0,x=1,D=2,E=3,N=4,$=5,_t=y,pt={},At=null,Mt;Nt(f[0]);function Nt(qt){qt||io();var jt=qt.match(/\[(.*?)\]/);Mt=qt.replace(/\[(.*?)\]/,""),pt[Mt]={},jt&&(pt[Mt].isArray=!0,pt[Mt].arraySize=jt[1])}for(var p=1;p<f.length;p++){var kt=f[p];if(kt){if(kt==="="){if(_t!==y&&_t!==E){io();break}_t=x;continue}else if(kt===":"){_t=N;continue}else if(kt===","){if(_t===D){if(!(At instanceof Array)){io();break}At.push(+f[++p])}else _t=$;continue}else if(kt===")"){pt[Mt].value=new V.Float32Array(At),At=null,_t=$;continue}else if(kt==="("){if(_t!==D){io();break}if(!(At instanceof Array)){io();break}At.push(+f[++p]);continue}else if(kt.indexOf("vec")>=0){if(_t!==x&&_t!==N){io();break}_t=D,At=[];continue}else if(_t===x){t==="bool"?pt[Mt].value=kt==="true":pt[Mt].value=parseFloat(kt),At=null;continue}else if(_t===N){var te=kt;Ci.indexOf(te)>=0||ri.indexOf(te)>=0||eo.indexOf(te)>=0?pt[Mt].semantic=te:te==="ignore"||te==="unconfigurable"?pt[Mt].ignore=!0:t==="bool"?pt[Mt].value=te==="true":pt[Mt].value=parseFloat(te);continue}Nt(kt),_t=y}}return pt}function Yn(t,i){typeof t=="object"&&(i=t.fragment,t=t.vertex),t=no(t),i=no(i),this._shaderID=_s(t,i),this._vertexCode=Yn.parseImport(t),this._fragmentCode=Yn.parseImport(i),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Yn.prototype={constructor:Yn,createUniforms:function(){var t={};for(var i in this.uniformTemplates){var l=this.uniformTemplates[i];t[i]={type:l.type,value:l.value()}}return t},_parseImport:function(){this._vertexCode=Yn.parseImport(this.vertex),this._fragmentCode=Yn.parseImport(this.fragment)},_addSemanticUniform:function(t,i,l){if(Ci.indexOf(l)>=0)this.attributeSemantics[l]={symbol:t,type:i};else if(eo.indexOf(l)>=0){var f=!1,c=l;l.match(/TRANSPOSE$/)&&(f=!0,c=l.slice(0,-9)),this.matrixSemantics[l]={symbol:t,type:i,isTranspose:f,semanticNoTranspose:c}}else ri.indexOf(l)>=0&&(this.uniformSemantics[l]={symbol:t,type:i})},_addMaterialUniform:function(t,i,l,f,c,p){p[t]={type:l,value:c?Fi.array:f||Fi[i],semantic:null}},_parseUniforms:function(){var t={},i=this,l="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(hn,c),l="fragment",this._fragmentCode=this._fragmentCode.replace(hn,c),i.matrixSemanticKeys=Object.keys(this.matrixSemantics);function f(p){return p!=null?function(){return p}:null}function c(p,y,x){var D=Ga(y,x),E=[];for(var N in D){var $=D[N],_t=$.semantic,pt=N,At=Vn[y],Mt=f(D[N].value);D[N].isArray&&(pt+="["+D[N].arraySize+"]",At+="v"),E.push(pt),i._uniformList.push(N),$.ignore||((y==="sampler2D"||y==="samplerCube")&&(i.textures[N]={shaderType:l,type:y}),_t?i._addSemanticUniform(N,At,_t):i._addMaterialUniform(N,y,At,Mt,D[N].isArray,t))}return E.length>0?"uniform "+y+" "+E.join(",")+`;
`:""}this.uniformTemplates=t},_parseAttributes:function(){var t={},i=this;this._vertexCode=this._vertexCode.replace(Rr,l);function l(f,c,p){var y=Ga(c,p),x=Lo[c]||1,D=[];for(var E in y){var N=y[E].semantic;if(t[E]={type:"float",size:x,semantic:N||null},N){if(Ci.indexOf(N)<0)throw new Error('Unkown semantic "'+N+'"');i.attributeSemantics[N]={symbol:E,type:c}}D.push(E)}return"attribute "+c+" "+D.join(",")+`;
`}this.attributes=t},_parseDefines:function(){var t=this,i="vertex";this._vertexCode=this._vertexCode.replace(Nn,l),i="fragment",this._fragmentCode=this._fragmentCode.replace(Nn,l);function l(f,c,p){var y=i==="vertex"?t.vertexDefines:t.fragmentDefines;return y[c]||(p==="false"?y[c]=!1:p==="true"?y[c]=!0:y[c]=p?isNaN(parseFloat(p))?p.trim():parseFloat(p):null),""}},clone:function(){var t=ro[this._shaderID],i=new Yn(t.vertex,t.fragment);return i}},Object.defineProperty&&(Object.defineProperty(Yn.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Yn.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Yn.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Yn.prototype,"uniforms",{get:function(){return this._uniformList}}));var tu=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Yn.parseImport=function(t){return t=t.replace(tu,function(c,l,f){var c=Yn.source(f);return c?Yn.parseImport(c):(console.error('Shader chunk "'+f+'" not existed in library'),"")}),t};var Tf=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Yn.import=function(t){t.replace(Tf,function(i,l,f,p){var p=p.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(p){for(var y=f.split("."),x=Yn.codes,D=0,E;D<y.length-1;)E=y[D++],x[E]||(x[E]={}),x=x[E];E=y[D],x[E]=p}return p})},Yn.codes={},Yn.source=function(t){for(var i=t.split("."),l=Yn.codes,f=0;l&&f<i.length;){var c=i[f++];l=l[c]}return typeof l!="string"?(console.error('Shader "'+t+'" not existed in library'),""):l};var dr=Yn,sl=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`,Tn={};Tn.create=function(){var t=new Vr(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Tn.clone=function(t){var i=new Vr(16);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},Tn.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},Tn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Tn.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],c=i[3],p=i[6],y=i[7],x=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=l,t[6]=i[9],t[7]=i[13],t[8]=f,t[9]=p,t[11]=i[14],t[12]=c,t[13]=y,t[14]=x}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t},Tn.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=i[6],E=i[7],N=i[8],$=i[9],_t=i[10],pt=i[11],At=i[12],Mt=i[13],Nt=i[14],kt=i[15],te=l*x-f*y,qt=l*D-c*y,jt=l*E-p*y,fe=f*D-c*x,ue=f*E-p*x,Te=c*E-p*D,xe=N*Mt-$*At,Ie=N*Nt-_t*At,je=N*kt-pt*At,Ve=$*Nt-_t*Mt,Je=$*kt-pt*Mt,er=_t*kt-pt*Nt,Xe=te*er-qt*Je+jt*Ve+fe*je-ue*Ie+Te*xe;return Xe?(Xe=1/Xe,t[0]=(x*er-D*Je+E*Ve)*Xe,t[1]=(c*Je-f*er-p*Ve)*Xe,t[2]=(Mt*Te-Nt*ue+kt*fe)*Xe,t[3]=(_t*ue-$*Te-pt*fe)*Xe,t[4]=(D*je-y*er-E*Ie)*Xe,t[5]=(l*er-c*je+p*Ie)*Xe,t[6]=(Nt*jt-At*Te-kt*qt)*Xe,t[7]=(N*Te-_t*jt+pt*qt)*Xe,t[8]=(y*Je-x*je+E*xe)*Xe,t[9]=(f*je-l*Je-p*xe)*Xe,t[10]=(At*ue-Mt*jt+kt*te)*Xe,t[11]=($*jt-N*ue-pt*te)*Xe,t[12]=(x*Ie-y*Ve-D*xe)*Xe,t[13]=(l*Ve-f*Ie+c*xe)*Xe,t[14]=(Mt*qt-At*fe-Nt*te)*Xe,t[15]=(N*fe-$*qt+_t*te)*Xe,t):null},Tn.adjoint=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=i[6],E=i[7],N=i[8],$=i[9],_t=i[10],pt=i[11],At=i[12],Mt=i[13],Nt=i[14],kt=i[15];return t[0]=x*(_t*kt-pt*Nt)-$*(D*kt-E*Nt)+Mt*(D*pt-E*_t),t[1]=-(f*(_t*kt-pt*Nt)-$*(c*kt-p*Nt)+Mt*(c*pt-p*_t)),t[2]=f*(D*kt-E*Nt)-x*(c*kt-p*Nt)+Mt*(c*E-p*D),t[3]=-(f*(D*pt-E*_t)-x*(c*pt-p*_t)+$*(c*E-p*D)),t[4]=-(y*(_t*kt-pt*Nt)-N*(D*kt-E*Nt)+At*(D*pt-E*_t)),t[5]=l*(_t*kt-pt*Nt)-N*(c*kt-p*Nt)+At*(c*pt-p*_t),t[6]=-(l*(D*kt-E*Nt)-y*(c*kt-p*Nt)+At*(c*E-p*D)),t[7]=l*(D*pt-E*_t)-y*(c*pt-p*_t)+N*(c*E-p*D),t[8]=y*($*kt-pt*Mt)-N*(x*kt-E*Mt)+At*(x*pt-E*$),t[9]=-(l*($*kt-pt*Mt)-N*(f*kt-p*Mt)+At*(f*pt-p*$)),t[10]=l*(x*kt-E*Mt)-y*(f*kt-p*Mt)+At*(f*E-p*x),t[11]=-(l*(x*pt-E*$)-y*(f*pt-p*$)+N*(f*E-p*x)),t[12]=-(y*($*Nt-_t*Mt)-N*(x*Nt-D*Mt)+At*(x*_t-D*$)),t[13]=l*($*Nt-_t*Mt)-N*(f*Nt-c*Mt)+At*(f*_t-c*$),t[14]=-(l*(x*Nt-D*Mt)-y*(f*Nt-c*Mt)+At*(f*D-c*x)),t[15]=l*(x*_t-D*$)-y*(f*_t-c*$)+N*(f*D-c*x),t},Tn.determinant=function(t){var i=t[0],l=t[1],f=t[2],c=t[3],p=t[4],y=t[5],x=t[6],D=t[7],E=t[8],N=t[9],$=t[10],_t=t[11],pt=t[12],At=t[13],Mt=t[14],Nt=t[15],kt=i*y-l*p,te=i*x-f*p,qt=i*D-c*p,jt=l*x-f*y,fe=l*D-c*y,ue=f*D-c*x,Te=E*At-N*pt,xe=E*Mt-$*pt,Ie=E*Nt-_t*pt,je=N*Mt-$*At,Ve=N*Nt-_t*At,Je=$*Nt-_t*Mt;return kt*Je-te*Ve+qt*je+jt*Ie-fe*xe+ue*Te},Tn.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=i[6],N=i[7],$=i[8],_t=i[9],pt=i[10],At=i[11],Mt=i[12],Nt=i[13],kt=i[14],te=i[15],qt=l[0],jt=l[1],fe=l[2],ue=l[3];return t[0]=qt*f+jt*x+fe*$+ue*Mt,t[1]=qt*c+jt*D+fe*_t+ue*Nt,t[2]=qt*p+jt*E+fe*pt+ue*kt,t[3]=qt*y+jt*N+fe*At+ue*te,qt=l[4],jt=l[5],fe=l[6],ue=l[7],t[4]=qt*f+jt*x+fe*$+ue*Mt,t[5]=qt*c+jt*D+fe*_t+ue*Nt,t[6]=qt*p+jt*E+fe*pt+ue*kt,t[7]=qt*y+jt*N+fe*At+ue*te,qt=l[8],jt=l[9],fe=l[10],ue=l[11],t[8]=qt*f+jt*x+fe*$+ue*Mt,t[9]=qt*c+jt*D+fe*_t+ue*Nt,t[10]=qt*p+jt*E+fe*pt+ue*kt,t[11]=qt*y+jt*N+fe*At+ue*te,qt=l[12],jt=l[13],fe=l[14],ue=l[15],t[12]=qt*f+jt*x+fe*$+ue*Mt,t[13]=qt*c+jt*D+fe*_t+ue*Nt,t[14]=qt*p+jt*E+fe*pt+ue*kt,t[15]=qt*y+jt*N+fe*At+ue*te,t},Tn.multiplyAffine=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[4],x=i[5],D=i[6],E=i[8],N=i[9],$=i[10],_t=i[12],pt=i[13],At=i[14],Mt=l[0],Nt=l[1],kt=l[2];return t[0]=Mt*f+Nt*y+kt*E,t[1]=Mt*c+Nt*x+kt*N,t[2]=Mt*p+Nt*D+kt*$,Mt=l[4],Nt=l[5],kt=l[6],t[4]=Mt*f+Nt*y+kt*E,t[5]=Mt*c+Nt*x+kt*N,t[6]=Mt*p+Nt*D+kt*$,Mt=l[8],Nt=l[9],kt=l[10],t[8]=Mt*f+Nt*y+kt*E,t[9]=Mt*c+Nt*x+kt*N,t[10]=Mt*p+Nt*D+kt*$,Mt=l[12],Nt=l[13],kt=l[14],t[12]=Mt*f+Nt*y+kt*E+_t,t[13]=Mt*c+Nt*x+kt*N+pt,t[14]=Mt*p+Nt*D+kt*$+At,t},Tn.mul=Tn.multiply,Tn.mulAffine=Tn.multiplyAffine,Tn.translate=function(t,i,l){var f=l[0],c=l[1],p=l[2],y,x,D,E,N,$,_t,pt,At,Mt,Nt,kt;return i===t?(t[12]=i[0]*f+i[4]*c+i[8]*p+i[12],t[13]=i[1]*f+i[5]*c+i[9]*p+i[13],t[14]=i[2]*f+i[6]*c+i[10]*p+i[14],t[15]=i[3]*f+i[7]*c+i[11]*p+i[15]):(y=i[0],x=i[1],D=i[2],E=i[3],N=i[4],$=i[5],_t=i[6],pt=i[7],At=i[8],Mt=i[9],Nt=i[10],kt=i[11],t[0]=y,t[1]=x,t[2]=D,t[3]=E,t[4]=N,t[5]=$,t[6]=_t,t[7]=pt,t[8]=At,t[9]=Mt,t[10]=Nt,t[11]=kt,t[12]=y*f+N*c+At*p+i[12],t[13]=x*f+$*c+Mt*p+i[13],t[14]=D*f+_t*c+Nt*p+i[14],t[15]=E*f+pt*c+kt*p+i[15]),t},Tn.scale=function(t,i,l){var f=l[0],c=l[1],p=l[2];return t[0]=i[0]*f,t[1]=i[1]*f,t[2]=i[2]*f,t[3]=i[3]*f,t[4]=i[4]*c,t[5]=i[5]*c,t[6]=i[6]*c,t[7]=i[7]*c,t[8]=i[8]*p,t[9]=i[9]*p,t[10]=i[10]*p,t[11]=i[11]*p,t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},Tn.rotate=function(t,i,l,f){var c=f[0],p=f[1],y=f[2],x=Math.sqrt(c*c+p*p+y*y),D,E,N,$,_t,pt,At,Mt,Nt,kt,te,qt,jt,fe,ue,Te,xe,Ie,je,Ve,Je,er,Xe,ir;return Math.abs(x)<Sr?null:(x=1/x,c*=x,p*=x,y*=x,D=Math.sin(l),E=Math.cos(l),N=1-E,$=i[0],_t=i[1],pt=i[2],At=i[3],Mt=i[4],Nt=i[5],kt=i[6],te=i[7],qt=i[8],jt=i[9],fe=i[10],ue=i[11],Te=c*c*N+E,xe=p*c*N+y*D,Ie=y*c*N-p*D,je=c*p*N-y*D,Ve=p*p*N+E,Je=y*p*N+c*D,er=c*y*N+p*D,Xe=p*y*N-c*D,ir=y*y*N+E,t[0]=$*Te+Mt*xe+qt*Ie,t[1]=_t*Te+Nt*xe+jt*Ie,t[2]=pt*Te+kt*xe+fe*Ie,t[3]=At*Te+te*xe+ue*Ie,t[4]=$*je+Mt*Ve+qt*Je,t[5]=_t*je+Nt*Ve+jt*Je,t[6]=pt*je+kt*Ve+fe*Je,t[7]=At*je+te*Ve+ue*Je,t[8]=$*er+Mt*Xe+qt*ir,t[9]=_t*er+Nt*Xe+jt*ir,t[10]=pt*er+kt*Xe+fe*ir,t[11]=At*er+te*Xe+ue*ir,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},Tn.rotateX=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[4],y=i[5],x=i[6],D=i[7],E=i[8],N=i[9],$=i[10],_t=i[11];return i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=p*c+E*f,t[5]=y*c+N*f,t[6]=x*c+$*f,t[7]=D*c+_t*f,t[8]=E*c-p*f,t[9]=N*c-y*f,t[10]=$*c-x*f,t[11]=_t*c-D*f,t},Tn.rotateY=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[0],y=i[1],x=i[2],D=i[3],E=i[8],N=i[9],$=i[10],_t=i[11];return i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*c-E*f,t[1]=y*c-N*f,t[2]=x*c-$*f,t[3]=D*c-_t*f,t[8]=p*f+E*c,t[9]=y*f+N*c,t[10]=x*f+$*c,t[11]=D*f+_t*c,t},Tn.rotateZ=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[0],y=i[1],x=i[2],D=i[3],E=i[4],N=i[5],$=i[6],_t=i[7];return i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*c+E*f,t[1]=y*c+N*f,t[2]=x*c+$*f,t[3]=D*c+_t*f,t[4]=E*c-p*f,t[5]=N*c-y*f,t[6]=$*c-x*f,t[7]=_t*c-D*f,t},Tn.fromRotationTranslation=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=f+f,D=c+c,E=p+p,N=f*x,$=f*D,_t=f*E,pt=c*D,At=c*E,Mt=p*E,Nt=y*x,kt=y*D,te=y*E;return t[0]=1-(pt+Mt),t[1]=$+te,t[2]=_t-kt,t[3]=0,t[4]=$-te,t[5]=1-(N+Mt),t[6]=At+Nt,t[7]=0,t[8]=_t+kt,t[9]=At-Nt,t[10]=1-(N+pt),t[11]=0,t[12]=l[0],t[13]=l[1],t[14]=l[2],t[15]=1,t},Tn.fromQuat=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l+l,x=f+f,D=c+c,E=l*y,N=f*y,$=f*x,_t=c*y,pt=c*x,At=c*D,Mt=p*y,Nt=p*x,kt=p*D;return t[0]=1-$-At,t[1]=N+kt,t[2]=_t-Nt,t[3]=0,t[4]=N-kt,t[5]=1-E-At,t[6]=pt+Mt,t[7]=0,t[8]=_t+Nt,t[9]=pt-Mt,t[10]=1-E-$,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Tn.frustum=function(t,i,l,f,c,p,y){var x=1/(l-i),D=1/(c-f),E=1/(p-y);return t[0]=p*2*x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p*2*D,t[6]=0,t[7]=0,t[8]=(l+i)*x,t[9]=(c+f)*D,t[10]=(y+p)*E,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*p*2*E,t[15]=0,t},Tn.perspective=function(t,i,l,f,c){var p=1/Math.tan(i/2),y=1/(f-c);return t[0]=p/l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(c+f)*y,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*c*f*y,t[15]=0,t},Tn.ortho=function(t,i,l,f,c,p,y){var x=1/(i-l),D=1/(f-c),E=1/(p-y);return t[0]=-2*x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*D,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*E,t[11]=0,t[12]=(i+l)*x,t[13]=(c+f)*D,t[14]=(y+p)*E,t[15]=1,t},Tn.lookAt=function(t,i,l,f){var c,p,y,x,D,E,N,$,_t,pt,At=i[0],Mt=i[1],Nt=i[2],kt=f[0],te=f[1],qt=f[2],jt=l[0],fe=l[1],ue=l[2];return Math.abs(At-jt)<Sr&&Math.abs(Mt-fe)<Sr&&Math.abs(Nt-ue)<Sr?Tn.identity(t):(N=At-jt,$=Mt-fe,_t=Nt-ue,pt=1/Math.sqrt(N*N+$*$+_t*_t),N*=pt,$*=pt,_t*=pt,c=te*_t-qt*$,p=qt*N-kt*_t,y=kt*$-te*N,pt=Math.sqrt(c*c+p*p+y*y),pt?(pt=1/pt,c*=pt,p*=pt,y*=pt):(c=0,p=0,y=0),x=$*y-_t*p,D=_t*c-N*y,E=N*p-$*c,pt=Math.sqrt(x*x+D*D+E*E),pt?(pt=1/pt,x*=pt,D*=pt,E*=pt):(x=0,D=0,E=0),t[0]=c,t[1]=x,t[2]=N,t[3]=0,t[4]=p,t[5]=D,t[6]=$,t[7]=0,t[8]=y,t[9]=E,t[10]=_t,t[11]=0,t[12]=-(c*At+p*Mt+y*Nt),t[13]=-(x*At+D*Mt+E*Nt),t[14]=-(N*At+$*Mt+_t*Nt),t[15]=1,t)},Tn.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var nr=Tn,Nr={};Nr.create=function(){var t=new Vr(3);return t[0]=0,t[1]=0,t[2]=0,t},Nr.clone=function(t){var i=new Vr(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i},Nr.fromValues=function(t,i,l){var f=new Vr(3);return f[0]=t,f[1]=i,f[2]=l,f},Nr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},Nr.set=function(t,i,l,f){return t[0]=i,t[1]=l,t[2]=f,t},Nr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t},Nr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t},Nr.sub=Nr.subtract,Nr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t},Nr.mul=Nr.multiply,Nr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t},Nr.div=Nr.divide,Nr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t},Nr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t},Nr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t},Nr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t},Nr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2];return Math.sqrt(l*l+f*f+c*c)},Nr.dist=Nr.distance,Nr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2];return l*l+f*f+c*c},Nr.sqrDist=Nr.squaredDistance,Nr.length=function(t){var i=t[0],l=t[1],f=t[2];return Math.sqrt(i*i+l*l+f*f)},Nr.len=Nr.length,Nr.squaredLength=function(t){var i=t[0],l=t[1],f=t[2];return i*i+l*l+f*f},Nr.sqrLen=Nr.squaredLength,Nr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t},Nr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t},Nr.normalize=function(t,i){var l=i[0],f=i[1],c=i[2],p=l*l+f*f+c*c;return p>0&&(p=1/Math.sqrt(p),t[0]=i[0]*p,t[1]=i[1]*p,t[2]=i[2]*p),t},Nr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},Nr.cross=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],D=l[2];return t[0]=c*D-p*x,t[1]=p*y-f*D,t[2]=f*x-c*y,t},Nr.lerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t},Nr.random=function(t,i){i=i||1;var l=sn()*2*Math.PI,f=sn()*2-1,c=Math.sqrt(1-f*f)*i;return t[0]=Math.cos(l)*c,t[1]=Math.sin(l)*c,t[2]=f*i,t},Nr.transformMat4=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[3]*f+l[7]*c+l[11]*p+l[15];return y=y||1,t[0]=(l[0]*f+l[4]*c+l[8]*p+l[12])/y,t[1]=(l[1]*f+l[5]*c+l[9]*p+l[13])/y,t[2]=(l[2]*f+l[6]*c+l[10]*p+l[14])/y,t},Nr.transformMat3=function(t,i,l){var f=i[0],c=i[1],p=i[2];return t[0]=f*l[0]+c*l[3]+p*l[6],t[1]=f*l[1]+c*l[4]+p*l[7],t[2]=f*l[2]+c*l[5]+p*l[8],t},Nr.transformQuat=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],D=l[2],E=l[3],N=E*f+x*p-D*c,$=E*c+D*f-y*p,_t=E*p+y*c-x*f,pt=-y*f-x*c-D*p;return t[0]=N*E+pt*-y+$*-D-_t*-x,t[1]=$*E+pt*-x+_t*-y-N*-D,t[2]=_t*E+pt*-D+N*-x-$*-y,t},Nr.rotateX=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[0],p[1]=c[1]*Math.cos(f)-c[2]*Math.sin(f),p[2]=c[1]*Math.sin(f)+c[2]*Math.cos(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Nr.rotateY=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[2]*Math.sin(f)+c[0]*Math.cos(f),p[1]=c[1],p[2]=c[2]*Math.cos(f)-c[0]*Math.sin(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Nr.rotateZ=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[0]*Math.cos(f)-c[1]*Math.sin(f),p[1]=c[0]*Math.sin(f)+c[1]*Math.cos(f),p[2]=c[2],t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Nr.forEach=function(){var t=Nr.create();return function(i,l,f,c,p,y){var x,D;for(l||(l=3),f||(f=0),c?D=Math.min(c*l+f,i.length):D=i.length,x=f;x<D;x+=l)t[0]=i[x],t[1]=i[x+1],t[2]=i[x+2],p(t,t,y),i[x]=t[0],i[x+1]=t[1],i[x+2]=t[2];return i}}(),Nr.angle=function(t,i){var l=Nr.fromValues(t[0],t[1],t[2]),f=Nr.fromValues(i[0],i[1],i[2]);Nr.normalize(l,l),Nr.normalize(f,f);var c=Nr.dot(l,f);return c>1?0:Math.acos(c)};var Wt=Nr;dr.import(sl);var un=nr.create,yn={};function fn(t){return t.material}function Mr(t,i,l){return i.uniforms[l].value}function eu(t,i,l,f){return l!==f}function ru(t){return!0}function rr(){}var mr={float:T.FLOAT,byte:T.BYTE,ubyte:T.UNSIGNED_BYTE,short:T.SHORT,ushort:T.UNSIGNED_SHORT};function Er(t,i,l){this.availableAttributes=t,this.availableAttributeSymbols=i,this.indicesBuffer=l,this.vao=null}function Qe(t){var i,l;this.bind=function(f){i||(i=V.createCanvas(),i.width=i.height=1,i.getContext("2d"));var c=f.gl,p=!l;p&&(l=c.createTexture()),c.bindTexture(c.TEXTURE_2D,l),p&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,i)},this.unbind=function(f){f.gl.bindTexture(f.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Zi=X.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=V.createCanvas());var t=this.canvas;try{var i={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!this.gl)throw new Error;this._glinfo=new R(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(l){throw"Error creating WebGL Context "+l}this._programMgr=new Ir(this),this._placeholderTexture=new Qe(this)},{resize:function(t,i){var l=this.canvas,f=this.devicePixelRatio;t!=null?(l.style&&(l.style.width=t+"px",l.style.height=i+"px"),l.width=t*f,l.height=i*f,this._width=t,this._height=i):(this._width=l.width/f,this._height=l.height/f),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,i,l,f,c){if(typeof t=="object"){var p=t;t=p.x,i=p.y,l=p.width,f=p.height,c=p.devicePixelRatio}c=c||this.devicePixelRatio,this.gl.viewport(t*c,i*c,l*c,f*c),this.viewport={x:t,y:i,width:l,height:f,devicePixelRatio:c}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,i,l,f){var c=this.gl,p=this.clearColor;if(this.clearBit){c.colorMask(!0,!0,!0,!0),c.depthMask(!0);var y=this.viewport,x=!1,D=y.devicePixelRatio;(y.width!==this._width||y.height!==this._height||D&&D!==this.devicePixelRatio||y.x||y.y)&&(x=!0,c.enable(c.SCISSOR_TEST),c.scissor(y.x*D,y.y*D,y.width*D,y.height*D)),c.clearColor(p[0],p[1],p[2],p[3]),c.clear(this.clearBit),x&&c.disable(c.SCISSOR_TEST)}if(l||t.update(!1),t.updateLights(),i=i||t.getMainCamera(),!i){console.error("Can't find camera in the scene.");return}i.update();var E=t.updateRenderList(i,!0);this._sceneRendering=t;var N=E.opaque,$=E.transparent,_t=t.material;t.trigger("beforerender",this,t,i,E),f?(this.renderPreZ(N,t,i),c.depthFunc(c.LEQUAL)):c.depthFunc(c.LESS);for(var pt=un(),At=Wt.create(),Mt=0;Mt<$.length;Mt++){var Nt=$[Mt];nr.multiplyAffine(pt,i.viewMatrix.array,Nt.worldTransform.array),Wt.transformMat4(At,Nt.position.array,pt),Nt.__depth=At[2]}this.renderPass(N,i,{getMaterial:function(kt){return _t||kt.material},sortCompare:this.opaqueSortCompare}),this.renderPass($,i,{getMaterial:function(kt){return _t||kt.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,i,E),this._sceneRendering=null},getProgram:function(t,i,l){return i=i||t.material,this._programMgr.getProgram(t,i,l)},validateProgram:function(t){if(t.__error){var i=t.__error;if(yn[t.__uid__])return;if(yn[t.__uid__]=!0,this.throwError)throw new Error(i);this.trigger("error",i)}},updatePrograms:function(t,i,l){var f=l&&l.getMaterial||fn;i=i||null;for(var c=0;c<t.length;c++){var p=t[c],y=f.call(this,p);if(c>0){var x=t[c-1],D=x.joints?x.joints.length:0,E=p.joints?p.joints.length:0;if(E===D&&p.material===x.material&&p.lightGroup===x.lightGroup){p.__program=x.__program;continue}}var N=this._programMgr.getProgram(p,y,i);this.validateProgram(N),p.__program=N}},renderPass:function(t,i,l){this.trigger("beforerenderpass",this,t,i,l),l=l||{},l.getMaterial=l.getMaterial||fn,l.getUniform=l.getUniform||Mr,l.isMaterialChanged=l.isMaterialChanged||eu,l.beforeRender=l.beforeRender||rr,l.afterRender=l.afterRender||rr;var f=l.ifRender||ru;this.updatePrograms(t,this._sceneRendering,l),l.sortCompare&&t.sort(l.sortCompare);var c=this.viewport,p=c.devicePixelRatio,y=[c.x*p,c.y*p,c.width*p,c.height*p],x=this.devicePixelRatio,D=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*x,this._height*x],E=[y[2],y[3]],N=Date.now();i?(nr.copy(pn.VIEW,i.viewMatrix.array),nr.copy(pn.PROJECTION,i.projectionMatrix.array),nr.copy(pn.VIEWINVERSE,i.worldTransform.array)):(nr.identity(pn.VIEW),nr.identity(pn.PROJECTION),nr.identity(pn.VIEWINVERSE)),nr.multiply(pn.VIEWPROJECTION,pn.PROJECTION,pn.VIEW),nr.invert(pn.PROJECTIONINVERSE,pn.PROJECTION),nr.invert(pn.VIEWPROJECTIONINVERSE,pn.VIEWPROJECTION);for(var $=this.gl,_t=this._sceneRendering,pt,At,Mt,Nt,kt,te,qt,jt,fe,ue,Te,xe,Ie=null,je=0;je<t.length;je++){var Ve=t[je],Je=Ve.worldTransform!=null,er;if(f(Ve)){Je&&(er=Ve.isSkinnedMesh&&Ve.isSkinnedMesh()?Ve.offsetMatrix?Ve.offsetMatrix.array:pn.IDENTITY:Ve.worldTransform.array);var Xe=Ve.geometry,ir=l.getMaterial.call(this,Ve),xr=Ve.__program,Lr=ir.shader,ar=Xe.__uid__+"-"+xr.__uid__,vn=ar!==ue;ue=ar,vn&&Ie&&Ie.bindVertexArrayOES(null),Je&&(nr.copy(pn.WORLD,er),nr.multiply(pn.WORLDVIEWPROJECTION,pn.VIEWPROJECTION,er),nr.multiplyAffine(pn.WORLDVIEW,pn.VIEW,er),(Lr.matrixSemantics.WORLDINVERSE||Lr.matrixSemantics.WORLDINVERSETRANSPOSE)&&nr.invert(pn.WORLDINVERSE,er),(Lr.matrixSemantics.WORLDVIEWINVERSE||Lr.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&nr.invert(pn.WORLDVIEWINVERSE,pn.WORLDVIEW),(Lr.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||Lr.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&nr.invert(pn.WORLDVIEWPROJECTIONINVERSE,pn.WORLDVIEWPROJECTION)),Ve.beforeRender&&Ve.beforeRender(this),l.beforeRender.call(this,Ve,ir,pt);var br=xr!==At;br?(xr.bind(this),xr.setUniformOfSemantic($,"VIEWPORT",y),xr.setUniformOfSemantic($,"WINDOW_SIZE",D),i&&(xr.setUniformOfSemantic($,"NEAR",i.near),xr.setUniformOfSemantic($,"FAR",i.far)),xr.setUniformOfSemantic($,"DEVICEPIXELRATIO",p),xr.setUniformOfSemantic($,"TIME",N),xr.setUniformOfSemantic($,"VIEWPORT_SIZE",E),_t&&_t.setLightUniforms(xr,Ve.lightGroup,this)):xr=At,(br||l.isMaterialChanged(Ve,Mt,ir,pt))&&(ir.depthTest!==Nt&&(ir.depthTest?$.enable($.DEPTH_TEST):$.disable($.DEPTH_TEST),Nt=ir.depthTest),ir.depthMask!==kt&&($.depthMask(ir.depthMask),kt=ir.depthMask),ir.transparent!==fe&&(ir.transparent?$.enable($.BLEND):$.disable($.BLEND),fe=ir.transparent),ir.transparent&&(ir.blend?ir.blend($):($.blendEquationSeparate($.FUNC_ADD,$.FUNC_ADD),$.blendFuncSeparate($.SRC_ALPHA,$.ONE_MINUS_SRC_ALPHA,$.ONE,$.ONE_MINUS_SRC_ALPHA))),xe=this._bindMaterial(Ve,ir,xr,Mt||null,pt||null,At||null,l.getUniform),pt=ir);var Cn=Lr.matrixSemanticKeys;if(Je)for(var dn=0;dn<Cn.length;dn++){var On=Cn[dn],Zr=Lr.matrixSemantics[On],$r=pn[On];if(Zr.isTranspose){var ui=pn[Zr.semanticNoTranspose];nr.transpose($r,ui)}xr.setUniform($,Zr.type,Zr.symbol,$r)}Ve.cullFace!==qt&&(qt=Ve.cullFace,$.cullFace(qt)),Ve.frontFace!==jt&&(jt=Ve.frontFace,$.frontFace(jt)),Ve.culling!==te&&(te=Ve.culling,te?$.enable($.CULL_FACE):$.disable($.CULL_FACE)),this._updateSkeleton(Ve,xr,xe),vn&&(Te=this._bindVAO(Ie,Lr,Xe,xr)),this._renderObject(Ve,Te,xr),l.afterRender(this,Ve),Ve.afterRender&&Ve.afterRender(this),At=xr,Mt=Ve}}Ie&&Ie.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,t,i,l)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,i,l){var f=this.gl,c=t.skeleton;if(c)if(c.update(),t.joints.length>this.getMaxJointNumber()){var p=c.getSubSkinMatricesTexture(t.__uid__,t.joints);i.useTextureSlot(this,p,l),i.setUniform(f,"1i","skinMatricesTexture",l),i.setUniform(f,"1f","skinMatricesTextureSize",p.width)}else{var y=c.getSubSkinMatrices(t.__uid__,t.joints);i.setUniformOfSemantic(f,"SKIN_MATRIX",y)}},_renderObject:function(t,i,l){var f=this.gl,c=t.geometry,p=t.mode;p==null&&(p=4);var y=null,x=t.isInstancedMesh&&t.isInstancedMesh();if(x&&(y=this.getGLExtension("ANGLE_instanced_arrays"),!y)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var D;if(x&&(D=this._bindInstancedAttributes(t,l,y)),i.indicesBuffer){var E=this.getGLExtension("OES_element_index_uint"),N=E&&c.indices instanceof Uint32Array,$=N?f.UNSIGNED_INT:f.UNSIGNED_SHORT;x?y.drawElementsInstancedANGLE(p,i.indicesBuffer.count,$,0,t.getInstanceCount()):f.drawElements(p,i.indicesBuffer.count,$,0)}else x?y.drawArraysInstancedANGLE(p,0,c.vertexCount,t.getInstanceCount()):f.drawArrays(p,0,c.vertexCount);if(x)for(var _t=0;_t<D.length;_t++)f.disableVertexAttribArray(D[_t])},_bindInstancedAttributes:function(t,i,l){for(var f=this.gl,c=t.getInstancedAttributesBuffers(this),p=[],y=0;y<c.length;y++){var x=c[y],D=i.getAttribLocation(f,x.symbol);if(!(D<0)){var E=mr[x.type]||f.FLOAT;f.enableVertexAttribArray(D),f.bindBuffer(f.ARRAY_BUFFER,x.buffer),f.vertexAttribPointer(D,x.size,E,!1,0,0),l.vertexAttribDivisorANGLE(D,x.divisor),p.push(D)}}return p},_bindMaterial:function(t,i,l,f,c,p,y){for(var x=this.gl,D=p===l,E=l.currentTextureSlot(),N=i.getEnabledUniforms(),$=i.getTextureUniforms(),_t=this._placeholderTexture,pt=0;pt<$.length;pt++){var At=$[pt],Mt=y(t,i,At),Nt=i.uniforms[At].type;if(Nt==="t"&&Mt)Mt.__slot=-1;else if(Nt==="tv")for(var kt=0;kt<Mt.length;kt++)Mt[kt]&&(Mt[kt].__slot=-1)}_t.__slot=-1;for(var pt=0;pt<N.length;pt++){var At=N[pt],te=i.uniforms[At],Mt=y(t,i,At),Nt=te.type,qt=Nt==="t";if(qt&&(!Mt||!Mt.isRenderable())&&(Mt=_t),c&&D){var jt=y(f,c,At);if(qt&&(!jt||!jt.isRenderable())&&(jt=_t),jt===Mt){if(qt)l.takeCurrentTextureSlot(this,null);else if(Nt==="tv"&&Mt)for(var kt=0;kt<Mt.length;kt++)l.takeCurrentTextureSlot(this,null);continue}}if(Mt!=null)if(qt)if(Mt.__slot<0){var fe=l.currentTextureSlot(),ue=l.setUniform(x,"1i",At,fe);ue&&(l.takeCurrentTextureSlot(this,Mt),Mt.__slot=fe)}else l.setUniform(x,"1i",At,Mt.__slot);else if(Array.isArray(Mt)){if(Mt.length===0)continue;if(Nt==="tv"){if(!l.hasUniform(At))continue;for(var Te=[],kt=0;kt<Mt.length;kt++){var xe=Mt[kt];if(xe.__slot<0){var fe=l.currentTextureSlot();Te.push(fe),l.takeCurrentTextureSlot(this,xe),xe.__slot=fe}else Te.push(xe.__slot)}l.setUniform(x,"1iv",At,Te)}else l.setUniform(x,te.type,At,Mt)}else l.setUniform(x,te.type,At,Mt)}var Ie=l.currentTextureSlot();return l.resetTextureSlot(E),Ie},_bindVAO:function(t,i,l,f){var c=!l.dynamic,p=this.gl,y=this.__uid__+"-"+f.__uid__,x=l.__vaoCache[y];if(!x){var D=l.getBufferChunks(this);if(!D||!D.length)return;for(var E=D[0],N=E.attributeBuffers,jt=E.indicesBuffer,qt=[],$=[],_t=0;_t<N.length;_t++){var pt=N[_t],At=pt.name,Mt=pt.semantic,Nt;if(Mt){var kt=i.attributeSemantics[Mt];Nt=kt&&kt.symbol}else Nt=At;Nt&&f.attributes[Nt]&&(qt.push(pt),$.push(Nt))}x=new Er(qt,$,jt),c&&(l.__vaoCache[y]=x)}var te=!0;t&&c&&(x.vao==null?x.vao=t.createVertexArrayOES():te=!1,t.bindVertexArrayOES(x.vao));var qt=x.availableAttributes,jt=x.indicesBuffer;if(te){for(var fe=f.enableAttributes(this,x.availableAttributeSymbols,t&&c&&x),_t=0;_t<qt.length;_t++){var ue=fe[_t];if(ue!==-1){var pt=qt[_t],Te=pt.buffer,xe=pt.size,Ie=mr[pt.type]||p.FLOAT;p.bindBuffer(p.ARRAY_BUFFER,Te),p.vertexAttribPointer(ue,xe,Ie,!1,0,0)}}l.isUseIndices()&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,jt.buffer)}return x},renderPreZ:function(t,i,l){var f=this.gl,c=this._prezMaterial||new Or({shader:new dr(dr.source("clay.prez.vertex"),dr.source("clay.prez.fragment"))});this._prezMaterial=c,f.colorMask(!1,!1,!1,!1),f.depthMask(!0),this.renderPass(t,l,{ifRender:function(p){return!p.ignorePreZ},isMaterialChanged:function(p,y){var x=p.material,D=y.material;return x.get("diffuseMap")!==D.get("diffuseMap")||(x.get("alphaCutoff")||0)!==(D.get("alphaCutoff")||0)},getUniform:function(p,y,x){if(x==="alphaMap")return p.material.get("diffuseMap");if(x==="alphaCutoff"){if(p.material.isDefined("fragment","ALPHA_TEST")&&p.material.get("diffuseMap")){var D=p.material.get("alphaCutoff");return D||0}return 0}else return x==="uvRepeat"?p.material.get("uvRepeat"):x==="uvOffset"?p.material.get("uvOffset"):y.get(x)},getMaterial:function(){return c},sort:this.opaqueSortCompare}),f.colorMask(!0,!0,!0,!0),f.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,i,l){t.getParent()&&t.getParent().remove(t);var f={};t.traverse(function(c){var p=c.material;if(c.geometry&&i&&c.geometry.dispose(this),l&&p&&!f[p.__uid__]){for(var y=p.getTextureUniforms(),x=0;x<y.length;x++){var D=y[x],E=p.uniforms[D].value,N=p.uniforms[D].type;if(E){if(N==="t")E.dispose&&E.dispose(this);else if(N==="tv")for(var $=0;$<E.length;$++)E[$]&&E[$].dispose&&E[$].dispose(this)}}f[p.__uid__]=!0}c.dispose&&c.dispose(this)},this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,i,l){l||(l=new Ne),i=this._height-i;var f=this.viewport,c=l.array;return c[0]=(t-f.x)/f.width,c[0]=c[0]*2-1,c[1]=(i-f.y)/f.height,c[1]=c[1]*2-1,l}});Zi.opaqueSortCompare=Zi.prototype.opaqueSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.renderOrder-i.renderOrder},Zi.transparentSortCompare=Zi.prototype.transparentSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__depth===i.__depth?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.__depth-i.__depth:t.renderOrder-i.renderOrder};var pn={IDENTITY:un(),WORLD:un(),VIEW:un(),PROJECTION:un(),WORLDVIEW:un(),VIEWPROJECTION:un(),WORLDVIEWPROJECTION:un(),WORLDINVERSE:un(),VIEWINVERSE:un(),PROJECTIONINVERSE:un(),WORLDVIEWINVERSE:un(),VIEWPROJECTIONINVERSE:un(),WORLDVIEWPROJECTIONINVERSE:un(),WORLDTRANSPOSE:un(),VIEWTRANSPOSE:un(),PROJECTIONTRANSPOSE:un(),WORLDVIEWTRANSPOSE:un(),VIEWPROJECTIONTRANSPOSE:un(),WORLDVIEWPROJECTIONTRANSPOSE:un(),WORLDINVERSETRANSPOSE:un(),VIEWINVERSETRANSPOSE:un(),PROJECTIONINVERSETRANSPOSE:un(),WORLDVIEWINVERSETRANSPOSE:un(),VIEWPROJECTIONINVERSETRANSPOSE:un(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:un()};Zi.COLOR_BUFFER_BIT=T.COLOR_BUFFER_BIT,Zi.DEPTH_BUFFER_BIT=T.DEPTH_BUFFER_BIT,Zi.STENCIL_BUFFER_BIT=T.STENCIL_BUFFER_BIT;var za=Zi,Ge=function(t,i,l){t=t||0,i=i||0,l=l||0,this.array=Wt.fromValues(t,i,l),this._dirty=!0};Ge.prototype={constructor:Ge,add:function(t){return Wt.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new Ge(this.x,this.y,this.z)},copy:function(t){return Wt.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return Wt.cross(this.array,t.array,i.array),this._dirty=!0,this},dist:function(t){return Wt.dist(this.array,t.array)},distance:function(t){return Wt.distance(this.array,t.array)},div:function(t){return Wt.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Wt.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Wt.dot(this.array,t.array)},len:function(){return Wt.len(this.array)},length:function(){return Wt.length(this.array)},lerp:function(t,i,l){return Wt.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return Wt.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Wt.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Wt.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Wt.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Wt.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Wt.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Wt.random(this.array,t),this._dirty=!0,this},scale:function(t){return Wt.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return Wt.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return Wt.sqrDist(this.array,t.array)},squaredDistance:function(t){return Wt.squaredDistance(this.array,t.array)},sqrLen:function(){return Wt.sqrLen(this.array)},squaredLength:function(){return Wt.squaredLength(this.array)},sub:function(t){return Wt.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Wt.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return Wt.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Wt.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return Wt.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var i=this.array;if(t=t.array,t[15]===0){var l=-1/i[2];i[0]=t[0]*i[0]*l,i[1]=t[5]*i[1]*l,i[2]=(t[10]*i[2]+t[14])*l}else i[0]=t[0]*i[0]+t[12],i[1]=t[5]*i[1]+t[13],i[2]=t[10]*i[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,i){Ge.eulerFromQuat(this,t,i)},eulerFromMat3:function(t,i){Ge.eulerFromMat3(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ao=Object.defineProperty;if(ao){var ll=Ge.prototype;ao(ll,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ao(ll,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ao(ll,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}Ge.add=function(t,i,l){return Wt.add(t.array,i.array,l.array),t._dirty=!0,t},Ge.set=function(t,i,l,f){Wt.set(t.array,i,l,f),t._dirty=!0},Ge.copy=function(t,i){return Wt.copy(t.array,i.array),t._dirty=!0,t},Ge.cross=function(t,i,l){return Wt.cross(t.array,i.array,l.array),t._dirty=!0,t},Ge.dist=function(t,i){return Wt.distance(t.array,i.array)},Ge.distance=Ge.dist,Ge.div=function(t,i,l){return Wt.divide(t.array,i.array,l.array),t._dirty=!0,t},Ge.divide=Ge.div,Ge.dot=function(t,i){return Wt.dot(t.array,i.array)},Ge.len=function(t){return Wt.length(t.array)},Ge.lerp=function(t,i,l,f){return Wt.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},Ge.min=function(t,i,l){return Wt.min(t.array,i.array,l.array),t._dirty=!0,t},Ge.max=function(t,i,l){return Wt.max(t.array,i.array,l.array),t._dirty=!0,t},Ge.mul=function(t,i,l){return Wt.multiply(t.array,i.array,l.array),t._dirty=!0,t},Ge.multiply=Ge.mul,Ge.negate=function(t,i){return Wt.negate(t.array,i.array),t._dirty=!0,t},Ge.normalize=function(t,i){return Wt.normalize(t.array,i.array),t._dirty=!0,t},Ge.random=function(t,i){return Wt.random(t.array,i),t._dirty=!0,t},Ge.scale=function(t,i,l){return Wt.scale(t.array,i.array,l),t._dirty=!0,t},Ge.scaleAndAdd=function(t,i,l,f){return Wt.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},Ge.sqrDist=function(t,i){return Wt.sqrDist(t.array,i.array)},Ge.squaredDistance=Ge.sqrDist,Ge.sqrLen=function(t){return Wt.sqrLen(t.array)},Ge.squaredLength=Ge.sqrLen,Ge.sub=function(t,i,l){return Wt.subtract(t.array,i.array,l.array),t._dirty=!0,t},Ge.subtract=Ge.sub,Ge.transformMat3=function(t,i,l){return Wt.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},Ge.transformMat4=function(t,i,l){return Wt.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},Ge.transformQuat=function(t,i,l){return Wt.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};function ni(t,i,l){return t<i?i:t>l?l:t}var cn=Math.atan2,Gi=Math.asin,Va=Math.abs;Ge.eulerFromQuat=function(t,i,_t){t._dirty=!0,i=i.array;var f=t.array,c=i[0],p=i[1],y=i[2],x=i[3],D=c*c,E=p*p,N=y*y,$=x*x,_t=(_t||"XYZ").toUpperCase();switch(_t){case"XYZ":f[0]=cn(2*(c*x-p*y),$-D-E+N),f[1]=Gi(ni(2*(c*y+p*x),-1,1)),f[2]=cn(2*(y*x-c*p),$+D-E-N);break;case"YXZ":f[0]=Gi(ni(2*(c*x-p*y),-1,1)),f[1]=cn(2*(c*y+p*x),$-D-E+N),f[2]=cn(2*(c*p+y*x),$-D+E-N);break;case"ZXY":f[0]=Gi(ni(2*(c*x+p*y),-1,1)),f[1]=cn(2*(p*x-y*c),$-D-E+N),f[2]=cn(2*(y*x-c*p),$-D+E-N);break;case"ZYX":f[0]=cn(2*(c*x+y*p),$-D-E+N),f[1]=Gi(ni(2*(p*x-c*y),-1,1)),f[2]=cn(2*(c*p+y*x),$+D-E-N);break;case"YZX":f[0]=cn(2*(c*x-y*p),$-D+E-N),f[1]=cn(2*(p*x-c*y),$+D-E-N),f[2]=Gi(ni(2*(c*p+y*x),-1,1));break;case"XZY":f[0]=cn(2*(c*x+p*y),$-D+E-N),f[1]=cn(2*(c*y+p*x),$+D-E-N),f[2]=Gi(ni(2*(y*x-c*p),-1,1));break;default:console.warn("Unkown order: "+_t)}return t},Ge.eulerFromMat3=function(t,i,At){var f=i.array,c=f[0],p=f[3],y=f[6],x=f[1],D=f[4],E=f[7],N=f[2],$=f[5],_t=f[8],pt=t.array,At=(At||"XYZ").toUpperCase();switch(At){case"XYZ":pt[1]=Gi(ni(y,-1,1)),Va(y)<.99999?(pt[0]=cn(-E,_t),pt[2]=cn(-p,c)):(pt[0]=cn($,D),pt[2]=0);break;case"YXZ":pt[0]=Gi(-ni(E,-1,1)),Va(E)<.99999?(pt[1]=cn(y,_t),pt[2]=cn(x,D)):(pt[1]=cn(-N,c),pt[2]=0);break;case"ZXY":pt[0]=Gi(ni($,-1,1)),Va($)<.99999?(pt[1]=cn(-N,_t),pt[2]=cn(-p,D)):(pt[1]=0,pt[2]=cn(x,c));break;case"ZYX":pt[1]=Gi(-ni(N,-1,1)),Va(N)<.99999?(pt[0]=cn($,_t),pt[2]=cn(x,c)):(pt[0]=0,pt[2]=cn(-p,D));break;case"YZX":pt[2]=Gi(ni(x,-1,1)),Va(x)<.99999?(pt[0]=cn(-E,D),pt[1]=cn(-N,c)):(pt[0]=0,pt[1]=cn(y,_t));break;case"XZY":pt[2]=Gi(-ni(p,-1,1)),Va(p)<.99999?(pt[0]=cn($,D),pt[1]=cn(y,c)):(pt[0]=cn(-E,_t),pt[1]=0);break;default:console.warn("Unkown order: "+At)}return t._dirty=!0,t},Object.defineProperties(Ge,{POSITIVE_X:{get:function(){return new Ge(1,0,0)}},NEGATIVE_X:{get:function(){return new Ge(-1,0,0)}},POSITIVE_Y:{get:function(){return new Ge(0,1,0)}},NEGATIVE_Y:{get:function(){return new Ge(0,-1,0)}},POSITIVE_Z:{get:function(){return new Ge(0,0,1)}},NEGATIVE_Z:{get:function(){return new Ge(0,0,-1)}},UP:{get:function(){return new Ge(0,1,0)}},ZERO:{get:function(){return new Ge}}});var sr=Ge,Ma=1e-5,oa=function(t,i){this.origin=t||new sr,this.direction=i||new sr};oa.prototype={constructor:oa,intersectPlane:function(t,i){var l=t.normal.array,f=t.distance,c=this.origin.array,p=this.direction.array,y=Wt.dot(l,p);if(y===0)return null;i||(i=new sr);var x=(Wt.dot(l,c)-f)/y;return Wt.scaleAndAdd(i.array,c,p,-x),i._dirty=!0,i},mirrorAgainstPlane:function(t){var i=Wt.dot(t.normal.array,this.direction.array);Wt.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,-i*2),this.direction._dirty=!0},distanceToPoint:function(){var t=Wt.create();return function(i){Wt.sub(t,i,this.origin.array);var l=Wt.dot(t,this.direction.array);if(l<0)return Wt.distance(this.origin.array,i);var f=Wt.lenSquared(t);return Math.sqrt(f-l*l)}}(),intersectSphere:function(){var t=Wt.create();return function(i,l,f){var c=this.origin.array,p=this.direction.array;i=i.array,Wt.sub(t,i,c);var y=Wt.dot(t,p),x=Wt.squaredLength(t),D=x-y*y,E=l*l;if(!(D>E)){var N=Math.sqrt(E-D),$=y-N,_t=y+N;return f||(f=new sr),$<0?_t<0?null:(Wt.scaleAndAdd(f.array,c,p,_t),f):(Wt.scaleAndAdd(f.array,c,p,$),f)}}}(),intersectBoundingBox:function(t,i){var l=this.direction.array,f=this.origin.array,c=t.min.array,p=t.max.array,y=1/l[0],x=1/l[1],D=1/l[2],E,N,$,_t,pt,At;if(y>=0?(E=(c[0]-f[0])*y,N=(p[0]-f[0])*y):(N=(c[0]-f[0])*y,E=(p[0]-f[0])*y),x>=0?($=(c[1]-f[1])*x,_t=(p[1]-f[1])*x):(_t=(c[1]-f[1])*x,$=(p[1]-f[1])*x),E>_t||$>N||(($>E||E!==E)&&(E=$),(_t<N||N!==N)&&(N=_t),D>=0?(pt=(c[2]-f[2])*D,At=(p[2]-f[2])*D):(At=(c[2]-f[2])*D,pt=(p[2]-f[2])*D),E>At||pt>N)||((pt>E||E!==E)&&(E=pt),(At<N||N!==N)&&(N=At),N<0))return null;var Mt=E>=0?E:N;return i||(i=new sr),Wt.scaleAndAdd(i.array,f,l,Mt),i},intersectTriangle:function(){var t=Wt.create(),i=Wt.create(),l=Wt.create(),f=Wt.create();return function(c,p,y,x,D,E){var N=this.direction.array,$=this.origin.array;c=c.array,p=p.array,y=y.array,Wt.sub(t,p,c),Wt.sub(i,y,c),Wt.cross(f,i,N);var _t=Wt.dot(t,f);if(x){if(_t>-Ma)return null}else if(_t>-Ma&&_t<Ma)return null;Wt.sub(l,$,c);var pt=Wt.dot(f,l)/_t;if(pt<0||pt>1)return null;Wt.cross(f,t,l);var At=Wt.dot(N,f)/_t;if(At<0||At>1||pt+At>1)return null;Wt.cross(f,t,i);var Mt=-Wt.dot(l,f)/_t;return Mt<0?null:(D||(D=new sr),E&&sr.set(E,1-pt-At,pt,At),Wt.scaleAndAdd(D.array,$,N,Mt),D)}}(),applyTransform:function(t){sr.add(this.direction,this.direction,this.origin),sr.transformMat4(this.origin,this.origin,t),sr.transformMat4(this.direction,this.direction,t),sr.sub(this.direction,this.direction,this.origin),sr.normalize(this.direction,this.direction)},copy:function(t){sr.copy(this.origin,t.origin),sr.copy(this.direction,t.direction)},clone:function(){var t=new oa;return t.copy(this),t}};var Io=oa,jr={};jr.create=function(){var t=new Vr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},jr.clone=function(t){var i=new Vr(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},jr.fromValues=function(t,i,l,f){var c=new Vr(4);return c[0]=t,c[1]=i,c[2]=l,c[3]=f,c},jr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},jr.set=function(t,i,l,f,c){return t[0]=i,t[1]=l,t[2]=f,t[3]=c,t},jr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t[3]=i[3]+l[3],t},jr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t[3]=i[3]-l[3],t},jr.sub=jr.subtract,jr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t[3]=i[3]*l[3],t},jr.mul=jr.multiply,jr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t[3]=i[3]/l[3],t},jr.div=jr.divide,jr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t[3]=Math.min(i[3],l[3]),t},jr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t[3]=Math.max(i[3],l[3]),t},jr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t[3]=i[3]*l,t},jr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t[3]=i[3]+l[3]*f,t},jr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2],p=i[3]-t[3];return Math.sqrt(l*l+f*f+c*c+p*p)},jr.dist=jr.distance,jr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2],p=i[3]-t[3];return l*l+f*f+c*c+p*p},jr.sqrDist=jr.squaredDistance,jr.length=function(t){var i=t[0],l=t[1],f=t[2],c=t[3];return Math.sqrt(i*i+l*l+f*f+c*c)},jr.len=jr.length,jr.squaredLength=function(t){var i=t[0],l=t[1],f=t[2],c=t[3];return i*i+l*l+f*f+c*c},jr.sqrLen=jr.squaredLength,jr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=-i[3],t},jr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t[3]=1/i[3],t},jr.normalize=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*l+f*f+c*c+p*p;return y>0&&(y=1/Math.sqrt(y),t[0]=i[0]*y,t[1]=i[1]*y,t[2]=i[2]*y,t[3]=i[3]*y),t},jr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]},jr.lerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2],x=i[3];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t[3]=x+f*(l[3]-x),t},jr.random=function(t,i){return i=i||1,t[0]=sn(),t[1]=sn(),t[2]=sn(),t[3]=sn(),jr.normalize(t,t),jr.scale(t,t,i),t},jr.transformMat4=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3];return t[0]=l[0]*f+l[4]*c+l[8]*p+l[12]*y,t[1]=l[1]*f+l[5]*c+l[9]*p+l[13]*y,t[2]=l[2]*f+l[6]*c+l[10]*p+l[14]*y,t[3]=l[3]*f+l[7]*c+l[11]*p+l[15]*y,t},jr.transformQuat=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],D=l[2],E=l[3],N=E*f+x*p-D*c,$=E*c+D*f-y*p,_t=E*p+y*c-x*f,pt=-y*f-x*c-D*p;return t[0]=N*E+pt*-y+$*-D-_t*-x,t[1]=$*E+pt*-x+_t*-y-N*-D,t[2]=_t*E+pt*-D+N*-x-$*-y,t},jr.forEach=function(){var t=jr.create();return function(i,l,f,c,p,y){var x,D;for(l||(l=4),f||(f=0),c?D=Math.min(c*l+f,i.length):D=i.length,x=f;x<D;x+=l)t[0]=i[x],t[1]=i[x+1],t[2]=i[x+2],t[3]=i[x+3],p(t,t,y),i[x]=t[0],i[x+1]=t[1],i[x+2]=t[2],i[x+3]=t[3];return i}}();var vr=jr,En={};En.create=function(){var t=new Vr(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},En.fromMat4=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[4],t[4]=i[5],t[5]=i[6],t[6]=i[8],t[7]=i[9],t[8]=i[10],t},En.clone=function(t){var i=new Vr(9);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i},En.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},En.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},En.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],c=i[5];t[1]=i[3],t[2]=i[6],t[3]=l,t[5]=i[7],t[6]=f,t[7]=c}else t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8];return t},En.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=i[6],E=i[7],N=i[8],$=N*y-x*E,_t=-N*p+x*D,pt=E*p-y*D,At=l*$+f*_t+c*pt;return At?(At=1/At,t[0]=$*At,t[1]=(-N*f+c*E)*At,t[2]=(x*f-c*y)*At,t[3]=_t*At,t[4]=(N*l-c*D)*At,t[5]=(-x*l+c*p)*At,t[6]=pt*At,t[7]=(-E*l+f*D)*At,t[8]=(y*l-f*p)*At,t):null},En.adjoint=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=i[6],E=i[7],N=i[8];return t[0]=y*N-x*E,t[1]=c*E-f*N,t[2]=f*x-c*y,t[3]=x*D-p*N,t[4]=l*N-c*D,t[5]=c*p-l*x,t[6]=p*E-y*D,t[7]=f*D-l*E,t[8]=l*y-f*p,t},En.determinant=function(t){var i=t[0],l=t[1],f=t[2],c=t[3],p=t[4],y=t[5],x=t[6],D=t[7],E=t[8];return i*(E*p-y*D)+l*(-E*c+y*x)+f*(D*c-p*x)},En.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=i[6],N=i[7],$=i[8],_t=l[0],pt=l[1],At=l[2],Mt=l[3],Nt=l[4],kt=l[5],te=l[6],qt=l[7],jt=l[8];return t[0]=_t*f+pt*y+At*E,t[1]=_t*c+pt*x+At*N,t[2]=_t*p+pt*D+At*$,t[3]=Mt*f+Nt*y+kt*E,t[4]=Mt*c+Nt*x+kt*N,t[5]=Mt*p+Nt*D+kt*$,t[6]=te*f+qt*y+jt*E,t[7]=te*c+qt*x+jt*N,t[8]=te*p+qt*D+jt*$,t},En.mul=En.multiply,En.translate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=i[6],N=i[7],$=i[8],_t=l[0],pt=l[1];return t[0]=f,t[1]=c,t[2]=p,t[3]=y,t[4]=x,t[5]=D,t[6]=_t*f+pt*y+E,t[7]=_t*c+pt*x+N,t[8]=_t*p+pt*D+$,t},En.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=i[6],N=i[7],$=i[8],_t=Math.sin(l),pt=Math.cos(l);return t[0]=pt*f+_t*y,t[1]=pt*c+_t*x,t[2]=pt*p+_t*D,t[3]=pt*y-_t*f,t[4]=pt*x-_t*c,t[5]=pt*D-_t*p,t[6]=E,t[7]=N,t[8]=$,t},En.scale=function(t,i,l){var f=l[0],c=l[1];return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=c*i[3],t[4]=c*i[4],t[5]=c*i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},En.fromMat2d=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=0,t[3]=i[2],t[4]=i[3],t[5]=0,t[6]=i[4],t[7]=i[5],t[8]=1,t},En.fromQuat=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l+l,x=f+f,D=c+c,E=l*y,N=f*y,$=f*x,_t=c*y,pt=c*x,At=c*D,Mt=p*y,Nt=p*x,kt=p*D;return t[0]=1-$-At,t[3]=N-kt,t[6]=_t+Nt,t[1]=N+kt,t[4]=1-E-At,t[7]=pt-Mt,t[2]=_t-Nt,t[5]=pt+Mt,t[8]=1-E-$,t},En.normalFromMat4=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=i[6],E=i[7],N=i[8],$=i[9],_t=i[10],pt=i[11],At=i[12],Mt=i[13],Nt=i[14],kt=i[15],te=l*x-f*y,qt=l*D-c*y,jt=l*E-p*y,fe=f*D-c*x,ue=f*E-p*x,Te=c*E-p*D,xe=N*Mt-$*At,Ie=N*Nt-_t*At,je=N*kt-pt*At,Ve=$*Nt-_t*Mt,Je=$*kt-pt*Mt,er=_t*kt-pt*Nt,Xe=te*er-qt*Je+jt*Ve+fe*je-ue*Ie+Te*xe;return Xe?(Xe=1/Xe,t[0]=(x*er-D*Je+E*Ve)*Xe,t[1]=(D*je-y*er-E*Ie)*Xe,t[2]=(y*Je-x*je+E*xe)*Xe,t[3]=(c*Je-f*er-p*Ve)*Xe,t[4]=(l*er-c*je+p*Ie)*Xe,t[5]=(f*je-l*Je-p*xe)*Xe,t[6]=(Mt*Te-Nt*ue+kt*fe)*Xe,t[7]=(Nt*jt-At*Te-kt*qt)*Xe,t[8]=(At*ue-Mt*jt+kt*te)*Xe,t):null},En.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var qr=En,an={};an.create=function(){var t=new Vr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},an.rotationTo=function(){var t=Wt.create(),i=Wt.fromValues(1,0,0),l=Wt.fromValues(0,1,0);return function(f,c,p){var y=Wt.dot(c,p);return y<-.999999?(Wt.cross(t,i,c),Wt.length(t)<1e-6&&Wt.cross(t,l,c),Wt.normalize(t,t),an.setAxisAngle(f,t,Math.PI),f):y>.999999?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(Wt.cross(t,c,p),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=1+y,an.normalize(f,f))}}(),an.setAxes=function(){var t=qr.create();return function(i,l,f,c){return t[0]=f[0],t[3]=f[1],t[6]=f[2],t[1]=c[0],t[4]=c[1],t[7]=c[2],t[2]=-l[0],t[5]=-l[1],t[8]=-l[2],an.normalize(i,an.fromMat3(i,t))}}(),an.clone=vr.clone,an.fromValues=vr.fromValues,an.copy=vr.copy,an.set=vr.set,an.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},an.setAxisAngle=function(t,i,l){l=l*.5;var f=Math.sin(l);return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=Math.cos(l),t},an.add=vr.add,an.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],D=l[1],E=l[2],N=l[3];return t[0]=f*N+y*x+c*E-p*D,t[1]=c*N+y*D+p*x-f*E,t[2]=p*N+y*E+f*D-c*x,t[3]=y*N-f*x-c*D-p*E,t},an.mul=an.multiply,an.scale=vr.scale,an.rotateX=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),D=Math.cos(l);return t[0]=f*D+y*x,t[1]=c*D+p*x,t[2]=p*D-c*x,t[3]=y*D-f*x,t},an.rotateY=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),D=Math.cos(l);return t[0]=f*D-p*x,t[1]=c*D+y*x,t[2]=p*D+f*x,t[3]=y*D-c*x,t},an.rotateZ=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),D=Math.cos(l);return t[0]=f*D+c*x,t[1]=c*D-f*x,t[2]=p*D+y*x,t[3]=y*D-p*x,t},an.calculateW=function(t,i){var l=i[0],f=i[1],c=i[2];return t[0]=l,t[1]=f,t[2]=c,t[3]=Math.sqrt(Math.abs(1-l*l-f*f-c*c)),t},an.dot=vr.dot,an.lerp=vr.lerp,an.slerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2],x=i[3],D=l[0],E=l[1],N=l[2],$=l[3],_t,pt,At,Mt,Nt;return pt=c*D+p*E+y*N+x*$,pt<0&&(pt=-pt,D=-D,E=-E,N=-N,$=-$),1-pt>1e-6?(_t=Math.acos(pt),At=Math.sin(_t),Mt=Math.sin((1-f)*_t)/At,Nt=Math.sin(f*_t)/At):(Mt=1-f,Nt=f),t[0]=Mt*c+Nt*D,t[1]=Mt*p+Nt*E,t[2]=Mt*y+Nt*N,t[3]=Mt*x+Nt*$,t},an.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*l+f*f+c*c+p*p,x=y?1/y:0;return t[0]=-l*x,t[1]=-f*x,t[2]=-c*x,t[3]=p*x,t},an.conjugate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=i[3],t},an.length=vr.length,an.len=an.length,an.squaredLength=vr.squaredLength,an.sqrLen=an.squaredLength,an.normalize=vr.normalize,an.fromMat3=function(t,i){var l=i[0]+i[4]+i[8],f;if(l>0)f=Math.sqrt(l+1),t[3]=.5*f,f=.5/f,t[0]=(i[5]-i[7])*f,t[1]=(i[6]-i[2])*f,t[2]=(i[1]-i[3])*f;else{var c=0;i[4]>i[0]&&(c=1),i[8]>i[c*3+c]&&(c=2);var p=(c+1)%3,y=(c+2)%3;f=Math.sqrt(i[c*3+c]-i[p*3+p]-i[y*3+y]+1),t[c]=.5*f,f=.5/f,t[3]=(i[p*3+y]-i[y*3+p])*f,t[p]=(i[p*3+c]+i[c*3+p])*f,t[y]=(i[y*3+c]+i[c*3+y])*f}return t};var Ar=an,We=function(){this._axisX=new sr,this._axisY=new sr,this._axisZ=new sr,this.array=nr.create(),this._dirty=!0};We.prototype={constructor:We,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return nr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new We().copy(this)},copy:function(t){return nr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return nr.determinant(this.array)},fromQuat:function(t){return nr.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,i){return nr.fromRotationTranslation(this.array,t.array,i.array),this._dirty=!0,this},fromMat2d:function(t){return We.fromMat2d(this,t),this},frustum:function(t,i,l,f,c,p){return nr.frustum(this.array,t,i,l,f,c,p),this._dirty=!0,this},identity:function(){return nr.identity(this.array),this._dirty=!0,this},invert:function(){return nr.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,i,l){return nr.lookAt(this.array,t.array,i.array,l.array),this._dirty=!0,this},mul:function(t){return nr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return nr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return nr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return nr.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,i,l,f,c,p){return nr.ortho(this.array,t,i,l,f,c,p),this._dirty=!0,this},perspective:function(t,i,l,f){return nr.perspective(this.array,t,i,l,f),this._dirty=!0,this},rotate:function(t,i){return nr.rotate(this.array,this.array,t,i.array),this._dirty=!0,this},rotateX:function(t){return nr.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return nr.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return nr.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return nr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return nr.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return nr.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=Wt.create(),i=Wt.create(),l=Wt.create(),f=qr.create();return function(c,p,y){var x=this.array;Wt.set(t,x[0],x[1],x[2]),Wt.set(i,x[4],x[5],x[6]),Wt.set(l,x[8],x[9],x[10]);var D=Wt.length(t),E=Wt.length(i),N=Wt.length(l),$=this.determinant();$<0&&(D=-D),c&&c.set(D,E,N),y.set(x[12],x[13],x[14]),qr.fromMat4(f,x),f[0]/=D,f[1]/=D,f[2]/=D,f[3]/=E,f[4]/=E,f[5]/=E,f[6]/=N,f[7]/=N,f[8]/=N,Ar.fromMat3(p.array,f),Ar.normalize(p.array,p.array),p._dirty=!0,y._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var _i=Object.defineProperty;if(_i){var ma=We.prototype;_i(ma,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var i=this.array;t=t.array,i[8]=t[0],i[9]=t[1],i[10]=t[2],this._dirty=!0}}),_i(ma,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var i=this.array;t=t.array,i[4]=t[0],i[5]=t[1],i[6]=t[2],this._dirty=!0}}),_i(ma,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var i=this.array;t=t.array,i[0]=t[0],i[1]=t[1],i[2]=t[2],this._dirty=!0}})}We.adjoint=function(t,i){return nr.adjoint(t.array,i.array),t._dirty=!0,t},We.copy=function(t,i){return nr.copy(t.array,i.array),t._dirty=!0,t},We.determinant=function(t){return nr.determinant(t.array)},We.identity=function(t){return nr.identity(t.array),t._dirty=!0,t},We.ortho=function(t,i,l,f,c,p,y){return nr.ortho(t.array,i,l,f,c,p,y),t._dirty=!0,t},We.perspective=function(t,i,l,f,c){return nr.perspective(t.array,i,l,f,c),t._dirty=!0,t},We.lookAt=function(t,i,l,f){return nr.lookAt(t.array,i.array,l.array,f.array),t._dirty=!0,t},We.invert=function(t,i){return nr.invert(t.array,i.array),t._dirty=!0,t},We.mul=function(t,i,l){return nr.mul(t.array,i.array,l.array),t._dirty=!0,t},We.multiply=We.mul,We.fromQuat=function(t,i){return nr.fromQuat(t.array,i.array),t._dirty=!0,t},We.fromRotationTranslation=function(t,i,l){return nr.fromRotationTranslation(t.array,i.array,l.array),t._dirty=!0,t},We.fromMat2d=function(f,l){f._dirty=!0;var l=l.array,f=f.array;return f[0]=l[0],f[4]=l[2],f[12]=l[4],f[1]=l[1],f[5]=l[3],f[13]=l[5],f},We.rotate=function(t,i,l,f){return nr.rotate(t.array,i.array,l,f.array),t._dirty=!0,t},We.rotateX=function(t,i,l){return nr.rotateX(t.array,i.array,l),t._dirty=!0,t},We.rotateY=function(t,i,l){return nr.rotateY(t.array,i.array,l),t._dirty=!0,t},We.rotateZ=function(t,i,l){return nr.rotateZ(t.array,i.array,l),t._dirty=!0,t},We.scale=function(t,i,l){return nr.scale(t.array,i.array,l.array),t._dirty=!0,t},We.transpose=function(t,i){return nr.transpose(t.array,i.array),t._dirty=!0,t},We.translate=function(t,i,l){return nr.translate(t.array,i.array,l.array),t._dirty=!0,t};var Tr=We,tn=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f===void 0?1:f,this.array=Ar.fromValues(t,i,l,f),this._dirty=!0};tn.prototype={constructor:tn,add:function(t){return Ar.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return Ar.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new tn(this.x,this.y,this.z,this.w)},conjugate:function(){return Ar.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return Ar.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return Ar.dot(this.array,t.array)},fromMat3:function(t){return Ar.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=qr.create();return function(i){return qr.fromMat4(t,i.array),qr.transpose(t,t),Ar.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return Ar.identity(this.array),this._dirty=!0,this},invert:function(){return Ar.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Ar.len(this.array)},length:function(){return Ar.length(this.array)},lerp:function(t,i,l){return Ar.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},mul:function(t){return Ar.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Ar.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Ar.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Ar.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return Ar.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return Ar.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return Ar.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return Ar.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,i){return Ar.rotationTo(this.array,t.array,i.array),this._dirty=!0,this},setAxes:function(t,i,l){return Ar.setAxes(this.array,t.array,i.array,l.array),this._dirty=!0,this},setAxisAngle:function(t,i){return Ar.setAxisAngle(this.array,t.array,i),this._dirty=!0,this},slerp:function(t,i,l){return Ar.slerp(this.array,t.array,i.array,l),this._dirty=!0,this},sqrLen:function(){return Ar.sqrLen(this.array)},squaredLength:function(){return Ar.squaredLength(this.array)},fromEuler:function(t,i){return tn.fromEuler(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ka=Object.defineProperty;if(ka){var Ro=tn.prototype;ka(Ro,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ka(Ro,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ka(Ro,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),ka(Ro,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}tn.add=function(t,i,l){return Ar.add(t.array,i.array,l.array),t._dirty=!0,t},tn.set=function(t,i,l,f,c){Ar.set(t.array,i,l,f,c),t._dirty=!0},tn.copy=function(t,i){return Ar.copy(t.array,i.array),t._dirty=!0,t},tn.calculateW=function(t,i){return Ar.calculateW(t.array,i.array),t._dirty=!0,t},tn.conjugate=function(t,i){return Ar.conjugate(t.array,i.array),t._dirty=!0,t},tn.identity=function(t){return Ar.identity(t.array),t._dirty=!0,t},tn.invert=function(t,i){return Ar.invert(t.array,i.array),t._dirty=!0,t},tn.dot=function(t,i){return Ar.dot(t.array,i.array)},tn.len=function(t){return Ar.length(t.array)},tn.lerp=function(t,i,l,f){return Ar.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},tn.slerp=function(t,i,l,f){return Ar.slerp(t.array,i.array,l.array,f),t._dirty=!0,t},tn.mul=function(t,i,l){return Ar.multiply(t.array,i.array,l.array),t._dirty=!0,t},tn.multiply=tn.mul,tn.rotateX=function(t,i,l){return Ar.rotateX(t.array,i.array,l),t._dirty=!0,t},tn.rotateY=function(t,i,l){return Ar.rotateY(t.array,i.array,l),t._dirty=!0,t},tn.rotateZ=function(t,i,l){return Ar.rotateZ(t.array,i.array,l),t._dirty=!0,t},tn.setAxisAngle=function(t,i,l){return Ar.setAxisAngle(t.array,i.array,l),t._dirty=!0,t},tn.normalize=function(t,i){return Ar.normalize(t.array,i.array),t._dirty=!0,t},tn.sqrLen=function(t){return Ar.sqrLen(t.array)},tn.squaredLength=tn.sqrLen,tn.fromMat3=function(t,i){return Ar.fromMat3(t.array,i.array),t._dirty=!0,t},tn.setAxes=function(t,i,l,f){return Ar.setAxes(t.array,i.array,l.array,f.array),t._dirty=!0,t},tn.rotationTo=function(t,i,l){return Ar.rotationTo(t.array,i.array,l.array),t._dirty=!0,t},tn.fromEuler=function(t,i,N){t._dirty=!0,i=i.array;var f=t.array,c=Math.cos(i[0]/2),p=Math.cos(i[1]/2),y=Math.cos(i[2]/2),x=Math.sin(i[0]/2),D=Math.sin(i[1]/2),E=Math.sin(i[2]/2),N=(N||"XYZ").toUpperCase();switch(N){case"XYZ":f[0]=x*p*y+c*D*E,f[1]=c*D*y-x*p*E,f[2]=c*p*E+x*D*y,f[3]=c*p*y-x*D*E;break;case"YXZ":f[0]=x*p*y+c*D*E,f[1]=c*D*y-x*p*E,f[2]=c*p*E-x*D*y,f[3]=c*p*y+x*D*E;break;case"ZXY":f[0]=x*p*y-c*D*E,f[1]=c*D*y+x*p*E,f[2]=c*p*E+x*D*y,f[3]=c*p*y-x*D*E;break;case"ZYX":f[0]=x*p*y-c*D*E,f[1]=c*D*y+x*p*E,f[2]=c*p*E-x*D*y,f[3]=c*p*y+x*D*E;break;case"YZX":f[0]=x*p*y+c*D*E,f[1]=c*D*y+x*p*E,f[2]=c*p*E-x*D*y,f[3]=c*p*y-x*D*E;break;case"XZY":f[0]=x*p*y-c*D*E,f[1]=c*D*y-x*p*E,f[2]=c*p*E+x*D*y,f[3]=c*p*y+x*D*E;break}};var nu=tn,Ca=Wt.set,Oo=Wt.copy,Mn=function(t,i){this.min=t||new sr(1/0,1/0,1/0),this.max=i||new sr(-1/0,-1/0,-1/0),this.vertices=null};Mn.prototype={constructor:Mn,updateFromVertices:function(t){if(t.length>0){var i=this.min,l=this.max,f=i.array,c=l.array;Oo(f,t[0]),Oo(c,t[0]);for(var p=1;p<t.length;p++){var y=t[p];y[0]<f[0]&&(f[0]=y[0]),y[1]<f[1]&&(f[1]=y[1]),y[2]<f[2]&&(f[2]=y[2]),y[0]>c[0]&&(c[0]=y[0]),y[1]>c[1]&&(c[1]=y[1]),y[2]>c[2]&&(c[2]=y[2])}i._dirty=!0,l._dirty=!0}},union:function(t){var i=this.min,l=this.max;return Wt.min(i.array,i.array,t.min.array),Wt.max(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersection:function(t){var i=this.min,l=this.max;return Wt.max(i.array,i.array,t.min.array),Wt.min(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersectBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,c=t.max.array;return!(i[0]>c[0]||i[1]>c[1]||i[2]>c[2]||l[0]<f[0]||l[1]<f[1]||l[2]<f[2])},containBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,c=t.max.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=c[0]&&l[1]>=c[1]&&l[2]>=c[2]},containPoint:function(t){var i=this.min.array,l=this.max.array,f=t.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=f[0]&&l[1]>=f[1]&&l[2]>=f[2]},isFinite:function(){var t=this.min.array,i=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(i[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=Wt.create(),i=Wt.create(),l=Wt.create(),f=Wt.create(),c=Wt.create(),p=Wt.create();return function(y,x){var D=y.min.array,E=y.max.array,N=x.array;return t[0]=N[0]*D[0],t[1]=N[1]*D[0],t[2]=N[2]*D[0],i[0]=N[0]*E[0],i[1]=N[1]*E[0],i[2]=N[2]*E[0],l[0]=N[4]*D[1],l[1]=N[5]*D[1],l[2]=N[6]*D[1],f[0]=N[4]*E[1],f[1]=N[5]*E[1],f[2]=N[6]*E[1],c[0]=N[8]*D[2],c[1]=N[9]*D[2],c[2]=N[10]*D[2],p[0]=N[8]*E[2],p[1]=N[9]*E[2],p[2]=N[10]*E[2],D=this.min.array,E=this.max.array,D[0]=Math.min(t[0],i[0])+Math.min(l[0],f[0])+Math.min(c[0],p[0])+N[12],D[1]=Math.min(t[1],i[1])+Math.min(l[1],f[1])+Math.min(c[1],p[1])+N[13],D[2]=Math.min(t[2],i[2])+Math.min(l[2],f[2])+Math.min(c[2],p[2])+N[14],E[0]=Math.max(t[0],i[0])+Math.max(l[0],f[0])+Math.max(c[0],p[0])+N[12],E[1]=Math.max(t[1],i[1])+Math.max(l[1],f[1])+Math.max(c[1],p[1])+N[13],E[2]=Math.max(t[2],i[2])+Math.max(l[2],f[2])+Math.max(c[2],p[2])+N[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var i=this.min.array,l=this.max.array,f=t.array,c=i[0],p=i[1],y=i[2],x=l[0],D=l[1],E=i[2],N=l[0],$=l[1],_t=l[2];if(f[15]===1)i[0]=f[0]*c+f[12],i[1]=f[5]*p+f[13],l[2]=f[10]*y+f[14],l[0]=f[0]*N+f[12],l[1]=f[5]*$+f[13],i[2]=f[10]*_t+f[14];else{var pt=-1/y;i[0]=f[0]*c*pt,i[1]=f[5]*p*pt,l[2]=(f[10]*y+f[14])*pt,pt=-1/E,l[0]=f[0]*x*pt,l[1]=f[5]*D*pt,pt=-1/_t,i[2]=(f[10]*_t+f[14])*pt}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var i=0;i<8;i++)t[i]=Wt.fromValues(0,0,0);this.vertices=t}var l=this.min.array,f=this.max.array;return Ca(t[0],l[0],l[1],l[2]),Ca(t[1],l[0],f[1],l[2]),Ca(t[2],f[0],l[1],l[2]),Ca(t[3],f[0],f[1],l[2]),Ca(t[4],l[0],l[1],f[2]),Ca(t[5],l[0],f[1],f[2]),Ca(t[6],f[0],l[1],f[2]),Ca(t[7],f[0],f[1],f[2]),this},copy:function(t){var i=this.min,l=this.max;return Oo(i.array,t.min.array),Oo(l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},clone:function(){var t=new Mn;return t.copy(this),t}};var Kr=Mn,Ei=0,De=X.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+Ei++),this.position||(this.position=new sr),this.rotation||(this.rotation=new nu),this.scale||(this.scale=new sr(1,1,1)),this.worldTransform=new Tr,this.localTransform=new Tr,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var i=this._scene;if(i){var l=i._nodeRepository;delete l[this.name],l[t]=this}this.name=t},add:function(t){var i=t._parent;if(i!==this){i&&i.remove(t),t._parent=this,this._children.push(t);var l=this._scene;l&&l!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var i=this._children,l=i.indexOf(t);l<0||(i.splice(l,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,i=0;i<t.length;i++)t[i]._parent=null,this._scene&&t[i].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){for(var i=t._parent;i;){if(i===this)return!0;i=i._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var i=this._children,l=0;l<i.length;l++)if(i[l].name===t)return i[l]},getDescendantByName:function(t){for(var i=this._children,l=0;l<i.length;l++){var f=i[l];if(f.name===t)return f;var c=f.getDescendantByName(t);if(c)return c}},queryNode:function(t){if(t){for(var i=t.split("/"),l=this,f=0;f<i.length;f++){var c=i[f];if(c){for(var p=!1,y=l._children,x=0;x<y.length;x++){var D=y[x];if(D.name===c){l=D,p=!0;break}}if(!p)return}}return l}},getPath:function(t){if(!this._parent)return"/";for(var i=this._parent,l=this.name;i._parent&&(l=i.name+"/"+l,i._parent!=t);)i=i._parent;return!i._parent&&t?null:l},traverse:function(t,i){t.call(i,this);for(var l=this._children,f=0,c=l.length;f<c;f++)l[f].traverse(t,i)},eachChild:function(t,i){for(var l=this._children,f=0,c=l.length;f<c;f++){var p=l[f];t.call(i,p,f)}},setLocalTransform:function(t){nr.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){var i=t?null:this.scale;this.localTransform.decomposeMatrix(i,this.rotation,this.position)},setWorldTransform:function(t){nr.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=nr.create();return function(i){var l=this.localTransform,f=this.worldTransform;this._parent?(nr.invert(t,this._parent.worldTransform.array),nr.multiply(l.array,t,f.array)):nr.copy(l.array,f.array);var c=i?null:this.scale;l.decomposeMatrix(c,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,i=this.rotation,l=this.scale;if(this.transformNeedsUpdate()){var f=this.localTransform.array;nr.fromRotationTranslation(f,i.array,t.array),nr.scale(f,f,l.array),i._dirty=!1,l._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,i=this.worldTransform.array;this._parent?nr.multiplyAffine(i,this._parent.worldTransform.array,t):nr.copy(i,t)},updateWorldTransform:function(){for(var t=this;t&&t.getParent()&&t.getParent().transformNeedsUpdate();)t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var i=this._children,l=0,f=i.length;l<f;l++)i[l].update(t)},getBoundingBox:function(){function t(c){return!c.invisible&&c.geometry}var i=new Kr,l=new Tr,f=new Tr;return function(c,p){return p=p||new Kr,c=c||t,this._parent?Tr.invert(f,this._parent.worldTransform):Tr.identity(f),this.traverse(function(y){y.geometry&&y.geometry.boundingBox&&(i.copy(y.geometry.boundingBox),Tr.multiply(l,f,y.worldTransform),i.applyTransform(l),p.union(i))},this,t),p}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var i=this.worldTransform.array;if(t){var l=t.array;return l[0]=i[12],l[1]=i[13],l[2]=i[14],t}else return new sr(i[12],i[13],i[14])},clone:function(){var t=new this.constructor,i=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var l=0;l<i.length;l++)t.add(i[l].clone());return t},rotateAround:function(){var t=new sr,i=new Tr;return function(l,f,c){t.copy(this.position).subtract(l);var p=this.localTransform;p.identity(),p.translate(l),p.rotate(c,f),i.fromRotationTranslation(this.rotation,t),p.multiply(i),p.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new Tr;return function(i,l){t.lookAt(this.position,i,l||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=i}}()}),$i=De,fi=$i.extend({material:null,geometry:null,mode:T.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:T.BACK,frontFace:T.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,i){},getBoundingBox:function(t,i){return i=$i.prototype.getBoundingBox.call(this,t,i),this.geometry&&this.geometry.boundingBox&&i.union(this.geometry.boundingBox),i},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var i=$i.prototype.clone.call(this);i.geometry=this.geometry,i.material=this.material;for(var l=0;l<t.length;l++){var f=t[l];i[f]!==this[f]&&(i[f]=this[f])}return i}}()});fi.POINTS=T.POINTS,fi.LINES=T.LINES,fi.LINE_LOOP=T.LINE_LOOP,fi.LINE_STRIP=T.LINE_STRIP,fi.TRIANGLES=T.TRIANGLES,fi.TRIANGLE_STRIP=T.TRIANGLE_STRIP,fi.TRIANGLE_FAN=T.TRIANGLE_FAN,fi.BACK=T.BACK,fi.FRONT=T.FRONT,fi.FRONT_AND_BACK=T.FRONT_AND_BACK,fi.CW=T.CW,fi.CCW=T.CCW;var oo=fi,ya=X.extend({scene:null,camera:null,renderer:null},function(){this._ray=new Io,this._ndc=new Ne},{pick:function(t,i,l){var f=this.pickAll(t,i,[],l);return f[0]||null},pickAll:function(t,i,l,f){return this.renderer.screenToNDC(t,i,this._ndc),this.camera.castRay(this._ndc,this._ray),l=l||[],this._intersectNode(this.scene,l,f||!1),l.sort(this._intersectionCompareFunc),l},_intersectNode:function(t,i,l){t instanceof oo&&t.isRenderable()&&(!t.ignorePicking||l)&&(t.mode===T.TRIANGLES&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)&&this._intersectRenderable(t,i);for(var f=0;f<t._children.length;f++)this._intersectNode(t._children[f],i,l)},_intersectRenderable:function(){var t=new sr,i=new sr,l=new sr,f=new Io,c=new Tr;return function(p,y){var x=p.isSkinnedMesh();f.copy(this._ray),Tr.invert(c,p.worldTransform),x||f.applyTransform(c);var D=p.geometry,E=x?p.skeleton.boundingBox:D.boundingBox;if(!(E&&!f.intersectBoundingBox(E))){if(D.pick){D.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,p,y);return}else if(D.pickByRay){D.pickByRay(f,p,y);return}var N=p.cullFace===T.BACK&&p.frontFace===T.CCW||p.cullFace===T.FRONT&&p.frontFace===T.CW,$,_t=D.indices,pt=D.attributes.position,At=D.attributes.weight,Mt=D.attributes.joint,Nt,kt=[];if(!(!pt||!pt.value||!_t)){if(x){Nt=p.skeleton.getSubSkinMatrices(p.__uid__,p.joints);for(var te=0;te<p.joints.length;te++){kt[te]=kt[te]||[];for(var qt=0;qt<16;qt++)kt[te][qt]=Nt[te*16+qt]}var jt=[],fe=[],ue=[],Te=[],xe=[],Ie=D.attributes.skinnedPosition;(!Ie||!Ie.value)&&(D.createAttribute("skinnedPosition","f",3),Ie=D.attributes.skinnedPosition,Ie.init(D.vertexCount));for(var te=0;te<D.vertexCount;te++){pt.get(te,jt),At.get(te,fe),Mt.get(te,ue),fe[3]=1-fe[0]-fe[1]-fe[2],Wt.set(Te,0,0,0);for(var qt=0;qt<4;qt++)ue[qt]>=0&&fe[qt]>1e-4&&(Wt.transformMat4(xe,jt,kt[ue[qt]]),Wt.scaleAndAdd(Te,Te,xe,fe[qt]));Ie.set(te,Te)}}for(var te=0;te<_t.length;te+=3){var je=_t[te],Ve=_t[te+1],Je=_t[te+2],er=x?D.attributes.skinnedPosition:pt;if(er.get(je,t.array),er.get(Ve,i.array),er.get(Je,l.array),N?$=f.intersectTriangle(t,i,l,p.culling):$=f.intersectTriangle(t,l,i,p.culling),$){var Xe=new sr;x?sr.copy(Xe,$):sr.transformMat4(Xe,$,p.worldTransform),y.push(new ya.Intersection($,Xe,p,[je,Ve,Je],te/3,sr.dist(Xe,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,i){return t.distance-i.distance}});ya.Intersection=function(t,i,l,f,c,p){this.point=t,this.pointWorld=i,this.target=l,this.triangle=f,this.triangleIndex=c,this.distance=p};var ii=ya,Bn="__dt__",No=function(){this._contextId=0,this._caches=[],this._context={}};No.prototype={use:function(t,i){var l=this._caches;l[t]||(l[t]={},i&&(l[t]=i())),this._contextId=t,this._context=l[t]},put:function(t,i){this._context[t]=i},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var i=Bn+t;this.put(i,!0)},dirtyAll:function(t){t=t||"";for(var i=Bn+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!0)},fresh:function(t){t=t||"";var i=Bn+t;this.put(i,!1)},freshAll:function(t){t=t||"";for(var i=Bn+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!1)},isDirty:function(t){t=t||"";var i=Bn+t,l=this._context;return!l.hasOwnProperty(i)||l[i]===!0},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,i){var l=Object.keys(this._caches);l.forEach(function(f){t&&t.call(i,f)})},miss:function(t){return!this._context.hasOwnProperty(t)}},No.prototype.constructor=No;var $n=No,Br=X.extend({width:512,height:512,type:T.UNSIGNED_BYTE,format:T.RGBA,wrapS:T.REPEAT,wrapT:T.REPEAT,minFilter:T.LINEAR_MIPMAP_LINEAR,magFilter:T.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new $n},{getWebGLTexture:function(t){var i=t.gl,l=this._cache;return l.use(t.__uid__),l.miss("webgl_texture")&&l.put("webgl_texture",i.createTexture()),this.dynamic?this.update(t):l.isDirty()&&(this.update(t),l.fresh()),l.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var i=t.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===T.DEPTH_COMPONENT&&(this.useMipmap=!1);var l=t.getGLExtension("EXT_sRGB");this.format===Br.SRGB&&!l&&(this.format=Br.RGB),this.format===Br.SRGB_ALPHA&&!l&&(this.format=Br.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?T.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?T.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===T.NEAREST_MIPMAP_NEAREST||t===T.NEAREST_MIPMAP_LINEAR?T.NEAREST:t===T.LINEAR_MIPMAP_LINEAR||t===T.LINEAR_MIPMAP_NEAREST?T.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var i=1;i<32;i<<=1)t=t|t>>i;return t+1},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("webgl_texture");l&&t.gl.deleteTexture(l),i.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Br.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(Br.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),Br.BYTE=T.BYTE,Br.UNSIGNED_BYTE=T.UNSIGNED_BYTE,Br.SHORT=T.SHORT,Br.UNSIGNED_SHORT=T.UNSIGNED_SHORT,Br.INT=T.INT,Br.UNSIGNED_INT=T.UNSIGNED_INT,Br.FLOAT=T.FLOAT,Br.HALF_FLOAT=36193,Br.UNSIGNED_INT_24_8_WEBGL=34042,Br.DEPTH_COMPONENT=T.DEPTH_COMPONENT,Br.DEPTH_STENCIL=T.DEPTH_STENCIL,Br.ALPHA=T.ALPHA,Br.RGB=T.RGB,Br.RGBA=T.RGBA,Br.LUMINANCE=T.LUMINANCE,Br.LUMINANCE_ALPHA=T.LUMINANCE_ALPHA,Br.SRGB=35904,Br.SRGB_ALPHA=35906,Br.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,Br.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,Br.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,Br.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,Br.NEAREST=T.NEAREST,Br.LINEAR=T.LINEAR,Br.NEAREST_MIPMAP_NEAREST=T.NEAREST_MIPMAP_NEAREST,Br.LINEAR_MIPMAP_NEAREST=T.LINEAR_MIPMAP_NEAREST,Br.NEAREST_MIPMAP_LINEAR=T.NEAREST_MIPMAP_LINEAR,Br.LINEAR_MIPMAP_LINEAR=T.LINEAR_MIPMAP_LINEAR,Br.REPEAT=T.REPEAT,Br.CLAMP_TO_EDGE=T.CLAMP_TO_EDGE,Br.MIRRORED_REPEAT=T.MIRRORED_REPEAT;var Cr=Br,Pi=oo.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=oo.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});Pi.POINTS=T.POINTS,Pi.LINES=T.LINES,Pi.LINE_LOOP=T.LINE_LOOP,Pi.LINE_STRIP=T.LINE_STRIP,Pi.TRIANGLES=T.TRIANGLES,Pi.TRIANGLE_STRIP=T.TRIANGLE_STRIP,Pi.TRIANGLE_FAN=T.TRIANGLE_FAN,Pi.BACK=T.BACK,Pi.FRONT=T.FRONT,Pi.FRONT_AND_BACK=T.FRONT_AND_BACK,Pi.CW=T.CW,Pi.CCW=T.CCW;var xi=Pi,Bo={};Bo.isPowerOfTwo=function(t){return(t&t-1)===0},Bo.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},Bo.nearestPowerOfTwo=function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))};var iu=Bo,au=iu.isPowerOfTwo;function ul(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function ou(t,i){var l=ul(t.width),f=ul(t.height);i=i||document.createElement("canvas"),i.width=l,i.height=f;var c=i.getContext("2d");return c.drawImage(t.image,0,0,l,f),i}var xs=Cr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type,c=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===Cr.REPEAT||this.wrapT===Cr.REPEAT)&&this.NPOT);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,c?this.wrapS:this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,c?this.wrapT:this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,c?this.magFilter:this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,c?this.minFilter:this.getAvailableMinFilter());var p=t.getGLExtension("EXT_texture_filter_anisotropic");if(p&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_2D,p.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var y=t.getGLExtension("OES_texture_half_float");y||(f=T.FLOAT)}if(this.mipmaps.length)for(var x=this.width,D=this.height,E=0;E<this.mipmaps.length;E++){var N=this.mipmaps[E];this._updateTextureData(i,N,E,x,D,l,f,!1),x/=2,D/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f,c),this.useMipmap&&(!this.NPOT||c)&&i.generateMipmap(i.TEXTURE_2D);i.bindTexture(i.TEXTURE_2D,null)},_updateTextureData:function(t,i,l,f,c,p,y,x){if(i.image){var D=i.image;x&&(this._potCanvas=ou(this,this._potCanvas),D=this._potCanvas),t.texImage2D(t.TEXTURE_2D,l,p,p,y,D)}else p<=Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&p>=Cr.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,l,p,f,c,0,i.pixels):t.texImage2D(t.TEXTURE_2D,l,p,f,c,0,p,y,i.pixels)},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_2D))},isPowerOfTwo:function(){return au(this.width)&&au(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,i){var l=V.createImage();i&&(l.crossOrigin=i);var f=this;return l.onload=function(){f.dirty(),f.trigger("success",f)},l.onerror=function(){f.trigger("error",f)},l.src=t,this.image=l,this}});Object.defineProperty(xs.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(xs.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});var Yr=xs;function fl(t){return{byte:V.Int8Array,ubyte:V.Uint8Array,short:V.Int16Array,ushort:V.Uint16Array}[t]||V.Float32Array}function _a(t){return"attr_"+t}function sa(t,i,l,f){switch(this.name=t,this.type=i,this.size=l,this.semantic=f||"",this.value=null,l){case 1:this.get=function(c){return this.value[c]},this.set=function(c,p){this.value[c]=p},this.copy=function(c,p){this.value[c]=this.value[c]};break;case 2:this.get=function(c,p){var y=this.value;return p[0]=y[c*2],p[1]=y[c*2+1],p},this.set=function(c,p){var y=this.value;y[c*2]=p[0],y[c*2+1]=p[1]},this.copy=function(c,p){var y=this.value;p*=2,c*=2,y[c]=y[p],y[c+1]=y[p+1]};break;case 3:this.get=function(c,p){var y=c*3,x=this.value;return p[0]=x[y],p[1]=x[y+1],p[2]=x[y+2],p},this.set=function(c,p){var y=c*3,x=this.value;x[y]=p[0],x[y+1]=p[1],x[y+2]=p[2]},this.copy=function(c,p){var y=this.value;p*=3,c*=3,y[c]=y[p],y[c+1]=y[p+1],y[c+2]=y[p+2]};break;case 4:this.get=function(c,p){var y=this.value,x=c*4;return p[0]=y[x],p[1]=y[x+1],p[2]=y[x+2],p[3]=y[x+3],p},this.set=function(c,p){var y=this.value,x=c*4;y[x]=p[0],y[x+1]=p[1],y[x+2]=p[2],y[x+3]=p[3]},this.copy=function(c,p){var y=this.value;p*=4,c*=4,y[c]=y[p],y[c+1]=y[p+1],y[c+2]=y[p+2],y[c+3]=y[p+3]}}}sa.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var i=fl(this.type);this.value=new i(t*this.size)}},sa.prototype.fromArray=function(t){var i=fl(this.type),l;if(t[0]&&t[0].length){var f=0,c=this.size;l=new i(t.length*c);for(var p=0;p<t.length;p++)for(var y=0;y<c;y++)l[f++]=t[p][y]}else l=new i(t);this.value=l},sa.prototype.clone=function(t){var i=new sa(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),i};function Fo(t,i,l,f,c){this.name=t,this.type=i,this.buffer=l,this.size=f,this.semantic=c,this.symbol="",this.needsRemove=!1}function xa(t){this.buffer=t,this.count=0}var qi=X.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new $n,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),i=0;i<t.length;i++)this.dirtyAttribute(t[i]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(_a(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,i){if(t<this.triangleCount&&t>=0){i||(i=[]);var l=this.indices;return i[0]=l[t*3],i[1]=l[t*3+1],i[2]=l[t*3+2],i}},setTriangleIndices:function(t,i){var l=this.indices;l[t*3]=i[0],l[t*3+1]=i[1],l[t*3+2]=i[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var i,l=this.vertexCount>65535?V.Uint32Array:V.Uint16Array;if(t[0]&&t[0].length){var f=0,c=3;i=new l(t.length*c);for(var p=0;p<t.length;p++)for(var y=0;y<c;y++)i[f++]=t[p][y]}else i=new l(t);this.indices=i},createAttribute:function(t,i,l,f){var c=new sa(t,i,l,f);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=c,this._attributeList.push(t),c},removeAttribute:function(t){var i=this._attributeList,l=i.indexOf(t);return l>=0?(i.splice(l,1),delete this.attributes[t],!0):!1},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,i=this._attributeList;if(t)return t;for(var l=[],f=this.vertexCount,c=0;c<i.length;c++){var p=i[c],y=this.attributes[p];y.value&&y.value.length===f*y.size&&l.push(p)}return this._enabledAttributes=l,l},getBufferChunks:function(t){var i=this._cache;i.use(t.__uid__);var l=i.isDirty("attributes"),f=i.isDirty("indices");if(l||f){this._updateBuffer(t.gl,l,f);for(var c=this.getEnabledAttributes(),p=0;p<c.length;p++)i.fresh(_a(c[p]));i.fresh("attributes"),i.fresh("indices")}return i.fresh("any"),i.get("chunks")},_updateBuffer:function(t,i,l){var f=this._cache,c=f.get("chunks"),p=!1;c||(c=[],c[0]={attributeBuffers:[],indicesBuffer:null},f.put("chunks",c),p=!0);var y=c[0],x=y.attributeBuffers,D=y.indicesBuffer;if(i||p){var E=this.getEnabledAttributes(),N={};if(!p)for(var $=0;$<x.length;$++)N[x[$].name]=x[$];for(var _t=0;_t<E.length;_t++){var pt=E[_t],At=this.attributes[pt],Mt;p||(Mt=N[pt]);var Nt;Mt?Nt=Mt.buffer:Nt=t.createBuffer(),f.isDirty(_a(pt))&&(t.bindBuffer(t.ARRAY_BUFFER,Nt),t.bufferData(t.ARRAY_BUFFER,At.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),x[_t]=new Fo(pt,At.type,Nt,At.size,At.semantic)}for(var $=_t;$<x.length;$++)t.deleteBuffer(x[$].buffer);x.length=_t}this.isUseIndices()&&(l||p)&&(D||(D=new xa(t.createBuffer()),y.indicesBuffer=D),D.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,D.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var c=l[f],p=0;p<c.attributeBuffers.length;p++){var y=c.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}c.indicesBuffer&&t.gl.deleteBuffer(c.indicesBuffer.buffer)}if(this.__vaoCache){var x=t.getGLExtension("OES_vertex_array_object");for(var D in this.__vaoCache){var E=this.__vaoCache[D].vao;E&&x.deleteVertexArrayOES(E)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(qi.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),!t||!t.value?0:t.value.length/t.size}}),Object.defineProperty(qi.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}})),qi.STATIC_DRAW=T.STATIC_DRAW,qi.DYNAMIC_DRAW=T.DYNAMIC_DRAW,qi.STREAM_DRAW=T.STREAM_DRAW,qi.AttributeBuffer=Fo,qi.IndicesBuffer=xa,qi.Attribute=sa;var Wi=qi,Hn=Wt.create,la=Wt.add,ta=Wt.set,Hi=Wi.Attribute,Ea=Wi.extend(function(){return{attributes:{position:new Hi("position","float",3,"POSITION"),texcoord0:new Hi("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Hi("texcoord1","float",2,"TEXCOORD_1"),normal:new Hi("normal","float",3,"NORMAL"),tangent:new Hi("tangent","float",4,"TANGENT"),color:new Hi("color","float",4,"COLOR"),weight:new Hi("weight","float",3,"WEIGHT"),joint:new Hi("joint","float",4,"JOINT"),barycentric:new Hi("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new Kr);var i=this.attributes.position.value;if(i&&i.length){var l=t.min,f=t.max,c=l.array,p=f.array;Wt.set(c,i[0],i[1],i[2]),Wt.set(p,i[0],i[1],i[2]);for(var y=3;y<i.length;){var x=i[y++],D=i[y++],E=i[y++];x<c[0]&&(c[0]=x),D<c[1]&&(c[1]=D),E<c[2]&&(c[2]=E),x>p[0]&&(p[0]=x),D>p[1]&&(p[1]=D),E>p[2]&&(p[2]=E)}l._dirty=!0,f._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value;if(!f||f.length!==l.length)f=i.normal.value=new V.Float32Array(l.length);else for(var c=0;c<f.length;c++)f[c]=0;for(var p=Hn(),y=Hn(),x=Hn(),D=Hn(),E=Hn(),N=Hn(),$=t?t.length:this.vertexCount,_t,pt,At,Mt=0;Mt<$;){t?(_t=t[Mt++],pt=t[Mt++],At=t[Mt++]):(_t=Mt++,pt=Mt++,At=Mt++),ta(p,l[_t*3],l[_t*3+1],l[_t*3+2]),ta(y,l[pt*3],l[pt*3+1],l[pt*3+2]),ta(x,l[At*3],l[At*3+1],l[At*3+2]),Wt.sub(D,p,y),Wt.sub(E,y,x),Wt.cross(N,D,E);for(var c=0;c<3;c++)f[_t*3+c]=f[_t*3+c]+N[c],f[pt*3+c]=f[pt*3+c]+N[c],f[At*3+c]=f[At*3+c]+N[c]}for(var c=0;c<f.length;)ta(N,f[c],f[c+1],f[c+2]),Wt.normalize(N,N),f[c++]=N[0],f[c++]=N[1],f[c++]=N[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value,c=Hn(),p=Hn(),y=Hn(),x=Hn(),D=Hn(),E=Hn();f||(f=i.normal.value=new Float32Array(l.length));for(var N=t?t.length:this.vertexCount,$,_t,pt,At=0;At<N;){t?($=t[At++],_t=t[At++],pt=t[At++]):($=At++,_t=At++,pt=At++),ta(c,l[$*3],l[$*3+1],l[$*3+2]),ta(p,l[_t*3],l[_t*3+1],l[_t*3+2]),ta(y,l[pt*3],l[pt*3+1],l[pt*3+2]),Wt.sub(x,c,p),Wt.sub(D,p,y),Wt.cross(E,x,D),Wt.normalize(E,E);for(var Mt=0;Mt<3;Mt++)f[$*3+Mt]=E[Mt],f[_t*3+Mt]=E[Mt],f[pt*3+Mt]=E[Mt]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var t=this.vertexCount,i=this.attributes;i.tangent.value||(i.tangent.value=new Float32Array(t*4));var l=i.texcoord0.value,f=i.position.value,c=i.tangent.value,p=i.normal.value;if(!l){console.warn("Geometry without texcoords can't generate tangents.");return}for(var y=[],x=[],D=0;D<t;D++)y[D]=[0,0,0],x[D]=[0,0,0];for(var E=[0,0,0],N=[0,0,0],$=this.indices,_t=$?$.length:this.vertexCount,pt,At,Mt,D=0;D<_t;){$?(pt=$[D++],At=$[D++],Mt=$[D++]):(pt=D++,At=D++,Mt=D++);var Nt=l[pt*2],kt=l[At*2],te=l[Mt*2],qt=l[pt*2+1],jt=l[At*2+1],fe=l[Mt*2+1],ue=f[pt*3],Te=f[At*3],xe=f[Mt*3],Ie=f[pt*3+1],je=f[At*3+1],Ve=f[Mt*3+1],Je=f[pt*3+2],er=f[At*3+2],Xe=f[Mt*3+2],ir=Te-ue,xr=xe-ue,Lr=je-Ie,ar=Ve-Ie,vn=er-Je,br=Xe-Je,Cn=kt-Nt,dn=te-Nt,On=jt-qt,Zr=fe-qt,$r=1/(Cn*Zr-On*dn);E[0]=(Zr*ir-On*xr)*$r,E[1]=(Zr*Lr-On*ar)*$r,E[2]=(Zr*vn-On*br)*$r,N[0]=(Cn*xr-dn*ir)*$r,N[1]=(Cn*ar-dn*Lr)*$r,N[2]=(Cn*br-dn*vn)*$r,la(y[pt],y[pt],E),la(y[At],y[At],E),la(y[Mt],y[Mt],E),la(x[pt],x[pt],N),la(x[At],x[At],N),la(x[Mt],x[Mt],N)}for(var ui=Hn(),Wn=Hn(),Qn=Hn(),D=0;D<t;D++){Qn[0]=p[D*3],Qn[1]=p[D*3+1],Qn[2]=p[D*3+2];var bi=y[D];Wt.scale(ui,Qn,Wt.dot(Qn,bi)),Wt.sub(ui,bi,ui),Wt.normalize(ui,ui),Wt.cross(Wn,Qn,bi),c[D*4]=ui[0],c[D*4+1]=ui[1],c[D*4+2]=ui[2],c[D*4+3]=Wt.dot(Wn,x[D])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new V.Uint32Array(this.indices));for(var t=this.attributes,i=this.indices,l=this.getEnabledAttributes(),f={},c=0;c<l.length;c++){var p=l[c];f[p]=t[p].value,t[p].init(this.indices.length)}for(var y=0,x=0;x<i.length;x++){for(var D=i[x],c=0;c<l.length;c++)for(var p=l[c],E=t[p].value,N=t[p].size,$=0;$<N;$++)E[y*N+$]=f[p][D*N+$];i[x]=y,y++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,i=t.barycentric.value,l=this.indices;if(!(i&&i.length===l.length*3)){i=t.barycentric.value=new Float32Array(l.length*3);for(var f=0;f<(l?l.length:this.vertexCount/3);)for(var c=0;c<3;c++){var p=l?l[f++]:f*3+c;i[p*3+c]=1}this.dirty()}}},applyTransform:function(t){var i=this.attributes,l=i.position.value,f=i.normal.value,c=i.tangent.value;t=t.array;var p=nr.create();nr.invert(p,t),nr.transpose(p,p);var y=Wt.transformMat4,x=Wt.forEach;x(l,3,0,null,y,t),f&&x(f,3,0,null,y,p),c&&x(c,4,0,null,y,p),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var c=l[f],p=0;p<c.attributeBuffers.length;p++){var y=c.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}c.indicesBuffer&&t.gl.deleteBuffer(c.indicesBuffer.buffer)}if(this.__vaoCache){var x=t.getGLExtension("OES_vertex_array_object");for(var D in this.__vaoCache){var E=this.__vaoCache[D].vao;E&&x.deleteVertexArrayOES(E)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});Ea.STATIC_DRAW=Wi.STATIC_DRAW,Ea.DYNAMIC_DRAW=Wi.DYNAMIC_DRAW,Ea.STREAM_DRAW=Wi.STREAM_DRAW,Ea.AttributeBuffer=Wi.AttributeBuffer,Ea.IndicesBuffer=Wi.IndicesBuffer,Ea.Attribute=Hi;var Qr=Ea,hl=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`,hi="uniform vec3 ",Di="uniform float ",Ua="@export clay.header.",ci="@end",_n=":unconfigurable;",Ss=[Ua+"directional_light",hi+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+_n,hi+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+_n,ci,Ua+"ambient_light",hi+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+_n,ci,Ua+"ambient_sh_light",hi+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+_n,hi+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+_n,hl,ci,Ua+"ambient_cubemap_light",hi+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,ci,Ua+"point_light",hi+"pointLightPosition[POINT_LIGHT_COUNT]"+_n,Di+"pointLightRange[POINT_LIGHT_COUNT]"+_n,hi+"pointLightColor[POINT_LIGHT_COUNT]"+_n,ci,Ua+"spot_light",hi+"spotLightPosition[SPOT_LIGHT_COUNT]"+_n,hi+"spotLightDirection[SPOT_LIGHT_COUNT]"+_n,Di+"spotLightRange[SPOT_LIGHT_COUNT]"+_n,Di+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+_n,Di+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+_n,Di+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+_n,hi+"spotLightColor[SPOT_LIGHT_COUNT]"+_n,ci].join(`
`);dr.import(Ss);var cl=$i.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var t=$i.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}}),Li=cl,vl=function(t,i){this.normal=t||new sr(0,1,0),this.distance=i||0};vl.prototype={constructor:vl,distanceToPoint:function(t){return Wt.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,i){i||(i=new sr);var l=this.distanceToPoint(t);return Wt.scaleAndAdd(i.array,t.array,this.normal.array,-l),i._dirty=!0,i},normalize:function(){var t=1/Wt.len(this.normal.array);Wt.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var i=t.vertices,l=this.normal.array,f=Wt.dot(i[0].array,l)>this.distance,c=1;c<8;c++)if(Wt.dot(i[c].array,l)>this.distance!=f)return!0},intersectLine:function(){var t=Wt.create();return function(i,l,f){var c=this.distanceToPoint(i),p=this.distanceToPoint(l);if(c>0&&p>0||c<0&&p<0)return null;var y=this.normal.array,x=this.distance,D=i.array;Wt.sub(t,l.array,i.array),Wt.normalize(t,t);var E=Wt.dot(y,t);if(E===0)return null;f||(f=new sr);var N=(Wt.dot(y,D)-x)/E;return Wt.scaleAndAdd(f.array,D,t,-N),f._dirty=!0,f}}(),applyTransform:function(){var t=nr.create(),i=vr.create(),l=vr.create();return l[3]=1,function(f){f=f.array,Wt.scale(l,this.normal.array,this.distance),vr.transformMat4(l,l,f),this.distance=Wt.dot(l,this.normal.array),nr.invert(t,f),nr.transpose(t,t),i[3]=0,Wt.copy(i,this.normal.array),vr.transformMat4(i,i,t),Wt.copy(this.normal.array,i)}}(),copy:function(t){Wt.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new vl;return t.copy(this),t}};var Go=vl,Dn=Wt.set,Za=Wt.copy,ua=Wt.transformMat4,Pa=Math.min,so=Math.max,Ts=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new Go);this.boundingBox=new Kr,this.vertices=[];for(var t=0;t<8;t++)this.vertices[t]=Wt.fromValues(0,0,0)};Ts.prototype={setFromProjection:function(t){var i=this.planes,l=t.array,f=l[0],c=l[1],p=l[2],y=l[3],x=l[4],D=l[5],E=l[6],N=l[7],$=l[8],_t=l[9],pt=l[10],At=l[11],Mt=l[12],Nt=l[13],kt=l[14],te=l[15];Dn(i[0].normal.array,y-f,N-x,At-$),i[0].distance=-(te-Mt),i[0].normalize(),Dn(i[1].normal.array,y+f,N+x,At+$),i[1].distance=-(te+Mt),i[1].normalize(),Dn(i[2].normal.array,y+c,N+D,At+_t),i[2].distance=-(te+Nt),i[2].normalize(),Dn(i[3].normal.array,y-c,N-D,At-_t),i[3].distance=-(te-Nt),i[3].normalize(),Dn(i[4].normal.array,y-p,N-E,At-pt),i[4].distance=-(te-kt),i[4].normalize(),Dn(i[5].normal.array,y+p,N+E,At+pt),i[5].distance=-(te+kt),i[5].normalize();var qt=this.boundingBox,jt=this.vertices;if(te===0){var fe=D/f,ue=-kt/(pt-1),Te=-kt/(pt+1),xe=-Te/D,Ie=-ue/D;qt.min.set(-xe*fe,-xe,Te),qt.max.set(xe*fe,xe,ue),Dn(jt[0],-xe*fe,-xe,Te),Dn(jt[1],-xe*fe,xe,Te),Dn(jt[2],xe*fe,-xe,Te),Dn(jt[3],xe*fe,xe,Te),Dn(jt[4],-Ie*fe,-Ie,ue),Dn(jt[5],-Ie*fe,Ie,ue),Dn(jt[6],Ie*fe,-Ie,ue),Dn(jt[7],Ie*fe,Ie,ue)}else{var je=(-1-Mt)/f,Ve=(1-Mt)/f,Je=(1-Nt)/D,er=(-1-Nt)/D,Xe=(-1-kt)/pt,ir=(1-kt)/pt;qt.min.set(Math.min(je,Ve),Math.min(er,Je),Math.min(ir,Xe)),qt.max.set(Math.max(Ve,je),Math.max(Je,er),Math.max(Xe,ir));var xr=qt.min.array,Lr=qt.max.array;Dn(jt[0],xr[0],xr[1],xr[2]),Dn(jt[1],xr[0],Lr[1],xr[2]),Dn(jt[2],Lr[0],xr[1],xr[2]),Dn(jt[3],Lr[0],Lr[1],xr[2]),Dn(jt[4],xr[0],xr[1],Lr[2]),Dn(jt[5],xr[0],Lr[1],Lr[2]),Dn(jt[6],Lr[0],xr[1],Lr[2]),Dn(jt[7],Lr[0],Lr[1],Lr[2])}},getTransformedBoundingBox:function(){var t=Wt.create();return function(i,l){var f=this.vertices,c=l.array,p=i.min,y=i.max,x=p.array,D=y.array,E=f[0];ua(t,E,c),Za(x,t),Za(D,t);for(var N=1;N<8;N++)E=f[N],ua(t,E,c),x[0]=Pa(t[0],x[0]),x[1]=Pa(t[1],x[1]),x[2]=Pa(t[2],x[2]),D[0]=so(t[0],D[0]),D[1]=so(t[1],D[1]),D[2]=so(t[2],D[2]);return p._dirty=!0,y._dirty=!0,i}}()};var Sa=Ts,zo=$i.extend(function(){return{projectionMatrix:new Tr,invProjectionMatrix:new Tr,viewMatrix:new Tr,frustum:new Sa}},function(){this.update(!0)},{update:function(t){$i.prototype.update.call(this,t),Tr.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Tr.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){Tr.copy(this.viewMatrix,t),Tr.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){Tr.copy(this.projectionMatrix,t),Tr.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=vr.create();return function(i,l){var f=l!==void 0?l:new Io,c=i.array[0],p=i.array[1];return vr.set(t,c,p,-1,1),vr.transformMat4(t,t,this.invProjectionMatrix.array),vr.transformMat4(t,t,this.worldTransform.array),Wt.scale(f.origin.array,t,1/t[3]),vr.set(t,c,p,1,1),vr.transformMat4(t,t,this.invProjectionMatrix.array),vr.transformMat4(t,t,this.worldTransform.array),Wt.scale(t,t,1/t[3]),Wt.sub(f.direction.array,t,f.origin.array),Wt.normalize(f.direction.array,f.direction.array),f.direction._dirty=!0,f.origin._dirty=!0,f}}()}),Wa=zo,Df=nr.create(),Vo=nr.create(),Ds={};function lc(t){var i=[],l=Object.keys(t);l.sort();for(var f=0;f<l.length;f++){var c=l[f];i.push(c+" "+t[c])}var p=i.join(`
`);if(Ds[p])return Ds[p];var y=j.genGUID();return Ds[p]=y,y}function dl(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}dl.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},dl.prototype.add=function(t,i){i?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},dl.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var wf=$i.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Kr,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new lt(20)}},function(){this._scene=this},{addToScene:function(t){t instanceof Wa?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof Li&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var i;t instanceof Wa?(i=this._cameraList.indexOf(t),i>=0&&this._cameraList.splice(i,1)):t instanceof Li&&(i=this.lights.indexOf(t),i>=0&&this.lights.splice(i,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var i=this._cameraList.indexOf(t);i>=0&&this._cameraList.splice(i,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var i={},l=0;l<t.length;l++){var f=t[l];if(!f.invisible){var c=f.group;i[c]||(i[c]={}),i[c][f.type]=i[c][f.type]||0,i[c][f.type]++}}this._lightNumber=i;for(var p in i)this._lightProgramKeys[p]=lc(i[p]);this._updateLightUniforms()},cloneNode:function(t){var i=t.clone(),l={};function f(c,p){l[c.__uid__]=p;for(var y=0;y<c._children.length;y++){var x=c._children[y],D=p._children[y];f(x,D)}}return f(t,i),i.traverse(function(c){c.skeleton&&(c.skeleton=c.skeleton.clone(l)),c.material&&(c.material=c.material.clone())}),i},updateRenderList:function(t,i){var l=t.__uid__,f=this._renderLists.get(l);f||(f=new dl,this._renderLists.put(l,f)),f.startCount(),i&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var c=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,c,f,i),f.endCount(),f},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,i,l,f,c){if(!t.invisible)for(var p=0;p<t._children.length;p++){var y=t._children[p];if(y.isRenderable()){var x=y.isSkinnedMesh()?Df:y.worldTransform.array,D=y.geometry;nr.multiplyAffine(Vo,i.viewMatrix.array,x),(c&&!D.boundingBox||!this.isFrustumCulled(y,i,Vo))&&f.add(y,y.material.transparent||l)}y._children.length>0&&this._doUpdateRenderList(y,i,l,f,c)}},isFrustumCulled:function(){var t=new Kr,i=new Tr;return function(l,f,c){var p=l.boundingBox;if(p||(l.skeleton&&l.skeleton.boundingBox?p=l.skeleton.boundingBox:p=l.geometry.boundingBox),!p)return!1;if(i.array=c,t.transformFrom(p,i),l.castShadow&&this.viewBoundingBoxLastFrame.union(t),l.frustumCulling){if(!t.intersectBoundingBox(f.frustum.boundingBox))return!0;i.array=f.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(i);var y=t.min.array,x=t.max.array;if(x[0]<-1||y[0]>1||x[1]<-1||y[1]>1||x[2]<-1||y[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(pl);var i=this._lightUniforms;for(var l in i)for(var f in i[l])i[l][f].value.length=0;for(var c=0;c<t.length;c++){var p=t[c];if(!p.invisible){var l=p.group;for(var f in p.uniformTemplates){var y=p.uniformTemplates[f],x=y.value(p);if(x!=null){i[l]||(i[l]={}),i[l][f]||(i[l][f]={type:"",value:[]});var D=i[l][f];switch(D.type=y.type+"v",y.type){case"1i":case"1f":case"t":D.value.push(x);break;case"2f":case"3f":case"4f":for(var E=0;E<x.length;E++)D.value.push(x[E]);break;default:console.error("Unkown light uniform type "+y.type)}}}}}},getLightGroups:function(){var t=[];for(var i in this._lightNumber)t.push(i);return t},getNumberChangedLightGroups:function(){var t=[];for(var i in this._lightNumber)this.isLightNumberChanged(i)&&t.push(i);return t},isLightNumberChanged:function(t){var i=this._previousLightNumber,l=this._lightNumber;for(var f in l[t])if(!i[t]||l[t][f]!==i[t][f])return!0;for(var f in i[t])if(!l[t]||l[t][f]!==i[t][f])return!0;return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(i,l,f){for(var c in i){var p=i[c];if(p.type==="tv"){if(!l.hasUniform(c))continue;for(var y=[],x=0;x<p.value.length;x++){var D=p.value[x],E=l.takeCurrentTextureSlot(f,D);y.push(E)}l.setUniform(f.gl,"1iv",c,y)}else l.setUniform(f.gl,p.type,c,p.value)}}return function(i,l,f){t(this._lightUniforms[l],i,f),t(this.shadowUniforms,i,f)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function pl(t,i){if(i.castShadow&&!t.castShadow)return!0}var Ta=wf,Af=z(86280),lo=iu.isPowerOfTwo,su=["px","nx","py","ny","pz","nz"],ws=Cr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type;i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var c=t.getGLExtension("EXT_texture_filter_anisotropic");if(c&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_CUBE_MAP,c.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var p=t.getGLExtension("OES_texture_half_float");p||(f=T.FLOAT)}if(this.mipmaps.length)for(var y=this.width,x=this.height,D=0;D<this.mipmaps.length;D++){var E=this.mipmaps[D];this._updateTextureData(i,E,D,y,x,l,f),y/=2,x/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f),!this.NPOT&&this.useMipmap&&i.generateMipmap(i.TEXTURE_CUBE_MAP);i.bindTexture(i.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,i,l,f,c,p,y){for(var x=0;x<6;x++){var D=su[x],E=i.image&&i.image[D];E?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+x,l,p,p,y,E):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+x,l,p,f,c,0,p,y,i.pixels&&i.pixels[D])}},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?lo(this.image.px.width)&&lo(this.image.px.height):lo(this.width)&&lo(this.height)},isRenderable:function(){return this.image.px?Ha(this.image.px)&&Ha(this.image.nx)&&Ha(this.image.py)&&Ha(this.image.ny)&&Ha(this.image.pz)&&Ha(this.image.nz):!!(this.width&&this.height)},load:function(t,i){var l=0,f=this;return j.each(t,function(c,p){var y=V.createImage();i&&(y.crossOrigin=i),y.onload=function(){l--,l===0&&(f.dirty(),f.trigger("success",f))},y.onerror=function(){l--},l++,y.src=c,f.image[p]=y}),this}});Object.defineProperty(ws.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(ws.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});function Ha(t){return t.width>0&&t.height>0}var uo=ws,As=Wa.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,i=Math.atan(1/t[5])*2;this.fov=i/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=Wa.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}}),Gn=As,ko="framebuffer",Da="renderbuffer",lu=Da+"_width",La=Da+"_height",Uo=Da+"_attached",Hr="depthtexture_attached",ea=T.FRAMEBUFFER,Zo=T.RENDERBUFFER,fo=T.DEPTH_ATTACHMENT,gl=T.COLOR_ATTACHMENT0,Wo=X.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new $n,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var i=t.gl;i.bindFramebuffer(ea,this._getFrameBufferGL(t)),this._boundRenderer=t;var l=this._cache;l.put("viewport",t.viewport);var f=!1,c,p;for(var y in this._textures){f=!0;var x=this._textures[y];x&&(c=x.texture.width,p=x.texture.height,this._doAttach(t,x.texture,y,x.target))}this._width=c,this._height=p,!f&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,c,p,1);var D=l.get("attached_textures");if(D){for(var y in D)if(!this._textures[y]){var E=D[y];this._doDetach(i,y,E)}}if(!l.get(Hr)&&this.depthBuffer){l.miss(Da)&&l.put(Da,i.createRenderbuffer());var N=l.get(Da);(c!==l.get(lu)||p!==l.get(La))&&(i.bindRenderbuffer(Zo,N),i.renderbufferStorage(Zo,i.DEPTH_COMPONENT16,c,p),l.put(lu,c),l.put(La,p),i.bindRenderbuffer(Zo,null)),l.get(Uo)||(i.framebufferRenderbuffer(ea,fo,Zo,N),l.put(Uo,!0))}},unbind:function(t){t.__currentFrameBuffer=null;var i=t.gl;i.bindFramebuffer(ea,null),this._boundRenderer=null,this._cache.use(t.__uid__);var l=this._cache.get("viewport");l&&t.setViewport(l),this.updateMipmap(t)},updateMipmap:function(t){var i=t.gl;for(var l in this._textures){var f=this._textures[l];if(f){var c=f.texture;if(!c.NPOT&&c.useMipmap&&c.minFilter===Cr.LINEAR_MIPMAP_LINEAR){var p=c.textureType==="textureCube"?T.TEXTURE_CUBE_MAP:T.TEXTURE_2D;i.bindTexture(p,c.getWebGLTexture(t)),i.generateMipmap(p),i.bindTexture(p,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(ea)},_getFrameBufferGL:function(t){var i=this._cache;return i.use(t.__uid__),i.miss(ko)&&i.put(ko,t.gl.createFramebuffer()),i.get(ko)},attach:function(t,i,l){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");i=i||gl,l=l||T.TEXTURE_2D;var f=this._boundRenderer,c=f&&f.gl,p;if(c){var y=this._cache;y.use(f.__uid__),p=y.get("attached_textures")}var x=this._textures[i];if(!(x&&x.target===l&&x.texture===t&&p&&p[i]!=null)){var D=!0;f&&(D=this._doAttach(f,t,i,l),this.viewport||f.setViewport(0,0,t.width,t.height,1)),D&&(this._textures[i]=this._textures[i]||{},this._textures[i].texture=t,this._textures[i].target=l)}},_doAttach:function(t,i,l,f){var c=t.gl,p=i.getWebGLTexture(t),y=this._cache.get("attached_textures");if(y&&y[l]){var x=y[l];if(x.texture===i&&x.target===f)return}l=+l;var D=!0;if(l===fo||l===T.DEPTH_STENCIL_ATTACHMENT){var E=t.getGLExtension("WEBGL_depth_texture");if(E||(console.error("Depth texture is not supported by the browser"),D=!1),i.format!==T.DEPTH_COMPONENT&&i.format!==T.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),D=!1),D){var N=this._cache.get(Da);N&&(c.framebufferRenderbuffer(ea,fo,Zo,null),c.deleteRenderbuffer(N),this._cache.put(Da,!1)),this._cache.put(Uo,!1),this._cache.put(Hr,!0)}}return c.framebufferTexture2D(ea,l,f,p,0),y||(y={},this._cache.put("attached_textures",y)),y[l]=y[l]||{},y[l].texture=i,y[l].target=f,D},_doDetach:function(t,i,l){t.framebufferTexture2D(ea,i,l,null,0);var f=this._cache.get("attached_textures");f&&f[i]&&(f[i]=null),(i===fo||i===T.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(Hr,!1)},detach:function(t,i){if(this._textures[t]=null,this._boundRenderer){var l=this._cache;l.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,i)}},dispose:function(t){var i=t.gl,l=this._cache;l.use(t.__uid__);var f=l.get(Da);f&&i.deleteRenderbuffer(f);var c=l.get(ko);c&&i.deleteFramebuffer(c),l.deleteContext(t.__uid__),this._textures={}}});Wo.DEPTH_ATTACHMENT=fo,Wo.COLOR_ATTACHMENT0=gl,Wo.STENCIL_ATTACHMENT=T.STENCIL_ATTACHMENT,Wo.DEPTH_STENCIL_ATTACHMENT=T.DEPTH_STENCIL_ATTACHMENT;var Xn=Wo,Rt=["px","nx","py","ny","pz","nz"],Ft=X.extend(function(){var t={position:new sr,far:1e3,near:.1,texture:null,shadowMapPass:null},i=t._cameras={px:new Gn({fov:90}),nx:new Gn({fov:90}),py:new Gn({fov:90}),ny:new Gn({fov:90}),pz:new Gn({fov:90}),nz:new Gn({fov:90})};return i.px.lookAt(sr.POSITIVE_X,sr.NEGATIVE_Y),i.nx.lookAt(sr.NEGATIVE_X,sr.NEGATIVE_Y),i.py.lookAt(sr.POSITIVE_Y,sr.POSITIVE_Z),i.ny.lookAt(sr.NEGATIVE_Y,sr.NEGATIVE_Z),i.pz.lookAt(sr.POSITIVE_Z,sr.NEGATIVE_Y),i.nz.lookAt(sr.NEGATIVE_Z,sr.NEGATIVE_Y),t._frameBuffer=new Xn,t},{getCamera:function(t){return this._cameras[t]},render:function(t,i,l){var f=t.gl;l||i.update();for(var c=this.texture.width,p=2*Math.atan(c/(c-.5))/Math.PI*180,y=0;y<6;y++){var x=Rt[y],D=this._cameras[x];if(sr.copy(D.position,this.position),D.far=this.far,D.near=this.near,D.fov=p,this.shadowMapPass){D.update();var E=i.getBoundingBox();E.applyTransform(D.viewMatrix),i.viewBoundingBoxLastFrame.copy(E),this.shadowMapPass.render(t,i,D,!0)}this._frameBuffer.attach(this.texture,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+y),this._frameBuffer.bind(t),t.render(i,D,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}}),Lt=Ft,Gt=Qr.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,i=this.widthSegments,l=this.attributes,f=[],c=[],p=[],y=[],x=0;x<=t;x++)for(var D=x/t,E=0;E<=i;E++){var N=E/i;if(f.push([2*N-1,2*D-1,0]),c&&c.push([N,D]),p&&p.push([0,0,1]),E<i&&x<t){var $=E+x*(i+1);y.push([$,$+1,$+i+1]),y.push([$+i+1,$+1,$+i+2])}}l.position.fromArray(f),l.texcoord0.fromArray(c),l.normal.fromArray(p),this.initIndicesFromArray(y),this.boundingBox=new Kr,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),Ut=Gt,Jt=new Tr,de=Qr.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var t={px:Le("px",this.depthSegments,this.heightSegments),nx:Le("nx",this.depthSegments,this.heightSegments),py:Le("py",this.widthSegments,this.depthSegments),ny:Le("ny",this.widthSegments,this.depthSegments),pz:Le("pz",this.widthSegments,this.heightSegments),nz:Le("nz",this.widthSegments,this.heightSegments)},i=["position","texcoord0","normal"],l=0,f=0;for(var c in t)l+=t[c].vertexCount,f+=t[c].indices.length;for(var p=0;p<i.length;p++)this.attributes[i[p]].init(l);this.indices=new V.Uint16Array(f);var y=0,x=0;for(var c in t){for(var D=t[c],p=0;p<i.length;p++)for(var E=i[p],N=D.attributes[E].value,$=D.attributes[E].size,_t=E==="normal",pt=0;pt<N.length;pt++){var At=N[pt];this.inside&&_t&&(At=-At),this.attributes[E].value[pt+$*x]=At}for(var Mt=D.indices.length,pt=0;pt<D.indices.length;pt++)this.indices[pt+y]=x+D.indices[this.inside?Mt-pt-1:pt];y+=D.indices.length,x+=D.vertexCount}this.boundingBox=new Kr,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Le(t,i,l){Jt.identity();var f=new Ut({widthSegments:i,heightSegments:l});switch(t){case"px":Tr.translate(Jt,Jt,sr.POSITIVE_X),Tr.rotateY(Jt,Jt,Math.PI/2);break;case"nx":Tr.translate(Jt,Jt,sr.NEGATIVE_X),Tr.rotateY(Jt,Jt,-Math.PI/2);break;case"py":Tr.translate(Jt,Jt,sr.POSITIVE_Y),Tr.rotateX(Jt,Jt,-Math.PI/2);break;case"ny":Tr.translate(Jt,Jt,sr.NEGATIVE_Y),Tr.rotateX(Jt,Jt,Math.PI/2);break;case"pz":Tr.translate(Jt,Jt,sr.POSITIVE_Z);break;case"nz":Tr.translate(Jt,Jt,sr.NEGATIVE_Z),Tr.rotateY(Jt,Jt,Math.PI);break}return f.applyTransform(Jt),f}var Me=de,Ke=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;dr.import(Ke);var lr=xi.extend(function(){var t=new dr({vertex:dr.source("clay.skybox.vertex"),fragment:dr.source("clay.skybox.fragment")}),i=new Or({shader:t,depthMask:!1});return{scene:null,geometry:new Me,material:i,environmentMap:null,culling:!1,_dummyCamera:new Gn}},function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){t.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),t.minFilter=Cr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,i,l){this.renderSkybox(t,l)},renderSkybox:function(t,i){var l=this._dummyCamera;l.aspect=t.getViewportAspect(),l.fov=i.fov||50,l.updateProjectionMatrix(),Tr.invert(l.invProjectionMatrix,l.projectionMatrix),l.worldTransform.copy(i.worldTransform),l.viewMatrix.copy(i.viewMatrix),this.position.copy(i.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],l)}}),se=lr,Se=se,ge=542327876,Ae=1,Re=2,Ye=4,tr=8,fr=4096,hr=131072,Fr=524288,en=8388608,Ur=8,wn=4194304,wi=4096,Rn=512,gn=1024,wa=2048,uu=4096,bs=8192,ra=16384,bf=32768,uc=2097152,fc=1,qn=2,ti=4,cy=64,vy=512,fu=131072;function ml(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function Yx(t){return String.fromCharCode(t&255,t>>8&255,t>>16&255,t>>24&255)}var hc=31,ep=ml("DXT1"),Mf=ml("DXT3"),rp=ml("DXT5"),np=0,cc=1,ip=2,ap=3,Ms=4,vc=7,ai=20,op=21,An=27,Pr=28,dc=29,sp=30,lp={parse:function(t,i){var l=new Int32Array(t,0,hc);if(l[np]!==ge||!l(ai)&ti)return null;var f=l(op),c=l[Ms],p=l[ap],y=l[Pr]&Rn,x=l[ip]&hr,D,E;switch(f){case ep:D=8,E=Cr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Mf:D=16,E=Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case rp:D=16,E=Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var N=l[cc]+4,$=y?6:1,_t=1;x&&(_t=Math.max(1,l[vc]));for(var pt=[],At=0;At<$;At++){var Mt=c,Nt=p;pt[At]=new Yr({width:Mt,height:Nt,format:E});for(var kt=[],te=0;te<_t;te++){var qt=Math.max(4,Mt)/4*Math.max(4,Nt)/4*D,jt=new Uint8Array(t,N,qt);N+=qt,Mt*=.5,Nt*=.5,kt[te]=jt}pt[At].pixels=kt[0],x&&(pt[At].mipmaps=kt)}if(i)i.width=pt[0].width,i.height=pt[0].height,i.format=pt[0].format,i.pixels=pt[0].pixels,i.mipmaps=pt[0].mipmaps;else return pt[0]}},up=lp,Xi=String.fromCharCode,fp=8,hp=32767;function Cf(t,i,l,f){if(t[3]>0){var c=Math.pow(2,t[3]-128-8+f);i[l+0]=t[0]*c,i[l+1]=t[1]*c,i[l+2]=t[2]*c}else i[l+0]=0,i[l+1]=0,i[l+2]=0;return i[l+3]=1,i}function pc(t,i,l){for(var f="",c=i;c<l;c++)f+=Xi(t[c]);return f}function gc(t,i){i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]}function Ho(t,i,l,f){for(var c=0,p=0,y=f;y>0;)if(t[p][0]=i[l++],t[p][1]=i[l++],t[p][2]=i[l++],t[p][3]=i[l++],t[p][0]===1&&t[p][1]===1&&t[p][2]===1){for(var x=t[p][3]<<c>>>0;x>0;x--)gc(t[p-1],t[p]),p++,y--;c+=8}else p++,y--,c=0;return l}function hu(t,i,l,f){if(f<fp|f>hp)return Ho(t,i,l,f);var c=i[l++];if(c!=2)return Ho(t,i,l-1,f);if(t[0][1]=i[l++],t[0][2]=i[l++],c=i[l++],(t[0][2]<<8>>>0|c)>>>0!==f)return null;for(var c=0;c<4;c++)for(var p=0;p<f;){var y=i[l++];if(y>128){y=(y&127)>>>0;for(var x=i[l++];y--;)t[p++][c]=x}else for(;y--;)t[p++][c]=i[l++]}return l}var Ef={parseRGBE:function(t,i,l){l==null&&(l=0);var f=new Uint8Array(t),c=f.length;if(pc(f,0,2)==="#?"){for(var p=2;p<c&&!(Xi(f[p])===`
`&&Xi(f[p+1])===`
`);p++);if(!(p>=c)){p+=2;for(var y="";p<c;p++){var x=Xi(f[p]);if(x===`
`)break;y+=x}var D=y.split(" "),E=parseInt(D[1]),N=parseInt(D[3]);if(!(!N||!E)){for(var $=p+1,_t=[],pt=0;pt<N;pt++){_t[pt]=[];for(var At=0;At<4;At++)_t[pt][At]=0}for(var Mt=new Float32Array(N*E*4),Nt=0,kt=0;kt<E;kt++){var $=hu(_t,f,$,N);if(!$)return null;for(var pt=0;pt<N;pt++)Cf(_t[pt],Mt,Nt,l),Nt+=4}return i||(i=new Yr),i.width=N,i.height=E,i.pixels=Mt,i.type=Cr.FLOAT,i}}}},parseRGBEFromPNG:function(t){}},mc=Ef,cu={loadTexture:function(t,i,l,f){var c;if(typeof i=="function"?(l=i,f=l,i={}):i=i||{},typeof t=="string"){if(t.match(/.hdr$/)||i.fileType==="hdr")return c=new Yr({width:0,height:0,sRGB:!1}),cu._fetchTexture(t,function(p){mc.parseRGBE(p,c,i.exposure),c.dirty(),l&&l(c)},f),c;t.match(/.dds$/)||i.fileType==="dds"?(c=new Yr({width:0,height:0}),cu._fetchTexture(t,function(p){up.parse(p,c),c.dirty(),l&&l(c)},f)):(c=new Yr,c.load(t),c.success(l),c.error(f))}else typeof t=="object"&&typeof t.px!="undefined"&&(c=new uo,c.load(t),c.success(l),c.error(f));return c},loadPanorama:function(t,i,l,f,c,p){var y=this;typeof f=="function"?(c=f,p=c,f={}):f=f||{},cu.loadTexture(i,f,function(x){x.flipY=f.flipY||!1,y.panoramaToCubeMap(t,x,l,f),x.dispose(t),c&&c(l)},p)},panoramaToCubeMap:function(t,i,l,f){var c=new Lt,p=new Se({scene:new Ta});return p.setEnvironmentMap(i),f=f||{},f.encodeRGBM&&p.material.define("fragment","RGBM_ENCODE"),l.sRGB=i.sRGB,c.texture=l,c.render(t,p.scene),c.texture=null,c.dispose(t),l},heightToNormal:function(t,i){var l=document.createElement("canvas"),f=l.width=t.width,c=l.height=t.height,p=l.getContext("2d");p.drawImage(t,0,0,f,c),i=i||!1;for(var y=p.getImageData(0,0,f,c),x=p.createImageData(f,c),D=0;D<y.data.length;D+=4){if(i){var E=y.data[D],N=y.data[D+1],$=y.data[D+2],_t=Math.abs(E-N)+Math.abs(N-$);if(_t>20)return console.warn("Given image is not a height map"),t}var pt,At,Mt,Nt;D%(f*4)===0?(pt=y.data[D],Mt=y.data[D+4]):D%(f*4)===(f-1)*4?(pt=y.data[D-4],Mt=y.data[D]):(pt=y.data[D-4],Mt=y.data[D+4]),D<f*4?(At=y.data[D],Nt=y.data[D+f*4]):D>f*(c-1)*4?(At=y.data[D-f*4],Nt=y.data[D]):(At=y.data[D-f*4],Nt=y.data[D+f*4]),x.data[D]=pt-Mt+127,x.data[D+1]=At-Nt+127,x.data[D+2]=255,x.data[D+3]=255}return p.putImageData(x,0,0),l},isHeightImage:function(t,i,l){if(!t||!t.width||!t.height)return!1;var f=document.createElement("canvas"),c=f.getContext("2d"),p=i||32;l=l||20,f.width=f.height=p,c.drawImage(t,0,0,p,p);for(var y=c.getImageData(0,0,p,p),x=0;x<y.data.length;x+=4){var D=y.data[x],E=y.data[x+1],N=y.data[x+2],$=Math.abs(D-E)+Math.abs(E-N);if($>l)return!1}return!0},_fetchTexture:function(t,i,l){V.request.get({url:t,responseType:"arraybuffer",onload:i,onerror:l})},createChessboard:function(t,i,l,f){t=t||512,i=i||64,l=l||"black",f=f||"white";var c=Math.ceil(t/i),p=document.createElement("canvas");p.width=t,p.height=t;var y=p.getContext("2d");y.fillStyle=f,y.fillRect(0,0,t,t),y.fillStyle=l;for(var x=0;x<c;x++)for(var D=0;D<c;D++){var E=D%2?x%2:x%2-1;E&&y.fillRect(x*i,D*i,i,i)}var N=new Yr({image:p,anisotropic:8});return N},createBlank:function(t){var i=document.createElement("canvas");i.width=1,i.height=1;var l=i.getContext("2d");l.fillStyle=t,l.fillRect(0,0,1,1);var f=new Yr({image:i});return f}},Xa=cu,vu=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function du(t){return"_on"+t}var Pf=function(t){var i=this;this._texture=new Yr({anisotropic:32,flipY:!1,surface:this,dispose:function(l){i.dispose(),Yr.prototype.dispose.call(this,l)}}),vu.forEach(function(l){this[du(l)]=function(f){f.triangle&&this._meshes.forEach(function(c){this.dispatchEvent(l,c,f.triangle,f.point)},this)}},this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};Pf.prototype={constructor:Pf,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var i=t.getDom();if(!(i instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),i=document.createElement("canvas");else{var l=this,f=t.getZr(),c=f.__oldRefreshImmediately||f.refreshImmediately;f.refreshImmediately=function(){c.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},f.__oldRefreshImmediately=c}this._texture.image=i,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new sr,i=new sr,l=new sr,f=new Ne,c=new Ne,p=new Ne,y=new Ne,x=new sr;return function(D,E,N,$){var _t=E.geometry,pt=_t.attributes.position,At=_t.attributes.texcoord0,Mt=sr.dot,Nt=sr.cross;pt.get(N[0],t.array),pt.get(N[1],i.array),pt.get(N[2],l.array),At.get(N[0],f.array),At.get(N[1],c.array),At.get(N[2],p.array),Nt(x,i,l);var kt=Mt(t,x),te=Mt($,x)/kt;Nt(x,l,t);var qt=Mt($,x)/kt;Nt(x,t,i);var jt=Mt($,x)/kt;Ne.scale(y,f,te),Ne.scaleAndAdd(y,y,c,qt),Ne.scaleAndAdd(y,y,p,jt);var fe=y.x*this._chart.getWidth(),ue=y.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(D,{zrX:fe,zrY:ue})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(vu.forEach(function(i){t.on(i,this[du(i)],this)},this),this._meshes.push(t))},detachFromMesh:function(t){var i=this._meshes.indexOf(t);i>=0&&this._meshes.splice(i,1),vu.forEach(function(l){t.off(l,this[du(l)])},this)},dispose:function(){this._meshes.forEach(function(t){this.detachFromMesh(t)},this)}};var cp=Pf,zi=Wa.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=Wa.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}}),zn=zi,ho=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;dr.import(ho);var Xo=new Ut,Lf=new xi({geometry:Xo,frustumCulling:!1}),vp=new zn,dp=X.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var t=new dr(dr.source("clay.compositor.vertex"),this.fragment),i=new Or({shader:t});i.enableTexturesAll(),this.material=i},{setUniform:function(t,i){this.material.setUniform(t,i)},getUniform:function(t){var i=this.material.uniforms[t];if(i)return i.value},attachOutput:function(t,i){this.outputs||(this.outputs={}),i=i||T.COLOR_ATTACHMENT0,this.outputs[i]=t},detachOutput:function(t){for(var i in this.outputs)this.outputs[i]===t&&(this.outputs[i]=null)},bind:function(t,i){if(this.outputs)for(var l in this.outputs){var f=this.outputs[l];f&&i.attach(f,l)}i&&i.bind(t)},unbind:function(t,i){i.unbind(t)},render:function(t,i){var l=t.gl;if(i){this.bind(t,i);var f=t.getGLExtension("EXT_draw_buffers");if(f&&this.outputs){var c=[];for(var p in this.outputs)p=+p,p>=l.COLOR_ATTACHMENT0&&p<=l.COLOR_ATTACHMENT0+8&&c.push(p);f.drawBuffersEXT(c)}}this.trigger("beforerender",this,t);var y=this.clearDepth?l.DEPTH_BUFFER_BIT:0;if(l.depthMask(!0),this.clearColor){y=y|l.COLOR_BUFFER_BIT,l.colorMask(!0,!0,!0,!0);var x=this.clearColor;Array.isArray(x)&&l.clearColor(x[0],x[1],x[2],x[3])}l.clear(y),this.blendWithPrevious?(l.enable(l.BLEND),this.material.transparent=!0):(l.disable(l.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),i&&this.unbind(t,i)},renderQuad:function(t){Lf.material=this.material,t.renderPass([Lf],vp)},dispose:function(t){}}),xn=dp,yc=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,_c=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`,co={},If=["px","nx","py","ny","pz","nz"];co.prefilterEnvironmentMap=function(t,i,l,f,c){(!c||!f)&&(f=co.generateNormalDistribution(),c=co.integrateBRDF(t,f)),l=l||{};var p=l.width||64,y=l.height||64,x=l.type||i.type,D=new uo({width:p,height:y,type:x,flipY:!1,mipmaps:[]});D.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var E=Math.min(p,y),N=Math.log(E)/Math.log(2)+1,$=new Or({shader:new dr({vertex:dr.source("clay.skybox.vertex"),fragment:_c})});$.set("normalDistribution",f),l.encodeRGBM&&$.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&$.define("fragment","RGBM_DECODE");var _t=new Ta,pt;if(i.textureType==="texture2D"){var At=new uo({width:p,height:y,type:x===Cr.FLOAT?Cr.HALF_FLOAT:x});Xa.panoramaToCubeMap(t,i,At,{encodeRGBM:l.decodeRGBM}),i=At}pt=new se({scene:_t,material:$}),pt.material.set("environmentMap",i);var Mt=new Lt({texture:D});l.encodeRGBM&&(x=D.type=Cr.UNSIGNED_BYTE);for(var Nt=new Yr({width:p,height:y,type:x}),kt=new Xn({depthBuffer:!1}),te=V[x===Cr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],qt=0;qt<N;qt++){D.mipmaps[qt]={pixels:{}},pt.material.set("roughness",qt/(N-1));for(var jt=Nt.width,fe=2*Math.atan(jt/(jt-.5))/Math.PI*180,ue=0;ue<If.length;ue++){var Te=new te(Nt.width*Nt.height*4);kt.attach(Nt),kt.bind(t);var xe=Mt.getCamera(If[ue]);xe.fov=fe,t.render(_t,xe),t.gl.readPixels(0,0,Nt.width,Nt.height,Cr.RGBA,x,Te),kt.unbind(t),D.mipmaps[qt].pixels[If[ue]]=Te}Nt.width/=2,Nt.height/=2,Nt.dirty()}return kt.dispose(t),Nt.dispose(t),pt.dispose(t),f.dispose(t),{environmentMap:D,brdfLookup:c,normalDistribution:f,maxMipmapLevel:N}},co.integrateBRDF=function(t,i){i=i||co.generateNormalDistribution();var l=new Xn({depthBuffer:!1}),f=new xn({fragment:yc}),c=new Yr({width:512,height:256,type:Cr.HALF_FLOAT,wrapS:Cr.CLAMP_TO_EDGE,wrapT:Cr.CLAMP_TO_EDGE,minFilter:Cr.NEAREST,magFilter:Cr.NEAREST,useMipmap:!1});return f.setUniform("normalDistribution",i),f.setUniform("viewportSize",[512,256]),f.attachOutput(c),f.render(t,l),l.dispose(t),c},co.generateNormalDistribution=function(l,f){for(var l=l||256,f=f||1024,c=new Yr({width:l,height:f,type:Cr.FLOAT,minFilter:Cr.NEAREST,magFilter:Cr.NEAREST,wrapS:Cr.CLAMP_TO_EDGE,wrapT:Cr.CLAMP_TO_EDGE,useMipmap:!1}),p=new Float32Array(f*l*4),y=[],x=0;x<l;x++){for(var D=x/l,E=D*D,N=0;N<f;N++){var $=(N<<16|N>>>16)>>>0;$=(($&1431655765)<<1|($&2863311530)>>>1)>>>0,$=(($&858993459)<<2|($&3435973836)>>>2)>>>0,$=(($&252645135)<<4|($&4042322160)>>>4)>>>0,$=((($&16711935)<<8|($&4278255360)>>>8)>>>0)/4294967296;var _t=Math.sqrt((1-$)/(1+(E*E-1)*$));y[N]=_t}for(var N=0;N<f;N++){var pt=(N*l+x)*4,_t=y[N],At=Math.sqrt(1-_t*_t),Mt=N/f,Nt=2*Math.PI*Mt;p[pt]=At*Math.cos(Nt),p[pt+1]=_t,p[pt+2]=At*Math.sin(Nt),p[pt+3]=1}}return c.pixels=p,c};var pu=co,pp=Li.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,i){if(!t.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=pu.generateNormalDistribution(),this._brdfLookup=pu.integrateBRDF(t,this._normalDistribution));var l=this.cubemap;if(!l.__prefiltered){var f=pu.prefilterEnvironmentMap(t,l,{encodeRGBM:!0,width:i,height:i},this._normalDistribution,this._brdfLookup);this.cubemap=f.environmentMap,this.cubemap.__prefiltered=!0,l.dispose(t)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}}),Ka=pp,gp=Li.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new V.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var i=t._coefficientsTmpArr,l=0;l<t.coefficients.length;l++)i[l]=t.coefficients[l];return i}}}}),mp=gp,xc={},Ko=["px","nx","py","ny","pz","nz"];function dy(t,i){var l=new Texture2D({width:9,height:1,type:Texture.FLOAT}),f=new Pass({fragment:projectEnvMapShaderCode});f.material.define("fragment","TEXTURE_SIZE",i.width),f.setUniform("environmentMap",i);var c=new FrameBuffer;c.attach(l),f.render(t,c),c.bind(t);var p=new vendor.Float32Array(9*4);t.gl.readPixels(0,0,9,1,Texture.RGBA,Texture.FLOAT,p);for(var y=new vendor.Float32Array(9*3),x=0;x<9;x++)y[x*3]=p[x*4],y[x*3+1]=p[x*4+1],y[x*3+2]=p[x*4+2];return c.unbind(t),c.dispose(t),f.dispose(t),y}function Rf(t,i){var l=t[0],f=t[1],c=t[2];return i===0?1:i===1?l:i===2?f:i===3?c:i===4?l*c:i===5?f*c:i===6?l*f:i===7?3*c*c-1:l*l-f*f}var yp={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function Of(t,i,l,f){for(var c=new V.Float32Array(27),p=Wt.create(),y=Wt.create(),x=Wt.create(),D=0;D<9;D++){for(var E=Wt.create(),N=0;N<Ko.length;N++){for(var $=i[Ko[N]],_t=Wt.create(),pt=0,At=0,Mt=yp[Ko[N]],Nt=0;Nt<f;Nt++)for(var kt=0;kt<l;kt++){p[0]=kt/(l-1)*2-1,p[1]=Nt/(f-1)*2-1,p[2]=-1,Wt.normalize(p,p),x[0]=p[Mt[0]]*Mt[3],x[1]=p[Mt[1]]*Mt[4],x[2]=p[Mt[2]]*Mt[5],y[0]=$[At++]/255,y[1]=$[At++]/255,y[2]=$[At++]/255;var te=$[At++]/255*8.12;y[0]*=te,y[1]*=te,y[2]*=te,Wt.scaleAndAdd(_t,_t,y,Rf(x,D)*-p[2]),pt+=-p[2]}Wt.scaleAndAdd(E,E,_t,1/pt)}c[D*3]=E[0]/6,c[D*3+1]=E[1]/6,c[D*3+2]=E[2]/6}return c}xc.projectEnvironmentMap=function(t,i,l){l=l||{},l.lod=l.lod||0;var f,c=new Ta,p=64;i.textureType==="texture2D"?f=new Se({scene:c,environmentMap:i}):(p=i.image&&i.image.px?i.image.px.width:i.width,f=new se({scene:c,environmentMap:i}));var y=Math.ceil(p/Math.pow(2,l.lod)),x=Math.ceil(p/Math.pow(2,l.lod)),D=new Yr({width:y,height:x}),E=new Xn;f.material.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&f.material.define("fragment","RGBM_DECODE"),f.material.set("lod",l.lod);for(var N=new Lt({texture:D}),$={},_t=0;_t<Ko.length;_t++){$[Ko[_t]]=new Uint8Array(y*x*4);var pt=N.getCamera(Ko[_t]);pt.fov=90,E.attach(D),E.bind(t),t.render(c,pt),t.gl.readPixels(0,0,y,x,Cr.RGBA,Cr.UNSIGNED_BYTE,$[Ko[_t]]),E.unbind(t)}return f.dispose(t),E.dispose(t),D.dispose(t),Of(t,$,y,x)};var _p=xc,Nf={firstNotNull:function(){for(var t=0,i=arguments.length;t<i;t++)if(arguments[t]!=null)return arguments[t]},queryDataIndex:function(t,i){if(i.dataIndexInside!=null)return i.dataIndexInside;if(i.dataIndex!=null)return F.D5.isArray(i.dataIndex)?F.D5.map(i.dataIndex,function(l){return t.indexOfRawIndex(l)}):t.indexOfRawIndex(i.dataIndex);if(i.name!=null)return F.D5.isArray(i.name)?F.D5.map(i.name,function(l){return t.indexOfName(l)}):t.indexOfName(i.name)}},Jr=Nf,Sc=Qr.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,i=this.widthSegments,l=this.attributes.position,f=this.attributes.texcoord0,c=this.attributes.normal,p=(i+1)*(t+1);l.init(p),f.init(p),c.init(p);var y=p>65535?Uint32Array:Uint16Array,x=this.indices=new y(i*t*6),D,E,N,$,_t,pt,At,qt=this.radius,Mt=this.phiStart,Nt=this.phiLength,kt=this.thetaStart,te=this.thetaLength,qt=this.radius,jt=[],fe=[],ue=0,Te=1/qt;for(At=0;At<=t;At++)for(pt=0;pt<=i;pt++)$=pt/i,_t=At/t,D=-qt*Math.cos(Mt+$*Nt)*Math.sin(kt+_t*te),E=qt*Math.cos(kt+_t*te),N=qt*Math.sin(Mt+$*Nt)*Math.sin(kt+_t*te),jt[0]=D,jt[1]=E,jt[2]=N,fe[0]=$,fe[1]=_t,l.set(ue,jt),f.set(ue,fe),jt[0]*=Te,jt[1]*=Te,jt[2]*=Te,c.set(ue,jt),ue++;var xe,Ie,je,Ve,Je=i+1,er=0;for(At=0;At<t;At++)for(pt=0;pt<i;pt++)Ie=At*Je+pt,xe=At*Je+pt+1,Ve=(At+1)*Je+pt+1,je=(At+1)*Je+pt,x[er++]=xe,x[er++]=Ie,x[er++]=Ve,x[er++]=Ie,x[er++]=je,x[er++]=Ve;this.boundingBox=new Kr,this.boundingBox.max.set(qt,qt,qt),this.boundingBox.min.set(-qt,-qt,-qt)}}),xp=Sc,Yo=Li.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}}}),Bf=Yo,Tc=Li.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new sr,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Li.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Dc=Tc,Sp=Li.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Li.prototype.clone.call(this);return t.range=this.range,t}}),Tp=Sp,wc=Li.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new sr,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Li.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Dp=wc,nn=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f||0,this.array=vr.fromValues(t,i,l,f),this._dirty=!0};nn.prototype={constructor:nn,add:function(t){return vr.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new nn(this.x,this.y,this.z,this.w)},copy:function(t){return vr.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return vr.dist(this.array,t.array)},distance:function(t){return vr.distance(this.array,t.array)},div:function(t){return vr.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return vr.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return vr.dot(this.array,t.array)},len:function(){return vr.len(this.array)},length:function(){return vr.length(this.array)},lerp:function(t,i,l){return vr.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return vr.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return vr.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return vr.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return vr.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return vr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return vr.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return vr.random(this.array,t),this._dirty=!0,this},scale:function(t){return vr.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return vr.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return vr.sqrDist(this.array,t.array)},squaredDistance:function(t){return vr.squaredDistance(this.array,t.array)},sqrLen:function(){return vr.sqrLen(this.array)},squaredLength:function(){return vr.squaredLength(this.array)},sub:function(t){return vr.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return vr.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return vr.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return vr.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var yl=Object.defineProperty;if(yl){var Ff=nn.prototype;yl(Ff,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),yl(Ff,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),yl(Ff,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),yl(Ff,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}nn.add=function(t,i,l){return vr.add(t.array,i.array,l.array),t._dirty=!0,t},nn.set=function(t,i,l,f,c){vr.set(t.array,i,l,f,c),t._dirty=!0},nn.copy=function(t,i){return vr.copy(t.array,i.array),t._dirty=!0,t},nn.dist=function(t,i){return vr.distance(t.array,i.array)},nn.distance=nn.dist,nn.div=function(t,i,l){return vr.divide(t.array,i.array,l.array),t._dirty=!0,t},nn.divide=nn.div,nn.dot=function(t,i){return vr.dot(t.array,i.array)},nn.len=function(t){return vr.length(t.array)},nn.lerp=function(t,i,l,f){return vr.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},nn.min=function(t,i,l){return vr.min(t.array,i.array,l.array),t._dirty=!0,t},nn.max=function(t,i,l){return vr.max(t.array,i.array,l.array),t._dirty=!0,t},nn.mul=function(t,i,l){return vr.multiply(t.array,i.array,l.array),t._dirty=!0,t},nn.multiply=nn.mul,nn.negate=function(t,i){return vr.negate(t.array,i.array),t._dirty=!0,t},nn.normalize=function(t,i){return vr.normalize(t.array,i.array),t._dirty=!0,t},nn.random=function(t,i){return vr.random(t.array,i),t._dirty=!0,t},nn.scale=function(t,i,l){return vr.scale(t.array,i.array,l),t._dirty=!0,t},nn.scaleAndAdd=function(t,i,l,f){return vr.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},nn.sqrDist=function(t,i){return vr.sqrDist(t.array,i.array)},nn.squaredDistance=nn.sqrDist,nn.sqrLen=function(t){return vr.sqrLen(t.array)},nn.squaredLength=nn.sqrLen,nn.sub=function(t,i,l){return vr.subtract(t.array,i.array,l.array),t._dirty=!0,t},nn.subtract=nn.sub,nn.transformMat4=function(t,i,l){return vr.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},nn.transformQuat=function(t,i,l){return vr.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};var wp=nn,Ai={};Ai.create=function(){var t=new Vr(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ai.clone=function(t){var i=new Vr(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},Ai.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},Ai.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ai.transpose=function(t,i){if(t===i){var l=i[1];t[1]=i[2],t[2]=l}else t[0]=i[0],t[1]=i[2],t[2]=i[1],t[3]=i[3];return t},Ai.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*p-c*f;return y?(y=1/y,t[0]=p*y,t[1]=-f*y,t[2]=-c*y,t[3]=l*y,t):null},Ai.adjoint=function(t,i){var l=i[0];return t[0]=i[3],t[1]=-i[1],t[2]=-i[2],t[3]=l,t},Ai.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Ai.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],D=l[1],E=l[2],N=l[3];return t[0]=f*x+p*D,t[1]=c*x+y*D,t[2]=f*E+p*N,t[3]=c*E+y*N,t},Ai.mul=Ai.multiply,Ai.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),D=Math.cos(l);return t[0]=f*D+p*x,t[1]=c*D+y*x,t[2]=f*-x+p*D,t[3]=c*-x+y*D,t},Ai.scale=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],D=l[1];return t[0]=f*x,t[1]=c*x,t[2]=p*D,t[3]=y*D,t},Ai.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},Ai.LDU=function(t,i,l,f){return t[2]=f[2]/f[0],l[0]=f[0],l[1]=f[1],l[3]=f[3]-t[2]*l[1],[t,i,l]};var kn=Ai,Vi=function(){this.array=kn.create(),this._dirty=!0};Vi.prototype={constructor:Vi,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new Vi().copy(this)},copy:function(t){return kn.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return kn.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return kn.determinant(this.array)},identity:function(){return kn.identity(this.array),this._dirty=!0,this},invert:function(){return kn.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return kn.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return kn.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return kn.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return kn.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return kn.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return kn.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return kn.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Vi.adjoint=function(t,i){return kn.adjoint(t.array,i.array),t._dirty=!0,t},Vi.copy=function(t,i){return kn.copy(t.array,i.array),t._dirty=!0,t},Vi.determinant=function(t){return kn.determinant(t.array)},Vi.identity=function(t){return kn.identity(t.array),t._dirty=!0,t},Vi.invert=function(t,i){return kn.invert(t.array,i.array),t._dirty=!0,t},Vi.mul=function(t,i,l){return kn.mul(t.array,i.array,l.array),t._dirty=!0,t},Vi.multiply=Vi.mul,Vi.rotate=function(t,i,l){return kn.rotate(t.array,i.array,l),t._dirty=!0,t},Vi.scale=function(t,i,l){return kn.scale(t.array,i.array,l.array),t._dirty=!0,t},Vi.transpose=function(t,i){return kn.transpose(t.array,i.array),t._dirty=!0,t};var Ap=Vi,ki={};ki.create=function(){var t=new Vr(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ki.clone=function(t){var i=new Vr(6);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i},ki.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t},ki.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ki.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],D=l*p-f*c;return D?(D=1/D,t[0]=p*D,t[1]=-f*D,t[2]=-c*D,t[3]=l*D,t[4]=(c*x-p*y)*D,t[5]=(f*y-l*x)*D,t):null},ki.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},ki.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=l[0],N=l[1],$=l[2],_t=l[3],pt=l[4],At=l[5];return t[0]=f*E+p*N,t[1]=c*E+y*N,t[2]=f*$+p*_t,t[3]=c*$+y*_t,t[4]=f*pt+p*At+x,t[5]=c*pt+y*At+D,t},ki.mul=ki.multiply,ki.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=Math.sin(l),N=Math.cos(l);return t[0]=f*N+p*E,t[1]=c*N+y*E,t[2]=f*-E+p*N,t[3]=c*-E+y*N,t[4]=x,t[5]=D,t},ki.scale=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=l[0],N=l[1];return t[0]=f*E,t[1]=c*E,t[2]=p*N,t[3]=y*N,t[4]=x,t[5]=D,t},ki.translate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],D=i[5],E=l[0],N=l[1];return t[0]=f,t[1]=c,t[2]=p,t[3]=y,t[4]=f*E+p*N+x,t[5]=c*E+y*N+D,t},ki.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var jn=ki,Ki=function(){this.array=jn.create(),this._dirty=!0};Ki.prototype={constructor:Ki,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new Ki().copy(this)},copy:function(t){return jn.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return jn.determinant(this.array)},identity:function(){return jn.identity(this.array),this._dirty=!0,this},invert:function(){return jn.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return jn.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return jn.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return jn.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return jn.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return jn.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return jn.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return jn.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Ki.copy=function(t,i){return jn.copy(t.array,i.array),t._dirty=!0,t},Ki.determinant=function(t){return jn.determinant(t.array)},Ki.identity=function(t){return jn.identity(t.array),t._dirty=!0,t},Ki.invert=function(t,i){return jn.invert(t.array,i.array),t._dirty=!0,t},Ki.mul=function(t,i,l){return jn.mul(t.array,i.array,l.array),t._dirty=!0,t},Ki.multiply=Ki.mul,Ki.rotate=function(t,i,l){return jn.rotate(t.array,i.array,l),t._dirty=!0,t},Ki.scale=function(t,i,l){return jn.scale(t.array,i.array,l.array),t._dirty=!0,t},Ki.translate=function(t,i,l){return jn.translate(t.array,i.array,l.array),t._dirty=!0,t};var fa=Ki,oi=function(){this.array=qr.create(),this._dirty=!0};oi.prototype={constructor:oi,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return qr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new oi().copy(this)},copy:function(t){return qr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return qr.determinant(this.array)},fromMat2d:function(t){return qr.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return qr.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return qr.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return qr.identity(this.array),this._dirty=!0,this},invert:function(){return qr.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return qr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return qr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return qr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return qr.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return qr.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return qr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return qr.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return qr.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return qr.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},oi.adjoint=function(t,i){return qr.adjoint(t.array,i.array),t._dirty=!0,t},oi.copy=function(t,i){return qr.copy(t.array,i.array),t._dirty=!0,t},oi.determinant=function(t){return qr.determinant(t.array)},oi.identity=function(t){return qr.identity(t.array),t._dirty=!0,t},oi.invert=function(t,i){return qr.invert(t.array,i.array),t},oi.mul=function(t,i,l){return qr.mul(t.array,i.array,l.array),t._dirty=!0,t},oi.multiply=oi.mul,oi.fromMat2d=function(t,i){return qr.fromMat2d(t.array,i.array),t._dirty=!0,t},oi.fromMat4=function(t,i){return qr.fromMat4(t.array,i.array),t._dirty=!0,t},oi.fromQuat=function(t,i){return qr.fromQuat(t.array,i.array),t._dirty=!0,t},oi.normalFromMat4=function(t,i){return qr.normalFromMat4(t.array,i.array),t._dirty=!0,t},oi.rotate=function(t,i,l){return qr.rotate(t.array,i.array,l),t._dirty=!0,t},oi.scale=function(t,i,l){return qr.scale(t.array,i.array,l.array),t._dirty=!0,t},oi.transpose=function(t,i){return qr.transpose(t.array,i.array),t._dirty=!0,t},oi.translate=function(t,i,l){return qr.translate(t.array,i.array,l.array),t._dirty=!0,t};var bp=oi,Un=z(70295),Mp={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,i){this._animators=this._animators||[];var l=this,f;if(t){for(var c=t.split("."),p=l,y=0,x=c.length;y<x;y++)p&&(p=p[c[y]]);p&&(f=p)}else f=l;if(f==null)throw new Error("Target "+t+" not exists");var D=this._animators,E=new Un.Z(f,i),N=this;return E.during(function(){N.__zr&&N.__zr.refresh()}).done(function(){var $=D.indexOf(E);$>=0&&D.splice($,1)}),D.push(E),this.__zr&&this.__zr.animation.addAnimator(E),E},stopAnimation:function(t){this._animators=this._animators||[];for(var i=this._animators,l=i.length,f=0;f<l;f++)i[f].stop(t);return i.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.addAnimator(this._animators[i])},removeAnimatorsFromZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.removeAnimator(this._animators[i])}},Cp=Mp,Cs=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,gu=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,Ep=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,Pp=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,jo=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,Ac=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,Lp=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign($i.prototype,Cp),dr.import(Cs),dr.import(sl),dr.import(gu),dr.import(Ep),dr.import(Pp),dr.import(jo),dr.import(Ac),dr.import(Lp);function Ip(t){return!t||t==="none"}function bc(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}function Rp(t){return t.getZr&&t.setOption}var Op=Ta.prototype.addToScene,Np=Ta.prototype.removeFromScene;Ta.prototype.addToScene=function(t){if(Op.call(this,t),this.__zr){var i=this.__zr;t.traverse(function(l){l.__zr=i,l.addAnimatorsToZr&&l.addAnimatorsToZr(i)})}},Ta.prototype.removeFromScene=function(t){Np.call(this,t),t.traverse(function(i){var l=i.__zr;i.__zr=null,l&&i.removeAnimatorsFromZr&&i.removeAnimatorsFromZr(l)})},Or.prototype.setTextureImage=function(t,i,l,f){if(this.shader){var c=l.getZr(),p=this,y;return p.autoUpdateTextureStatus=!1,p.disableTexture(t),Ip(i)||(y=kr.loadTexture(i,l,f,function(x){p.enableTexture(t),c&&c.refresh()}),p.set(t,y)),y}};var kr={};kr.Renderer=za,kr.Node=$i,kr.Mesh=xi,kr.Shader=dr,kr.Material=Or,kr.Texture=Cr,kr.Texture2D=Yr,kr.Geometry=Qr,kr.SphereGeometry=xp,kr.PlaneGeometry=Ut,kr.CubeGeometry=Me,kr.AmbientLight=Bf,kr.DirectionalLight=Dc,kr.PointLight=Tp,kr.SpotLight=Dp,kr.PerspectiveCamera=Gn,kr.OrthographicCamera=zn,kr.Vector2=Ne,kr.Vector3=sr,kr.Vector4=wp,kr.Quaternion=nu,kr.Matrix2=Ap,kr.Matrix2d=fa,kr.Matrix3=bp,kr.Matrix4=Tr,kr.Plane=Go,kr.Ray=Io,kr.BoundingBox=Kr,kr.Frustum=Sa;var mu=null;function Bp(){return mu!==null||(mu=Xa.createBlank("rgba(255,255,255,0)").image),mu}function Gf(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function Yi(t){if((t.wrapS===Cr.REPEAT||t.wrapT===Cr.REPEAT)&&t.image){var i=Gf(t.width),l=Gf(t.height);if(i!==t.width||l!==t.height){var f=document.createElement("canvas");f.width=i,f.height=l;var c=f.getContext("2d");c.drawImage(t.image,0,0,i,l),t.image=f}}}kr.loadTexture=function(t,i,l,f){typeof l=="function"&&(f=l,l={}),l=l||{};for(var c=Object.keys(l).sort(),p="",y=0;y<c.length;y++)p+=c[y]+"_"+l[c[y]]+"_";var x=i.__textureCache=i.__textureCache||new Af.ZP(20);if(Rp(t)){var D=t.__textureid__,E=x.get(p+D);if(E)E.texture.surface.setECharts(t),f&&f(E.texture);else{var N=new cp(t);N.onupdate=function(){i.getZr().refresh()},E={texture:N.getTexture()};for(var y=0;y<c.length;y++)E.texture[c[y]]=l[c[y]];D=t.__textureid__||"__ecgl_ec__"+E.texture.__uid__,t.__textureid__=D,x.put(p+D,E),f&&f(E.texture)}return E.texture}else if(bc(t)){var D=t.__textureid__,E=x.get(p+D);if(!E){E={texture:new kr.Texture2D({image:t})};for(var y=0;y<c.length;y++)E.texture[c[y]]=l[c[y]];D=t.__textureid__||"__ecgl_image__"+E.texture.__uid__,t.__textureid__=D,x.put(p+D,E),Yi(E.texture),f&&f(E.texture)}return E.texture}else{var E=x.get(p+t);if(E)E.callbacks?E.callbacks.push(f):f&&f(E.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){E={callbacks:[f]};var $=Xa.loadTexture(t,{exposure:l.exposure,fileType:"hdr"},function(){$.dirty(),E.callbacks.forEach(function(At){At&&At($)}),E.callbacks=null});E.texture=$,x.put(p+t,E)}else{for(var $=new kr.Texture2D({image:new Image}),y=0;y<c.length;y++)$[c[y]]=l[c[y]];E={texture:$,callbacks:[f]};var _t=$.image;_t.onload=function(){$.image=_t,Yi($),$.dirty(),E.callbacks.forEach(function(Mt){Mt&&Mt($)}),E.callbacks=null},_t.crossOrigin="Anonymous",_t.src=t,$.image=Bp(),x.put(p+t,E)}return E.texture}},kr.createAmbientCubemap=function(t,i,l,f){t=t||{};var c=t.texture,p=Jr.firstNotNull(t.exposure,1),y=new Ka({intensity:Jr.firstNotNull(t.specularIntensity,1)}),x=new mp({intensity:Jr.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return y.cubemap=kr.loadTexture(c,l,{exposure:p},function(){if(y.cubemap.flipY=!1,!1)var D;if(y.prefilter(i,32),!1)var E;x.coefficients=_p.projectEnvironmentMap(i,y.cubemap,{lod:1}),f&&f()}),{specular:y,diffuse:x}},kr.createBlankTexture=Xa.createBlank,kr.isImage=bc,kr.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)},kr.parseColor=function(t,i){return t instanceof Array?(i||(i=[]),i[0]=t[0],i[1]=t[1],i[2]=t[2],t.length>3?i[3]=t[3]:i[3]=1,i):(i=F.$_.parse(t||"#000",i)||[0,0,0,0],i[0]/=255,i[1]/=255,i[2]/=255,i)},kr.directionFromAlphaBeta=function(t,i){var l=t/180*Math.PI+Math.PI/2,f=-i/180*Math.PI+Math.PI/2,c=[],p=Math.sin(l);return c[0]=p*Math.cos(f),c[1]=-Math.cos(l),c[2]=p*Math.sin(f),c},kr.getShadowResolution=function(t){var i=1024;switch(t){case"low":i=512;break;case"medium":break;case"high":i=2048;break;case"ultra":i=4096;break}return i},kr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],kr.createShader=function(t){t==="ecgl.shadow"&&(t="ecgl.displayShadow");var i=dr.source(t+".vertex"),l=dr.source(t+".fragment");i||console.error("Vertex shader of '%s' not exits",t),l||console.error("Fragment shader of '%s' not exits",t);var f=new dr(i,l);return f.name=t,f},kr.createMaterial=function(t,i){i instanceof Array||(i=[i]);var l=kr.createShader(t),f=new Or({shader:l});return i.forEach(function(c){typeof c=="string"&&f.define(c)}),f},kr.setMaterialFromModel=function(t,i,l,f){i.autoUpdateTextureStatus=!1;var c=l.getModel(t+"Material"),p=c.get("detailTexture"),y=Jr.firstNotNull(c.get("textureTiling"),1),x=Jr.firstNotNull(c.get("textureOffset"),0);typeof y=="number"&&(y=[y,y]),typeof x=="number"&&(x=[x,x]);var D=y[0]>1||y[1]>1?kr.Texture.REPEAT:kr.Texture.CLAMP_TO_EDGE,E={anisotropic:8,wrapS:D,wrapT:D};if(t==="realistic"){var N=c.get("roughness"),$=c.get("metalness");$!=null?isNaN($)&&(i.setTextureImage("metalnessMap",$,f,E),$=Jr.firstNotNull(c.get("metalnessAdjust"),.5)):$=0,N!=null?isNaN(N)&&(i.setTextureImage("roughnessMap",N,f,E),N=Jr.firstNotNull(c.get("roughnessAdjust"),.5)):N=.5;var _t=c.get("normalTexture");i.setTextureImage("detailMap",p,f,E),i.setTextureImage("normalMap",_t,f,E),i.set({roughness:N,metalness:$,detailUvRepeat:y,detailUvOffset:x})}else if(t==="lambert")i.setTextureImage("detailMap",p,f,E),i.set({detailUvRepeat:y,detailUvOffset:x});else if(t==="color")i.setTextureImage("detailMap",p,f,E),i.set({detailUvRepeat:y,detailUvOffset:x});else if(t==="hatching"){var pt=c.get("hatchingTextures")||[];pt.length<6;for(var At=0;At<6;At++)i.setTextureImage("hatch"+(At+1),pt[At],f,{anisotropic:8,wrapS:kr.Texture.REPEAT,wrapT:kr.Texture.REPEAT});i.set({detailUvRepeat:y,detailUvOffset:x})}},kr.updateVertexAnimation=function(t,i,l,f){var c=f.get("animation"),p=f.get("animationDurationUpdate"),y=f.get("animationEasingUpdate"),x=l.shadowDepthMaterial;if(c&&i&&p>0&&i.geometry.vertexCount===l.geometry.vertexCount){l.material.define("vertex","VERTEX_ANIMATION"),l.ignorePreZ=!0,x&&x.define("vertex","VERTEX_ANIMATION");for(var D=0;D<t.length;D++)l.geometry.attributes[t[D][0]].value=i.geometry.attributes[t[D][1]].value;l.geometry.dirty(),l.__percent=0,l.material.set("percent",0),l.stopAnimation(),l.animate().when(p,{__percent:1}).during(function(){l.material.set("percent",l.__percent),x&&x.set("percent",l.__percent)}).done(function(){l.ignorePreZ=!1,l.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")}).start(y)}else l.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")};var ae=kr,yu=z(75820),Pn=function(t,i){this.id=t,this.zr=i;try{this.renderer=new za({clearBit:0,devicePixelRatio:i.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(i.painter.getWidth(),i.painter.getHeight())}catch(f){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(f);return}this.onglobalout=this.onglobalout.bind(this),i.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var l=this.dom.style;l.position="absolute",l.left="0",l.top="0",this.views=[],this._picking=new ii({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new F.Q.UL({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};Pn.prototype.setUnpainted=function(){},Pn.prototype.addView=function(t){if(t.layer!==this){var i=this._viewsToDispose.indexOf(t);i>=0&&this._viewsToDispose.splice(i,1),this.views.push(t),t.layer=this;var l=this.zr;t.scene.traverse(function(f){f.__zr=l,f.addAnimatorsToZr&&f.addAnimatorsToZr(l)})}};function Mc(t){var i=t.__zr;t.__zr=null,i&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(i)}Pn.prototype.removeView=function(t){if(t.layer===this){var i=this.views.indexOf(t);i>=0&&(this.views.splice(i,1),t.scene.traverse(Mc,this),t.layer=null,this._viewsToDispose.push(t))}},Pn.prototype.removeViewsAll=function(){this.views.forEach(function(t){t.scene.traverse(Mc,this),t.layer=null,this._viewsToDispose.push(t)},this),this.views.length=0},Pn.prototype.resize=function(t,i){var l=this.renderer;l.resize(t,i)},Pn.prototype.clear=function(){var t=this.renderer.gl,i=this._backgroundColor||[0,0,0,0];t.clearColor(i[0],i[1],i[2],i[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)},Pn.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)},Pn.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},Pn.prototype.needsRefresh=function(){this.zr.refresh()},Pn.prototype.refresh=function(t){this._backgroundColor=t?ae.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var i=0;i<this.views.length;i++)this.views[i].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var i=0;i<this._viewsToDispose.length;i++)this._viewsToDispose[i].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},Pn.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)},Pn.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var i=0;i<this.views.length;i++)this.views[i].render(this.renderer,t);this.renderer.restoreViewport()},Pn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var Cc=1;Pn.prototype._startAccumulating=function(t){var i=this;this._stopAccumulating();for(var l=!1,f=0;f<this.views.length;f++)l=this.views[f].needsAccumulate()||l;if(!l)return;function c(p){if(!(!i._accumulatingId||p!==i._accumulatingId)){for(var y=!0,x=0;x<i.views.length;x++)y=i.views[x].isAccumulateFinished()&&l;y||(i._doRender(!0),t?c(p):(0,yu.Z)(function(){c(p)}))}}this._accumulatingId=Cc++,t?c(i._accumulatingId):this._accumulatingTimeout=setTimeout(function(){c(i._accumulatingId)},50)},Pn.prototype._trackAndClean=function(){var t=[],i=[];this._textureList&&(Es(this._textureList),Es(this._geometriesList));for(var l=0;l<this.views.length;l++)Ec(this.views[l].scene,t,i);this._textureList&&(_u(this.renderer,this._textureList),_u(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=i};function Es(t){for(var i=0;i<t.length;i++)t[i].__used__=0}function _u(t,i){for(var l=0;l<i.length;l++)i[l].__used__||i[l].dispose(t)}function Ps(t,i){t.__used__=t.__used__||0,t.__used__++,t.__used__===1&&i.push(t)}function Ec(t,i,l){var f,c;t.traverse(function(y){if(y.isRenderable()){var x=y.geometry,D=y.material;if(D!==f)for(var E=D.getTextureUniforms(),N=0;N<E.length;N++){var $=E[N],_t=D.uniforms[$].value;if(_t){if(_t instanceof Cr)Ps(_t,i);else if(_t instanceof Array)for(var pt=0;pt<_t.length;pt++)_t[pt]instanceof Cr&&Ps(_t[pt],i)}}x!==c&&Ps(x,l),f=D,c=x}});for(var p=0;p<t.lights.length;p++)t.lights[p].cubemap&&Ps(t.lights[p].cubemap,i)}Pn.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Es(this._textureList),Es(this._geometriesList),_u(this.renderer,this._textureList),_u(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},Pn.prototype.onmousedown=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mousedown",t,i),this._dispatchDataEvent("mousedown",t,i)),this._downX=t.offsetX,this._downY=t.offsetY}},Pn.prototype.onmousemove=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY),l=i&&i.target,f=this._hovered;this._hovered=i,f&&l!==f.target&&(f.relatedTarget=l,this._dispatchEvent("mouseout",t,f),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,i),i&&(this.zr.setCursorStyle("pointer"),(!f||l!==f.target)&&this._dispatchEvent("mouseover",t,i)),this._dispatchDataEvent("mousemove",t,i)}},Pn.prototype.onmouseup=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mouseup",t,i),this._dispatchDataEvent("mouseup",t,i)),this._upX=t.offsetX,this._upY=t.offsetY}},Pn.prototype.onclick=Pn.prototype.dblclick=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){var i=this._upX-this._downX,l=this._upY-this._downY;if(!(Math.sqrt(i*i+l*l)>20)){t=t.event;var f=this.pickObject(t.offsetX,t.offsetY);f&&(this._dispatchEvent(t.type,t,f),this._dispatchDataEvent(t.type,t,f));var c=this._clickToSetFocusPoint(t);if(c){var p=c.view.setDOFFocusOnPoint(c.distance);p&&this.zr.refresh()}}}},Pn.prototype._clickToSetFocusPoint=function(t){for(var i=this.renderer,l=i.viewport,f=this.views.length-1;f>=0;f--){var c=this.views[f];if(c.hasDOF()&&c.containPoint(t.offsetX,t.offsetY)){this._picking.scene=c.scene,this._picking.camera=c.camera,i.viewport=c.viewport;var p=this._picking.pick(t.offsetX,t.offsetY,!0);if(p)return p.view=c,p}}i.viewport=l},Pn.prototype.onglobalout=function(t){var i=this._hovered;i&&this._dispatchEvent("mouseout",t,{target:i.target})},Pn.prototype.pickObject=function(t,i){for(var l=[],f=this.renderer,c=f.viewport,p=0;p<this.views.length;p++){var y=this.views[p];y.containPoint(t,i)&&(this._picking.scene=y.scene,this._picking.camera=y.camera,f.viewport=y.viewport,this._picking.pickAll(t,i,l))}return f.viewport=c,l.sort(function(x,D){return x.distance-D.distance}),l[0]},Pn.prototype._dispatchEvent=function(t,i,l){l||(l={});var f=l.target;for(l.cancelBubble=!1,l.event=i,l.type=t,l.offsetX=i.offsetX,l.offsetY=i.offsetY;f&&(f.trigger(t,l),f=f.getParent(),!l.cancelBubble););this._dispatchToView(t,l)},Pn.prototype._dispatchDataEvent=function(t,i,l){var f=l&&l.target,c=f&&f.dataIndex,p=f&&f.seriesIndex,y=f&&f.eventData,x=!1,D=this._zrEventProxy;D.x=i.offsetX,D.y=i.offsetY,D.update();var E={target:D};const N=F._y.getECData(D);t==="mousemove"&&(c!=null?c!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(N.dataIndex=this._lastDataIndex,N.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(E,"mouseout",i)),x=!0):y!=null&&y!==this._lastEventData&&(this._lastEventData!=null&&(N.eventData=this._lastEventData,this.zr.handler.dispatchToElement(E,"mouseout",i)),x=!0),this._lastEventData=y,this._lastDataIndex=c,this._lastSeriesIndex=p),N.eventData=y,N.dataIndex=c,N.seriesIndex=p,(y!=null||parseInt(c,10)>=0&&parseInt(p,10)>=0)&&(this.zr.handler.dispatchToElement(E,t,i),x&&this.zr.handler.dispatchToElement(E,"mouseover",i))},Pn.prototype._dispatchToView=function(t,i){for(var l=0;l<this.views.length;l++)this.views[l].containPoint(i.offsetX,i.offsetY)&&this.views[l].trigger(t,i)},Object.assign(Pn.prototype,H);var _l=Pn,xl=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function Jo(t,i){if(t&&t[i]&&(t[i].normal||t[i].emphasis)){var l=t[i].normal,f=t[i].emphasis;l&&(t[i]=l),f&&(t.emphasis=t.emphasis||{},t.emphasis[i]=f)}}function zf(t){Jo(t,"itemStyle"),Jo(t,"lineStyle"),Jo(t,"areaStyle"),Jo(t,"label")}function xu(t){t&&(t instanceof Array||(t=[t]),F.D5.each(t,function(i){if(i.axisLabel){var l=i.axisLabel;Object.assign(l,l.textStyle),l.textStyle=null}}))}function Su(t){F.D5.each(t.series,function(i){F.D5.indexOf(xl,i.type)>=0&&(zf(i),i.coordinateSystem==="mapbox"&&(i.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))}),xu(t.xAxis3D),xu(t.yAxis3D),xu(t.zAxis3D),xu(t.grid3D),Jo(t.geo3D)}function Pc(t){this._layers={},this._zr=t}Pc.prototype.update=function(t,i){var l=this,f=i.getZr();if(!f.getWidth()||!f.getHeight()){console.warn("Dom has no width or height");return}function c(x){f.setSleepAfterStill(0);var D;x.coordinateSystem&&x.coordinateSystem.model,D=x.get("zlevel");var E=l._layers,N=E[D];if(!N){if(N=E[D]=new _l("gl-"+D,f),f.painter.isSingleCanvas()){N.virtual=!0;var $=new F.Q.Ee({z:1e4,style:{image:N.renderer.canvas},silent:!0});N.__hostImage=$,f.add($)}f.painter.insertLayer(D,N)}return N.__hostImage&&N.__hostImage.setStyle({width:N.renderer.getWidth(),height:N.renderer.getHeight()}),N}function p(x,D){x&&x.traverse(function(E){E.isRenderable&&E.isRenderable()&&(E.ignorePicking=E.$ignorePicking!=null?E.$ignorePicking:D)})}for(var y in this._layers)this._layers[y].removeViewsAll();t.eachComponent(function(x,D){if(x!=="series"){var E=i.getViewOfComponentModel(D),N=D.coordinateSystem;if(E.__ecgl__){var $;if(N){if(!N.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+D.id);return}$=N.viewGL}else{if(!D.viewGL){console.error("Can't find viewGL of component "+D.id);return}$=N.viewGL}var $=N.viewGL,_t=c(D);_t.addView($),E.afterRender&&E.afterRender(D,t,i,_t),p(E.groupGL,D.get("silent"))}}}),t.eachSeries(function(x){var D=i.getViewOfSeriesModel(x),E=x.coordinateSystem;if(D.__ecgl__){if(E&&!E.viewGL&&!D.viewGL){console.error("Can't find viewGL of series "+D.id);return}var N=E&&E.viewGL||D.viewGL,$=c(x);$.addView(N),D.afterRender&&D.afterRender(x,t,i,$),p(D.groupGL,x.get("silent"))}})},F.sq(function(t){var i=t.getZr(),l=i.painter.dispose;i.painter.dispose=function(){typeof this.eachOtherLayer=="function"&&this.eachOtherLayer(function(f){f instanceof _l&&f.dispose()}),l.call(this)},i.painter.getRenderedCanvas=function(f){if(f=f||{},this._singleCanvas)return this._layers[0].dom;var c=document.createElement("canvas"),p=f.pixelRatio||this.dpr;c.width=this.getWidth()*p,c.height=this.getHeight()*p;var y=c.getContext("2d");y.dpr=p,y.clearRect(0,0,c.width,c.height),f.backgroundColor&&(y.fillStyle=f.backgroundColor,y.fillRect(0,0,c.width,c.height));var x=this.storage.getDisplayList(!0),D={},E,N=this;function $(Mt,Nt){var kt=N._zlevelList;Mt==null&&(Mt=-1/0);for(var te,qt=0;qt<kt.length;qt++){var jt=kt[qt],fe=N._layers[jt];if(!fe.__builtin__&&jt>Mt&&jt<Nt){te=fe;break}}te&&te.renderToCanvas&&(y.save(),te.renderToCanvas(y),y.restore())}for(var _t={ctx:y},pt=0;pt<x.length;pt++){var At=x[pt];At.zlevel!==E&&($(E,At.zlevel),E=At.zlevel),this._doPaintEl(At,_t,!0,null,D)}return $(E,1/0),c}}),F.Br(function(t,i){var l=i.getZr(),f=l.__egl=l.__egl||new Pc(l);f.update(t,i)}),F.ds(Su);var Vf=null,Tu={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},t.alpha!=null&&(this.option.viewControl.alpha=t.alpha),t.beta!=null&&(this.option.viewControl.beta=t.beta),t.distance!=null&&(this.option.viewControl.distance=t.distance),t.center!=null&&(this.option.viewControl.center=t.center)}},Qo={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},vo={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}},$o=F.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});F.D5.merge($o.prototype,Tu),F.D5.merge($o.prototype,Qo),F.D5.merge($o.prototype,vo);var Lc=$o,qo=z(65261),Ls=Jr.firstNotNull,Ic={left:0,middle:1,right:2};function kf(t){return t instanceof Array||(t=[t,t]),t}var Uf=X.extend(function(){return{zr:null,viewGL:null,_center:new sr,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new Ne,_panVelocity:new Ne,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(t){this[t]=this[t].bind(this)},this)},{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,i){i=i||{};var l=i.baseDistance||0,f=i.baseOrthoSize||1,c=t.get("projection");c!=="perspective"&&c!=="orthographic"&&c!=="isometric"&&(c="perspective"),this._projection=c,this.viewGL.setProjection(c);var p=t.get("distance")+l,y=t.get("orthographicSize")+f;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(_t){this[_t[0]]=Ls(t.get(_t[0]),_t[1])},this),this.minDistance+=l,this.maxDistance+=l,this.minOrthographicSize+=f,this.maxOrthographicSize+=f;var x=t.ecModel,D={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(_t){D[_t]=Ls(t.get(_t),x&&x.get(_t))});var E=Ls(i.alpha,t.get("alpha"))||0,N=Ls(i.beta,t.get("beta"))||0,$=Ls(i.center,t.get("center"))||[0,0,0];D.animation&&D.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:E,beta:N,center:$,distance:p,orthographicSize:y,easing:D.animationEasingUpdate,duration:D.animationDurationUpdate}):(this.setDistance(p),this.setAlpha(E),this.setBeta(N),this.setCenter($),this.setOrthographicSize(y)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(t){var i=this.zr,l=this,f={},c={};return t.distance!=null&&(f.distance=this.getDistance(),c.distance=t.distance),t.orthographicSize!=null&&(f.orthographicSize=this.getOrthographicSize(),c.orthographicSize=t.orthographicSize),t.alpha!=null&&(f.alpha=this.getAlpha(),c.alpha=t.alpha),t.beta!=null&&(f.beta=this.getBeta(),c.beta=t.beta),t.center!=null&&(f.center=this.getCenter(),c.center=t.center),this._addAnimator(i.animation.animate(f).when(t.duration||1e3,c).during(function(){f.alpha!=null&&l.setAlpha(f.alpha),f.beta!=null&&l.setBeta(f.beta),f.distance!=null&&l.setDistance(f.distance),f.center!=null&&l.setCenter(f.center),f.orthographicSize!=null&&l.setOrthographicSize(f.orthographicSize),l._needsUpdate=!0})).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var i=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=i*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var i=this._rotateVelocity;this._phi=i.y*t/20+this._phi,this._theta=i.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(i,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var i=this.getCamera(),l=this._orthoSize,f=l/this.viewGL.viewport.height*this.viewGL.viewport.width;i.left=-f/2,i.right=f/2,i.top=l/2,i.bottom=-l/2},_updatePan:function(t){var i=this._panVelocity,l=this._distance,f=this.getCamera(),c=f.worldTransform.y,p=f.worldTransform.x;this._center.scaleAndAdd(p,-i.x*l/200).scaleAndAdd(c,-i.y*l/200),this._vectorDamping(i,0)},_updateTransform:function(){var t=this.getCamera(),i=new sr,l=this._theta+Math.PI/2,f=this._phi+Math.PI/2,c=Math.sin(l);i.x=c*Math.cos(f),i.y=-Math.cos(l),i.z=c*Math.sin(f),t.position.copy(this._center).scaleAndAdd(i,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,i=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout(function(){i._rotating=!0},t*1e3))},_vectorDamping:function(t,i){var l=t.len();l=l*i,l<1e-4&&(l=0),t.normalize().scale(l)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,i=Math.asin(t.y),l=Math.atan2(t.x,t.z);this._theta=i,this._phi=-l,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){if(!t.target&&!this._isAnimating()){var i=t.offsetX,l=t.offsetY;this.viewGL&&!this.viewGL.containPoint(i,l)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?t.event.targetTouches.length===1&&(this._mode="rotate"):t.event.button===Ic[this.rotateMouseButton]?this._mode="rotate":t.event.button===Ic[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)}},_mouseMoveHandler:function(t){if(!(t.target&&t.target.__isGLToZRProxy)&&!this._isAnimating()){var i=kf(this.panSensitivity),l=kf(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*l[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*l[1]):this._mode==="pan"&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*i[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*i[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){if(!this._isAnimating()){var i=t.event.wheelDelta||-t.event.detail;this._zoomHandler(t,i)}},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,i){if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var c;this._projection==="perspective"?c=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):c=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(i>0?-1:1)*c*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),t.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var i=this._animators;return i.push(t),t.done(function(){var l=i.indexOf(t);l>=0&&i.splice(l,1)}),t}});Object.defineProperty(Uf.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});var Sl=Uf,Ii={convertToDynamicArray:function(t){t&&this.resetOffset();var i=this.attributes;for(var l in i)t||!i[l].value?i[l].value=[]:i[l].value=Array.prototype.slice.call(i[l].value);t||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var i in t)t[i].value&&t[i].value.length>0?t[i].value=new Float32Array(t[i].value):t[i].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},Rc={vec2:or,vec3:Wt,vec4:vr,mat2:kn,mat2d:jn,mat3:qr,mat4:nr,quat:Ar},mn=Rc,Zf=mn.vec3,Oc=[[0,0],[1,1]],Wf=Qr.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Qr.Attribute("position","float",3,"POSITION"),positionPrev:new Qr.Attribute("positionPrev","float",3),positionNext:new Qr.Attribute("positionNext","float",3),prevPositionPrev:new Qr.Attribute("prevPositionPrev","float",3),prevPosition:new Qr.Attribute("prevPosition","float",3),prevPositionNext:new Qr.Attribute("prevPositionNext","float",3),offset:new Qr.Attribute("offset","float",1),color:new Qr.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.positionPrev.init(t),i.positionNext.init(t),i.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var c=Zf.dist(t,i)+Zf.dist(l,i)+Zf.dist(f,l),p=1/(c+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Oc)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Oc)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?0:Math.max(i-1,0)*2},addCubicCurve:function(t,i,l,f,c,p){p==null&&(p=1);for(var y=t[0],x=t[1],D=t[2],E=i[0],N=i[1],$=i[2],_t=l[0],pt=l[1],At=l[2],Mt=f[0],Nt=f[1],kt=f[2],te=this._getCubicCurveApproxStep(t,i,l,f),qt=te*te,jt=qt*te,fe=3*te,ue=3*qt,Te=6*qt,xe=6*jt,Ie=y-E*2+_t,je=x-N*2+pt,Ve=D-$*2+At,Je=(E-_t)*3-y+Mt,er=(N-pt)*3-x+Nt,Xe=($-At)*3-D+kt,ir=y,xr=x,Lr=D,ar=(E-y)*fe+Ie*ue+Je*jt,vn=(N-x)*fe+je*ue+er*jt,br=($-D)*fe+Ve*ue+Xe*jt,Cn=Ie*Te+Je*xe,dn=je*Te+er*xe,On=Ve*Te+Xe*xe,Zr=Je*xe,$r=er*xe,ui=Xe*xe,Wn=0,Qn=0,bi=Math.ceil(1/te),pi=new Float32Array((bi+1)*3),pi=[],gi=0,Qn=0;Qn<bi+1;Qn++)pi[gi++]=ir,pi[gi++]=xr,pi[gi++]=Lr,ir+=ar,xr+=vn,Lr+=br,ar+=Cn,vn+=dn,br+=On,Cn+=Zr,dn+=$r,On+=ui,Wn+=te,Wn>1&&(ir=ar>0?Math.min(ir,Mt):Math.max(ir,Mt),xr=vn>0?Math.min(xr,Nt):Math.max(xr,Nt),Lr=br>0?Math.min(Lr,kt):Math.max(Lr,kt));return this.addPolyline(pi,c,p)},addLine:function(t,i,l,f){return this.addPolyline([t,i],l,f)},addPolyline:function(t,i,l,f,c){if(t.length){var p=typeof t[0]!="number";if(c==null&&(c=p?t.length:t.length/3),!(c<2)){f==null&&(f=0),l==null&&(l=1),this._itemVertexOffsets.push(this._vertexOffset);var p=typeof t[0]!="number",y=p?typeof i[0]!="number":i.length/4===c,x=this.attributes.position,D=this.attributes.positionPrev,E=this.attributes.positionNext,N=this.attributes.color,$=this.attributes.offset,_t=this.indices,pt=this._vertexOffset,At,Mt;l=Math.max(l,.01);for(var Nt=f;Nt<c;Nt++){if(p)At=t[Nt],y?Mt=i[Nt]:Mt=i;else{var kt=Nt*3;if(At=At||[],At[0]=t[kt],At[1]=t[kt+1],At[2]=t[kt+2],y){var te=Nt*4;Mt=Mt||[],Mt[0]=i[te],Mt[1]=i[te+1],Mt[2]=i[te+2],Mt[3]=i[te+3]}else Mt=i}if(this.useNativeLine?Nt>1&&(x.copy(pt,pt-1),N.copy(pt,pt-1),pt++):(Nt<c-1&&(D.set(pt+2,At),D.set(pt+3,At)),Nt>0&&(E.set(pt-2,At),E.set(pt-1,At)),x.set(pt,At),x.set(pt+1,At),N.set(pt,Mt),N.set(pt+1,Mt),$.set(pt,l/2),$.set(pt+1,-l/2),pt+=2),this.useNativeLine)N.set(pt,Mt),x.set(pt,At),pt++;else if(Nt>0){var qt=this._triangleOffset*3,_t=this.indices;_t[qt]=pt-4,_t[qt+1]=pt-3,_t[qt+2]=pt-2,_t[qt+3]=pt-3,_t[qt+4]=pt-1,_t[qt+5]=pt-2,this._triangleOffset+=2}}if(!this.useNativeLine){var jt=this._vertexOffset,fe=this._vertexOffset+c*2;D.copy(jt,jt+2),D.copy(jt+1,jt+3),E.copy(fe-1,fe-3),E.copy(fe-2,fe-4)}return this._vertexOffset=pt,this._vertexOffset}}},setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,c=l;c<f;c++)this.attributes.color.set(c,i);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});F.D5.defaults(Wf.prototype,Ii);var ts=Wf;function Du(t,i,l,f,c,p,y){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=f,this.height=c,this.offsetX=i,this.offsetY=l,this.dpr=y,this.gap=p}Du.prototype={constructor:Du,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,i,l){var f=t.getBoundingRect();i==null&&(i=f.width),l==null&&(l=f.height),i*=this.dpr,l*=this.dpr,this._fitElement(t,i,l);var c=this._x,p=this._y,y=this.width*this.dpr,x=this.height*this.dpr,D=this.gap;if(c+i+D>y&&(c=this._x=0,p+=this._rowHeight+D,this._y=p,this._rowHeight=0),this._x+=i+D,this._rowHeight=Math.max(this._rowHeight,l),p+l+D>x)return null;t.x+=this.offsetX*this.dpr+c,t.y+=this.offsetY*this.dpr+p,this._zr.add(t);var E=[this.offsetX/this.width,this.offsetY/this.height],N=[[c/y+E[0],p/x+E[1]],[(c+i)/y+E[0],(p+l)/x+E[1]]];return N},_fitElement:function(t,i,l){var f=t.getBoundingRect(),c=i/f.width,p=l/f.height;t.x=-f.x*c,t.y=-f.y*p,t.scaleX=c,t.scaleY=p,t.update()}};function Tl(t){t=t||{},t.width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=t.gap==null?2:t.gap;var i=document.createElement("canvas");i.width=t.width*t.devicePixelRatio,i.height=t.height*t.devicePixelRatio,this._canvas=i,this._texture=new Yr({image:i,flipY:!1});var l=this;this._zr=F.x_.init(i);var f=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){f.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new Du(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}Tl.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,i=this._textureAtlasNodes,l=i.length,f=l*this._nodeWidth%t,c=Math.floor(l*this._nodeWidth/t)*this._nodeHeight;if(!(c>=t)){var p=(f+this._nodeWidth)*this._dpr,y=(c+this._nodeHeight)*this._dpr;try{this._zr.resize({width:p,height:y})}catch(D){this._canvas.width=p,this._canvas.height=y}var x=new Du(this._zr,f,c,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(x),x}},add:function(t,i,l){if(this._coords[t.id])return this._coords[t.id];var f=this._getCurrentNode().add(t,i,l);if(!f){var c=this._expand();if(!c)return;f=c.add(t,i,l)}return this._coords[t.id]=f,f},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};var Hf=Tl;function Dl(){}Dl.prototype={constructor:Dl,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new ae.DirectionalLight({shadowBias:.005}),this.ambientLight=new ae.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var i=this.mainLight,l=this.ambientLight,f=t.getModel("light"),c=f.getModel("main"),p=f.getModel("ambient");i.intensity=c.get("intensity"),l.intensity=p.get("intensity"),i.color=ae.parseColor(c.get("color")).slice(0,3),l.color=ae.parseColor(p.get("color")).slice(0,3);var y=c.get("alpha")||0,x=c.get("beta")||0;i.position.setArray(ae.directionFromAlphaBeta(y,x)),i.lookAt(ae.Vector3.ZERO),i.castShadow=c.get("shadow"),i.shadowResolution=ae.getShadowResolution(c.get("shadowQuality"))},updateAmbientCubemap:function(t,i,l){var f=i.getModel("light.ambientCubemap"),c=f.get("texture");if(c){this._cubemapLightsCache=this._cubemapLightsCache||{};var p=this._cubemapLightsCache[c];if(!p){var y=this;p=this._cubemapLightsCache[c]=ae.createAmbientCubemap(f.option,t,l,function(){y._isSkyboxFromAmbientCubemap&&y._skybox.setEnvironmentMap(p.specular.cubemap),l.getZr().refresh()})}this._lightRoot.add(p.diffuse),this._lightRoot.add(p.specular),this._currentCubemapLights=p}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,i,l){var f=i.get("environment"),c=this;function p(){return c._skybox=c._skybox||new se,c._skybox}var y=p();if(f&&f!=="none")if(f==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var x=this._currentCubemapLights.specular.cubemap;y.setEnvironmentMap(x),this._scene&&y.attachScene(this._scene),y.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof f=="object"&&f.colorStops||typeof f=="string"&&F.$_.parse(f)){this._isSkyboxFromAmbientCubemap=!1;var D=new ae.Texture2D({anisotropic:8,flipY:!1});y.setEnvironmentMap(D);var E=D.image=document.createElement("canvas");E.width=E.height=16;var N=E.getContext("2d"),$=new F.Q.UL({shape:{x:0,y:0,width:16,height:16},style:{fill:f}});F.z$(N,$),y.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var D=ae.loadTexture(f,l,{anisotropic:8,flipY:!1});y.setEnvironmentMap(D),y.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var _t=i.coordinateSystem;if(this._skybox)if(_t&&_t.viewGL&&f!=="auto"&&!(f.match&&f.match(/.hdr$/))){var pt=_t.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[pt]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var Is=Dl,po=mn.vec3,Xf=Qr.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Qr.Attribute("position","float",3,"POSITION"),normal:new Qr.Attribute("normal","float",3,"NORMAL"),color:new Qr.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var i=this.attributes,l=this.getQuadVertexCount()*t,f=this.getQuadTriangleCount()*t;this.vertexCount!==l&&(i.position.init(l),i.normal.init(l),i.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=po.create(),i=po.create(),l=po.create(),f=[0,3,1,3,2,1];return function(c,p){var y=this.attributes.position,x=this.attributes.normal,D=this.attributes.color;po.sub(t,c[1],c[0]),po.sub(i,c[2],c[1]),po.cross(l,t,i),po.normalize(l,l);for(var E=0;E<4;E++)y.set(this._vertexOffset+E,c[E]),D.set(this._vertexOffset+E,p),x.set(this._vertexOffset+E,l);for(var N=this._faceOffset*3,E=0;E<6;E++)this.indices[N+E]=f[E]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});F.D5.defaults(Xf.prototype,Ii);var Fp=Xf,wu=Jr.firstNotNull,Gp={x:0,y:2,z:1};function Nc(t,i,l,f){var c=[0,0,0],p=f<0?l.getExtentMin():l.getExtentMax();c[Gp[l.dim]]=p,t.position.setArray(c),t.rotation.identity(),i.distance=-Math.abs(p),i.normal.set(0,0,0),l.dim==="x"?(t.rotation.rotateY(f*Math.PI/2),i.normal.x=-f):l.dim==="z"?(t.rotation.rotateX(-f*Math.PI/2),i.normal.y=-f):(f>0&&t.rotation.rotateY(Math.PI),i.normal.z=-f)}function Au(t,i,l){this.rootNode=new ae.Node;var f=new ae.Mesh({geometry:new ts({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),c=new ae.Mesh({geometry:new Fp,material:l,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(c),this.rootNode.add(f),this.faceInfo=t,this.plane=new ae.Plane,this.linesMesh=f,this.quadsMesh=c}Au.prototype.update=function(t,i,l){var f=t.coordinateSystem,c=[f.getAxis(this.faceInfo[0]),f.getAxis(this.faceInfo[1])],p=this.linesMesh.geometry,y=this.quadsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0),this._updateSplitLines(p,c,t,l),this._udpateSplitAreas(y,c,t,l),p.convertToTypedArray(),y.convertToTypedArray();var x=f.getAxis(this.faceInfo[2]);Nc(this.rootNode,this.plane,x,this.faceInfo[3])},Au.prototype._updateSplitLines=function(t,i,l,f){var c=f.getDevicePixelRatio();i.forEach(function(p,y){var x=p.model,D=i[1-y].getExtent();if(!p.scale.isBlank()){var E=x.getModel("splitLine",l.getModel("splitLine"));if(E.get("show")){var N=E.getModel("lineStyle"),$=N.get("color"),_t=wu(N.get("opacity"),1),pt=wu(N.get("width"),1);$=F.D5.isArray($)?$:[$];for(var At=p.getTicksCoords({tickModel:E}),Mt=0,Nt=0;Nt<At.length;Nt++){var kt=At[Nt].coord,te=ae.parseColor($[Mt%$.length]);te[3]*=_t;var qt=[0,0,0],jt=[0,0,0];qt[y]=jt[y]=kt,qt[1-y]=D[0],jt[1-y]=D[1],t.addLine(qt,jt,te,pt*c),Mt++}}}})},Au.prototype._udpateSplitAreas=function(t,i,l,f){i.forEach(function(c,p){var y=c.model,x=i[1-p].getExtent();if(!c.scale.isBlank()){var D=y.getModel("splitArea",l.getModel("splitArea"));if(D.get("show")){var E=D.getModel("areaStyle"),N=E.get("color"),$=wu(E.get("opacity"),1);N=F.D5.isArray(N)?N:[N];for(var _t=c.getTicksCoords({tickModel:D,clamp:!0}),pt=0,At=[0,0,0],Mt=[0,0,0],Nt=0;Nt<_t.length;Nt++){var kt=_t[Nt].coord,te=[0,0,0],qt=[0,0,0];if(te[p]=qt[p]=kt,te[1-p]=x[0],qt[1-p]=x[1],Nt===0){At=te,Mt=qt;continue}var jt=ae.parseColor(N[pt%N.length]);jt[3]*=$,t.addQuad([At,te,qt,Mt],jt),At=te,Mt=qt,pt++}}}})};var zp=Au,Bc=[0,1,2,0,2,3],Fc=Qr.extend(function(){return{attributes:{position:new Qr.Attribute("position","float",3,"POSITION"),texcoord:new Qr.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Qr.Attribute("offset","float",2),color:new Qr.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var i=t*4,l=t*2;this.vertexCount!==i&&(this.attributes.position.init(i),this.attributes.offset.init(i),this.attributes.color.init(i)),this.triangleCount!==l&&(this.indices=i>65535?new Uint32Array(l*3):new Uint16Array(l*3))},setSpriteAlign:function(t,i,l,f,c){l==null&&(l="left"),f==null&&(f="top");var p,y,x,D;switch(c=c||0,l){case"left":p=c,x=i[0]+c;break;case"center":case"middle":p=-i[0]/2,x=i[0]/2;break;case"right":p=-i[0]-c,x=-c;break}switch(f){case"bottom":y=c,D=i[1]+c;break;case"middle":y=-i[1]/2,D=i[1]/2;break;case"top":y=-i[1]-c,D=-c;break}var E=t*4,N=this.attributes.offset;N.set(E,[p,D]),N.set(E+1,[x,D]),N.set(E+2,[x,y]),N.set(E+3,[p,y])},addSprite:function(t,i,l,f,c,p){var y=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,i,l,f,c,p);for(var x=0;x<Bc.length;x++)this.indices[this._faceOffset*3+x]=Bc[x]+y;return this._faceOffset+=2,this._vertexOffset+=4,y/4},setSprite:function(t,i,l,f,c,p,y){for(var x=t*4,D=this.attributes,E=0;E<4;E++)D.position.set(x+E,i);var N=D.texcoord;N.set(x,[f[0][0],f[0][1]]),N.set(x+1,[f[1][0],f[0][1]]),N.set(x+2,[f[1][0],f[1][1]]),N.set(x+3,[f[0][0],f[1][1]]),this.setSpriteAlign(t,l,c,p,y)}});F.D5.defaults(Fc.prototype,Ii);var Vp=Fc,Kf=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;ae.Shader.import(Kf);var bu=ae.Mesh.extend(function(){var t=new Vp({dynamic:!0}),i=new ae.Material({shader:ae.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:t,material:i,culling:!1,castShadow:!1,ignorePicking:!0}}),na=Jr.firstNotNull,ia={x:0,y:2,z:1};function go(t,i){var l=new ae.Mesh({geometry:new ts({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,renderOrder:2}),f=new bu;f.material.depthMask=!1;var c=new ae.Node;c.add(l),c.add(f),this.rootNode=c,this.dim=t,this.linesMesh=l,this.labelsMesh=f,this.axisLineCoords=null,this.labelElements=[]}var Yf={x:"y",y:"x",z:"y"};go.prototype.update=function(t,i,l){var f=t.coordinateSystem,c=f.getAxis(this.dim),p=this.linesMesh.geometry,y=this.labelsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0);var x=c.model,D=c.getExtent(),Ve=l.getDevicePixelRatio(),E=x.getModel("axisLine",t.getModel("axisLine")),N=x.getModel("axisTick",t.getModel("axisTick")),$=x.getModel("axisLabel",t.getModel("axisLabel")),_t=E.get("lineStyle.color");if(E.get("show")){var pt=E.getModel("lineStyle"),At=[0,0,0],Mt=[0,0,0],Nt=ia[c.dim];At[Nt]=D[0],Mt[Nt]=D[1],this.axisLineCoords=[At,Mt];var kt=ae.parseColor(_t),te=na(pt.get("width"),1),qt=na(pt.get("opacity"),1);kt[3]*=qt,p.addLine(At,Mt,kt,te*Ve)}if(N.get("show")){var jt=N.getModel("lineStyle"),fe=ae.parseColor(na(jt.get("color"),_t)),te=na(jt.get("width"),1);fe[3]*=na(jt.get("opacity"),1);for(var ue=c.getTicksCoords(),Te=N.get("length"),xe=0;xe<ue.length;xe++){var Ie=ue[xe].coord,At=[0,0,0],Mt=[0,0,0],Nt=ia[c.dim],je=ia[Yf[c.dim]];At[Nt]=Mt[Nt]=Ie,Mt[je]=Te,p.addLine(At,Mt,fe,te*Ve)}}this.labelElements=[];var Ve=l.getDevicePixelRatio();if($.get("show"))for(var ue=c.getTicksCoords(),Je=x.get("data"),er=$.get("margin"),Xe=c.getViewLabels(),xe=0;xe<Xe.length;xe++){var ir=Xe[xe].tickValue,xr=Xe[xe].formattedLabel,Lr=Xe[xe].rawLabel,Ie=c.dataToCoord(ir),ar=[0,0,0],Nt=ia[c.dim],je=ia[Yf[c.dim]];ar[Nt]=ar[Nt]=Ie,ar[je]=er;var vn=$;Je&&Je[ir]&&Je[ir].textStyle&&(vn=new F.Hn(Je[ir].textStyle,$,x.ecModel));var br=na(vn.get("color"),_t),Cn=new F.Q.xv({style:(0,qo.Lr)(vn,{text:xr,fill:typeof br=="function"?br(c.type==="category"?Lr:c.type==="value"?ir+"":ir,xe):br,verticalAlign:"top",align:"left"})}),dn=i.add(Cn),On=Cn.getBoundingRect();y.addSprite(ar,[On.width*Ve,On.height*Ve],dn),this.labelElements.push(Cn)}if(x.get("name")){var Zr=x.getModel("nameTextStyle"),ar=[0,0,0],Nt=ia[c.dim],je=ia[Yf[c.dim]],$r=na(Zr.get("color"),_t),ui=Zr.get("borderColor"),te=Zr.get("borderWidth");ar[Nt]=ar[Nt]=(D[0]+D[1])/2,ar[je]=x.get("nameGap");var Cn=new F.Q.xv({style:(0,qo.Lr)(Zr,{text:x.get("name"),fill:$r,stroke:ui,lineWidth:te})}),dn=i.add(Cn),On=Cn.getBoundingRect();y.addSprite(ar,[On.width*Ve,On.height*Ve],dn),Cn.__idx=this.labelElements.length,this.nameLabelElement=Cn}this.labelsMesh.material.set("textureAtlas",i.getTexture()),this.labelsMesh.material.set("uvScale",i.getCoordsScale()),p.convertToTypedArray(),y.convertToTypedArray()},go.prototype.setSpriteAlign=function(t,i,l){for(var f=l.getDevicePixelRatio(),c=this.labelsMesh.geometry,p=0;p<this.labelElements.length;p++){var y=this.labelElements[p],x=y.getBoundingRect();c.setSpriteAlign(p,[x.width*f,x.height*f],t,i)}var D=this.nameLabelElement;if(D){var x=D.getBoundingRect();c.setSpriteAlign(D.__idx,[x.width*f,x.height*f],t,i),c.dirty()}this.textAlign=t,this.textVerticalAlign=i};var kp=go,Mu=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`,Gc=Jr.firstNotNull;ae.Shader.import(Mu);var es={x:0,y:2,z:1},Up=F.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(t,i){var l=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],f=["x","y","z"],c=new ae.Material({shader:ae.createShader("ecgl.color"),depthMask:!1,transparent:!0}),p=new ae.Material({shader:ae.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});c.define("fragment","DOUBLE_SIDED"),c.define("both","VERTEX_COLOR"),this.groupGL=new ae.Node,this._control=new Sl({zr:i.getZr()}),this._control.init(),this._faces=l.map(function(x){var D=new zp(x,p,c);return this.groupGL.add(D.rootNode),D},this),this._axes=f.map(function(x){var D=new kp(x,p);return this.groupGL.add(D.rootNode),D},this);var y=i.getDevicePixelRatio();this._axisLabelSurface=new Hf({width:256,height:256,devicePixelRatio:y}),this._axisLabelSurface.onupdate=function(){i.getZr().refresh()},this._axisPointerLineMesh=new ae.Mesh({geometry:new ts({useNativeLine:!1}),material:p,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new Hf({width:128,height:128,devicePixelRatio:y}),this._axisPointerLabelsMesh=new bu({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new ae.Node,this._sceneHelper=new Is,this._sceneHelper.initLight(this._lightRoot)},render:function(t,i,l){this._model=t,this._api=l;var f=t.coordinateSystem;f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var c=this._control;c.setViewGL(f.viewGL);var p=t.getModel("viewControl");c.setFromViewControlModel(p,0),this._axisLabelSurface.clear(),c.off("update"),t.get("show")&&(this._faces.forEach(function(y){y.update(t,i,l)},this),this._axes.forEach(function(y){y.update(t,this._axisLabelSurface,l)},this)),c.on("update",this._onCameraChange.bind(this,t,l),this),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},showAxisPointer:function(t,i,l,f){this._doShowAxisPointer(),this._updateAxisPointer(f.value)},hideAxisPointer:function(t,i,l,f){this._doHideAxisPointer()},_initMouseHandler:function(t){var i=t.coordinateSystem,l=i.viewGL;t.get("show")&&t.get("axisPointer.show")?l.on("mousemove",this._updateAxisPointerOnMousePosition,this):l.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var i=this._model,l=i.coordinateSystem,f=l.viewGL,c=f.castRay(t.offsetX,t.offsetY,new ae.Ray),p,y=0;y<this._faces.length;y++){var x=this._faces[y];if(!x.rootNode.invisible){x.plane.normal.dot(f.camera.worldTransform.z)<0&&x.plane.normal.negate();var D=c.intersectPlane(x.plane);if(D){var E=l.getAxis(x.faceInfo[0]),N=l.getAxis(x.faceInfo[1]),$=es[x.faceInfo[0]],_t=es[x.faceInfo[1]];E.contain(D.array[$])&&N.contain(D.array[_t])&&(p=D)}}}if(p){var pt=l.pointToData(p.array,[],!0);this._updateAxisPointer(pt),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,i){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var l=this._control;i.dispatchAction({type:"grid3DChangeCamera",alpha:l.getAlpha(),beta:l.getBeta(),distance:l.getDistance(),center:l.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),i=new ae.Vector3;t.update();for(var l=0;l<this._faces.length/2;l++){for(var f=[],c=0;c<2;c++){var p=this._faces[l*2+c];p.rootNode.getWorldPosition(i),i.transformMat4(t.viewMatrix),f[c]=i.z}var y=f[0]>f[1]?0:1,x=this._faces[l*2+y],D=this._faces[l*2+1-y];x.rootNode.invisible=!0,D.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,i=t.getAxis("x"),l=t.getAxis("y"),f=t.getAxis("z"),c=f.getExtentMax(),p=f.getExtentMin(),y=i.getExtentMin(),x=i.getExtentMax(),D=l.getExtentMax(),E=l.getExtentMin(),N=this._axes[0].rootNode,$=this._axes[1].rootNode,_t=this._axes[2].rootNode,pt=this._faces,At=pt[4].rootNode.invisible?E:D,Mt=pt[2].rootNode.invisible?c:p,Nt=pt[0].rootNode.invisible?y:x,kt=pt[2].rootNode.invisible?c:p,te=pt[0].rootNode.invisible?x:y,qt=pt[4].rootNode.invisible?E:D;N.rotation.identity(),$.rotation.identity(),_t.rotation.identity(),pt[4].rootNode.invisible&&(this._axes[0].flipped=!0,N.rotation.rotateX(Math.PI)),pt[0].rootNode.invisible&&(this._axes[1].flipped=!0,$.rotation.rotateZ(Math.PI)),pt[4].rootNode.invisible&&(this._axes[2].flipped=!0,_t.rotation.rotateY(Math.PI)),N.position.set(0,Mt,At),$.position.set(Nt,kt,0),_t.position.set(te,0,qt),N.update(),$.update(),_t.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),i=[new ae.Vector4,new ae.Vector4],l=new ae.Vector4;this.groupGL.getWorldPosition(l),l.w=1,l.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),l.x/=l.w,l.y/=l.w,this._axes.forEach(function(f){for(var c=f.axisLineCoords,p=f.labelsMesh.geometry,y=0;y<i.length;y++)i[y].setArray(c[y]),i[y].w=1,i[y].transformMat4(f.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),i[y].x/=i[y].w,i[y].y/=i[y].w;var x=i[1].x-i[0].x,D=i[1].y-i[0].y,E=(i[1].x+i[0].x)/2,N=(i[1].y+i[0].y)/2,$,_t;Math.abs(D/x)<.5?($="center",_t=N>l.y?"bottom":"top"):(_t="middle",$=E>l.x?"left":"right"),f.setSpriteAlign($,_t,this._api)},this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var i=this._model.coordinateSystem,l=i.dataToPoint(t),f=this._axisPointerLineMesh,c=f.geometry,p=this._model.getModel("axisPointer"),y=this._api.getDevicePixelRatio();c.convertToDynamicArray(!0);function x(xe){return Jr.firstNotNull(xe.model.get("axisPointer.show"),p.get("show"))}function D(xe){var Ie=xe.model.getModel("axisPointer",p),je=Ie.getModel("lineStyle"),Ve=ae.parseColor(je.get("color")),Je=Gc(je.get("width"),1),er=Gc(je.get("opacity"),1);return Ve[3]*=er,{color:Ve,lineWidth:Je}}for(var E=0;E<this._faces.length;E++){var N=this._faces[E];if(!N.rootNode.invisible){for(var $=N.faceInfo,_t=$[3]<0?i.getAxis($[2]).getExtentMin():i.getAxis($[2]).getExtentMax(),pt=es[$[2]],At=0;At<2;At++){var Mt=$[At],Nt=$[1-At],kt=i.getAxis(Mt),te=i.getAxis(Nt);if(x(kt)){var qt=[0,0,0],jt=[0,0,0],fe=es[Mt],ue=es[Nt];qt[fe]=jt[fe]=l[fe],qt[pt]=jt[pt]=_t,qt[ue]=te.getExtentMin(),jt[ue]=te.getExtentMax();var Te=D(kt);c.addLine(qt,jt,Te.color,Te.lineWidth*y)}}if(x(i.getAxis($[2]))){var qt=l.slice(),jt=l.slice();jt[pt]=_t;var Te=D(i.getAxis($[2]));c.addLine(qt,jt,Te.color,Te.lineWidth*y)}}}c.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var i=this._model,l=this._axisPointerLabelsMesh,f=this._axisPointerLabelsSurface,c=i.coordinateSystem,p=i.getModel("axisPointer");l.geometry.convertToDynamicArray(!0),f.clear();var y={x:"y",y:"x",z:"y"};this._axes.forEach(function(x,D){var E=c.getAxis(x.dim),N=E.model,$=N.getModel("axisPointer",p),_t=$.getModel("label"),pt=$.get("lineStyle.color");if(!(!_t.get("show")||!$.get("show"))){var At=t[D],Mt=_t.get("formatter"),Nt=E.scale.getLabel({value:At});if(Mt!=null)Nt=Mt(Nt,t);else if(E.scale.type==="interval"||E.scale.type==="log"){var kt=F.Rx.getPrecisionSafe(E.scale.getTicks()[0]);Nt=At.toFixed(kt+2)}var te=_t.get("color"),qt=new F.Q.xv({style:(0,qo.Lr)(_t,{text:Nt,fill:te||pt,align:"left",verticalAlign:"top"})}),jt=f.add(qt),fe=qt.getBoundingRect(),ue=this._api.getDevicePixelRatio(),Te=x.rootNode.position.toArray(),xe=es[y[x.dim]];Te[xe]+=(x.flipped?-1:1)*_t.get("margin"),Te[es[x.dim]]=E.dataToCoord(t[D]),l.geometry.addSprite(Te,[fe.width*ue,fe.height*ue],jt,x.textAlign,x.textVerticalAlign)}},this),f.getZr().refreshImmediately(),l.material.set("uvScale",f.getCoordsScale()),l.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}}),zc=z(54146);function Cu(t){zc.Z.call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Cu.prototype={constructor:Cu,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").dataToCoord(t[0],l),i[2]=this.getAxis("y").dataToCoord(t[1],l),i[1]=this.getAxis("z").dataToCoord(t[2],l),i},pointToData:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").coordToData(t[0],l),i[1]=this.getAxis("y").coordToData(t[2],l),i[2]=this.getAxis("z").coordToData(t[1],l),i}},F.D5.inherits(Cu,zc.Z);var Rs=Cu;function ha(t,i,l){F.RD.call(this,t,i,l)}ha.prototype={constructor:ha,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},F.D5.inherits(ha,F.RD);var Eu=ha,Ia=z(28734),wl=function(){this._pool={},this._allocatedTextures=[]};wl.prototype={constructor:wl,get:function(t){var i=kc(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];if(!l.length){var f=new Yr(t);return this._allocatedTextures.push(f),f}return l.pop()},put:function(t){var i=kc(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];l.push(t)},clear:function(t){for(var i=0;i<this._allocatedTextures.length;i++)this._allocatedTextures[i].dispose(t);this._pool={},this._allocatedTextures=[]}};var Vc={width:512,height:512,type:T.UNSIGNED_BYTE,format:T.RGBA,wrapS:T.CLAMP_TO_EDGE,wrapT:T.CLAMP_TO_EDGE,minFilter:T.LINEAR_MIPMAP_LINEAR,magFilter:T.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},jf=Object.keys(Vc);function kc(t){j.defaultsWithPropList(t,Vc,jf),Uc(t);for(var i="",l=0;l<jf.length;l++){var f=jf[l],c=t[f].toString();i+=c}return i}function Uc(t){var i=Pu(t.width,t.height);t.format===T.DEPTH_COMPONENT&&(t.useMipmap=!1),(!i||!t.useMipmap)&&(t.minFilter==T.NEAREST_MIPMAP_NEAREST||t.minFilter==T.NEAREST_MIPMAP_LINEAR?t.minFilter=T.NEAREST:(t.minFilter==T.LINEAR_MIPMAP_LINEAR||t.minFilter==T.LINEAR_MIPMAP_NEAREST)&&(t.minFilter=T.LINEAR)),i||(t.wrapS=T.CLAMP_TO_EDGE,t.wrapT=T.CLAMP_TO_EDGE)}function Pu(t,i){return(t&t-1)===0&&(i&i-1)===0}var Jf=wl,Zp=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`,Ya=["px","nx","py","ny","pz","nz"];dr.import(Zp);function Lu(t,i,l){if(l==="alphaMap")return t.material.get("diffuseMap");if(l==="alphaCutoff"){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var f=t.material.get("alphaCutoff");return f||0}return 0}else return l==="uvRepeat"?t.material.get("uvRepeat"):l==="uvOffset"?t.material.get("uvOffset"):i.get(l)}function Qf(t,i){var l=t.material,f=i.material;return l.get("diffuseMap")!==f.get("diffuseMap")||(l.get("alphaCutoff")||0)!==(f.get("alphaCutoff")||0)}var Aa=X.extend(function(){return{softShadow:Aa.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Xn,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Jf}},function(){this._gaussianPassH=new xn({fragment:dr.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new xn({fragment:dr.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new xn({fragment:dr.source("clay.sm.debug_depth")})},{render:function(t,i,l,f){l||(l=i.getMainCamera()),this.trigger("beforerender",this,t,i,l),this._renderShadowPass(t,i,l,f),this.trigger("afterrender",this,t,i,l)},renderDebug:function(t,i){t.saveClear();var l=t.viewport,f=0,c=0,p=i||l.width/4,y=p;this.softShadow===Aa.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var x in this._textures){var D=this._textures[x];t.setViewport(f,c,p*D.width/D.height,y),this._outputDepthPass.setUniform("depthMap",D),this._outputDepthPass.render(t),f+=p*D.width/D.height}t.setViewport(l),t.restoreClear()},_updateReceivers:function(t,i){if(i.receiveShadow?(this._receivers.push(i),i.material.set("shadowEnabled",1),i.material.set("pcfKernel",this.kernelPCF)):i.material.set("shadowEnabled",0),this.softShadow===Aa.VSM)i.material.define("fragment","USE_VSM"),i.material.undefine("fragment","PCF_KERNEL_SIZE");else{i.material.undefine("fragment","USE_VSM");var l=this.kernelPCF;l&&l.length?i.material.define("fragment","PCF_KERNEL_SIZE",l.length/2):i.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,i){var l=this;i.traverse(function(p){p.isRenderable()&&l._updateReceivers(t,p)});for(var f=0;f<i.lights.length;f++){var c=i.lights[f];c.castShadow&&!c.invisible&&this._lightsCastShadow.push(c)}},_renderShadowPass:function(t,i,l,f){for(var c in this._shadowMapNumber)this._shadowMapNumber[c]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var p=t.gl;if(f||i.update(),l&&l.update(),i.updateLights(),this._update(t,i),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,p.enable(p.DEPTH_TEST),p.depthMask(!0),p.disable(p.BLEND),p.clearColor(1,1,1,1);for(var y=[],x=[],D=[],E=[],N=[],$=[],_t,pt=0;pt<this._lightsCastShadow.length;pt++){var At=this._lightsCastShadow[pt];if(At.type==="DIRECTIONAL_LIGHT"){if(_t){console.warn("Only one direectional light supported with shadow cascade");continue}if(At.shadowCascade>4){console.warn("Support at most 4 cascade");continue}At.shadowCascade>1&&(_t=At),this.renderDirectionalLightShadow(t,i,l,At,N,E,D)}else At.type==="SPOT_LIGHT"?this.renderSpotLightShadow(t,i,At,x,y):At.type==="POINT_LIGHT"&&this.renderPointLightShadow(t,i,At,$);this._shadowMapNumber[At.type]++}for(var Mt in this._shadowMapNumber)for(var Nt=this._shadowMapNumber[Mt],kt=Mt+"_SHADOWMAP_COUNT",pt=0;pt<this._receivers.length;pt++){var te=this._receivers[pt],qt=te.material;qt.fragmentDefines[kt]!==Nt&&(Nt>0?qt.define("fragment",kt,Nt):qt.isDefined("fragment",kt)&&qt.undefine("fragment",kt))}for(var pt=0;pt<this._receivers.length;pt++){var te=this._receivers[pt],qt=te.material;_t?qt.define("fragment","SHADOW_CASCADE",_t.shadowCascade):qt.undefine("fragment","SHADOW_CASCADE")}var jt=i.shadowUniforms;function fe(je){return je.height}if(D.length>0){var ue=D.map(fe);if(jt.directionalLightShadowMaps={value:D,type:"tv"},jt.directionalLightMatrices={value:E,type:"m4v"},jt.directionalLightShadowMapSizes={value:ue,type:"1fv"},_t){var Te=N.slice(),xe=N.slice();Te.pop(),xe.shift(),Te.reverse(),xe.reverse(),E.reverse(),jt.shadowCascadeClipsNear={value:Te,type:"1fv"},jt.shadowCascadeClipsFar={value:xe,type:"1fv"}}}if(y.length>0){var Ie=y.map(fe),jt=i.shadowUniforms;jt.spotLightShadowMaps={value:y,type:"tv"},jt.spotLightMatrices={value:x,type:"m4v"},jt.spotLightShadowMapSizes={value:Ie,type:"1fv"}}$.length>0&&(jt.pointLightShadowMaps={value:$,type:"tv"})},renderDirectionalLightShadow:function(){var t=new Sa,i=new Tr,l=new Kr,f=new Tr,c=new Tr,p=new Tr,y=new Tr;return function(x,D,E,N,$,_t,pt){var At=this._getDepthMaterial(N),Mt={getMaterial:function(On){return On.shadowDepthMaterial||At},isMaterialChanged:Qf,getUniform:Lu,ifRender:function(On){return On.castShadow},sortCompare:za.opaqueSortCompare};if(!D.viewBoundingBoxLastFrame.isFinite()){var Nt=D.getBoundingBox();D.viewBoundingBoxLastFrame.copy(Nt).applyTransform(E.viewMatrix)}var kt=Math.min(-D.viewBoundingBoxLastFrame.min.z,E.far),te=Math.max(-D.viewBoundingBoxLastFrame.max.z,E.near),qt=this._getDirectionalLightCamera(N,D,E),jt=p.array;y.copy(qt.projectionMatrix),nr.invert(c.array,qt.worldTransform.array),nr.multiply(c.array,c.array,E.worldTransform.array),nr.multiply(jt,y.array,c.array);for(var fe=[],ue=E instanceof Gn,Te=(E.near+E.far)/(E.near-E.far),xe=2*E.near*E.far/(E.near-E.far),Ie=0;Ie<=N.shadowCascade;Ie++){var je=te*Math.pow(kt/te,Ie/N.shadowCascade),Ve=te+(kt-te)*Ie/N.shadowCascade,Je=je*N.cascadeSplitLogFactor+Ve*(1-N.cascadeSplitLogFactor);fe.push(Je),$.push(-(-Je*Te+xe)/-Je)}var er=this._getTexture(N,N.shadowCascade);pt.push(er);var Xe=x.viewport,ir=x.gl;this._frameBuffer.attach(er),this._frameBuffer.bind(x),ir.clear(ir.COLOR_BUFFER_BIT|ir.DEPTH_BUFFER_BIT);for(var Ie=0;Ie<N.shadowCascade;Ie++){var xr=fe[Ie],Lr=fe[Ie+1];ue?nr.perspective(i.array,E.fov/180*Math.PI,E.aspect,xr,Lr):nr.ortho(i.array,E.left,E.right,E.bottom,E.top,xr,Lr),t.setFromProjection(i),t.getTransformedBoundingBox(l,c),l.applyProjection(y);var ar=l.min.array,vn=l.max.array;ar[0]=Math.max(ar[0],-1),ar[1]=Math.max(ar[1],-1),vn[0]=Math.min(vn[0],1),vn[1]=Math.min(vn[1],1),f.ortho(ar[0],vn[0],ar[1],vn[1],1,-1),qt.projectionMatrix.multiplyLeft(f);var br=N.shadowResolution||512;x.setViewport((N.shadowCascade-Ie-1)*br,0,br,br,1);var Cn=D.updateRenderList(qt);x.renderPass(Cn.opaque,qt,Mt),this.softShadow===Aa.VSM&&this._gaussianFilter(x,er,er.width);var dn=new Tr;dn.copy(qt.viewMatrix).multiplyLeft(qt.projectionMatrix),_t.push(dn.array),qt.projectionMatrix.copy(y)}this._frameBuffer.unbind(x),x.setViewport(Xe)}}(),renderSpotLightShadow:function(t,i,l,f,c){var p=this._getTexture(l),y=this._getSpotLightCamera(l),x=t.gl;this._frameBuffer.attach(p),this._frameBuffer.bind(t),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT);var D=this._getDepthMaterial(l),E={getMaterial:function(_t){return _t.shadowDepthMaterial||D},isMaterialChanged:Qf,getUniform:Lu,ifRender:function(_t){return _t.castShadow},sortCompare:za.opaqueSortCompare},N=i.updateRenderList(y);t.renderPass(N.opaque,y,E),this._frameBuffer.unbind(t),this.softShadow===Aa.VSM&&this._gaussianFilter(t,p,p.width);var $=new Tr;$.copy(y.worldTransform).invert().multiplyLeft(y.projectionMatrix),c.push(p),f.push($.array)},renderPointLightShadow:function(t,i,l,f){var c=this._getTexture(l),p=t.gl;f.push(c);var y=this._getDepthMaterial(l),x={getMaterial:function(te){return te.shadowDepthMaterial||y},getUniform:Lu,sortCompare:za.opaqueSortCompare},D={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},E=new Kr,N=l.getWorldPosition().array,$=new Kr,_t=l.range;$.min.setArray(N),$.max.setArray(N);var pt=new sr(_t,_t,_t);$.max.add(pt),$.min.sub(pt);var At={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};i.traverse(function(te){if(te.isRenderable()&&te.castShadow){var qt=te.geometry;if(!qt.boundingBox){for(var jt=0;jt<Ya.length;jt++)D[Ya[jt]].push(te);return}if(E.transformFrom(qt.boundingBox,te.worldTransform),!E.intersectBoundingBox($))return;E.updateVertices();for(var jt=0;jt<Ya.length;jt++)At[Ya[jt]]=!1;for(var jt=0;jt<8;jt++){var fe=E.vertices[jt],ue=fe[0]-N[0],Te=fe[1]-N[1],xe=fe[2]-N[2],Ie=Math.abs(ue),je=Math.abs(Te),Ve=Math.abs(xe);Ie>je?Ie>Ve?At[ue>0?"px":"nx"]=!0:At[xe>0?"pz":"nz"]=!0:je>Ve?At[Te>0?"py":"ny"]=!0:At[xe>0?"pz":"nz"]=!0}for(var jt=0;jt<Ya.length;jt++)At[Ya[jt]]&&D[Ya[jt]].push(te)}});for(var Mt=0;Mt<6;Mt++){var Nt=Ya[Mt],kt=this._getPointLightCamera(l,Nt);this._frameBuffer.attach(c,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+Mt),this._frameBuffer.bind(t),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),t.renderPass(D[Nt],kt,x)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var i=this._lightMaterials[t.__uid__],l=t.type==="POINT_LIGHT";if(!i){var f=l?"clay.sm.distance.":"clay.sm.depth.";i=new Or({precision:this.precision,shader:new dr(dr.source(f+"vertex"),dr.source(f+"fragment"))}),this._lightMaterials[t.__uid__]=i}return t.shadowSlopeScale!=null&&i.setUniform("slopeScale",t.shadowSlopeScale),t.shadowBias!=null&&i.setUniform("bias",t.shadowBias),this.softShadow===Aa.VSM?i.define("fragment","USE_VSM"):i.undefine("fragment","USE_VSM"),l&&(i.set("lightPosition",t.getWorldPosition().array),i.set("range",t.range)),i},_gaussianFilter:function(t,i,l){var f={width:l,height:l,type:Cr.FLOAT},c=this._texturePool.get(f);this._frameBuffer.attach(c),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",i),this._gaussianPassH.setUniform("textureWidth",l),this._gaussianPassH.render(t),this._frameBuffer.attach(i),this._gaussianPassV.setUniform("texture",c),this._gaussianPassV.setUniform("textureHeight",l),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(c)},_getTexture:function(t,i){var l=t.__uid__,f=this._textures[l],c=t.shadowResolution||512;return i=i||1,f||(t.type==="POINT_LIGHT"?f=new uo:f=new Yr,f.width=c*i,f.height=c,this.softShadow===Aa.VSM?(f.type=Cr.FLOAT,f.anisotropic=4):(f.minFilter=T.NEAREST,f.magFilter=T.NEAREST,f.useMipmap=!1),this._textures[l]=f),f},_getPointLightCamera:function(t,i){this._lightCameras.point||(this._lightCameras.point={px:new Gn,nx:new Gn,py:new Gn,ny:new Gn,pz:new Gn,nz:new Gn});var l=this._lightCameras.point[i];switch(l.far=t.range,l.fov=90,l.position.set(0,0,0),i){case"px":l.lookAt(sr.POSITIVE_X,sr.NEGATIVE_Y);break;case"nx":l.lookAt(sr.NEGATIVE_X,sr.NEGATIVE_Y);break;case"py":l.lookAt(sr.POSITIVE_Y,sr.POSITIVE_Z);break;case"ny":l.lookAt(sr.NEGATIVE_Y,sr.NEGATIVE_Z);break;case"pz":l.lookAt(sr.POSITIVE_Z,sr.NEGATIVE_Y);break;case"nz":l.lookAt(sr.NEGATIVE_Z,sr.NEGATIVE_Y);break}return t.getWorldPosition(l.position),l.update(),l},_getDirectionalLightCamera:function(){var t=new Tr,i=new Kr,l=new Kr;return function(f,c,p){this._lightCameras.directional||(this._lightCameras.directional=new zn);var y=this._lightCameras.directional;i.copy(c.viewBoundingBoxLastFrame),i.intersection(p.frustum.boundingBox),y.position.copy(i.min).add(i.max).scale(.5).transformMat4(p.worldTransform),y.rotation.copy(f.rotation),y.scale.copy(f.scale),y.updateWorldTransform(),Tr.invert(t,y.worldTransform),Tr.multiply(t,t,p.worldTransform),l.copy(i).applyTransform(t);var x=l.min.array,D=l.max.array;return y.position.set((x[0]+D[0])/2,(x[1]+D[1])/2,D[2]).transformMat4(y.worldTransform),y.near=0,y.far=-x[2]+D[2],isNaN(this.lightFrustumBias)?y.far*=4:y.far+=this.lightFrustumBias,y.left=x[0],y.right=D[0],y.top=D[1],y.bottom=x[1],y.update(!0),y}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new Gn);var i=this._lightCameras.spot;return i.fov=t.penumbraAngle*2,i.far=t.range,i.worldTransform.copy(t.worldTransform),i.updateProjectionMatrix(),nr.invert(i.viewMatrix.array,i.worldTransform.array),i},dispose:function(t){var i=t.gl||t;this._frameBuffer&&this._frameBuffer.dispose(i);for(var l in this._textures)this._textures[l].dispose(i);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var f=0;f<this._receivers.length;f++){var c=this._receivers[f];if(c.material){var p=c.material;p.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),p.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),p.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),p.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});Aa.VSM=1,Aa.PCF=2;var Zc=Aa,Wc=X.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,c=l._parametersCopy;if(c||(c=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(c[p]=f[p]);var y,x;return f.width instanceof Function?y=f.width.call(this,i):y=f.width,f.height instanceof Function?x=f.height.call(this,i):x=f.height,(c.width!==y||c.height!==x)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i.gl),c.width=y,c.height=x,c},setParameter:function(t,i){},getParameter:function(t){},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},render:function(){},getOutput:function(t,i){if(i==null)return i=t,this._outputTextures[i];var l=this.outputs[i];if(l)return this._rendered?l.outputLastFrame?this._prevOutputTextures[i]:this._outputTextures[i]:this._rendering?(this._prevOutputTextures[i]||(this._prevOutputTextures[i]=this._compositor.allocateTexture(l.parameters||{})),this._prevOutputTextures[i]):(this.render(t),this._outputTextures[i])},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,i,l){this.inputLinks[t]={node:i,pin:l},i.outputLinks[l]||(i.outputLinks[l]=[]),i.outputLinks[l].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){this._rendering=!0;for(var i in this.inputLinks){var l=this.inputLinks[i];l.node.updateReference(l.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){this._rendered=!1;for(var t in this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),Os=Wc,Wp=X.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){typeof t=="string"&&(t=this.getNodeByName(t));var i=this.nodes.indexOf(t);i>=0&&(this.nodes.splice(i,1),this._dirty=!0)},getNodeByName:function(t){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].name===t)return this.nodes[i]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];if(i.inputs){for(var l in i.inputs)if(i.inputs[l]){if(i.pass&&!i.pass.material.isUniformEnabled(l)){console.warn("Pin "+i.name+"."+l+" not used.");continue}var f=i.inputs[l],c=this.findPin(f);c?i.link(l,c.node,c.pin):console.warn(typeof f=="string"?"Node "+f+" not exist":"Pin of "+f.node+"."+f.pin+" not exist")}}}},findPin:function(t){var i;if((typeof t=="string"||t instanceof Os)&&(t={node:t}),typeof t.node=="string")for(var l=0;l<this.nodes.length;l++){var f=this.nodes[l];f.name===t.node&&(i=f)}else i=t.node;if(i){var c=t.pin;if(c||i.outputs&&(c=Object.keys(i.outputs)[0]),i.outputs[c])return{node:i,pin:c}}}}),Hc=Wp,Hp=Hc.extend(function(){return{_outputs:[],_texturePool:new Jf,_frameBuffer:new Xn({depthBuffer:!1})}},{addNode:function(t){Hc.prototype.addNode.call(this,t),t._compositor=this},render:function(t,i){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var l=0;l<this.nodes.length;l++)this.nodes[l].outputs||this._outputs.push(this.nodes[l])}for(var l=0;l<this.nodes.length;l++)this.nodes[l].beforeFrame();for(var l=0;l<this._outputs.length;l++)this._outputs[l].updateReference();for(var l=0;l<this._outputs.length;l++)this._outputs[l].render(t,i);for(var l=0;l<this.nodes.length;l++)this.nodes[l].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),Xp=Hp,Kp=Os.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Xn},{render:function(t){this._rendering=!0;var i=t.gl;this.trigger("beforerender");var l;if(!this.outputs)l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var f=this.frameBuffer;for(var c in this.outputs){var p=this.updateParameter(c,t),y=this.outputs[c],x=this._compositor.allocateTexture(p);this._outputTextures[c]=x;var D=y.attachment||i.COLOR_ATTACHMENT0;typeof D=="string"&&(D=i[D]),f.attach(x,D)}f.bind(t);var E=t.getGLExtension("EXT_draw_buffers");if(E){var N=[];for(var D in this.outputs)D=parseInt(D),D>=i.COLOR_ATTACHMENT0&&D<=i.COLOR_ATTACHMENT0+8&&N.push(D);E.drawBuffersEXT(N)}t.saveClear(),t.clearBit=T.DEPTH_BUFFER_BIT|T.COLOR_BUFFER_BIT,l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),f.unbind(t)}this.trigger("afterrender",l),this._rendering=!1,this._rendered=!0}}),Yp=Kp,jp=Os.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(t,i){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),Xc=jp,Jp=Os.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new xn({fragment:this.shader});this.pass=t},{render:function(t,i){this.trigger("beforerender",t),this._rendering=!0;var l=t.gl;for(var f in this.inputLinks){var c=this.inputLinks[f],p=c.node.getOutput(t,c.pin);this.pass.setUniform(f,p)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,i);else{this.pass.outputs={};var y={};for(var x in this.outputs){var D=this.updateParameter(x,t);isNaN(D.width)&&this.updateParameter(x,t);var E=this.outputs[x],N=this._compositor.allocateTexture(D);this._outputTextures[x]=N;var $=E.attachment||l.COLOR_ATTACHMENT0;typeof $=="string"&&($=l[$]),y[$]=N}this._compositor.getFrameBuffer().bind(t);for(var $ in y)this._compositor.getFrameBuffer().attach(y[$],$);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}for(var f in this.inputLinks){var c=this.inputLinks[f];c.node.removeReference(c.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,c=l._parametersCopy;if(c||(c=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(c[p]=f[p]);var y,x;return typeof f.width=="function"?y=f.width.call(this,i):y=f.width,typeof f.height=="function"?x=f.height.call(this,i):x=f.height,y=Math.ceil(y),x=Math.ceil(x),(c.width!==y||c.height!==x)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i),c.width=y,c.height=x,c},setParameter:function(t,i){this.pass.setUniform(t,i)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},define:function(t,i){this.pass.material.define("fragment",t,i)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){Os.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),Kc=Jp,Al=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,Yc=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,jc=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,$f=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,Jc=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,qf=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,th=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,Qc=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,$c=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,qc=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,tv=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,ev=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,rv=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function nv(t){t.import(Al),t.import(Yc),t.import(jc),t.import($f),t.import(Jc),t.import(qf),t.import(th),t.import(Qc),t.import($c),t.import(qc),t.import(tv),t.import(ev),t.import(rv)}nv(dr);var eh=/^#source\((.*?)\)/;function rh(t,i){var l=new Xp;i=i||{};var f={textures:{},parameters:{}},c=function(x,D){for(var E=0;E<t.nodes.length;E++){var N=t.nodes[E],$=Qp(N,f,i);$&&l.addNode($)}};for(var p in t.parameters){var y=t.parameters[p];f.parameters[p]=Iu(y)}return tg(t,f,i,function(x){f.textures=x,c()}),l}function Qp(t,i,l){var f=t.type||"filter",c,p,y;if(f==="filter"){var x=t.shader.trim(),D=eh.exec(x);if(D?c=dr.source(D[1].trim()):x.charAt(0)==="#"&&(c=i.shaders[x.substr(1)]),c||(c=x),!c)return}if(t.inputs){p={};for(var E in t.inputs)typeof t.inputs[E]=="string"?p[E]=t.inputs[E]:p[E]={node:t.inputs[E].node,pin:t.inputs[E].pin}}if(t.outputs){y={};for(var E in t.outputs){var N=t.outputs[E];y[E]={},N.attachment!=null&&(y[E].attachment=N.attachment),N.keepLastFrame!=null&&(y[E].keepLastFrame=N.keepLastFrame),N.outputLastFrame!=null&&(y[E].outputLastFrame=N.outputLastFrame),N.parameters&&(y[E].parameters=Iu(N.parameters))}}var $;if(f==="scene"?$=new Yp({name:t.name,scene:l.scene,camera:l.camera,outputs:y}):f==="texture"?$=new Xc({name:t.name,outputs:y}):$=new Kc({name:t.name,shader:c,inputs:p,outputs:y}),$){if(t.parameters)for(var E in t.parameters){var _t=t.parameters[E];typeof _t=="string"?(_t=_t.trim(),_t.charAt(0)==="#"?_t=i.textures[_t.substr(1)]:$.on("beforerender",iv(E,av(_t)))):typeof _t=="function"&&$.on("beforerender",_t),$.setParameter(E,_t)}if(t.defines&&$.pass)for(var E in t.defines){var _t=t.defines[E];$.pass.material.define("fragment",E,_t)}}return $}function $p(t,i){return t}function qp(t,i){return i}function Iu(t){var i={};if(!t)return i;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(f){var c=t[f];c!=null&&(typeof c=="string"&&(c=Cr[c]),i[f]=c)});var l=t.scale||1;return["width","height"].forEach(function(f){if(t[f]!=null){var c=t[f];typeof c=="string"?(c=c.trim(),i[f]=eg(f,av(c),l)):i[f]=c}}),i.width||(i.width=$p),i.height||(i.height=qp),t.useMipmap!=null&&(i.useMipmap=t.useMipmap),i}function tg(t,i,l,f){if(!t.textures){f({});return}var c={},p=0,y=!1,x=l.textureRootPath;j.each(t.textures,function(D,E){var N,$=D.path,_t=Iu(D.parameters);if(Array.isArray($)&&$.length===6)x&&($=$.map(function(pt){return j.relative2absolute(pt,x)})),N=new uo(_t);else if(typeof $=="string")x&&($=j.relative2absolute($,x)),N=new Yr(_t);else return;N.load($),p++,N.once("success",function(){c[E]=N,p--,p===0&&(f(c),y=!0)})}),p===0&&!y&&f(c)}function iv(t,i){return function(l){var f=l.getDevicePixelRatio(),c=l.getWidth(),p=l.getHeight(),y=i(c,p,f);this.setParameter(t,y)}}function eg(t,i,l){return l=l||1,function(f){var c=f.getDevicePixelRatio(),p=f.getWidth()*l,y=f.getHeight()*l;return i(p,y,c)}}function av(t){var i=/^expr\((.*)\)$/.exec(t);if(i)try{var l=new Function("width","height","dpr","return "+i[1]);return l(1,1),l}catch(f){throw new Error("Invalid expression.")}}var rg=rh,ov=rg;function bl(t,i){for(var l=0,f=1/i,c=t;c>0;)l=l+f*(c%i),c=Math.floor(c/i),f=f/i;return l}var Ns=bl,ng=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;dr.import(ng);function sv(t){for(var i=new Uint8Array(t*t*4),l=0,f=new sr,c=0;c<t;c++)for(var p=0;p<t;p++)f.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),i[l++]=(f.x*.5+.5)*255,i[l++]=(f.y*.5+.5)*255,i[l++]=0,i[l++]=255;return i}function Ru(t){return new Yr({pixels:sv(t),wrapS:Cr.REPEAT,wrapT:Cr.REPEAT,width:t,height:t})}function nh(t,i,l){var f=new Float32Array(t*3);i=i||0;for(var c=0;c<t;c++){var p=Ns(c+i,2)*(l?1:2)*Math.PI,y=Ns(c+i,3)*Math.PI,x=Math.random(),D=Math.cos(p)*Math.sin(y)*x,E=Math.cos(y)*x,N=Math.sin(p)*Math.sin(y)*x;f[c*3]=D,f[c*3+1]=E,f[c*3+2]=N}return f}function ja(t){t=t||{},this._ssaoPass=new xn({fragment:dr.source("ecgl.ssao.estimate")}),this._blurPass=new xn({fragment:dr.source("ecgl.ssao.blur")}),this._framebuffer=new Xn({depthBuffer:!1}),this._ssaoTexture=new Yr,this._blurTexture=new Yr,this._blurTexture2=new Yr,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),t.radius!=null&&this.setParameter("radius",t.radius),t.power!=null&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}ja.prototype.setDepthTexture=function(t){this._depthTex=t},ja.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},ja.prototype.update=function(t,i,l){var f=t.getWidth(),c=t.getHeight(),p=this._ssaoPass,y=this._blurPass;p.setUniform("kernel",this._kernels[l%this._kernels.length]),p.setUniform("depthTex",this._depthTex),this._normalTex!=null&&p.setUniform("normalTex",this._normalTex),p.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var x=new Tr;Tr.transpose(x,i.worldTransform),p.setUniform("projection",i.projectionMatrix.array),p.setUniform("projectionInv",i.invProjectionMatrix.array),p.setUniform("viewInverseTranspose",x.array);var D=this._ssaoTexture,E=this._blurTexture,N=this._blurTexture2;D.width=f/2,D.height=c/2,E.width=f,E.height=c,N.width=f,N.height=c,this._framebuffer.attach(D),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),p.render(t),y.setUniform("textureSize",[f/2,c/2]),y.setUniform("projection",i.projectionMatrix.array),this._framebuffer.attach(E),y.setUniform("direction",0),y.setUniform("ssaoTexture",D),y.render(t),this._framebuffer.attach(N),y.setUniform("textureSize",[f,c]),y.setUniform("direction",1),y.setUniform("ssaoTexture",E),y.render(t),this._framebuffer.unbind(t);var $=t.clearColor;t.gl.clearColor($[0],$[1],$[2],$[3])},ja.prototype.getTargetTexture=function(){return this._blurTexture2},ja.prototype.setParameter=function(t,i){t==="noiseTexSize"?this.setNoiseSize(i):t==="kernelSize"?this.setKernelSize(i):t==="intensity"?this._ssaoPass.material.set("intensity",i):this._ssaoPass.setUniform(t,i)},ja.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var i=0;i<30;i++)this._kernels[i]=nh(t,i*t,!!this._normalTex)},ja.prototype.setNoiseSize=function(t){var i=this._ssaoPass.getUniform("noiseTex");i?(i.data=sv(t),i.width=i.height=t,i.dirty()):(i=Ru(t),this._ssaoPass.setUniform("noiseTex",Ru(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])},ja.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};var ig=ja,ag=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;dr.import(ag);function ca(t){t=t||{},this._ssrPass=new xn({fragment:dr.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new xn({fragment:dr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new xn({fragment:dr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new xn({fragment:dr.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Yr({type:Cr.HALF_FLOAT}),this._texture2=new Yr({type:Cr.HALF_FLOAT}),this._texture3=new Yr({type:Cr.HALF_FLOAT}),this._prevTexture=new Yr({type:Cr.HALF_FLOAT}),this._currentTexture=new Yr({type:Cr.HALF_FLOAT}),this._frameBuffer=new Xn({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}ca.prototype.setAmbientCubemap=function(t,i){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",i);var l=t&&i;this._ssrPass.material[l?"enableTexture":"disableTexture"]("specularCubemap")},ca.prototype.update=function(t,i,l,f){var c=t.getWidth(),p=t.getHeight(),y=this._ssrTexture,x=this._texture2,D=this._texture3;y.width=this._prevTexture.width=this._currentTexture.width=c/this._downScale,y.height=this._prevTexture.height=this._currentTexture.height=p/this._downScale,x.width=D.width=c,x.height=D.height=p;var E=this._frameBuffer,N=this._ssrPass,$=this._blurPass1,_t=this._blurPass2,pt=this._blendPass,At=new Tr,Mt=new Tr;Tr.transpose(At,i.worldTransform),Tr.transpose(Mt,i.viewMatrix),N.setUniform("sourceTexture",l),N.setUniform("projection",i.projectionMatrix.array),N.setUniform("projectionInv",i.invProjectionMatrix.array),N.setUniform("toViewSpace",At.array),N.setUniform("toWorldSpace",Mt.array),N.setUniform("nearZ",i.near);var Nt=f/this._totalSamples*this._samplePerFrame;if(N.setUniform("jitterOffset",Nt),N.setUniform("sampleOffset",f*this._samplePerFrame),$.setUniform("textureSize",[y.width,y.height]),_t.setUniform("textureSize",[c,p]),_t.setUniform("sourceTexture",l),$.setUniform("projection",i.projectionMatrix.array),_t.setUniform("projection",i.projectionMatrix.array),E.attach(y),E.bind(t),N.render(t),this._physicallyCorrect&&(E.attach(this._currentTexture),pt.setUniform("texture1",this._prevTexture),pt.setUniform("texture2",y),pt.material.set({weight1:f>=1?.95:0,weight2:f>=1?.05:1}),pt.render(t)),E.attach(x),$.setUniform("texture",this._physicallyCorrect?this._currentTexture:y),$.render(t),E.attach(D),_t.setUniform("texture",x),_t.render(t),E.unbind(t),this._physicallyCorrect){var kt=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=kt}},ca.prototype.getTargetTexture=function(){return this._texture3},ca.prototype.setParameter=function(t,i){t==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",i):this._ssrPass.setUniform(t,i)},ca.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=pu.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t},ca.prototype.setSSAOTexture=function(t){var i=this._blurPass2;t?(i.material.enableTexture("ssaoTex"),i.material.set("ssaoTex",t)):i.material.disableTexture("ssaoTex")},ca.prototype.isFinished=function(t){return this._physicallyCorrect?t>this._totalSamples/this._samplePerFrame:!0},ca.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};var og=ca,lv=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],sg=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;dr.import(sg);function Ou(t,i,l,f,c){var p=t.gl;i.setUniform(p,"1i",l,c),p.activeTexture(p.TEXTURE0+c),f.isRenderable()?f.bind(t):f.unbind(t)}function uv(t,i,l,f,c){var p,y,x,D,E=t.gl;return function(N,$,_t){if(!(D&&D.material===N.material)){var pt=N.material,At=N.__program,Mt=pt.get("roughness");Mt==null&&(Mt=1);var Nt=pt.get("normalMap")||i,kt=pt.get("roughnessMap"),te=pt.get("bumpMap"),qt=pt.get("uvRepeat"),jt=pt.get("uvOffset"),fe=pt.get("detailUvRepeat"),ue=pt.get("detailUvOffset"),Te=!!te&&pt.isTextureEnabled("bumpMap"),xe=!!kt&&pt.isTextureEnabled("roughnessMap"),Ie=pt.isDefined("fragment","DOUBLE_SIDED");te=te||l,kt=kt||f,_t!==$?($.set("normalMap",Nt),$.set("bumpMap",te),$.set("roughnessMap",kt),$.set("useBumpMap",Te),$.set("useRoughnessMap",xe),$.set("doubleSide",Ie),qt!=null&&$.set("uvRepeat",qt),jt!=null&&$.set("uvOffset",jt),fe!=null&&$.set("detailUvRepeat",fe),ue!=null&&$.set("detailUvOffset",ue),$.set("roughness",Mt)):(At.setUniform(E,"1f","roughness",Mt),p!==Nt&&Ou(t,At,"normalMap",Nt,0),y!==te&&te&&Ou(t,At,"bumpMap",te,1),x!==kt&&kt&&Ou(t,At,"roughnessMap",kt,2),qt!=null&&At.setUniform(E,"2f","uvRepeat",qt),jt!=null&&At.setUniform(E,"2f","uvOffset",jt),fe!=null&&At.setUniform(E,"2f","detailUvRepeat",fe),ue!=null&&At.setUniform(E,"2f","detailUvOffset",ue),At.setUniform(E,"1i","useBumpMap",+Te),At.setUniform(E,"1i","useRoughnessMap",+xe),At.setUniform(E,"1i","doubleSide",+Ie)),p=Nt,y=te,x=kt,D=N}}}function Bs(t){t=t||{},this._depthTex=new Yr({format:Cr.DEPTH_COMPONENT,type:Cr.UNSIGNED_INT}),this._normalTex=new Yr({type:Cr.HALF_FLOAT}),this._framebuffer=new Xn,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Xn.DEPTH_ATTACHMENT),this._normalMaterial=new Or({shader:new dr(dr.source("ecgl.normal.vertex"),dr.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Xa.createBlank("#000"),this._defaultBumpMap=Xa.createBlank("#000"),this._defaultRoughessMap=Xa.createBlank("#000"),this._debugPass=new xn({fragment:dr.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}Bs.prototype.getDepthTexture=function(){return this._depthTex},Bs.prototype.getNormalTexture=function(){return this._normalTex},Bs.prototype.update=function(t,i,l){var f=t.getWidth(),c=t.getHeight(),p=this._depthTex,y=this._normalTex,x=this._normalMaterial;p.width=f,p.height=c,y.width=f,y.height=c;var D=i.getRenderList(l).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(D,l,{getMaterial:function(){return x},ifRender:function(E){return E.renderNormal},beforeRender:uv(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)},Bs.prototype.renderDebug=function(t){this._debugPass.render(t)},Bs.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};var fv=Bs;function Fs(t){t=t||{},this._edgePass=new xn({fragment:dr.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new Yr({type:Cr.HALF_FLOAT}),this._frameBuffer=new Xn,this._frameBuffer.attach(this._targetTexture)}Fs.prototype.update=function(t,i,l,f){var c=t.getWidth(),p=t.getHeight(),y=this._targetTexture;y.width=c,y.height=p;var x=this._frameBuffer;x.bind(t),this._edgePass.setUniform("projectionInv",i.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[c,p]),this._edgePass.setUniform("texture",l),this._edgePass.render(t),x.unbind(t)},Fs.prototype.getTargetTexture=function(){return this._targetTexture},Fs.prototype.setParameter=function(t,i){this._edgePass.setUniform(t,i)},Fs.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};var hv=Fs,ih={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},lg=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,cv=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;dr.import(Yc),dr.import($f),dr.import(qf),dr.import(th),dr.import(Qc),dr.import($c),dr.import(qc),dr.import(ev),dr.import(rv),dr.import(lg),dr.import(cv);function vv(t,i){return{color:{parameters:{width:t,height:i}}}}var ah=["composite","FXAA"];function rn(){this._width,this._height,this._dpr,this._sourceTexture=new Yr({type:Cr.HALF_FLOAT}),this._depthTexture=new Yr({format:Cr.DEPTH_COMPONENT,type:Cr.UNSIGNED_INT}),this._framebuffer=new Xn,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Xn.DEPTH_ATTACHMENT),this._normalPass=new fv,this._compositor=ov(ih);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var i=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=i,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(f){return this._compositor.getNodeByName(f)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=ah.map(function(f){return this._compositor.getNodeByName(f)},this);var l={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new ig(l),this._ssrPass=new og(l),this._edgePass=new hv(l)}rn.prototype.resize=function(f,c,l){l=l||1;var f=f*l,c=c*l,p=this._sourceTexture,y=this._depthTexture;p.width=f,p.height=c,y.width=f,y.height=c;var x={getWidth:function(){return f},getHeight:function(){return c},getDevicePixelRatio:function(){return l}};function D(E,N){if(typeof E[N]=="function"){var $=E[N].__original||E[N];E[N]=function(_t){return $.call(this,x)},E[N].__original=$}}this._compositor.nodes.forEach(function(E){for(var N in E.outputs){var $=E.outputs[N].parameters;$&&(D($,"width"),D($,"height"))}for(var _t in E.parameters)D(E.parameters,_t)}),this._width=f,this._height=c,this._dpr=l},rn.prototype.getWidth=function(){return this._width},rn.prototype.getHeight=function(){return this._height},rn.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},rn.prototype._getPrevNode=function(t){for(var i=ah.indexOf(t.name)-1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i-=1,l=this._finalNodesChain[i];return l},rn.prototype._getNextNode=function(t){for(var i=ah.indexOf(t.name)+1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i+=1,l=this._finalNodesChain[i];return l},rn.prototype._addChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);i&&(t.inputs.texture=i.name,l?(t.outputs=vv(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))},rn.prototype._removeChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);i&&(l?(i.outputs=vv(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=i.name):i.outputs=null,this._compositor.removeNode(t))},rn.prototype.updateNormal=function(t,i,l,f){this._ifRenderNormalPass()&&this._normalPass.update(t,i,l)},rn.prototype.updateSSAO=function(t,i,l,f){this._ssaoPass.update(t,l,f)},rn.prototype.enableSSAO=function(){this._enableSSAO=!0},rn.prototype.disableSSAO=function(){this._enableSSAO=!1},rn.prototype.enableSSR=function(){this._enableSSR=!0},rn.prototype.disableSSR=function(){this._enableSSR=!1},rn.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},rn.prototype.getSourceFrameBuffer=function(){return this._framebuffer},rn.prototype.getSourceTexture=function(){return this._sourceTexture},rn.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},rn.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},rn.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},rn.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},rn.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},rn.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},rn.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},rn.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},rn.prototype.enableEdge=function(){this._enableEdge=!0},rn.prototype.disableEdge=function(){this._enableEdge=!1},rn.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)},rn.prototype.setSSAOParameter=function(t,i){switch(t){case"quality":var l={low:6,medium:12,high:32,ultra:62}[i]||12;this._ssaoPass.setParameter("kernelSize",l);break;case"radius":this._ssaoPass.setParameter(t,i),this._ssaoPass.setParameter("bias",i/200);break;case"intensity":this._ssaoPass.setParameter(t,i);break;default:}},rn.prototype.setDOFParameter=function(t,i){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,i);break;case"blurRadius":for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].setParameter("blurRadius",i);break;case"quality":var f={low:4,medium:8,high:16,ultra:32}[i]||8;this._dofBlurKernelSize=f;for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].pass.material.define("POISSON_KERNEL_SIZE",f);this._dofBlurKernel=new Float32Array(f*2);break;default:}},rn.prototype.setSSRParameter=function(t,i){if(i!=null)switch(t){case"quality":var l={low:10,medium:15,high:30,ultra:80}[i]||20,f={low:32,medium:16,high:8,ultra:4}[i]||16;this._ssrPass.setParameter("maxIteration",l),this._ssrPass.setParameter("pixelStride",f);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-i,1),0));break;case"physical":this.setPhysicallyCorrectSSR(i);break;default:console.warn("Unkown SSR parameter "+t)}},rn.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)},rn.prototype.setEdgeColor=function(t){var i=ae.parseColor(t);this._edgePass.setParameter("edgeColor",i)},rn.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))},rn.prototype.setColorLookupTexture=function(t,i){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",i,{minFilter:ae.Texture.NEAREST,magFilter:ae.Texture.NEAREST,flipY:!1})},rn.prototype.setColorCorrection=function(t,i){this._compositeNode.setParameter(t,i)},rn.prototype.isSSREnabled=function(){return this._enableSSR},rn.prototype.composite=function(t,i,l,f,c){var p=this._sourceTexture,y=p;this._enableEdge&&(this._edgePass.update(t,l,p,c),p=y=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,l,p,c),y=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=y,this._cocNode.setParameter("depth",this._depthTexture);for(var x=this._dofBlurKernel,D=this._dofBlurKernelSize,E=Math.floor(lv.length/2/D),N=c%E,$=0;$<D*2;$++)x[$]=lv[$+N*D*2];for(var $=0;$<this._dofBlurNodes.length;$++)this._dofBlurNodes[$].setParameter("percent",c/30),this._dofBlurNodes[$].setParameter("poissonKernel",x);this._cocNode.setParameter("zNear",l.near),this._cocNode.setParameter("zFar",l.far),this._compositor.render(t,f)},rn.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};var oh=rn;function rs(t){for(var i=[],l=0;l<30;l++)i.push([Ns(l,2),Ns(l,3)]);this._haltonSequence=i,this._frame=0,this._sourceTex=new Yr,this._sourceFb=new Xn,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Yr,this._outputTex=new Yr;var f=this._blendPass=new xn({fragment:dr.source("clay.compositor.blend")});f.material.disableTexturesAll(),f.material.enableTexture(["texture1","texture2"]),this._blendFb=new Xn({depthBuffer:!1}),this._outputPass=new xn({fragment:dr.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(c){c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}}rs.prototype={constructor:rs,jitterProjection:function(t,i){var l=t.viewport,f=l.devicePixelRatio||t.getDevicePixelRatio(),c=l.width*f,p=l.height*f,y=this._haltonSequence[this._frame%this._haltonSequence.length],x=new Tr;x.array[12]=(y[0]*2-1)/c,x.array[13]=(y[1]*2-1)/p,Tr.mul(i.projectionMatrix,x,i.projectionMatrix),Tr.invert(i.invProjectionMatrix,i.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,i){this._prevFrameTex.width=t,this._prevFrameTex.height=i,this._outputTex.width=t,this._outputTex.height=i,this._sourceTex.width=t,this._sourceTex.height=i,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,i,l){var f=this._blendPass;this._frame===0?(f.setUniform("weight1",0),f.setUniform("weight2",1)):(f.setUniform("weight1",.9),f.setUniform("weight2",.1)),f.setUniform("texture1",this._prevFrameTex),f.setUniform("texture2",i||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),f.render(t),this._blendFb.unbind(t),l||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var c=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=c,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};var dv=rs;function Fn(t){t=t||"perspective",this.layer=null,this.scene=new Ta,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new oh,this._temporalSS=new dv,this._shadowMapPass=new Zc;for(var i=[],l=0,f=0;f<30;f++){for(var c=[],p=0;p<6;p++)c.push(Ns(l,2)*4-2),c.push(Ns(l,3)*4-2),l++;i.push(c)}this._pcfKernels=i,this.scene.on("beforerender",function(y,x,D){this.needsTemporalSS()&&this._temporalSS.jitterProjection(y,D)},this)}Fn.prototype.setProjection=function(t){var i=this.camera;i&&i.update(),t==="perspective"?this.camera instanceof Gn||(this.camera=new Gn,i&&this.camera.setLocalTransform(i.localTransform)):this.camera instanceof zn||(this.camera=new zn,i&&this.camera.setLocalTransform(i.localTransform)),this.camera.near=.1,this.camera.far=2e3},Fn.prototype.setViewport=function(t,i,l,f,c){this.camera instanceof Gn&&(this.camera.aspect=l/f),c=c||1,this.viewport.x=t,this.viewport.y=i,this.viewport.width=l,this.viewport.height=f,this.viewport.devicePixelRatio=c,this._compositor.resize(l*c,f*c),this._temporalSS.resize(l*c,f*c)},Fn.prototype.containPoint=function(t,i){var l=this.viewport,f=this.layer.renderer.getHeight();return i=f-i,t>=l.x&&i>=l.y&&t<=l.x+l.width&&i<=l.y+l.height};var Ml=new Ne;Fn.prototype.castRay=function(t,i,l){var f=this.layer.renderer,c=f.viewport;return f.viewport=this.viewport,f.screenToNDC(t,i,Ml),this.camera.castRay(Ml,l),f.viewport=c,l},Fn.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var i=0;i<t.transparent.length;i++){var l=t.transparent[i],f=l.geometry;f.needsSortVerticesProgressively&&f.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),f.needsSortTrianglesProgressively&&f.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},Fn.prototype.render=function(t,i){this._doRender(t,i,this._frame),this._frame++},Fn.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},Fn.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return t==="auto"&&(t=this._enablePostEffect),t},Fn.prototype.hasDOF=function(){return this._enableDOF},Fn.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},Fn.prototype._doRender=function(t,i,l){var f=this.scene,c=this.camera;l=l||0,this._updateTransparent(t,f,c,l),i||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,f,c,!0)),this._updateShadowPCFKernel(l);var p=t.clearColor;if(t.gl.clearColor(p[0],p[1],p[2],p[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,c),this._compositor.updateNormal(t,f,c,this._temporalSS.getFrame())),this._updateSSAO(t,f,c,this._temporalSS.getFrame()),this._enablePostEffect){var y=this._compositor.getSourceFrameBuffer();y.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(f,c,!0,!0),y.unbind(t),this.needsTemporalSS()&&i?(this._compositor.composite(t,f,c,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,f,c,null,0))}else if(this.needsTemporalSS()&&i){var y=this._temporalSS.getSourceFrameBuffer();y.bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(f,c,!0,!0),t.restoreClear(),y.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(f,c,!0,!0)},Fn.prototype._updateTransparent=function(t,i,l,f){for(var c=new sr,p=new Tr,y=l.getWorldPosition(),x=i.getRenderList(l).transparent,D=0;D<x.length;D++){var E=x[D],N=E.geometry;Tr.invert(p,E.worldTransform),sr.transformMat4(c,y,p),N.needsSortTriangles&&N.needsSortTriangles()&&N.doSortTriangles(c,f),N.needsSortVertices&&N.needsSortVertices()&&N.doSortVertices(c,f)}},Fn.prototype._updateSSAO=function(t,i,l){var f=this._enableSSAO&&this._enablePostEffect;f&&this._compositor.updateSSAO(t,i,l,this._temporalSS.getFrame());for(var c=i.getRenderList(l),p=0;p<c.opaque.length;p++){var y=c.opaque[p];y.renderNormal&&y.material[f?"enableTexture":"disableTexture"]("ssaoMap"),f&&y.material.set("ssaoMap",this._compositor.getSSAOTexture())}},Fn.prototype._updateShadowPCFKernel=function(t){for(var i=this._pcfKernels[t%this._pcfKernels.length],l=this.scene.getRenderList(this.camera),f=l.opaque,c=0;c<f.length;c++)f[c].receiveShadow&&(f[c].material.set("pcfKernel",i),f[c].material.define("fragment","PCF_KERNEL_SIZE",i.length/2))},Fn.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)},Fn.prototype.setPostEffect=function(t,i){var l=this._compositor;this._enablePostEffect=t.get("enable");var f=t.getModel("bloom"),c=t.getModel("edge"),p=t.getModel("DOF",t.getModel("depthOfField")),y=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),x=t.getModel("SSR",t.getModel("screenSpaceReflection")),D=t.getModel("FXAA"),E=t.getModel("colorCorrection");f.get("enable")?l.enableBloom():l.disableBloom(),p.get("enable")?l.enableDOF():l.disableDOF(),x.get("enable")?l.enableSSR():l.disableSSR(),E.get("enable")?l.enableColorCorrection():l.disableColorCorrection(),c.get("enable")?l.enableEdge():l.disableEdge(),D.get("enable")?l.enableFXAA():l.disableFXAA(),this._enableDOF=p.get("enable"),this._enableSSAO=y.get("enable"),this._enableSSAO?l.enableSSAO():l.disableSSAO(),l.setBloomIntensity(f.get("intensity")),l.setEdgeColor(c.get("color")),l.setColorLookupTexture(E.get("lookupTexture"),i),l.setExposure(E.get("exposure")),["radius","quality","intensity"].forEach(function(N){l.setSSAOParameter(N,y.get(N))}),["quality","maxRoughness","physical"].forEach(function(N){l.setSSRParameter(N,x.get(N))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(N){l.setDOFParameter(N,p.get(N))}),["brightness","contrast","saturation"].forEach(function(N){l.setColorCorrection(N,E.get(N))})},Fn.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect)return t>this.camera.far||t<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",t),!0)},Fn.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")},Fn.prototype.isLinearSpace=function(){return this._enablePostEffect},Fn.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var i=this.rootNode.children(),l=0;l<i.length;l++)t.add(i[l]);t!==this.scene&&this.scene.add(t),this.rootNode=t}},Fn.prototype.add=function(t){this.rootNode.add(t)},Fn.prototype.remove=function(t){this.rootNode.remove(t)},Fn.prototype.removeAll=function(t){this.rootNode.removeAll(t)},Object.assign(Fn.prototype,H);var mo=Fn;function ug(t,i){var l=t.getBoxLayoutParams(),f=(0,Ia.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var c=t.get("boxWidth"),p=t.get("boxHeight"),y=t.get("boxDepth");this.getAxis("x").setExtent(-c/2,c/2),this.getAxis("y").setExtent(y/2,-y/2),this.getAxis("z").setExtent(-p/2,p/2),this.size=[c,p,y]}function fg(t,i){var l={};function f(c,p){l[c]=l[c]||[1/0,-1/0],l[c][0]=Math.min(p[0],l[c][0]),l[c][1]=Math.max(p[1],l[c][1])}t.eachSeries(function(c){if(c.coordinateSystem===this){var p=c.getData();["x","y","z"].forEach(function(y){p.mapDimensionsAll(y,!0).forEach(function(x){f(y,p.getDataExtent(x,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(c){t.eachComponent(c,function(p){var y=c.charAt(0),x=p.getReferringComponents("grid3D").models[0],D=x.coordinateSystem;if(D===this){var E=D.getAxis(y);if(!E){var N=F._y.createScale(l[y]||[1/0,-1/0],p);E=new Eu(y,N),E.type=p.get("type");var $=E.type==="category";E.onBand=$&&p.get("boundaryGap"),E.inverse=p.get("inverse"),p.axis=E,E.model=p,E.getLabelModel=function(){return p.getModel("axisLabel",x.getModel("axisLabel"))},E.getTickModel=function(){return p.getModel("axisTick",x.getModel("axisTick"))},D.addAxis(E)}}},this)},this),this.resize(this.model,i)}var Cl={dimensions:Rs.prototype.dimensions,create:function(t,i){var l=[];t.eachComponent("grid3D",function(p){p.__viewGL=p.__viewGL||new mo;var y=new Rs;y.model=p,y.viewGL=p.__viewGL,p.coordinateSystem=y,l.push(y),y.resize=ug,y.update=fg});var f=["xAxis3D","yAxis3D","zAxis3D"];function c(p,y){return f.map(function(x){var D=p.getReferringComponents(x).models[0];return D==null&&(D=y.getComponent(x)),D})}return t.eachSeries(function(p){if(p.get("coordinateSystem")==="cartesian3D"){var y=p.getReferringComponents("grid3D").models[0];if(y==null){var x=c(p,t),y=x[0].getCoordSysModel();x.forEach(function(N){var $=N.getCoordSysModel()})}var D=y.coordinateSystem;p.coordinateSystem=D}}),l}},hg=Cl,pv=F.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});F._y.mixinAxisModelCommonMethods(pv);var cg=pv,gv={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},vg=F.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},gv),Nu=F.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},gv),dg=F.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},Nu),Bu=F.D5.defaults({logBase:10},Nu);Bu.scale=!0;var mv={categoryAxis3D:vg,valueAxis3D:Nu,timeAxis3D:dg,logAxis3D:Bu},pg=z(35867),yv=["value","category","time","log"];function gg(t,i,l,f,c){yv.forEach(function(p){var y=l.extend({type:i+"Axis3D."+p,__ordinalMeta:null,mergeDefaultAndTheme:function(x,D){var E=D.getTheme();F.D5.merge(x,E.get(p+"Axis3D")),F.D5.merge(x,this.getDefaultOption()),x.type=f(i,x)},optionUpdated:function(){var x=this.option;x.type==="category"&&(this.__ordinalMeta=pg.Z.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:F.D5.merge(F.D5.clone(mv[p+"Axis3D"]),c||{},!0)});t.registerComponentModel(y)}),t.registerSubTypeDefaulter(i+"Axis3D",F.D5.curry(f,i))}function mg(t,i){return i.type||(i.data?"category":"value")}function yo(t){t.registerComponentModel(Lc),t.registerComponentView(Up),t.registerCoordinateSystem("grid3D",hg),["x","y","z"].forEach(function(i){gg(t,i,cg,mg,{name:i.toUpperCase()});const l=t.ComponentView.extend({type:i+"Axis3D"});t.registerComponentView(l)}),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"grid3D",query:i},function(f){f.setView(i)})}),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(i,l){}),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(i,l){})}(0,F.D$)(yo);var Gs={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},sh={getFilledRegions:function(t,i){var l=(t||[]).slice(),f;if(typeof i=="string"?(i=F.FU(i),f=i&&i.geoJson):i&&i.features&&(f=i),!f)return[];for(var c={},p=f.features,y=0;y<l.length;y++)c[l[y].name]=l[y];for(var y=0;y<p.length;y++){var x=p[y].properties.name;c[x]||l.push({name:x})}return l},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}},_o=F.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var i=F._y.createDimensions(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),l=new F.aV(i,this);l.initData(t.regions);var f={};l.each(function(c){var p=l.getName(c),y=l.getItemModel(c);f[p]=y}),this._regionModelMap=f,this._data=l},getData:function(){return this._data},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new F.Hn(null,this)},getRegionPolygonCoords:function(t){var i=this.getData().getName(t),l=this.coordinateSystem.getRegion(i);return l?l.geometries:[]},getFormattedLabel:function(t,i){var l=this._data.getName(t),f=this.getRegionModel(t),c=f.get(i==="normal"?["label","formatter"]:["emphasis","label","formatter"]);c==null&&(c=f.get(["label","formatter"]));var p={name:l};if(typeof c=="function")return p.status=i,c(p);if(typeof c=="string"){var y=p.seriesName;return c.replace("{a}",y!=null?y:"")}else return l},defaultOption:{regions:[]}});F.D5.merge(_o.prototype,sh),F.D5.merge(_o.prototype,Tu),F.D5.merge(_o.prototype,Qo),F.D5.merge(_o.prototype,vo),F.D5.merge(_o.prototype,Gs);var yg=_o,_g=_v;function _v(t,i,l){l=l||2;var f=i&&i.length,c=f?i[0]*l:t.length,p=xv(t,0,c,l,!0),y=[];if(!p)return y;var x,D,E,N,$,_t,pt;if(f&&(p=wv(t,i,p,l)),t.length>80*l){x=E=t[0],D=N=t[1];for(var At=l;At<c;At+=l)$=t[At],_t=t[At+1],$<x&&(x=$),_t<D&&(D=_t),$>E&&(E=$),_t>N&&(N=_t);pt=Math.max(E-x,N-D)}return Pl(p,y,l,x,D,pt),y}function xv(t,i,l,f,c){var p,y;if(c===zs(t,i,l,f)>0)for(p=i;p<l;p+=f)y=Mv(p,t[p],t[p+1],y);else for(p=l-f;p>=i;p-=f)y=Mv(p,t[p],t[p+1],y);return y&&is(y,y.next)&&(Ol(y),y=y.next),y}function El(t,i){if(!t)return t;i||(i=t);var l=t,f;do if(f=!1,!l.steiner&&(is(l,l.next)||Ui(l.prev,l,l.next)===0)){if(Ol(l),l=i=l.prev,l===l.next)return null;f=!0}else l=l.next;while(f||l!==i);return i}function Pl(t,i,l,f,c,p,y){if(t){!y&&p&&Tg(t,f,c,p);for(var x=t,D,E;t.prev!==t.next;){if(D=t.prev,E=t.next,p?lh(t,f,c,p):Sv(t)){i.push(D.i/l),i.push(t.i/l),i.push(E.i/l),Ol(t),t=E.next,x=E.next;continue}if(t=E,t===x){y?y===1?(t=Tv(t,i,l),Pl(t,i,l,f,c,p,2)):y===2&&Dv(t,i,l,f,c,p):Pl(El(t),i,l,f,c,p,1);break}}}}function Sv(t){var i=t.prev,l=t,f=t.next;if(Ui(i,l,f)>=0)return!1;for(var c=t.next.next;c!==t.prev;){if(zu(i.x,i.y,l.x,l.y,f.x,f.y,c.x,c.y)&&Ui(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function lh(t,i,l,f){var c=t.prev,p=t,y=t.next;if(Ui(c,p,y)>=0)return!1;for(var x=c.x<p.x?c.x<y.x?c.x:y.x:p.x<y.x?p.x:y.x,D=c.y<p.y?c.y<y.y?c.y:y.y:p.y<y.y?p.y:y.y,E=c.x>p.x?c.x>y.x?c.x:y.x:p.x>y.x?p.x:y.x,N=c.y>p.y?c.y>y.y?c.y:y.y:p.y>y.y?p.y:y.y,$=Fu(x,D,i,l,f),_t=Fu(E,N,i,l,f),pt=t.nextZ;pt&&pt.z<=_t;){if(pt!==t.prev&&pt!==t.next&&zu(c.x,c.y,p.x,p.y,y.x,y.y,pt.x,pt.y)&&Ui(pt.prev,pt,pt.next)>=0)return!1;pt=pt.nextZ}for(pt=t.prevZ;pt&&pt.z>=$;){if(pt!==t.prev&&pt!==t.next&&zu(c.x,c.y,p.x,p.y,y.x,y.y,pt.x,pt.y)&&Ui(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}return!0}function Tv(t,i,l){var f=t;do{var c=f.prev,p=f.next.next;!is(c,p)&&bv(c,f,f.next,p)&&Rl(c,p)&&Rl(p,c)&&(i.push(c.i/l),i.push(f.i/l),i.push(p.i/l),Ol(f),Ol(f.next),f=t=p),f=f.next}while(f!==t);return f}function Dv(t,i,l,f,c,p){var y=t;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&Ll(y,x)){var D=ku(y,x);y=El(y,y.next),D=El(D,D.next),Pl(y,i,l,f,c,p),Pl(D,i,l,f,c,p);return}x=x.next}y=y.next}while(y!==t)}function wv(t,i,l,f){var c=[],p,y,x,D,E;for(p=0,y=i.length;p<y;p++)x=i[p]*f,D=p<y-1?i[p+1]*f:t.length,E=xv(t,x,D,f,!1),E===E.next&&(E.steiner=!0),c.push(Gu(E));for(c.sort(Av),p=0;p<c.length;p++)xg(c[p],l),l=El(l,l.next);return l}function Av(t,i){return t.x-i.x}function xg(t,i){if(i=Sg(t,i),i){var l=ku(i,t);El(l,l.next)}}function Sg(t,i){var l=i,f=t.x,c=t.y,p=-1/0,y;do{if(c<=l.y&&c>=l.next.y&&l.next.y!==l.y){var x=l.x+(c-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(x<=f&&x>p){if(p=x,x===f){if(c===l.y)return l;if(c===l.next.y)return l.next}y=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!y)return null;if(f===p)return y.prev;var D=y,E=y.x,N=y.y,$=1/0,_t;for(l=y.next;l!==D;)f>=l.x&&l.x>=E&&f!==l.x&&zu(c<N?f:p,c,E,N,c<N?p:f,c,l.x,l.y)&&(_t=Math.abs(c-l.y)/(f-l.x),(_t<$||_t===$&&l.x>y.x)&&Rl(l,t)&&(y=l,$=_t)),l=l.next;return y}function Tg(t,i,l,f){var c=t;do c.z===null&&(c.z=Fu(c.x,c.y,i,l,f)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==t);c.prevZ.nextZ=null,c.prevZ=null,ns(c)}function ns(t){var i,l,f,c,p,y,x,D,E=1;do{for(l=t,t=null,p=null,y=0;l;){for(y++,f=l,x=0,i=0;i<E&&(x++,f=f.nextZ,!!f);i++);for(D=E;x>0||D>0&&f;)x!==0&&(D===0||!f||l.z<=f.z)?(c=l,l=l.nextZ,x--):(c=f,f=f.nextZ,D--),p?p.nextZ=c:t=c,c.prevZ=p,p=c;l=f}p.nextZ=null,E*=2}while(y>1);return t}function Fu(t,i,l,f,c){return t=32767*(t-l)/c,i=32767*(i-f)/c,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t|i<<1}function Gu(t){var i=t,l=t;do i.x<l.x&&(l=i),i=i.next;while(i!==t);return l}function zu(t,i,l,f,c,p,y,x){return(c-y)*(i-x)-(t-y)*(p-x)>=0&&(t-y)*(f-x)-(l-y)*(i-x)>=0&&(l-y)*(p-x)-(c-y)*(f-x)>=0}function Ll(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!Il(t,i)&&Rl(t,i)&&Rl(i,t)&&Vu(t,i)}function Ui(t,i,l){return(i.y-t.y)*(l.x-i.x)-(i.x-t.x)*(l.y-i.y)}function is(t,i){return t.x===i.x&&t.y===i.y}function bv(t,i,l,f){return is(t,i)&&is(l,f)||is(t,f)&&is(l,i)?!0:Ui(t,i,l)>0!=Ui(t,i,f)>0&&Ui(l,f,t)>0!=Ui(l,f,i)>0}function Il(t,i){var l=t;do{if(l.i!==t.i&&l.next.i!==t.i&&l.i!==i.i&&l.next.i!==i.i&&bv(l,l.next,t,i))return!0;l=l.next}while(l!==t);return!1}function Rl(t,i){return Ui(t.prev,t,t.next)<0?Ui(t,i,t.next)>=0&&Ui(t,t.prev,i)>=0:Ui(t,i,t.prev)<0||Ui(t,t.next,i)<0}function Vu(t,i){var l=t,f=!1,c=(t.x+i.x)/2,p=(t.y+i.y)/2;do l.y>p!=l.next.y>p&&l.next.y!==l.y&&c<(l.next.x-l.x)*(p-l.y)/(l.next.y-l.y)+l.x&&(f=!f),l=l.next;while(l!==t);return f}function ku(t,i){var l=new Nl(t.i,t.x,t.y),f=new Nl(i.i,i.x,i.y),c=t.next,p=i.prev;return t.next=i,i.prev=t,l.next=c,c.prev=l,f.next=l,l.prev=f,p.next=f,f.prev=p,f}function Mv(t,i,l,f){var c=new Nl(t,i,l);return f?(c.next=f.next,c.prev=f,f.next.prev=c,f.next=c):(c.prev=c,c.next=c),c}function Ol(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Nl(t,i,l){this.i=t,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}_v.deviation=function(t,i,l,f){var c=i&&i.length,p=c?i[0]*l:t.length,y=Math.abs(zs(t,0,p,l));if(c)for(var x=0,D=i.length;x<D;x++){var E=i[x]*l,N=x<D-1?i[x+1]*l:t.length;y-=Math.abs(zs(t,E,N,l))}var $=0;for(x=0;x<f.length;x+=3){var _t=f[x]*l,pt=f[x+1]*l,At=f[x+2]*l;$+=Math.abs((t[_t]-t[At])*(t[pt+1]-t[_t+1])-(t[_t]-t[pt])*(t[At+1]-t[_t+1]))}return y===0&&$===0?0:Math.abs(($-y)/y)};function zs(t,i,l,f){for(var c=0,p=i,y=l-f;p<l;p+=f)c+=(t[y]-t[p])*(t[p+1]+t[y+1]),y=p;return c}function Uu(t,i,l){var f=t[i];t[i]=t[l],t[l]=f}function Vs(t,i,l,f,c){var p=l,y=t[i];Uu(t,i,f);for(var x=l;x<f;x++)c(t[x],y)<0&&(Uu(t,x,p),p++);return Uu(t,f,p),p}function xo(t,i,l,f){if(l<f){var c=Math.floor((l+f)/2),p=Vs(t,c,l,f,i);xo(t,i,l,p-1),xo(t,i,p+1,f)}}function Ja(){this._parts=[]}Ja.prototype.step=function(t,i,l){var f=t.length;if(l===0){this._parts=[],this._sorted=!1;var c=Math.floor(f/2);this._parts.push({pivot:c,left:0,right:f-1}),this._currentSortPartIdx=0}if(!this._sorted){var p=this._parts;if(p.length===0)return this._sorted=!0,!0;if(p.length<512){for(var y=0;y<p.length;y++)p[y].pivot=Vs(t,p[y].pivot,p[y].left,p[y].right,i);for(var x=[],y=0;y<p.length;y++){var D=p[y].left,E=p[y].pivot-1;E>D&&x.push({pivot:Math.floor((E+D)/2),left:D,right:E});var D=p[y].pivot+1,E=p[y].right;E>D&&x.push({pivot:Math.floor((E+D)/2),left:D,right:E})}p=this._parts=x}else for(var y=0;y<Math.floor(p.length/10);y++){var N=p.length-1-this._currentSortPartIdx;if(xo(t,i,p[N].left,p[N].right),this._currentSortPartIdx++,this._currentSortPartIdx===p.length)return this._sorted=!0,!0}return!1}},Ja.sort=xo;var ks=Ja,So=mn.vec3,uh=So.create(),Cv=So.create(),Bl=So.create(),vi={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,i){var l=this.indices;if(i===0){var f=this.attributes.position,t=t.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new l.constructor(l.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var c=0,p,y=0;y<l.length;){f.get(l[y++],uh),f.get(l[y++],Cv),f.get(l[y++],Bl);var x=So.sqrDist(uh,t),D=So.sqrDist(Cv,t),E=So.sqrDist(Bl,t),N=Math.min(x,D);N=Math.min(N,E),y===3?(p=N,N=0):N=N-p,this._triangleZList[c++]=N}}for(var $=this._sortedTriangleIndices,y=0;y<$.length;y++)$[y]=y;if(this.triangleCount<2e4)i===0&&this._simpleSort(!0);else for(var y=0;y<3;y++)this._progressiveQuickSort(i*3+y);for(var _t=this._indicesTmp,pt=this._triangleZListTmp,At=this._triangleZList,y=0;y<this.triangleCount;y++){var Mt=$[y]*3,Nt=y*3;_t[Nt++]=l[Mt++],_t[Nt++]=l[Mt++],_t[Nt]=l[Mt],pt[y]=At[$[y]]}var kt=this._indicesTmp;this._indicesTmp=this.indices,this.indices=kt;var kt=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=kt,this.dirtyIndices()},_simpleSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;function f(c,p){return i[p]-i[c]}t?Array.prototype.sort.call(l,f):ks.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;this._quickSort=this._quickSort||new ks,this._quickSort.step(l,function(f,c){return i[c]-i[f]},t)}};function Dg(t){const i=t.getVisual("style");if(i){const l=t.getVisual("drawType");return i[l]}}function Ev(t){return t.getVisual("style").opacity}function di(t,i){const l=t.getItemVisual(i,"style");if(l){const f=t.getVisual("drawType");return l[f]}}function si(t,i){const l=t.getItemVisual(i,"style");return l&&l.opacity}var Pv=1,fh=2;function as(t,i,l){this._labelsMesh=new bu,this._labelTextureSurface=new Hf({width:512,height:512,devicePixelRatio:l.getDevicePixelRatio(),onupdate:function(){l.getZr().refresh()}}),this._api=l,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}as.prototype.getLabelPosition=function(t,i,l){return[0,0,0]},as.prototype.getLabelDistance=function(t,i,l){return 0},as.prototype.getMesh=function(){return this._labelsMesh},as.prototype.updateData=function(t,i,l){i==null&&(i=0),l==null&&(l=t.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==l-i)&&(this._labelsVisibilitiesBits=new Uint8Array(l-i));for(var f=["label","show"],c=["emphasis","label","show"],p=i;p<l;p++){var y=t.getItemModel(p),x=y.get(f),D=y.get(c);D==null&&(D=x);var E=(x?Pv:0)|(D?fh:0);this._labelsVisibilitiesBits[p-i]=E}this._start=i,this._end=l,this._data=t},as.prototype.updateLabels=function(t){if(this._data){t=t||[];for(var i=t.length>0,l={},f=0;f<t.length;f++)l[t[f]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var c=["label"],p=["emphasis","label"],y=this._data.hostModel,x=this._data,D=y.getModel(c),E=y.getModel(p,D),N={left:"right",right:"left",top:"center",bottom:"center"},$={left:"middle",right:"middle",top:"bottom",bottom:"top"},_t=this._start;_t<this._end;_t++){var pt=!1;i&&l[_t]&&(pt=!0);var At=this._labelsVisibilitiesBits[_t-this._start]&(pt?fh:Pv);if(At){var Mt=x.getItemModel(_t),Nt=Mt.getModel(pt?p:c,pt?E:D),kt=Nt.get("distance")||0,te=Nt.get("position"),qt=this._api.getDevicePixelRatio(),jt=y.getFormattedLabel(_t,pt?"emphasis":"normal");if(jt==null||jt==="")return;var fe=new F.Q.xv({style:(0,qo.Lr)(Nt,{text:jt,fill:Nt.get("color")||di(x,_t)||"#000",align:"left",verticalAlign:"top",opacity:Jr.firstNotNull(Nt.get("opacity"),si(x,_t),1)})}),ue=fe.getBoundingRect(),Te=1.2;ue.height*=Te;var xe=this._labelTextureSurface.add(fe),Ie=N[te]||"center",je=$[te]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(_t,te,kt),[ue.width*qt,ue.height*qt],xe,Ie,je,this.getLabelDistance(_t,te,kt)*qt)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},as.prototype.dispose=function(){this._labelTextureSurface.dispose()};var Fl=as,ji=mn.vec3;ae.Shader.import(Mu);function Gl(t){this.rootNode=new ae.Node,this._triangulationResults={},this._shadersMap=ae.COMMON_SHADERS.filter(function(l){return l!=="shadow"}).reduce(function(l,f){return l[f]=ae.createShader("ecgl."+f),l},{}),this._linesShader=ae.createShader("ecgl.meshLines3D");var i={};ae.COMMON_SHADERS.forEach(function(l){i[l]=new ae.Material({shader:ae.createShader("ecgl."+l)})}),this._groundMaterials=i,this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new Fl(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}Gl.prototype={constructor:Gl,extrudeY:!0,update:function(t,i,l,f,c){var p=t.getData();f==null&&(f=0),c==null&&(c=p.count()),this._startIndex=f,this._endIndex=c-1,this._triangulation(t,f,c);var y=this._getShader(t.get("shading"));this._prepareMesh(t,y,l,f,c),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,l,f,c);var x=t.coordinateSystem;x.type==="geo3D"&&this._updateGroundPlane(t,x,l);var D=this;this._labelsBuilder.updateData(p,f,c),this._labelsBuilder.getLabelPosition=function(E,N,$){var _t=p.getName(E),pt,At=$;if(x.type==="geo3D"){var Mt=x.getRegion(_t);if(!Mt)return[NaN,NaN,NaN];pt=Mt.getCenter();var Nt=x.dataToPoint([pt[0],pt[1],At]);return Nt}else var kt=D._triangulationResults[E-D._startIndex],pt=D.extrudeY?[(kt.max[0]+kt.min[0])/2,kt.max[1]+At,(kt.max[2]+kt.min[2])/2]:[(kt.max[0]+kt.min[0])/2,(kt.max[1]+kt.min[1])/2,kt.max[2]+At]},this._data=p,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this;function i(){var c=new ae.Mesh({name:"Polygon",material:new ae.Material({shader:t._shadersMap.lambert}),geometry:new ae.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(c.geometry,vi),c}var l=i(),f=new ae.Mesh({material:new ae.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new ts({useNativeLine:!1})});this.rootNode.add(l),this.rootNode.add(f),l.material.define("both","VERTEX_COLOR"),l.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=l,this._linesMesh=f,this.rootNode.add(this._groundMesh)},_getShader:function(t){var i=this._shadersMap[t];return i||(i=this._shadersMap.lambert),i.__shading=t,i},_prepareMesh:function(t,i,l,f,c){for(var p=0,y=0,x=0,D=0,E=f;E<c;E++){var N=this._getRegionPolygonInfo(E),$=this._getRegionLinesInfo(E,t,this._linesMesh.geometry);p+=N.vertexCount,y+=N.triangleCount,x+=$.vertexCount,D+=$.triangleCount}var _t=this._polygonMesh,pt=_t.geometry;["position","normal","texcoord0","color"].forEach(function(At){pt.attributes[At].init(p)}),pt.indices=p>65535?new Uint32Array(y*3):new Uint16Array(y*3),_t.material.shader!==i&&_t.material.attachShader(i,!0),ae.setMaterialFromModel(i.__shading,_t.material,t,l),x>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(x),this._linesMesh.geometry.setTriangleCount(D)),this._dataIndexOfVertex=new Uint32Array(p),this._vertexRangeOfDataIndex=new Uint32Array((c-f)*2)},_updateRegionMesh:function(t,i,l,f){for(var c=t.getData(),p=0,y=0,x=!1,ue=this._polygonMesh,D=this._linesMesh,E=l;E<f;E++){var N=t.getRegionModel(E),$=N.getModel("itemStyle"),_t=Jr.firstNotNull(di(c,E),$.get("color"),"#fff"),pt=Jr.firstNotNull(si(c,E),$.get("opacity"),1),At=ae.parseColor(_t),Mt=ae.parseColor($.get("borderColor"));At[3]*=pt,Mt[3]*=pt;var Nt=At[3]<.99;ue.material.set("color",[1,1,1,1]),x=x||Nt;for(var kt=Jr.firstNotNull(N.get("height",!0),t.get("regionHeight")),te=this._updatePolygonGeometry(t,ue.geometry,E,kt,p,y,At),qt=p;qt<te.vertexOffset;qt++)this._dataIndexOfVertex[qt]=E;this._vertexRangeOfDataIndex[(E-l)*2]=p,this._vertexRangeOfDataIndex[(E-l)*2+1]=te.vertexOffset,p=te.vertexOffset,y=te.triangleOffset;var jt=$.get("borderWidth"),fe=jt>0;fe&&(jt*=i.getDevicePixelRatio(),this._updateLinesGeometry(D.geometry,t,E,kt,jt,t.coordinateSystem.transform)),D.invisible=!fe,D.material.set({color:Mt})}var ue=this._polygonMesh;ue.material.transparent=x,ue.material.depthMask=!x,ue.geometry.updateBoundingBox(),ue.frontFace=this.extrudeY?ae.Mesh.CCW:ae.Mesh.CW,ue.material.get("normalMap")&&ue.geometry.generateTangents(),ue.seriesIndex=t.seriesIndex,ue.on("mousemove",this._onmousemove,this),ue.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var i=t.getModel("debug.wireframe");if(i.get("show")){var l=ae.parseColor(i.get("lineStyle.color")||"rgba(0,0,0,0.5)"),f=Jr.firstNotNull(i.get("lineStyle.width"),1),c=this._polygonMesh;c.geometry.generateBarycentric(),c.material.define("both","WIREFRAME_TRIANGLE"),c.material.set("wireframeLineColor",l),c.material.set("wireframeLineWidth",f)}},_onmousemove:function(t){var i=this._dataIndexOfVertex[t.triangle[0]];i==null&&(i=-1),i!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(i),this._labelsBuilder.updateLabels([i])),this._lastHoverDataIndex=i,this._polygonMesh.dataIndex=i},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,i,l){var f=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!f.get("show",!0),!this._groundMesh.invisible){var c=t.get("shading"),p=this._groundMaterials[c];p||(p=this._groundMaterials.lambert),ae.setMaterialFromModel(c,p,f,l),p.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=p,this._groundMesh.material.set("color",ae.parseColor(f.get("color"))),this._groundMesh.scale.set(i.size[0],i.size[2],1)}},_triangulation:function(t,i,l){this._triangulationResults=[];for(var f=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0],p=t.coordinateSystem,y=i;y<l;y++){for(var x=[],D=t.getRegionPolygonCoords(y),E=0;E<D.length;E++){var N=D[E].exterior,$=D[E].interiors,_t=[],pt=[];if(!(N.length<3)){for(var At=0,Mt=0;Mt<N.length;Mt++){var Nt=N[Mt];_t[At++]=Nt[0],_t[At++]=Nt[1]}for(var Mt=0;Mt<$.length;Mt++)if(!($[Mt].length<3)){for(var kt=_t.length/2,te=0;te<$[Mt].length;te++){var Nt=$[Mt][te];_t.push(Nt[0]),_t.push(Nt[1])}pt.push(kt)}for(var qt=_g(_t,pt),jt=new Float64Array(_t.length/2*3),fe=[],ue=[1/0,1/0,1/0],Te=[-1/0,-1/0,-1/0],xe=0,Mt=0;Mt<_t.length;)ji.set(fe,_t[Mt++],0,_t[Mt++]),p&&p.transform&&ji.transformMat4(fe,fe,p.transform),ji.min(ue,ue,fe),ji.max(Te,Te,fe),jt[xe++]=fe[0],jt[xe++]=fe[1],jt[xe++]=fe[2];ji.min(f,f,ue),ji.max(c,c,Te),x.push({points:jt,indices:qt,min:ue,max:Te})}}this._triangulationResults.push(x)}this._geoBoundingBox=[f,c]},_getRegionPolygonInfo:function(t){for(var i=this._triangulationResults[t-this._startIndex],l=0,f=0,c=0;c<i.length;c++)l+=i[c].points.length/3,f+=i[c].indices.length/3;var p=l*2+l*4,y=f*2+l*2;return{vertexCount:p,triangleCount:y}},_updatePolygonGeometry:function(t,i,l,f,c,p,y){var x=t.get("projectUVOnGround"),D=i.attributes.position,E=i.attributes.normal,N=i.attributes.texcoord0,$=i.attributes.color,_t=this._triangulationResults[l-this._startIndex],pt=$.value&&y,At=i.indices,Mt=this.extrudeY?1:2,Nt=this.extrudeY?2:1,kt=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],te=ji.mul([],this._geoBoundingBox[0],kt),qt=ji.mul([],this._geoBoundingBox[1],kt),jt=Math.max(qt[0]-te[0],qt[2]-te[2]);function fe(Qn,bi,pi){for(var gi=Qn.points,ds=gi.length,ei=[],pa=[],Ni=0;Ni<ds;Ni+=3)ei[0]=gi[Ni],ei[Mt]=bi,ei[Nt]=gi[Ni+2],pa[0]=(gi[Ni]*kt[0]-te[0])/jt,pa[1]=(gi[Ni+2]*kt[Nt]-te[2])/jt,D.set(c,ei),pt&&$.set(c,y),N.set(c++,pa)}function ue(Qn,bi,pi){var gi=c;fe(Qn,bi,pi);for(var ds=Qn.indices.length,ei=0;ei<ds;ei++)At[p*3+ei]=Qn.indices[ei]+gi;p+=Qn.indices.length/3}for(var Te=this.extrudeY?[0,1,0]:[0,0,1],xe=ji.negate([],Te),Ie=0;Ie<_t.length;Ie++){var je=c,Ve=_t[Ie];ue(Ve,0,0),ue(Ve,f,0);for(var Je=Ve.points.length/3,er=0;er<Je;er++)E.set(je+er,xe),E.set(je+er+Je,Te);for(var Xe=[0,3,1,1,3,2],ir=[[],[],[],[]],xr=[],Lr=[],ar=[],vn=[],br=0,er=0;er<Je;er++){for(var Cn=(er+1)%Je,dn=(Ve.points[Cn*3]-Ve.points[er*3])*kt[0],On=(Ve.points[Cn*3+2]-Ve.points[er*3+2])*kt[Nt],Zr=Math.sqrt(dn*dn+On*On),$r=0;$r<4;$r++){var ui=$r===0||$r===3,Wn=(ui?er:Cn)*3;ir[$r][0]=Ve.points[Wn],ir[$r][Mt]=$r>1?f:0,ir[$r][Nt]=Ve.points[Wn+2],D.set(c+$r,ir[$r]),x?(vn[0]=(Ve.points[Wn]*kt[0]-te[0])/jt,vn[1]=(Ve.points[Wn+2]*kt[Nt]-te[Nt])/jt):(vn[0]=(ui?br:br+Zr)/jt,vn[1]=(ir[$r][Mt]*kt[Mt]-te[Mt])/jt),N.set(c+$r,vn)}ji.sub(xr,ir[1],ir[0]),ji.sub(Lr,ir[3],ir[0]),ji.cross(ar,xr,Lr),ji.normalize(ar,ar);for(var $r=0;$r<4;$r++)E.set(c+$r,ar),pt&&$.set(c+$r,y);for(var $r=0;$r<6;$r++)At[p*3+$r]=Xe[$r]+c;c+=4,p+=2,br+=Zr}}return i.dirty(),{vertexOffset:c,triangleOffset:p}},_getRegionLinesInfo:function(t,i,l){var f=0,c=0,p=i.getRegionModel(t),y=p.getModel("itemStyle"),x=y.get("borderWidth");if(x>0){var D=i.getRegionPolygonCoords(t);D.forEach(function(E){var N=E.exterior,$=E.interiors;f+=l.getPolylineVertexCount(N),c+=l.getPolylineTriangleCount(N);for(var _t=0;_t<$.length;_t++)f+=l.getPolylineVertexCount($[_t]),c+=l.getPolylineTriangleCount($[_t])},this)}return{vertexCount:f,triangleCount:c}},_updateLinesGeometry:function(t,i,l,f,c,p){function y(E){for(var N=new Float64Array(E.length*3),$=0,_t=[],pt=0;pt<E.length;pt++)_t[0]=E[pt][0],_t[1]=f+.1,_t[2]=E[pt][1],p&&ji.transformMat4(_t,_t,p),N[$++]=_t[0],N[$++]=_t[1],N[$++]=_t[2];return N}var x=[1,1,1,1],D=i.getRegionPolygonCoords(l);D.forEach(function(E){var N=E.exterior,$=E.interiors;t.addPolyline(y(N),x,c);for(var _t=0;_t<$.length;_t++)t.addPolyline(y($[_t]),x,c)})},highlight:function(t){var i=this._data;if(i){var l=i.getItemModel(t),f=l.getModel(["emphasis","itemStyle"]),c=f.get("color"),p=Jr.firstNotNull(f.get("opacity"),si(i,t),1);if(c==null){var y=di(i,t);c=F.$_.lift(y,-.4)}p==null&&(p=si(i,t));var x=ae.parseColor(c);x[3]*=p,this._setColorOfDataIndex(i,t,x)}},downplay:function(t){var i=this._data;if(i){var l=i.getItemModel(t),f=Jr.firstNotNull(di(i,t),l.get(["itemStyle","color"]),"#fff"),c=Jr.firstNotNull(si(i,t),l.get(["itemStyle","opacity"]),1),p=ae.parseColor(f);p[3]*=c,this._setColorOfDataIndex(i,t,p)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,i,l){if(!(i<this._startIndex&&i>this._endIndex)){i-=this._startIndex;for(var f=this._vertexRangeOfDataIndex[i*2];f<this._vertexRangeOfDataIndex[i*2+1];f++)this._polygonMesh.geometry.attributes.color.set(f,l);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};var Zu=Gl,zl=F.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new Zu(i),this.groupGL=new ae.Node,this._lightRoot=new ae.Node,this._sceneHelper=new Is(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new Sl({zr:i.getZr()}),this._control.init()},render:function(t,i,l){this.groupGL.add(this._geo3DBuilder.rootNode);var f=t.coordinateSystem;if(!(!f||!f.viewGL)){f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var c=this._control;c.setViewGL(f.viewGL);var p=t.getModel("viewControl");c.setFromViewControlModel(p,0),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,i,l,0,t.getData().count());var y=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(x){x.material&&x.material[y]("fragment","SRGB_DECODE")}),c.off("update"),c.on("update",function(){l.dispatchAction({type:"geo3DChangeCamera",alpha:c.getAlpha(),beta:c.getBeta(),distance:c.getDistance(),center:c.getCenter(),from:this.uid,geo3DId:t.id})}),c.update()}},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}}),Wu=z(11815),Lv={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function hh(t,i){if(t==="world"){var l=Lv[i.name];if(l){var f=[l[0],l[1]];i.setCenter(f)}}}var Iv=mn.vec3,Us=mn.mat4,wg=[Wu.Z,hh];function ch(t,i,l,f,c){this.name=t,this.map=i,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(l,f,c),this.transform=Us.identity(new Float64Array(16)),this.invTransform=Us.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}ch.prototype={constructor:ch,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,i,l){var f=F.Nu||F.pQ;try{this.regions=t?f(t):[]}catch(E){throw`Invalid geoJson format
`+E}i=i||{},l=l||{};for(var c=this.regions,p={},y=0;y<c.length;y++){var x=c[y].name;x=l[x]||x,c[y].name=x,p[x]=c[y],this.addGeoCoord(x,c[y].getCenter());var D=i[x];D&&c[y].transformTo(D.left,D.top,D.width,D.height)}this._regionsMap=p,this._geoRect=null,wg.forEach(function(E){E(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,i=this.regions,l=0;l<i.length;l++){var f=i[l].getBoundingRect();t=t||f.clone(),t.union(f)}return this._geoRect=t||new F.Q.KC(0,0,0,0)},addGeoCoord:function(t,i){this._nameCoordMap[t]=i},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var i=this.regions,l=0;l<i.length;l++)if(i[l].contain(t))return i[l]},setSize:function(t,i,l){this.size=[t,i,l];var f=this.getGeoBoundingRect(),c=t/f.width,p=-l/f.height,y=-t/2-f.x*c,x=l/2-f.y*p,D=this.extrudeY?[y,0,x]:[y,x,0],E=this.extrudeY?[c,1,p]:[c,p,1],N=this.transform;Us.identity(N),Us.translate(N,N,D),Us.scale(N,N,E),Us.invert(this.invTransform,N)},dataToPoint:function(t,i){i=i||[];var l=this.extrudeY?1:2,f=this.extrudeY?2:1,c=t[2];return isNaN(c)&&(c=0),i[0]=t[0],i[f]=t[1],this.altitudeAxis?i[l]=this.altitudeAxis.dataToCoord(c):i[l]=0,i[l]+=this.regionHeight,Iv.transformMat4(i,i,this.transform),i},pointToData:function(t,i){}};var Rv=ch;function Ov(t,i){var l=t.getBoxLayoutParams(),f=(0,Ia.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var c=this.getGeoBoundingRect(),p=c.width/c.height*(t.get("aspectScale")||.75),y=t.get("boxWidth"),x=t.get("boxDepth"),D=t.get("boxHeight");D==null&&(D=5),isNaN(y)&&isNaN(x)&&(y=100),isNaN(x)?x=y/p:isNaN(y)&&(y=x/p),this.setSize(y,D,x),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(D-this.regionHeight,0))}function Ag(t,i){var l=[1/0,-1/0];if(t.eachSeries(function(c){if(c.coordinateSystem===this&&c.type!=="series.map3D"){var p=c.getData(),y=c.coordDimToDataDim("alt"),x=y&&y[0];if(x){var D=p.getDataExtent(x,!0);l[0]=Math.min(l[0],D[0]),l[1]=Math.max(l[1],D[1])}}},this),l&&isFinite(l[1]-l[0])){var f=F._y.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new F.RD("altitude",f),this.resize(this.model,i)}}if(!1)var py;var Nv=0,Bv={dimensions:Rv.prototype.dimensions,create:function(t,i){var l=[];if(!F.FU)throw new Error("geo3D component depends on geo component");function f(c,p){var y=Bv.createGeo3D(c);c.__viewGL=c.__viewGL||new mo,y.viewGL=c.__viewGL,c.coordinateSystem=y,y.model=c,l.push(y),y.resize=Ov,y.resize(c,i),y.update=Ag}return t.eachComponent("geo3D",function(c,p){f(c,p)}),t.eachSeriesByType("map3D",function(c,p){var y=c.get("coordinateSystem");y==null&&(y="geo3D"),y==="geo3D"&&f(c,p)}),t.eachSeries(function(c){if(c.get("coordinateSystem")==="geo3D"){if(c.type==="series.map3D")return;var p=c.getReferringComponents("geo3D").models[0];if(p||(p=t.getComponent("geo3D")),!p)throw new Error('geo "'+Jr.firstNotNull(c.get("geo3DIndex"),c.get("geo3DId"),0)+'" not found');c.coordinateSystem=p.coordinateSystem}}),l},createGeo3D:function(t){var i=t.get("map"),l;return typeof i=="string"?(l=i,i=F.FU(i)):i&&i.features&&(i={geoJson:i}),l==null&&(l="GEO_ANONYMOUS_"+Nv++),new Rv(l+Nv++,l,i&&i.geoJson,i&&i.specialAreas,t.get("nameMap"))}},Fv=Bv;function vh(t){t.registerComponentModel(yg),t.registerComponentView(zl),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"geo3D",query:i},function(f){f.setView(i)})}),t.registerCoordinateSystem("geo3D",Fv)}(0,F.D$)(vh);function Gv(t,i){t.id=t.id||t.name||i+""}var os=F.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){os.superApply(this,"init",arguments),F.D5.each(this.option.layers,function(t,i){F.D5.merge(t,this.defaultLayerOption),Gv(t,i)},this)},mergeOption:function(t){var i=this.option.layers;this.option.layers=null,os.superApply(this,"mergeOption",arguments);function l(y){return F.D5.reduce(y,function(x,D,E){return Gv(D,E),x[D.id]=D,x},{})}if(i&&i.length){var f=l(t.layers),c=l(i);for(var p in f)c[p]?F.D5.merge(c[p],f[p],!0):i.push(t.layers[p]);this.option.layers=i}F.D5.each(this.option.layers,function(y){F.D5.merge(y,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),i=this.get("displacementScale");return(!t||t==="none")&&(i=0),i},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),i=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==i,this._displacementTexture=t,this._displacementScale=i},isDisplacementChanged:function(){return this._displacementChanged}});F.D5.merge(os.prototype,Tu),F.D5.merge(os.prototype,Qo),F.D5.merge(os.prototype,vo),F.D5.merge(os.prototype,Gs);var zv=os,dh=Math.PI,va=Math.sin,Qa=Math.cos,Vv=Math.tan,Vl=Math.asin,kv=Math.atan2,$a=dh/180,Hu=1e3*60*60*24,Uv=2440588,kl=2451545;function Zv(t){return t.valueOf()/Hu-.5+Uv}function bg(t){return Zv(t)-kl}var Xu=$a*23.4397;function ph(t,i){return kv(va(t)*Qa(Xu)-Vv(i)*va(Xu),Qa(t))}function Mg(t,i){return Vl(va(i)*Qa(Xu)+Qa(i)*va(Xu)*va(t))}function Cg(t,i,l){return kv(va(t),Qa(t)*va(i)-Vv(l)*Qa(i))}function gh(t,i,l){return Vl(va(i)*va(l)+Qa(i)*Qa(l)*Qa(t))}function Wv(t,i){return $a*(280.16+360.9856235*t)-i}function mh(t){return $a*(357.5291+.98560028*t)}function Eg(t){var i=$a*(1.9148*va(t)+.02*va(2*t)+3e-4*va(3*t)),l=$a*102.9372;return t+i+l+dh}function Ul(t){var i=mh(t),l=Eg(i);return{dec:Mg(l,0),ra:ph(l,0)}}var Zs={};Zs.getPosition=function(t,i,l){var f=$a*-l,c=$a*i,p=bg(t),y=Ul(p),x=Wv(p,f)-y.ra;return{azimuth:Cg(x,c,y.dec),altitude:gh(x,c,y.dec)}};var Hv=Zs,yh=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;ae.Shader.import(Cs),ae.Shader.import(yh);var _h=F.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,i){this.groupGL=new ae.Node,this._sphereGeometry=new ae.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new ae.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new ae.PlaneGeometry,this._earthMesh=new ae.Mesh({renderNormal:!0}),this._atmosphereMesh=new ae.Mesh,this._atmosphereGeometry=new ae.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.atmosphere.vertex"),ae.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=ae.Mesh.CW,this._lightRoot=new ae.Node,this._sceneHelper=new Is,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new Sl({zr:i.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,i,l){var f=t.coordinateSystem,c=t.get("shading");f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL),this._sceneHelper.setScene(f.viewGL.scene),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._earthMesh;p.geometry=this._sphereGeometry;var y="ecgl."+c;(!p.material||p.material.shader.name!==y)&&(p.material=ae.createMaterial(y)),ae.setMaterialFromModel(c,p.material,t,l),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function($){var _t=p.material.get($);_t&&(_t.flipY=!1)}),p.material.set("color",ae.parseColor(t.get("baseColor")));var x=f.radius*.99;if(p.scale.set(x,x,x),t.get("atmosphere.show")){p.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),p.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var D=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(x+D,x+D,x+D)}else p.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var E=p.material.setTextureImage("diffuseMap",t.get("baseTexture"),l,{flipY:!1,anisotropic:8});E&&E.surface&&E.surface.attachToMesh(p);var N=p.material.setTextureImage("bumpMap",t.get("heightTexture"),l,{flipY:!1,anisotropic:8});N&&N.surface&&N.surface.attachToMesh(p),p.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,l),this._displaceVertices(t,l),this._updateViewControl(t,l),this._updateLayers(t,l)},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},_updateLayers:function(t,i){var l=t.coordinateSystem,f=t.get("layers"),c=l.radius,p=[],y=[],x=[],D=[];F.D5.each(f,function(pt){var At=new F.Hn(pt),Mt=At.get("type"),Nt=ae.loadTexture(At.get("texture"),i,{flipY:!1,anisotropic:8});if(Nt.surface&&Nt.surface.attachToMesh(this._earthMesh),Mt==="blend"){var kt=At.get("blendTo"),te=Jr.firstNotNull(At.get("intensity"),1);kt==="emission"?(x.push(Nt),D.push(te)):(p.push(Nt),y.push(te))}else{var qt=At.get("id"),jt=this._layerMeshes[qt];jt||(jt=this._layerMeshes[qt]=new ae.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var fe=At.get("shading");fe==="lambert"?(jt.material=jt.__lambertMaterial||new ae.Material({autoUpdateTextureStatus:!1,shader:ae.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),jt.__lambertMaterial=jt.material):(jt.material=jt.__colorMaterial||new ae.Material({autoUpdateTextureStatus:!1,shader:ae.createShader("ecgl.color"),transparent:!0,depthMask:!1}),jt.__colorMaterial=jt.material),jt.material.enableTexture("diffuseMap");var ue=At.get("distance"),Te=c+(ue==null?l.radius/100:ue);jt.scale.set(Te,Te,Te),c=Te;var xe=this._blankTexture||(this._blankTexture=ae.createBlankTexture("rgba(255, 255, 255, 0)"));jt.material.set("diffuseMap",xe),ae.loadTexture(At.get("texture"),i,{flipY:!1,anisotropic:8},function(Ie){Ie.surface&&Ie.surface.attachToMesh(jt),jt.material.set("diffuseMap",Ie),i.getZr().refresh()}),At.get("show")?this.groupGL.add(jt):this.groupGL.remove(jt)}},this);var E=this._earthMesh.material;E.define("fragment","LAYER_DIFFUSEMAP_COUNT",p.length),E.define("fragment","LAYER_EMISSIVEMAP_COUNT",x.length),E.set("layerDiffuseMap",p),E.set("layerDiffuseIntensity",y),E.set("layerEmissiveMap",x),E.set("layerEmissionIntensity",D);var N=t.getModel("debug.wireframe");if(N.get("show")){E.define("both","WIREFRAME_TRIANGLE");var $=ae.parseColor(N.get("lineStyle.color")||"rgba(0,0,0,0.5)"),_t=Jr.firstNotNull(N.get("lineStyle.width"),1);E.set("wireframeLineWidth",_t),E.set("wireframeLineColor",$)}else E.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,i){var l=t.coordinateSystem,f=t.getModel("viewControl"),c=l.viewGL.camera,p=this;function y(){return{type:"globeChangeCamera",alpha:x.getAlpha(),beta:x.getBeta(),distance:x.getDistance()-l.radius,center:x.getCenter(),from:p.uid,globeId:t.id}}var x=this._control;x.setViewGL(l.viewGL);var D=f.get("targetCoord"),E,N;D!=null&&(N=D[0]+90,E=D[1]),x.setFromViewControlModel(f,{baseDistance:l.radius,alpha:E,beta:N}),x.off("update"),x.on("update",function(){i.dispatchAction(y())})},_displaceVertices:function(t,i){var l=t.get("displacementQuality"),f=t.get("debug.wireframe.show"),c=t.coordinateSystem;if(!(!t.isDisplacementChanged()&&l===this._displacementQuality&&f===this._showDebugWireframe)){this._displacementQuality=l,this._showDebugWireframe=f;var p=this._sphereGeometry,y={low:100,medium:200,high:400,ultra:800}[l]||200,x=y/2;(p.widthSegments!==y||f)&&(p.widthSegments=y,p.heightSegments=x,p.build()),this._doDisplaceVertices(p,c),f&&p.generateBarycentric()}},_doDisplaceVertices:function(t,i){var l=t.attributes.position.value,f=t.attributes.texcoord0.value,c=t.__originalPosition;(!c||c.length!==l.length)&&(c=new Float32Array(l.length),c.set(l),t.__originalPosition=c);for(var p=i.displacementWidth,y=i.displacementHeight,x=i.displacementData,D=0;D<t.vertexCount;D++){var E=D*3,N=D*2,$=c[E+1],_t=c[E+2],pt=c[E+3],At=f[N++],Mt=f[N++],Nt=Math.round(At*(p-1)),kt=Math.round(Mt*(y-1)),te=kt*p+Nt,qt=x?x[te]:0;l[E+1]=$+$*qt,l[E+2]=_t+_t*qt,l[E+3]=pt+pt*qt}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,i){var l=this._earthMesh;this._sceneHelper.updateLight(t);var f=this._sceneHelper.mainLight,c=t.get("light.main.time")||new Date,p=Hv.getPosition(F.Rx.parseDate(c),0,0),y=Math.cos(p.altitude);f.position.y=-y*Math.cos(p.azimuth),f.position.x=Math.sin(p.altitude),f.position.z=y*Math.sin(p.azimuth),f.lookAt(l.getWorldPosition())},dispose:function(t,i){this.groupGL.removeAll(),this._control.dispose()}}),Pg=mn.vec3;function Ku(t){this.radius=t,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}Ku.prototype={constructor:Ku,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},_getDisplacementScale:function(t,i){var l=(t+180)/360*(this.displacementWidth-1),f=(90-i)/180*(this.displacementHeight-1),c=Math.round(l)+Math.round(f)*this.displacementWidth;return this.displacementData[c]},dataToPoint:function(t,i){var l=t[0],f=t[1],c=t[2]||0,p=this.radius;this.displacementData&&(p*=1+this._getDisplacementScale(l,f)),this.altitudeAxis&&(p+=this.altitudeAxis.dataToCoord(c)),l=l*Math.PI/180,f=f*Math.PI/180;var y=Math.cos(f)*p;return i=i||[],i[0]=-y*Math.cos(l+Math.PI),i[1]=Math.sin(f)*p,i[2]=y*Math.sin(l+Math.PI),i},pointToData:function(t,i){var l=t[0],f=t[1],c=t[2],p=Pg.len(t);l/=p,f/=p,c/=p;var y=Math.asin(f),x=Math.atan2(c,-l);x<0&&(x=Math.PI*2+x);var D=y*180/Math.PI,E=x*180/Math.PI-180;return i=i||[],i[0]=E,i[1]=D,i[2]=p-this.radius,this.altitudeAxis&&(i[2]=this.altitudeAxis.coordToData(i[2])),i}};var Xv=Ku;function Ws(t,i){var l=document.createElement("canvas"),f=l.getContext("2d"),c=t.width,p=t.height;l.width=c,l.height=p,f.drawImage(t,0,0,c,p);for(var y=f.getImageData(0,0,c,p).data,x=new Float32Array(y.length/4),D=0;D<y.length/4;D++){var E=y[D*4];x[D]=E/255*i}return{data:x,width:c,height:p}}function Lg(t,i){var l=t.getBoxLayoutParams(),f=(0,Ia.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio()),this.radius=t.get("globeRadius");var c=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,c-this.radius)}function Ig(t,i){var l=[1/0,-1/0];if(t.eachSeries(function(c){if(c.coordinateSystem===this){var p=c.getData(),y=c.coordDimToDataDim("alt"),x=y&&y[0];if(x){var D=p.getDataExtent(x,!0);l[0]=Math.min(l[0],D[0]),l[1]=Math.max(l[1],D[1])}}},this),l&&isFinite(l[1]-l[0])){var f=F._y.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new F.RD("altitude",f),this.resize(this.model,i)}}var Rg={dimensions:Xv.prototype.dimensions,create:function(t,i){var l=[];return t.eachComponent("globe",function(f){f.__viewGL=f.__viewGL||new mo;var c=new Xv;c.viewGL=f.__viewGL,f.coordinateSystem=c,c.model=f,l.push(c),c.resize=Lg,c.resize(f,i),c.update=Ig}),t.eachSeries(function(f){if(f.get("coordinateSystem")==="globe"){var c=f.getReferringComponents("globe").models[0];if(c||(c=t.getComponent("globe")),!c)throw new Error('globe "'+Jr.firstNotNull(f.get("globe3DIndex"),f.get("globe3DId"),0)+'" not found');var p=c.coordinateSystem;f.coordinateSystem=p}}),t.eachComponent("globe",function(f,c){var p=f.coordinateSystem,y=f.getDisplacementTexture(),x=f.getDisplacemenScale();if(f.isDisplacementChanged()){if(f.hasDisplacement()){var D=!0;ae.loadTexture(y,i,function(E){var N=E.image,$=Ws(N,x);f.setDisplacementData($.data,$.width,$.height),D||i.dispatchAction({type:"globeUpdateDisplacment"})}),D=!1}else p.setDisplacementData(null,0,0);p.setDisplacementData(f.displacementData,f.displacementWidth,f.displacementHeight)}}),l}},Og=Rg;function Kv(t){t.registerComponentModel(zv),t.registerComponentView(_h),t.registerCoordinateSystem("globe",Og),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"globe",query:i},function(f){f.setView(i)})}),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(i,l){})}(0,F.D$)(Kv);var Yu=["zoom","center","pitch","bearing"],ju=F.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return Yu.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMapboxCameraOption:function(t){t!=null&&Yu.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});F.D5.merge(ju.prototype,Qo),F.D5.merge(ju.prototype,vo);var gy=ju;function Ra(t,i){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Ra.prototype.setUnpainted=function(){},Ra.prototype.resize=function(){this._mapbox.resize()},Ra.prototype.getMapbox=function(){return this._mapbox},Ra.prototype.clear=function(){},Ra.prototype.refresh=function(){this._mapbox.resize()};var Yv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Ra.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},Yv.forEach(function(i){this._handlers[i]=function(l){var f={};for(var c in l)f[c]=l[c];f.bubbles=!1;var p=new l.constructor(l.type,f);t.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Ra.prototype.dispose=function(){Yv.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this)};var Ng=Ra,Ju=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;ae.Shader.import(Ju);var Bg=512,jv=F.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(t,i){var l=i.getZr();this._zrLayer=new Ng("mapbox3D",l),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ae.Node,this._sceneHelper=new Is(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMapbox(),c=this._dispatchInteractAction.bind(this,i,f);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(p){f.on(p,c)}),this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.displayShadow.vertex"),fragment:ae.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,i,l){var f=this._zrLayer.getMapbox(),c=t.get("style"),p=JSON.stringify(c);p!==this._oldStyleStr&&c&&f.setStyle(c),this._oldStyleStr=p,f.setCenter(t.get("center")),f.setZoom(t.get("zoom")),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMapbox(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:i.getPitch(),zoom:i.getZoom(),center:i.getCenter().toArray(),bearing:i.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new ae.Plane(new ae.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new ae.Vector2(-1,-1)),c=t.viewGL.camera.castRay(new ae.Vector2(1,1)),p=f.intersectPlane(l),y=c.intersectPlane(l),x=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(x,x,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}}),To=mn.mat4,ss=512,xh=.6435011087932844,Ri=Math.PI,Hs=1/10;function Sh(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}Sh.prototype={constructor:Sh,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,ss)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var t=.5/Math.tan(xh/2)*this.height*Hs,i=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,l=xh/2,f=Math.PI/2+i,c=Math.sin(l)*t/Math.sin(Math.PI-f-l),p=Math.cos(Math.PI/2-i)*c+t,y=p*1.1;this.pitch>50&&(y=1e3);var x=[];To.perspective(x,xh,this.width/this.height,1,y),this.viewGL.camera.projectionMatrix.setArray(x),this.viewGL.camera.decomposeProjectionMatrix();var x=To.identity([]),D=this.dataToPoint(this.center);To.scale(x,x,[1,-1,1]),To.translate(x,x,[0,0,-t]),To.rotateX(x,x,i),To.rotateZ(x,x,-this.bearing/180*Math.PI),To.translate(x,x,[-D[0]*this.getScale()*Hs,-D[1]*this.getScale()*Hs,0]),this.viewGL.camera.viewMatrix.array=x;var E=[];To.invert(E,x),this.viewGL.camera.worldTransform.array=E,this.viewGL.camera.decomposeWorldTransform();var N=ss*this.getScale(),$;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var _t=this.altitudeExtent[1]-this.altitudeExtent[0];$=this.boxHeight/_t*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else $=N/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*Hs;this.viewGL.rootNode.scale.set(this.getScale()*Hs,this.getScale()*Hs,$)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,i){return this.projectOnTileWithScale(t,this.getScale()*ss,i)},projectOnTileWithScale:function(t,i,l){var f=t[0],c=t[1],p=f*Ri/180,y=c*Ri/180,x=i*(p+Ri)/(2*Ri),D=i*(Ri-Math.log(Math.tan(Ri/4+y*.5)))/(2*Ri);return l=l||[],l[0]=x,l[1]=D,l},unprojectFromTile:function(t,i){return this.unprojectOnTileWithScale(t,this.getScale()*ss,i)},unprojectOnTileWithScale:function(t,i,l){var f=t[0],c=t[1],p=f/i*(2*Ri)-Ri,y=2*(Math.atan(Math.exp(Ri-c/i*(2*Ri)))-Ri/4);return l=l||[],l[0]=p*180/Ri,l[1]=y*180/Ri,l},dataToPoint:function(t,i){return i=this.projectOnTileWithScale(t,ss,i),i[0]-=this._origin[0],i[1]-=this._origin[1],i[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(i[2]=t[2],this.altitudeExtent&&(i[2]-=this.altitudeExtent[0])),i}};var Zl=Sh;function Xs(){Zl.apply(this,arguments)}Xs.prototype=new Zl,Xs.prototype.constructor=Xs,Xs.prototype.type="mapbox3D";var Th=Xs;function Qu(t,i,l){function f(p,y){var x=y.getWidth(),D=y.getHeight(),E=y.getDevicePixelRatio();this.viewGL.setViewport(0,0,x,D,E),this.width=x,this.height=D,this.altitudeScale=p.get("altitudeScale"),this.boxHeight=p.get("boxHeight")}function c(p,y){if(this.model.get("boxHeight")!=="auto"){var x=[1/0,-1/0];p.eachSeries(function(D){if(D.coordinateSystem===this){var E=D.getData(),N=D.coordDimToDataDim("alt")[0];if(N){var $=E.getDataExtent(N,!0);x[0]=Math.min(x[0],$[0]),x[1]=Math.max(x[1],$[1])}}},this),x&&isFinite(x[1]-x[0])&&(this.altitudeExtent=x)}}return{dimensions:i.prototype.dimensions,create:function(p,y){var x=[];return p.eachComponent(t,function(D){var E=D.__viewGL;E||(E=D.__viewGL=new mo,E.setRootNode(new ae.Node));var N=new i;N.viewGL=D.__viewGL,N.resize=f,N.resize(D,y),x.push(N),D.coordinateSystem=N,N.model=D,N.update=c}),p.eachSeries(function(D){if(D.get("coordinateSystem")===t){var E=D.getReferringComponents(t).models[0];if(E||(E=p.getComponent(t)),!E)throw new Error(t+' "'+Jr.firstNotNull(D.get(t+"Index"),D.get(t+"Id"),0)+'" not found');D.coordinateSystem=E.coordinateSystem}}),l&&l(x,p,y),x}}}var Dh=Qu("mapbox3D",Th,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMapboxCameraOption())})}),wh=Dh;function Ah(t){t.registerComponentModel(gy),t.registerComponentView(jv),t.registerCoordinateSystem("mapbox3D",wh),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(i,l){l.eachComponent({mainType:"mapbox3D",query:i},function(f){f.setMapboxCameraOption(i)})})}(0,F.D$)(Ah);var ls=["zoom","center","pitch","bearing"],Wl=F.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return ls.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMaptalksCameraOption:function(t){t!=null&&ls.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});F.D5.merge(Wl.prototype,Qo),F.D5.merge(Wl.prototype,vo);var Jv=Wl;function qa(t,i,l,f){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:l,zoom:f,doubleClickZoom:!1,fog:!1}),this._initEvents()}qa.prototype.setUnpainted=function(){},qa.prototype.resize=function(){this._maptalks.checkSize()},qa.prototype.getMaptalks=function(){return this._maptalks},qa.prototype.clear=function(){},qa.prototype.refresh=function(){this._maptalks.checkSize()};var $u=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];qa.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},$u.forEach(function(i){this._handlers[i]=function(l){var f={};for(var c in l)f[c]=l[c];f.bubbles=!1;var p=new l.constructor(l.type,f);i==="mousewheel"||i==="DOMMouseScroll"?t.dispatchEvent(p):t.firstElementChild.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},qa.prototype.dispose=function(){$u.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this),this._maptalks.remove()};var Qv=qa;ae.Shader.import(Ju);var Fg=F.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(t,i){this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.displayShadow.vertex"),fragment:ae.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,i){var l=i.getZr();this._zrLayer=new Qv("maptalks3D",l,t.get("center"),t.get("zoom")),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ae.Node,this._sceneHelper=new Is(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMaptalks(),c=this._dispatchInteractAction.bind(this,i,f);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(p){f.on(p,c)})},render:function(t,i,l){this._zrLayer||this._initMaptalksLayer(t,l);var f=this._zrLayer.getMaptalks(),c=t.get("urlTemplate"),p=f.getBaseLayer();c!==this._oldUrlTemplate&&(p?p.setOptions({urlTemplate:c,attribution:t.get("attribution")}):(p=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:c,subdomains:["a","b","c"],attribution:t.get("attribution")}),f.setBaseLayer(p))),this._oldUrlTemplate=c,f.setCenter(t.get("center")),f.setZoom(t.get("zoom"),{animation:!1}),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMaptalks(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:i.getPitch(),zoom:zg(i.getResolution())+1,center:i.getCenter().toArray(),bearing:i.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new ae.Plane(new ae.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new ae.Vector2(-1,-1)),c=t.viewGL.camera.castRay(new ae.Vector2(1,1)),p=f.intersectPlane(l),y=c.intersectPlane(l),x=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(x,x,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}});const Gg=2*6378137*Math.PI/(256*Math.pow(2,20));function zg(t){return 19-Math.log(t/Gg)/Math.LN2}function Ks(){Zl.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Ks.prototype=new Zl,Ks.prototype.constructor=Ks,Ks.prototype.type="maptalks3D";var $v=Ks,Vg=Qu("maptalks3D",$v,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMaptalksCameraOption())})}),kg=Vg;function Ug(t){t.registerComponentModel(Jv),t.registerComponentView(Fg),t.registerCoordinateSystem("maptalks3D",kg),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(i,l){l.eachComponent({mainType:"maptalks3D",query:i},function(f){f.setMaptalksCameraOption(i)})})}(0,F.D$)(Ug);var Zg=mn.vec3,Wg=F._y.dataStack.isDimensionStacked;function Hg(t){var i=t[0],l=t[1];return!(i>0&&l>0||i<0&&l<0)}function Xg(t,i){var l=t.getData(),f=t.get("barSize");if(f==null){var c=i.size,p,y,x=i.getAxis("x"),D=i.getAxis("y");x.type==="category"?p=x.getBandWidth()*.7:p=Math.round(c[0]/Math.sqrt(l.count()))*.6,D.type==="category"?y=D.getBandWidth()*.7:y=Math.round(c[1]/Math.sqrt(l.count()))*.6,f=[p,y]}else F.D5.isArray(f)||(f=[f,f]);var E=i.getAxis("z").scale.getExtent(),N=Hg(E),$=["x","y","z"].map(function(At){return t.coordDimToDataDim(At)[0]}),_t=Wg(l,$[2]),pt=_t?l.getCalculationInfo("stackResultDimension"):$[2];l.each($,function(At,Mt,Nt,kt){var te=l.get(pt,kt),qt=_t?te-Nt:N?0:E[0],jt=i.dataToPoint([At,Mt,qt]),fe=i.dataToPoint([At,Mt,te]),ue=Zg.dist(jt,fe),Te=[0,fe[1]<jt[1]?-1:1,0];Math.abs(ue)===0&&(ue=.1);var xe=[f[0],ue,f[1]];l.setItemLayout(kt,[jt,Te,xe])}),l.setLayout("orient",[1,0,0])}var Kg=Xg;function bh(t,i,l){for(var f=t.getDataExtent(i),c=t.getDataExtent(l),p=f[1]-f[0]||f[0],y=c[1]-c[0]||c[0],x=50,D=new Uint8Array(x*x),E=0;E<t.count();E++){var N=t.get(i,E),$=t.get(l,E),_t=Math.floor((N-f[0])/p*(x-1)),pt=Math.floor(($-c[0])/y*(x-1)),At=pt*x+_t;D[At]=D[At]||1}for(var Mt=0,E=0;E<D.length;E++)D[E]&&Mt++;return Mt/D.length}var Hl=mn.vec3,Yg=F._y.dataStack.isDimensionStacked;function jg(t,i){var l=t.getData(),f=t.get("minHeight")||0,c=t.get("barSize"),p=["lng","lat","alt"].map(function(E){return t.coordDimToDataDim(E)[0]});if(c==null){var y=i.radius*Math.PI,x=bh(l,p[0],p[1]);c=[y/Math.sqrt(l.count()/x),y/Math.sqrt(l.count()/x)]}else F.D5.isArray(c)||(c=[c,c]);var D=Mh(l,p);l.each(p,function(E,N,$,_t){var pt=l.get(D.dimension,_t),At=D.isStacked?pt-$:i.altitudeAxis.scale.getExtent()[0],Mt=Math.max(i.altitudeAxis.dataToCoord($),f),Nt=i.dataToPoint([E,N,At]),kt=i.dataToPoint([E,N,pt]),te=Hl.sub([],kt,Nt);Hl.normalize(te,te);var qt=[c[0],Mt,c[1]];l.setItemLayout(_t,[Nt,te,qt])}),l.setLayout("orient",sr.UP.array)}function Jg(t,i){var l=t.getData(),f=t.get("barSize"),c=t.get("minHeight")||0,p=["lng","lat","alt"].map(function(N){return t.coordDimToDataDim(N)[0]});if(f==null){var y=Math.min(i.size[0],i.size[2]),x=bh(l,p[0],p[1]);f=[y/Math.sqrt(l.count()/x),y/Math.sqrt(l.count()/x)]}else F.D5.isArray(f)||(f=[f,f]);var D=[0,1,0],E=Mh(l,p);l.each(p,function(N,$,_t,pt){var At=l.get(E.dimension,pt),Mt=E.isStacked?At-_t:i.altitudeAxis.scale.getExtent()[0],Nt=Math.max(i.altitudeAxis.dataToCoord(_t),c),kt=i.dataToPoint([N,$,Mt]),te=[f[0],Nt,f[1]];l.setItemLayout(pt,[kt,D,te])}),l.setLayout("orient",[1,0,0])}function Qg(t,i){var l=t.getData(),f=t.coordDimToDataDim("lng")[0],c=t.coordDimToDataDim("lat")[0],p=t.coordDimToDataDim("alt")[0],y=t.get("barSize"),x=t.get("minHeight")||0;if(y==null){var D=l.getDataExtent(f),E=l.getDataExtent(c),N=i.dataToPoint([D[0],E[0]]),$=i.dataToPoint([D[1],E[1]]),_t=Math.min(Math.abs(N[0]-$[0]),Math.abs(N[1]-$[1]))||1,pt=bh(l,f,c);y=[_t/Math.sqrt(l.count()/pt),_t/Math.sqrt(l.count()/pt)]}else F.D5.isArray(y)||(y=[y,y]),y[0]/=i.getScale()/16,y[1]/=i.getScale()/16;var At=[0,0,1],Mt=[f,c,p],Nt=Mh(l,Mt);l.each(Mt,function(kt,te,qt,jt){var fe=l.get(Nt.dimension,jt),ue=Nt.isStacked?fe-qt:0,Te=i.dataToPoint([kt,te,ue]),xe=i.dataToPoint([kt,te,fe]),Ie=Math.max(xe[2]-Te[2],x),je=[y[0],Ie,y[1]];l.setItemLayout(jt,[Te,At,je])}),l.setLayout("orient",[1,0,0])}function Mh(t,i){var l=Yg(t,i[2]);return{dimension:l?t.getCalculationInfo("stackResultDimension"):i[2],isStacked:l}}function $g(t){t.registerLayout(function(i,l){i.eachSeriesByType("bar3D",function(f){var c=f.coordinateSystem,p=c&&c.type;p==="globe"?jg(f,c):p==="cartesian3D"?Kg(f,c):p==="geo3D"?Jg(f,c):(p==="mapbox3D"||p==="maptalks3D")&&Qg(f,c)})})}var Ch={};Ch.getFormattedLabel=function(t,i,l,f,c){l=l||"normal";var p=t.getData(f),y=p.getItemModel(i),x=t.getDataParams(i,f);c!=null&&x.value instanceof Array&&(x.value=x.value[c]);var D=y.get(l==="normal"?["label","formatter"]:["emphasis","label","formatter"]);D==null&&(D=y.get(["label","formatter"]));var E;return typeof D=="function"?(x.status=l,E=D(x)):typeof D=="string"&&(E=F.WU.formatTpl(D,x)),E},Ch.normalizeToArray=function(t){return t instanceof Array?t:t==null?[]:[t]};var Ys=Ch;function qg(t,i){var l=[];return F.D5.each(t.dimensions,function(f){var c=t.getDimensionInfo(f),p=c.otherDims,y=p[i];y!=null&&y!==!1&&(l[y]=c.name)}),l}function Xl(t,i,l){function f($){var _t=!0,pt=[],At=qg(c,"tooltip");At.length?F.D5.each(At,function(Nt){Mt(c.get(Nt,i),Nt)}):F.D5.each($,Mt);function Mt(Nt,kt){var te=c.getDimensionInfo(kt);if(!(!te||te.otherDims.tooltip===!1)){var qt=te.type,jt=(_t?"- "+(te.tooltipName||te.name)+": ":"")+(qt==="ordinal"?Nt+"":qt==="time"?l?"":F.WU.formatTime("yyyy/MM/dd hh:mm:ss",Nt):F.WU.addCommas(Nt));jt&&pt.push(F.WU.encodeHTML(jt))}}return(_t?"<br/>":"")+pt.join(_t?"<br/>":", ")}var c=t.getData(),p=t.getRawValue(i),y=F.D5.isArray(p)?f(p):F.WU.encodeHTML(F.WU.addCommas(p)),x=c.getName(i),D=di(c,i);F.D5.isObject(D)&&D.colorStops&&(D=(D.colorStops[0]||{}).color),D=D||"transparent";var E=F.WU.getTooltipMarker(D),N=t.name;return N==="\0-"&&(N=""),N=N?F.WU.encodeHTML(N)+(l?": ":"<br/>"):"",l?E+N+y:N+E+(x?F.WU.encodeHTML(x)+": "+y:y)}function qu(t,i,l){l=l||t.getSource();var f=i||F.wL(t.get("coordinateSystem"))||["x","y","z"],c=F._y.createDimensions(l,{dimensionsDefine:l.dimensionsDefine||t.get("dimensions"),encodeDefine:l.encodeDefine||t.get("encode"),coordDimensions:f.map(function(x){var D=t.getReferringComponents(x+"Axis3D").models[0];return{type:D&&D.get("type")==="category"?"ordinal":"float",name:x}})});t.get("coordinateSystem")==="cartesian3D"&&c.forEach(function(x){if(f.indexOf(x.coordDim)>=0){var D=t.getReferringComponents(x.coordDim+"Axis3D").models[0];D&&D.get("type")==="category"&&(x.ordinalMeta=D.getOrdinalMeta())}});var p=F._y.dataStack.enableDataStack(t,c,{byIndex:!0,stackedCoordDimension:"z"}),y=new F.aV(c,t);return y.setCalculationInfo(p),y.initData(l),y}var qv=F.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,i){return qu(this)},getFormattedLabel:function(t,i,l,f){var c=Ys.getFormattedLabel(this,t,i,l,f);return c==null&&(c=this.getData().get("z",t)),c},formatTooltip:function(t){return Xl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});F.D5.merge(qv.prototype,Gs);var t0=qv,Zn=mn.vec3,e0=mn.mat3,Eh=Qr.extend(function(){return{attributes:{position:new Qr.Attribute("position","float",3,"POSITION"),normal:new Qr.Attribute("normal","float",3,"NORMAL"),color:new Qr.Attribute("color","float",4,"COLOR"),prevPosition:new Qr.Attribute("prevPosition","float",3),prevNormal:new Qr.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var i=this.enableNormal,l=this.getBarVertexCount()*t,f=this.getBarTriangleCount()*t;this.vertexCount!==l&&(this.attributes.position.init(l),i?this.attributes.normal.init(l):this.attributes.normal.value=null,this.attributes.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3),this._dataIndices=new Uint32Array(l))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return(t+1)*4*(t+1)*2},_getBevelBarTriangleCount:function(t){var i=t*4+3,l=t*2+1;return(i+1)*l*2+4},setColor:function(t,i){for(var l=this.getBarVertexCount(),f=l*t,c=l*(t+1),p=f;p<c;p++)this.attributes.color.set(p,i);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=Zn.create,i=Zn.scaleAndAdd,l=t(),f=t(),c=t(),p=t(),y=t(),x=t(),D=t(),E=[],N=[],$=0;$<8;$++)E[$]=t();for(var _t=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],pt=[0,1,2,0,2,3],At=[],$=0;$<_t.length;$++)for(var Mt=_t[$],Nt=0;Nt<2;Nt++){for(var kt=[],te=0;te<3;te++)kt.push(Mt[pt[Nt*3+te]]);At.push(kt)}return function(qt,jt,fe,ue,Te,xe){var Ie=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(qt,jt,fe,ue,this.bevelSize,this.bevelSegments,Te);else{Zn.copy(c,jt),Zn.normalize(c,c),Zn.cross(p,fe,c),Zn.normalize(p,p),Zn.cross(f,c,p),Zn.normalize(p,p),Zn.negate(y,f),Zn.negate(x,c),Zn.negate(D,p),i(E[0],qt,f,ue[0]/2),i(E[0],E[0],p,ue[2]/2),i(E[1],qt,f,ue[0]/2),i(E[1],E[1],D,ue[2]/2),i(E[2],qt,y,ue[0]/2),i(E[2],E[2],D,ue[2]/2),i(E[3],qt,y,ue[0]/2),i(E[3],E[3],p,ue[2]/2),i(l,qt,c,ue[1]),i(E[4],l,f,ue[0]/2),i(E[4],E[4],p,ue[2]/2),i(E[5],l,f,ue[0]/2),i(E[5],E[5],D,ue[2]/2),i(E[6],l,y,ue[0]/2),i(E[6],E[6],D,ue[2]/2),i(E[7],l,y,ue[0]/2),i(E[7],E[7],p,ue[2]/2);var je=this.attributes;if(this.enableNormal){N[0]=f,N[1]=y,N[2]=c,N[3]=x,N[4]=p,N[5]=D;for(var Ve=this._vertexOffset,Je=0;Je<_t.length;Je++){for(var er=this._triangleOffset*3,Xe=0;Xe<6;Xe++)this.indices[er++]=Ve+pt[Xe];Ve+=4,this._triangleOffset+=2}for(var Je=0;Je<_t.length;Je++)for(var ir=N[Je],Xe=0;Xe<4;Xe++){var xr=_t[Je][Xe];je.position.set(this._vertexOffset,E[xr]),je.normal.set(this._vertexOffset,ir),je.color.set(this._vertexOffset++,Te)}}else{for(var Je=0;Je<At.length;Je++){for(var er=this._triangleOffset*3,Xe=0;Xe<3;Xe++)this.indices[er+Xe]=At[Je][Xe]+this._vertexOffset;this._triangleOffset++}for(var Je=0;Je<E.length;Je++)je.position.set(this._vertexOffset,E[Je]),je.color.set(this._vertexOffset++,Te)}}for(var Lr=this._vertexOffset,Je=Ie;Je<Lr;Je++)this._dataIndices[Je]=xe}}(),_addBevelBar:function(){var t=Zn.create(),i=Zn.create(),l=Zn.create(),f=e0.create(),c=[],p=[1,-1,-1,1],y=[1,1,-1,-1],x=[2,0];return function(D,E,N,$,_t,pt,At){Zn.copy(i,E),Zn.normalize(i,i),Zn.cross(l,N,i),Zn.normalize(l,l),Zn.cross(t,i,l),Zn.normalize(l,l),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=i[0],f[4]=i[1],f[5]=i[2],f[6]=l[0],f[7]=l[1],f[8]=l[2],_t=Math.min($[0],$[2])/2*_t;for(var Mt=0;Mt<3;Mt++)c[Mt]=Math.max($[Mt]-_t*2,0);for(var Nt=($[0]-c[0])/2,kt=($[1]-c[1])/2,te=($[2]-c[2])/2,qt=[],jt=[],fe=this._vertexOffset,ue=[],Mt=0;Mt<2;Mt++){ue[Mt]=ue[Mt]=[];for(var Te=0;Te<=pt;Te++)for(var xe=0;xe<4;xe++){(Te===0&&Mt===0||Mt===1&&Te===pt)&&ue[Mt].push(fe);for(var Ie=0;Ie<=pt;Ie++){var je=Ie/pt*Math.PI/2+Math.PI/2*xe,Ve=Te/pt*Math.PI/2+Math.PI/2*Mt;jt[0]=Nt*Math.cos(je)*Math.sin(Ve),jt[1]=kt*Math.cos(Ve),jt[2]=te*Math.sin(je)*Math.sin(Ve),qt[0]=jt[0]+p[xe]*c[0]/2,qt[1]=jt[1]+kt+x[Mt]*c[1]/2,qt[2]=jt[2]+y[xe]*c[2]/2,Math.abs(Nt-kt)<1e-6&&Math.abs(kt-te)<1e-6||(jt[0]/=Nt*Nt,jt[1]/=kt*kt,jt[2]/=te*te),Zn.normalize(jt,jt),Zn.transformMat3(qt,qt,f),Zn.transformMat3(jt,jt,f),Zn.add(qt,qt,D),this.attributes.position.set(fe,qt),this.enableNormal&&this.attributes.normal.set(fe,jt),this.attributes.color.set(fe,At),fe++}}}for(var Je=pt*4+3,er=pt*2+1,Xe=Je+1,xe=0;xe<er;xe++)for(var Mt=0;Mt<=Je;Mt++){var ir=xe*Xe+Mt+this._vertexOffset,xr=xe*Xe+(Mt+1)%Xe+this._vertexOffset,Lr=(xe+1)*Xe+(Mt+1)%Xe+this._vertexOffset,ar=(xe+1)*Xe+Mt+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[Lr,ir,xr]),this.setTriangleIndices(this._triangleOffset++,[Lr,ar,ir])}this.setTriangleIndices(this._triangleOffset++,[ue[0][0],ue[0][2],ue[0][1]]),this.setTriangleIndices(this._triangleOffset++,[ue[0][0],ue[0][3],ue[0][2]]),this.setTriangleIndices(this._triangleOffset++,[ue[1][0],ue[1][1],ue[1][2]]),this.setTriangleIndices(this._triangleOffset++,[ue[1][0],ue[1][2],ue[1][3]]),this._vertexOffset=fe}}()});F.D5.defaults(Eh.prototype,Ii),F.D5.defaults(Eh.prototype,vi);var r0=Eh,n0=mn.vec3,i0=F.TA.extend({type:"bar3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._api=i,this._labelsBuilder=new Fl(256,256,i);var l=this;this._labelsBuilder.getLabelPosition=function(f,c,p){if(l._data){var y=l._data.getItemLayout(f),x=y[0],D=y[1],E=y[2][1];return n0.scaleAndAdd([],x,D,p+E)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,i,l){var f=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=f,this._barMesh||(this._barMesh=new ae.Mesh({geometry:new r0,shadowDepthMaterial:new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.sm.depth.vertex"),ae.Shader.source("ecgl.sm.depth.fragment"))}),culling:t.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var c=t.coordinateSystem;if(this._doRender(t,l),c&&c.viewGL){c.viewGL.add(this.groupGL);var p=c.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[p]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,i){var l=t.getData(),f=t.get("shading"),c=f!=="color",p=this,y=this._barMesh,x="ecgl."+f;(!y.material||y.material.shader.name!==x)&&(y.material=ae.createMaterial(x,["VERTEX_COLOR"])),ae.setMaterialFromModel(f,y.material,t,i),y.geometry.enableNormal=c,y.geometry.resetOffset();var D=t.get("bevelSize"),E=t.get("bevelSmoothness");y.geometry.bevelSegments=E,y.geometry.bevelSize=D;var N=[],$=new Float32Array(l.count()*4),_t=0,Nt=0,pt=!1;l.each(function(te){if(l.hasValue(te)){var qt=di(l,te),jt=si(l,te);jt==null&&(jt=1),ae.parseColor(qt,N),N[3]*=jt,$[_t++]=N[0],$[_t++]=N[1],$[_t++]=N[2],$[_t++]=N[3],N[3]>0&&(Nt++,N[3]<.99&&(pt=!0))}}),y.geometry.setBarCount(Nt);var At=l.getLayout("orient"),Mt=this._barIndexOfData=new Int32Array(l.count()),Nt=0;l.each(function(te){if(!l.hasValue(te)){Mt[te]=-1;return}var qt=l.getItemLayout(te),jt=qt[0],fe=qt[1],ue=qt[2],Te=te*4;N[0]=$[Te++],N[1]=$[Te++],N[2]=$[Te++],N[3]=$[Te++],N[3]>0&&(p._barMesh.geometry.addBar(jt,fe,At,ue,N,te),Mt[te]=Nt++)}),y.geometry.dirty(),y.geometry.updateBoundingBox();var kt=y.material;kt.transparent=pt,kt.depthMask=!pt,y.geometry.sortTriangles=pt,this._initHandler(t,i)},_initHandler:function(t,i){var l=t.getData(),f=this._barMesh,c=t.coordinateSystem.type==="cartesian3D";f.seriesIndex=t.seriesIndex;var p=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(y){var x=f.geometry.getDataIndexOfVertex(y.triangle[0]);x!==p&&(this._downplay(p),this._highlight(x),this._labelsBuilder.updateLabels([x]),c&&i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",x),l.get("y",x),l.get("z",x,!0)]})),p=x,f.dataIndex=x},this),f.on("mouseout",function(y){this._downplay(p),this._labelsBuilder.updateLabels(),p=-1,f.dataIndex=-1,c&&i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(t){var i=this._data;if(i){var l=this._barIndexOfData[t];if(!(l<0)){var f=i.getItemModel(t),c=f.getModel("emphasis.itemStyle"),p=c.get("color"),y=c.get("opacity");if(p==null){var x=di(i,t);p=F.$_.lift(x,-.4)}y==null&&(y=si(i,t));var D=ae.parseColor(p);D[3]*=y,this._barMesh.geometry.setColor(l,D),this._api.getZr().refresh()}}},_downplay:function(t){var i=this._data;if(i){var l=this._barIndexOfData[t];if(!(l<0)){var f=di(i,t),c=si(i,t),p=ae.parseColor(f);p[3]*=c,this._barMesh.geometry.setColor(l,p),this._api.getZr().refresh()}}},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,c){var p=i.getData(),y=Jr.queryDataIndex(p,c),x=this;y!=null?F.D5.each(Ys.normalizeToArray(y),function(D){t==="highlight"?this._highlight(D):this._downplay(D)},this):p.each(function(D){t==="highlight"?x._highlight(D):x._downplay(D)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function td(t){t.registerChartView(i0),t.registerSeriesModel(t0),$g(t),t.registerProcessor(function(i,l){i.eachSeriesByType("bar3d",function(f){var c=f.getData();c.filterSelf(function(p){return c.hasValue(p)})})})}(0,F.D$)(td);var ed=F.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){return qu(this)},formatTooltip:function(t){return Xl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),rd=ed,Ph=z(55265),a0=mn.vec3;ae.Shader.import(Mu);var o0=F.TA.extend({type:"line3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._api=i},render:function(t,i,l){var f=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=f,this._line3DMesh||(this._line3DMesh=new ae.Mesh({geometry:new ts({useNativeLine:!1,sortTriangles:!0}),material:new ae.Material({shader:ae.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var c=t.coordinateSystem;if(c&&c.viewGL){c.viewGL.add(this.groupGL);var p=c.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[p]("fragment","SRGB_DECODE")}this._doRender(t,l),this._data=t.getData(),this._camera=c.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,i){var l=t.getData(),f=this._line3DMesh;f.geometry.resetOffset();var c=l.getLayout("points"),p=[],y=new Float32Array(c.length/3*4),x=0,D=!1;l.each(function($){var _t=di(l,$),pt=si(l,$);pt==null&&(pt=1),ae.parseColor(_t,p),p[3]*=pt,y[x++]=p[0],y[x++]=p[1],y[x++]=p[2],y[x++]=p[3],p[3]<.99&&(D=!0)}),f.geometry.setVertexCount(f.geometry.getPolylineVertexCount(c)),f.geometry.setTriangleCount(f.geometry.getPolylineTriangleCount(c)),f.geometry.addPolyline(c,y,Jr.firstNotNull(t.get("lineStyle.width"),1)),f.geometry.dirty(),f.geometry.updateBoundingBox();var E=f.material;E.transparent=D,E.depthMask=!D;var N=t.getModel("debug.wireframe");N.get("show")?(f.geometry.createAttribute("barycentric","float",3),f.geometry.generateBarycentric(),f.material.set("both","WIREFRAME_TRIANGLE"),f.material.set("wireframeLineColor",ae.parseColor(N.get("lineStyle.color")||"rgba(0,0,0,0.5)")),f.material.set("wireframeLineWidth",Jr.firstNotNull(N.get("lineStyle.width"),1))):f.material.set("both","WIREFRAME_TRIANGLE"),this._points=c,this._initHandler(t,i)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,i){var l=t.getData(),f=t.coordinateSystem,c=this._line3DMesh,p=-1;c.seriesIndex=t.seriesIndex,c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(y){var x=f.pointToData(y.point.array),D=l.indicesOfNearest("x",x[0])[0];D!==p&&(i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",D),l.get("y",D),l.get("z",D)]}),c.dataIndex=D),p=D},this),c.on("mouseout",function(y){p=-1,c.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var t=new Tr,i=this._camera;Tr.multiply(t,i.projectionMatrix,i.viewMatrix);var l=this._positionNDC,f=this._points,c=f.length/3;(!l||l.length/2!==c)&&(l=this._positionNDC=new Float32Array(c*2));for(var p=[],y=0;y<c;y++){var x=y*3,D=y*2;p[0]=f[x],p[1]=f[x+1],p[2]=f[x+2],p[3]=1,a0.transformMat4(p,p,t.array),l[D]=p[0]/p[3],l[D+1]=p[1]/p[3]}},_pick:function(t,i,l,f,c,p){var y=this._positionNDC,x=this._data.hostModel,D=x.get("lineStyle.width"),E=-1,N=l.viewport.width,$=l.viewport.height,_t=N*.5,pt=$*.5;t=(t+1)*_t,i=(i+1)*pt;for(var At=1;At<y.length/2;At++){var Mt=(y[(At-1)*2]+1)*_t,Nt=(y[(At-1)*2+1]+1)*pt,kt=(y[At*2]+1)*_t,te=(y[At*2+1]+1)*pt;if(Ph.m(Mt,Nt,kt,te,D,t,i)){var qt=(Mt-t)*(Mt-t)+(Nt-i)*(Nt-i),jt=(kt-t)*(kt-t)+(te-i)*(te-i);E=qt<jt?At-1:At}}if(E>=0){var fe=E*3,ue=new sr(this._points[fe],this._points[fe+1],this._points[fe+2]);p.push({dataIndex:E,point:ue,pointWorld:ue.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(ue)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function s0(t){t.registerChartView(o0),t.registerSeriesModel(rd),t.registerLayout(function(i,l){i.eachSeriesByType("line3D",function(f){var c=f.getData(),p=f.coordinateSystem;if(p){if(p.type!=="cartesian3D")return;var y=new Float32Array(c.count()*3),x=[],D=[],E=p.dimensions,N=E.map(function($){return f.coordDimToDataDim($)[0]});p&&c.each(N,function($,_t,pt,At){x[0]=$,x[1]=_t,x[2]=pt,p.dataToPoint(x,D),y[At*3]=D[0],y[At*3+1]=D[1],y[At*3+2]=D[2]}),c.setLayout("points",y)}})})}(0,F.D$)(s0);var l0=F.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,i){return qu(this)},getFormattedLabel:function(t,i,l,f){var c=Ys.getFormattedLabel(this,t,i,l,f);if(c==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];c=p.get(y,t)}return c},formatTooltip:function(t){return Xl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Lh(t,f,l){var f=f||document.createElement("canvas");f.width=t,f.height=t;var c=f.getContext("2d");return l&&l(c),f}function u0(t,i,l,f){F.D5.isArray(i)||(i=[i,i]);var c=Ih.getMarginByStyle(l,f),p=i[0]+c.left+c.right,y=i[1]+c.top+c.bottom,x=F._y.createSymbol(t,0,0,i[0],i[1]),D=Math.max(p,y);x.x=c.left,x.y=c.top,p>y?x.y+=(D-y)/2:x.x+=(D-p)/2;var E=x.getBoundingRect();return x.x-=E.x,x.y-=E.y,x.setStyle(l),x.update(),x.__size=D,x}function f0(t,i,l){var f=i.width,c=i.height,p=t.canvas.width,y=t.canvas.height,x=f/p,D=c/y;function E(kt){return kt<128?1:-1}function N(kt,te){var qt=1/0;kt=Math.floor(kt*x),te=Math.floor(te*D);for(var jt=te*f+kt,fe=i.data[jt*4],ue=E(fe),Te=Math.max(te-l,0);Te<Math.min(te+l,c);Te++)for(var xe=Math.max(kt-l,0);xe<Math.min(kt+l,f);xe++){var jt=Te*f+xe,Ie=i.data[jt*4],je=E(Ie),Ve=xe-kt,Je=Te-te;if(ue!==je){var er=Ve*Ve+Je*Je;er<qt&&(qt=er)}}return ue*Math.sqrt(qt)}for(var $=t.createImageData(p,y),_t=0;_t<y;_t++)for(var pt=0;pt<p;pt++){var At=N(pt,_t),Mt=At/l*.5+.5,Nt=(_t*p+pt)*4;$.data[Nt++]=(1-Mt)*255,$.data[Nt++]=(1-Mt)*255,$.data[Nt++]=(1-Mt)*255,$.data[Nt++]=255}return $}var Ih={getMarginByStyle:function(t){var i=t.minMargin||0,l=0;t.stroke&&t.stroke!=="none"&&(l=t.lineWidth==null?1:t.lineWidth);var f=t.shadowBlur||0,c=t.shadowOffsetX||0,p=t.shadowOffsetY||0,y={};return y.left=Math.max(l/2,-c+f,i),y.right=Math.max(l/2,c+f,i),y.top=Math.max(l/2,-p+f,i),y.bottom=Math.max(l/2,p+f,i),y},createSymbolSprite:function(t,i,l,f){var c=u0(t,i,l),p=Ih.getMarginByStyle(l);return{image:Lh(c.__size,f,function(y){F.z$(y,c)}),margin:p}},createSDFFromCanvas:function(t,i,l,f){return Lh(i,f,function(c){var p=t.getContext("2d"),y=p.getImageData(0,0,t.width,t.height);c.putImageData(f0(c,y,l),0,0)})},createSimpleSprite:function(t,i){return Lh(t,i,function(l){var f=t/2;l.beginPath(),l.arc(f,f,60,0,Math.PI*2,!1),l.closePath();var c=l.createRadialGradient(f,f,0,f,f,f);c.addColorStop(0,"rgba(255, 255, 255, 1)"),c.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),c.addColorStop(1,"rgba(255, 255, 255, 0)"),l.fillStyle=c,l.fill()})}},nd=Ih,id=mn.vec3,h0={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,i){var l=this.indices,f=id.create();if(!l){l=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var c=0;c<l.length;c++)l[c]=c}if(i===0){var p=this.attributes.position,t=t.array,y=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var x,c=0;c<this.vertexCount;c++){p.get(c,f);var D=id.sqrDist(f,t);isNaN(D)&&(D=1e7,y++),c===0?(x=D,D=0):D=D-x,this._zList[c]=D}this._noneCount=y}if(this.vertexCount<2e4)i===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var c=0;c<3;c++)this._progressiveQuickSort(i*3+c);this.dirtyIndices()},_simpleSort:function(t){var i=this._zList,l=this.indices;function f(c,p){return i[p]-i[c]}t?Array.prototype.sort.call(l,f):ks.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._zList,l=this.indices;this._quickSort=this._quickSort||new ks,this._quickSort.step(l,function(f,c){return i[c]-i[f]},t)}},c0=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`,Rh=mn.vec4;ae.Shader.import(c0);var v0=ae.Mesh.extend(function(){var t=new ae.Geometry({dynamic:!0,attributes:{color:new ae.Geometry.Attribute("color","float",4,"COLOR"),position:new ae.Geometry.Attribute("position","float",3,"POSITION"),size:new ae.Geometry.Attribute("size","float",1),prevPosition:new ae.Geometry.Attribute("prevPosition","float",3),prevSize:new ae.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,h0);var i=new ae.Material({shader:ae.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});i.enableTexture("sprite"),i.define("both","VERTEX_COLOR"),i.define("both","VERTEX_SIZE");var l=new ae.Texture2D({image:document.createElement("canvas"),flipY:!1});return i.set("sprite",l),t.pick=this._pick.bind(this),{geometry:t,material:i,mode:ae.Mesh.POINTS,sizeScale:1}},{_pick:function(t,i,l,f,c,p){var y=this._positionNDC;if(y)for(var x=l.viewport,D=2/x.width,E=2/x.height,N=this.geometry.vertexCount-1;N>=0;N--){var $;this.geometry.indices?$=this.geometry.indices[N]:$=N;var _t=y[$*2],pt=y[$*2+1],At=this.geometry.attributes.size.get($)/this.sizeScale,Mt=At/2;if(t>_t-Mt*D&&t<_t+Mt*D&&i>pt-Mt*E&&i<pt+Mt*E){var Nt=new ae.Vector3,kt=new ae.Vector3;this.geometry.attributes.position.get($,Nt.array),ae.Vector3.transformMat4(kt,Nt,this.worldTransform),p.push({vertexIndex:$,point:Nt,pointWorld:kt,target:this,distance:kt.distance(f.getWorldPosition())})}}},updateNDCPosition:function(t,i,l){var f=this._positionNDC,c=this.geometry;(!f||f.length/2!==c.vertexCount)&&(f=this._positionNDC=new Float32Array(c.vertexCount*2));for(var p=Rh.create(),y=0;y<c.vertexCount;y++)c.attributes.position.get(y,p),p[3]=1,Rh.transformMat4(p,p,t.array),Rh.scale(p,p,1/p[3]),f[y*2]=p[0],f[y*2+1]=p[1]}}),d0=v0,tf=20,ad=-10;function p0(t,i){return t&&i&&t[0]===i[0]&&t[1]===i[1]}function Oh(t,i){this.rootNode=new ae.Node,this.is2D=t,this._labelsBuilder=new Fl(256,256,i),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=i,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Oh.prototype={constructor:Oh,highlightOnMouseover:!0,update:function(t,i,l,f,c){var p=this._prevMesh;this._prevMesh=this._mesh,this._mesh=p;var y=t.getData();if(f==null&&(f=0),c==null&&(c=y.count()),this._startDataIndex=f,this._endDataIndex=c-1,!this._mesh){var x=this._prevMesh&&this._prevMesh.material;this._mesh=new d0({renderOrder:10,frustumCulling:!1}),x&&(this._mesh.material=x)}var x=this._mesh.material,D=this._mesh.geometry,E=D.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var N=this._getSymbolInfo(t,f,c),$=l.getDevicePixelRatio(),_t=t.getModel("itemStyle").getItemStyle(),pt=t.get("large"),At=1;N.maxSize>2?(At=this._updateSymbolSprite(t,_t,N,$),x.enableTexture("sprite")):x.disableTexture("sprite"),E.position.init(c-f);var Mt=[];if(pt){x.undefine("VERTEX_SIZE"),x.undefine("VERTEX_COLOR");var Nt=Dg(y),kt=Ev(y);ae.parseColor(Nt,Mt),Mt[3]*=kt,x.set({color:Mt,u_Size:N.maxSize*this._sizeScale})}else x.set({color:[1,1,1,1]}),x.define("VERTEX_SIZE"),x.define("VERTEX_COLOR"),E.size.init(c-f),E.color.init(c-f),this._originalOpacity=new Float32Array(c-f);for(var te=y.getLayout("points"),qt=E.position.value,jt=!1,fe=0;fe<c-f;fe++){var ue=fe*3,Te=fe*2;if(this.is2D?(qt[ue]=te[Te],qt[ue+1]=te[Te+1],qt[ue+2]=ad):(qt[ue]=te[ue],qt[ue+1]=te[ue+1],qt[ue+2]=te[ue+2]),!pt){var Nt=di(y,fe),kt=si(y,fe);ae.parseColor(Nt,Mt),Mt[3]*=kt,E.color.set(fe,Mt),Mt[3]<.99&&(jt=!0);var xe=y.getItemVisual(fe,"symbolSize");xe=xe instanceof Array?Math.max(xe[0],xe[1]):xe,isNaN(xe)&&(xe=0),E.size.value[fe]=xe*At*this._sizeScale,this._originalOpacity[fe]=Mt[3]}}this._mesh.sizeScale=At,D.updateBoundingBox(),D.dirty(),this._updateMaterial(t,_t);var Ie=t.coordinateSystem;if(Ie&&Ie.viewGL){var je=Ie.viewGL.isLinearSpace()?"define":"undefine";x[je]("fragment","SRGB_DECODE")}pt||this._updateLabelBuilder(t,f,c),this._updateHandler(t,i,l),this._updateAnimation(t),this._api=l},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,i,l,f){l.maxSize=Math.min(l.maxSize*2,200);var c=[];return l.aspect>1?(c[0]=l.maxSize,c[1]=l.maxSize/l.aspect):(c[1]=l.maxSize,c[0]=l.maxSize*l.aspect),c[0]=c[0]||1,c[1]=c[1]||1,(this._symbolType!==l.type||!p0(this._symbolSize,c)||this._lineWidth!==i.lineWidth)&&(nd.createSymbolSprite(l.type,c,{fill:"#fff",lineWidth:i.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(c[0]/2,10)},this._spriteImageCanvas),nd.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),tf,this._mesh.material.get("sprite").image),this._symbolType=l.type,this._symbolSize=c,this._lineWidth=i.lineWidth),this._spriteImageCanvas.width/l.maxSize*f},_updateMaterial:function(t,i){var l=t.get("blendMode")==="lighter"?ae.additiveBlend:null,f=this._mesh.material;f.blend=l,f.set("lineWidth",i.lineWidth/tf);var c=ae.parseColor(i.stroke);f.set("strokeColor",c),f.transparent=!0,f.depthMask=!1,f.depthTest=!this.is2D,f.sortVertices=!this.is2D},_updateLabelBuilder:function(t,y,l){var f=t.getData(),c=this._mesh.geometry,p=c.attributes.position.value,y=this._startDataIndex,x=this._mesh.sizeScale;this._labelsBuilder.updateData(f,y,l),this._labelsBuilder.getLabelPosition=function(D,E,N){var $=(D-y)*3;return[p[$],p[$+1],p[$+2]]},this._labelsBuilder.getLabelDistance=function(D,E,N){var $=c.attributes.size.get(D-y)/x;return $/2+N},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,i,l){var f=t.getData(),c=this._mesh,p=this,y=-1,x=t.coordinateSystem&&t.coordinateSystem.type==="cartesian3D",D;x&&(D=t.coordinateSystem.model),c.seriesIndex=t.seriesIndex,c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(E){var N=E.vertexIndex+p._startDataIndex;N!==y&&(this.highlightOnMouseover&&(this.downplay(f,y),this.highlight(f,N),this._labelsBuilder.updateLabels([N])),x&&l.dispatchAction({type:"grid3DShowAxisPointer",value:[f.get(t.coordDimToDataDim("x")[0],N),f.get(t.coordDimToDataDim("y")[0],N),f.get(t.coordDimToDataDim("z")[0],N)],grid3DIndex:D.componentIndex})),c.dataIndex=N,y=N},this),c.on("mouseout",function(E){var N=E.vertexIndex+p._startDataIndex;this.highlightOnMouseover&&(this.downplay(f,N),this._labelsBuilder.updateLabels()),y=-1,c.dataIndex=-1,x&&l.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:D.componentIndex})},this)},updateLayout:function(t,i,l){var f=t.getData();if(this._mesh){var c=this._mesh.geometry.attributes.position.value,p=f.getLayout("points");if(this.is2D)for(var y=0;y<p.length/2;y++){var x=y*3,D=y*2;c[x]=p[D],c[x+1]=p[D+1],c[x+2]=ad}else for(var y=0;y<p.length;y++)c[y]=p[y];this._mesh.geometry.dirty(),l.getZr().refresh()}},updateView:function(t){if(this._mesh){var i=new Tr;Tr.mul(i,t.viewMatrix,this._mesh.worldTransform),Tr.mul(i,t.projectionMatrix,i),this._mesh.updateNDCPosition(i,this.is2D,this._api)}},highlight:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=t.getItemModel(i),f=l.getModel("emphasis.itemStyle"),c=f.get("color"),p=f.get("opacity");if(c==null){var y=di(t,i);c=F.$_.lift(y,-.4)}p==null&&(p=si(t,i));var x=ae.parseColor(c);x[3]*=p,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,x),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=di(t,i),f=si(t,i),c=ae.parseColor(l);c[3]*=f,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,c),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var i=this._mesh.geometry,l=0;l<i.vertexCount;l++){var f=this._originalOpacity[l]*t;i.attributes.color.value[l*4+3]=f}i.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var i=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",i/this._sizeScale*t);var l=this._mesh.geometry.attributes;if(l.size.value)for(var f=0;f<l.size.value.length;f++)l.size.value[f]=l.size.value[f]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,i){i&&t.material.set("positionTexture",i),t.material[i?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,i,l){if(t.get("large")){var f=Jr.firstNotNull(t.get("symbolSize"),1),E,p;return f instanceof Array?(E=Math.max(f[0],f[1]),p=f[0]/f[1]):(E=f,p=1),{maxSize:f,type:t.get("symbol"),aspect:p}}for(var c=t.getData(),p,y=!1,x=c.getItemVisual(0,"symbol")||"circle",D=!1,E=0,N=i;N<l;N++){var f=c.getItemVisual(N,"symbolSize"),$=c.getItemVisual(N,"symbol"),_t;if(f instanceof Array)_t=f[0]/f[1],E=Math.max(Math.max(f[0],f[1]),E);else{if(isNaN(f))continue;_t=1,E=Math.max(f,E)}x=$,p=_t}return{maxSize:E,type:x,aspect:p}}};var Kl=Oh,g0=F.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,i,l){if(this.groupGL.removeAll(),!!t.getData().count()){var f=t.coordinateSystem;if(f&&f.viewGL){f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera;var c=this._pointsBuilderList[0];c||(c=this._pointsBuilderList[0]=new Kl(!1,l)),this._pointsBuilderList.length=1,this.groupGL.add(c.rootNode),c.update(t,i,l),c.updateView(f.viewGL.camera)}}},incrementalPrepareRender:function(t,i,l){var f=t.coordinateSystem;f&&f.viewGL&&(f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var c=this._pointsBuilderList[this._currentStep];c||(c=new Kl(!1,f),this._pointsBuilderList[this._currentStep]=c),this.groupGL.add(c.rootNode),c.update(i,l,f,t.start,t.end),c.updateView(i.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(t){t.updateView(this._camera)},this)},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,c){var p=i.getData(),y=Jr.queryDataIndex(p,c),x=t==="highlight";y!=null?F.D5.each(Ys.normalizeToArray(y),function(D){for(var E=0;E<this._pointsBuilderList.length;E++){var N=this._pointsBuilderList[E];x?N.highlight(p,D):N.downplay(p,D)}},this):p.each(function(D){for(var E=0;E<this._pointsBuilderList.length;E++){var N=this._pointsBuilderList[E];x?N.highlight(p,D):N.downplay(p,D)}})},dispose:function(){this._pointsBuilderList.forEach(function(t){t.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function us(t){t.registerChartView(g0),t.registerSeriesModel(l0),t.registerLayout({seriesType:"scatter3D",reset:function(i){var l=i.coordinateSystem;if(l){var f=l.dimensions;if(f.length<3)return;var c=f.map(function(x){return i.coordDimToDataDim(x)[0]}),p=[],y=[];return{progress:function(x,D){for(var E=new Float32Array((x.end-x.start)*3),N=x.start;N<x.end;N++){var $=(N-x.start)*3;p[0]=D.get(c[0],N),p[1]=D.get(c[1],N),p[2]=D.get(c[2],N),l.dataToPoint(p,y),E[$]=y[0],E[$+1]=y[1],E[$+2]=y[2]}D.setLayout("points",E)}}}}})}(0,F.D$)(us);var Jn=mn.vec3,fs=mn.vec2,ba=Jn.normalize,Yl=Jn.cross,Nh=Jn.sub,ef=Jn.add,Do=Jn.create,to=Do(),da=Do(),wo=Do(),Ao=Do(),od=[],sd=[];function m0(t,i){fs.copy(od,t[0]),fs.copy(sd,t[1]);var l=[],f=l[0]=Do(),c=l[1]=Do(),p=l[2]=Do(),y=l[3]=Do();i.dataToPoint(od,f),i.dataToPoint(sd,y),ba(to,f),Nh(da,y,f),ba(da,da),Yl(wo,da,to),ba(wo,wo),Yl(da,to,wo),ef(c,to,da),ba(c,c),ba(to,y),Nh(da,f,y),ba(da,da),Yl(wo,da,to),ba(wo,wo),Yl(da,to,wo),ef(p,to,da),ba(p,p),ef(Ao,f,y),ba(Ao,Ao);var x=Jn.dot(f,Ao),D=Jn.dot(Ao,c),E=(Math.max(Jn.len(f),Jn.len(y))-x)/D*2;return Jn.scaleAndAdd(c,f,c,E),Jn.scaleAndAdd(p,y,p,E),l}function y0(t,i,l){var f=[],c=f[0]=Jn.create(),p=f[1]=Jn.create(),y=f[2]=Jn.create(),x=f[3]=Jn.create();i.dataToPoint(t[0],c),i.dataToPoint(t[1],x);var D=Jn.dist(c,x);return Jn.lerp(p,c,x,.3),Jn.lerp(y,c,x,.3),Jn.scaleAndAdd(p,p,l,Math.min(D*.1,10)),Jn.scaleAndAdd(y,y,l,Math.min(D*.1,10)),f}function ld(t,i){for(var l=new Float32Array(t.length*3),f=0,c=[],p=0;p<t.length;p++)i.dataToPoint(t[p],c),l[f++]=c[0],l[f++]=c[1],l[f++]=c[2];return l}function ud(t){var i=[];return t.each(function(l){var f=t.getItemModel(l),c=f.option instanceof Array?f.option:f.getShallow("coords",!0);i.push(c)}),{coordsList:i}}function fd(t,i){var l=t.getData(),f=t.get("polyline");l.setLayout("lineType",f?"polyline":"cubicBezier");var c=ud(l);l.each(function(p){var y=c.coordsList[p],x=f?ld:m0;l.setItemLayout(p,x(y,i))})}function Bh(t,i,l){var f=t.getData(),c=t.get("polyline"),p=ud(f);f.setLayout("lineType",c?"polyline":"cubicBezier"),f.each(function(y){var x=p.coordsList[y],D=c?ld(x,i):y0(x,i,l);f.setItemLayout(y,D)})}function hs(t,i){t.eachSeriesByType("lines3D",function(l){var f=l.coordinateSystem;f.type==="globe"?fd(l,f):f.type==="geo3D"?Bh(l,f,[0,1,0]):(f.type==="mapbox3D"||f.type==="maptalks3D")&&Bh(l,f,[0,0,1])})}var jl=F.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){var l=new F.aV(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,c,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var x=f.value;if(x!=null)return x instanceof Array?x[y]:x}),l},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),js=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`,hd=mn.vec3;function _0(t){return t>0?1:-1}ae.Shader.import(js);var x0=ae.Mesh.extend(function(){var t=new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.trail2.vertex"),ae.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),i=new ts({dynamic:!0});return i.createAttribute("dist","float",1),i.createAttribute("distAll","float",1),i.createAttribute("start","float",1),{geometry:i,material:t,culling:!1,$ignorePicking:!0}},{updateData:function(t,i,l){var f=t.hostModel,c=this.geometry,p=f.getModel("effect"),y=p.get("trailWidth")*i.getDevicePixelRatio(),x=p.get("trailLength"),D=f.get("effect.constantSpeed"),E=f.get("effect.period")*1e3,N=D!=null;N?this.material.set("speed",D/1e3):this.material.set("period",E),this.material[N?"define":"undefine"]("vertex","CONSTANT_SPEED");var $=f.get("polyline");c.trailLength=x,this.material.set("trailLength",x),c.resetOffset(),["position","positionPrev","positionNext"].forEach(function(Te){c.attributes[Te].value=l.attributes[Te].value});var _t=["dist","distAll","start","offset","color"];_t.forEach(function(Te){c.attributes[Te].init(c.vertexCount)}),c.indices=l.indices;var pt=[],At=p.get("trailColor"),Mt=p.get("trailOpacity"),Nt=At!=null,kt=Mt!=null;this.updateWorldTransform();var te=this.worldTransform.x.len(),qt=this.worldTransform.y.len(),jt=this.worldTransform.z.len(),fe=0,ue=0;t.each(function(Te){var xe=t.getItemLayout(Te),Ie=kt?Mt:si(t,Te),je=di(t,Te);Ie==null&&(Ie=1),pt=ae.parseColor(Nt?At:je,pt),pt[3]*=Ie;for(var Ve=$?l.getPolylineVertexCount(xe):l.getCubicCurveVertexCount(xe[0],xe[1],xe[2],xe[3]),Je=0,er=[],Xe=[],ir=fe;ir<fe+Ve;ir++)c.attributes.position.get(ir,er),er[0]*=te,er[1]*=qt,er[2]*=jt,ir>fe&&(Je+=hd.dist(er,Xe)),c.attributes.dist.set(ir,Je),hd.copy(Xe,er);ue=Math.max(ue,Je);for(var xr=Math.random()*(N?Je:E),ir=fe;ir<fe+Ve;ir++)c.attributes.distAll.set(ir,Je),c.attributes.start.set(ir,xr),c.attributes.offset.set(ir,_0(l.attributes.offset.get(ir))*y/2),c.attributes.color.set(ir,pt);fe+=Ve}),this.material.set("spotSize",ue*.1*x),this.material.set("spotIntensity",p.get("spotIntensity")),c.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});ae.Shader.import(Mu);function S0(t){return t.radius!=null?t.radius:t.size!=null?Math.max(t.size[0],t.size[1],t.size[2]):100}var cd=F.TA.extend({type:"lines3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._meshLinesMaterial=new ae.Material({shader:ae.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new ae.Mesh({geometry:new ts,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new x0},render:function(t,i,l){this.groupGL.add(this._linesMesh);var f=t.coordinateSystem,c=t.getData();if(f&&f.viewGL){var p=f.viewGL;p.add(this.groupGL),this._updateLines(t,i,l);var y=f.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[y]("fragment","SRGB_DECODE"),this._trailMesh.material[y]("fragment","SRGB_DECODE")}var x=this._trailMesh;if(x.stopAnimation(),t.get("effect.show")){this.groupGL.add(x),x.updateData(c,l,this._linesMesh.geometry),x.__time=x.__time||0;var D=3600*1e3;this._curveEffectsAnimator=x.animate("",{loop:!0}).when(D,{__time:D}).during(function(){x.setAnimationTime(x.__time)}).start()}else this.groupGL.remove(x),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=t.get("blendMode")==="lighter"?ae.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,i,l){var f=t.getData(),c=t.coordinateSystem,p=this._linesMesh.geometry,y=t.get("polyline");p.expandLine=!0;var x=S0(c);p.segmentScale=x/20;var D="lineStyle.width".split("."),E=l.getDevicePixelRatio(),N=0;f.each(function(At){var Mt=f.getItemModel(At),Nt=Mt.get(D);Nt==null&&(Nt=1),f.setItemVisual(At,"lineWidth",Nt),N=Math.max(Nt,N)}),p.useNativeLine=!1;var $=0,_t=0;f.each(function(At){var Mt=f.getItemLayout(At);y?($+=p.getPolylineVertexCount(Mt),_t+=p.getPolylineTriangleCount(Mt)):($+=p.getCubicCurveVertexCount(Mt[0],Mt[1],Mt[2],Mt[3]),_t+=p.getCubicCurveTriangleCount(Mt[0],Mt[1],Mt[2],Mt[3]))}),p.setVertexCount($),p.setTriangleCount(_t),p.resetOffset();var pt=[];f.each(function(At){var Mt=f.getItemLayout(At),Nt=di(f,At),kt=si(f,At),te=f.getItemVisual(At,"lineWidth")*E;kt==null&&(kt=1),pt=ae.parseColor(Nt,pt),pt[3]*=kt,y?p.addPolyline(Mt,pt,te):p.addCubicCurve(Mt[0],Mt[1],Mt[2],Mt[3],pt,te)}),p.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function T0(t){t.registerChartView(cd),t.registerSeriesModel(jl),t.registerLayout(hs),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}(0,F.D$)(T0);function vd(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var Fh=F.wJ.extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getItemModel(t),f=l.option instanceof Array?l.option:l.getShallow("coords");l.get("multiPolygon")||(f=[f]);for(var c=[],p=0;p<f.length;p++){for(var y=[],x=1;x<f[p].length;x++)y.push(vd(i,f[p][x]));c.push({exterior:vd(i,f[p][0]),interiors:y})}return c},getInitialData:function(t){var i=new F.aV(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(l,f,c,p){if(l instanceof Array)return NaN;i.hasItemOption=!0;var y=l.value;if(y!=null)return y instanceof Array?y[p]:y}),i},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});F.D5.merge(Fh.prototype,Gs);var D0=Fh,w0=F.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL);var c=this._geo3DBuilderList[0];c||(c=new Zu(l),c.extrudeY=f.type!=="mapbox3D"&&f.type!=="maptalks3D",this._geo3DBuilderList[0]=c),this._updateShaderDefines(f,c),c.update(t,i,l),this._geo3DBuilderList.length=1,this.groupGL.add(c.rootNode)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,i,l,f){var c=this._geo3DBuilderList[this._currentStep],p=i.coordinateSystem;c||(c=new Zu(f),c.extrudeY=p.type!=="mapbox3D"&&p.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=c),c.update(i,l,f,t.start,t.end),this.groupGL.add(c.rootNode),this._updateShaderDefines(p,c),this._currentStep++},_updateShaderDefines:function(t,i){var l=t.viewGL.isLinearSpace()?"define":"undefine";i.rootNode.traverse(function(f){f.material&&(f.material[l]("fragment","SRGB_DECODE"),(t.type==="mapbox3D"||t.type==="maptalks3D")&&(f.material.define("fragment","NORMAL_UP_AXIS",2),f.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(t){t.dispose()})}});function dd(t){t.registerChartView(w0),t.registerSeriesModel(D0)}(0,F.D$)(dd);var Gh=F.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return Xl(this,t)},getInitialData:function(t,i){var l=t.data;function f(Lr){return!(isNaN(Lr.min)||isNaN(Lr.max)||isNaN(Lr.step))}function c(Lr){var ar=F.Rx.getPrecisionSafe;return Math.max(ar(Lr.min),ar(Lr.max),ar(Lr.step))+1}if(!l)if(t.parametric){var jt=t.parametricEquation||{},fe=jt.u||{},ue=jt.v||{};["u","v"].forEach(function(ar){f(jt[ar])}),["x","y","z"].forEach(function(ar){jt[ar]});var Te=Math.floor((fe.max+fe.step-fe.min)/fe.step),xe=Math.floor((ue.max+ue.step-ue.min)/ue.step);l=new Float32Array(Te*xe*5);for(var Ie=c(fe),je=c(ue),_t=0,pt=0;pt<xe;pt++)for(var At=0;At<Te;At++){var Ve=At*fe.step+fe.min,Je=pt*ue.step+ue.min,er=F.Rx.round(Math.min(Ve,fe.max),Ie),Xe=F.Rx.round(Math.min(Je,ue.max),je),Mt=jt.x(er,Xe),Nt=jt.y(er,Xe),qt=jt.z(er,Xe);l[_t++]=Mt,l[_t++]=Nt,l[_t++]=qt,l[_t++]=er,l[_t++]=Xe}}else{var p=t.equation||{},y=p.x||{},x=p.y||{};if(["x","y"].forEach(function(Lr){f(p[Lr])}),typeof p.z!="function")return;var D=Math.floor((y.max+y.step-y.min)/y.step),E=Math.floor((x.max+x.step-x.min)/x.step);l=new Float32Array(D*E*3);for(var N=c(y),$=c(x),_t=0,pt=0;pt<E;pt++)for(var At=0;At<D;At++){var Mt=At*y.step+y.min,Nt=pt*x.step+x.min,kt=F.Rx.round(Math.min(Mt,y.max),N),te=F.Rx.round(Math.min(Nt,x.max),$),qt=p.z(kt,te);l[_t++]=kt,l[_t++]=te,l[_t++]=qt}}var ir=["x","y","z"];t.parametric&&ir.push("u","v");var xr=qu(this,ir,l);return xr},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});F.D5.merge(Gh.prototype,Gs);var pd=Gh,bo=mn.vec3;function zh(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}var Vh=F.TA.extend({type:"surface",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node},render:function(t,i,l){var f=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=f,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var c=t.coordinateSystem,p=t.get("shading"),y=t.getData(),x="ecgl."+p;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==x)&&(this._surfaceMesh.material=ae.createMaterial(x,["VERTEX_COLOR","DOUBLE_SIDED"])),ae.setMaterialFromModel(p,this._surfaceMesh.material,t,l),c&&c.viewGL){c.viewGL.add(this.groupGL);var D=c.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[D]("fragment","SRGB_DECODE")}var E=t.get("parametric"),N=t.get("dataShape");N||(N=this._getDataShape(y,E));var $=t.getModel("wireframe"),_t=$.get("lineStyle.width"),pt=$.get("show")&&_t>0;this._updateSurfaceMesh(this._surfaceMesh,t,N,pt);var At=this._surfaceMesh.material;pt?(At.define("WIREFRAME_QUAD"),At.set("wireframeLineWidth",_t),At.set("wireframeLineColor",ae.parseColor($.get("lineStyle.color")))):At.undefine("WIREFRAME_QUAD"),this._initHandler(t,l),this._updateAnimation(t)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new ae.Mesh({geometry:new ae.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.sm.depth.vertex"),ae.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,vi),t},_initHandler:function(t,i){var l=t.getData(),f=this._surfaceMesh,c=t.coordinateSystem;function p(x,D){for(var E=1/0,N=-1,$=[],_t=0;_t<x.length;_t++){f.geometry.attributes.position.get(x[_t],$);var pt=bo.dist(D.array,$);pt<E&&(E=pt,N=x[_t])}return N}f.seriesIndex=t.seriesIndex;var y=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(x){var D=p(x.triangle,x.point);if(D>=0){var E=[];f.geometry.attributes.position.get(D,E);for(var N=c.pointToData(E),$=1/0,_t=-1,pt=[],At=0;At<l.count();At++){pt[0]=l.get("x",At),pt[1]=l.get("y",At),pt[2]=l.get("z",At);var Mt=bo.squaredDistance(pt,N);Mt<$&&(_t=At,$=Mt)}_t!==y&&i.dispatchAction({type:"grid3DShowAxisPointer",value:N}),y=_t,f.dataIndex=_t}else f.dataIndex=-1},this),f.on("mouseout",function(x){y=-1,f.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(t,i,l,f){var c=t.geometry,p=i.getData(),y=p.getLayout("points"),x=0;p.each(function(ei){p.hasValue(ei)||x++});var D=x||f,E=c.attributes.position,N=c.attributes.normal,$=c.attributes.texcoord0,_t=c.attributes.barycentric,pt=c.attributes.color,At=l[0],Mt=l[1],Nt=i.get("shading"),kt=Nt!=="color";if(D){var te=(At-1)*(Mt-1)*4;E.init(te),f&&_t.init(te)}else E.value=new Float32Array(y);pt.init(c.vertexCount),$.init(c.vertexCount);var qt=[0,3,1,1,3,2],jt=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],fe=c.indices=new(c.vertexCount>65535?Uint32Array:Uint16Array)((At-1)*(Mt-1)*6),ue=function(ei,pa,Ni){Ni[1]=ei*Mt+pa,Ni[0]=ei*Mt+pa+1,Ni[3]=(ei+1)*Mt+pa+1,Ni[2]=(ei+1)*Mt+pa},Te=!1;if(D){var xe=[],Ie=[],je=0;kt?N.init(c.vertexCount):N.value=null;for(var Ve=[[],[],[]],Je=[],er=[],Xe=bo.create(),ir=function(ei,pa,Ni){var Jh=pa*3;return Ni[0]=ei[Jh],Ni[1]=ei[Jh+1],Ni[2]=ei[Jh+2],Ni},xr=new Float32Array(y.length),Lr=new Float32Array(y.length/3*4),ar=0;ar<p.count();ar++)if(p.hasValue(ar)){var pi=ae.parseColor(di(p,ar)),vn=si(p,ar);vn!=null&&(pi[3]*=vn),pi[3]<.99&&(Te=!0);for(var br=0;br<4;br++)Lr[ar*4+br]=pi[br]}for(var Cn=[1e7,1e7,1e7],ar=0;ar<At-1;ar++)for(var dn=0;dn<Mt-1;dn++){var On=ar*(Mt-1)+dn,Zr=On*4;ue(ar,dn,xe);for(var $r=!1,br=0;br<4;br++)ir(y,xe[br],Ie),zh(Ie)&&($r=!0);for(var br=0;br<4;br++)$r?E.set(Zr+br,Cn):(ir(y,xe[br],Ie),E.set(Zr+br,Ie)),f&&_t.set(Zr+br,jt[br]);for(var br=0;br<6;br++)fe[je++]=qt[br]+Zr;if(kt&&!$r)for(var br=0;br<2;br++){for(var ui=br*3,Wn=0;Wn<3;Wn++){var Qn=xe[qt[ui]+Wn];ir(y,Qn,Ve[Wn])}bo.sub(Je,Ve[0],Ve[1]),bo.sub(er,Ve[1],Ve[2]),bo.cross(Xe,Je,er);for(var Wn=0;Wn<3;Wn++){var bi=xe[qt[ui]+Wn]*3;xr[bi]=xr[bi]+Xe[0],xr[bi+1]=xr[bi+1]+Xe[1],xr[bi+2]=xr[bi+2]+Xe[2]}}}if(kt)for(var ar=0;ar<xr.length/3;ar++)ir(xr,ar,Xe),bo.normalize(Xe,Xe),xr[ar*3]=Xe[0],xr[ar*3+1]=Xe[1],xr[ar*3+2]=Xe[2];for(var pi=[],gi=[],ar=0;ar<At-1;ar++)for(var dn=0;dn<Mt-1;dn++){var On=ar*(Mt-1)+dn,Zr=On*4;ue(ar,dn,xe);for(var br=0;br<4;br++){for(var Wn=0;Wn<4;Wn++)pi[Wn]=Lr[xe[br]*4+Wn];pt.set(Zr+br,pi),kt&&(ir(xr,xe[br],Xe),N.set(Zr+br,Xe));var Qn=xe[br];gi[0]=Qn%Mt/(Mt-1),gi[1]=Math.floor(Qn/Mt)/(At-1),$.set(Zr+br,gi)}On++}}else{for(var gi=[],ar=0;ar<p.count();ar++){gi[0]=ar%Mt/(Mt-1),gi[1]=Math.floor(ar/Mt)/(At-1);var pi=ae.parseColor(di(p,ar)),vn=si(p,ar);vn!=null&&(pi[3]*=vn),pi[3]<.99&&(Te=!0),pt.set(ar,pi),$.set(ar,gi)}for(var xe=[],ds=0,ar=0;ar<At-1;ar++)for(var dn=0;dn<Mt-1;dn++){ue(ar,dn,xe);for(var br=0;br<6;br++)fe[ds++]=xe[qt[br]]}kt?c.generateVertexNormals():N.value=null}t.material.get("normalMap")&&c.generateTangents(),c.updateBoundingBox(),c.dirty(),t.material.transparent=Te,t.material.depthMask=!Te},_getDataShape:function(t,i){for(var l=-1/0,f=0,c=0,p=0,y=!1,x=i?"u":"x",D=t.count(),E=0;E<D;E++){var N=t.get(x,E);N<l&&(p=c,c=0,f++),l=N,c++}if((!f||c===1)&&(y=!0),!y)return[f+1,c];for(var $=Math.floor(Math.sqrt(D));$>0;){if(Math.floor(D/$)===D/$)return[$,D/$];$--}return $=Math.floor(Math.sqrt(D)),[$,$]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function kh(t){t.registerChartView(Vh),t.registerSeriesModel(pd),t.registerLayout(function(i,l){i.eachSeriesByType("surface",function(f){var c=f.coordinateSystem;!c||c.type;var p=f.getData(),y=new Float32Array(3*p.count()),x=[NaN,NaN,NaN];if(c&&c.type==="cartesian3D"){var D=c.dimensions,E=D.map(function(N){return f.coordDimToDataDim(N)[0]});p.each(E,function(N,$,_t,pt){var At;p.hasValue(pt)?At=c.dataToPoint([N,$,_t]):At=x,y[pt*3]=At[0],y[pt*3+1]=At[1],y[pt*3+2]=At[2]})}p.setLayout("points",y)})})}(0,F.D$)(kh);function Uh(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var Mo=F.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){t=t||{};var i=this.get("coordinateSystem");if(!(i==null||i==="geo3D")){if(!1)var l,f;this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null}},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var i=F._y.createDimensions(t.data,{coordDimensions:["value"]}),l=new F.aV(i,this);l.initData(t.data);var f={};return l.each(function(c){var p=l.getName(c),y=l.getItemModel(c);f[p]=y}),this._regionModelMap=f,l},formatTooltip:function(t){return Xl(this,t)},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new F.Hn(null,this)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getName(t);if(i.transform){var f=i.getRegion(l);return f?f.geometries:[]}else{this._geo||(this._geo=Fv.createGeo3D(this));for(var f=this._geo.getRegion(l),c=[],p=0;p<f.geometries.length;p++){var y=f.geometries[p],x=[],D=Uh(i,y.exterior);if(x&&x.length)for(var E=0;E<y.interiors.length;E++)x.push(Uh(i,x[E]));c.push({interiors:x,exterior:D})}return c}},getFormattedLabel:function(t,i){var l=Ys.getFormattedLabel(this,t,i);return l==null&&(l=this.getData().getName(t)),l},defaultOption:{coordinateSystem:"geo3D",data:null}});F.D5.merge(Mo.prototype,sh),F.D5.merge(Mo.prototype,Tu),F.D5.merge(Mo.prototype,Qo),F.D5.merge(Mo.prototype,vo),F.D5.merge(Mo.prototype,Gs);var cs=Mo,A0=F.TA.extend({type:"map3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new Zu(i),this.groupGL=new ae.Node},render:function(t,i,l){var f=t.coordinateSystem;if(!(!f||!f.viewGL)){this.groupGL.add(this._geo3DBuilder.rootNode),f.viewGL.add(this.groupGL);var c;if(f.type==="geo3D"){c=f,this._sceneHelper||(this._sceneHelper=new Is,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._control;p||(p=this._control=new Sl({zr:l.getZr()}),this._control.init());var y=t.getModel("viewControl");p.setViewGL(f.viewGL),p.setFromViewControlModel(y,0),p.off("update"),p.on("update",function(){l.dispatchAction({type:"map3DChangeCamera",alpha:p.getAlpha(),beta:p.getBeta(),distance:p.getDistance(),from:this.uid,map3DId:t.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),c=t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,i,l,0,t.getData().count());var x=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(D){D.material&&D.material[x]("fragment","SRGB_DECODE")})}},afterRender:function(t,i,l,f){var c=f.renderer,p=t.coordinateSystem;p&&p.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function gd(t){vh(t),t.registerChartView(A0),t.registerSeriesModel(cs),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"series",subType:"map3D",query:i},function(f){f.setView(i)})})}(0,F.D$)(gd);var md=F.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return F._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Zh=z(58427),rf=z(85755);function Oi(t){this.viewGL=t}Oi.prototype.reset=function(t,i){this._updateCamera(i.getWidth(),i.getHeight(),i.getDevicePixelRatio()),this._viewTransform=Zh.Ue(),this.updateTransform(t,i)},Oi.prototype.updateTransform=function(t,i){var l=t.coordinateSystem;l.getRoamTransform&&(Zh.U_(this._viewTransform,l.getRoamTransform()),this._setCameraTransform(this._viewTransform),i.getZr().refresh())},Oi.prototype.dataToPoint=function(t,i,l){l=t.dataToPoint(i,null,l);var f=this._viewTransform;f&&rf.Ne(l,l,f)},Oi.prototype.removeTransformInPoint=function(t){return this._viewTransform&&rf.Ne(t,t,this._viewTransform),t},Oi.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1},Oi.prototype._setCameraTransform=function(t){var i=this.viewGL.camera;i.position.set(t[4],t[5],0),i.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)},Oi.prototype._updateCamera=function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.top=0,f.bottom=i,f.right=t,f.near=0,f.far=100};var nf=Oi,yd=F.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new mo("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new nf(this.viewGL)},render:function(t,i,l){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,l),!!t.getData().count()){var f=this._pointsBuilderList[0];f||(f=this._pointsBuilderList[0]=new Kl(!0,l)),this._pointsBuilderList.length=1,this.groupGL.add(f.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),f.update(t,i,l),this.viewGL.setPostEffect(t.getModel("postEffect"),l)}},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var c=this._pointsBuilderList[this._currentStep];c||(c=new Kl(!0,f),this._pointsBuilderList[this._currentStep]=c),this.groupGL.add(c.rootNode),this._removeTransformInPoints(i.getData().getLayout("points")),c.setSizeScale(this._sizeScale),c.update(i,l,f,t.start,t.end),f.getZr().refresh(),this._currentStep++}},updateTransform:function(t,i,l){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,l);var f=this._glViewHelper.getZoom(),c=Math.max((t.get("zoomScale")||0)*(f-1)+1,0);this._sizeScale=c,this._pointsBuilderList.forEach(function(p){p.setSizeScale(c)})}},_removeTransformInPoints:function(t){if(t)for(var i=[],l=0;l<t.length;l+=2)i[0]=t[l],i[1]=t[l+1],this._glViewHelper.removeTransformInPoint(i),t[l]=i[0],t[l+1]=i[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(t){t.dispose()})},remove:function(){this.groupGL.removeAll()}});function b0(t){t.registerChartView(yd),t.registerSeriesModel(md),t.registerLayout({seriesType:"scatterGL",reset:function(i){var l=i.coordinateSystem,f=i.getData(),c;if(l){var p=l.dimensions.map(function(x){return f.mapDimension(x)}).slice(0,2),y=[];p.length===1?c=function(x){for(var D=new Float32Array((x.end-x.start)*2),E=x.start;E<x.end;E++){var N=(E-x.start)*2,$=f.get(p[0],E),_t=l.dataToPoint($);D[N]=_t[0],D[N+1]=_t[1]}f.setLayout("points",D)}:p.length===2&&(c=function(x){for(var D=new Float32Array((x.end-x.start)*2),E=x.start;E<x.end;E++){var N=(E-x.start)*2,$=f.get(p[0],E),_t=f.get(p[1],E);y[0]=$,y[1]=_t,y=l.dataToPoint(y),D[N]=y[0],D[N+1]=y[1]}f.setLayout("points",D)})}return{progress:c}}})}(0,F.D$)(b0);var Wh=z(91054),M0=z(89130),_d=M0.Z;function C0(t,i,l,f,c){for(var p=new Wh.ZP(f),y=0;y<t.length;y++)p.addNode(Jr.firstNotNull(t[y].id,t[y].name,y),y);for(var x=[],D=[],E=0,y=0;y<i.length;y++){var N=i[y],$=N.source,_t=N.target;p.addEdge($,_t,E)&&(D.push(N),x.push(Jr.firstNotNull(N.id,$+" > "+_t)),E++)}var pt,At=F._y.createDimensions(t,{coordDimensions:["value"]});pt=new F.aV(At,l),pt.initData(t);var Mt=new F.aV(["value"],l);return Mt.initData(D,x),c&&c(pt,Mt),_d({mainData:pt,struct:p,structAttr:"graph",datas:{node:pt,edge:Mt},datasAttr:{node:"data",edge:"edgeData"}}),p.update(),p}var Js=F.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){Js.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){Js.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,i,l,f){var c=Ys.getFormattedLabel(this,t,i,l,f);if(c==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];c=p.get(y,t)}return c},getInitialData:function(t,i){var l=t.edges||t.links||[],f=t.data||t.nodes||[],c=this;if(f&&l)return C0(f,l,this,!0,p).data;function p(y,x){y.wrapMethod("getItemModel",function($){const _t=c._categoriesModels,pt=$.getShallow("category"),At=_t[pt];return At&&(At.parentModel=$.parentModel,$.parentModel=At),$});const D=i.getModel([]).getModel;function E($,_t){const pt=D.call(this,$,_t);return pt.resolveParentPath=N,pt}x.wrapMethod("getItemModel",function($){return $.resolveParentPath=N,$.getModel=E,$});function N($){if($&&($[0]==="label"||$[1]==="label")){const _t=$.slice();return $[0]==="label"?_t[0]="edgeLabel":$[1]==="label"&&(_t[1]="edgeLabel"),_t}return $}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,i,l){if(l==="edge"){var f=this.getData(),c=this.getDataParams(t,l),p=f.graph.getEdgeByIndex(t),y=f.getName(p.node1.dataIndex),x=f.getName(p.node2.dataIndex),D=[];return y!=null&&D.push(y),x!=null&&D.push(x),D=F.WU.encodeHTML(D.join(" > ")),c.value&&(D+=" : "+F.WU.encodeHTML(c.value)),D}else return Js.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map(function(l){return l.value!=null?l:Object.assign({value:0},l)}),i=new F.aV(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(l){return i.getItemModel(l,!0)})},setView:function(t){t.zoom!=null&&(this.option.zoom=t.zoom),t.offset!=null&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var i=0;i<t.length/2;i++){var l=t[i*2],f=t[i*2+1],c=this.getData().getRawDataItem(i);c.x=l,c.y=f}},isAnimationEnabled:function(){return Js.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),Hh=Js,li=mn.vec2,xd=[[0,0],[1,1]],af=Qr.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Qr.Attribute("position","float",2,"POSITION"),normal:new Qr.Attribute("normal","float",2),offset:new Qr.Attribute("offset","float",1),color:new Qr.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.offset.init(t),i.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var c=li.dist(t,i)+li.dist(l,i)+li.dist(f,l),p=1/(c+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(xd)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(xd)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?0:(i-1)*2},addCubicCurve:function(t,i,l,f,c,p){p==null&&(p=1);for(var y=t[0],x=t[1],D=i[0],E=i[1],N=l[0],$=l[1],_t=f[0],pt=f[1],At=this._getCubicCurveApproxStep(t,i,l,f),Mt=At*At,Nt=Mt*At,kt=3*At,te=3*Mt,qt=6*Mt,jt=6*Nt,fe=y-D*2+N,ue=x-E*2+$,Te=(D-N)*3-y+_t,xe=(E-$)*3-x+pt,Ie=y,je=x,Ve=(D-y)*kt+fe*te+Te*Nt,Je=(E-x)*kt+ue*te+xe*Nt,er=fe*qt+Te*jt,Xe=ue*qt+xe*jt,ir=Te*jt,xr=xe*jt,Lr=0,ar=0,vn=Math.ceil(1/At),br=new Float32Array((vn+1)*3),br=[],Cn=0,ar=0;ar<vn+1;ar++)br[Cn++]=Ie,br[Cn++]=je,Ie+=Ve,je+=Je,Ve+=er,Je+=Xe,er+=ir,Xe+=xr,Lr+=At,Lr>1&&(Ie=Ve>0?Math.min(Ie,_t):Math.max(Ie,_t),je=Je>0?Math.min(je,pt):Math.max(je,pt));this.addPolyline(br,c,p)},addLine:function(t,i,l,f){this.addPolyline([t,i],l,f)},addPolyline:function(){var t=li.create(),i=li.create(),l=li.create(),f=li.create(),c=[],p=[],y=[];return function(x,D,E,N,$){if(x.length){var _t=typeof x[0]!="number";if($==null&&($=_t?x.length:x.length/2),!($<2)){N==null&&(N=0),E==null&&(E=1),this._itemVertexOffsets.push(this._vertexOffset);for(var pt=_t?typeof D[0]!="number":D.length/4===$,At=this.attributes.position,Mt=this.attributes.color,Nt=this.attributes.offset,kt=this.attributes.normal,te=this.indices,qt=this._vertexOffset,jt,fe=0;fe<$;fe++){if(_t)c=x[fe+N],pt?jt=D[fe+N]:jt=D;else{var ue=fe*2+N;if(c=c||[],c[0]=x[ue],c[1]=x[ue+1],pt){var Te=fe*4+N;jt=jt||[],jt[0]=D[Te],jt[1]=D[Te+1],jt[2]=D[Te+2],jt[3]=D[Te+3]}else jt=D}if(this.useNativeLine)fe>1&&(At.copy(qt,qt-1),Mt.copy(qt,qt-1),qt++);else{var xe;if(fe<$-1){if(_t)li.copy(p,x[fe+1]);else{var ue=(fe+1)*2+N;p=p||[],p[0]=x[ue],p[1]=x[ue+1]}if(fe>0){li.sub(t,c,y),li.sub(i,p,c),li.normalize(t,t),li.normalize(i,i),li.add(f,t,i),li.normalize(f,f);var Ie=E/2*Math.min(1/li.dot(t,f),2);l[0]=-f[1],l[1]=f[0],xe=Ie}else li.sub(t,p,c),li.normalize(t,t),l[0]=-t[1],l[1]=t[0],xe=E/2}else li.sub(t,c,y),li.normalize(t,t),l[0]=-t[1],l[1]=t[0],xe=E/2;kt.set(qt,l),kt.set(qt+1,l),Nt.set(qt,xe),Nt.set(qt+1,-xe),li.copy(y,c),At.set(qt,c),At.set(qt+1,c),Mt.set(qt,jt),Mt.set(qt+1,jt),qt+=2}if(this.useNativeLine)Mt.set(qt,jt),At.set(qt,c),qt++;else if(fe>0){var je=this._faceOffset*3,te=this.indices;te[je]=qt-4,te[je+1]=qt-3,te[je+2]=qt-2,te[je+3]=qt-3,te[je+4]=qt-1,te[je+5]=qt-2,this._faceOffset+=2}}this._vertexOffset=qt}}}}(),setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,c=l;c<f;c++)this.attributes.color.set(c,i);this.dirty("color")}});F.D5.defaults(af.prototype,Ii);var of=af,Sd=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;ae.Shader.import(Sd);var sf={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function Si(t){var i={type:ae.Texture.FLOAT,minFilter:ae.Texture.NEAREST,magFilter:ae.Texture.NEAREST};this._positionSourceTex=new ae.Texture2D(i),this._positionSourceTex.flipY=!1,this._positionTex=new ae.Texture2D(i),this._positionPrevTex=new ae.Texture2D(i),this._forceTex=new ae.Texture2D(i),this._forcePrevTex=new ae.Texture2D(i),this._weightedSumTex=new ae.Texture2D(i),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new ae.Texture2D(i),this._globalSpeedPrevTex=new ae.Texture2D(i),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new xn({fragment:ae.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new xn({fragment:ae.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new xn({fragment:ae.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new xn({fragment:ae.Shader.source("clay.compositor.output")});var l=function(f){f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE)};this._edgeForceMesh=new ae.Mesh({geometry:new ae.Geometry({attributes:{node1:new ae.Geometry.Attribute("node1","float",2),node2:new ae.Geometry.Attribute("node2","float",2),weight:new ae.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new ae.Material({transparent:!0,shader:ae.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:l,depthMask:!1,depthText:!1}),mode:ae.Mesh.POINTS}),this._weightedSumMesh=new ae.Mesh({geometry:new ae.Geometry({attributes:{node:new ae.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new ae.Material({transparent:!0,shader:ae.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:l,depthMask:!1,depthText:!1}),mode:ae.Mesh.POINTS}),this._framebuffer=new Xn({depthBuffer:!1}),this._dummyCamera=new ae.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}Si.prototype.updateOption=function(t){for(var i in sf)this[i]=sf[i];var l=this._nodes.length;if(l>5e4?this.jitterTolerence=10:l>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,l>100?this.scaling=2:this.scaling=10,t)for(var i in sf)t[i]!=null&&(this[i]=t[i]);if(this.repulsionByDegree)for(var f=this._positionSourceTex.pixels,c=0;c<this._nodes.length;c++)f[c*4+2]=(this._nodes[c].degree||0)+1},Si.prototype._updateGravityCenter=function(t){var i=this._nodes,l=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var f=[1/0,1/0],c=[-1/0,-1/0],p=0;p<i.length;p++)f[0]=Math.min(i[p].x,f[0]),f[1]=Math.min(i[p].y,f[1]),c[0]=Math.max(i[p].x,c[0]),c[1]=Math.max(i[p].y,c[1]);this._gravityCenter=[(f[0]+c[0])*.5,(f[1]+c[1])*.5]}for(var p=0;p<l.length;p++){var y=l[p].node1,x=l[p].node2;i[y].degree=(i[y].degree||0)+1,i[x].degree=(i[x].degree||0)+1}},Si.prototype.initData=function(t,i){this._nodes=t,this._edges=i,this._updateGravityCenter();var l=Math.ceil(Math.sqrt(t.length)),f=l,c=new Float32Array(l*f*4);this._resize(l,f);for(var p=0,y=0;y<t.length;y++){var x=t[y];c[p++]=x.x||0,c[p++]=x.y||0,c[p++]=x.mass||1,c[p++]=x.size||1}this._positionSourceTex.pixels=c;var D=this._edgeForceMesh.geometry,E=i.length;D.attributes.node1.init(E*2),D.attributes.node2.init(E*2),D.attributes.weight.init(E*2);for(var N=[],y=0;y<i.length;y++){var $=D.attributes,_t=i[y].weight;_t==null&&(_t=1),$.node1.set(y,this.getNodeUV(i[y].node1,N)),$.node2.set(y,this.getNodeUV(i[y].node2,N)),$.weight.set(y,_t),$.node1.set(y+E,this.getNodeUV(i[y].node2,N)),$.node2.set(y+E,this.getNodeUV(i[y].node1,N)),$.weight.set(y+E,_t)}var pt=this._weightedSumMesh.geometry;pt.attributes.node.init(t.length);for(var y=0;y<t.length;y++)pt.attributes.node.set(y,this.getNodeUV(y,N));D.dirty(),pt.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[l,f]),this._inited=!1,this._frame=0},Si.prototype.getNodes=function(){return this._nodes},Si.prototype.getEdges=function(){return this._edges},Si.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var i=this._nodeRepulsionPass;i.setUniform("strongGravityMode",this.strongGravityMode),i.setUniform("gravity",this.gravity),i.setUniform("gravityCenter",this._gravityCenter),i.setUniform("scaling",this.scaling),i.setUniform("preventOverlap",this.preventOverlap),i.setUniform("positionTex",this._positionPrevTex),i.render(t);var l=this._edgeForceMesh;l.material.set("linLogMode",this.linLogMode),l.material.set("edgeWeightInfluence",this.edgeWeightInfluence),l.material.set("preventOverlap",this.preventOverlap),l.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([l],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var f=this._weightedSumMesh;f.material.set("positionTex",this._positionPrevTex),f.material.set("forceTex",this._forceTex),f.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([f],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var c=this._globalSpeedPass;c.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),c.setUniform("weightedSumTex",this._weightedSumTex),c.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),c.render(t);var p=this._positionPass;this._framebuffer.attach(this._positionTex),p.setUniform("globalSpeedTex",this._globalSpeedTex),p.setUniform("positionTex",this._positionPrevTex),p.setUniform("forceTex",this._forceTex),p.setUniform("forcePrevTex",this._forcePrevTex),p.render(t),this._framebuffer.unbind(t),this._swapTexture()},Si.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1);for(var f=0;f<i;f++)this.step(t);l&&l()},Si.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},Si.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1)||0,i},Si.prototype.getNodePosition=function(t,i){var l=this._positionArr,f=this._positionTex.width,c=this._positionTex.height,p=f*c;(!l||l.length!==p*4)&&(l=this._positionArr=new Float32Array(p*4)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,f,c,t.gl.RGBA,t.gl.FLOAT,l),this._framebuffer.unbind(t),i||(i=new Float32Array(this._nodes.length*2));for(var y=0;y<this._nodes.length;y++)i[y*2]=l[y*4],i[y*2+1]=l[y*4+1];return i},Si.prototype.getTextureData=function(t,i){var l=this["_"+i+"Tex"],f=l.width,c=l.height;this._framebuffer.bind(t),this._framebuffer.attach(l);var p=new Float32Array(f*c*4);return t.gl.readPixels(0,0,f,c,t.gl.RGBA,t.gl.FLOAT,p),this._framebuffer.unbind(t),p},Si.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},Si.prototype.isFinished=function(t){return this._frame>t},Si.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t;var t=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=t;var t=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t},Si.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)},Si.prototype._resize=function(t,i){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(l){this[l].width=t,this[l].height=i,this[l].dirty()},this)},Si.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};var lf=Si;function E0(){var t={create:function(){return new Float32Array(2)},dist:function(D,E){var N=E[0]-D[0],$=E[1]-D[1];return Math.sqrt(N*N+$*$)},len:function(D){var E=D[0],N=D[1];return Math.sqrt(E*E+N*N)},scaleAndAdd:function(D,E,N,$){return D[0]=E[0]+N[0]*$,D[1]=E[1]+N[1]*$,D},scale:function(D,E,N){return D[0]=E[0]*N,D[1]=E[1]*N,D},add:function(D,E,N){return D[0]=E[0]+N[0],D[1]=E[1]+N[1],D},sub:function(D,E,N){return D[0]=E[0]-N[0],D[1]=E[1]-N[1],D},normalize:function(D,E){var N=E[0],$=E[1],_t=N*N+$*$;return _t>0&&(_t=1/Math.sqrt(_t),D[0]=E[0]*_t,D[1]=E[1]*_t),D},negate:function(D,E){return D[0]=-E[0],D[1]=-E[1],D},copy:function(D,E){return D[0]=E[0],D[1]=E[1],D},set:function(D,E,N){return D[0]=E,D[1]=N,D}};function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var l=i.prototype;l.beforeUpdate=function(){for(var D=0;D<this.nSubRegions;D++)this.subRegions[D].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},l.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var D=0;D<this.nSubRegions;D++)this.subRegions[D].afterUpdate()},l.addNode=function(D){if(this.nSubRegions===0)if(this.node==null){this.node=D;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(D),this._updateCenterOfMass(D)},l.findSubRegion=function(D,E){for(var N=0;N<this.nSubRegions;N++){var $=this.subRegions[N];if($.contain(D,E))return $}},l.contain=function(D,E){return this.bbox[0]<=D&&this.bbox[2]>=D&&this.bbox[1]<=E&&this.bbox[3]>=E},l.setBBox=function(D,E,N,$){this.bbox[0]=D,this.bbox[1]=E,this.bbox[2]=N,this.bbox[3]=$,this.size=(N-D+$-E)/2},l._newSubRegion=function(){var D=this.subRegions[this.nSubRegions];return D||(D=new i,this.subRegions[this.nSubRegions]=D),this.nSubRegions++,D},l._addNodeToSubRegion=function(D){var E=this.findSubRegion(D.position[0],D.position[1]),N=this.bbox;if(!E){var $=(N[0]+N[2])/2,_t=(N[1]+N[3])/2,pt=(N[2]-N[0])/2,At=(N[3]-N[1])/2,Mt=D.position[0]>=$?1:0,Nt=D.position[1]>=_t?1:0,E=this._newSubRegion();E.setBBox(Mt*pt+N[0],Nt*At+N[1],(Mt+1)*pt+N[0],(Nt+1)*At+N[1])}E.addNode(D)},l._updateCenterOfMass=function(D){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var E=this.centerOfMass[0]*this.mass,N=this.centerOfMass[1]*this.mass;E+=D.position[0]*D.mass,N+=D.position[1]*D.mass,this.mass+=D.mass,this.centerOfMass[0]=E/this.mass,this.centerOfMass[1]=N/this.mass};function f(){this.position=new Float32Array(2),this.force=t.create(),this.forcePrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function c(D,E){this.source=D,this.target=E,this.weight=1}function p(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new i,this.rootRegion.centerOfMass=t.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var y=p.prototype;y.initNodes=function(D,E,N){var $=E.length;this.nodes.length=0;for(var _t=typeof N!="undefined",pt=0;pt<$;pt++){var At=new f;At.position[0]=D[pt*2],At.position[1]=D[pt*2+1],At.mass=E[pt],_t&&(At.size=N[pt]),this.nodes.push(At)}this._massArr=E,this._swingingArr=new Float32Array($),_t&&(this._sizeArr=N)},y.initEdges=function(D,E){var N=D.length/2;this.edges.length=0;for(var $=0;$<N;$++){var _t=D[$*2],pt=D[$*2+1],At=this.nodes[_t],Mt=this.nodes[pt];if(!At||!Mt){console.error("Node not exists, try initNodes before initEdges");return}At.outDegree++,Mt.inDegree++;var Nt=new c(At,Mt);E&&(Nt.weight=E[$]),this.edges.push(Nt)}},y.updateSettings=function(){if(this.repulsionByDegree)for(var D=0;D<this.nodes.length;D++){var E=this.nodes[D];E.mass=E.inDegree+E.outDegree+1}else for(var D=0;D<this.nodes.length;D++){var E=this.nodes[D];E.mass=this._massArr[D]}},y.update=function(){var D=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var E=0;E<D;E++)this.rootRegion.addNode(this.nodes[E]);this.rootRegion.afterUpdate()}for(var E=0;E<D;E++){var N=this.nodes[E];t.copy(N.forcePrev,N.force),t.set(N.force,0,0)}for(var E=0;E<D;E++){var $=this.nodes[E];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,$);else for(var _t=E+1;_t<D;_t++){var pt=this.nodes[_t];this.applyNodeToNodeRepulsion($,pt,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity($):this.applyNodeGravity($))}for(var E=0;E<this.edges.length;E++)this.applyEdgeAttraction(this.edges[E]);for(var At=0,Mt=0,Nt=t.create(),E=0;E<D;E++){var N=this.nodes[E],kt=t.dist(N.force,N.forcePrev);At+=kt*N.mass,t.add(Nt,N.force,N.forcePrev);var te=t.len(Nt)*.5;Mt+=te*N.mass,this._swingingArr[E]=kt}var qt=this.jitterTolerence*this.jitterTolerence*Mt/At;this._globalSpeed>0&&(qt=Math.min(qt/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=qt;for(var E=0;E<D;E++){var N=this.nodes[E],kt=this._swingingArr[E],jt=.1*qt/(1+qt*Math.sqrt(kt)),fe=t.len(N.force);fe>0&&(jt=Math.min(fe*jt,10)/fe,t.scaleAndAdd(N.position,N.position,N.force,jt))}},y.applyRegionToNodeRepulsion=function(){var D=t.create();return function(N,$){if(N.node)this.applyNodeToNodeRepulsion(N.node,$,!0);else{t.sub(D,$.position,N.centerOfMass);var _t=D[0]*D[0]+D[1]*D[1];if(_t>this.barnesHutTheta*N.size*N.size){var pt=this.scaling*$.mass*N.mass/_t;t.scaleAndAdd($.force,$.force,D,pt)}else for(var At=0;At<N.nSubRegions;At++)this.applyRegionToNodeRepulsion(N.subRegions[At],$)}}}(),y.applyNodeToNodeRepulsion=function(){var D=t.create();return function(N,$,_t){if(N!=$){t.sub(D,N.position,$.position);var pt=D[0]*D[0]+D[1]*D[1];if(pt!==0){var At;if(this.preventOverlap){var Mt=Math.sqrt(pt);if(Mt=Mt-N.size-$.size,Mt>0)At=this.scaling*N.mass*$.mass/(Mt*Mt);else if(Mt<0)At=this.scaling*100*N.mass*$.mass;else return}else At=this.scaling*N.mass*$.mass/pt;t.scaleAndAdd(N.force,N.force,D,At),t.scaleAndAdd($.force,$.force,D,-At)}}}}(),y.applyEdgeAttraction=function(){var D=t.create();return function(N){var $=N.source,_t=N.target;t.sub(D,$.position,_t.position);var pt=t.len(D),At;this.edgeWeightInfluence===0?At=1:this.edgeWeightInfluence===1?At=N.weight:At=Math.pow(N.weight,this.edgeWeightInfluence);var Mt;this.preventOverlap&&(pt=pt-$.size-_t.size,pt<=0)||(this.linLogMode?Mt=-At*Math.log(pt+1)/(pt+1):Mt=-At,t.scaleAndAdd($.force,$.force,D,Mt),t.scaleAndAdd(_t.force,_t.force,D,-Mt))}}(),y.applyNodeGravity=function(){var D=t.create();return function(E){t.sub(D,this.gravityCenter,E.position);var N=t.len(D);t.scaleAndAdd(E.force,E.force,D,this.gravity*E.mass/(N+1))}}(),y.applyNodeStrongGravity=function(){var D=t.create();return function(E){t.sub(D,this.gravityCenter,E.position),t.scaleAndAdd(E.force,E.force,D,this.gravity*E.mass)}}(),y.updateBBox=function(){for(var D=1/0,E=1/0,N=-1/0,$=-1/0,_t=0;_t<this.nodes.length;_t++){var pt=this.nodes[_t].position;D=Math.min(D,pt[0]),E=Math.min(E,pt[1]),N=Math.max(N,pt[0]),$=Math.max($,pt[1])}this.bbox[0]=D,this.bbox[1]=E,this.bbox[2]=N,this.bbox[3]=$},y.getGlobalSpeed=function(){return this._globalSpeed};var x=null;self.onmessage=function(D){switch(D.data.cmd){case"init":x=new p,x.initNodes(D.data.nodesPosition,D.data.nodesMass,D.data.nodesSize),x.initEdges(D.data.edges,D.data.edgesWeight);break;case"updateConfig":if(x)for(var E in D.data.config)x[E]=D.data.config[E];break;case"update":var N=D.data.steps;if(x){for(var $=0;$<N;$++)x.update();for(var _t=x.nodes.length,pt=new Float32Array(_t*2),$=0;$<_t;$++){var At=x.nodes[$];pt[$*2]=At.position[0],pt[$*2+1]=At.position[1]}self.postMessage({buffer:pt.buffer,globalSpeed:x.getGlobalSpeed()},[pt.buffer])}else{var Mt=new Float32Array;self.postMessage({buffer:Mt.buffer,globalSpeed:x.getGlobalSpeed()},[Mt.buffer])}break}}}var uf=E0,Qs=uf.toString();Qs=Qs.slice(Qs.indexOf("{")+1,Qs.lastIndexOf("}"));var vs={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},Ji=function(t){for(var i in vs)this[i]=vs[i];if(t)for(var i in t)this[i]=t[i];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Yr({type:Cr.FLOAT,flipY:!1,minFilter:Cr.NEAREST,magFilter:Cr.NEAREST})};Ji.prototype.initData=function(t,i){var l=new Blob([Qs]),f=window.URL.createObjectURL(l);this._worker=new Worker(f),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=i,this._frame=0;for(var c=t.length,p=i.length,y=new Float32Array(c*2),x=new Float32Array(c),D=new Float32Array(c),E=new Float32Array(p*2),N=new Float32Array(p),$=0;$<t.length;$++){var _t=t[$];y[$*2]=_t.x,y[$*2+1]=_t.y,x[$]=_t.mass==null?1:_t.mass,D[$]=_t.size==null?1:_t.size}for(var $=0;$<i.length;$++){var pt=i[$],At=pt.node1,Mt=pt.node2;E[$*2]=At,E[$*2+1]=Mt,N[$]=pt.weight==null?1:pt.weight}var Nt=Math.ceil(Math.sqrt(t.length)),kt=Nt,te=new Float32Array(Nt*kt*4),qt=this._positionTex;qt.width=Nt,qt.height=kt,qt.pixels=te,this._worker.postMessage({cmd:"init",nodesPosition:y,nodesMass:x,nodesSize:D,edges:E,edgesWeight:N}),this._globalSpeed=1/0},Ji.prototype.updateOption=function(t){var i={};for(var l in vs)i[l]=vs[l];var f=this._nodes,c=this._edges,p=f.length;if(p>5e4?i.jitterTolerence=10:p>5e3?i.jitterTolerence=1:i.jitterTolerence=.1,p>100?i.scaling=2:i.scaling=10,p>1e3?i.barnesHutOptimize=!0:i.barnesHutOptimize=!1,t)for(var l in vs)t[l]!=null&&(i[l]=t[l]);if(!i.gravityCenter){for(var y=[1/0,1/0],x=[-1/0,-1/0],D=0;D<f.length;D++)y[0]=Math.min(f[D].x,y[0]),y[1]=Math.min(f[D].y,y[1]),x[0]=Math.max(f[D].x,x[0]),x[1]=Math.max(f[D].y,x[1]);i.gravityCenter=[(y[0]+x[0])*.5,(y[1]+x[1])*.5]}for(var D=0;D<c.length;D++){var E=c[D].node1,N=c[D].node2;f[E].degree=(f[E].degree||0)+1,f[N].degree=(f[N].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:i})},Ji.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1),this._frame+=i,this._onupdate=l,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(i)})},Ji.prototype._$onupdate=function(t){if(!this._disposed){var i=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=i,this._updateTexture(i),this._onupdate&&this._onupdate()}},Ji.prototype.getNodePositionTexture=function(){return this._positionTex},Ji.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1),i},Ji.prototype.getNodes=function(){return this._nodes},Ji.prototype.getEdges=function(){return this._edges},Ji.prototype.isFinished=function(t){return this._frame>t},Ji.prototype.getNodePosition=function(t,i){if(i||(i=new Float32Array(this._nodes.length*2)),this._positionArr)for(var l=0;l<this._positionArr.length;l++)i[l]=this._positionArr[l];return i},Ji.prototype._updateTexture=function(t){for(var i=this._positionTex.pixels,l=0,f=0;f<t.length;)i[l++]=t[f++],i[l++]=t[f++],i[l++]=1,i[l++]=1;this._positionTex.dirty()},Ji.prototype.dispose=function(t){this._disposed=!0,this._worker=null};var Xh=Ji,Td=X.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var t=this._target,i=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(i,i,i),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var i=t.offsetX,l=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(i,l))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var f=this._convertPos(i,l);this._x=f.x,this._y=f.y}}},_convertPos:function(t,i){var l=this.viewGL.camera,f=this.viewGL.viewport;return{x:(t-f.x)/f.width*(l.right-l.left)+l.left,y:(i-f.y)/f.height*(l.bottom-l.top)+l.top}},_mouseMoveHandler:function(t){var i=this._convertPos(t.offsetX,t.offsetY);this._dx+=i.x-this._x,this._dy+=i.y-this._y,this._x=i.x,this._y=i.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){t=t.event;var i=t.wheelDelta||-t.detail;if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var c=i>0?1.1:.9,p=Math.max(Math.min(this._zoom*c,this.maxZoom),this.minZoom);c=p/this._zoom;var y=this._convertPos(l,f),x=(y.x-this._dx)*(c-1),D=(y.y-this._dy)*(c-1);this._dx-=x,this._dy-=D,this._zoom=p,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}}),Kh=Td,P0=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`,ff=mn.vec2;ae.Shader.import(P0);var L0=1,I0=F.TA.extend({type:"graphGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new mo("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Kl(!0,i),this._forceEdgesMesh=new ae.Mesh({material:new ae.Material({shader:ae.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new ae.Geometry({attributes:{node:new ae.Geometry.Attribute("node","float",2),color:new ae.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:ae.Mesh.LINES}),this._edgesMesh=new ae.Mesh({material:new ae.Material({shader:ae.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new of({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new Kh({zr:i.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,i,l){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=l,this._initLayout(t,i,l),this._pointsBuilder.update(t,i,l),this._forceLayoutInstance instanceof lf||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,l),this._control.off("update"),this._control.on("update",function(){l.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Jr.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var f=this._pointsBuilder.getPointsMesh();if(f.off("mousemove",this._mousemoveHandler),f.off("mouseout",this._mouseOutHandler,this),l.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var c=t.get("focusNodeAdjacencyOn");c==="click"?l.getZr().on("click",this._clickHandler):c==="mouseover"&&(f.on("mousemove",this._mousemoveHandler,this),f.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?i!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=i}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,i){var l=this._forceEdgesMesh.geometry,f=i.getEdgeData(),c=0,p=this._forceLayoutInstance,y=f.count()*2;l.attributes.node.init(y),l.attributes.color.init(y),f.each(function(x){var D=t[x];l.attributes.node.set(c,p.getNodeUV(D.node1)),l.attributes.node.set(c+1,p.getNodeUV(D.node2));var E=di(f,D.dataIndex),N=ae.parseColor(E);N[3]*=Jr.firstNotNull(si(f,D.dataIndex),1),l.attributes.color.set(c,N),l.attributes.color.set(c+1,N),c+=2}),l.dirty()},_updateMeshLinesGeometry:function(){var i=this._model.getEdgeData(),t=this._edgesMesh.geometry,i=this._model.getEdgeData(),l=this._model.getData().getLayout("points");t.resetOffset(),t.setVertexCount(i.count()*t.getLineVertexCount()),t.setTriangleCount(i.count()*t.getLineTriangleCount());var f=[],c=[],p=["lineStyle","width"];this._originalEdgeColors=new Float32Array(i.count()*4),this._edgeIndicesMap=new Float32Array(i.count()),i.each(function(y){var x=i.graph.getEdgeByIndex(y),D=x.node1.dataIndex*2,E=x.node2.dataIndex*2;f[0]=l[D],f[1]=l[D+1],c[0]=l[E],c[1]=l[E+1];var N=di(i,x.dataIndex),$=ae.parseColor(N);$[3]*=Jr.firstNotNull(si(i,x.dataIndex),1);var _t=i.getItemModel(x.dataIndex),pt=Jr.firstNotNull(_t.get(p),1)*this._api.getDevicePixelRatio();t.addLine(f,c,$,pt);for(var At=0;At<4;At++)this._originalEdgeColors[x.dataIndex*4+At]=$[At];this._edgeIndicesMap[x.dataIndex]=y},this),t.dirty()},_updateForceNodesGeometry:function(t){for(var i=this._pointsBuilder.getPointsMesh(),l=[],f=0;f<t.count();f++)this._forceLayoutInstance.getNodeUV(f,l),i.geometry.attributes.position.set(f,l);i.geometry.dirty("position")},_initLayout:function(t,i,l){var f=t.get("layout"),c=t.getGraph(),p=t.getBoxLayoutParams(),y=(0,Ia.ME)(p,{width:l.getWidth(),height:l.getHeight()});f==="force"&&(f="forceAtlas2"),this.stopLayout(t,i,l,{beforeLayout:!0});var x=t.getData(),D=t.getData();if(f==="forceAtlas2"){var E=t.getModel("forceAtlas2"),N=this._forceLayoutInstance,$=[],_t=[],pt=x.getDataExtent("value"),At=D.getDataExtent("value"),Mt=Jr.firstNotNull(E.get("edgeWeight"),1),Nt=Jr.firstNotNull(E.get("nodeWeight"),1);typeof Mt=="number"&&(Mt=[Mt,Mt]),typeof Nt=="number"&&(Nt=[Nt,Nt]);var kt=0,te={},qt=new Float32Array(x.count()*2);if(c.eachNode(function(fe){var ue=fe.dataIndex,Te=x.get("value",ue),xe,Ie;if(x.hasItemOption){var je=x.getItemModel(ue);xe=je.get("x"),Ie=je.get("y")}xe==null&&(xe=y.x+Math.random()*y.width,Ie=y.y+Math.random()*y.height),qt[kt*2]=xe,qt[kt*2+1]=Ie,te[fe.id]=kt++;var Ve=F.Rx.linearMap(Te,pt,Nt);isNaN(Ve)&&(isNaN(Nt[0])?Ve=1:Ve=Nt[0]),$.push({x:xe,y:Ie,mass:Ve,size:x.getItemVisual(ue,"symbolSize")})}),x.setLayout("points",qt),c.eachEdge(function(fe){var ue=fe.dataIndex,Te=x.get("value",ue),xe=F.Rx.linearMap(Te,At,Mt);isNaN(xe)&&(isNaN(Mt[0])?xe=1:xe=Mt[0]),_t.push({node1:te[fe.node1.id],node2:te[fe.node2.id],weight:xe,dataIndex:ue})}),!N){var jt=E.get("GPU");this._forceLayoutInstance&&(jt&&!(this._forceLayoutInstance instanceof lf)||!jt&&!(this._forceLayoutInstance instanceof Xh))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),N=this._forceLayoutInstance=jt?new lf:new Xh}N.initData($,_t),N.updateOption(E.option),this._updateForceEdgesGeometry(N.getEdges(),t),this._updatePositionTexture(),l.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var qt=new Float32Array(x.count()*2),kt=0;c.eachNode(function(Te){var xe=Te.dataIndex,Ie,je;if(x.hasItemOption){var Ve=x.getItemModel(xe);Ie=Ve.get("x"),je=Ve.get("y")}qt[kt++]=Ie,qt[kt++]=je}),x.setLayout("points",qt),this._updateAfterLayout(t,i,l)}},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,i,p,f){if(!(f&&f.from!=null&&f.from!==this.uid)){var c=this.viewGL,p=this._api,y=this._forceLayoutInstance,x=this._model.getData(),D=this._model.getModel("forceAtlas2");if(y&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var E=this,N=this._layoutId=L0++,$=D.getShallow("maxSteps"),_t=D.getShallow("steps"),pt=0,At=Math.max(_t*2,20),Mt=function(Nt){if(Nt===E._layoutId){if(y.isFinished($)){p.dispatchAction({type:"graphGLStopLayout",from:E.uid}),p.dispatchAction({type:"graphGLFinishLayout",points:x.getLayout("points"),from:E.uid});return}y.update(c.layer.renderer,_t,function(){E._updatePositionTexture(),pt+=_t,pt>=At&&(E._syncNodePosition(t),pt=0),p.getZr().refresh(),(0,yu.Z)(function(){Mt(Nt)})})}};(0,yu.Z)(function(){E._forceLayoutInstanceToDispose&&(E._forceLayoutInstanceToDispose.dispose(c.layer.renderer),E._forceLayoutInstanceToDispose=null),Mt(N)}),this._layouting=!0}}},stopLayout:function(t,i,l,f){f&&f.from!=null&&f.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(f&&f.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,i,l)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(t){var i=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",i),t.setNodePosition(i)},_updateAfterLayout:function(t,i,l){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,i,l),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,i,l,f){var c=this._model.getData();this._downplayAll();var p=f.dataIndex,y=c.graph,x=[],D=y.getNodeByIndex(p);x.push(D),D.edges.forEach(function(N){N.dataIndex<0||(N.node1!==D&&x.push(N.node1),N.node2!==D&&x.push(N.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),x.forEach(function(N){this._pointsBuilder.highlight(c,N.dataIndex)},this),this._pointsBuilder.updateLabels(x.map(function(N){return N.dataIndex}));var E=[];D.edges.forEach(function(N){N.dataIndex>=0&&(this._highlightEdge(N.dataIndex),E.push(N))},this),this._focusNodes=x,this._focusEdges=E},unfocusNodeAdjacency:function(t,i,l,f){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var i=this._model.getEdgeData().getItemModel(t),l=ae.parseColor(i.get("emphasis.lineStyle.color")||i.get("lineStyle.color")),f=Jr.firstNotNull(i.get("emphasis.lineStyle.opacity"),i.get("lineStyle.opacity"),1);l[3]*=f,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],l)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(t){this._downplayEdge(t.dataIndex)},this)},_downplayEdge:function(t){var i=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],i)},_setEdgeFade:function(){var t=[];return function(i,l){this._getColor(i,t),t[3]*=l,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[i],t)}}(),_getColor:function(t,i){for(var l=0;l<4;l++)i[l]=this._originalEdgeColors[t*4+l];return i},_fadeOutEdgesAll:function(t){var i=this._model.getData().graph;i.eachEdge(function(l){this._setEdgeFade(l.dataIndex,t)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,i){this.viewGL.setViewport(0,0,i.getWidth(),i.getHeight(),i.getDevicePixelRatio());for(var l=this.viewGL.camera,f=t.getData(),c=f.getLayout("points"),p=ff.create(1/0,1/0),y=ff.create(-1/0,-1/0),x=[],D=0;D<c.length;)x[0]=c[D++],x[1]=c[D++],ff.min(p,p,x),ff.max(y,y,x);var E=(y[1]+p[1])/2,N=(y[0]+p[0])/2;if(!(N>l.left&&N<l.right&&E<l.bottom&&E>l.top)){var $=Math.max(y[0]-p[0],10),_t=$/i.getWidth()*i.getHeight();$*=1.4,_t*=1.4,p[0]-=$*.2,l.left=p[0],l.top=E-_t/2,l.bottom=E+_t/2,l.right=$+p[0],l.near=0,l.far=100}},dispose:function(){var t=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(t),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function hf(t){return t instanceof Array||(t=[t,t]),t}function R0(t){t.registerChartView(I0),t.registerSeriesModel(Hh),t.registerVisual(function(l){const f={};l.eachSeriesByType("graphGL",function(c){var p=c.getCategoriesData(),y=c.getData(),x={};p.each(function(D){var E=p.getName(D);x["ec-"+E]=D;var N=p.getItemModel(D),$=N.getModel("itemStyle").getItemStyle();$.fill||($.fill=c.getColorFromPalette(E,f)),p.setItemVisual(D,"style",$);var _t=["symbol","symbolSize","symbolKeepAspect"];for(let At=0;At<_t.length;At++){var pt=N.getShallow(_t[At],!0);pt!=null&&p.setItemVisual(D,_t[At],pt)}}),p.count()&&y.each(function(D){var E=y.getItemModel(D);let N=E.getShallow("category");if(N!=null){typeof N=="string"&&(N=x["ec-"+N]);var $=p.getItemVisual(N,"style"),_t=y.ensureUniqueItemVisual(D,"style");F.D5.extend(_t,$);var pt=["symbol","symbolSize","symbolKeepAspect"];for(let At=0;At<pt.length;At++)y.setItemVisual(D,pt[At],p.getItemVisual(N,pt[At]))}})})}),t.registerVisual(function(l){l.eachSeriesByType("graphGL",function(f){var c=f.getGraph(),p=f.getEdgeData(),y=hf(f.get("edgeSymbol")),x=hf(f.get("edgeSymbolSize"));p.setVisual("drawType","stroke"),p.setVisual("fromSymbol",y&&y[0]),p.setVisual("toSymbol",y&&y[1]),p.setVisual("fromSymbolSize",x&&x[0]),p.setVisual("toSymbolSize",x&&x[1]),p.setVisual("style",f.getModel("lineStyle").getLineStyle()),p.each(function(D){var E=p.getItemModel(D),N=c.getEdgeByIndex(D),$=hf(E.getShallow("symbol",!0)),_t=hf(E.getShallow("symbolSize",!0)),pt=E.getModel("lineStyle").getLineStyle(),At=p.ensureUniqueItemVisual(D,"style");switch(F.D5.extend(At,pt),At.stroke){case"source":{var Mt=N.node1.getVisual("style");At.stroke=Mt&&Mt.fill;break}case"target":{var Mt=N.node2.getVisual("style");At.stroke=Mt&&Mt.fill;break}}$[0]&&N.setVisual("fromSymbol",$[0]),$[1]&&N.setVisual("toSymbol",$[1]),_t[0]&&N.setVisual("fromSymbolSize",_t[0]),_t[1]&&N.setVisual("toSymbolSize",_t[1])})})}),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(l,f){f.eachComponent({mainType:"series",query:l},function(c){c.setView(l)})});function i(){}t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},i),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},i),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},i),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},i)}(0,F.D$)(R0);var O0=F.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,i){var l=this.get("coordinateSystem"),f=l==="geo"?["lng","lat"]:F.wL(l)||["x","y"];f.push("vx","vy");var c=F._y.createDimensions(this.getSource(),{coordDimensions:f,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),p=new F.aV(c,this);return p.initData(this.getSource()),p},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}}),N0=Qr.extend(function(){return{dynamic:!0,attributes:{position:new Qr.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var i=this.attributes,l=4*t,f=2*t;this.vertexCount!==l&&i.position.init(l),this.triangleCount!==f&&(f===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(f*3):new Uint16Array(f*3))},addLine:function(t){var i=this._vertexOffset;this.attributes.position.set(i,[t[0],t[1],1]),this.attributes.position.set(i+1,[t[0],t[1],-1]),this.attributes.position.set(i+2,[t[0],t[1],2]),this.attributes.position.set(i+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[i,i+1,i+2]),this.setTriangleIndices(this._faceOffset++,[i+1,i+2,i+3]),this._vertexOffset+=4}}),B0=N0,Dd=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;dr.import(Dd);function F0(t){var i=document.createElement("canvas");i.width=i.height=t;var l=i.getContext("2d");return l.fillStyle="#fff",l.arc(t/2,t/2,t/2,0,Math.PI*2),l.fill(),i}var Yh=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Yr({type:Cr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};Yh.prototype={constructor:Yh,init:function(){var t={type:Cr.FLOAT,minFilter:Cr.NEAREST,magFilter:Cr.NEAREST,useMipmap:!1};this._spawnTexture=new Yr(t),this._particleTexture0=new Yr(t),this._particleTexture1=new Yr(t),this._frameBuffer=new Xn({depthBuffer:!1}),this._particlePass=new xn({fragment:dr.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new xn({fragment:dr.source("clay.compositor.downsample")});var i=new xi({renderOrder:10,material:new Or({shader:new dr(dr.source("ecgl.vfParticle.renderPoints.vertex"),dr.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:xi.POINTS,geometry:new Qr({dynamic:!0,mainAttribute:"texcoord0"})}),l=new xi({renderOrder:10,material:new Or({shader:new dr(dr.source("ecgl.vfParticle.renderLines.vertex"),dr.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new B0,culling:!1}),f=new xi({material:new Or({shader:new dr(dr.source("ecgl.color.vertex"),dr.source("ecgl.color.fragment"))}),geometry:new Ut});f.material.enableTexture("diffuseMap"),this._particlePointsMesh=i,this._particleLinesMesh=l,this._lastFrameFullQuadMesh=f,this._camera=new zn,this._thisFrameTexture=new Yr,this._lastFrameTexture=new Yr},setParticleDensity:function(t,i){for(var l=t*i,f=new Float32Array(l*4),c=0,p=this.particleLife,y=0;y<t;y++)for(var x=0;x<i;x++,c++){f[c*4]=Math.random(),f[c*4+1]=Math.random(),f[c*4+2]=Math.random();var D=(p[1]-p[0])*Math.random()+p[0];f[c*4+3]=D}this._particleType==="line"?this._setLineGeometry(t,i):this._setPointsGeometry(t,i),this._spawnTexture.width=t,this._spawnTexture.height=i,this._spawnTexture.pixels=f,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=i,this._particlePass.setUniform("textureSize",[t,i])},_setPointsGeometry:function(t,i){var l=t*i,f=this._particlePointsMesh.geometry,c=f.attributes;c.texcoord0.init(l);for(var p=0,y=0;y<t;y++)for(var x=0;x<i;x++,p++)c.texcoord0.value[p*2]=y/t,c.texcoord0.value[p*2+1]=x/i;f.dirty()},_setLineGeometry:function(t,i){var l=t*i,f=this._getParticleMesh().geometry;f.setLineCount(l),f.resetOffset();for(var c=0;c<t;c++)for(var p=0;p<i;p++)f.addLine([c/t,p/i]);f.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(t,i,l,f){var c=this._getParticleMesh(),p=this._frameBuffer,y=this._particlePass;f&&this._updateDownsampleTextures(t,i),c.material.set("size",this._particleSize*this._supersampling),c.material.set("color",this.particleColor),y.setUniform("speedScaling",this.particleSpeedScaling),p.attach(this._particleTexture1),y.setUniform("firstFrameTime",f?(this.particleLife[1]+this.particleLife[0])/2:0),y.setUniform("particleTexture",this._particleTexture0),y.setUniform("deltaTime",l),y.setUniform("elapsedTime",this._elapsedTime),y.render(t,p),c.material.set("particleTexture",this._particleTexture1),c.material.set("prevParticleTexture",this._particleTexture0),p.attach(this._thisFrameTexture),p.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var x=this._lastFrameFullQuadMesh;x.material.set("diffuseMap",this._lastFrameTexture),x.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([x,c],this._camera),p.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=l},_downsample:function(t){var i=this._downsampleTextures;if(i.length!==0)for(var l=0,f=this._thisFrameTexture,c=i[l];c;)this._frameBuffer.attach(c),this._downsamplePass.setUniform("texture",f),this._downsamplePass.setUniform("textureSize",[f.width,f.height]),this._downsamplePass.render(t,this._frameBuffer),f=c,c=i[++l]},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,i){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=i*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=i*this._supersampling,this._width=t,this._height=i},setParticleSize:function(t){var i=this._getParticleMesh();if(t<=2){i.material.disableTexture("spriteTexture"),i.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Yr),(!this._spriteTexture.image||this._spriteTexture.image.width!==t)&&(this._spriteTexture.image=F0(t),this._spriteTexture.dirty()),i.material.transparent=!0,i.material.enableTexture("spriteTexture"),i.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var i=this._getParticleMesh().material;i[t?"enableTexture":"disableTexture"]("gradientTexture"),i.setUniform("gradientTexture",t)},setColorTextureImage:function(t,i){var l=this._getParticleMesh().material;l.setTextureImage("colorTexture",t,i,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var i=this._frameBuffer;i.attach(this._lastFrameTexture),i.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),i.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,i){for(var l=this._downsampleTextures,f=Math.max(Math.floor(Math.log(this._supersampling/i.getDevicePixelRatio())/Math.log(2)),0),c=2,p=this._width*this._supersampling,y=this._height*this._supersampling,x=0;x<f;x++)l[x]=l[x]||new Yr,l[x].width=p/c,l[x].height=y/c,c*=2;for(;x<l.length;x++)l[x].dispose(t);l.length=f},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t;var t=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach(function(i){i.dispose(t)})}};var G0=Yh,z0=F.TA.extend({type:"flowGL",__ecgl__:!0,init:function(t,i){this.viewGL=new mo("orthographic"),this.groupGL=new ae.Node,this.viewGL.add(this.groupGL),this._particleSurface=new G0;var l=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.color.vertex"),fragment:ae.Shader.source("ecgl.color.fragment")}),transparent:!0})});l.material.enableTexture("diffuseMap"),this.groupGL.add(l),this._planeMesh=l},render:function(t,i,l){var f=this._particleSurface;f.setParticleType(t.get("particleType")),f.setSupersampling(t.get("supersampling")),this._updateData(t,l),this._updateCamera(l.getWidth(),l.getHeight(),l.getDevicePixelRatio());var c=Jr.firstNotNull(t.get("particleDensity"),128);f.setParticleDensity(c,c);var p=this._planeMesh,y=+new Date,x=this,D=!0;p.__percent=0,p.stopAnimation(),p.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var $=+new Date,_t=Math.min($-y,20);y=y+_t,x._renderer&&(f.update(x._renderer,l,_t/1e3,D),p.material.set("diffuseMap",f.getSurfaceTexture())),D=!1}).start();var E=t.getModel("itemStyle"),N=ae.parseColor(E.get("color"));N[3]*=Jr.firstNotNull(E.get("opacity"),1),p.material.set("color",N),f.setColorTextureImage(t.get("colorTexture"),l),f.setParticleSize(t.get("particleSize")),f.particleSpeedScaling=t.get("particleSpeed"),f.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,i,l){this._updateData(t,l)},afterRender:function(t,i,l,f){var c=f.renderer;this._renderer=c},_updateData:function(t,i){var l=t.coordinateSystem,f=l.dimensions.map(function(te){return t.coordDimToDataDim(te)[0]}),c=t.getData(),p=c.getDataExtent(f[0]),y=c.getDataExtent(f[1]),x=t.get("gridWidth"),D=t.get("gridHeight");if(x==null||x==="auto"){var E=(p[1]-p[0])/(y[1]-y[0]);x=Math.round(Math.sqrt(E*c.count()))}(D==null||D==="auto")&&(D=Math.ceil(c.count()/x));var N=this._particleSurface.vectorFieldTexture,$=N.pixels;if(!$||$.length!==D*x*4)$=N.pixels=new Float32Array(x*D*4);else for(var _t=0;_t<$.length;_t++)$[_t]=0;var pt=0,At=1/0,Mt=new Float32Array(c.count()*2),Nt=0,kt=[[1/0,1/0],[-1/0,-1/0]];c.each([f[0],f[1],"vx","vy"],function(te,qt,jt,fe){var ue=l.dataToPoint([te,qt]);Mt[Nt++]=ue[0],Mt[Nt++]=ue[1],kt[0][0]=Math.min(ue[0],kt[0][0]),kt[0][1]=Math.min(ue[1],kt[0][1]),kt[1][0]=Math.max(ue[0],kt[1][0]),kt[1][1]=Math.max(ue[1],kt[1][1]);var Te=Math.sqrt(jt*jt+fe*fe);pt=Math.max(pt,Te),At=Math.min(At,Te)}),c.each(["vx","vy"],function(te,qt,jt){var fe=Math.round((Mt[jt*2]-kt[0][0])/(kt[1][0]-kt[0][0])*(x-1)),ue=D-1-Math.round((Mt[jt*2+1]-kt[0][1])/(kt[1][1]-kt[0][1])*(D-1)),Te=(ue*x+fe)*4;$[Te]=te/pt*.5+.5,$[Te+1]=qt/pt*.5+.5,$[Te+3]=1}),N.width=x,N.height=D,t.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(N),N.dirty(),this._updatePlanePosition(kt[0],kt[1],t,i),this._updateGradientTexture(c.getVisual("visualMeta"),[At,pt])},_fillEmptyPixels:function(t){var i=t.pixels,l=t.width,f=t.height;function c(Mt,Nt,kt){Mt=Math.max(Math.min(Mt,l-1),0),Nt=Math.max(Math.min(Nt,f-1),0);var te=(Nt*(l-1)+Mt)*4;return i[te+3]===0?!1:(kt[0]=i[te],kt[1]=i[te+1],!0)}function p(Mt,Nt,kt){kt[0]=Mt[0]+Nt[0],kt[1]=Mt[1]+Nt[1]}for(var y=[],x=[],D=[],E=[],N=[],$=0,_t=0;_t<f;_t++)for(var pt=0;pt<l;pt++){var At=(_t*(l-1)+pt)*4;i[At+3]===0&&($=y[0]=y[1]=0,c(pt-1,_t,x)&&($++,p(x,y,y)),c(pt+1,_t,D)&&($++,p(D,y,y)),c(pt,_t-1,E)&&($++,p(E,y,y)),c(pt,_t+1,N)&&($++,p(N,y,y)),y[0]/=$,y[1]/=$,i[At]=y[0],i[At+1]=y[1]),i[At+3]=1}},_updateGradientTexture:function(t,i){if(!t||!t.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new ae.Texture2D({image:document.createElement("canvas")});var l=this._gradientTexture,f=l.image;f.width=200,f.height=1;var c=f.getContext("2d"),p=c.createLinearGradient(0,.5,f.width,.5);t[0].stops.forEach(function(y){var x;i[1]===i[0]?x=0:(x=y.value/i[1],x=Math.min(Math.max(x,0),1)),p.addColorStop(x,y.color)}),c.fillStyle=p,c.fillRect(0,0,f.width,f.height),l.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(t,i,l,f){var c=this._limitInViewportAndFullFill(t,i,l,f);t=c.leftTop,i=c.rightBottom,this._particleSurface.setRegion(c.region),this._planeMesh.position.set((t[0]+i[0])/2,f.getHeight()-(t[1]+i[1])/2,0);var p=i[0]-t[0],y=i[1]-t[1];this._planeMesh.scale.set(p/2,y/2,1),this._particleSurface.resize(Math.max(Math.min(p,2048),1),Math.max(Math.min(y,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,i,l,f){var c=[Math.max(t[0],0),Math.max(t[1],0)],p=[Math.min(i[0],f.getWidth()),Math.min(i[1],f.getHeight())];if(l.get("coordinateSystem")==="bmap"){var y=l.getData().getDataExtent(l.coordDimToDataDim("lng")[0]),x=Math.floor(y[1]-y[0])>=359;x&&(c[0]>0&&(c[0]=0),p[0]<f.getWidth()&&(p[0]=f.getWidth()))}var D=i[0]-t[0],E=i[1]-t[1],N=p[0]-c[0],$=p[1]-c[1],_t=[(c[0]-t[0])/D,1-$/E-(c[1]-t[1])/E,N/D,$/E];return{leftTop:c,rightBottom:p,region:_t}},_updateCamera:function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.bottom=0,f.top=i,f.right=t,f.near=0,f.far=100,f.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function V0(t){t.registerChartView(z0),t.registerSeriesModel(O0)}(0,F.D$)(V0);var wd=z(70324),jh=F.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),jh.superApply(this,"init",arguments)},mergeOption:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),jh.superApply(this,"mergeOption",arguments)},appendData:function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=(0,wd.WW)(this._flatCoords,i.flatCoords),this._flatCoordsOffset=(0,wd.WW)(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var i=this.getData().getItemModel(t),l=i.option instanceof Array?i.option:i.getShallow("coords");return l},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,i){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[t*2],f=this._flatCoordsOffset[t*2+1],c=0;c<f;c++)i[c]=i[c]||[],i[c][0]=this._flatCoords[l+c*2],i[c][1]=this._flatCoords[l+c*2+1];return f}else{for(var p=this._getCoordsFromItemModel(t),c=0;c<p.length;c++)i[c]=i[c]||[],i[c][0]=p[c][0],i[c][1]=p[c][1];return p.length}},_processFlatCoordsArray:function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),typeof t[0]=="number"){for(var l=t.length,f=new Uint32Array(l),c=new Float64Array(l),p=0,y=0,x=0,D=0;D<l;){x++;var E=t[D++];f[y++]=p+i,f[y++]=E;for(var N=0;N<E;N++){var $=t[D++],_t=t[D++];c[p++]=$,c[p++]=_t,D>l}}return{flatCoordsOffset:new Uint32Array(f.buffer,0,y),flatCoords:c,count:x}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,i){var l=new F.aV(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,c,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var x=f.value;if(x!=null)return x instanceof Array?x[y]:x}),l},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),k0=jh,U0=F.TA.extend({type:"linesGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new mo("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new nf(this.viewGL),this._nativeLinesShader=ae.createShader("ecgl.lines3D"),this._meshLinesShader=ae.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l);var f=this._linesMeshes[0];f||(f=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(f),this._updateLinesMesh(t,f,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){var c=this._linesMeshes[this._currentStep];c||(c=this._createLinesMesh(i),this._linesMeshes[this._currentStep]=c),this._updateLinesMesh(i,c,t.start,t.end),this.groupGL.add(c),f.getZr().refresh(),this._currentStep++},updateTransform:function(t,i,l){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,l)},_createLinesMesh:function(t){var i=new ae.Mesh({$ignorePicking:!0,material:new ae.Material({shader:ae.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new of({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:ae.Mesh.LINES,culling:!1});return i},_updateLinesMesh:function(t,i,l,f){var c=t.getData();i.material.blend=t.get("blendMode")==="lighter"?ae.additiveBlend:null;var p=t.get("lineStyle.curveness")||0,y=t.get("polyline"),x=i.geometry,D=t.coordinateSystem,E=Jr.firstNotNull(t.get("lineStyle.width"),1);E>1?(i.material.shader!==this._meshLinesShader&&i.material.attachShader(this._meshLinesShader),i.mode=ae.Mesh.TRIANGLES):(i.material.shader!==this._nativeLinesShader&&i.material.attachShader(this._nativeLinesShader),i.mode=ae.Mesh.LINES),l=l||0,f=f||c.count(),x.resetOffset();var N=0,$=0,_t=[],pt=[],At=[],Mt=[],Nt=[],kt=.3,te=.7;function qt(){pt[0]=_t[0]*te+Mt[0]*kt-(_t[1]-Mt[1])*p,pt[1]=_t[1]*te+Mt[1]*kt-(Mt[0]-_t[0])*p,At[0]=_t[0]*kt+Mt[0]*te-(_t[1]-Mt[1])*p,At[1]=_t[1]*kt+Mt[1]*te-(Mt[0]-_t[0])*p}if(y||p!==0)for(var jt=l;jt<f;jt++)if(y){var fe=t.getLineCoordsCount(jt);N+=x.getPolylineVertexCount(fe),$+=x.getPolylineTriangleCount(fe)}else t.getLineCoords(jt,Nt),this._glViewHelper.dataToPoint(D,Nt[0],_t),this._glViewHelper.dataToPoint(D,Nt[1],Mt),qt(),N+=x.getCubicCurveVertexCount(_t,pt,At,Mt),$+=x.getCubicCurveTriangleCount(_t,pt,At,Mt);else{var ue=f-l;N+=ue*x.getLineVertexCount(),$+=ue*x.getLineVertexCount()}x.setVertexCount(N),x.setTriangleCount($);for(var Te=l,xe=[],jt=l;jt<f;jt++){ae.parseColor(di(c,Te),xe);var Ie=Jr.firstNotNull(si(c,Te),1);xe[3]*=Ie;for(var fe=t.getLineCoords(jt,Nt),je=0;je<fe;je++)this._glViewHelper.dataToPoint(D,Nt[je],Nt[je]);y?x.addPolyline(Nt,xe,E,0,fe):p!==0?(_t=Nt[0],Mt=Nt[1],qt(),x.addCubicCurve(_t,pt,At,Mt,xe,E)):x.addPolyline(Nt,xe,E,0,2),Te++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function Z0(t){t.registerChartView(U0),t.registerSeriesModel(k0)}(0,F.D$)(Z0)},32016:function(Pe,ee,z){z.d(ee,{S1:function(){return dt.S1}});var F=z(11454),dt=z(41117),q=z(72643),vt=z(72352),yt=z(66210),gt=z(13806),xt=z(98733),nt=z(83007),Z=Math.sin,tt=Math.cos,ot=Math.PI,W=Math.PI*2,Y=180/ot,H=function(){function a(){}return a.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},a.prototype.moveTo=function(r,e){this._add("M",r,e)},a.prototype.lineTo=function(r,e){this._add("L",r,e)},a.prototype.bezierCurveTo=function(r,e,n,o,s,u){this._add("C",r,e,n,o,s,u)},a.prototype.quadraticCurveTo=function(r,e,n,o){this._add("Q",r,e,n,o)},a.prototype.arc=function(r,e,n,o,s,u){this.ellipse(r,e,n,n,0,o,s,u)},a.prototype.ellipse=function(r,e,n,o,s,u,h,v){var d=h-u,m=!v,_=Math.abs(d),S=(0,vt.zT)(_-W)||(m?d>=W:-d>=W),A=d>0?d%W:d%W+W,L=!1;S?L=!0:(0,vt.zT)(_)?L=!1:L=A>=ot==!!m;var I=r+n*tt(u),U=e+o*Z(u);this._start&&this._add("M",I,U);var et=Math.round(s*Y);if(S){var ft=1/this._p,ht=(m?1:-1)*(W-ft);this._add("A",n,o,et,1,+m,r+n*tt(u+ht),e+o*Z(u+ht)),ft>.01&&this._add("A",n,o,et,0,+m,I,U)}else{var Tt=r+n*tt(h),Et=e+o*Z(h);this._add("A",n,o,et,+L,+m,Tt,Et)}},a.prototype.rect=function(r,e,n,o){this._add("M",r,e),this._add("l",n,0),this._add("l",0,o),this._add("l",-n,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(r,e,n,o,s,u,h,v,d){for(var m=[],_=this._p,S=1;S<arguments.length;S++){var A=arguments[S];if(isNaN(A)){this._invalid=!0;return}m.push(Math.round(A*_)/_)}this._d.push(r+m.join(" ")),this._start=r==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),st=H,J=z(85342),g=z(70324),Q="none",j=Math.round;function O(a){var r=a.fill;return r!=null&&r!==Q}function X(a){var r=a.stroke;return r!=null&&r!==Q}var K=["lineCap","miterLimit","lineJoin"],G=(0,g.UI)(K,function(a){return"stroke-"+a.toLowerCase()});function k(a,r,e,n){var o=r.opacity==null?1:r.opacity;if(e instanceof gt.ZP){a("opacity",o);return}if(O(r)){var s=(0,vt.ut)(r.fill);a("fill",s.color);var u=r.fillOpacity!=null?r.fillOpacity*s.opacity*o:s.opacity*o;(n||u<1)&&a("fill-opacity",u)}else a("fill",Q);if(X(r)){var h=(0,vt.ut)(r.stroke);a("stroke",h.color);var v=r.strokeNoScale?e.getLineScale():1,d=v?(r.lineWidth||0)/v:0,m=r.strokeOpacity!=null?r.strokeOpacity*h.opacity*o:h.opacity*o,_=r.strokeFirst;if((n||d!==1)&&a("stroke-width",d),(n||_)&&a("paint-order",_?"stroke":"fill"),(n||m<1)&&a("stroke-opacity",m),r.lineDash){var S=(0,J.a)(e),A=S[0],L=S[1];A&&(L=j(L||0),a("stroke-dasharray",A.join(",")),(L||n)&&a("stroke-dashoffset",L))}else n&&a("stroke-dasharray",Q);for(var I=0;I<K.length;I++){var U=K[I];if(n||r[U]!==yt.$t[U]){var et=r[U]||yt.$t[U];et&&a(G[I],et)}}}else n&&a("stroke",Q)}var R=z(80400),T="http://www.w3.org/2000/svg",P="http://www.w3.org/1999/xlink",M="http://www.w3.org/2000/xmlns/",b="http://www.w3.org/XML/1998/namespace";function w(a){return document.createElementNS(T,a)}function C(a,r,e,n,o){return{tag:a,attrs:e||{},children:n,text:o,key:r}}function V(a,r){var e=[];if(r)for(var n in r){var o=r[n],s=n;o!==!1&&(o!==!0&&o!=null&&(s+='="'+o+'"'),e.push(s))}return"<"+a+" "+e.join(" ")+">"}function B(a){return"</"+a+">"}function ut(a,r){r=r||{};var e=r.newline?`
`:"";function n(o){var s=o.children,u=o.tag,h=o.attrs,v=o.text;return V(u,h)+(u!=="style"?(0,R.F1)(v):v||"")+(s?""+e+(0,g.UI)(s,function(d){return n(d)}).join(e)+e:"")+B(u)}return n(a)}function it(a,r,e){e=e||{};var n=e.newline?`
`:"",o=" {"+n,s=n+"}",u=(0,g.UI)((0,g.XP)(a),function(v){return v+o+(0,g.UI)((0,g.XP)(a[v]),function(d){return d+":"+a[v][d]+";"}).join(n)+s}).join(n),h=(0,g.UI)((0,g.XP)(r),function(v){return"@keyframes "+v+o+(0,g.UI)((0,g.XP)(r[v]),function(d){return d+o+(0,g.UI)((0,g.XP)(r[v][d]),function(m){var _=r[v][d][m];return m==="d"&&(_='path("'+_+'")'),m+":"+_+";"}).join(n)+s}).join(n)+s}).join(n);return!u&&!h?"":["<![CDATA[",u,h,"]]>"].join(n)}function lt(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function rt(a,r,e,n){return C("svg","root",{width:a,height:r,xmlns:T,"xmlns:xlink":P,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+a+" "+r:!1},e)}var ct=z(6850),St=z(23463),at=z(29436),mt=z(99464),Dt=z(74720),wt={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Pt="transform-origin";function bt(a,r,e){var n=(0,g.l7)({},a.shape);(0,g.l7)(n,r),a.buildPath(e,n);var o=new st;return o.reset((0,vt.Gk)(a)),e.rebuildPath(o,1),o.generateStr(),o.getStr()}function Ot(a,r){var e=r.originX,n=r.originY;(e||n)&&(a[Pt]=e+"px "+n+"px")}var Bt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Ht(a,r){var e=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[e]=a,e}function Qt(a,r,e){var n=a.shape.paths,o={},s,u;if((0,g.S6)(n,function(v){var d=lt(e.zrId);d.animation=!0,ye(v,{},d,!0);var m=d.cssAnims,_=d.cssNodes,S=(0,g.XP)(m),A=S.length;if(A){u=S[A-1];var L=m[u];for(var I in L){var U=L[I];o[I]=o[I]||{d:""},o[I].d+=U.d||""}for(var et in _){var ft=_[et].animation;ft.indexOf(u)>=0&&(s=ft)}}}),!!s){r.d=!1;var h=Ht(o,e);return s.replace(u,h)}}function re(a){return(0,g.HD)(a)?wt[a]?"cubic-bezier("+wt[a]+")":(0,Dt.H)(a)?a:"":""}function ye(a,r,e,n){var o=a.animators,s=o.length,u=[];if(a instanceof mt.Z){var h=Qt(a,r,e);if(h)u.push(h);else if(!s)return}else if(!s)return;for(var v={},d=0;d<s;d++){var m=o[d],_=[m.getMaxTime()/1e3+"s"],S=re(m.getClip().easing),A=m.getDelay();S?_.push(S):_.push("linear"),A&&_.push(A/1e3+"s"),m.getLoop()&&_.push("infinite");var L=_.join(" ");v[L]=v[L]||[L,[]],v[L][1].push(m)}function I(ft){var ht=ft[1],Tt=ht.length,Et={},Ct={},It={},zt="animation-timing-function";function Kt(zr,bn,Sn){for(var In=zr.getTracks(),Mi=zr.getMaxTime(),Bi=0;Bi<In.length;Bi++){var Kn=In[Bi];if(Kn.needsAnimate()){var Ti=Kn.keyframes,mi=Kn.propName;if(Sn&&(mi=Sn(mi)),mi)for(var Qi=0;Qi<Ti.length;Qi++){var ys=Ti[Qi],ga=Math.round(ys.time/Mi*100)+"%",tp=re(ys.easing),ol=ys.rawValue;((0,g.HD)(ol)||(0,g.hj)(ol))&&(bn[ga]=bn[ga]||{},bn[ga][mi]=ys.rawValue,tp&&(bn[ga][zt]=tp))}}}}for(var Yt=0;Yt<Tt;Yt++){var ne=ht[Yt],oe=ne.targetName;oe?oe==="shape"&&Kt(ne,Ct):!n&&Kt(ne,Et)}for(var ce in Et){var me={};(0,St.kY)(me,a),(0,g.l7)(me,Et[ce]);var _e=(0,vt.gA)(me),Ce=Et[ce][zt];It[ce]=_e?{transform:_e}:{},Ot(It[ce],me),Ce&&(It[ce][zt]=Ce)}var ke,Oe=!0;for(var ce in Ct){It[ce]=It[ce]||{};var $e=!ke,Ce=Ct[ce][zt];$e&&(ke=new at.Z);var yr=ke.len();ke.reset(),It[ce].d=bt(a,Ct[ce],ke);var _r=ke.len();if(!$e&&yr!==_r){Oe=!1;break}Ce&&(It[ce][zt]=Ce)}if(!Oe)for(var ce in It)delete It[ce].d;if(!n)for(var Yt=0;Yt<Tt;Yt++){var ne=ht[Yt],oe=ne.targetName;oe==="style"&&Kt(ne,It,function(In){return Bt[In]})}for(var Xr=(0,g.XP)(It),Wr=!0,Gr,Yt=1;Yt<Xr.length;Yt++){var ln=Xr[Yt-1],Ln=Xr[Yt];if(It[ln][Pt]!==It[Ln][Pt]){Wr=!1;break}Gr=It[ln][Pt]}if(Wr&&Gr){for(var ce in It)It[ce][Pt]&&delete It[ce][Pt];r[Pt]=Gr}if((0,g.hX)(Xr,function(zr){return(0,g.XP)(It[zr]).length>0}).length){var on=Ht(It,e);return on+" "+ft[0]+" both"}}for(var U in v){var h=I(v[U]);h&&u.push(h)}if(u.length){var et=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+et]={animation:u.join(",")},r.class=et}}var he=z(95169),be=z(47297),Be=Math.round;function Ze(a){return a&&(0,g.HD)(a.src)}function qe(a){return a&&(0,g.mf)(a.toDataURL)}function pr(a,r,e,n){k(function(o,s){var u=o==="fill"||o==="stroke";u&&(0,vt.H3)(s)?Ee(r,a,o,n):u&&(0,vt.R)(s)?Fe(e,a,o,n):a[o]=s},r,e,!1),le(e,a,n)}function wr(a){return(0,vt.zT)(a[0]-1)&&(0,vt.zT)(a[1])&&(0,vt.zT)(a[2])&&(0,vt.zT)(a[3]-1)}function Or(a){return(0,vt.zT)(a[4])&&(0,vt.zT)(a[5])}function Sr(a,r,e){if(r&&!(Or(r)&&wr(r))){var n=e?10:1e4;a.transform=wr(r)?"translate("+Be(r[4]*n)/n+" "+Be(r[5]*n)/n+")":(0,vt.qV)(r)}}function Vr(a,r,e){for(var n=a.points,o=[],s=0;s<n.length;s++)o.push(Be(n[s][0]*e)/e),o.push(Be(n[s][1]*e)/e);r.points=o.join(" ")}function sn(a){return!a.smooth}function cr(a){var r=(0,g.UI)(a,function(e){return typeof e=="string"?[e,e]:e});return function(e,n,o){for(var s=0;s<r.length;s++){var u=r[s],h=e[u[0]];h!=null&&(n[u[1]]=Be(h*o)/o)}}}var or={circle:[cr(["cx","cy","r"])],polyline:[Vr,sn],polygon:[Vr,sn]};function Dr(a){for(var r=a.animators,e=0;e<r.length;e++)if(r[e].targetName==="shape")return!0;return!1}function ze(a,r){var e=a.style,n=a.shape,o=or[a.type],s={},u=r.animation,h="path",v=a.style.strokePercent,d=r.compress&&(0,vt.Gk)(a)||4;if(o&&!r.willUpdate&&!(o[1]&&!o[1](n))&&!(u&&Dr(a))&&!(v<1)){h=a.type;var m=Math.pow(10,d);o[0](n,s,m)}else{var _=!a.path||a.shapeChanged();a.path||a.createPathProxy();var S=a.path;_&&(S.beginPath(),a.buildPath(S,a.shape),a.pathUpdated());var A=S.getVersion(),L=a,I=L.__svgPathBuilder;(L.__svgPathVersion!==A||!I||v!==L.__svgPathStrokePercent)&&(I||(I=L.__svgPathBuilder=new st),I.reset(d),S.rebuildPath(I,v),I.generateStr(),L.__svgPathVersion=A,L.__svgPathStrokePercent=v),s.d=I.getStr()}return Sr(s,a.transform),pr(s,e,a,r),r.animation&&ye(a,s,r),C(h,a.id+"",s)}function Ne(a,r){var e=a.style,n=e.image;if(n&&!(0,g.HD)(n)&&(Ze(n)?n=n.src:qe(n)&&(n=n.toDataURL())),!!n){var o=e.x||0,s=e.y||0,u=e.width,h=e.height,v={href:n,width:u,height:h};return o&&(v.x=o),s&&(v.y=s),Sr(v,a.transform),pr(v,e,a,r),r.animation&&ye(a,v,r),C("image",a.id+"",v)}}function He(a,r){var e=a.style,n=e.text;if(n!=null&&(n+=""),!(!n||isNaN(e.x)||isNaN(e.y))){var o=e.font||be.Uo,s=e.x||0,u=(0,vt.mU)(e.y||0,(0,xt.Dp)(o),e.textBaseline),h=vt.jY[e.textAlign]||e.textAlign,v={"dominant-baseline":"central","text-anchor":h};if((0,he.Y1)(e)){var d="",m=e.fontStyle,_=(0,he.VG)(e.fontSize);if(!parseFloat(_))return;var S=e.fontFamily||be.rk,A=e.fontWeight;d+="font-size:"+_+";font-family:"+S+";",m&&m!=="normal"&&(d+="font-style:"+m+";"),A&&A!=="normal"&&(d+="font-weight:"+A+";"),v.style=d}else v.style="font: "+o;return n.match(/\s/)&&(v["xml:space"]="preserve"),s&&(v.x=s),u&&(v.y=u),Sr(v,a.transform),pr(v,e,a,r),r.animation&&ye(a,v,r),C("text",a.id+"",v,void 0,n)}}function Vt(a,r){if(a instanceof yt.ZP)return ze(a,r);if(a instanceof gt.ZP)return Ne(a,r);if(a instanceof nt.Z)return He(a,r)}function le(a,r,e){var n=a.style;if((0,vt.i2)(n)){var o=(0,vt.n1)(a),s=e.shadowCache,u=s[o];if(!u){var h=a.getGlobalScale(),v=h[0],d=h[1];if(!v||!d)return;var m=n.shadowOffsetX||0,_=n.shadowOffsetY||0,S=n.shadowBlur,A=(0,vt.ut)(n.shadowColor),L=A.opacity,I=A.color,U=S/2/v,et=S/2/d,ft=U+" "+et;u=e.zrId+"-s"+e.shadowIdx++,e.defs[u]=C("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[C("feDropShadow","",{dx:m/v,dy:_/d,stdDeviation:ft,"flood-color":I,"flood-opacity":L})]),s[o]=u}r.filter=(0,vt.m1)(u)}}function Ee(a,r,e,n){var o=a[e],s,u={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if((0,vt.I1)(o))s="linearGradient",u.x1=o.x,u.y1=o.y,u.x2=o.x2,u.y2=o.y2;else if((0,vt.gO)(o))s="radialGradient",u.cx=(0,g.pD)(o.x,.5),u.cy=(0,g.pD)(o.y,.5),u.r=(0,g.pD)(o.r,.5);else return;for(var h=o.colorStops,v=[],d=0,m=h.length;d<m;++d){var _=(0,vt.Pn)(h[d].offset)*100+"%",S=h[d].color,A=(0,vt.ut)(S),L=A.color,I=A.opacity,U={offset:_};U["stop-color"]=L,I<1&&(U["stop-opacity"]=I),v.push(C("stop",d+"",U))}var et=C(s,"",u,v),ft=ut(et),ht=n.gradientCache,Tt=ht[ft];Tt||(Tt=n.zrId+"-g"+n.gradientIdx++,ht[ft]=Tt,u.id=Tt,n.defs[Tt]=C(s,Tt,u,v)),r[e]=(0,vt.m1)(Tt)}function Fe(a,r,e,n){var o=a.style[e],s=a.getBoundingRect(),u={},h=o.repeat,v=h==="no-repeat",d=h==="repeat-x",m=h==="repeat-y",_;if((0,vt.Cv)(o)){var S=o.imageWidth,A=o.imageHeight,L=void 0,I=o.image;if((0,g.HD)(I)?L=I:Ze(I)?L=I.src:qe(I)&&(L=I.toDataURL()),typeof Image=="undefined"){var U="Image width/height must been given explictly in svg-ssr renderer.";(0,g.hu)(S,U),(0,g.hu)(A,U)}else if(S==null||A==null){var et=function(Yt,ne){if(Yt){var oe=Yt.elm,ce=S||ne.width,me=A||ne.height;Yt.tag==="pattern"&&(d?(me=1,ce/=s.width):m&&(ce=1,me/=s.height)),Yt.attrs.width=ce,Yt.attrs.height=me,oe&&(oe.setAttribute("width",ce),oe.setAttribute("height",me))}},ft=(0,ct.Gq)(L,null,a,function(Yt){v||et(Ct,Yt),et(_,Yt)});ft&&ft.width&&ft.height&&(S=S||ft.width,A=A||ft.height)}_=C("image","img",{href:L,width:S,height:A}),u.width=S,u.height=A}else o.svgElement&&(_=(0,g.d9)(o.svgElement),u.width=o.svgWidth,u.height=o.svgHeight);if(_){var ht,Tt;v?ht=Tt=1:d?(Tt=1,ht=u.width/s.width):m?(ht=1,Tt=u.height/s.height):u.patternUnits="userSpaceOnUse",ht!=null&&!isNaN(ht)&&(u.width=ht),Tt!=null&&!isNaN(Tt)&&(u.height=Tt);var Et=(0,vt.gA)(o);Et&&(u.patternTransform=Et);var Ct=C("pattern","",u,[_]),It=ut(Ct),zt=n.patternCache,Kt=zt[It];Kt||(Kt=n.zrId+"-p"+n.patternIdx++,zt[It]=Kt,u.id=Kt,Ct=n.defs[Kt]=C("pattern",Kt,u,[_])),r[e]=(0,vt.m1)(Kt)}}function Xt(a,r,e){var n=e.clipPathCache,o=e.defs,s=n[a.id];if(!s){s=e.zrId+"-c"+e.clipPathIdx++;var u={id:s};n[a.id]=s,o[s]=C("clipPath",s,u,[ze(a,e)])}r["clip-path"]=(0,vt.m1)(s)}function $t(a){return document.createTextNode(a)}function ie(a){return document.createComment(a)}function Zt(a,r,e){a.insertBefore(r,e)}function pe(a,r){a.removeChild(r)}function ve(a,r){a.appendChild(r)}function we(a){return a.parentNode}function Ue(a){return a.nextSibling}function ur(a){return a.tagName}function gr(a,r){a.textContent=r}function Ir(a){return a.textContent}function hn(a){return a.nodeType===1}function Rr(a){return a.nodeType===3}function Nn(a){return a.nodeType===8}var Vn=58,yi=120,Fi=C("","");function Ci(a){return a===void 0}function ri(a){return a!==void 0}function eo(a,r,e){for(var n={},o=r;o<=e;++o){var s=a[o].key;s!==void 0&&(n[s]=o)}return n}function Lo(a,r){var e=a.key===r.key,n=a.tag===r.tag;return n&&e}function Fa(a){var r,e=a.children,n=a.tag;if(ri(n)){var o=a.elm=w(n);if(no(Fi,a),(0,g.kJ)(e))for(r=0;r<e.length;++r){var s=e[r];s!=null&&ve(o,Fa(s))}else ri(a.text)&&!(0,g.Kn)(a.text)&&ve(o,$t(a.text))}else a.elm=$t(a.text);return a.elm}function ro(a,r,e,n,o){for(;n<=o;++n){var s=e[n];s!=null&&Zt(a,Fa(s),r)}}function _s(a,r,e,n){for(;e<=n;++e){var o=r[e];if(o!=null)if(ri(o.tag)){var s=we(o.elm);pe(s,o.elm)}else pe(a,o.elm)}}function no(a,r){var e,n=r.elm,o=a&&a.attrs||{},s=r.attrs||{};if(o!==s){for(e in s){var u=s[e],h=o[e];h!==u&&(u===!0?n.setAttribute(e,""):u===!1?n.removeAttribute(e):e.charCodeAt(0)!==yi?n.setAttribute(e,u):e==="xmlns:xlink"||e==="xmlns"?n.setAttributeNS(M,e,u):e.charCodeAt(3)===Vn?n.setAttributeNS(b,e,u):e.charCodeAt(5)===Vn?n.setAttributeNS(P,e,u):n.setAttribute(e,u))}for(e in o)e in s||n.removeAttribute(e)}}function io(a,r,e){for(var n=0,o=0,s=r.length-1,u=r[0],h=r[s],v=e.length-1,d=e[0],m=e[v],_,S,A,L;n<=s&&o<=v;)u==null?u=r[++n]:h==null?h=r[--s]:d==null?d=e[++o]:m==null?m=e[--v]:Lo(u,d)?(Ga(u,d),u=r[++n],d=e[++o]):Lo(h,m)?(Ga(h,m),h=r[--s],m=e[--v]):Lo(u,m)?(Ga(u,m),Zt(a,u.elm,Ue(h.elm)),u=r[++n],m=e[--v]):Lo(h,d)?(Ga(h,d),Zt(a,h.elm,u.elm),h=r[--s],d=e[++o]):(Ci(_)&&(_=eo(r,n,s)),S=_[d.key],Ci(S)?Zt(a,Fa(d),u.elm):(A=r[S],A.tag!==d.tag?Zt(a,Fa(d),u.elm):(Ga(A,d),r[S]=void 0,Zt(a,A.elm,u.elm))),d=e[++o]);(n<=s||o<=v)&&(n>s?(L=e[v+1]==null?null:e[v+1].elm,ro(a,L,e,o,v)):_s(a,r,n,s))}function Ga(a,r){var e=r.elm=a.elm,n=a.children,o=r.children;a!==r&&(no(a,r),Ci(r.text)?ri(n)&&ri(o)?n!==o&&io(e,n,o):ri(o)?(ri(a.text)&&gr(e,""),ro(e,null,o,0,o.length-1)):ri(n)?_s(e,n,0,n.length-1):ri(a.text)&&gr(e,""):a.text!==r.text&&(ri(n)&&_s(e,n,0,n.length-1),gr(e,r.text)))}function Yn(a,r){if(Lo(a,r))Ga(a,r);else{var e=a.elm,n=we(e);Fa(r),n!==null&&(Zt(n,r.elm,Ue(e)),_s(n,[a],0,0))}return r}var tu=z(89625),Tf=0,dr=function(){function a(r,e,n){if(this.type="svg",this.refreshHover=sl("refreshHover"),this.configLayer=sl("configLayer"),this.storage=e,this._opts=n=(0,g.l7)({},n),this.root=r,this._id="zr"+Tf++,this._oldVNode=rt(n.width,n.height),r&&!n.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=w("svg");no(null,this._oldVNode),o.appendChild(s),r.appendChild(o)}this.resize(n.width,n.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",Yn(this._oldVNode,r),this._oldVNode=r}},a.prototype.renderOneToVNode=function(r){return Vt(r,lt(this._id))},a.prototype.renderToVNode=function(r){r=r||{};var e=this.storage.getDisplayList(!0),n=this._width,o=this._height,s=lt(this._id);s.animation=r.animation,s.willUpdate=r.willUpdate,s.compress=r.compress;var u=[],h=this._bgVNode=Tn(n,o,this._backgroundColor,s);h&&u.push(h);var v=r.compress?null:this._mainVNode=C("g","main",{},[]);this._paintList(e,s,v?v.children:u),v&&u.push(v);var d=(0,g.UI)((0,g.XP)(s.defs),function(S){return s.defs[S]});if(d.length&&u.push(C("defs","defs",{},d)),r.animation){var m=it(s.cssNodes,s.cssAnims,{newline:!0});if(m){var _=C("style","stl",{},[],m);u.push(_)}}return rt(n,o,u,r.useViewBox)},a.prototype.renderToString=function(r){return r=r||{},ut(this.renderToVNode({animation:(0,g.pD)(r.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,g.pD)(r.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(r){this._backgroundColor=r},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(r,e,n){for(var o=r.length,s=[],u=0,h,v,d=0,m=0;m<o;m++){var _=r[m];if(!_.invisible){var S=_.__clipPaths,A=S&&S.length||0,L=v&&v.length||0,I=void 0;for(I=Math.max(A-1,L-1);I>=0&&!(S&&v&&S[I]===v[I]);I--);for(var U=L-1;U>I;U--)u--,h=s[u-1];for(var et=I+1;et<A;et++){var ft={};Xt(S[et],ft,e);var ht=C("g","clip-g-"+d++,ft,[]);(h?h.children:n).push(ht),s[u++]=ht,h=ht}v=S;var Tt=Vt(_,e);Tt&&(h?h.children:n).push(Tt)}}},a.prototype.resize=function(r,e){var n=this._opts,o=this.root,s=this._viewport;if(r!=null&&(n.width=r),e!=null&&(n.height=e),o&&s&&(s.style.display="none",r=(0,tu.ap)(o,0,n),e=(0,tu.ap)(o,1,n),s.style.display=""),this._width!==r||this._height!==e){if(this._width=r,this._height=e,s){var u=s.style;u.width=r+"px",u.height=e+"px"}if((0,vt.R)(this._backgroundColor))this.refresh();else{var h=this._svgDom;h&&(h.setAttribute("width",r),h.setAttribute("height",e));var v=this._bgVNode&&this._bgVNode.elm;v&&(v.setAttribute("width",r),v.setAttribute("height",e))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(r){var e=this.renderToString(),n="data:image/svg+xml;";return r?(e=(0,vt.oF)(e),e&&n+"base64,"+e):n+"charset=UTF-8,"+encodeURIComponent(e)},a}();function sl(a){return function(){}}function Tn(a,r,e,n){var o;if(e&&e!=="none")if(o=C("rect","bg",{width:a,height:r,x:"0",y:"0",id:"0"}),(0,vt.H3)(e))Ee({fill:e},o.attrs,"fill",n);else if((0,vt.R)(e))Fe({style:{fill:e},dirty:g.ZT,getBoundingRect:function(){return{width:a,height:r}}},o.attrs,"fill",n);else{var s=(0,vt.ut)(e),u=s.color,h=s.opacity;o.attrs.fill=u,h<1&&(o.attrs["fill-opacity"]=h)}return o}var nr=dr;function Nr(a){a.registerPainter("svg",nr)}var Wt=z(12012),un=z(12526),yn=z(88242),fn=z(54373),Mr=z(2574),eu=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e){if(!1)var n;return(0,un.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(e){var n=new Mr.Z,o=(0,fn.th)("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);n.add(o),o.setStyle(e.lineStyle);var s=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),h=s==="none"?"circle":s,v=e.itemHeight*.8,d=(0,fn.th)(h,(e.itemWidth-v)/2,(e.itemHeight-v)/2,v,v,e.itemStyle.fill);n.add(d),d.setStyle(e.itemStyle);var m=e.iconRotate==="inherit"?u:e.iconRotate||0;return d.rotation=m*Math.PI/180,d.setOrigin([e.itemWidth/2,e.itemHeight/2]),h.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),n},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(yn.Z),ru=eu,rr=z(25400),mr=z(74071),Er=z(98845),Qe=z(58833),Zi=z(92502);function pn(a,r){var e=a.mapDimensionsAll("defaultedLabel"),n=e.length;if(n===1){var o=(0,Zi.hk)(a,r,e[0]);return o!=null?o+"":null}else if(n){for(var s=[],u=0;u<e.length;u++)s.push((0,Zi.hk)(a,r,e[u]));return s.join(" ")}}function za(a,r){var e=a.mapDimensionsAll("defaultedLabel");if(!(0,g.kJ)(r))return r+"";for(var n=[],o=0;o<e.length;o++){var s=a.getDimensionIndex(e[o]);s>=0&&n.push(r[s])}return n.join(" ")}var Ge=z(65261),ao=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s){var u=a.call(this)||this;return u.updateData(e,n,o,s),u}return r.prototype._createSymbol=function(e,n,o,s,u){this.removeAll();var h=(0,fn.th)(e,-1,-1,2,2,null,u);h.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),h.drift=ll,this._symbolType=e,this.add(h)},r.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){(0,Qe.fD)(this.childAt(0))},r.prototype.downplay=function(){(0,Qe.Mh)(this.childAt(0))},r.prototype.setZ=function(e,n){var o=this.childAt(0);o.zlevel=e,o.z=n},r.prototype.setDraggable=function(e,n){var o=this.childAt(0);o.draggable=e,o.cursor=!n&&e?"move":o.cursor},r.prototype.updateData=function(e,n,o,s){this.silent=!1;var u=e.getItemVisual(n,"symbol")||"circle",h=e.hostModel,v=r.getSymbolSize(e,n),d=u!==this._symbolType,m=s&&s.disableAnimation;if(d){var _=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(u,e,n,v,_)}else{var S=this.childAt(0);S.silent=!1;var A={scaleX:v[0]/2,scaleY:v[1]/2};m?S.attr(A):rr.D(S,A,h,n),(0,rr.Zi)(S)}if(this._updateCommon(e,n,v,o,s),d){var S=this.childAt(0);if(!m){var A={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:S.style.opacity}};S.scaleX=S.scaleY=0,S.style.opacity=0,rr.KZ(S,A,h,n)}}m&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(e,n,o,s,u){var h=this.childAt(0),v=e.hostModel,d,m,_,S,A,L,I,U,et;if(s&&(d=s.emphasisItemStyle,m=s.blurItemStyle,_=s.selectItemStyle,S=s.focus,A=s.blurScope,I=s.labelStatesModels,U=s.hoverScale,et=s.cursorStyle,L=s.emphasisDisabled),!s||e.hasItemOption){var ft=s&&s.itemModel?s.itemModel:e.getItemModel(n),ht=ft.getModel("emphasis");d=ht.getModel("itemStyle").getItemStyle(),_=ft.getModel(["select","itemStyle"]).getItemStyle(),m=ft.getModel(["blur","itemStyle"]).getItemStyle(),S=ht.get("focus"),A=ht.get("blurScope"),L=ht.get("disabled"),I=(0,Ge.k3)(ft),U=ht.getShallow("scale"),et=ft.getShallow("cursor")}var Tt=e.getItemVisual(n,"symbolRotate");h.attr("rotation",(Tt||0)*Math.PI/180||0);var Et=(0,fn.Cq)(e.getItemVisual(n,"symbolOffset"),o);Et&&(h.x=Et[0],h.y=Et[1]),et&&h.attr("cursor",et);var Ct=e.getItemVisual(n,"style"),It=Ct.fill;if(h instanceof gt.ZP){var zt=h.style;h.useStyle((0,g.l7)({image:zt.image,x:zt.x,y:zt.y,width:zt.width,height:zt.height},Ct))}else h.__isEmptyBrush?h.useStyle((0,g.l7)({},Ct)):h.useStyle(Ct),h.style.decal=null,h.setColor(It,u&&u.symbolInnerColor),h.style.strokeNoScale=!0;var Kt=e.getItemVisual(n,"liftZ"),Yt=this._z2;Kt!=null?Yt==null&&(this._z2=h.z2,h.z2+=Kt):Yt!=null&&(h.z2=Yt,this._z2=null);var ne=u&&u.useNameLabel;(0,Ge.ni)(h,I,{labelFetcher:v,labelDataIndex:n,defaultText:oe,inheritColor:It,defaultOpacity:Ct.opacity});function oe(_e){return ne?e.getName(_e):pn(e,_e)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var ce=h.ensureState("emphasis");ce.style=d,h.ensureState("select").style=_,h.ensureState("blur").style=m;var me=U==null||U===!0?Math.max(1.1,3/this._sizeY):isFinite(U)&&U>0?+U:1;ce.scaleX=this._sizeX*me,ce.scaleY=this._sizeY*me,this.setSymbolScale(1),(0,Qe.k5)(this,S,A,L)},r.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},r.prototype.fadeOut=function(e,n,o){var s=this.childAt(0),u=(0,Er.A)(this).dataIndex,h=o&&o.animation;if(this.silent=s.silent=!0,o&&o.fadeLabel){var v=s.getTextContent();v&&rr.bX(v,{style:{opacity:0}},n,{dataIndex:u,removeOpt:h,cb:function(){s.removeTextContent()}})}else s.removeTextContent();rr.bX(s,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:u,cb:e,removeOpt:h})},r.getSymbolSize=function(e,n){return(0,fn.zp)(e.getItemVisual(n,"symbolSize"))},r}(Mr.Z);function ll(a,r){this.parent.drift(a,r)}var ni=ao;function cn(a,r,e,n){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(r[0],r[1]))&&a.getItemVisual(e,"symbol")!=="none"}function Gi(a){return a!=null&&!(0,g.Kn)(a)&&(a={isIgnore:a}),a||{}}function Va(a){var r=a.hostModel,e=r.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:(0,Ge.k3)(r),cursorStyle:r.get("cursor")}}var sr=function(){function a(r){this.group=new Mr.Z,this._SymbolCtor=r||ni}return a.prototype.updateData=function(r,e){this._progressiveEls=null,e=Gi(e);var n=this.group,o=r.hostModel,s=this._data,u=this._SymbolCtor,h=e.disableAnimation,v=Va(r),d={disableAnimation:h},m=e.getSymbolPoint||function(_){return r.getItemLayout(_)};s||n.removeAll(),r.diff(s).add(function(_){var S=m(_);if(cn(r,S,_,e)){var A=new u(r,_,v,d);A.setPosition(S),r.setItemGraphicEl(_,A),n.add(A)}}).update(function(_,S){var A=s.getItemGraphicEl(S),L=m(_);if(!cn(r,L,_,e)){n.remove(A);return}var I=r.getItemVisual(_,"symbol")||"circle",U=A&&A.getSymbolType&&A.getSymbolType();if(!A||U&&U!==I)n.remove(A),A=new u(r,_,v,d),A.setPosition(L);else{A.updateData(r,_,v,d);var et={x:L[0],y:L[1]};h?A.attr(et):rr.D(A,et,o)}n.add(A),r.setItemGraphicEl(_,A)}).remove(function(_){var S=s.getItemGraphicEl(_);S&&S.fadeOut(function(){n.remove(S)},o)}).execute(),this._getSymbolPoint=m,this._data=r},a.prototype.updateLayout=function(){var r=this,e=this._data;e&&e.eachItemGraphicEl(function(n,o){var s=r._getSymbolPoint(o);n.setPosition(s),n.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Va(r),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e,n){this._progressiveEls=[],n=Gi(n);function o(v){v.isGroup||(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}for(var s=r.start;s<r.end;s++){var u=e.getItemLayout(s);if(cn(e,u,s,n)){var h=new this._SymbolCtor(e,s,this._seriesScope);h.traverse(o),h.setPosition(u),this.group.add(h),e.setItemGraphicEl(s,h),this._progressiveEls.push(h)}}},a.prototype.eachRendered=function(r){mr.traverseElements(this._progressiveEls||this.group,r)},a.prototype.remove=function(r){var e=this.group,n=this._data;n&&r?n.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},n.hostModel)}):e.removeAll()},a}(),Ma=sr,oa=z(28391);function Io(a,r,e){var n=a.getBaseAxis(),o=a.getOtherAxis(n),s=jr(o,e),u=n.dim,h=o.dim,v=r.mapDimension(h),d=r.mapDimension(u),m=h==="x"||h==="radius"?1:0,_=(0,g.UI)(a.dimensions,function(L){return r.mapDimension(L)}),S=!1,A=r.getCalculationInfo("stackResultDimension");return(0,oa.M)(r,_[0])&&(S=!0,_[0]=A),(0,oa.M)(r,_[1])&&(S=!0,_[1]=A),{dataDimsForPoint:_,valueStart:s,valueAxisDim:h,baseAxisDim:u,stacked:!!S,valueDim:v,baseDim:d,baseDataOffset:m,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function jr(a,r){var e=0,n=a.scale.getExtent();return r==="start"?e=n[0]:r==="end"?e=n[1]:(0,g.hj)(r)&&!isNaN(r)?e=r:n[0]>0?e=n[0]:n[1]<0&&(e=n[1]),e}function vr(a,r,e,n){var o=NaN;a.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=a.valueStart);var s=a.baseDataOffset,u=[];return u[s]=e.get(a.baseDim,n),u[1-s]=o,r.dataToPoint(u)}var En=z(35131);function qr(a,r){var e=[];return r.diff(a).add(function(n){e.push({cmd:"+",idx:n})}).update(function(n,o){e.push({cmd:"=",idx:o,idx1:n})}).remove(function(n){e.push({cmd:"-",idx:n})}).execute(),e}function an(a,r,e,n,o,s,u,h){for(var v=qr(a,r),d=[],m=[],_=[],S=[],A=[],L=[],I=[],U=Io(o,r,u),et=a.getLayout("points")||[],ft=r.getLayout("points")||[],ht=0;ht<v.length;ht++){var Tt=v[ht],Et=!0,Ct=void 0,It=void 0;switch(Tt.cmd){case"=":Ct=Tt.idx*2,It=Tt.idx1*2;var zt=et[Ct],Kt=et[Ct+1],Yt=ft[It],ne=ft[It+1];(isNaN(zt)||isNaN(Kt))&&(zt=Yt,Kt=ne),d.push(zt,Kt),m.push(Yt,ne),_.push(e[Ct],e[Ct+1]),S.push(n[It],n[It+1]),I.push(r.getRawIndex(Tt.idx1));break;case"+":var oe=Tt.idx,ce=U.dataDimsForPoint,me=o.dataToPoint([r.get(ce[0],oe),r.get(ce[1],oe)]);It=oe*2,d.push(me[0],me[1]),m.push(ft[It],ft[It+1]);var _e=vr(U,o,r,oe);_.push(_e[0],_e[1]),S.push(n[It],n[It+1]),I.push(r.getRawIndex(oe));break;case"-":Et=!1}Et&&(A.push(Tt),L.push(L.length))}L.sort(function(ln,Ln){return I[ln]-I[Ln]});for(var Ce=d.length,ke=(0,En.o)(Ce),Oe=(0,En.o)(Ce),$e=(0,En.o)(Ce),yr=(0,En.o)(Ce),_r=[],ht=0;ht<L.length;ht++){var Xr=L[ht],Wr=ht*2,Gr=Xr*2;ke[Wr]=d[Gr],ke[Wr+1]=d[Gr+1],Oe[Wr]=m[Gr],Oe[Wr+1]=m[Gr+1],$e[Wr]=_[Gr],$e[Wr+1]=_[Gr+1],yr[Wr]=S[Gr],yr[Wr+1]=S[Gr+1],_r[ht]=A[Xr]}return{current:ke,next:Oe,stackedOnCurrent:$e,stackedOnNext:yr,status:_r}}var Ar=z(55602),We=z(21611),_i=z(14296),ma=Math.min,Tr=Math.max;function tn(a,r){return isNaN(a)||isNaN(r)}function ka(a,r,e,n,o,s,u,h,v){for(var d,m,_,S,A,L,I=e,U=0;U<n;U++){var et=r[I*2],ft=r[I*2+1];if(I>=o||I<0)break;if(tn(et,ft)){if(v){I+=s;continue}break}if(I===e)a[s>0?"moveTo":"lineTo"](et,ft),_=et,S=ft;else{var ht=et-d,Tt=ft-m;if(ht*ht+Tt*Tt<.5){I+=s;continue}if(u>0){for(var Et=I+s,Ct=r[Et*2],It=r[Et*2+1];Ct===et&&It===ft&&U<n;)U++,Et+=s,I+=s,Ct=r[Et*2],It=r[Et*2+1],et=r[I*2],ft=r[I*2+1],ht=et-d,Tt=ft-m;var zt=U+1;if(v)for(;tn(Ct,It)&&zt<n;)zt++,Et+=s,Ct=r[Et*2],It=r[Et*2+1];var Kt=.5,Yt=0,ne=0,oe=void 0,ce=void 0;if(zt>=n||tn(Ct,It))A=et,L=ft;else{Yt=Ct-d,ne=It-m;var me=et-d,_e=Ct-et,Ce=ft-m,ke=It-ft,Oe=void 0,$e=void 0;if(h==="x"){Oe=Math.abs(me),$e=Math.abs(_e);var yr=Yt>0?1:-1;A=et-yr*Oe*u,L=ft,oe=et+yr*$e*u,ce=ft}else if(h==="y"){Oe=Math.abs(Ce),$e=Math.abs(ke);var _r=ne>0?1:-1;A=et,L=ft-_r*Oe*u,oe=et,ce=ft+_r*$e*u}else Oe=Math.sqrt(me*me+Ce*Ce),$e=Math.sqrt(_e*_e+ke*ke),Kt=$e/($e+Oe),A=et-Yt*u*(1-Kt),L=ft-ne*u*(1-Kt),oe=et+Yt*u*Kt,ce=ft+ne*u*Kt,oe=ma(oe,Tr(Ct,et)),ce=ma(ce,Tr(It,ft)),oe=Tr(oe,ma(Ct,et)),ce=Tr(ce,ma(It,ft)),Yt=oe-et,ne=ce-ft,A=et-Yt*Oe/$e,L=ft-ne*Oe/$e,A=ma(A,Tr(d,et)),L=ma(L,Tr(m,ft)),A=Tr(A,ma(d,et)),L=Tr(L,ma(m,ft)),Yt=et-A,ne=ft-L,oe=et+Yt*$e/Oe,ce=ft+ne*$e/Oe}a.bezierCurveTo(_,S,A,L,et,ft),_=oe,S=ce}else a.lineTo(et,ft)}d=et,m=ft,I+=s}return U}var Ro=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),nu=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polyline",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ro},r.prototype.buildPath=function(e,n){var o=n.points,s=0,u=o.length/2;if(n.connectNulls){for(;u>0&&tn(o[u*2-2],o[u*2-1]);u--);for(;s<u&&tn(o[s*2],o[s*2+1]);s++);}for(;s<u;)s+=ka(e,o,s,u,u,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},r.prototype.getPointOn=function(e,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,s=o.data,u=at.Z.CMD,h,v,d=n==="x",m=[],_=0;_<s.length;){var S=s[_++],A=void 0,L=void 0,I=void 0,U=void 0,et=void 0,ft=void 0,ht=void 0;switch(S){case u.M:h=s[_++],v=s[_++];break;case u.L:if(A=s[_++],L=s[_++],ht=d?(e-h)/(A-h):(e-v)/(L-v),ht<=1&&ht>=0){var Tt=d?(L-v)*ht+v:(A-h)*ht+h;return d?[e,Tt]:[Tt,e]}h=A,v=L;break;case u.C:A=s[_++],L=s[_++],I=s[_++],U=s[_++],et=s[_++],ft=s[_++];var Et=d?(0,_i.kD)(h,A,I,et,e,m):(0,_i.kD)(v,L,U,ft,e,m);if(Et>0)for(var Ct=0;Ct<Et;Ct++){var It=m[Ct];if(It<=1&&It>=0){var Tt=d?(0,_i.af)(v,L,U,ft,It):(0,_i.af)(h,A,I,et,It);return d?[e,Tt]:[Tt,e]}}h=et,v=ft;break}}},r}(yt.ZP),Ca=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Ro),Oo=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polygon",n}return r.prototype.getDefaultShape=function(){return new Ca},r.prototype.buildPath=function(e,n){var o=n.points,s=n.stackedOnPoints,u=0,h=o.length/2,v=n.smoothMonotone;if(n.connectNulls){for(;h>0&&tn(o[h*2-2],o[h*2-1]);h--);for(;u<h&&tn(o[u*2],o[u*2+1]);u++);}for(;u<h;){var d=ka(e,o,u,h,h,1,n.smooth,v,n.connectNulls);ka(e,s,u+d-1,d,h,-1,n.stackedOnSmooth,v,n.connectNulls),u+=d+1,e.closePath()}},r}(yt.ZP),Mn=z(57839),Kr=z(73909),Ei=z(29902),De=z(97414);function $i(a,r,e,n,o){var s=a.getArea(),u=s.x,h=s.y,v=s.width,d=s.height,m=e.get(["lineStyle","width"])||2;u-=m/2,h-=m/2,v+=m,d+=m,u=Math.floor(u),v=Math.round(v);var _=new Kr.Z({shape:{x:u,y:h,width:v,height:d}});if(r){var S=a.getBaseAxis(),A=S.isHorizontal(),L=S.inverse;A?(L&&(_.shape.x+=v),_.shape.width=0):(L||(_.shape.y+=d),_.shape.height=0);var I=(0,g.mf)(o)?function(U){o(U,_)}:null;rr.KZ(_,{shape:{width:v,height:d,x:u,y:h}},e,null,n,I)}return _}function fi(a,r,e){var n=a.getArea(),o=(0,De.NM)(n.r0,1),s=(0,De.NM)(n.r,1),u=new Ei.C({shape:{cx:(0,De.NM)(a.cx,1),cy:(0,De.NM)(a.cy,1),r0:o,r:s,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(r){var h=a.getBaseAxis().dim==="angle";h?u.shape.endAngle=n.startAngle:u.shape.r=o,rr.KZ(u,{shape:{endAngle:n.endAngle,r:s}},e)}return u}function oo(a,r,e,n,o){if(a){if(a.type==="polar")return fi(a,r,e);if(a.type==="cartesian2d")return $i(a,r,e,n,o)}else return null;return null}function ya(a,r){return a.type===r}var ii=z(20283),Bn=z(96170);function No(a,r){if(a.length===r.length){for(var e=0;e<a.length;e++)if(a[e]!==r[e])return;return!0}}function $n(a){for(var r=1/0,e=1/0,n=-1/0,o=-1/0,s=0;s<a.length;){var u=a[s++],h=a[s++];isNaN(u)||(r=Math.min(u,r),n=Math.max(u,n)),isNaN(h)||(e=Math.min(h,e),o=Math.max(h,o))}return[[r,e],[n,o]]}function Br(a,r){var e=$n(a),n=e[0],o=e[1],s=$n(r),u=s[0],h=s[1];return Math.max(Math.abs(n[0]-u[0]),Math.abs(n[1]-u[1]),Math.abs(o[0]-h[0]),Math.abs(o[1]-h[1]))}function Cr(a){return g.hj(a)?a:a?.5:0}function Pi(a,r,e){if(!e.valueDim)return[];for(var n=r.count(),o=(0,En.o)(n*2),s=0;s<n;s++){var u=vr(e,a,r,s);o[s*2]=u[0],o[s*2+1]=u[1]}return o}function xi(a,r,e,n){var o=r.getBaseAxis(),s=o.dim==="x"||o.dim==="radius"?0:1,u=[],h=0,v=[],d=[],m=[],_=[];if(n){for(h=0;h<a.length;h+=2)!isNaN(a[h])&&!isNaN(a[h+1])&&_.push(a[h],a[h+1]);a=_}for(h=0;h<a.length-2;h+=2)switch(m[0]=a[h+2],m[1]=a[h+3],d[0]=a[h],d[1]=a[h+1],u.push(d[0],d[1]),e){case"end":v[s]=m[s],v[1-s]=d[1-s],u.push(v[0],v[1]);break;case"middle":var S=(d[s]+m[s])/2,A=[];v[s]=A[s]=S,v[1-s]=d[1-s],A[1-s]=m[1-s],u.push(v[0],v[1]),u.push(A[0],A[1]);break;default:v[s]=d[s],v[1-s]=m[1-s],u.push(v[0],v[1])}return u.push(a[h++],a[h++]),u}function Bo(a,r){var e=[],n=a.length,o,s;function u(m,_,S){var A=m.coord,L=(S-A)/(_.coord-A),I=(0,Bn.lerp)(L,[m.color,_.color]);return{coord:S,color:I}}for(var h=0;h<n;h++){var v=a[h],d=v.coord;if(d<0)o=v;else if(d>r){s?e.push(u(s,v,r)):o&&e.push(u(o,v,0),u(o,v,r));break}else o&&(e.push(u(o,v,0)),o=null),e.push(v),s=v}return e}function iu(a,r,e){var n=a.getVisual("visualMeta");if(!(!n||!n.length||!a.count())&&r.type==="cartesian2d"){for(var o,s,u=n.length-1;u>=0;u--){var h=a.getDimensionInfo(n[u].dimension);if(o=h&&h.coordDim,o==="x"||o==="y"){s=n[u];break}}if(s){var v=r.getAxis(o),d=g.UI(s.stops,function(ht){return{coord:v.toGlobalCoord(v.dataToCoord(ht.value)),color:ht.color}}),m=d.length,_=s.outerColors.slice();m&&d[0].coord>d[m-1].coord&&(d.reverse(),_.reverse());var S=Bo(d,o==="x"?e.getWidth():e.getHeight()),A=S.length;if(!A&&m)return d[0].coord<0?_[1]?_[1]:d[m-1].color:_[0]?_[0]:d[0].color;var L=10,I=S[0].coord-L,U=S[A-1].coord+L,et=U-I;if(et<.001)return"transparent";g.S6(S,function(ht){ht.offset=(ht.coord-I)/et}),S.push({offset:A?S[A-1].offset:.5,color:_[1]||"transparent"}),S.unshift({offset:A?S[0].offset:.5,color:_[0]||"transparent"});var ft=new Ar.Z(0,0,0,0,S,!0);return ft[o]=I,ft[o+"2"]=U,ft}}}function au(a,r,e){var n=a.get("showAllSymbol"),o=n==="auto";if(!(n&&!o)){var s=e.getAxesByScale("ordinal")[0];if(s&&!(o&&ul(s,r))){var u=r.mapDimension(s.dim),h={};return g.S6(s.getViewLabels(),function(v){var d=s.scale.getRawOrdinalNumber(v.tickValue);h[d]=1}),function(v){return!h.hasOwnProperty(r.get(u,v))}}}}function ul(a,r){var e=a.getExtent(),n=Math.abs(e[1]-e[0])/a.scale.count();isNaN(n)&&(n=0);for(var o=r.count(),s=Math.max(1,Math.round(o/5)),u=0;u<o;u+=s)if(ni.getSymbolSize(r,u)[a.isHorizontal()?1:0]*1.5>n)return!1;return!0}function ou(a,r){return isNaN(a)||isNaN(r)}function xs(a){for(var r=a.length/2;r>0&&ou(a[r*2-2],a[r*2-1]);r--);return r-1}function Yr(a,r){return[a[r*2],a[r*2+1]]}function fl(a,r,e){for(var n=a.length/2,o=e==="x"?0:1,s,u,h=0,v=-1,d=0;d<n;d++)if(u=a[d*2+o],!(isNaN(u)||isNaN(a[d*2+1-o]))){if(d===0){s=u;continue}if(s<=r&&u>=r||s>=r&&u<=r){v=d;break}h=d,s=u}return{range:[h,v],t:(r-s)/(u-s)}}function _a(a){if(a.get(["endLabel","show"]))return!0;for(var r=0;r<Qe.L1.length;r++)if(a.get([Qe.L1[r],"endLabel","show"]))return!0;return!1}function sa(a,r,e,n){if(ya(r,"cartesian2d")){var o=n.getModel("endLabel"),s=o.get("valueAnimation"),u=n.getData(),h={lastFrameIndex:0},v=_a(n)?function(A,L){a._endLabelOnDuring(A,L,u,h,s,o,r)}:null,d=r.getBaseAxis().isHorizontal(),m=$i(r,e,n,function(){var A=a._endLabel;A&&e&&h.originalX!=null&&A.attr({x:h.originalX,y:h.originalY})},v);if(!n.get("clip",!0)){var _=m.shape,S=Math.max(_.width,_.height);d?(_.y-=S,_.height+=S*2):(_.x-=S,_.width+=S*2)}return v&&v(1,m),m}else return fi(r,e,n)}function Fo(a,r){var e=r.getBaseAxis(),n=e.isHorizontal(),o=e.inverse,s=n?o?"right":"left":"center",u=n?"middle":o?"top":"bottom";return{normal:{align:a.get("align")||s,verticalAlign:a.get("verticalAlign")||u}}}var xa=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(){var e=new Mr.Z,n=new Ma;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=e},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem,h=this.group,v=e.getData(),d=e.getModel("lineStyle"),m=e.getModel("areaStyle"),_=v.getLayout("points")||[],S=u.type==="polar",A=this._coordSys,L=this._symbolDraw,I=this._polyline,U=this._polygon,et=this._lineGroup,ft=!n.ssr&&e.isAnimationEnabled(),ht=!m.isEmpty(),Tt=m.get("origin"),Et=Io(u,v,Tt),Ct=ht&&Pi(u,v,Et),It=e.get("showSymbol"),zt=e.get("connectNulls"),Kt=It&&!S&&au(e,v,u),Yt=this._data;Yt&&Yt.eachItemGraphicEl(function(Ln,on){Ln.__temp&&(h.remove(Ln),Yt.setItemGraphicEl(on,null))}),It||L.remove(),h.add(et);var ne=S?!1:e.get("step"),oe;u&&u.getArea&&e.get("clip",!0)&&(oe=u.getArea(),oe.width!=null?(oe.x-=.1,oe.y-=.1,oe.width+=.2,oe.height+=.2):oe.r0&&(oe.r0-=.5,oe.r+=.5)),this._clipShapeForSymbol=oe;var ce=iu(v,u,o)||v.getVisual("style")[v.getVisual("drawType")];if(!(I&&A.type===u.type&&ne===this._step))It&&L.updateData(v,{isIgnore:Kt,clipShape:oe,disableAnimation:!0,getSymbolPoint:function(Ln){return[_[Ln*2],_[Ln*2+1]]}}),ft&&this._initSymbolLabelAnimation(v,u,oe),ne&&(_=xi(_,u,ne,zt),Ct&&(Ct=xi(Ct,u,ne,zt))),I=this._newPolyline(_),ht?U=this._newPolygon(_,Ct):U&&(et.remove(U),U=this._polygon=null),S||this._initOrUpdateEndLabel(e,u,(0,ii.Lz)(ce)),et.setClipPath(sa(this,u,!0,e));else{ht&&!U?U=this._newPolygon(_,Ct):U&&!ht&&(et.remove(U),U=this._polygon=null),S||this._initOrUpdateEndLabel(e,u,(0,ii.Lz)(ce));var me=et.getClipPath();if(me){var _e=sa(this,u,!1,e);rr.KZ(me,{shape:_e.shape},e)}else et.setClipPath(sa(this,u,!0,e));It&&L.updateData(v,{isIgnore:Kt,clipShape:oe,disableAnimation:!0,getSymbolPoint:function(Ln){return[_[Ln*2],_[Ln*2+1]]}}),(!No(this._stackedOnPoints,Ct)||!No(this._points,_))&&(ft?this._doUpdateAnimation(v,Ct,u,o,ne,Tt,zt):(ne&&(_=xi(_,u,ne,zt),Ct&&(Ct=xi(Ct,u,ne,zt))),I.setShape({points:_}),U&&U.setShape({points:_,stackedOnPoints:Ct})))}var Ce=e.getModel("emphasis"),ke=Ce.get("focus"),Oe=Ce.get("blurScope"),$e=Ce.get("disabled");if(I.useStyle(g.ce(d.getLineStyle(),{fill:"none",stroke:ce,lineJoin:"bevel"})),(0,Qe.WO)(I,e,"lineStyle"),I.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var yr=I.getState("emphasis").style;yr.lineWidth=+I.style.lineWidth+1}(0,Er.A)(I).seriesIndex=e.seriesIndex,(0,Qe.k5)(I,ke,Oe,$e);var _r=Cr(e.get("smooth")),Xr=e.get("smoothMonotone");if(I.setShape({smooth:_r,smoothMonotone:Xr,connectNulls:zt}),U){var Wr=v.getCalculationInfo("stackedOnSeries"),Gr=0;U.useStyle(g.ce(m.getAreaStyle(),{fill:ce,opacity:.7,lineJoin:"bevel",decal:v.getVisual("style").decal})),Wr&&(Gr=Cr(Wr.get("smooth"))),U.setShape({smooth:_r,stackedOnSmooth:Gr,smoothMonotone:Xr,connectNulls:zt}),(0,Qe.WO)(U,e,"areaStyle"),(0,Er.A)(U).seriesIndex=e.seriesIndex,(0,Qe.k5)(U,ke,Oe,$e)}var ln=function(Ln){s._changePolyState(Ln)};v.eachItemGraphicEl(function(Ln){Ln&&(Ln.onHoverStateChange=ln)}),this._polyline.onHoverStateChange=ln,this._data=v,this._coordSys=u,this._stackedOnPoints=Ct,this._points=_,this._step=ne,this._valueOrigin=Tt,e.get("triggerLineEvent")&&(this.packEventData(e,I),U&&this.packEventData(e,U))},r.prototype.packEventData=function(e,n){(0,Er.A)(n).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},r.prototype.highlight=function(e,n,o,s){var u=e.getData(),h=We.gO(u,s);if(this._changePolyState("emphasis"),!(h instanceof Array)&&h!=null&&h>=0){var v=u.getLayout("points"),d=u.getItemGraphicEl(h);if(!d){var m=v[h*2],_=v[h*2+1];if(isNaN(m)||isNaN(_)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,_))return;var S=e.get("zlevel")||0,A=e.get("z")||0;d=new ni(u,h),d.x=m,d.y=_,d.setZ(S,A);var L=d.getSymbolPath().getTextContent();L&&(L.zlevel=S,L.z=A,L.z2=this._polyline.z2+1),d.__temp=!0,u.setItemGraphicEl(h,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else Mn.Z.prototype.highlight.call(this,e,n,o,s)},r.prototype.downplay=function(e,n,o,s){var u=e.getData(),h=We.gO(u,s);if(this._changePolyState("normal"),h!=null&&h>=0){var v=u.getItemGraphicEl(h);v&&(v.__temp?(u.setItemGraphicEl(h,null),this.group.remove(v)):v.downplay())}else Mn.Z.prototype.downplay.call(this,e,n,o,s)},r.prototype._changePolyState=function(e){var n=this._polygon;(0,Qe.Gl)(this._polyline,e),n&&(0,Qe.Gl)(n,e)},r.prototype._newPolyline=function(e){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new nu({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},r.prototype._newPolygon=function(e,n){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new Oo({shape:{points:e,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},r.prototype._initSymbolLabelAnimation=function(e,n,o){var s,u,h=n.getBaseAxis(),v=h.inverse;n.type==="cartesian2d"?(s=h.isHorizontal(),u=!1):n.type==="polar"&&(s=h.dim==="angle",u=!0);var d=e.hostModel,m=d.get("animationDuration");g.mf(m)&&(m=m(null));var _=d.get("animationDelay")||0,S=g.mf(_)?_(null):_;e.eachItemGraphicEl(function(A,L){var I=A;if(I){var U=[A.x,A.y],et=void 0,ft=void 0,ht=void 0;if(o)if(u){var Tt=o,Et=n.pointToCoord(U);s?(et=Tt.startAngle,ft=Tt.endAngle,ht=-Et[1]/180*Math.PI):(et=Tt.r0,ft=Tt.r,ht=Et[0])}else{var Ct=o;s?(et=Ct.x,ft=Ct.x+Ct.width,ht=A.x):(et=Ct.y+Ct.height,ft=Ct.y,ht=A.y)}var It=ft===et?0:(ht-et)/(ft-et);v&&(It=1-It);var zt=g.mf(_)?_(L):m*It+S,Kt=I.getSymbolPath(),Yt=Kt.getTextContent();I.attr({scaleX:0,scaleY:0}),I.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:zt}),Yt&&Yt.animateFrom({style:{opacity:0}},{duration:300,delay:zt}),Kt.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(e,n,o){var s=e.getModel("endLabel");if(_a(e)){var u=e.getData(),h=this._polyline,v=u.getLayout("points");if(!v){h.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new he.ZP({z2:200}),d.ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var m=xs(v);m>=0&&((0,Ge.ni)(h,(0,Ge.k3)(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:m,defaultText:function(_,S,A){return A!=null?za(u,A):pn(u,_)},enableTextSetter:!0},Fo(s,n)),h.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(e,n,o,s,u,h,v){var d=this._endLabel,m=this._polyline;if(d){e<1&&s.originalX==null&&(s.originalX=d.x,s.originalY=d.y);var _=o.getLayout("points"),S=o.hostModel,A=S.get("connectNulls"),L=h.get("precision"),I=h.get("distance")||0,U=v.getBaseAxis(),et=U.isHorizontal(),ft=U.inverse,ht=n.shape,Tt=ft?et?ht.x:ht.y+ht.height:et?ht.x+ht.width:ht.y,Et=(et?I:0)*(ft?-1:1),Ct=(et?0:-I)*(ft?-1:1),It=et?"x":"y",zt=fl(_,Tt,It),Kt=zt.range,Yt=Kt[1]-Kt[0],ne=void 0;if(Yt>=1){if(Yt>1&&!A){var oe=Yr(_,Kt[0]);d.attr({x:oe[0]+Et,y:oe[1]+Ct}),u&&(ne=S.getRawValue(Kt[0]))}else{var oe=m.getPointOn(Tt,It);oe&&d.attr({x:oe[0]+Et,y:oe[1]+Ct});var ce=S.getRawValue(Kt[0]),me=S.getRawValue(Kt[1]);u&&(ne=We.pk(o,L,ce,me,zt.t))}s.lastFrameIndex=Kt[0]}else{var _e=e===1||s.lastFrameIndex>0?Kt[0]:0,oe=Yr(_,_e);u&&(ne=S.getRawValue(_e)),d.attr({x:oe[0]+Et,y:oe[1]+Ct})}u&&(0,Ge.qA)(d).setLabelText(ne)}},r.prototype._doUpdateAnimation=function(e,n,o,s,u,h,v){var d=this._polyline,m=this._polygon,_=e.hostModel,S=an(this._data,e,this._stackedOnPoints,n,this._coordSys,o,this._valueOrigin,h),A=S.current,L=S.stackedOnCurrent,I=S.next,U=S.stackedOnNext;if(u&&(A=xi(S.current,o,u,v),L=xi(S.stackedOnCurrent,o,u,v),I=xi(S.next,o,u,v),U=xi(S.stackedOnNext,o,u,v)),Br(A,I)>3e3||m&&Br(L,U)>3e3){d.stopAnimation(),d.setShape({points:I}),m&&(m.stopAnimation(),m.setShape({points:I,stackedOnPoints:U}));return}d.shape.__points=S.current,d.shape.points=A;var et={shape:{points:I}};S.current!==A&&(et.shape.__points=S.next),d.stopAnimation(),rr.D(d,et,_),m&&(m.setShape({points:A,stackedOnPoints:L}),m.stopAnimation(),rr.D(m,{shape:{stackedOnPoints:U}},_),d.shape.points!==m.shape.points&&(m.shape.points=d.shape.points));for(var ft=[],ht=S.status,Tt=0;Tt<ht.length;Tt++){var Et=ht[Tt].cmd;if(Et==="="){var Ct=e.getItemGraphicEl(ht[Tt].idx1);Ct&&ft.push({el:Ct,ptIdx:Tt})}}d.animators&&d.animators.length&&d.animators[0].during(function(){m&&m.dirtyShape();for(var It=d.shape.__points,zt=0;zt<ft.length;zt++){var Kt=ft[zt].el,Yt=ft[zt].ptIdx*2;Kt.x=It[Yt],Kt.y=It[Yt+1],Kt.markRedraw()}})},r.prototype.remove=function(e){var n=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(s,u){s.__temp&&(n.remove(s),o.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(Mn.Z),qi=xa,Wi=z(22004);function Hn(a,r){return{seriesType:a,plan:(0,Wi.Z)(),reset:function(e){var n=e.getData(),o=e.coordinateSystem,s=e.pipelineContext,u=r||s.large;if(o){var h=(0,g.UI)(o.dimensions,function(A){return n.mapDimension(A)}).slice(0,2),v=h.length,d=n.getCalculationInfo("stackResultDimension");(0,oa.M)(n,h[0])&&(h[0]=d),(0,oa.M)(n,h[1])&&(h[1]=d);var m=n.getStore(),_=n.getDimensionIndex(h[0]),S=n.getDimensionIndex(h[1]);return v&&{progress:function(A,L){for(var I=A.end-A.start,U=u&&(0,En.o)(I*v),et=[],ft=[],ht=A.start,Tt=0;ht<A.end;ht++){var Et=void 0;if(v===1){var Ct=m.get(_,ht);Et=o.dataToPoint(Ct,null,ft)}else et[0]=m.get(_,ht),et[1]=m.get(S,ht),Et=o.dataToPoint(et,null,ft);u?(U[Tt++]=Et[0],U[Tt++]=Et[1]):L.setItemLayout(ht,Et.slice())}u&&L.setLayout("points",U)}}}}}}var la={average:function(a){for(var r=0,e=0,n=0;n<a.length;n++)isNaN(a[n])||(r+=a[n],e++);return e===0?NaN:r/e},sum:function(a){for(var r=0,e=0;e<a.length;e++)r+=a[e]||0;return r},max:function(a){for(var r=-1/0,e=0;e<a.length;e++)a[e]>r&&(r=a[e]);return isFinite(r)?r:NaN},min:function(a){for(var r=1/0,e=0;e<a.length;e++)a[e]<r&&(r=a[e]);return isFinite(r)?r:NaN},nearest:function(a){return a[0]}},ta=function(a){return Math.round(a.length/2)};function Hi(a){return{seriesType:a,reset:function(r,e,n){var o=r.getData(),s=r.get("sampling"),u=r.coordinateSystem,h=o.count();if(h>10&&u.type==="cartesian2d"&&s){var v=u.getBaseAxis(),d=u.getOtherAxis(v),m=v.getExtent(),_=n.getDevicePixelRatio(),S=Math.abs(m[1]-m[0])*(_||1),A=Math.round(h/S);if(isFinite(A)&&A>1){s==="lttb"&&r.setData(o.lttbDownSample(o.mapDimension(d.dim),1/A));var L=void 0;(0,g.HD)(s)?L=la[s]:(0,g.mf)(s)&&(L=s),L&&r.setData(o.downSample(o.mapDimension(d.dim),1/A,L,ta))}}}}}function Ea(a){a.registerChartView(qi),a.registerSeriesModel(ru),a.registerLayout(Hn("line",!0)),a.registerVisual({seriesType:"line",reset:function(r){var e=r.getData(),n=r.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Hi("line"))}var Qr=z(93784),hl=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,n,o){var s=this.coordinateSystem;if(s&&s.clampData){var u=s.clampData(e),h=s.dataToPoint(u);if(o)(0,g.S6)(s.getAxes(),function(S,A){if(S.type==="category"&&n!=null){var L=S.getTicksCoords(),I=u[A],U=n[A]==="x1"||n[A]==="y1";if(U&&(I+=1),L.length<2)return;if(L.length===2){h[A]=S.toGlobalCoord(S.getExtent()[U?1:0]);return}for(var et=void 0,ft=void 0,ht=1,Tt=0;Tt<L.length;Tt++){var Et=L[Tt].coord,Ct=Tt===L.length-1?L[Tt-1].tickValue+ht:L[Tt].tickValue;if(Ct===I){ft=Et;break}else if(Ct<I)et=Et;else if(et!=null&&Ct>I){ft=(Et+et)/2;break}Tt===1&&(ht=Ct-L[0].tickValue)}ft==null&&(et?et&&(ft=L[L.length-1].coord):ft=L[0].coord),h[A]=S.toGlobalCoord(ft)}});else{var v=this.getData(),d=v.getLayout("offset"),m=v.getLayout("size"),_=s.getBaseAxis().isHorizontal()?0:1;h[_]+=d+m/2}return h}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(yn.Z);yn.Z.registerClass(hl);var hi=hl,Di=z(95827),Ua=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return(0,un.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>e&&(e=n),e},r.prototype.brushSelector=function(e,n,o){return o.rect(n.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=(0,Di.ZL)(hi.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(hi),ci=Ua,_n=z(39783),Ss=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),cl=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="sausage",n}return r.prototype.getDefaultShape=function(){return new Ss},r.prototype.buildPath=function(e,n){var o=n.cx,s=n.cy,u=Math.max(n.r0||0,0),h=Math.max(n.r,0),v=(h-u)*.5,d=u+v,m=n.startAngle,_=n.endAngle,S=n.clockwise,A=Math.PI*2,L=S?_-m<A:m-_<A;L||(m=_-(S?A:-A));var I=Math.cos(m),U=Math.sin(m),et=Math.cos(_),ft=Math.sin(_);L?(e.moveTo(I*u+o,U*u+s),e.arc(I*d+o,U*d+s,v,-Math.PI+m,m,!S)):e.moveTo(I*h+o,U*h+s),e.arc(o,s,h,m,_,!S),e.arc(et*d+o,ft*d+s,v,_-Math.PI*2,_-Math.PI,!S),u!==0&&e.arc(o,s,u,_,m,S)},r}(yt.ZP),Li=cl;function vl(a,r){r=r||{};var e=r.isRoundCap;return function(n,o,s){var u=o.position;if(!u||u instanceof Array)return(0,xt.wI)(n,o,s);var h=a(u),v=o.distance!=null?o.distance:5,d=this.shape,m=d.cx,_=d.cy,S=d.r,A=d.r0,L=(S+A)/2,I=d.startAngle,U=d.endAngle,et=(I+U)/2,ft=e?Math.abs(S-A)/2:0,ht=Math.cos,Tt=Math.sin,Et=m+S*ht(I),Ct=_+S*Tt(I),It="left",zt="top";switch(h){case"startArc":Et=m+(A-v)*ht(et),Ct=_+(A-v)*Tt(et),It="center",zt="top";break;case"insideStartArc":Et=m+(A+v)*ht(et),Ct=_+(A+v)*Tt(et),It="center",zt="bottom";break;case"startAngle":Et=m+L*ht(I)+Dn(I,v+ft,!1),Ct=_+L*Tt(I)+Za(I,v+ft,!1),It="right",zt="middle";break;case"insideStartAngle":Et=m+L*ht(I)+Dn(I,-v+ft,!1),Ct=_+L*Tt(I)+Za(I,-v+ft,!1),It="left",zt="middle";break;case"middle":Et=m+L*ht(et),Ct=_+L*Tt(et),It="center",zt="middle";break;case"endArc":Et=m+(S+v)*ht(et),Ct=_+(S+v)*Tt(et),It="center",zt="bottom";break;case"insideEndArc":Et=m+(S-v)*ht(et),Ct=_+(S-v)*Tt(et),It="center",zt="top";break;case"endAngle":Et=m+L*ht(U)+Dn(U,v+ft,!0),Ct=_+L*Tt(U)+Za(U,v+ft,!0),It="left",zt="middle";break;case"insideEndAngle":Et=m+L*ht(U)+Dn(U,-v+ft,!0),Ct=_+L*Tt(U)+Za(U,-v+ft,!0),It="right",zt="middle";break;default:return(0,xt.wI)(n,o,s)}return n=n||{},n.x=Et,n.y=Ct,n.align=It,n.verticalAlign=zt,n}}function Go(a,r,e,n){if((0,g.hj)(n)){a.setTextConfig({rotation:n});return}else if((0,g.kJ)(r)){a.setTextConfig({rotation:0});return}var o=a.shape,s=o.clockwise?o.startAngle:o.endAngle,u=o.clockwise?o.endAngle:o.startAngle,h=(s+u)/2,v,d=e(r);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":v=h;break;case"startAngle":case"insideStartAngle":v=s;break;case"endAngle":case"insideEndAngle":v=u;break;default:a.setTextConfig({rotation:0});return}var m=Math.PI*1.5-v;d==="middle"&&m>Math.PI/2&&m<Math.PI*1.5&&(m-=Math.PI),a.setTextConfig({rotation:m})}function Dn(a,r,e){return r*Math.sin(a)*(e?-1:1)}function Za(a,r,e){return r*Math.cos(a)*(e?1:-1)}function ua(a,r,e){var n=a.get("borderRadius");if(n==null)return e?{cornerRadius:0}:null;(0,g.kJ)(n)||(n=[n,n,n,n]);var o=Math.abs(r.r||0-r.r0||0);return{cornerRadius:(0,g.UI)(n,function(s){return(0,xt.GM)(s,o)})}}var Pa=Math.max,so=Math.min;function Ts(a,r){var e=a.getArea&&a.getArea();if(ya(a,"cartesian2d")){var n=a.getBaseAxis();if(n.type!=="category"||!n.onBand){var o=r.getLayout("bandWidth");n.isHorizontal()?(e.x-=o,e.width+=o*2):(e.y-=o,e.height+=o*2)}}return e}var Sa=function(a){(0,Wt.ZT)(r,a);function r(){var e=a.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,n,o,s){this._model=e,this._removeOnRenderedListener(o),this._updateDrawMode(e);var u=e.get("coordinateSystem");(u==="cartesian2d"||u==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,n,o):this._renderNormal(e,n,o,s))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,n){this._progressiveEls=[],this._incrementalRenderLarge(e,n)},r.prototype.eachRendered=function(e){(0,mr.traverseElements)(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e,n,o,s){var u=this.group,h=e.getData(),v=this._data,d=e.coordinateSystem,m=d.getBaseAxis(),_;d.type==="cartesian2d"?_=m.isHorizontal():d.type==="polar"&&(_=m.dim==="angle");var S=e.isAnimationEnabled()?e:null,A=Df(e,d);A&&this._enableRealtimeSort(A,h,o);var L=e.get("clip",!0)||A,I=Ts(d,h);u.removeClipPath();var U=e.get("roundCap",!0),et=e.get("showBackground",!0),ft=e.getModel("backgroundStyle"),ht=ft.get("borderRadius")||0,Tt=[],Et=this._backgroundEls,Ct=s&&s.isInitSort,It=s&&s.type==="changeAxisOrder";function zt(ne){var oe=pl[d.type](h,ne),ce=Da(d,_,oe);return ce.useStyle(ft.getItemStyle()),d.type==="cartesian2d"?ce.setShape("r",ht):ce.setShape("cornerRadius",ht),Tt[ne]=ce,ce}h.diff(v).add(function(ne){var oe=h.getItemModel(ne),ce=pl[d.type](h,ne,oe);if(et&&zt(ne),!(!h.hasValue(ne)||!wf[d.type](ce))){var me=!1;L&&(me=zo[d.type](I,ce));var _e=Wa[d.type](e,h,ne,ce,_,S,m.model,!1,U);A&&(_e.forceLabelAnimation=!0),lo(_e,h,ne,oe,ce,e,_,d.type==="polar"),Ct?_e.attr({shape:ce}):A?Vo(A,S,_e,ce,ne,_,!1,!1):(0,rr.KZ)(_e,{shape:ce},e,ne),h.setItemGraphicEl(ne,_e),u.add(_e),_e.ignore=me}}).update(function(ne,oe){var ce=h.getItemModel(ne),me=pl[d.type](h,ne,ce);if(et){var _e=void 0;Et.length===0?_e=zt(oe):(_e=Et[oe],_e.useStyle(ft.getItemStyle()),d.type==="cartesian2d"?_e.setShape("r",ht):_e.setShape("cornerRadius",ht),Tt[ne]=_e);var Ce=pl[d.type](h,ne),ke=ko(_,Ce,d);(0,rr.D)(_e,{shape:ke},S,ne)}var Oe=v.getItemGraphicEl(oe);if(!h.hasValue(ne)||!wf[d.type](me)){u.remove(Oe);return}var $e=!1;if(L&&($e=zo[d.type](I,me),$e&&u.remove(Oe)),Oe?(0,rr.Zi)(Oe):Oe=Wa[d.type](e,h,ne,me,_,S,m.model,!!Oe,U),A&&(Oe.forceLabelAnimation=!0),It){var yr=Oe.getTextContent();if(yr){var _r=(0,Ge.qA)(yr);_r.prevValue!=null&&(_r.prevValue=_r.value)}}else lo(Oe,h,ne,ce,me,e,_,d.type==="polar");Ct?Oe.attr({shape:me}):A?Vo(A,S,Oe,me,ne,_,!0,It):(0,rr.D)(Oe,{shape:me},e,ne,null),h.setItemGraphicEl(ne,Oe),Oe.ignore=$e,u.add(Oe)}).remove(function(ne){var oe=v.getItemGraphicEl(ne);oe&&(0,rr.XD)(oe,e,ne)}).execute();var Kt=this._backgroundGroup||(this._backgroundGroup=new Mr.Z);Kt.removeAll();for(var Yt=0;Yt<Tt.length;++Yt)Kt.add(Tt[Yt]);u.add(Kt),this._backgroundEls=Tt,this._data=h},r.prototype._renderLarge=function(e,n,o){this._clear(),uo(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,n){this._removeBackground(),uo(n,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var n=e.get("clip",!0)&&oo(e.coordinateSystem,!1,e),o=this.group;n?o.setClipPath(n):o.removeClipPath()},r.prototype._enableRealtimeSort=function(e,n,o){var s=this;if(n.count()){var u=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,e,o),this._isFirstFrame=!1;else{var h=function(v){var d=n.getItemGraphicEl(v),m=d&&d.shape;return m&&Math.abs(u.isHorizontal()?m.height:m.width)||0};this._onRendered=function(){s._updateSortWithinSameData(n,h,u,o)},o.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,n,o){var s=[];return e.each(e.mapDimension(n.dim),function(u,h){var v=o(h);v=v==null?NaN:v,s.push({dataIndex:h,mappedValue:v,ordinalNumber:u})}),s.sort(function(u,h){return h.mappedValue-u.mappedValue}),{ordinalNumbers:(0,g.UI)(s,function(u){return u.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,n,o){for(var s=o.scale,u=e.mapDimension(o.dim),h=Number.MAX_VALUE,v=0,d=s.getOrdinalMeta().categories.length;v<d;++v){var m=e.rawIndexOf(u,s.getRawOrdinalNumber(v)),_=m<0?Number.MIN_VALUE:n(e.indexOfRawIndex(m));if(_>h)return!0;h=_}return!1},r.prototype._isOrderDifferentInView=function(e,n){for(var o=n.scale,s=o.getExtent(),u=Math.max(0,s[0]),h=Math.min(s[1],o.getOrdinalMeta().categories.length-1);u<=h;++u)if(e.ordinalNumbers[u]!==o.getRawOrdinalNumber(u))return!0},r.prototype._updateSortWithinSameData=function(e,n,o,s){if(this._isOrderChangedWithinSameData(e,n,o)){var u=this._dataSort(e,o,n);this._isOrderDifferentInView(u,o)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:u}))}},r.prototype._dispatchInitSort=function(e,n,o){var s=n.baseAxis,u=this._dataSort(e,s,function(h){return e.get(e.mapDimension(n.otherAxis.dim),h)});o.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:u})},r.prototype.remove=function(e,n){this._clear(this._model),this._removeOnRenderedListener(n)},r.prototype.dispose=function(e,n){this._removeOnRenderedListener(n)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var n=this.group,o=this._data;e&&e.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(s){(0,rr.XD)(s,e,(0,Er.A)(s).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Mn.Z),zo={cartesian2d:function(a,r){var e=r.width<0?-1:1,n=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height);var o=a.x+a.width,s=a.y+a.height,u=Pa(r.x,a.x),h=so(r.x+r.width,o),v=Pa(r.y,a.y),d=so(r.y+r.height,s),m=h<u,_=d<v;return r.x=m&&u>o?h:u,r.y=_&&v>s?d:v,r.width=m?0:h-u,r.height=_?0:d-v,e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height),m||_},polar:function(a,r){var e=r.r0<=r.r?1:-1;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}var o=so(r.r,a.r),s=Pa(r.r0,a.r0);r.r=o,r.r0=s;var u=o-s<0;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}return u}},Wa={cartesian2d:function(a,r,e,n,o,s,u,h,v){var d=new Kr.Z({shape:(0,g.l7)({},n),z2:1});if(d.__dataIndex=e,d.name="item",s){var m=d.shape,_=o?"height":"width";m[_]=0}return d},polar:function(a,r,e,n,o,s,u,h,v){var d=!o&&v?Li:Ei.C,m=new d({shape:n,z2:1});m.name="item";var _=Af(o);if(m.calculateTextPosition=vl(_,{isRoundCap:d===Li}),s){var S=m.shape,A=o?"r":"endAngle",L={};S[A]=o?n.r0:n.startAngle,L[A]=n[A],(h?rr.D:rr.KZ)(m,{shape:L},s)}return m}};function Df(a,r){var e=a.get("realtimeSort",!0),n=r.getBaseAxis();if(e&&n.type==="category"&&r.type==="cartesian2d")return{baseAxis:n,otherAxis:r.getOtherAxis(n)}}function Vo(a,r,e,n,o,s,u,h){var v,d;s?(d={x:n.x,width:n.width},v={y:n.y,height:n.height}):(d={y:n.y,height:n.height},v={x:n.x,width:n.width}),h||(u?rr.D:rr.KZ)(e,{shape:v},r,o,null);var m=r?a.baseAxis.model:null;(u?rr.D:rr.KZ)(e,{shape:d},m,o)}function Ds(a,r){for(var e=0;e<r.length;e++)if(!isFinite(a[r[e]]))return!0;return!1}var lc=["x","y","width","height"],dl=["cx","cy","r","startAngle","endAngle"],wf={cartesian2d:function(a){return!Ds(a,lc)},polar:function(a){return!Ds(a,dl)}},pl={cartesian2d:function(a,r,e){var n=a.getItemLayout(r),o=e?su(e,n):0,s=n.width>0?1:-1,u=n.height>0?1:-1;return{x:n.x+s*o/2,y:n.y+u*o/2,width:n.width-s*o,height:n.height-u*o}},polar:function(a,r,e){var n=a.getItemLayout(r);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Ta(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function Af(a){return function(r){var e=r?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+e;default:return n}}}(a)}function lo(a,r,e,n,o,s,u,h){var v=r.getItemVisual(e,"style");if(h){if(!s.get("roundCap")){var m=a.shape,_=ua(n.getModel("itemStyle"),m,!0);(0,g.l7)(m,_),a.setShape(m)}}else{var d=n.get(["itemStyle","borderRadius"])||0;a.setShape("r",d)}a.useStyle(v);var S=n.getShallow("cursor");S&&a.attr("cursor",S);var A=h?u?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":u?o.height>=0?"bottom":"top":o.width>=0?"right":"left",L=(0,Ge.k3)(n);(0,Ge.ni)(a,L,{labelFetcher:s,labelDataIndex:e,defaultText:pn(s.getData(),e),inheritColor:v.fill,defaultOpacity:v.opacity,defaultOutsidePosition:A});var I=a.getTextContent();if(h&&I){var U=n.get(["label","position"]);a.textConfig.inside=U==="middle"?!0:null,Go(a,U==="outside"?A:U,Af(u),n.get(["label","rotate"]))}(0,Ge.pe)(I,L,s.getRawValue(e),function(ft){return za(r,ft)});var et=n.getModel(["emphasis"]);(0,Qe.k5)(a,et.get("focus"),et.get("blurScope"),et.get("disabled")),(0,Qe.WO)(a,n),Ta(o)&&(a.style.fill="none",a.style.stroke="none",(0,g.S6)(a.states,function(ft){ft.style&&(ft.style.fill=ft.style.stroke="none")}))}function su(a,r){var e=a.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var n=a.get(["itemStyle","borderWidth"])||0,o=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),s=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(n,o,s)}var ws=function(){function a(){}return a}(),Ha=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeBar",n}return r.prototype.getDefaultShape=function(){return new ws},r.prototype.buildPath=function(e,n){for(var o=n.points,s=this.baseDimIdx,u=1-this.baseDimIdx,h=[],v=[],d=this.barWidth,m=0;m<o.length;m+=3)v[s]=d,v[u]=o[m+2],h[s]=o[m+s],h[u]=o[m+u],e.rect(h[0],h[1],v[0],v[1])},r}(yt.ZP);function uo(a,r,e,n){var o=a.getData(),s=o.getLayout("valueAxisHorizontal")?1:0,u=o.getLayout("largeDataIndices"),h=o.getLayout("size"),v=a.getModel("backgroundStyle"),d=o.getLayout("largeBackgroundPoints");if(d){var m=new Ha({shape:{points:d},incremental:!!n,silent:!0,z2:0});m.baseDimIdx=s,m.largeDataIndices=u,m.barWidth=h,m.useStyle(v.getItemStyle()),r.add(m),e&&e.push(m)}var _=new Ha({shape:{points:o.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});_.baseDimIdx=s,_.largeDataIndices=u,_.barWidth=h,r.add(_),_.useStyle(o.getVisual("style")),(0,Er.A)(_).seriesIndex=a.seriesIndex,a.get("silent")||(_.on("mousedown",As),_.on("mousemove",As)),e&&e.push(_)}var As=(0,_n.P2)(function(a){var r=this,e=Gn(r,a.offsetX,a.offsetY);(0,Er.A)(r).dataIndex=e>=0?e:null},30,!1);function Gn(a,r,e){for(var n=a.baseDimIdx,o=1-n,s=a.shape.points,u=a.largeDataIndices,h=[],v=[],d=a.barWidth,m=0,_=s.length/3;m<_;m++){var S=m*3;if(v[n]=d,v[o]=s[S+2],h[n]=s[S+n],h[o]=s[S+o],v[o]<0&&(h[o]+=v[o],v[o]=-v[o]),r>=h[0]&&r<=h[0]+v[0]&&e>=h[1]&&e<=h[1]+v[1])return u[m]}return-1}function ko(a,r,e){if(ya(e,"cartesian2d")){var n=r,o=e.getArea();return{x:a?n.x:o.x,y:a?o.y:n.y,width:a?n.width:o.width,height:a?o.height:n.height}}else{var o=e.getArea(),s=r;return{cx:o.cx,cy:o.cy,r0:a?o.r0:s.r0,r:a?o.r:s.r,startAngle:a?s.startAngle:0,endAngle:a?s.endAngle:Math.PI*2}}}function Da(a,r,e){var n=a.type==="polar"?Ei.C:Kr.Z;return new n({shape:ko(r,e,a),silent:!0,z2:0})}var lu=Sa;function La(a){a.registerChartView(lu),a.registerSeriesModel(ci),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,g.WA(Qr.bK,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Qr.Bk)("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Hi("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var n=r.componentType||"series";e.eachComponent({mainType:n,query:r},function(o){r.sortInfo&&o.axis.setCategorySortInfo(r.sortInfo)})})}var Uo=z(67849),Hr=z(28734),ea=Math.PI*2,Zo=Math.PI/180;function fo(a,r){return Hr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function gl(a,r){var e=fo(a,r),n=a.get("center"),o=a.get("radius");g.kJ(o)||(o=[0,o]);var s=(0,De.GM)(e.width,r.getWidth()),u=(0,De.GM)(e.height,r.getHeight()),h=Math.min(s,u),v=(0,De.GM)(o[0],h/2),d=(0,De.GM)(o[1],h/2),m,_,S=a.coordinateSystem;if(S){var A=S.dataToPoint(n);m=A[0]||0,_=A[1]||0}else g.kJ(n)||(n=[n,n]),m=(0,De.GM)(n[0],s)+e.x,_=(0,De.GM)(n[1],u)+e.y;return{cx:m,cy:_,r0:v,r:d}}function Wo(a,r,e){r.eachSeriesByType(a,function(n){var o=n.getData(),s=o.mapDimension("value"),u=fo(n,e),h=gl(n,e),v=h.cx,d=h.cy,m=h.r,_=h.r0,S=-n.get("startAngle")*Zo,A=n.get("minAngle")*Zo,L=0;o.each(s,function(Yt){!isNaN(Yt)&&L++});var I=o.getSum(s),U=Math.PI/(I||L)*2,et=n.get("clockwise"),ft=n.get("roseType"),ht=n.get("stillShowZeroSum"),Tt=o.getDataExtent(s);Tt[0]=0;var Et=ea,Ct=0,It=S,zt=et?1:-1;if(o.setLayout({viewRect:u,r:m}),o.each(s,function(Yt,ne){var oe;if(isNaN(Yt)){o.setItemLayout(ne,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:et,cx:v,cy:d,r0:_,r:ft?NaN:m});return}ft!=="area"?oe=I===0&&ht?U:Yt*U:oe=ea/L,oe<A?(oe=A,Et-=A):Ct+=Yt;var ce=It+zt*oe;o.setItemLayout(ne,{angle:oe,startAngle:It,endAngle:ce,clockwise:et,cx:v,cy:d,r0:_,r:ft?(0,De.NU)(Yt,Tt,[_,m]):m}),It=ce}),Et<ea&&L)if(Et<=.001){var Kt=ea/L;o.each(s,function(Yt,ne){if(!isNaN(Yt)){var oe=o.getItemLayout(ne);oe.angle=Kt,oe.startAngle=S+zt*ne*Kt,oe.endAngle=S+zt*(ne+1)*Kt}})}else U=Et/Ct,It=S,o.each(s,function(Yt,ne){if(!isNaN(Yt)){var oe=o.getItemLayout(ne),ce=oe.angle===A?A:Yt*U;oe.startAngle=It,oe.endAngle=It+zt*ce,It+=zt*ce}})})}function Xn(a){return{seriesType:a,reset:function(r,e){var n=e.findComponents({mainType:"legend"});if(!(!n||!n.length)){var o=r.getData();o.filterSelf(function(s){for(var u=o.getName(s),h=0;h<n.length;h++)if(!n[h].isSelected(u))return!1;return!0})}}}}var Rt=z(6224),Ft=z(73913),Lt=z(48138),Gt=z(22804),Ut=Math.PI/180;function Jt(a,r,e,n,o,s,u,h,v,d){if(a.length<2)return;function m(I){for(var U=I.rB,et=U*U,ft=0;ft<I.list.length;ft++){var ht=I.list[ft],Tt=Math.abs(ht.label.y-e),Et=n+ht.len,Ct=Et*Et,It=Math.sqrt((1-Math.abs(Tt*Tt/et))*Ct),zt=r+(It+ht.len2)*o,Kt=zt-ht.label.x,Yt=ht.targetTextWidth-Kt*o;Le(ht,Yt,!0),ht.label.x=zt}}function _(I){for(var U={list:[],maxY:0},et={list:[],maxY:0},ft=0;ft<I.length;ft++)if(I[ft].labelAlignTo==="none"){var ht=I[ft],Tt=ht.label.y>e?et:U,Et=Math.abs(ht.label.y-e);if(Et>=Tt.maxY){var Ct=ht.label.x-r-ht.len2*o,It=n+ht.len,zt=Math.abs(Ct)<It?Math.sqrt(Et*Et/(1-Ct*Ct/It/It)):It;Tt.rB=zt,Tt.maxY=Et}Tt.list.push(ht)}m(U),m(et)}for(var S=a.length,A=0;A<S;A++)if(a[A].position==="outer"&&a[A].labelAlignTo==="labelLine"){var L=a[A].label.x-d;a[A].linePoints[1][0]+=L,a[A].label.x=d}(0,Gt.GI)(a,v,v+u)&&_(a)}function de(a,r,e,n,o,s,u,h){for(var v=[],d=[],m=Number.MAX_VALUE,_=-Number.MAX_VALUE,S=0;S<a.length;S++){var A=a[S].label;Me(a[S])||(A.x<r?(m=Math.min(m,A.x),v.push(a[S])):(_=Math.max(_,A.x),d.push(a[S])))}for(var S=0;S<a.length;S++){var L=a[S];if(!Me(L)&&L.linePoints){if(L.labelStyleWidth!=null)continue;var A=L.label,I=L.linePoints,U=void 0;L.labelAlignTo==="edge"?A.x<r?U=I[2][0]-L.labelDistance-u-L.edgeDistance:U=u+o-L.edgeDistance-I[2][0]-L.labelDistance:L.labelAlignTo==="labelLine"?A.x<r?U=m-u-L.bleedMargin:U=u+o-_-L.bleedMargin:A.x<r?U=A.x-u-L.bleedMargin:U=u+o-A.x-L.bleedMargin,L.targetTextWidth=U,Le(L,U)}}Jt(d,r,e,n,1,o,s,u,h,_),Jt(v,r,e,n,-1,o,s,u,h,m);for(var S=0;S<a.length;S++){var L=a[S];if(!Me(L)&&L.linePoints){var A=L.label,I=L.linePoints,et=L.labelAlignTo==="edge",ft=A.style.padding,ht=ft?ft[1]+ft[3]:0,Tt=A.style.backgroundColor?0:ht,Et=L.rect.width+Tt,Ct=I[1][0]-I[2][0];et?A.x<r?I[2][0]=u+L.edgeDistance+Et+L.labelDistance:I[2][0]=u+o-L.edgeDistance-Et-L.labelDistance:(A.x<r?I[2][0]=A.x+L.labelDistance:I[2][0]=A.x-L.labelDistance,I[1][0]=I[2][0]+Ct),I[1][1]=I[2][1]=A.y}}}function Le(a,r,e){if(e===void 0&&(e=!1),a.labelStyleWidth==null){var n=a.label,o=n.style,s=a.rect,u=o.backgroundColor,h=o.padding,v=h?h[1]+h[3]:0,d=o.overflow,m=s.width+(u?0:v);if(r<m||e){var _=s.height;if(d&&d.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",r-v);var S=n.getBoundingRect();n.setStyle("width",Math.ceil(S.width)),n.setStyle("backgroundColor",u)}else{var A=r-v,L=r<m?A:e?A>a.unconstrainedWidth?null:A:null;n.setStyle("width",L)}var I=n.getBoundingRect();s.width=I.width;var U=(n.style.margin||0)+2.1;s.height=I.height+U,s.y-=(s.height-_)/2}}}function Me(a){return a.position==="center"}function Ke(a){var r=a.getData(),e=[],n,o,s=!1,u=(a.get("minShowLabelAngle")||0)*Ut,h=r.getLayout("viewRect"),v=r.getLayout("r"),d=h.width,m=h.x,_=h.y,S=h.height;function A(Ct){Ct.ignore=!0}function L(Ct){if(!Ct.ignore)return!0;for(var It in Ct.states)if(Ct.states[It].ignore===!1)return!0;return!1}r.each(function(Ct){var It=r.getItemGraphicEl(Ct),zt=It.shape,Kt=It.getTextContent(),Yt=It.getTextGuideLine(),ne=r.getItemModel(Ct),oe=ne.getModel("label"),ce=oe.get("position")||ne.get(["emphasis","label","position"]),me=oe.get("distanceToLabelLine"),_e=oe.get("alignTo"),Ce=(0,De.GM)(oe.get("edgeDistance"),d),ke=oe.get("bleedMargin"),Oe=ne.getModel("labelLine"),$e=Oe.get("length");$e=(0,De.GM)($e,d);var yr=Oe.get("length2");if(yr=(0,De.GM)(yr,d),Math.abs(zt.endAngle-zt.startAngle)<u){(0,g.S6)(Kt.states,A),Kt.ignore=!0,Yt&&((0,g.S6)(Yt.states,A),Yt.ignore=!0);return}if(L(Kt)){var _r=(zt.startAngle+zt.endAngle)/2,Xr=Math.cos(_r),Wr=Math.sin(_r),Gr,ln,Ln,on;n=zt.cx,o=zt.cy;var zr=ce==="inside"||ce==="inner";if(ce==="center")Gr=zt.cx,ln=zt.cy,on="center";else{var bn=(zr?(zt.r+zt.r0)/2*Xr:zt.r*Xr)+n,Sn=(zr?(zt.r+zt.r0)/2*Wr:zt.r*Wr)+o;if(Gr=bn+Xr*3,ln=Sn+Wr*3,!zr){var In=bn+Xr*($e+v-zt.r),Mi=Sn+Wr*($e+v-zt.r),Bi=In+(Xr<0?-1:1)*yr,Kn=Mi;_e==="edge"?Gr=Xr<0?m+Ce:m+d-Ce:Gr=Bi+(Xr<0?-me:me),ln=Kn,Ln=[[bn,Sn],[In,Mi],[Bi,Kn]]}on=zr?"center":_e==="edge"?Xr>0?"right":"left":Xr>0?"left":"right"}var Ti=Math.PI,mi=0,Qi=oe.get("rotate");if((0,g.hj)(Qi))mi=Qi*(Ti/180);else if(ce==="center")mi=0;else if(Qi==="radial"||Qi===!0){var ys=Xr<0?-_r+Ti:-_r;mi=ys}else if(Qi==="tangential"&&ce!=="outside"&&ce!=="outer"){var ga=Math.atan2(Xr,Wr);ga<0&&(ga=Ti*2+ga);var tp=Wr>0;tp&&(ga=Ti+ga),mi=ga-Ti}if(s=!!mi,Kt.x=Gr,Kt.y=ln,Kt.rotation=mi,Kt.setStyle({verticalAlign:"middle"}),zr){Kt.setStyle({align:on});var hy=Kt.states.select;hy&&(hy.x+=Kt.x,hy.y+=Kt.y)}else{var ol=Kt.getBoundingRect().clone();ol.applyTransform(Kt.getComputedTransform());var Kx=(Kt.style.margin||0)+2.1;ol.y-=Kx/2,ol.height+=Kx,e.push({label:Kt,labelLine:Yt,position:ce,len:$e,len2:yr,minTurnAngle:Oe.get("minTurnAngle"),maxSurfaceAngle:Oe.get("maxSurfaceAngle"),surfaceNormal:new Ft.Z(Xr,Wr),linePoints:Ln,textAlign:on,labelDistance:me,labelAlignTo:_e,edgeDistance:Ce,bleedMargin:ke,rect:ol,unconstrainedWidth:ol.width,labelStyleWidth:Kt.style.width})}It.setTextConfig({inside:zr})}}),!s&&a.get("avoidLabelOverlap")&&de(e,n,o,v,d,S,m,_);for(var I=0;I<e.length;I++){var U=e[I],et=U.label,ft=U.labelLine,ht=isNaN(et.x)||isNaN(et.y);if(et){et.setStyle({align:U.textAlign}),ht&&((0,g.S6)(et.states,A),et.ignore=!0);var Tt=et.states.select;Tt&&(Tt.x+=et.x,Tt.y+=et.y)}if(ft){var Et=U.linePoints;ht||!Et?((0,g.S6)(ft.states,A),ft.ignore=!0):((0,Lt.qK)(Et,U.minTurnAngle),(0,Lt._A)(Et,U.surfaceNormal,U.maxSurfaceAngle),ft.setShape({points:Et}),et.__hostTarget.textGuideLineConfig={anchor:new Ft.Z(Et[0][0],Et[0][1])})}}}var lr=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;s.z2=2;var u=new he.ZP;return s.setTextContent(u),s.updateData(e,n,o,!0),s}return r.prototype.updateData=function(e,n,o,s){var u=this,h=e.hostModel,v=e.getItemModel(n),d=v.getModel("emphasis"),m=e.getItemLayout(n),_=(0,g.l7)(ua(v.getModel("itemStyle"),m,!0),m);if(isNaN(_.startAngle)){u.setShape(_);return}if(s){u.setShape(_);var S=h.getShallow("animationType");h.ecModel.ssr?(rr.KZ(u,{scaleX:0,scaleY:0},h,{dataIndex:n,isFrom:!0}),u.originX=_.cx,u.originY=_.cy):S==="scale"?(u.shape.r=m.r0,rr.KZ(u,{shape:{r:m.r}},h,n)):o!=null?(u.setShape({startAngle:o,endAngle:o}),rr.KZ(u,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},h,n)):(u.shape.endAngle=m.startAngle,rr.D(u,{shape:{endAngle:m.endAngle}},h,n))}else(0,rr.Zi)(u),rr.D(u,{shape:_},h,n);u.useStyle(e.getItemVisual(n,"style")),(0,Qe.WO)(u,v);var A=(m.startAngle+m.endAngle)/2,L=h.get("selectedOffset"),I=Math.cos(A)*L,U=Math.sin(A)*L,et=v.getShallow("cursor");et&&u.attr("cursor",et),this._updateLabel(h,e,n),u.ensureState("emphasis").shape=(0,g.l7)({r:m.r+(d.get("scale")&&d.get("scaleSize")||0)},ua(d.getModel("itemStyle"),m)),(0,g.l7)(u.ensureState("select"),{x:I,y:U,shape:ua(v.getModel(["select","itemStyle"]),m)}),(0,g.l7)(u.ensureState("blur"),{shape:ua(v.getModel(["blur","itemStyle"]),m)});var ft=u.getTextGuideLine(),ht=u.getTextContent();ft&&(0,g.l7)(ft.ensureState("select"),{x:I,y:U}),(0,g.l7)(ht.ensureState("select"),{x:I,y:U}),(0,Qe.k5)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n,o){var s=this,u=n.getItemModel(o),h=u.getModel("labelLine"),v=n.getItemVisual(o,"style"),d=v&&v.fill,m=v&&v.opacity;(0,Ge.ni)(s,(0,Ge.k3)(u),{labelFetcher:n.hostModel,labelDataIndex:o,inheritColor:d,defaultOpacity:m,defaultText:e.getFormattedLabel(o,"normal")||n.getName(o)});var _=s.getTextContent();s.setTextConfig({position:null,rotation:null}),_.attr({z2:10});var S=e.get(["label","position"]);if(S!=="outside"&&S!=="outer")s.removeTextGuideLine();else{var A=this.getTextGuideLine();A||(A=new Rt.Z,this.setTextGuideLine(A)),(0,Lt.Iu)(this,(0,Lt.$x)(u),{stroke:d,opacity:(0,g.R1)(h.get(["lineStyle","opacity"]),m,1)})}},r}(Ei.C),se=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,n,o,s){var u=e.getData(),h=this._data,v=this.group,d;if(!h&&u.count()>0){for(var m=u.getItemLayout(0),_=1;isNaN(m&&m.startAngle)&&_<u.count();++_)m=u.getItemLayout(_);m&&(d=m.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),u.count()===0&&e.get("showEmptyCircle")){var S=new Ei.C({shape:gl(e,o)});S.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=S,v.add(S)}u.diff(h).add(function(A){var L=new lr(u,A,d);u.setItemGraphicEl(A,L),v.add(L)}).update(function(A,L){var I=h.getItemGraphicEl(L);I.updateData(u,A,d),I.off("click"),v.add(I),u.setItemGraphicEl(A,I)}).remove(function(A){var L=h.getItemGraphicEl(A);rr.XD(L,e,A)}).execute(),Ke(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},r.prototype.dispose=function(){},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,h=e[1]-s.cy,v=Math.sqrt(u*u+h*h);return v<=s.r&&v>=s.r0}},r.type="pie",r}(Mn.Z),Se=se,ge=z(22253),Ae=z(56152);function Re(a,r,e){r=(0,g.kJ)(r)&&{coordDimensions:r}||(0,g.l7)({encodeDefine:a.getEncode()},r);var n=a.getSource(),o=(0,ge.Z)(n,r).dimensions,s=new Ae.Z(o,a);return s.initData(n,e),s}var Ye=z(459),tr=function(){function a(r,e){this._getDataWithEncodedVisual=r,this._getRawData=e}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var e=this._getRawData();return e.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var e=this._getDataWithEncodedVisual();return e.indexOfName(r)},a.prototype.getItemVisual=function(r,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(r,e)},a}(),fr=tr,hr=We.Yf(),Fr=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new fr(g.ak(this.getData,this),g.ak(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Re(this,{coordDimensions:["value"],encodeDefaulter:g.WA(Ye.Ss,this)})},r.prototype.getDataParams=function(e){var n=this.getData(),o=hr(n),s=o.seats;if(!s){var u=[];n.each(n.mapDimension("value"),function(v){u.push(v)}),s=o.seats=(0,De.HD)(u,n.hostModel.get("percentPrecision"))}var h=a.prototype.getDataParams.call(this,e);return h.percent=s[e]||0,h.$vars.push("percent"),h},r.prototype._defaultLabelLine=function(e){We.Cc(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(yn.Z),en=Fr;function Ur(a){return{seriesType:a,reset:function(r,e){var n=r.getData();n.filterSelf(function(o){var s=n.mapDimension("value"),u=n.get(s,o);return!((0,g.hj)(u)&&!isNaN(u)&&u<0)})}}}function wn(a){a.registerChartView(Se),a.registerSeriesModel(en),(0,Uo.y)("pie",a.registerAction),a.registerLayout((0,g.WA)(Wo,"pie")),a.registerProcessor(Xn("pie")),a.registerProcessor(Ur("pie"))}var wi=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var e=this.option.progressive;return e==null?this.option.large?5e3:this.get("progressive"):e},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e==null?this.option.large?1e4:this.get("progressiveThreshold"):e},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(yn.Z),Rn=wi,gn=z(16128),wa=4,uu=function(){function a(){}return a}(),bs=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.getDefaultShape=function(){return new uu},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(e,n){var o=n.points,s=n.size,u=this.symbolProxy,h=u.shape,v=e.getContext?e.getContext():e,d=v&&s[0]<wa,m=this.softClipShape,_;if(d){this._ctx=v;return}for(this._ctx=null,_=this._off;_<o.length;){var S=o[_++],A=o[_++];isNaN(S)||isNaN(A)||m&&!m.contain(S,A)||(h.x=S-s[0]/2,h.y=A-s[1]/2,h.width=s[0],h.height=s[1],u.buildPath(e,h,!0))}this.incremental&&(this._off=_,this.notClear=!0)},r.prototype.afterBrush=function(){var e=this.shape,n=e.points,o=e.size,s=this._ctx,u=this.softClipShape,h;if(s){for(h=this._off;h<n.length;){var v=n[h++],d=n[h++];isNaN(v)||isNaN(d)||u&&!u.contain(v,d)||s.fillRect(v-o[0]/2,d-o[1]/2,o[0],o[1])}this.incremental&&(this._off=h,this.notClear=!0)}},r.prototype.findDataIndex=function(e,n){for(var o=this.shape,s=o.points,u=o.size,h=Math.max(u[0],4),v=Math.max(u[1],4),d=s.length/2-1;d>=0;d--){var m=d*2,_=s[m]-h/2,S=s[m+1]-v/2;if(e>=_&&n>=S&&e<=_+h&&n<=S+v)return d}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.points,s=n.size,u=s[0],h=s[1],v=1/0,d=1/0,m=-1/0,_=-1/0,S=0;S<o.length;){var A=o[S++],L=o[S++];v=Math.min(A,v),m=Math.max(A,m),d=Math.min(L,d),_=Math.max(L,_)}e=this._rect=new gn.Z(v-u/2,d-h/2,m-v+u,_-d+h)}return e},r}(yt.ZP),ra=function(){function a(){this.group=new Mr.Z}return a.prototype.updateData=function(r,e){this._clear();var n=this._create();n.setShape({points:r.getLayout("points")}),this._setCommon(n,r,e)},a.prototype.updateLayout=function(r){var e=r.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,s=n.startIndex*4*2;e=new Float32Array(e.buffer,s,o)}n.setShape("points",e),n.reset()})},a.prototype.incrementalPrepareUpdate=function(r){this._clear()},a.prototype.incrementalUpdate=function(r,e,n){var o=this._newAdded[0],s=e.getLayout("points"),u=o&&o.shape.points;if(u&&u.length<2e4){var h=u.length,v=new Float32Array(h+s.length);v.set(u),v.set(s,h),o.endIndex=r.end,o.setShape({points:v})}else{this._newAdded=[];var d=this._create();d.startIndex=r.start,d.endIndex=r.end,d.incremental=!0,d.setShape({points:s}),this._setCommon(d,e,n)}},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new bs({cursor:"default"});return r.ignoreCoarsePointer=!0,this.group.add(r),this._newAdded.push(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;n=n||{};var s=e.getVisual("symbolSize");r.setShape("size",s instanceof Array?s:[s,s]),r.softClipShape=n.clipShape||null,r.symbolProxy=(0,fn.th)(e.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var u=r.shape.size[0]<wa;r.useStyle(o.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var h=e.getVisual("style"),v=h&&h.fill;v&&r.setColor(v);var d=(0,Er.A)(r);d.seriesIndex=o.seriesIndex,r.on("mousemove",function(m){d.dataIndex=null;var _=r.hoverDataIdx;_>=0&&(d.dataIndex=_+(r.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),bf=ra,uc=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.updateData(s,{clipShape:this._getClipShape(e)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.incrementalPrepareUpdate(s),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._symbolDraw.incrementalUpdate(e,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=e.end===n.getData().count()},r.prototype.updateTransform=function(e,n,o){var s=e.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var u=Hn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},r.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype._updateSymbolDraw=function(e,n){var o=this._symbolDraw,s=n.pipelineContext,u=s.large;return(!o||u!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=u?new bf:new Ma,this._isLargeDraw=u,this.group.removeAll()),this.group.add(o.group),o},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(Mn.Z),fc=uc,qn=z(70296),ti=z(47497),cy=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(ti.Z),vy=cy,fu=z(68935),ml=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",We.C6).models[0]},r.type="cartesian2dAxis",r}(ti.Z);g.jB(ml,fu.W);var Yx=null,hc={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},ep=g.TS({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},hc),Mf=g.TS({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},hc),rp=g.TS({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Mf),np=g.ce({logBase:10},Mf),cc={category:ep,value:Mf,time:rp,log:np},ip=z(35867),ap={value:1,category:1,time:1,log:1};function Ms(a,r,e,n){(0,g.S6)(ap,function(o,s){var u=(0,g.TS)((0,g.TS)({},cc[s],!0),n,!0),h=function(v){(0,Wt.ZT)(d,v);function d(){var m=v!==null&&v.apply(this,arguments)||this;return m.type=r+"Axis."+s,m}return d.prototype.mergeDefaultAndTheme=function(m,_){var S=(0,Hr.YD)(this),A=S?(0,Hr.tE)(m):{},L=_.getTheme();(0,g.TS)(m,L.get(s+"Axis")),(0,g.TS)(m,this.getDefaultOption()),m.type=vc(m),S&&(0,Hr.dt)(m,A,S)},d.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=ip.Z.createByAxisModel(this))},d.prototype.getCategories=function(m){var _=this.option;if(_.type==="category")return m?_.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=r+"Axis."+s,d.defaultOption=u,d}(e);a.registerComponentModel(h)}),a.registerSubTypeDefaulter(r+"Axis",vc)}function vc(a){return a.type||(a.data?"category":"value")}var ai=z(33871),op=z(54146),An=z(58427),Pr=z(85755),dc=["x","y"];function sp(a){return a.type==="interval"||a.type==="time"}var lp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=dc,e}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!sp(e)||!sp(n))){var o=e.getExtent(),s=n.getExtent(),u=this.dataToPoint([o[0],s[0]]),h=this.dataToPoint([o[1],s[1]]),v=o[1]-o[0],d=s[1]-s[0];if(!(!v||!d)){var m=(h[0]-u[0])/v,_=(h[1]-u[1])/d,S=u[0]-o[0]*m,A=u[1]-s[0]*_,L=this._transform=[m,0,0,_,S,A];this._invTransform=(0,An.U_)([],L)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(e){var n=this.getAxis("x"),o=this.getAxis("y");return n.contain(n.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},r.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},r.prototype.containZone=function(e,n){var o=this.dataToPoint(e),s=this.dataToPoint(n),u=this.getArea(),h=new gn.Z(o[0],o[1],s[0]-o[0],s[1]-o[1]);return u.intersect(h)},r.prototype.dataToPoint=function(e,n,o){o=o||[];var s=e[0],u=e[1];if(this._transform&&s!=null&&isFinite(s)&&u!=null&&isFinite(u))return(0,Pr.Ne)(o,e,this._transform);var h=this.getAxis("x"),v=this.getAxis("y");return o[0]=h.toGlobalCoord(h.dataToCoord(s,n)),o[1]=v.toGlobalCoord(v.dataToCoord(u,n)),o},r.prototype.clampData=function(e,n){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,u=o.getExtent(),h=s.getExtent(),v=o.parse(e[0]),d=s.parse(e[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(u[0],u[1]),v),Math.max(u[0],u[1])),n[1]=Math.min(Math.max(Math.min(h[0],h[1]),d),Math.max(h[0],h[1])),n},r.prototype.pointToData=function(e,n){var o=[];if(this._invTransform)return(0,Pr.Ne)(o,e,this._invTransform);var s=this.getAxis("x"),u=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(e[0]),n),o[1]=u.coordToData(u.toLocalCoord(e[1]),n),o},r.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},r.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),o=Math.min(e[0],e[1]),s=Math.min(n[0],n[1]),u=Math.max(e[0],e[1])-o,h=Math.max(n[0],n[1])-s;return new gn.Z(o,s,u,h)},r}(op.Z),up=lp,Xi=z(26992),fp=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.index=0,h.type=s||"value",h.position=u||"bottom",h}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.getGlobalExtent=function(e){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),e&&n[0]>n[1]&&n.reverse(),n},r.prototype.pointToData=function(e,n){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),n)},r.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},r}(Xi.Z),hp=fp;function Cf(a,r,e){e=e||{};var n=a.coordinateSystem,o=r.axis,s={},u=o.getAxesOnZeroOf()[0],h=o.position,v=u?"onZero":h,d=o.dim,m=n.getRect(),_=[m.x,m.x+m.width,m.y,m.y+m.height],S={left:0,right:1,top:0,bottom:1,onZero:2},A=r.get("offset")||0,L=d==="x"?[_[2]-A,_[3]+A]:[_[0]-A,_[1]+A];if(u){var I=u.toGlobalCoord(u.dataToCoord(0));L[S.onZero]=Math.max(Math.min(I,L[1]),L[0])}s.position=[d==="y"?L[S[v]]:_[0],d==="x"?L[S[v]]:_[3]],s.rotation=Math.PI/2*(d==="x"?0:1);var U={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=U[h],s.labelOffset=u?L[S[h]]-L[S.onZero]:0,r.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),g.Jv(e.labelInside,r.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var et=r.get(["axisLabel","rotate"]);return s.labelRotate=v==="top"?-et:et,s.z2=1,s}function pc(a){return a.get("coordinateSystem")==="cartesian2d"}function gc(a){var r={xAxisModel:null,yAxisModel:null};return g.S6(r,function(e,n){var o=n.replace(/Model$/,""),s=a.getReferringComponents(o,We.C6).models[0];r[n]=s}),r}var Ho=z(46726),hu=z(8835),Ef=Math.log;function mc(a,r,e){var n=hu.Z.prototype,o=n.getTicks.call(e),s=n.getTicks.call(e,!0),u=o.length-1,h=n.getInterval.call(e),v=(0,ai.Xv)(a,r),d=v.extent,m=v.fixMin,_=v.fixMax;if(a.type==="log"){var S=Ef(a.base);d=[Ef(d[0])/S,Ef(d[1])/S]}a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:u,fixMin:m,fixMax:_});var A=n.getExtent.call(a);m&&(d[0]=A[0]),_&&(d[1]=A[1]);var L=n.getInterval.call(a),I=d[0],U=d[1];if(m&&_)L=(U-I)/u;else if(m)for(U=d[0]+L*u;U<d[1]&&isFinite(U)&&isFinite(d[1]);)L=(0,Ho.r1)(L),U=d[0]+L*u;else if(_)for(I=d[1]-L*u;I>d[0]&&isFinite(I)&&isFinite(d[0]);)L=(0,Ho.r1)(L),I=d[1]-L*u;else{var et=a.getTicks().length-1;et>u&&(L=(0,Ho.r1)(L));var ft=L*u;U=Math.ceil(d[1]/L)*L,I=(0,De.NM)(U-ft),I<0&&d[0]>=0?(I=0,U=(0,De.NM)(ft)):U>0&&d[1]<=0&&(U=0,I=-(0,De.NM)(ft))}var ht=(o[0].value-s[0].value)/h,Tt=(o[u].value-s[u].value)/h;if(n.setExtent.call(a,I+L*ht,U+L*Tt),n.setInterval.call(a,L),(ht||Tt)&&n.setNiceExtent.call(a,I+L,U-L),!1)var Et}var cu=function(){function a(r,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=dc,this._initCartesian(r,e,n),this.model=r}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(r,e){var n=this._axesMap;this._updateScale(r,this.model);function o(u){var h,v=(0,g.XP)(u),d=v.length;if(d){for(var m=[],_=d-1;_>=0;_--){var S=+v[_],A=u[S],L=A.model,I=A.scale;(0,Ho.lM)(I)&&L.get("alignTicks")&&L.get("interval")==null?m.push(A):((0,ai.Jk)(I,L),(0,Ho.lM)(I)&&(h=A))}m.length&&(h||(h=m.pop(),(0,ai.Jk)(h.scale,h.model)),(0,g.S6)(m,function(U){mc(U.scale,U.model,h.scale)}))}}o(n.x),o(n.y);var s={};(0,g.S6)(n.x,function(u){vu(n,"y",u,s)}),(0,g.S6)(n.y,function(u){vu(n,"x",u,s)}),this.resize(this.model,e)},a.prototype.resize=function(r,e,n){var o=r.getBoxLayoutParams(),s=!n&&r.get("containLabel"),u=(0,Hr.ME)(o,{width:e.getWidth(),height:e.getHeight()});this._rect=u;var h=this._axesList;v(),s&&((0,g.S6)(h,function(d){if(!d.model.get(["axisLabel","inside"])){var m=(0,ai.Do)(d);if(m){var _=d.isHorizontal()?"height":"width",S=d.model.get(["axisLabel","margin"]);u[_]-=m[_]+S,d.position==="top"?u.y+=m.height+S:d.position==="left"&&(u.x+=m.width+S)}}}),v()),(0,g.S6)(this._coordsList,function(d){d.calcAffineTransform()});function v(){(0,g.S6)(h,function(d){var m=d.isHorizontal(),_=m?[0,u.width]:[0,u.height],S=d.inverse?1:0;d.setExtent(_[S],_[1-S]),Pf(d,m?u.x:u.y)})}},a.prototype.getAxis=function(r,e){var n=this._axesMap[r];if(n!=null)return n[e||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(r,e){if(r!=null&&e!=null){var n="x"+r+"y"+e;return this._coordsMap[n]}(0,g.Kn)(r)&&(e=r.yAxisIndex,r=r.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===r||s[o].getAxis("y").index===e)return s[o]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},a.prototype.convertFromPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},a.prototype._findConvertTarget=function(r){var e=r.seriesModel,n=r.xAxisModel||e&&e.getReferringComponents("xAxis",We.C6).models[0],o=r.yAxisModel||e&&e.getReferringComponents("yAxis",We.C6).models[0],s=r.gridModel,u=this._coordsList,h,v;if(e)h=e.coordinateSystem,(0,g.cq)(u,h)<0&&(h=null);else if(n&&o)h=this.getCartesian(n.componentIndex,o.componentIndex);else if(n)v=this.getAxis("x",n.componentIndex);else if(o)v=this.getAxis("y",o.componentIndex);else if(s){var d=s.coordinateSystem;d===this&&(h=this._coordsList[0])}return{cartesian:h,axis:v}},a.prototype.containPoint=function(r){var e=this._coordsList[0];if(e)return e.containPoint(r)},a.prototype._initCartesian=function(r,e,n){var o=this,s=this,u={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},v={x:0,y:0};if(e.eachComponent("xAxis",d("x"),this),e.eachComponent("yAxis",d("y"),this),!v.x||!v.y){this._axesMap={},this._axesList=[];return}this._axesMap=h,(0,g.S6)(h.x,function(m,_){(0,g.S6)(h.y,function(S,A){var L="x"+_+"y"+A,I=new up(L);I.master=o,I.model=r,o._coordsMap[L]=I,o._coordsList.push(I),I.addAxis(m),I.addAxis(S)})});function d(m){return function(_,S){if(Xa(_,r)){var A=_.get("position");m==="x"?A!=="top"&&A!=="bottom"&&(A=u.bottom?"top":"bottom"):A!=="left"&&A!=="right"&&(A=u.left?"right":"left"),u[A]=!0;var L=new hp(m,(0,ai.aG)(_),[0,0],_.get("type"),A),I=L.type==="category";L.onBand=I&&_.get("boundaryGap"),L.inverse=_.get("inverse"),_.axis=L,L.model=_,L.grid=s,L.index=S,s._axesList.push(L),h[m][S]=L,v[m]++}}}},a.prototype._updateScale=function(r,e){(0,g.S6)(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),r.eachSeries(function(o){if(pc(o)){var s=gc(o),u=s.xAxisModel,h=s.yAxisModel;if(!Xa(u,e)||!Xa(h,e))return;var v=this.getCartesian(u.componentIndex,h.componentIndex),d=o.getData(),m=v.getAxis("x"),_=v.getAxis("y");n(d,m),n(d,_)}},this);function n(o,s){(0,g.S6)((0,ai.PY)(o,s.dim),function(u){s.scale.unionExtentFromData(o,u)})}},a.prototype.getTooltipAxes=function(r){var e=[],n=[];return(0,g.S6)(this.getCartesians(),function(o){var s=r!=null&&r!=="auto"?o.getAxis(r):o.getBaseAxis(),u=o.getOtherAxis(s);(0,g.cq)(e,s)<0&&e.push(s),(0,g.cq)(n,u)<0&&n.push(u)}),{baseAxes:e,otherAxes:n}},a.create=function(r,e){var n=[];return r.eachComponent("grid",function(o,s){var u=new a(o,r,e);u.name="grid_"+s,u.resize(o,e,!0),o.coordinateSystem=u,n.push(u)}),r.eachSeries(function(o){if(pc(o)){var s=gc(o),u=s.xAxisModel,h=s.yAxisModel,v=u.getCoordSysModel(),d=v.coordinateSystem;o.coordinateSystem=d.getCartesian(u.componentIndex,h.componentIndex)}}),n},a.dimensions=dc,a}();function Xa(a,r){return a.getCoordSysModel()===r}function vu(a,r,e,n){e.getAxesOnZeroOf=function(){return s?[s]:[]};var o=a[r],s,u=e.model,h=u.get(["axisLine","onZero"]),v=u.get(["axisLine","onZeroAxisIndex"]);if(!h)return;if(v!=null)du(o[v])&&(s=o[v]);else for(var d in o)if(o.hasOwnProperty(d)&&du(o[d])&&!n[m(o[d])]){s=o[d];break}s&&(n[m(s)]=!0);function m(_){return _.dim+"_"+_.index}}function du(a){return a&&a.type!=="category"&&a.type!=="time"&&(0,ai.Yb)(a)}function Pf(a,r){var e=a.getExtent(),n=e[0]+e[1];a.toGlobalCoord=a.dim==="x"?function(o){return o+r}:function(o){return n-o+r},a.toLocalCoord=a.dim==="x"?function(o){return o-r}:function(o){return n-o+r}}var cp=cu,zi=z(40596),zn=z(97853),ho=Math.PI,Xo=function(){function a(r,e){this.group=new Mr.Z,this.opt=e,this.axisModel=r,(0,g.ce)(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Mr.Z({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return a.prototype.hasBuilder=function(r){return!!Lf[r]},a.prototype.add=function(r){Lf[r](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(r,e,n){var o=(0,De.wW)(e-r),s,u;return(0,De.mW)(o)?(u=n>0?"top":"bottom",s="center"):(0,De.mW)(o-ho)?(u=n>0?"bottom":"top",s="center"):(u="middle",o>0&&o<ho?s=n>0?"right":"left":s=n>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:u}},a.makeAxisEventDataBase=function(r){var e={componentType:r.mainType,componentIndex:r.componentIndex};return e[r.mainType+"Index"]=r.componentIndex,e},a.isLabelSilent=function(r){var e=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||e&&e.show)},a}(),Lf={axisLine:function(a,r,e,n){var o=r.get(["axisLine","show"]);if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisLine")),!!o){var s=r.axis.getExtent(),u=n.transform,h=[s[0],0],v=[s[1],0],d=h[0]>v[0];u&&((0,Pr.Ne)(h,h,u),(0,Pr.Ne)(v,v,u));var m=(0,g.l7)({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),_=new zi.Z({shape:{x1:h[0],y1:h[1],x2:v[0],y2:v[1]},style:m,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});mr.subPixelOptimizeLine(_.shape,_.style.lineWidth),_.anid="line",e.add(_);var S=r.get(["axisLine","symbol"]);if(S!=null){var A=r.get(["axisLine","symbolSize"]);(0,g.HD)(S)&&(S=[S,S]),((0,g.HD)(A)||(0,g.hj)(A))&&(A=[A,A]);var L=(0,fn.Cq)(r.get(["axisLine","symbolOffset"])||0,A),I=A[0],U=A[1];(0,g.S6)([{rotate:a.rotation+Math.PI/2,offset:L[0],r:0},{rotate:a.rotation-Math.PI/2,offset:L[1],r:Math.sqrt((h[0]-v[0])*(h[0]-v[0])+(h[1]-v[1])*(h[1]-v[1]))}],function(et,ft){if(S[ft]!=="none"&&S[ft]!=null){var ht=(0,fn.th)(S[ft],-I/2,-U/2,I,U,m.stroke,!0),Tt=et.r+et.offset,Et=d?v:h;ht.attr({rotation:et.rotate,x:Et[0]+Tt*Math.cos(a.rotation),y:Et[1]-Tt*Math.sin(a.rotation),silent:!0,z2:11}),e.add(ht)}})}}},axisTickLabel:function(a,r,e,n){var o=If(e,n,r,a),s=pp(e,n,r,a);if(dp(r,s,o),pu(e,n,r,a.tickDirection),r.get(["axisLabel","hideOverlap"])){var u=(0,Gt.VT)((0,g.UI)(s,function(h){return{label:h,priority:h.z2,defaultAttr:{ignore:h.ignore}}}));(0,Gt.yl)(u)}},axisName:function(a,r,e,n){var o=(0,g.Jv)(a.axisName,r.get("name"));if(o){var s=r.get("nameLocation"),u=a.nameDirection,h=r.getModel("nameTextStyle"),v=r.get("nameGap")||0,d=r.axis.getExtent(),m=d[0]>d[1]?-1:1,_=[s==="start"?d[0]-m*v:s==="end"?d[1]+m*v:(d[0]+d[1])/2,_c(s)?a.labelOffset+u*v:0],S,A=r.get("nameRotate");A!=null&&(A=A*ho/180);var L;_c(s)?S=Xo.innerTextLayout(a.rotation,A!=null?A:a.rotation,u):(S=vp(a.rotation,s,A||0,d),L=a.axisNameAvailableWidth,L!=null&&(L=Math.abs(L/Math.sin(S.rotation)),!isFinite(L)&&(L=null)));var I=h.getFont(),U=r.get("nameTruncate",!0)||{},et=U.ellipsis,ft=(0,g.Jv)(a.nameTruncateMaxWidth,U.maxWidth,L),ht=new he.ZP({x:_[0],y:_[1],rotation:S.rotation,silent:Xo.isLabelSilent(r),style:(0,Ge.Lr)(h,{text:o,font:I,overflow:"truncate",width:ft,ellipsis:et,fill:h.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:h.get("align")||S.textAlign,verticalAlign:h.get("verticalAlign")||S.textVerticalAlign}),z2:1});if(mr.setTooltipConfig({el:ht,componentModel:r,itemName:o}),ht.__fullText=o,ht.anid="name",r.get("triggerEvent")){var Tt=Xo.makeAxisEventDataBase(r);Tt.targetType="axisName",Tt.name=o,(0,Er.A)(ht).eventData=Tt}n.add(ht),ht.updateTransform(),e.add(ht),ht.decomposeTransform()}}};function vp(a,r,e,n){var o=(0,De.wW)(e-a),s,u,h=n[0]>n[1],v=r==="start"&&!h||r!=="start"&&h;return(0,De.mW)(o-ho/2)?(u=v?"bottom":"top",s="center"):(0,De.mW)(o-ho*1.5)?(u=v?"top":"bottom",s="center"):(u="middle",o<ho*1.5&&o>ho/2?s=v?"left":"right":s=v?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:u}}function dp(a,r,e){if(!(0,ai.WY)(a.axis)){var n=a.get(["axisLabel","showMinLabel"]),o=a.get(["axisLabel","showMaxLabel"]);r=r||[],e=e||[];var s=r[0],u=r[1],h=r[r.length-1],v=r[r.length-2],d=e[0],m=e[1],_=e[e.length-1],S=e[e.length-2];n===!1?(xn(s),xn(d)):yc(s,u)&&(n?(xn(u),xn(m)):(xn(s),xn(d))),o===!1?(xn(h),xn(_)):yc(v,h)&&(o?(xn(v),xn(S)):(xn(h),xn(_)))}}function xn(a){a&&(a.ignore=!0)}function yc(a,r){var e=a&&a.getBoundingRect().clone(),n=r&&r.getBoundingRect().clone();if(!(!e||!n)){var o=An.yR([]);return An.U1(o,o,-a.rotation),e.applyTransform(An.dC([],o,a.getLocalTransform())),n.applyTransform(An.dC([],o,r.getLocalTransform())),e.intersect(n)}}function _c(a){return a==="middle"||a==="center"}function co(a,r,e,n,o){for(var s=[],u=[],h=[],v=0;v<a.length;v++){var d=a[v].coord;u[0]=d,u[1]=0,h[0]=d,h[1]=e,r&&((0,Pr.Ne)(u,u,r),(0,Pr.Ne)(h,h,r));var m=new zi.Z({shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:n,z2:2,autoBatch:!0,silent:!0});mr.subPixelOptimizeLine(m.shape,m.style.lineWidth),m.anid=o+"_"+a[v].tickValue,s.push(m)}return s}function If(a,r,e,n){var o=e.axis,s=e.getModel("axisTick"),u=s.get("show");if(u==="auto"&&n.handleAutoShown&&(u=n.handleAutoShown("axisTick")),!(!u||o.scale.isBlank())){for(var h=s.getModel("lineStyle"),v=n.tickDirection*s.get("length"),d=o.getTicksCoords(),m=co(d,r.transform,v,(0,g.ce)(h.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),_=0;_<m.length;_++)a.add(m[_]);return m}}function pu(a,r,e,n){var o=e.axis,s=e.getModel("minorTick");if(!(!s.get("show")||o.scale.isBlank())){var u=o.getMinorTicksCoords();if(u.length)for(var h=s.getModel("lineStyle"),v=n*s.get("length"),d=(0,g.ce)(h.getLineStyle(),(0,g.ce)(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),m=0;m<u.length;m++)for(var _=co(u[m],r.transform,v,d,"minorticks_"+m),S=0;S<_.length;S++)a.add(_[S])}}function pp(a,r,e,n){var o=e.axis,s=(0,g.Jv)(n.axisLabelShow,e.get(["axisLabel","show"]));if(!(!s||o.scale.isBlank())){var u=e.getModel("axisLabel"),h=u.get("margin"),v=o.getViewLabels(),d=((0,g.Jv)(n.labelRotate,u.get("rotate"))||0)*ho/180,m=Xo.innerTextLayout(n.rotation,d,n.labelDirection),_=e.getCategories&&e.getCategories(!0),S=[],A=Xo.isLabelSilent(e),L=e.get("triggerEvent");return(0,g.S6)(v,function(I,U){var et=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(I.tickValue):I.tickValue,ft=I.formattedLabel,ht=I.rawLabel,Tt=u;if(_&&_[et]){var Et=_[et];(0,g.Kn)(Et)&&Et.textStyle&&(Tt=new zn.Z(Et.textStyle,u,e.ecModel))}var Ct=Tt.getTextColor()||e.get(["axisLine","lineStyle","color"]),It=o.dataToCoord(et),zt=new he.ZP({x:It,y:n.labelOffset+n.labelDirection*h,rotation:m.rotation,silent:A,z2:10+(I.level||0),style:(0,Ge.Lr)(Tt,{text:ft,align:Tt.getShallow("align",!0)||m.textAlign,verticalAlign:Tt.getShallow("verticalAlign",!0)||Tt.getShallow("baseline",!0)||m.textVerticalAlign,fill:(0,g.mf)(Ct)?Ct(o.type==="category"?ht:o.type==="value"?et+"":et,U):Ct})});if(zt.anid="label_"+et,L){var Kt=Xo.makeAxisEventDataBase(e);Kt.targetType="axisLabel",Kt.value=ht,Kt.tickIndex=U,o.type==="category"&&(Kt.dataIndex=et),(0,Er.A)(zt).eventData=Kt}r.add(zt),zt.updateTransform(),S.push(zt),a.add(zt),zt.decomposeTransform()}),S}}var Ka=Xo;function gp(a,r){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return mp(e,a,r),e.seriesInvolved&&Ko(e,a),e}function mp(a,r,e){var n=r.getComponent("tooltip"),o=r.getComponent("axisPointer"),s=o.get("link",!0)||[],u=[];(0,g.S6)(e.getCoordinateSystems(),function(h){if(!h.axisPointerEnabled)return;var v=Jr(h.model),d=a.coordSysAxesInfo[v]={};a.coordSysMap[v]=h;var m=h.model,_=m.getModel("tooltip",n);if((0,g.S6)(h.getAxes(),(0,g.WA)(I,!1,null)),h.getTooltipAxes&&n&&_.get("show")){var S=_.get("trigger")==="axis",A=_.get(["axisPointer","type"])==="cross",L=h.getTooltipAxes(_.get(["axisPointer","axis"]));(S||A)&&(0,g.S6)(L.baseAxes,(0,g.WA)(I,A?"cross":!0,S)),A&&(0,g.S6)(L.otherAxes,(0,g.WA)(I,"cross",!1))}function I(U,et,ft){var ht=ft.model.getModel("axisPointer",o),Tt=ht.get("show");if(!(!Tt||Tt==="auto"&&!U&&!Nf(ht))){et==null&&(et=ht.get("triggerTooltip")),ht=U?xc(ft,_,o,r,U,et):ht;var Et=ht.get("snap"),Ct=Jr(ft.model),It=et||Et||ft.type==="category",zt=a.axesInfo[Ct]={key:Ct,axis:ft,coordSys:h,axisPointerModel:ht,triggerTooltip:et,involveSeries:It,snap:Et,useHandle:Nf(ht),seriesModels:[],linkGroup:null};d[Ct]=zt,a.seriesInvolved=a.seriesInvolved||It;var Kt=dy(s,ft);if(Kt!=null){var Yt=u[Kt]||(u[Kt]={axesInfo:{}});Yt.axesInfo[Ct]=zt,Yt.mapper=s[Kt].mapper,zt.linkGroup=Yt}}}})}function xc(a,r,e,n,o,s){var u=r.getModel("axisPointer"),h=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],v={};(0,g.S6)(h,function(S){v[S]=(0,g.d9)(u.get(S))}),v.snap=a.type!=="category"&&!!s,u.get("type")==="cross"&&(v.type="line");var d=v.label||(v.label={});if(d.show==null&&(d.show=!1),o==="cross"){var m=u.get(["label","show"]);if(d.show=m!=null?m:!0,!s){var _=v.lineStyle=u.get("crossStyle");_&&(0,g.ce)(d,_.textStyle)}}return a.model.getModel("axisPointer",new zn.Z(v,e,n))}function Ko(a,r){r.eachSeries(function(e){var n=e.coordinateSystem,o=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!n||o==="none"||o===!1||o==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||(0,g.S6)(a.coordSysAxesInfo[Jr(n.model)],function(u){var h=u.axis;n.getAxis(h.dim)===h&&(u.seriesModels.push(e),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=e.getData().count())})})}function dy(a,r){for(var e=r.model,n=r.dim,o=0;o<a.length;o++){var s=a[o]||{};if(Rf(s[n+"AxisId"],e.id)||Rf(s[n+"AxisIndex"],e.componentIndex)||Rf(s[n+"AxisName"],e.name))return o}}function Rf(a,r){return a==="all"||(0,g.kJ)(a)&&(0,g.cq)(a,r)>=0||a===r}function yp(a){var r=Of(a);if(r){var e=r.axisPointerModel,n=r.axis.scale,o=e.option,s=e.get("status"),u=e.get("value");u!=null&&(u=n.parse(u));var h=Nf(e);s==null&&(o.status=h?"show":"hide");var v=n.getExtent().slice();v[0]>v[1]&&v.reverse(),(u==null||u>v[1])&&(u=v[1]),u<v[0]&&(u=v[0]),o.value=u,h&&(o.status=r.axis.scale.isBlank()?"hide":"show")}}function Of(a){var r=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[Jr(a)]}function _p(a){var r=Of(a);return r&&r.axisPointerModel}function Nf(a){return!!a.get(["handle","show"])}function Jr(a){return a.type+"||"+a.id}var Sc={},xp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.axisPointerClass&&yp(e),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,o,!0)},r.prototype.updateAxisPointer=function(e,n,o,s){this._doUpdateAxisPointerClass(e,o,!1)},r.prototype.remove=function(e,n){var o=this._axisPointer;o&&o.remove(n)},r.prototype.dispose=function(e,n){this._disposeAxisPointer(n),a.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(e,n,o){var s=r.getAxisPointerClass(this.axisPointerClass);if(s){var u=_p(e);u?(this._axisPointer||(this._axisPointer=new s)).render(e,u,n,o):this._disposeAxisPointer(n)}},r.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},r.registerAxisPointerClass=function(e,n){Sc[e]=n},r.getAxisPointerClass=function(e){return e&&Sc[e]},r.type="axis",r}(qn.Z),Yo=xp,Bf=(0,We.Yf)();function Tc(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitArea"),u=s.getModel("areaStyle"),h=u.get("color"),v=n.coordinateSystem.getRect(),d=o.getTicksCoords({tickModel:s,clamp:!0});if(d.length){var m=h.length,_=Bf(a).splitAreaColors,S=g.kW(),A=0;if(_)for(var L=0;L<d.length;L++){var I=_.get(d[L].tickValue);if(I!=null){A=(I+(m-1)*L)%m;break}}var U=o.toGlobalCoord(d[0].coord),et=u.getAreaStyle();h=g.kJ(h)?h:[h];for(var L=1;L<d.length;L++){var ft=o.toGlobalCoord(d[L].coord),ht=void 0,Tt=void 0,Et=void 0,Ct=void 0;o.isHorizontal()?(ht=U,Tt=v.y,Et=ft-ht,Ct=v.height,U=ht+Et):(ht=v.x,Tt=U,Et=v.width,Ct=ft-Tt,U=Tt+Ct);var It=d[L-1].tickValue;It!=null&&S.set(It,A),r.add(new Kr.Z({anid:It!=null?"area_"+It:null,shape:{x:ht,y:Tt,width:Et,height:Ct},style:g.ce({fill:h[A]},et),autoBatch:!0,silent:!0})),A=(A+1)%m}Bf(a).splitAreaColors=S}}}function Dc(a){Bf(a).splitAreaColors=null}var Sp=["axisLine","axisTickLabel","axisName"],Tp=["splitArea","splitLine","minorSplitLine"],wc=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="CartesianAxisPointer",e}return r.prototype.render=function(e,n,o,s){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Mr.Z,this.group.add(this._axisGroup),!!e.get("show")){var h=e.getCoordSysModel(),v=Cf(h,e),d=new Ka(e,g.l7({handleAutoShown:function(_){for(var S=h.coordinateSystem.getCartesians(),A=0;A<S.length;A++)if((0,Ho.lM)(S[A].getOtherAxis(e.axis).scale))return!0;return!1}},v));g.S6(Sp,d.add,d),this._axisGroup.add(d.getGroup()),g.S6(Tp,function(_){e.get([_,"show"])&&Dp[_](this,this._axisGroup,e,h)},this);var m=s&&s.type==="changeAxisOrder"&&s.isInitSort;m||mr.groupTransition(u,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)}},r.prototype.remove=function(){Dc(this)},r.type="cartesianAxis",r}(Yo),Dp={splitLine:function(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitLine"),u=s.getModel("lineStyle"),h=u.get("color");h=g.kJ(h)?h:[h];for(var v=n.coordinateSystem.getRect(),d=o.isHorizontal(),m=0,_=o.getTicksCoords({tickModel:s}),S=[],A=[],L=u.getLineStyle(),I=0;I<_.length;I++){var U=o.toGlobalCoord(_[I].coord);d?(S[0]=U,S[1]=v.y,A[0]=U,A[1]=v.y+v.height):(S[0]=v.x,S[1]=U,A[0]=v.x+v.width,A[1]=U);var et=m++%h.length,ft=_[I].tickValue,ht=new zi.Z({anid:ft!=null?"line_"+_[I].tickValue:null,autoBatch:!0,shape:{x1:S[0],y1:S[1],x2:A[0],y2:A[1]},style:g.ce({stroke:h[et]},L),silent:!0});mr.subPixelOptimizeLine(ht.shape,L.lineWidth),r.add(ht)}}},minorSplitLine:function(a,r,e,n){var o=e.axis,s=e.getModel("minorSplitLine"),u=s.getModel("lineStyle"),h=n.coordinateSystem.getRect(),v=o.isHorizontal(),d=o.getMinorTicksCoords();if(d.length)for(var m=[],_=[],S=u.getLineStyle(),A=0;A<d.length;A++)for(var L=0;L<d[A].length;L++){var I=o.toGlobalCoord(d[A][L].coord);v?(m[0]=I,m[1]=h.y,_[0]=I,_[1]=h.y+h.height):(m[0]=h.x,m[1]=I,_[0]=h.x+h.width,_[1]=I);var U=new zi.Z({anid:"minor_line_"+d[A][L].tickValue,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:_[0],y2:_[1]},style:S,silent:!0});mr.subPixelOptimizeLine(U.shape,S.lineWidth),r.add(U)}},splitArea:function(a,r,e,n){Tc(a,r,e,n)}},nn=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="xAxis",r}(wc),yl=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=nn.type,e}return r.type="yAxis",r}(wc),Ff=null,wp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="grid",e}return r.prototype.render=function(e,n){this.group.removeAll(),e.get("show")&&this.group.add(new Kr.Z({shape:e.coordinateSystem.getRect(),style:(0,g.ce)({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(qn.Z),Ai={offset:0};function kn(a){a.registerComponentView(wp),a.registerComponentModel(vy),a.registerCoordinateSystem("cartesian2d",cp),Ms(a,"x",ml,Ai),Ms(a,"y",ml,Ai),a.registerComponentView(nn),a.registerComponentView(yl),a.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function Vi(a){(0,F.D)(kn),a.registerSeriesModel(Rn),a.registerChartView(fc),a.registerLayout(Hn("scatter"))}function Ap(a){a.eachSeriesByType("radar",function(r){var e=r.getData(),n=[],o=r.coordinateSystem;if(o){var s=o.getIndicatorAxes();g.S6(s,function(u,h){e.each(e.mapDimension(s[h].dim),function(v,d){n[d]=n[d]||[];var m=o.dataToPoint(v,h);n[d][h]=ki(m)?m:jn(o)})}),e.each(function(u){var h=g.sE(n[u],function(v){return ki(v)})||jn(o);n[u].push(h.slice()),e.setItemLayout(u,n[u])})}})}function ki(a){return!isNaN(a[0])&&!isNaN(a[1])}function jn(a){return[a.cx,a.cy]}function Ki(a){var r=a.polar;if(r){g.kJ(r)||(r=[r]);var e=[];g.S6(r,function(n,o){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),a.radar=a.radar||[],g.kJ(a.radar)||(a.radar=[a.radar]),a.radar.push(n)):e.push(n)}),a.polar=e}g.S6(a.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var fa=z(7228),oi=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.coordinateSystem,u=this.group,h=e.getData(),v=this._data;function d(S,A){var L=S.getItemVisual(A,"symbol")||"circle";if(L!=="none"){var I=fn.zp(S.getItemVisual(A,"symbolSize")),U=fn.th(L,-1,-1,2,2),et=S.getItemVisual(A,"symbolRotate")||0;return U.attr({style:{strokeNoScale:!0},z2:100,scaleX:I[0]/2,scaleY:I[1]/2,rotation:et*Math.PI/180||0}),U}}function m(S,A,L,I,U,et){L.removeAll();for(var ft=0;ft<A.length-1;ft++){var ht=d(I,U);ht&&(ht.__dimIdx=ft,S[ft]?(ht.setPosition(S[ft]),mr[et?"initProps":"updateProps"](ht,{x:A[ft][0],y:A[ft][1]},e,U)):ht.setPosition(A[ft]),L.add(ht))}}function _(S){return g.UI(S,function(A){return[s.cx,s.cy]})}h.diff(v).add(function(S){var A=h.getItemLayout(S);if(A){var L=new fa.Z,I=new Rt.Z,U={shape:{points:A}};L.shape.points=_(A),I.shape.points=_(A),rr.KZ(L,U,e,S),rr.KZ(I,U,e,S);var et=new Mr.Z,ft=new Mr.Z;et.add(I),et.add(L),et.add(ft),m(I.shape.points,A,ft,h,S,!0),h.setItemGraphicEl(S,et)}}).update(function(S,A){var L=v.getItemGraphicEl(A),I=L.childAt(0),U=L.childAt(1),et=L.childAt(2),ft={shape:{points:h.getItemLayout(S)}};ft.shape.points&&(m(I.shape.points,ft.shape.points,et,h,S,!1),(0,rr.Zi)(U),(0,rr.Zi)(I),rr.D(I,ft,e),rr.D(U,ft,e),h.setItemGraphicEl(S,L))}).remove(function(S){u.remove(v.getItemGraphicEl(S))}).execute(),h.eachItemGraphicEl(function(S,A){var L=h.getItemModel(A),I=S.childAt(0),U=S.childAt(1),et=S.childAt(2),ft=h.getItemVisual(A,"style"),ht=ft.fill;u.add(S),I.useStyle(g.ce(L.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:ht})),(0,Qe.WO)(I,L,"lineStyle"),(0,Qe.WO)(U,L,"areaStyle");var Tt=L.getModel("areaStyle"),Et=Tt.isEmpty()&&Tt.parentModel.isEmpty();U.ignore=Et,g.S6(["emphasis","select","blur"],function(zt){var Kt=L.getModel([zt,"areaStyle"]),Yt=Kt.isEmpty()&&Kt.parentModel.isEmpty();U.ensureState(zt).ignore=Yt&&Et}),U.useStyle(g.ce(Tt.getAreaStyle(),{fill:ht,opacity:.7,decal:ft.decal}));var Ct=L.getModel("emphasis"),It=Ct.getModel("itemStyle").getItemStyle();et.eachChild(function(zt){if(zt instanceof gt.ZP){var Kt=zt.style;zt.useStyle(g.l7({image:Kt.image,x:Kt.x,y:Kt.y,width:Kt.width,height:Kt.height},ft))}else zt.useStyle(ft),zt.setColor(ht),zt.style.strokeNoScale=!0;var Yt=zt.ensureState("emphasis");Yt.style=g.d9(It);var ne=h.getStore().get(h.getDimensionIndex(zt.__dimIdx),A);(ne==null||isNaN(ne))&&(ne=""),(0,Ge.ni)(zt,(0,Ge.k3)(L),{labelFetcher:h.hostModel,labelDataIndex:A,labelDimIndex:zt.__dimIdx,defaultText:ne,inheritColor:ht,defaultOpacity:ft.opacity})}),(0,Qe.k5)(S,Ct.get("focus"),Ct.get("blurScope"),Ct.get("disabled"))}),this._data=h},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(Mn.Z),bp=oi,Un=z(40912),Mp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new fr(g.ak(this.getData,this),g.ak(this.getRawData,this))},r.prototype.getInitialData=function(e,n){return Re(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.coordinateSystem,h=u.getIndicatorAxes(),v=this.getData().getName(e),d=v===""?this.name:v,m=(0,Un.jT)(this,e);return(0,Un.TX)("section",{header:d,sortBlocks:!0,blocks:g.UI(h,function(_){var S=s.get(s.mapDimension(_.dim),e);return(0,Un.TX)("nameValue",{markerType:"subItem",markerColor:m,name:_.name,value:S,sortParam:S})})})},r.prototype.getTooltipPosition=function(e){if(e!=null){for(var n=this.getData(),o=this.coordinateSystem,s=n.getValues(g.UI(o.dimensions,function(d){return n.mapDimension(d)}),e),u=0,h=s.length;u<h;u++)if(!isNaN(s[u])){var v=o.getIndicatorAxes();return o.coordToPoint(v[u].dataToCoord(s[u]),u)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(yn.Z),Cp=Mp,Cs=cc.value;function gu(a,r){return g.ce({show:r},a)}var Ep=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),n=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),h=this.get("axisLabel"),v=this.get("axisName"),d=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),_=this.get("axisNameGap"),S=this.get("triggerEvent"),A=g.UI(this.get("indicator")||[],function(L){L.max!=null&&L.max>0&&!L.min?L.min=0:L.min!=null&&L.min<0&&!L.max&&(L.max=0);var I=v;L.color!=null&&(I=g.ce({color:L.color},v));var U=g.TS(g.d9(L),{boundaryGap:e,splitNumber:n,scale:o,axisLine:s,axisTick:u,axisLabel:h,name:L.text,showName:d,nameLocation:"end",nameGap:_,nameTextStyle:I,triggerEvent:S},!1);if(g.HD(m)){var et=U.name;U.name=m.replace("{value}",et!=null?et:"")}else g.mf(m)&&(U.name=m(U.name,U));var ft=new zn.Z(U,null,this.ecModel);return g.jB(ft,fu.W.prototype),ft.mainType="radar",ft.componentIndex=this.componentIndex,ft},this);this._indicatorModels=A},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:g.TS({lineStyle:{color:"#bbb"}},Cs.axisLine),axisLabel:gu(Cs.axisLabel,!1),axisTick:gu(Cs.axisTick,!1),splitLine:gu(Cs.splitLine,!0),splitArea:gu(Cs.splitArea,!0),indicator:[]},r}(ti.Z),Pp=Ep,jo=z(16513),Ac=z(96449),Lp=["axisLine","axisTickLabel","axisName"],Ip=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},r.prototype._buildAxes=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes(),s=g.UI(o,function(u){var h=u.model.get("showName")?u.name:"",v=new Ka(u.model,{axisName:h,position:[n.cx,n.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return v});g.S6(s,function(u){g.S6(Lp,u.add,u),this.group.add(u.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes();if(!o.length)return;var s=e.get("shape"),u=e.getModel("splitLine"),h=e.getModel("splitArea"),v=u.getModel("lineStyle"),d=h.getModel("areaStyle"),m=u.get("show"),_=h.get("show"),S=v.get("color"),A=d.get("color"),L=g.kJ(S)?S:[S],I=g.kJ(A)?A:[A],U=[],et=[];function ft(_e,Ce,ke){var Oe=ke%Ce.length;return _e[Oe]=_e[Oe]||[],Oe}if(s==="circle")for(var ht=o[0].getTicksCoords(),Tt=n.cx,Et=n.cy,Ct=0;Ct<ht.length;Ct++){if(m){var It=ft(U,L,Ct);U[It].push(new jo.Z({shape:{cx:Tt,cy:Et,r:ht[Ct].coord}}))}if(_&&Ct<ht.length-1){var It=ft(et,I,Ct);et[It].push(new Ac.Z({shape:{cx:Tt,cy:Et,r0:ht[Ct].coord,r:ht[Ct+1].coord}}))}}else for(var zt,Kt=g.UI(o,function(_e,Ce){var ke=_e.getTicksCoords();return zt=zt==null?ke.length-1:Math.min(ke.length-1,zt),g.UI(ke,function(Oe){return n.coordToPoint(Oe.coord,Ce)})}),Yt=[],Ct=0;Ct<=zt;Ct++){for(var ne=[],oe=0;oe<o.length;oe++)ne.push(Kt[oe][Ct]);if(ne[0]&&ne.push(ne[0].slice()),m){var It=ft(U,L,Ct);U[It].push(new Rt.Z({shape:{points:ne}}))}if(_&&Yt){var It=ft(et,I,Ct-1);et[It].push(new fa.Z({shape:{points:ne.concat(Yt)}}))}Yt=ne.slice().reverse()}var ce=v.getLineStyle(),me=d.getAreaStyle();g.S6(et,function(_e,Ce){this.group.add(mr.mergePath(_e,{style:g.ce({stroke:"none",fill:I[Ce%I.length]},me),silent:!0}))},this),g.S6(U,function(_e,Ce){this.group.add(mr.mergePath(_e,{style:g.ce({fill:"none",stroke:L[Ce%L.length]},ce),silent:!0}))},this)},r.type="radar",r}(qn.Z),bc=Ip,Rp=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this,e,n,o)||this;return s.type="value",s.angle=0,s.name="",s}return r}(Xi.Z),Op=Rp,Np=function(){function a(r,e,n){this.dimensions=[],this._model=r,this._indicatorAxes=(0,g.UI)(r.getIndicatorModels(),function(o,s){var u="indicator_"+s,h=new Op(u,new hu.Z);return h.name=o.get("name"),h.model=o,o.axis=h,this.dimensions.push(u),h},this),this.resize(r,n)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(r,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(r),e)},a.prototype.coordToPoint=function(r,e){var n=this._indicatorAxes[e],o=n.angle,s=this.cx+r*Math.cos(o),u=this.cy-r*Math.sin(o);return[s,u]},a.prototype.pointToData=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var s=Math.atan2(-n,e),u=1/0,h,v=-1,d=0;d<this._indicatorAxes.length;d++){var m=this._indicatorAxes[d],_=Math.abs(s-m.angle);_<u&&(h=m,v=d,u=_)}return[v,+(h&&h.coordToData(o))]},a.prototype.resize=function(r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight(),u=Math.min(o,s)/2;this.cx=De.GM(n[0],o),this.cy=De.GM(n[1],s),this.startAngle=r.get("startAngle")*Math.PI/180;var h=r.get("radius");((0,g.HD)(h)||(0,g.hj)(h))&&(h=[0,h]),this.r0=De.GM(h[0],u),this.r=De.GM(h[1],u),(0,g.S6)(this._indicatorAxes,function(v,d){v.setExtent(this.r0,this.r);var m=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),v.angle=m},this)},a.prototype.update=function(r,e){var n=this._indicatorAxes,o=this._model;(0,g.S6)(n,function(h){h.scale.setExtent(1/0,-1/0)}),r.eachSeriesByType("radar",function(h,v){if(!(h.get("coordinateSystem")!=="radar"||r.getComponent("radar",h.get("radarIndex"))!==o)){var d=h.getData();(0,g.S6)(n,function(m){m.scale.unionExtentFromData(d,d.mapDimension(m.dim))})}},this);var s=o.get("splitNumber"),u=new hu.Z;u.setExtent(0,s),u.setInterval(1),(0,g.S6)(n,function(h,v){mc(h.scale,h.model,u)})},a.prototype.convertToPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.create=function(r,e){var n=[];return r.eachComponent("radar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=n[o.get("radarIndex")||0])}),n},a.dimensions=[],a}(),kr=Np;function mu(a){a.registerCoordinateSystem("radar",kr),a.registerComponentModel(Pp),a.registerComponentView(bc),a.registerVisual({seriesType:"radar",reset:function(r){var e=r.getData();e.each(function(n){e.setItemVisual(n,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function Bp(a){(0,F.D)(mu),a.registerChartView(bp),a.registerSeriesModel(Cp),a.registerLayout(Ap),a.registerProcessor(Xn("radar")),a.registerPreprocessor(Ki)}var Gf=z(10563),Yi=z(11300),ae=z(78358),yu="\0_ec_interaction_mutex";function Pn(a,r,e){var n=Es(a);n[r]=e}function Mc(a,r,e){var n=Es(a),o=n[r];o===e&&(n[r]=null)}function Cc(a,r){return!!Es(a)[r]}function Es(a){return a[yu]||(a[yu]={})}ae.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},g.ZT);var _u=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this)||this;n._zr=e;var o=(0,g.ak)(n._mousedownHandler,n),s=(0,g.ak)(n._mousemoveHandler,n),u=(0,g.ak)(n._mouseupHandler,n),h=(0,g.ak)(n._mousewheelHandler,n),v=(0,g.ak)(n._pinchHandler,n);return n.enable=function(d,m){this.disable(),this._opt=(0,g.ce)((0,g.d9)(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),d==null&&(d=!0),(d===!0||d==="move"||d==="pan")&&(e.on("mousedown",o),e.on("mousemove",s),e.on("mouseup",u)),(d===!0||d==="scale"||d==="zoom")&&(e.on("mousewheel",h),e.on("pinch",v))},n.disable=function(){e.off("mousedown",o),e.off("mousemove",s),e.off("mouseup",u),e.off("mousewheel",h),e.off("pinch",v)},n}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!Yi.x1(e)){for(var n=e.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var o=e.offsetX,s=e.offsetY;this.pointerChecker&&this.pointerChecker(e,o,s)&&(this._x=o,this._y=s,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!_l("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Cc(this._zr,"globalPan"))){var n=e.offsetX,o=e.offsetY,s=this._x,u=this._y,h=n-s,v=o-u;this._x=n,this._y=o,this._opt.preventDefaultMouseMove&&Yi.sT(e.event),Ec(this,"pan","moveOnMouseMove",e,{dx:h,dy:v,oldX:s,oldY:u,newX:n,newY:o,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){Yi.x1(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var n=_l("zoomOnMouseWheel",e,this._opt),o=_l("moveOnMouseWheel",e,this._opt),s=e.wheelDelta,u=Math.abs(s),h=e.offsetX,v=e.offsetY;if(!(s===0||!n&&!o)){if(n){var d=u>3?1.4:u>1?1.2:1.1,m=s>0?d:1/d;Ps(this,"zoom","zoomOnMouseWheel",e,{scale:m,originX:h,originY:v,isAvailableBehavior:null})}if(o){var _=Math.abs(s),S=(s>0?1:-1)*(_>3?.4:_>1?.15:.05);Ps(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:S,originX:h,originY:v,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Cc(this._zr,"globalPan")){var n=e.pinchScale>1?1.1:1/1.1;Ps(this,"zoom",null,e,{scale:n,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(Gf.Z);function Ps(a,r,e,n,o){a.pointerChecker&&a.pointerChecker(n,o.originX,o.originY)&&(Yi.sT(n.event),Ec(a,r,e,n,o))}function Ec(a,r,e,n,o){o.isAvailableBehavior=(0,g.ak)(_l,null,e,n),a.trigger(r,o)}function _l(a,r,e){var n=e[a];return!a||n&&(!(0,g.HD)(n)||r.event[n+"Key"])}var xl=_u;function Jo(a,r,e){var n=a.target;n.x+=r,n.y+=e,n.dirty()}function zf(a,r,e,n){var o=a.target,s=a.zoomLimit,u=a.zoom=a.zoom||1;if(u*=r,s){var h=s.min||0,v=s.max||1/0;u=Math.max(Math.min(v,u),h)}var d=u/a.zoom;a.zoom=u,o.x-=(e-o.x)*(d-1),o.y-=(n-o.y)*(d-1),o.scaleX*=d,o.scaleY*=d,o.dirty()}var xu={axisPointer:1,tooltip:1,brush:1};function Su(a,r,e){var n=r.getComponentByElement(a.topTarget),o=n&&n.coordinateSystem;return n&&n!==e&&!xu.hasOwnProperty(n.mainType)&&o&&o.model!==e}var Pc=z(15904),Vf=z(1205),Tu=z(43606);function Qo(a){if((0,g.HD)(a)){var r=new DOMParser;a=r.parseFromString(a,"text/xml")}var e=a;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var vo,$o={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Lc=(0,g.XP)($o),qo={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Ls=(0,g.XP)(qo),Ic=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(r,e){e=e||{};var n=Qo(r);this._defsUsePending=[];var o=new Mr.Z;this._root=o;var s=[],u=n.getAttribute("viewBox")||"",h=parseFloat(n.getAttribute("width")||e.width),v=parseFloat(n.getAttribute("height")||e.height);isNaN(h)&&(h=null),isNaN(v)&&(v=null),mn(n,o,null,!0,!1);for(var d=n.firstChild;d;)this._parseNode(d,o,s,null,!1,!1),d=d.nextSibling;ts(this._defs,this._defsUsePending),this._defsUsePending=[];var m,_;if(u){var S=Tl(u);S.length>=4&&(m={x:parseFloat(S[0]||0),y:parseFloat(S[1]||0),width:parseFloat(S[2]),height:parseFloat(S[3])})}if(m&&h!=null&&v!=null&&(_=wu(m,{x:0,y:0,width:h,height:v}),!e.ignoreViewBox)){var A=o;o=new Mr.Z,o.add(A),A.scaleX=A.scaleY=_.scale,A.x=_.x,A.y=_.y}return!e.ignoreRootClip&&h!=null&&v!=null&&o.setClipPath(new Kr.Z({shape:{x:0,y:0,width:h,height:v}})),{root:o,width:h,height:v,viewBoxRect:m,viewBoxTransform:_,named:s}},a.prototype._parseNode=function(r,e,n,o,s,u){var h=r.nodeName.toLowerCase(),v,d=o;if(h==="defs"&&(s=!0),h==="text"&&(u=!0),h==="defs"||h==="switch")v=e;else{if(!s){var m=vo[h];if(m&&(0,g.RI)(vo,h)){v=m.call(this,r,e);var _=r.getAttribute("name");if(_){var S={name:_,namedFrom:null,svgNodeTagLower:h,el:v};n.push(S),h==="g"&&(d=S)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:h,el:v});e.add(v)}}var A=kf[h];if(A&&(0,g.RI)(kf,h)){var L=A.call(this,r),I=r.getAttribute("id");I&&(this._defs[I]=L)}}if(v&&v.isGroup)for(var U=r.firstChild;U;)U.nodeType===1?this._parseNode(U,v,n,d,s,u):U.nodeType===3&&u&&this._parseText(U,v),U=U.nextSibling},a.prototype._parseText=function(r,e){var n=new nt.Z({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),Zf(n,e);var o=n.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,n.scaleX*=s/9,n.scaleY*=s/9);var u=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=u;var h=n.getBoundingRect();return this._textX+=h.width,e.add(n),n},a.internalField=function(){vo={g:function(r,e){var n=new Mr.Z;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n},rect:function(r,e){var n=new Kr.Z;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(r,e){var n=new jo.Z;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),n.silent=!0,n},line:function(r,e){var n=new zi.Z;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(r,e){var n=new Pc.Z;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(r,e){var n=r.getAttribute("points"),o;n&&(o=Rc(n));var s=new fa.Z({shape:{points:o||[]},silent:!0});return Ii(e,s),mn(r,s,this._defsUsePending,!1,!1),s},polyline:function(r,e){var n=r.getAttribute("points"),o;n&&(o=Rc(n));var s=new Rt.Z({shape:{points:o||[]},silent:!0});return Ii(e,s),mn(r,s,this._defsUsePending,!1,!1),s},image:function(r,e){var n=new gt.ZP;return Ii(e,n),mn(r,n,this._defsUsePending,!1,!1),n.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),n.silent=!0,n},text:function(r,e){var n=r.getAttribute("x")||"0",o=r.getAttribute("y")||"0",s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(u);var h=new Mr.Z;return Ii(e,h),mn(r,h,this._defsUsePending,!1,!0),h},tspan:function(r,e){var n=r.getAttribute("x"),o=r.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),o!=null&&(this._textY=parseFloat(o));var s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0",h=new Mr.Z;return Ii(e,h),mn(r,h,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(u),h},path:function(r,e){var n=r.getAttribute("d")||"",o=(0,Vf.iR)(n);return Ii(e,o),mn(r,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),a}(),kf={lineargradient:function(a){var r=parseInt(a.getAttribute("x1")||"0",10),e=parseInt(a.getAttribute("y1")||"0",10),n=parseInt(a.getAttribute("x2")||"10",10),o=parseInt(a.getAttribute("y2")||"0",10),s=new Ar.Z(r,e,n,o);return Uf(a,s),Sl(a,s),s},radialgradient:function(a){var r=parseInt(a.getAttribute("cx")||"0",10),e=parseInt(a.getAttribute("cy")||"0",10),n=parseInt(a.getAttribute("r")||"0",10),o=new Tu.Z(r,e,n);return Uf(a,o),Sl(a,o),o}};function Uf(a,r){var e=a.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(r.global=!0)}function Sl(a,r){for(var e=a.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var n=e.getAttribute("offset"),o=void 0;n&&n.indexOf("%")>0?o=parseInt(n,10)/100:n?o=parseFloat(n):o=0;var s={};Xf(e,s,s);var u=s.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:o,color:u})}e=e.nextSibling}}function Ii(a,r){a&&a.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),(0,g.ce)(r.__inheritedStyle,a.__inheritedStyle))}function Rc(a){for(var r=Tl(a),e=[],n=0;n<r.length;n+=2){var o=parseFloat(r[n]),s=parseFloat(r[n+1]);e.push([o,s])}return e}function mn(a,r,e,n,o){var s=r,u=s.__inheritedStyle=s.__inheritedStyle||{},h={};a.nodeType===1&&(Is(a,r),Xf(a,u,h),n||Fp(a,u,h)),s.style=s.style||{},u.fill!=null&&(s.style.fill=Wf(s,"fill",u.fill,e)),u.stroke!=null&&(s.style.stroke=Wf(s,"stroke",u.stroke,e)),(0,g.S6)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(v){u[v]!=null&&(s.style[v]=parseFloat(u[v]))}),(0,g.S6)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(v){u[v]!=null&&(s.style[v]=u[v])}),o&&(s.__selfStyle=h),u.lineDash&&(s.style.lineDash=(0,g.UI)(Tl(u.lineDash),function(v){return parseFloat(v)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(s.invisible=!0),u.display==="none"&&(s.ignore=!0)}function Zf(a,r){var e=r.__selfStyle;if(e){var n=e.textBaseline,o=n;!n||n==="auto"||n==="baseline"?o="alphabetic":n==="before-edge"||n==="text-before-edge"?o="top":n==="after-edge"||n==="text-after-edge"?o="bottom":(n==="central"||n==="mathematical")&&(o="middle"),a.style.textBaseline=o}var s=r.__inheritedStyle;if(s){var u=s.textAlign,h=u;u&&(u==="middle"&&(h="center"),a.style.textAlign=h)}}var Oc=/^url\(\s*#(.*?)\)/;function Wf(a,r,e,n){var o=e&&e.match(Oc);if(o){var s=(0,g.fy)(o[1]);n.push([a,r,s]);return}return e==="none"&&(e=null),e}function ts(a,r){for(var e=0;e<r.length;e++){var n=r[e];n[0].style[n[1]]=a[n[2]]}}var Du=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Tl(a){return a.match(Du)||[]}var Hf=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Dl=Math.PI/180;function Is(a,r){var e=a.getAttribute("transform");if(e){e=e.replace(/,/g," ");var n=[],o=null;e.replace(Hf,function(_,S,A){return n.push(S,A),""});for(var s=n.length-1;s>0;s-=2){var u=n[s],h=n[s-1],v=Tl(u);switch(o=o||An.Ue(),h){case"translate":An.Iu(o,o,[parseFloat(v[0]),parseFloat(v[1]||"0")]);break;case"scale":An.bA(o,o,[parseFloat(v[0]),parseFloat(v[1]||v[0])]);break;case"rotate":An.U1(o,o,-parseFloat(v[0])*Dl);break;case"skewX":var d=Math.tan(parseFloat(v[0])*Dl);An.dC(o,[1,0,d,1,0,0],o);break;case"skewY":var m=Math.tan(parseFloat(v[0])*Dl);An.dC(o,[1,m,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(v[0]),o[1]=parseFloat(v[1]),o[2]=parseFloat(v[2]),o[3]=parseFloat(v[3]),o[4]=parseFloat(v[4]),o[5]=parseFloat(v[5]);break}}r.setLocalTransform(o)}}var po=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Xf(a,r,e){var n=a.getAttribute("style");if(n){po.lastIndex=0;for(var o;(o=po.exec(n))!=null;){var s=o[1],u=(0,g.RI)($o,s)?$o[s]:null;u&&(r[u]=o[2]);var h=(0,g.RI)(qo,s)?qo[s]:null;h&&(e[h]=o[2])}}}function Fp(a,r,e){for(var n=0;n<Lc.length;n++){var o=Lc[n],s=a.getAttribute(o);s!=null&&(r[$o[o]]=s)}for(var n=0;n<Ls.length;n++){var o=Ls[n],s=a.getAttribute(o);s!=null&&(e[qo[o]]=s)}}function wu(a,r){var e=r.width/a.width,n=r.height/a.height,o=Math.min(e,n);return{scale:o,x:-(a.x+a.width/2)*o+(r.x+r.width/2),y:-(a.y+a.height/2)*o+(r.y+r.height/2)}}function Gp(a,r){var e=new Ic;return e.parse(a,r)}var Nc=z(16059),Au=(0,g.kW)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),zp=function(){function a(r,e){this.type="geoSVG",this._usedGraphicMap=(0,g.kW)(),this._freedGraphics=[],this._mapName=r,this._parsedXML=Qo(e)}return a.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Fc(r.named),n=e.regions,o=e.regionsMap;this._regions=n,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(r){var e,n;try{e=r&&Gp(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,(0,g.hu)(n!=null)}catch(U){throw new Error(`Invalid svg format
`+U.message)}var o=new Mr.Z;o.add(n),o.isGeoSVGGraphicRoot=!0;var s=e.width,u=e.height,h=e.viewBoxRect,v=this._boundingRect;if(!v){var d=void 0,m=void 0,_=void 0,S=void 0;if(s!=null?(d=0,_=s):h&&(d=h.x,_=h.width),u!=null?(m=0,S=u):h&&(m=h.y,S=h.height),d==null||m==null){var A=n.getBoundingRect();d==null&&(d=A.x,_=A.width),m==null&&(m=A.y,S=A.height)}v=this._boundingRect=new gn.Z(d,m,_,S)}if(h){var L=wu(h,v);n.scaleX=n.scaleY=L.scale,n.x=L.x,n.y=L.y}o.setClipPath(new Kr.Z({shape:v.plain()}));var I=[];return(0,g.S6)(e.named,function(U){Au.get(U.svgNodeTagLower)!=null&&(I.push(U),Bc(U.el))}),{root:o,boundingRect:v,named:I}},a.prototype.useGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,n),n)},a.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);n&&(e.removeKey(r),this._freedGraphics.push(n))},a}();function Bc(a){a.silent=!1,a.isGroup&&a.traverse(function(r){r.silent=!1})}function Fc(a){var r=[],e=(0,g.kW)();return(0,g.S6)(a,function(n){if(n.namedFrom==null){var o=new Nc.Im(n.name,n.el);r.push(o),e.set(n.name,o)}}),{regions:r,regionsMap:e}}for(var Vp=z(97271),Kf=[126,25],bu="\u5357\u6D77\u8BF8\u5C9B",na=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],ia=0;ia<na.length;ia++)for(var go=0;go<na[ia].length;go++)na[ia][go][0]/=10.5,na[ia][go][1]/=-10.5/.75,na[ia][go][0]+=Kf[0],na[ia][go][1]+=Kf[1];function Yf(a,r){if(a==="china"){for(var e=0;e<r.length;e++)if(r[e].name===bu)return;r.push(new Nc.Ni(bu,g.UI(na,function(n){return{type:"polygon",exterior:n}}),Kf))}}var kp=z(11815),Mu=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Gc(a,r){a==="china"&&r.name==="\u53F0\u6E7E"&&r.geometries.push({type:"polygon",exterior:Mu[0]})}var es="name",Up=function(){function a(r,e,n){this.type="geoJSON",this._parsedMap=(0,g.kW)(),this._mapName=r,this._specialAreas=n,this._geoJSON=Cu(e)}return a.prototype.load=function(r,e){e=e||es;var n=this._parsedMap.get(e);if(!n){var o=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:o,boundingRect:zc(o)})}var s=(0,g.kW)(),u=[];return(0,g.S6)(n.regions,function(h){var v=h.name;r&&(0,g.RI)(r,v)&&(h=h.cloneShallow(v=r[v])),u.push(h),s.set(v,h)}),{regions:u,boundingRect:n.boundingRect||new gn.Z(0,0,0,0),regionsMap:s}},a.prototype._parseToRegions=function(r){var e=this._mapName,n=this._geoJSON,o;try{o=n?(0,Vp.Z)(n,r):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return Yf(e,o),(0,g.S6)(o,function(s){var u=s.name;(0,kp.Z)(e,s),Gc(e,s);var h=this._specialAreas&&this._specialAreas[u];h&&s.transformTo(h.left,h.top,h.width,h.height)},this),o},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function zc(a){for(var r,e=0;e<a.length;e++){var n=a[e].getBoundingRect();r=r||n.clone(),r.union(n)}return r}function Cu(a){return(0,g.HD)(a)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var Rs=(0,g.kW)(),ha={registerMap:function(a,r,e){if(r.svg){var n=new zp(a,r.svg);Rs.set(a,n)}else{var o=r.geoJson||r.geoJSON;o&&!r.features?e=r.specialAreas:o=r;var n=new Up(a,o,e);Rs.set(a,n)}},getGeoResource:function(a){return Rs.get(a)},getMapForUser:function(a){var r=Rs.get(a);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(a,r,e){var n=Rs.get(a);if(n)return n.load(r,e)}},Eu=z(83617),Ia=z(11635),wl=["rect","circle","line","ellipse","polygon","polyline","path"],Vc=g.kW(wl),jf=g.kW(wl.concat(["g"])),kc=g.kW(wl.concat(["g"])),Uc=(0,We.Yf)();function Pu(a){var r=a.getItemStyle(),e=a.get("areaColor");return e!=null&&(r.fill=e),r}function Jf(a){var r=a.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var Zp=function(){function a(r){var e=new Mr.Z;this.uid=(0,Di.Kr)("ec_map_draw"),this._controller=new xl(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Mr.Z),e.add(this._svgGroup=new Mr.Z)}return a.prototype.draw=function(r,e,n,o,s){var u=r.mainType==="geo",h=r.getData&&r.getData();u&&e.eachComponent({mainType:"series",subType:"map"},function(et){!h&&et.getHostGeoModel()===r&&(h=et.getData())});var v=r.coordinateSystem,d=this._regionsGroup,m=this.group,_=v.getTransformInfo(),S=_.raw,A=_.roam,L=!d.childAt(0)||s;L?(m.x=A.x,m.y=A.y,m.scaleX=A.scaleX,m.scaleY=A.scaleY,m.dirty()):rr.D(m,A,r);var I=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,U={api:n,geo:v,mapOrGeoModel:r,data:h,isVisualEncodedByVisualMap:I,isGeo:u,transformInfoRaw:S};v.resourceType==="geoJSON"?this._buildGeoJSON(U):v.resourceType==="geoSVG"&&this._buildSVG(U),this._updateController(r,e,n),this._updateMapSelectHandler(r,d,n,o)},a.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=g.kW(),n=g.kW(),o=this._regionsGroup,s=r.transformInfoRaw,u=r.mapOrGeoModel,h=r.data,v=r.geo.projection,d=v&&v.stream;function m(A,L){return L&&(A=L(A)),A&&[A[0]*s.scaleX+s.x,A[1]*s.scaleY+s.y]}function _(A){for(var L=[],I=!d&&v&&v.project,U=0;U<A.length;++U){var et=m(A[U],I);et&&L.push(et)}return L}function S(A){return{shape:{points:_(A)}}}o.removeAll(),g.S6(r.geo.regions,function(A){var L=A.name,I=e.get(L),U=n.get(L)||{},et=U.dataIdx,ft=U.regionModel;I||(I=e.set(L,new Mr.Z),o.add(I),et=h?h.indexOfName(L):null,ft=r.isGeo?u.getRegionModel(L):h?h.getItemModel(et):null,n.set(L,{dataIdx:et,regionModel:ft}));var ht=[],Tt=[];g.S6(A.geometries,function(It){if(It.type==="polygon"){var zt=[It.exterior].concat(It.interiors||[]);d&&(zt=Wc(zt,d)),g.S6(zt,function(Yt){ht.push(new fa.Z(S(Yt)))})}else{var Kt=It.points;d&&(Kt=Wc(Kt,d,!0)),g.S6(Kt,function(Yt){Tt.push(new Rt.Z(S(Yt)))})}});var Et=m(A.getCenter(),v&&v.project);function Ct(It,zt){if(It.length){var Kt=new mt.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:It}});I.add(Kt),Ya(r,Kt,et,ft),Lu(r,Kt,L,ft,u,et,Et),zt&&(Jf(Kt),g.S6(Kt.states,Jf))}}Ct(ht),Ct(Tt,!0)}),e.each(function(A,L){var I=n.get(L),U=I.dataIdx,et=I.regionModel;Qf(r,A,L,et,u,U),Aa(r,A,L,et,u),Zc(r,A,L,et,u)},this)},a.prototype._buildSVG=function(r){var e=r.geo.map,n=r.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=g.kW(),s=!1;g.S6(this._svgGraphicRecord.named,function(u){var h=u.name,v=r.mapOrGeoModel,d=r.data,m=u.svgNodeTagLower,_=u.el,S=d?d.indexOfName(h):null,A=v.getRegionModel(h);if(Vc.get(m)!=null&&_ instanceof Ia.ZP&&Ya(r,_,S,A),_ instanceof Ia.ZP&&(_.culling=!0),_.z2EmphasisLift=0,!u.namedFrom&&(kc.get(m)!=null&&Lu(r,_,h,A,v,S,null),Qf(r,_,h,A,v,S),Aa(r,_,h,A,v),jf.get(m)!=null)){var L=Zc(r,_,h,A,v);L==="self"&&(s=!0);var I=o.get(h)||o.set(h,[]);I.push(_)}},this),this._enableBlurEntireSVG(s,r)},a.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=n.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){(0,Qe.MA)(s);var u=s.ensureState("blur").style||{};u.opacity==null&&o!=null&&(u.opacity=o),s.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(r,e){if(r==null)return[];var n=e.coordinateSystem;if(n.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(r);return s?[s]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},a.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},a.prototype._useSVG=function(r){var e=ha.getGeoResource(r);if(e&&e.type==="geoSVG"){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=r}},a.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var e=ha.getGeoResource(r);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(r,e,n){var o=r.coordinateSystem,s=this._controller,u=this._controllerHost;u.zoomLimit=r.get("scaleLimit"),u.zoom=o.getZoom(),s.enable(r.get("roam")||!1);var h=r.mainType;function v(){var d={type:"geoRoam",componentType:h};return d[h+"Id"]=r.id,d}s.off("pan").on("pan",function(d){this._mouseDownFlag=!1,Jo(u,d.dx,d.dy),n.dispatchAction(g.l7(v(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,zf(u,d.scale,d.originX,d.originY),n.dispatchAction(g.l7(v(),{zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),s.setPointerChecker(function(d,m,_){return o.containPoint([m,_])&&!Su(d,n,r)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Uc(e).ignore)})},a.prototype._updateMapSelectHandler=function(r,e,n,o){var s=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){s._mouseDownFlag=!0}),e.on("click",function(u){s._mouseDownFlag&&(s._mouseDownFlag=!1)}))},a}();function Ya(a,r,e,n){var o=n.getModel("itemStyle"),s=n.getModel(["emphasis","itemStyle"]),u=n.getModel(["blur","itemStyle"]),h=n.getModel(["select","itemStyle"]),v=Pu(o),d=Pu(s),m=Pu(h),_=Pu(u),S=a.data;if(S){var A=S.getItemVisual(e,"style"),L=S.getItemVisual(e,"decal");a.isVisualEncodedByVisualMap&&A.fill&&(v.fill=A.fill),L&&(v.decal=(0,Eu.I)(L,a.api))}r.setStyle(v),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=d,r.ensureState("select").style=m,r.ensureState("blur").style=_,(0,Qe.MA)(r)}function Lu(a,r,e,n,o,s,u){var h=a.data,v=a.isGeo,d=h&&isNaN(h.get(h.mapDimension("value"),s)),m=h&&h.getItemLayout(s);if(v||d||m&&m.showLabel){var _=v?e:s,S=void 0;(!h||s>=0)&&(S=o);var A=u?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,Ge.ni)(r,(0,Ge.k3)(n),{labelFetcher:S,labelDataIndex:_,defaultText:e},A);var L=r.getTextContent();if(L&&(Uc(L).ignore=L.ignore,r.textConfig&&u)){var I=r.getBoundingRect().clone();r.textConfig.layoutRect=I,r.textConfig.position=[(u[0]-I.x)/I.width*100+"%",(u[1]-I.y)/I.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function Qf(a,r,e,n,o,s){a.data?a.data.setItemGraphicEl(s,r):(0,Er.A)(r).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:e,region:n&&n.option||{}}}function Aa(a,r,e,n,o){a.data||mr.setTooltipConfig({el:r,componentModel:o,itemName:e,itemTooltipOption:n.get("tooltip")})}function Zc(a,r,e,n,o){r.highDownSilentOnTouch=!!o.get("selectedMode");var s=n.getModel("emphasis"),u=s.get("focus");return(0,Qe.k5)(r,u,s.get("blurScope"),s.get("disabled")),a.isGeo&&(0,Qe.th)(r,o,e),u}function Wc(a,r,e){var n=[],o;function s(){o=[]}function u(){o.length&&(n.push(o),o=[])}var h=r({polygonStart:s,polygonEnd:u,lineStart:s,lineEnd:u,point:function(v,d){isFinite(v)&&isFinite(d)&&o.push([v,d])},sphere:function(){}});return!e&&h.polygonStart(),g.S6(a,function(v){h.lineStart();for(var d=0;d<v.length;d++)h.point(v[d][0],v[d][1]);h.lineEnd()}),!e&&h.polygonEnd(),n}var Os=Zp,Wp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var u=this.group;if(u.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===e.id){var h=this._mapDraw;h&&u.add(h.group)}else if(e.needsDrawMap){var h=this._mapDraw||new Os(o);u.add(h.group),h.draw(e,n,o,this,s),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(e,n,o)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,n,o){var s=e.originalData,u=this.group;s.each(s.mapDimension("value"),function(h,v){if(!isNaN(h)){var d=s.getItemLayout(v);if(!(!d||!d.point)){var m=d.point,_=d.offset,S=new jo.Z({style:{fill:e.getData().getVisual("style").fill},shape:{cx:m[0]+_*9,cy:m[1],r:3},silent:!0,z2:8+(_?0:Qe.zr+1)});if(!_){var A=e.mainSeries.getData(),L=s.getName(v),I=A.indexOfName(L),U=s.getItemModel(v),et=U.getModel("label"),ft=A.getItemGraphicEl(I);(0,Ge.ni)(S,(0,Ge.k3)(U),{labelFetcher:{getFormattedLabel:function(ht,Tt){return e.getFormattedLabel(I,Tt)}},defaultText:L}),S.disableLabelAnimation=!0,et.get("position")||S.setTextConfig({position:"bottom"}),ft.onHoverStateChange=function(ht){(0,Qe.Gl)(S,ht)}}u.add(S)}}})},r.type="map",r}(Mn.Z),Hc=Wp,Hp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(n){if(n!=null){var o=this.getData().getName(n),s=this.coordinateSystem,u=s.getRegion(o);return u&&s.dataToPoint(u.getCenter())}},e}return r.prototype.getInitialData=function(e){for(var n=Re(this,{coordDimensions:["value"],encodeDefaulter:g.WA(Ye.Ss,this)}),o=g.kW(),s=[],u=0,h=n.count();u<h;u++){var v=n.getName(u);o.set(v,!0)}var d=ha.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return g.S6(d.regions,function(m){var _=m.name;o.get(_)||s.push(_)}),n.appendValues([],s),n},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var n=this.getData();return n.get(n.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var n=this.getData();return n.getItemModel(n.indexOfName(e))},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData(),u=this.getRawValue(e),h=s.getName(e),v=this.seriesGroup,d=[],m=0;m<v.length;m++){var _=v[m].originalData.indexOfName(h),S=s.mapDimension("value");isNaN(v[m].originalData.get(S,_))||d.push(v[m].name)}return(0,Un.TX)("section",{header:d.join(", "),noHeader:!d.length,blocks:[(0,Un.TX)("nameValue",{name:h,value:u})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var n=e.icon||"roundRect",o=(0,fn.th)(n,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return o.setStyle(e.itemStyle),o.style.stroke="none",n.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(yn.Z),Xp=Hp;function Kp(a,r){var e={};return g.S6(a,function(n){n.each(n.mapDimension("value"),function(o,s){var u="ec-"+n.getName(s);e[u]=e[u]||[],isNaN(o)||e[u].push(o)})}),a[0].map(a[0].mapDimension("value"),function(n,o){for(var s="ec-"+a[0].getName(o),u=0,h=1/0,v=-1/0,d=e[s].length,m=0;m<d;m++)h=Math.min(h,e[s][m]),v=Math.max(v,e[s][m]),u+=e[s][m];var _;return r==="min"?_=h:r==="max"?_=v:r==="average"?_=u/d:_=u,d===0?NaN:_})}function Yp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),o=n?"o"+n.id:"i"+e.getMapType();(r[o]=r[o]||[]).push(e)}),g.S6(r,function(e,n){for(var o=Kp(g.UI(e,function(u){return u.getData()}),e[0].get("mapValueCalculation")),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(var s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=s===0&&!e[s].getHostGeoModel(),e[s].setData(o.cloneShallow()),e[s].mainSeries=e[0]})}function jp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getMapType();if(!(e.getHostGeoModel()||r[n])){var o={};g.S6(e.seriesGroup,function(u){var h=u.coordinateSystem,v=u.originalData;u.get("showLegendSymbol")&&a.getComponent("legend")&&v.each(v.mapDimension("value"),function(d,m){var _=v.getName(m),S=h.getRegion(_);if(!(!S||isNaN(d))){var A=o[_]||0,L=h.dataToPoint(S.getCenter());o[_]=A+1,v.setItemLayout(m,{point:L,offset:A})}})});var s=e.getData();s.each(function(u){var h=s.getName(u),v=s.getItemLayout(u)||{};v.showLabel=!o[h],s.setItemLayout(u,v)}),r[n]=!0}})}var Xc=Pr.Ne,Jp=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new St.ZP,n._rawTransformable=new St.ZP,n.name=e,n}return r.prototype.setBoundingRect=function(e,n,o,s){return this._rect=new gn.Z(e,n,o,s),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,n,o,s){this._transformTo(e,n,o,s),this._viewRect=new gn.Z(e,n,o,s)},r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),h=this._rawTransformable;h.transform=u.calculateTransform(new gn.Z(e,n,o,s));var v=h.parent;h.parent=null,h.decomposeTransform(),h.parent=v,this._updateTransform()},r.prototype.setCenter=function(e,n){e&&(this._center=[(0,De.GM)(e[0],n.getWidth()),(0,De.GM)(e[1],n.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var n=this.zoomLimit;n&&(n.max!=null&&(e=Math.min(n.max,e)),n.min!=null&&(e=Math.max(n.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),n=e.x+e.width/2,o=e.y+e.height/2;return[n,o]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,o=this.getDefaultCenter(),s=this.getCenter(),u=this.getZoom();s=Pr.Ne([],s,e),o=Pr.Ne([],o,e),n.originX=s[0],n.originY=s[1],n.x=o[0]-s[0],n.y=o[1]-s[1],n.scaleX=n.scaleY=u,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,n=this._rawTransformable;n.parent=e,e.updateTransform(),n.updateTransform(),An.JG(this.transform||(this.transform=[]),n.transform||An.Ue()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],An.U_(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,n=this._roamTransformable,o=new St.ZP;return o.transform=n.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,n,o){var s=n?this._rawTransform:this.transform;return o=o||[],s?Xc(o,e,s):Pr.JG(o,e)},r.prototype.pointToData=function(e){var n=this.invTransform;return n?Xc([],e,n):[e[0],e[1]]},r.prototype.convertToPixel=function(e,n,o){var s=Kc(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=Kc(n);return s===this?s.pointToData(o):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(St.ZP);function Kc(a){var r=a.seriesModel;return r?r.coordinateSystem:null}var Al=Jp,Yc={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},jc=["lng","lat"],$f=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this,e)||this;s.dimensions=jc,s.type="geo",s._nameCoordMap=g.kW(),s.map=n;var u=o.projection,h=ha.load(n,o.nameMap,o.nameProperty),v=ha.getGeoResource(n),d=s.resourceType=v?v.type:null,m=s.regions=h.regions,_=Yc[v.type];s._regionsMap=h.regionsMap,s.regions=h.regions,s.projection=u;var S;if(u)for(var A=0;A<m.length;A++){var L=m[A].getBoundingRect(u);S=S||L.clone(),S.union(L)}else S=h.boundingRect;return s.setBoundingRect(S.x,S.y,S.width,S.height),s.aspectScale=u?1:g.pD(o.aspectScale,_.aspectScale),s._invertLongitute=u?!1:_.invertLongitute,s}return r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),h=this._invertLongitute;u=u.clone(),h&&(u.y=-u.y-u.height);var v=this._rawTransformable;v.transform=u.calculateTransform(new gn.Z(e,n,o,s));var d=v.parent;v.parent=null,v.decomposeTransform(),v.parent=d,h&&(v.scaleY=-v.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var n=this.regions,o=0;o<n.length;o++){var s=n[o];if(s.type==="geoJSON"&&s.contain(e))return n[o]}},r.prototype.addGeoCoord=function(e,n){this._nameCoordMap.set(e,n)},r.prototype.getGeoCoord=function(e){var n=this._regionsMap.get(e);return this._nameCoordMap.get(e)||n&&n.getCenter()},r.prototype.dataToPoint=function(e,n,o){if(g.HD(e)&&(e=this.getGeoCoord(e)),e){var s=this.projection;return s&&(e=s.project(e)),e&&this.projectedToPoint(e,n,o)}},r.prototype.pointToData=function(e){var n=this.projection;return n&&(e=n.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return a.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,n,o){return a.prototype.dataToPoint.call(this,e,n,o)},r.prototype.convertToPixel=function(e,n,o){var s=Jc(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=Jc(n);return s===this?s.pointToData(o):null},r}(Al);g.jB($f,Al);function Jc(a){var r=a.geoModel,e=a.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",We.C6).models[0]||{}).coordinateSystem:null}var qf=$f;function th(a,r){var e=a.get("boundingCoords");if(e!=null){var n=e[0],o=e[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var u=n[0],h=n[1],v=o[0],d=o[1];n=[1/0,1/0],o=[-1/0,-1/0];var m=function(Ct,It,zt,Kt){for(var Yt=zt-Ct,ne=Kt-It,oe=0;oe<=100;oe++){var ce=oe/100,me=s.project([Ct+Yt*ce,It+ne*ce]);Pr.VV(n,n,me),Pr.Fp(o,o,me)}};m(u,h,v,h),m(v,h,v,d),m(v,d,u,d),m(u,d,v,h)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}}var _=this.getBoundingRect(),S=a.get("layoutCenter"),A=a.get("layoutSize"),L=r.getWidth(),I=r.getHeight(),U=_.width/_.height*this.aspectScale,et=!1,ft,ht;S&&A&&(ft=[De.GM(S[0],L),De.GM(S[1],I)],ht=De.GM(A,Math.min(L,I)),!isNaN(ft[0])&&!isNaN(ft[1])&&!isNaN(ht)&&(et=!0));var Tt;if(et)Tt={},U>1?(Tt.width=ht,Tt.height=ht/U):(Tt.height=ht,Tt.width=ht*U),Tt.y=ft[1]-Tt.height/2,Tt.x=ft[0]-Tt.width/2;else{var Et=a.getBoxLayoutParams();Et.aspect=U,Tt=Hr.ME(Et,{width:L,height:I})}this.setViewRect(Tt.x,Tt.y,Tt.width,Tt.height),this.setCenter(a.get("center"),r),this.setZoom(a.get("zoom"))}function Qc(a,r){g.S6(r.get("geoCoord"),function(e,n){a.addGeoCoord(n,e)})}var $c=function(){function a(){this.dimensions=jc}return a.prototype.create=function(r,e){var n=[];function o(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}r.eachComponent("geo",function(u,h){var v=u.get("map"),d=new qf(v+h,v,g.l7({nameMap:u.get("nameMap")},o(u)));d.zoomLimit=u.get("scaleLimit"),n.push(d),u.coordinateSystem=d,d.model=u,d.resize=th,d.resize(u,e)}),r.eachSeries(function(u){var h=u.get("coordinateSystem");if(h==="geo"){var v=u.get("geoIndex")||0;u.coordinateSystem=n[v]}});var s={};return r.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var h=u.getMapType();s[h]=s[h]||[],s[h].push(u)}}),g.S6(s,function(u,h){var v=g.UI(u,function(m){return m.get("nameMap")}),d=new qf(h,h,g.l7({nameMap:g.Jn(v)},o(u[0])));d.zoomLimit=g.Jv.apply(null,g.UI(u,function(m){return m.get("scaleLimit")})),n.push(d),d.resize=th,d.resize(u[0],e),g.S6(u,function(m){m.coordinateSystem=d,Qc(d,m)})}),n},a.prototype.getFilledRegions=function(r,e,n,o){for(var s=(r||[]).slice(),u=g.kW(),h=0;h<s.length;h++)u.set(s[h].name,s[h]);var v=ha.load(e,n,o);return g.S6(v.regions,function(d){var m=d.name;!u.get(m)&&s.push({name:m})}),s},a}(),qc=new $c,tv=qc,ev=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=ha.getGeoResource(e.map);if(s&&s.type==="geoJSON"){var u=e.itemStyle=e.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(e,o),We.Cc(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,n=this.option;n.regions=tv.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var o={};this._optionModelMap=g.u4(n.regions||[],function(s,u){var h=u.name;return h&&(s.set(h,new zn.Z(u,e,e.ecModel)),u.selected&&(o[h]=!0)),s},g.kW()),n.selectedMap||(n.selectedMap=o)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new zn.Z(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,n){var o=this.getRegionModel(e),s=n==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),u={name:e};if(g.mf(s))return u.status=n,s(u);if(g.HD(s))return s.replace("{a}",e!=null?e:"")},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var n=this.option,o=n.selectedMode;if(o){o!=="multiple"&&(n.selectedMap=null);var s=n.selectedMap||(n.selectedMap={});s[e]=!0}},r.prototype.unSelect=function(e){var n=this.option.selectedMap;n&&(n[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var n=this.option.selectedMap;return!!(n&&n[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(ti.Z),rv=ev;function nv(a,r){return a.pointToProjected?a.pointToProjected(r):a.pointToData(r)}function eh(a,r,e,n){var o=a.getZoom(),s=a.getCenter(),u=r.zoom,h=a.projectedToPoint?a.projectedToPoint(s):a.dataToPoint(s);if(r.dx!=null&&r.dy!=null&&(h[0]-=r.dx,h[1]-=r.dy,a.setCenter(nv(a,h),n)),u!=null){if(e){var v=e.min||0,d=e.max||1/0;u=Math.max(Math.min(o*u,d),v)/o}a.scaleX*=u,a.scaleY*=u;var m=(r.originX-a.x)*(u-1),_=(r.originY-a.y)*(u-1);a.x-=m,a.y-=_,a.updateTransform(),a.setCenter(nv(a,h),n),a.setZoom(u*o)}return{center:a.getCenter(),zoom:a.getZoom()}}var rh=z(84515),Qp=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return r.prototype.init=function(e,n){this._api=n},r.prototype.render=function(e,n,o,s){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Os(o));var u=this._mapDraw;u.draw(e,n,o,this,s),u.group.on("click",this._handleRegionClick,this),u.group.silent=e.get("silent"),this.group.add(u.group),this.updateSelectStatus(e,n,o)},r.prototype._handleRegionClick=function(e){var n;(0,rh.o)(e.target,function(o){return(n=(0,Er.A)(o).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},r.prototype.updateSelectStatus=function(e,n,o){var s=this;this._mapDraw.group.traverse(function(u){var h=(0,Er.A)(u).eventData;if(h)return s._model.isSelected(h.name)?o.enterSelect(u):o.leaveSelect(u),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(qn.Z),$p=Qp;function qp(a,r,e){ha.registerMap(a,r,e)}function Iu(a){a.registerCoordinateSystem("geo",tv),a.registerComponentModel(rv),a.registerComponentView($p),a.registerImpl("registerMap",qp),a.registerImpl("getMap",function(e){return ha.getMapForUser(e)});function r(e,n){n.update="geo:updateSelectStatus",a.registerAction(n,function(o,s){var u={},h=[];return s.eachComponent({mainType:"geo",query:o},function(v){v[e](o.name);var d=v.coordinateSystem;(0,g.S6)(d.regions,function(_){u[_.name]=v.isSelected(_.name)||!1});var m=[];(0,g.S6)(u,function(_,S){u[S]&&m.push(S)}),h.push({geoIndex:v.componentIndex,name:m})}),{selected:u,allSelected:h,name:o.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,n,o){var s=e.componentType||"series";n.eachComponent({mainType:s,query:e},function(u){var h=u.coordinateSystem;if(h.type==="geo"){var v=eh(h,e,u.get("scaleLimit"),o);u.setCenter&&u.setCenter(v.center),u.setZoom&&u.setZoom(v.zoom),s==="series"&&(0,g.S6)(u.seriesGroup,function(d){d.setCenter(v.center),d.setZoom(v.zoom)})}})})}function tg(a){(0,F.D)(Iu),a.registerChartView(Hc),a.registerSeriesModel(Xp),a.registerLayout(jp),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Yp),(0,Uo.y)("map",a.registerAction)}var iv=z(32799);function eg(a){var r=a;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[r],n,o;n=e.pop();)if(o=n.children,n.isExpand&&o.length)for(var s=o.length,u=s-1;u>=0;u--){var h=o[u];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},e.push(h)}}function av(a,r){var e=a.isExpand?a.children:[],n=a.parentNode.children,o=a.hierNode.i?n[a.hierNode.i-1]:null;if(e.length){ng(a);var s=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;o?(a.hierNode.prelim=o.hierNode.prelim+r(a,o),a.hierNode.modifier=a.hierNode.prelim-s):a.hierNode.prelim=s}else o&&(a.hierNode.prelim=o.hierNode.prelim+r(a,o));a.parentNode.hierNode.defaultAncestor=sv(a,o,a.parentNode.hierNode.defaultAncestor||n[0],r)}function rg(a){var r=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:r},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function ov(a){return arguments.length?a:ag}function bl(a,r){return a-=Math.PI/2,{x:r*Math.cos(a),y:r*Math.sin(a)}}function Ns(a,r){return Hr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function ng(a){for(var r=a.children,e=r.length,n=0,o=0;--e>=0;){var s=r[e];s.hierNode.prelim+=n,s.hierNode.modifier+=n,o+=s.hierNode.change,n+=s.hierNode.shift+o}}function sv(a,r,e,n){if(r){for(var o=a,s=a,u=s.parentNode.children[0],h=r,v=o.hierNode.modifier,d=s.hierNode.modifier,m=u.hierNode.modifier,_=h.hierNode.modifier;h=Ru(h),s=nh(s),h&&s;){o=Ru(o),u=nh(u),o.hierNode.ancestor=a;var S=h.hierNode.prelim+_-s.hierNode.prelim-d+n(h,s);S>0&&(ig(ja(h,a,e),a,S),d+=S,v+=S),_+=h.hierNode.modifier,d+=s.hierNode.modifier,v+=o.hierNode.modifier,m+=u.hierNode.modifier}h&&!Ru(o)&&(o.hierNode.thread=h,o.hierNode.modifier+=_-v),s&&!nh(u)&&(u.hierNode.thread=s,u.hierNode.modifier+=d-m,e=a)}return e}function Ru(a){var r=a.children;return r.length&&a.isExpand?r[r.length-1]:a.hierNode.thread}function nh(a){var r=a.children;return r.length&&a.isExpand?r[0]:a.hierNode.thread}function ja(a,r,e){return a.hierNode.ancestor.parentNode===r.parentNode?a.hierNode.ancestor:e}function ig(a,r,e){var n=e/(r.hierNode.i-a.hierNode.i);r.hierNode.change-=n,r.hierNode.shift+=e,r.hierNode.modifier+=e,r.hierNode.prelim+=e,a.hierNode.change+=n}function ag(a,r){return a.parentNode===r.parentNode?1:2}var ca=z(19169),og=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),lv=function(a){(0,Wt.ZT)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new og},r.prototype.buildPath=function(e,n){var o=n.childPoints,s=o.length,u=n.parentPoint,h=o[0],v=o[s-1];if(s===1){e.moveTo(u[0],u[1]),e.lineTo(h[0],h[1]);return}var d=n.orient,m=d==="TB"||d==="BT"?0:1,_=1-m,S=(0,De.GM)(n.forkPosition,1),A=[];A[m]=u[m],A[_]=u[_]+(v[_]-u[_])*S,e.moveTo(u[0],u[1]),e.lineTo(A[0],A[1]),e.moveTo(h[0],h[1]),A[m]=h[m],e.lineTo(A[0],A[1]),A[m]=v[m],e.lineTo(A[0],A[1]),e.lineTo(v[0],v[1]);for(var L=1;L<s-1;L++){var I=o[L];e.moveTo(I[0],I[1]),A[m]=I[m],e.lineTo(A[0],A[1])}},r}(yt.ZP),sg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._mainGroup=new Mr.Z,e}return r.prototype.init=function(e,n){this._controller=new xl(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(e,n,o){var s=e.getData(),u=e.layoutInfo,h=this._mainGroup,v=e.get("layout");v==="radial"?(h.x=u.x+u.width/2,h.y=u.y+u.height/2):(h.x=u.x,h.y=u.y),this._updateViewCoordSys(e,o),this._updateController(e,n,o);var d=this._data;s.diff(d).add(function(m){Ou(s,m)&&uv(s,m,null,h,e)}).update(function(m,_){var S=d.getItemGraphicEl(_);if(!Ou(s,m)){S&&hv(d,_,S,h,e);return}uv(s,m,S,h,e)}).remove(function(m){var _=d.getItemGraphicEl(m);_&&hv(d,m,_,h,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(m,_){m.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:_})})}),this._data=s},r.prototype._updateViewCoordSys=function(e,n){var o=e.getData(),s=[];o.each(function(_){var S=o.getItemLayout(_);S&&!isNaN(S.x)&&!isNaN(S.y)&&s.push([+S.x,+S.y])});var u=[],h=[];ca.zk(s,u,h);var v=this._min,d=this._max;h[0]-u[0]===0&&(u[0]=v?v[0]:u[0]-1,h[0]=d?d[0]:h[0]+1),h[1]-u[1]===0&&(u[1]=v?v[1]:u[1]-1,h[1]=d?d[1]:h[1]+1);var m=e.coordinateSystem=new Al;m.zoomLimit=e.get("scaleLimit"),m.setBoundingRect(u[0],u[1],h[0]-u[0],h[1]-u[1]),m.setCenter(e.get("center"),n),m.setZoom(e.get("zoom")),this.group.attr({x:m.x,y:m.y,scaleX:m.scaleX,scaleY:m.scaleY}),this._min=u,this._max=h},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,h=this._controllerHost,v=this.group;u.setPointerChecker(function(d,m,_){var S=v.getBoundingRect();return S.applyTransform(v.transform),S.contain(m,_)&&!Su(d,o,e)}),u.enable(e.get("roam")),h.zoomLimit=e.get("scaleLimit"),h.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Jo(h,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){zf(h,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(e),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(e){var n=e.getData(),o=this._getNodeGlobalScale(e);n.eachItemGraphicEl(function(s,u){s.setSymbolScale(o)})},r.prototype._getNodeGlobalScale=function(e){var n=e.coordinateSystem;if(n.type!=="view")return 1;var o=this._nodeScaleRatio,s=n.scaleX||1,u=n.getZoom(),h=(u-1)*o+1;return h/s},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(Mn.Z);function Ou(a,r){var e=a.getItemLayout(r);return e&&!isNaN(e.x)&&!isNaN(e.y)}function uv(a,r,e,n,o){var s=!e,u=a.tree.getNodeByDataIndex(r),h=u.getModel(),v=u.getVisual("style").fill,d=u.isExpand===!1&&u.children.length!==0?v:"#fff",m=a.tree.root,_=u.parentNode===m?u:u.parentNode||u,S=a.getItemGraphicEl(_.dataIndex),A=_.getLayout(),L=S?{x:S.__oldX,y:S.__oldY,rawX:S.__radialOldRawX,rawY:S.__radialOldRawY}:A,I=u.getLayout();s?(e=new ni(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.x=L.x,e.y=L.y):e.updateData(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=I.rawX,e.__radialRawY=I.rawY,n.add(e),a.setItemGraphicEl(r,e),e.__oldX=e.x,e.__oldY=e.y,rr.D(e,{x:I.x,y:I.y},o);var U=e.getSymbolPath();if(o.get("layout")==="radial"){var et=m.children[0],ft=et.getLayout(),ht=et.children.length,Tt=void 0,Et=void 0;if(I.x===ft.x&&u.isExpand===!0&&et.children.length){var Ct={x:(et.children[0].getLayout().x+et.children[ht-1].getLayout().x)/2,y:(et.children[0].getLayout().y+et.children[ht-1].getLayout().y)/2};Tt=Math.atan2(Ct.y-ft.y,Ct.x-ft.x),Tt<0&&(Tt=Math.PI*2+Tt),Et=Ct.x<ft.x,Et&&(Tt=Tt-Math.PI)}else Tt=Math.atan2(I.y-ft.y,I.x-ft.x),Tt<0&&(Tt=Math.PI*2+Tt),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(Et=I.x<ft.x,Et&&(Tt=Tt-Math.PI)):(Et=I.x>ft.x,Et||(Tt=Tt-Math.PI));var It=Et?"left":"right",zt=h.getModel("label"),Kt=zt.get("rotate"),Yt=Kt*(Math.PI/180),ne=U.getTextContent();ne&&(U.setTextConfig({position:zt.get("position")||It,rotation:Kt==null?-Tt:Yt,origin:"center"}),ne.setStyle("verticalAlign","middle"))}var oe=h.get(["emphasis","focus"]),ce=oe==="relative"?g.WW(u.getAncestorsIndices(),u.getDescendantIndices()):oe==="ancestor"?u.getAncestorsIndices():oe==="descendant"?u.getDescendantIndices():null;ce&&((0,Er.A)(e).focus=ce),Bs(o,u,m,e,L,A,I,n),e.__edge&&(e.onHoverStateChange=function(me){if(me!=="blur"){var _e=u.parentNode&&a.getItemGraphicEl(u.parentNode.dataIndex);_e&&_e.hoverState===Qe.CX||(0,Qe.Gl)(e.__edge,me)}})}function Bs(a,r,e,n,o,s,u,h){var v=r.getModel(),d=a.get("edgeShape"),m=a.get("layout"),_=a.getOrient(),S=a.get(["lineStyle","curveness"]),A=a.get("edgeForkPosition"),L=v.getModel("lineStyle").getLineStyle(),I=n.__edge;if(d==="curve")r.parentNode&&r.parentNode!==e&&(I||(I=n.__edge=new iv.Z({shape:ih(m,_,S,o,o)})),rr.D(I,{shape:ih(m,_,S,s,u)},a));else if(d==="polyline"&&m==="orthogonal"&&r!==e&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var U=r.children,et=[],ft=0;ft<U.length;ft++){var ht=U[ft].getLayout();et.push([ht.x,ht.y])}I||(I=n.__edge=new lv({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:_,forkPosition:A}})),rr.D(I,{shape:{parentPoint:[u.x,u.y],childPoints:et}},a)}I&&!(d==="polyline"&&!r.isExpand)&&(I.useStyle(g.ce({strokeNoScale:!0,fill:null},L)),(0,Qe.WO)(I,v,"lineStyle"),(0,Qe.MA)(I),h.add(I))}function fv(a,r,e,n,o){var s=r.tree.root,u=Fs(s,a),h=u.source,v=u.sourceLayout,d=r.getItemGraphicEl(a.dataIndex);if(d){var m=r.getItemGraphicEl(h.dataIndex),_=m.__edge,S=d.__edge||(h.isExpand===!1||h.children.length===1?_:void 0),A=n.get("edgeShape"),L=n.get("layout"),I=n.get("orient"),U=n.get(["lineStyle","curveness"]);S&&(A==="curve"?rr.bX(S,{shape:ih(L,I,U,v,v),style:{opacity:0}},n,{cb:function(){e.remove(S)},removeOpt:o}):A==="polyline"&&n.get("layout")==="orthogonal"&&rr.bX(S,{shape:{parentPoint:[v.x,v.y],childPoints:[[v.x,v.y]]},style:{opacity:0}},n,{cb:function(){e.remove(S)},removeOpt:o}))}}function Fs(a,r){for(var e=r.parentNode===a?r:r.parentNode||r,n;n=e.getLayout(),n==null;)e=e.parentNode===a?e:e.parentNode||e;return{source:e,sourceLayout:n}}function hv(a,r,e,n,o){var s=a.tree.getNodeByDataIndex(r),u=a.tree.root,h=Fs(u,s).sourceLayout,v={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};rr.bX(e,{x:h.x+1,y:h.y+1},o,{cb:function(){n.remove(e),a.setItemGraphicEl(r,null)},removeOpt:v}),e.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:v}),s.children.forEach(function(d){fv(d,a,n,o,v)}),fv(s,a,n,o,v)}function ih(a,r,e,n,o){var s,u,h,v,d,m,_,S;if(a==="radial"){d=n.rawX,_=n.rawY,m=o.rawX,S=o.rawY;var A=bl(d,_),L=bl(d,_+(S-_)*e),I=bl(m,S+(_-S)*e),U=bl(m,S);return{x1:A.x||0,y1:A.y||0,x2:U.x||0,y2:U.y||0,cpx1:L.x||0,cpy1:L.y||0,cpx2:I.x||0,cpy2:I.y||0}}else d=n.x,_=n.y,m=o.x,S=o.y,(r==="LR"||r==="RL")&&(s=d+(m-d)*e,u=_,h=m+(d-m)*e,v=S),(r==="TB"||r==="BT")&&(s=d,u=_+(S-_)*e,h=m,v=S+(_-S)*e);return{x1:d,y1:_,x2:m,y2:S,cpx1:s,cpy1:u,cpx2:h,cpy2:v}}var lg=sg,cv=z(89130),vv=function(){function a(r,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=e}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(r,e,n){g.mf(r)&&(n=e,e=r,r=null),r=r||{},g.HD(r)&&(r={order:r});var o=r.order||"preorder",s=this[r.attr||"children"],u;o==="preorder"&&(u=e.call(n,this));for(var h=0;!u&&h<s.length;h++)s[h].eachNode(r,e,n);o==="postorder"&&e.call(n,this)},a.prototype.updateDepthAndHeight=function(r){var e=0;this.depth=r;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(r+1),o.height>e&&(e=o.height)}this.height=e+1},a.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].getNodeById(r);if(s)return s}},a.prototype.contains=function(r){if(r===this)return!0;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].contains(r);if(s)return s}},a.prototype.getAncestors=function(r){for(var e=[],n=r?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},a.prototype.getAncestorsIndices=function(){for(var r=[],e=this;e;)r.push(e.dataIndex),e=e.parentNode;return r.reverse(),r},a.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(e){r.push(e.dataIndex)}),r},a.prototype.getValue=function(r){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(r||"value"),this.dataIndex)},a.prototype.setLayout=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,e)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(r)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,e)},a.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,e=0;e<r.length;++e)if(r[e]===this)return e;return-1}return-1},a.prototype.isAncestorOf=function(r){for(var e=r.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},a.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},a}(),ah=function(){function a(r){this.type="tree",this._nodes=[],this.hostModel=r}return a.prototype.eachNode=function(r,e,n){this.root.eachNode(r,e,n)},a.prototype.getNodeByDataIndex=function(r){var e=this.data.getRawIndex(r);return this._nodes[e]},a.prototype.getNodeById=function(r){return this.root.getNodeById(r)},a.prototype.update=function(){for(var r=this.data,e=this._nodes,n=0,o=e.length;n<o;n++)e[n].dataIndex=-1;for(var n=0,o=r.count();n<o;n++)e[r.getRawIndex(n)].dataIndex=n},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(r,e,n){var o=new a(e),s=[],u=1;h(r);function h(m,_){var S=m.value;u=Math.max(u,g.kJ(S)?S.length:1),s.push(m);var A=new vv((0,We.U5)(m.name,""),o);_?rn(A,_):o.root=A,o._nodes.push(A);var L=m.children;if(L)for(var I=0;I<L.length;I++)h(L[I],A)}o.root.updateDepthAndHeight(0);var v=(0,ge.Z)(s,{coordDimensions:["value"],dimensionsCount:u}).dimensions,d=new Ae.Z(v,e);return d.initData(s),n&&n(d),(0,cv.Z)({mainData:d,struct:o,structAttr:"tree"}),o.update(),o},a}();function rn(a,r){var e=r.children;a.parentNode!==r&&(e.push(a),a.parentNode=r)}var oh=ah;function rs(a,r,e){if(a&&g.cq(r,a.type)>=0){var n=e.getData().tree.root,o=a.targetNode;if(g.HD(o)&&(o=n.getNodeById(o)),o&&n.contains(o))return{node:o};var s=a.targetNodeId;if(s!=null&&(o=n.getNodeById(s)))return{node:o}}}function dv(a){for(var r=[];a;)a=a.parentNode,a&&r.push(a);return r.reverse()}function Fn(a,r){var e=dv(a);return g.cq(e,r)>=0}function Ml(a,r){for(var e=[];a;){var n=a.dataIndex;e.push({name:a.name,dataIndex:n,value:r.getRawValue(n)}),a=a.parentNode}return e.reverse(),e}var mo=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e){var n={name:e.name,children:e.data},o=e.leaves||{},s=new zn.Z(o,this,this.ecModel),u=oh.createTree(n,this,h);function h(_){_.wrapMethod("getItemModel",function(S,A){var L=u.getNodeByDataIndex(A);return L&&L.children.length&&L.isExpand||(S.parentModel=s),S})}var v=0;u.eachNode("preorder",function(_){_.depth>v&&(v=_.depth)});var d=e.expandAndCollapse,m=d&&e.initialTreeDepth>=0?e.initialTreeDepth:v;return u.root.eachNode("preorder",function(_){var S=_.hostTree.data.getRawDataItem(_.dataIndex);_.isExpand=S&&S.collapsed!=null?!S.collapsed:_.depth<=m}),u.data},r.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData().tree,u=s.root.children[0],h=s.getNodeByDataIndex(e),v=h.getValue(),d=h.name;h&&h!==u;)d=h.parentNode.name+"."+d,h=h.parentNode;return(0,Un.TX)("nameValue",{name:d,value:v,noValue:isNaN(v)||v==null})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Ml(o,this),n.collapsed=!o.isExpand,n},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(yn.Z),ug=mo;function fg(a,r,e){for(var n=[a],o=[],s;s=n.pop();)if(o.push(s),s.isExpand){var u=s.children;if(u.length)for(var h=0;h<u.length;h++)n.push(u[h])}for(;s=o.pop();)r(s,e)}function Cl(a,r){for(var e=[a],n;n=e.pop();)if(r(n),n.isExpand){var o=n.children;if(o.length)for(var s=o.length-1;s>=0;s--)e.push(o[s])}}function hg(a,r){a.eachSeriesByType("tree",function(e){pv(e,r)})}function pv(a,r){var e=Ns(a,r);a.layoutInfo=e;var n=a.get("layout"),o=0,s=0,u=null;n==="radial"?(o=2*Math.PI,s=Math.min(e.height,e.width)/2,u=ov(function(ht,Tt){return(ht.parentNode===Tt.parentNode?1:2)/ht.depth})):(o=e.width,s=e.height,u=ov());var h=a.getData().tree.root,v=h.children[0];if(v){eg(h),fg(v,av,u),h.hierNode.modifier=-v.hierNode.prelim,Cl(v,rg);var d=v,m=v,_=v;Cl(v,function(ht){var Tt=ht.getLayout().x;Tt<d.getLayout().x&&(d=ht),Tt>m.getLayout().x&&(m=ht),ht.depth>_.depth&&(_=ht)});var S=d===m?1:u(d,m)/2,A=S-d.getLayout().x,L=0,I=0,U=0,et=0;if(n==="radial")L=o/(m.getLayout().x+S+A),I=s/(_.depth-1||1),Cl(v,function(ht){U=(ht.getLayout().x+A)*L,et=(ht.depth-1)*I;var Tt=bl(U,et);ht.setLayout({x:Tt.x,y:Tt.y,rawX:U,rawY:et},!0)});else{var ft=a.getOrient();ft==="RL"||ft==="LR"?(I=s/(m.getLayout().x+S+A),L=o/(_.depth-1||1),Cl(v,function(ht){et=(ht.getLayout().x+A)*I,U=ft==="LR"?(ht.depth-1)*L:o-(ht.depth-1)*L,ht.setLayout({x:U,y:et},!0)})):(ft==="TB"||ft==="BT")&&(L=o/(m.getLayout().x+S+A),I=s/(_.depth-1||1),Cl(v,function(ht){U=(ht.getLayout().x+A)*L,et=ft==="TB"?(ht.depth-1)*I:s-(ht.depth-1)*I,ht.setLayout({x:U,y:et},!0)}))}}}function cg(a){a.eachSeriesByType("tree",function(r){var e=r.getData(),n=e.tree;n.eachNode(function(o){var s=o.getModel(),u=s.getModel("itemStyle").getItemStyle(),h=e.ensureUniqueItemVisual(o.dataIndex,"style");(0,g.l7)(h,u)})})}function gv(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"tree",query:r},function(n){var o=r.dataIndex,s=n.getData().tree,u=s.getNodeByDataIndex(o);u.isExpand=!u.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,e,n){e.eachComponent({mainType:"series",subType:"tree",query:r},function(o){var s=o.coordinateSystem,u=eh(s,r,void 0,n);o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom)})})}function vg(a){a.registerChartView(lg),a.registerSeriesModel(ug),a.registerLayout(hg),a.registerVisual(cg),gv(a)}var Nu=["treemapZoomToNode","treemapRender","treemapMove"];function dg(a){for(var r=0;r<Nu.length;r++)a.registerAction({type:Nu[r],update:"updateView"},g.ZT);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"treemap",query:e},o);function o(s,u){var h=["treemapZoomToNode","treemapRootToNode"],v=rs(e,h,s);if(v){var d=s.getViewRoot();d&&(e.direction=Fn(d,v.node)?"rollUp":"drillDown"),s.resetViewRoot(v.node)}}})}var Bu=z(35247);function mv(a){var r=a.getData(),e=r.tree,n={};e.eachNode(function(o){for(var s=o;s&&s.depth>1;)s=s.parentNode;var u=(0,Bu.i)(a.ecModel,s.name||s.dataIndex+"",n);o.setVisual("decal",u)})}var pg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventUsingHoverLayer=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};yv(o);var s=e.levels||[],u=this.designatedVisualItemStyle={},h=new zn.Z({itemStyle:u},this,n);s=e.levels=gg(s,n);var v=g.UI(s||[],function(_){return new zn.Z(_,h,n)},this),d=oh.createTree(o,this,m);function m(_){_.wrapMethod("getItemModel",function(S,A){var L=d.getNodeByDataIndex(A),I=L?v[L.depth]:null;return S.parentModel=I||h,S})}return d.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),h=s.getName(e);return(0,Un.TX)("nameValue",{name:h,value:u})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Ml(o,this),n.treePathInfo=n.treeAncestors,n},r.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},g.l7(this.layoutInfo,e)},r.prototype.mapIdToIndex=function(e){var n=this._idIndexMap;n||(n=this._idIndexMap=g.kW(),this._idIndexMapCount=0);var o=n.get(e);return o==null&&n.set(e,o=this._idIndexMapCount++),o},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){mv(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(yn.Z);function yv(a){var r=0;g.S6(a.children,function(n){yv(n);var o=n.value;g.kJ(o)&&(o=o[0]),r+=o});var e=a.value;g.kJ(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.kJ(a.value)?a.value[0]=e:a.value=e}function gg(a,r){var e=(0,We.kF)(r.get("color")),n=(0,We.kF)(r.get(["aria","decal","decals"]));if(e){a=a||[];var o,s;g.S6(a,function(h){var v=new zn.Z(h),d=v.get("color"),m=v.get("decal");(v.get(["itemStyle","color"])||d&&d!=="none")&&(o=!0),(v.get(["itemStyle","decal"])||m&&m!=="none")&&(s=!0)});var u=a[0]||(a[0]={});return o||(u.color=e.slice()),!s&&n&&(u.decal=n.slice()),a}}var mg=pg,yo=z(86273),Gs=8,sh=8,_o=5,yg=function(){function a(r){this.group=new Mr.Z,r.add(this.group)}return a.prototype.render=function(r,e,n,o){var s=r.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!s.get("show")||!n)){var h=s.getModel("itemStyle"),v=s.getModel("emphasis"),d=h.getModel("textStyle"),m=v.getModel(["itemStyle","textStyle"]),_={pos:{left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,_,d),this._renderContent(r,_,h,v,d,m,o),Hr.p$(u,_.pos,_.box)}},a.prototype._prepare=function(r,e,n){for(var o=r;o;o=o.parentNode){var s=(0,We.U5)(o.getModel().get("name"),""),u=n.getTextRect(s),h=Math.max(u.width+Gs*2,e.emptyItemWidth);e.totalWidth+=h+sh,e.renderList.push({node:o,text:s,width:h})}},a.prototype._renderContent=function(r,e,n,o,s,u,h){for(var v=0,d=e.emptyItemWidth,m=r.get(["breadcrumb","height"]),_=Hr.lq(e.pos,e.box),S=e.totalWidth,A=e.renderList,L=o.getModel("itemStyle").getItemStyle(),I=A.length-1;I>=0;I--){var U=A[I],et=U.node,ft=U.width,ht=U.text;S>_.width&&(S-=ft-d,ft=d,ht=null);var Tt=new fa.Z({shape:{points:_g(v,0,ft,m,I===A.length-1,I===0)},style:(0,g.ce)(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new he.ZP({style:(0,Ge.Lr)(s,{text:ht})}),textConfig:{position:"inside"},z2:Qe.zr*1e4,onclick:(0,g.WA)(h,et)});Tt.disableLabelAnimation=!0,Tt.getTextContent().ensureState("emphasis").style=(0,Ge.Lr)(u,{text:ht}),Tt.ensureState("emphasis").style=L,(0,Qe.k5)(Tt,o.get("focus"),o.get("blurScope"),o.get("disabled")),this.group.add(Tt),_v(Tt,r,et),v+=ft+sh}},a.prototype.remove=function(){this.group.removeAll()},a}();function _g(a,r,e,n,o,s){var u=[[o?a:a-_o,r],[a+e,r],[a+e,r+n],[o?a:a-_o,r+n]];return!s&&u.splice(2,0,[a+e+_o,r+n/2]),!o&&u.push([a,r+n/2]),u}function _v(a,r,e){(0,Er.A)(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Ml(e,r)}}var xv=yg,El=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(r,e,n,o,s){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:e,duration:n,delay:o,easing:s}),!0)},a.prototype.finished=function(r){return this._finishedCallback=r,this},a.prototype.start=function(){for(var r=this,e=this._storage.length,n=function(){e--,e<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},o=0,s=this._storage.length;o<s;o++){var u=this._storage[o];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:n,aborted:n})}return this},a}();function Pl(){return new El}var Sv=z(59036),lh=Mr.Z,Tv=Kr.Z,Dv=3,wv="label",Av="upperLabel",xg=Qe.zr*10,Sg=Qe.zr*2,Tg=Qe.zr*3,ns=(0,Sv.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Fu=function(a){var r=ns(a);return r.stroke=r.fill=r.lineWidth=null,r},Gu=(0,We.Yf)(),zu=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._state="ready",e._storage=Ll(),e}return r.prototype.render=function(e,n,o,s){var u=n.findComponents({mainType:"series",subType:"treemap",query:s});if(!((0,g.cq)(u,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=n;var h=["treemapZoomToNode","treemapRootToNode"],v=rs(s,h,e),d=s&&s.type,m=e.layoutInfo,_=!this._oldTree,S=this._storage,A=d==="treemapRootToNode"&&v&&S?{rootNodeGroup:S.nodeGroup[v.node.getRawIndex()],direction:s.direction}:null,L=this._giveContainerGroup(m),I=e.get("animation"),U=this._doRender(L,e,A);I&&!_&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(L,U,e,A):U.renderFinally(),this._resetController(o),this._renderBreadcrumb(e,o,v)}},r.prototype._giveContainerGroup=function(e){var n=this._containerGroup;return n||(n=this._containerGroup=new lh,this._initEvents(n),this.group.add(n)),n.x=e.x,n.y=e.y,n},r.prototype._doRender=function(e,n,o){var s=n.getData().tree,u=this._oldTree,h=Ll(),v=Ll(),d=this._storage,m=[];function _(U,et,ft,ht){return Ui(n,v,d,o,h,m,U,et,ft,ht)}A(s.root?[s.root]:[],u&&u.root?[u.root]:[],e,s===u||!u,0);var S=L(d);return this._oldTree=s,this._storage=v,{lastsForAnimation:h,willDeleteEls:S,renderFinally:I};function A(U,et,ft,ht,Tt){ht?(et=U,(0,g.S6)(U,function(It,zt){!It.isRemoved()&&Ct(zt,zt)})):new yo.Z(et,U,Et,Et).add(Ct).update(Ct).remove((0,g.WA)(Ct,null)).execute();function Et(It){return It.getId()}function Ct(It,zt){var Kt=It!=null?U[It]:null,Yt=zt!=null?et[zt]:null,ne=_(Kt,Yt,ft,Tt);ne&&A(Kt&&Kt.viewChildren||[],Yt&&Yt.viewChildren||[],ne,ht,Tt+1)}}function L(U){var et=Ll();return U&&(0,g.S6)(U,function(ft,ht){var Tt=et[ht];(0,g.S6)(ft,function(Et){Et&&(Tt.push(Et),Gu(Et).willDelete=!0)})}),et}function I(){(0,g.S6)(S,function(U){(0,g.S6)(U,function(et){et.parent&&et.parent.remove(et)})}),(0,g.S6)(m,function(U){U.invisible=!0,U.dirty()})}},r.prototype._doAnimation=function(e,n,o,s){var u=o.get("animationDurationUpdate"),h=o.get("animationEasing"),v=((0,g.mf)(u)?0:u)||0,d=((0,g.mf)(h)?null:h)||"cubicOut",m=Pl();(0,g.S6)(n.willDeleteEls,function(_,S){(0,g.S6)(_,function(A,L){if(!A.invisible){var I=A.parent,U,et=Gu(I);if(s&&s.direction==="drillDown")U=I===s.rootNodeGroup?{shape:{x:0,y:0,width:et.nodeWidth,height:et.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var ft=0,ht=0;et.willDelete||(ft=et.nodeWidth/2,ht=et.nodeHeight/2),U=S==="nodeGroup"?{x:ft,y:ht,style:{opacity:0}}:{shape:{x:ft,y:ht,width:0,height:0},style:{opacity:0}}}U&&m.add(A,U,v,0,d)}})}),(0,g.S6)(this._storage,function(_,S){(0,g.S6)(_,function(A,L){var I=n.lastsForAnimation[S][L],U={};I&&(A instanceof Mr.Z?I.oldX!=null&&(U.x=A.x,U.y=A.y,A.x=I.oldX,A.y=I.oldY):(I.oldShape&&(U.shape=(0,g.l7)({},A.shape),A.setShape(I.oldShape)),I.fadein?(A.setStyle("opacity",0),U.style={opacity:1}):A.style.opacity!==1&&(U.style={opacity:1})),m.add(A,U,v,0,d))})},this),this._state="animating",m.finished((0,g.ak)(function(){this._state="ready",n.renderFinally()},this)).start()},r.prototype._resetController=function(e){var n=this._controller;n||(n=this._controller=new xl(e.getZr()),n.enable(this.seriesModel.get("roam")),n.on("pan",(0,g.ak)(this._onPan,this)),n.on("zoom",(0,g.ak)(this._onZoom,this)));var o=new gn.Z(0,0,e.getWidth(),e.getHeight());n.setPointerChecker(function(s,u,h){return o.contain(u,h)})},r.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},r.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>Dv||Math.abs(e.dy)>Dv)){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},r.prototype._onZoom=function(e){var n=e.originX,o=e.originY;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var u=s.getLayout();if(!u)return;var h=new gn.Z(u.x,u.y,u.width,u.height),v=this.seriesModel.layoutInfo;n-=v.x,o-=v.y;var d=An.Ue();An.Iu(d,d,[-n,-o]),An.bA(d,d,[e.scale,e.scale]),An.Iu(d,d,[n,o]),h.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},r.prototype._initEvents=function(e){var n=this;e.on("click",function(o){if(n._state==="ready"){var s=n.seriesModel.get("nodeClick",!0);if(s){var u=n.findTarget(o.offsetX,o.offsetY);if(u){var h=u.node;if(h.getLayout().isLeafRoot)n._rootToNode(u);else if(s==="zoomToNode")n._zoomToNode(u);else if(s==="link"){var v=h.hostTree.data.getItemModel(h.dataIndex),d=v.get("link",!0),m=v.get("target",!0)||"blank";d&&(0,ii.MI)(d,m)}}}}},this)},r.prototype._renderBreadcrumb=function(e,n,o){var s=this;o||(o=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new xv(this.group))).render(e,n,o.node,function(u){s._state!=="animating"&&(Fn(e.getViewRoot(),u)?s._rootToNode({node:u}):s._zoomToNode({node:u}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Ll(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype.findTarget=function(e,n){var o,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(u){var h=this._storage.background[u.getRawIndex()];if(h){var v=h.transformCoordToLocal(e,n),d=h.shape;if(d.x<=v[0]&&v[0]<=d.x+d.width&&d.y<=v[1]&&v[1]<=d.y+d.height)o={node:u,offsetX:v[0],offsetY:v[1]};else return!1}},this),o},r.type="treemap",r}(Mn.Z);function Ll(){return{nodeGroup:[],background:[],content:[]}}function Ui(a,r,e,n,o,s,u,h,v,d){if(!u)return;var m=u.getLayout(),_=a.getData(),S=u.getModel();if(_.setItemGraphicEl(u.dataIndex,null),!m||!m.isInView)return;var A=m.width,L=m.height,I=m.borderWidth,U=m.invisible,et=u.getRawIndex(),ft=h&&h.getRawIndex(),ht=u.viewChildren,Tt=m.upperHeight,Et=ht&&ht.length,Ct=S.getModel("itemStyle"),It=S.getModel(["emphasis","itemStyle"]),zt=S.getModel(["blur","itemStyle"]),Kt=S.getModel(["select","itemStyle"]),Yt=Ct.get("borderRadius")||0,ne=Gr("nodeGroup",lh);if(!ne)return;if(v.add(ne),ne.x=m.x||0,ne.y=m.y||0,ne.markRedraw(),Gu(ne).nodeWidth=A,Gu(ne).nodeHeight=L,m.isAboveViewRoot)return ne;var oe=Gr("background",Tv,d,Sg);oe&&$e(ne,oe,Et&&m.upperLabelHeight);var ce=S.getModel("emphasis"),me=ce.get("focus"),_e=ce.get("blurScope"),Ce=ce.get("disabled"),ke=me==="ancestor"?u.getAncestorsIndices():me==="descendant"?u.getDescendantIndices():me;if(Et)(0,Qe.Av)(ne)&&(0,Qe.Nj)(ne,!1),oe&&((0,Qe.Nj)(oe,!Ce),_.setItemGraphicEl(u.dataIndex,oe),(0,Qe.Ib)(oe,ke,_e));else{var Oe=Gr("content",Tv,d,Tg);Oe&&yr(ne,Oe),oe.disableMorphing=!0,oe&&(0,Qe.Av)(oe)&&(0,Qe.Nj)(oe,!1),(0,Qe.Nj)(ne,!Ce),_.setItemGraphicEl(u.dataIndex,ne),(0,Qe.Ib)(ne,ke,_e)}return ne;function $e(on,zr,bn){var Sn=(0,Er.A)(zr);if(Sn.dataIndex=u.dataIndex,Sn.seriesIndex=a.seriesIndex,zr.setShape({x:0,y:0,width:A,height:L,r:Yt}),U)_r(zr);else{zr.invisible=!1;var In=u.getVisual("style"),Mi=In.stroke,Bi=Fu(Ct);Bi.fill=Mi;var Kn=ns(It);Kn.fill=It.get("borderColor");var Ti=ns(zt);Ti.fill=zt.get("borderColor");var mi=ns(Kt);if(mi.fill=Kt.get("borderColor"),bn){var Qi=A-2*I;Xr(zr,Mi,In.opacity,{x:I,y:0,width:Qi,height:Tt})}else zr.removeTextContent();zr.setStyle(Bi),zr.ensureState("emphasis").style=Kn,zr.ensureState("blur").style=Ti,zr.ensureState("select").style=mi,(0,Qe.MA)(zr)}on.add(zr)}function yr(on,zr){var bn=(0,Er.A)(zr);bn.dataIndex=u.dataIndex,bn.seriesIndex=a.seriesIndex;var Sn=Math.max(A-2*I,0),In=Math.max(L-2*I,0);if(zr.culling=!0,zr.setShape({x:I,y:I,width:Sn,height:In,r:Yt}),U)_r(zr);else{zr.invisible=!1;var Mi=u.getVisual("style"),Bi=Mi.fill,Kn=Fu(Ct);Kn.fill=Bi,Kn.decal=Mi.decal;var Ti=ns(It),mi=ns(zt),Qi=ns(Kt);Xr(zr,Bi,Mi.opacity,null),zr.setStyle(Kn),zr.ensureState("emphasis").style=Ti,zr.ensureState("blur").style=mi,zr.ensureState("select").style=Qi,(0,Qe.MA)(zr)}on.add(zr)}function _r(on){!on.invisible&&s.push(on)}function Xr(on,zr,bn,Sn){var In=S.getModel(Sn?Av:wv),Mi=(0,We.U5)(S.get("name"),null),Bi=In.getShallow("show");(0,Ge.ni)(on,(0,Ge.k3)(S,Sn?Av:wv),{defaultText:Bi?Mi:null,inheritColor:zr,defaultOpacity:bn,labelFetcher:a,labelDataIndex:u.dataIndex});var Kn=on.getTextContent();if(Kn){var Ti=Kn.style,mi=(0,g.MY)(Ti.padding||0);Sn&&(on.setTextConfig({layoutRect:Sn}),Kn.disableLabelLayout=!0),Kn.beforeUpdate=function(){var ys=Math.max((Sn?Sn.width:on.shape.width)-mi[1]-mi[3],0),ga=Math.max((Sn?Sn.height:on.shape.height)-mi[0]-mi[2],0);(Ti.width!==ys||Ti.height!==ga)&&Kn.setStyle({width:ys,height:ga})},Ti.truncateMinChar=2,Ti.lineOverflow="truncate",Wr(Ti,Sn,m);var Qi=Kn.getState("emphasis");Wr(Qi?Qi.style:null,Sn,m)}}function Wr(on,zr,bn){var Sn=on?on.text:null;if(!zr&&bn.isLeafRoot&&Sn!=null){var In=a.get("drillDownIcon",!0);on.text=In?In+" "+Sn:Sn}}function Gr(on,zr,bn,Sn){var In=ft!=null&&e[on][ft],Mi=o[on];return In?(e[on][ft]=null,ln(Mi,In)):U||(In=new zr,In instanceof Ia.ZP&&(In.z2=is(bn,Sn)),Ln(Mi,In)),r[on][et]=In}function ln(on,zr){var bn=on[et]={};zr instanceof lh?(bn.oldX=zr.x,bn.oldY=zr.y):bn.oldShape=(0,g.l7)({},zr.shape)}function Ln(on,zr){var bn=on[et]={},Sn=u.parentNode,In=zr instanceof Mr.Z;if(Sn&&(!n||n.direction==="drillDown")){var Mi=0,Bi=0,Kn=o.background[Sn.getRawIndex()];!n&&Kn&&Kn.oldShape&&(Mi=Kn.oldShape.width,Bi=Kn.oldShape.height),In?(bn.oldX=0,bn.oldY=Bi):bn.oldShape={x:Mi,y:Bi,width:0,height:0}}bn.fadein=!In}}function is(a,r){return a*xg+r}var bv=zu,Il=g.S6,Rl=g.Kn,Vu=-1,ku=function(){function a(r){var e=r.mappingMethod,n=r.type,o=this.option=g.d9(r);this.type=n,this.mappingMethod=e,this._normalizeData=Cv[e];var s=a.visualHandlers[n];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[e],e==="piecewise"?(Nl(o),Mv(o)):e==="category"?o.categories?Ol(o):Nl(o,!0):(g.hu(e!=="linear"||o.dataExtent),Nl(o))}return a.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},a.prototype.getNormalizer=function(){return g.ak(this._normalizeData,this)},a.listVisualTypes=function(){return g.XP(a.visualHandlers)},a.isValidType=function(r){return a.visualHandlers.hasOwnProperty(r)},a.eachVisual=function(r,e,n){g.Kn(r)?g.S6(r,e,n):e.call(n,r)},a.mapVisual=function(r,e,n){var o,s=g.kJ(r)?[]:g.Kn(r)?{}:(o=!0,null);return a.eachVisual(r,function(u,h){var v=e.call(n,u,h);o?s=v:s[h]=v}),s},a.retrieveVisuals=function(r){var e={},n;return r&&Il(a.visualHandlers,function(o,s){r.hasOwnProperty(s)&&(e[s]=r[s],n=!0)}),n?e:null},a.prepareVisualTypes=function(r){if(g.kJ(r))r=r.slice();else if(Rl(r)){var e=[];Il(r,function(n,o){e.push(o)}),r=e}else return[];return r.sort(function(n,o){return o==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),r},a.dependsOn=function(r,e){return e==="color"?!!(r&&r.indexOf(e)===0):r===e},a.findPieceIndex=function(r,e,n){for(var o,s=1/0,u=0,h=e.length;u<h;u++){var v=e[u].value;if(v!=null){if(v===r||g.HD(v)&&v===r+"")return u;n&&S(v,u)}}for(var u=0,h=e.length;u<h;u++){var d=e[u],m=d.interval,_=d.close;if(m){if(m[0]===-1/0){if(Bl(_[1],r,m[1]))return u}else if(m[1]===1/0){if(Bl(_[0],m[0],r))return u}else if(Bl(_[0],m[0],r)&&Bl(_[1],r,m[1]))return u;n&&S(m[0],u),n&&S(m[1],u)}}if(n)return r===1/0?e.length-1:r===-1/0?0:o;function S(A,L){var I=Math.abs(A-r);I<s&&(s=I,o=L)}},a.visualHandlers={color:{applyVisual:Vs("color"),getColorMapper:function(){var r=this.option;return g.ak(r.mappingMethod==="category"?function(e,n){return!n&&(e=this._normalizeData(e)),xo.call(this,e)}:function(e,n,o){var s=!!o;return!n&&(e=this._normalizeData(e)),o=Bn.fastLerp(e,r.parsedVisual,o),s?o:Bn.stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(r){return Bn.stringify(Bn.fastLerp(r,this.option.parsedVisual),"rgba")},category:xo,piecewise:function(r,e){var n=So.call(this,e);return n==null&&(n=Bn.stringify(Bn.fastLerp(r,this.option.parsedVisual),"rgba")),n},fixed:Ja}},colorHue:zs(function(r,e){return Bn.modifyHSL(r,e)}),colorSaturation:zs(function(r,e){return Bn.modifyHSL(r,null,e)}),colorLightness:zs(function(r,e){return Bn.modifyHSL(r,null,null,e)}),colorAlpha:zs(function(r,e){return Bn.modifyAlpha(r,e)}),decal:{applyVisual:Vs("decal"),_normalizedToVisual:{linear:null,category:xo,piecewise:null,fixed:null}},opacity:{applyVisual:Vs("opacity"),_normalizedToVisual:ks([0,1])},liftZ:{applyVisual:Vs("liftZ"),_normalizedToVisual:{linear:Ja,category:Ja,piecewise:Ja,fixed:Ja}},symbol:{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("symbol",o)},_normalizedToVisual:{linear:Uu,category:xo,piecewise:function(r,e){var n=So.call(this,e);return n==null&&(n=Uu.call(this,r)),n},fixed:Ja}},symbolSize:{applyVisual:Vs("symbolSize"),_normalizedToVisual:ks([0,1])}},a}();function Mv(a){var r=a.pieceList;a.hasSpecialVisual=!1,g.S6(r,function(e,n){e.originIndex=n,e.visual!=null&&(a.hasSpecialVisual=!0)})}function Ol(a){var r=a.categories,e=a.categoryMap={},n=a.visual;if(Il(r,function(u,h){e[u]=h}),!g.kJ(n)){var o=[];g.Kn(n)?Il(n,function(u,h){var v=e[h];o[v!=null?v:Vu]=u}):o[Vu]=n,n=uh(a,o)}for(var s=r.length-1;s>=0;s--)n[s]==null&&(delete e[r[s]],r.pop())}function Nl(a,r){var e=a.visual,n=[];g.Kn(e)?Il(e,function(s){n.push(s)}):e!=null&&n.push(e);var o={color:1,symbol:1};!r&&n.length===1&&!o.hasOwnProperty(a.type)&&(n[1]=n[0]),uh(a,n)}function zs(a){return{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("color",a(e("color"),o))},_normalizedToVisual:ks([0,1])}}function Uu(a){var r=this.option.visual;return r[Math.round((0,De.NU)(a,[0,1],[0,r.length-1],!0))]||{}}function Vs(a){return function(r,e,n){n(a,this.mapValueToVisual(r))}}function xo(a){var r=this.option.visual;return r[this.option.loop&&a!==Vu?a%r.length:a]}function Ja(){return this.option.visual[0]}function ks(a){return{linear:function(r){return(0,De.NU)(r,a,this.option.visual,!0)},category:xo,piecewise:function(r,e){var n=So.call(this,e);return n==null&&(n=(0,De.NU)(r,a,this.option.visual,!0)),n},fixed:Ja}}function So(a){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var n=ku.findPieceIndex(a,e),o=e[n];if(o&&o.visual)return o.visual[this.type]}}function uh(a,r){return a.visual=r,a.type==="color"&&(a.parsedVisual=g.UI(r,function(e){var n=Bn.parse(e);return n||[0,0,0,1]})),r}var Cv={linear:function(a){return(0,De.NU)(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var r=this.option.pieceList,e=ku.findPieceIndex(a,r,!0);if(e!=null)return(0,De.NU)(e,[0,r.length-1],[0,1],!0)},category:function(a){var r=this.option.categories?this.option.categoryMap[a]:a;return r==null?Vu:r},fixed:g.ZT};function Bl(a,r,e){return a?r<=e:r<e}var vi=ku,Dg="itemStyle",Ev=(0,We.Yf)(),di={seriesType:"treemap",reset:function(a){var r=a.getData().tree,e=r.root;e.isRemoved()||si(e,{},a.getViewRoot().getAncestors(),a)}};function si(a,r,e,n){var o=a.getModel(),s=a.getLayout(),u=a.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var h=o.getModel(Dg),v=Pv(h,r,n),d=u.ensureUniqueItemVisual(a.dataIndex,"style"),m=h.get("borderColor"),_=h.get("borderColorSaturation"),S;_!=null&&(S=fh(v),m=as(_,S)),d.stroke=m;var A=a.viewChildren;if(!A||!A.length)S=fh(v),d.fill=S;else{var L=ji(a,o,s,h,v,A);(0,g.S6)(A,function(I,U){if(I.depth>=e.length||I===e[I.depth]){var et=Zu(o,v,I,U,L,n);si(I,et,e,n)}})}}}function Pv(a,r,e){var n=(0,g.l7)({},r),o=e.designatedVisualItemStyle;return(0,g.S6)(["color","colorAlpha","colorSaturation"],function(s){o[s]=r[s];var u=a.get(s);o[s]=null,u!=null&&(n[s]=u)}),n}function fh(a){var r=Fl(a,"color");if(r){var e=Fl(a,"colorAlpha"),n=Fl(a,"colorSaturation");return n&&(r=(0,Bn.modifyHSL)(r,null,null,n)),e&&(r=(0,Bn.modifyAlpha)(r,e)),r}}function as(a,r){return r!=null?(0,Bn.modifyHSL)(r,null,null,a):null}function Fl(a,r){var e=a[r];if(e!=null&&e!=="none")return e}function ji(a,r,e,n,o,s){if(!(!s||!s.length)){var u=Gl(r,"color")||o.color!=null&&o.color!=="none"&&(Gl(r,"colorAlpha")||Gl(r,"colorSaturation"));if(u){var h=r.get("visualMin"),v=r.get("visualMax"),d=e.dataExtent.slice();h!=null&&h<d[0]&&(d[0]=h),v!=null&&v>d[1]&&(d[1]=v);var m=r.get("colorMappingBy"),_={type:u.name,dataExtent:d,visual:u.range};_.type==="color"&&(m==="index"||m==="id")?(_.mappingMethod="category",_.loop=!0):_.mappingMethod="linear";var S=new vi(_);return Ev(S).drColorMappingBy=m,S}}}function Gl(a,r){var e=a.get(r);return(0,g.kJ)(e)&&e.length?{name:r,range:e}:null}function Zu(a,r,e,n,o,s){var u=(0,g.l7)({},r);if(o){var h=o.type,v=h==="color"&&Ev(o).drColorMappingBy,d=v==="index"?n:v==="id"?s.mapIdToIndex(e.getId()):e.getValue(a.get("visualDimension"));u[h]=o.mapValueToVisual(d)}return u}var zl=Math.max,Wu=Math.min,Lv=g.Jv,hh=g.S6,Iv=["itemStyle","borderWidth"],Us=["itemStyle","gapWidth"],wg=["upperLabel","show"],ch=["upperLabel","height"],Rv={seriesType:"treemap",reset:function(a,r,e,n){var o=e.getWidth(),s=e.getHeight(),u=a.option,h=Hr.ME(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),v=u.size||[],d=(0,De.GM)(Lv(h.width,v[0]),o),m=(0,De.GM)(Lv(h.height,v[1]),s),_=n&&n.type,S=["treemapZoomToNode","treemapRootToNode"],A=rs(n,S,a),L=_==="treemapRender"||_==="treemapMove"?n.rootRect:null,I=a.getViewRoot(),U=dv(I);if(_!=="treemapMove"){var et=_==="treemapZoomToNode"?Gv(a,A,I,d,m):L?[L.width,L.height]:[d,m],ft=u.sort;ft&&ft!=="asc"&&ft!=="desc"&&(ft="desc");var ht={squareRatio:u.squareRatio,sort:ft,leafDepth:u.leafDepth};I.hostTree.clearLayouts();var Tt={x:0,y:0,width:et[0],height:et[1],area:et[0]*et[1]};I.setLayout(Tt),Ov(I,ht,!1,0),Tt=I.getLayout(),hh(U,function(Ct,It){var zt=(U[It+1]||I).getValue();Ct.setLayout(g.l7({dataExtent:[zt,zt],borderWidth:0,upperHeight:0},Tt))})}var Et=a.getData().tree.root;Et.setLayout(os(h,L,A),!0),a.setLayoutInfo(h),zv(Et,new gn.Z(-h.x,-h.y,o,s),U,I,0)}};function Ov(a,r,e,n){var o,s;if(!a.isRemoved()){var u=a.getLayout();o=u.width,s=u.height;var h=a.getModel(),v=h.get(Iv),d=h.get(Us)/2,m=dh(h),_=Math.max(v,m),S=v-d,A=_-d;a.setLayout({borderWidth:v,upperHeight:_,upperLabelHeight:m},!0),o=zl(o-2*S,0),s=zl(s-S-A,0);var L=o*s,I=Ag(a,h,L,r,e,n);if(I.length){var U={x:S,y:A,width:o,height:s},et=Wu(o,s),ft=1/0,ht=[];ht.area=0;for(var Tt=0,Et=I.length;Tt<Et;){var Ct=I[Tt];ht.push(Ct),ht.area+=Ct.getLayout().area;var It=Fv(ht,et,r.squareRatio);It<=ft?(Tt++,ft=It):(ht.area-=ht.pop().getLayout().area,vh(ht,et,U,d,!1),et=Wu(U.width,U.height),ht.length=ht.area=0,ft=1/0)}if(ht.length&&vh(ht,et,U,d,!0),!e){var zt=h.get("childrenVisibleMin");zt!=null&&L<zt&&(e=!0)}for(var Tt=0,Et=I.length;Tt<Et;Tt++)Ov(I[Tt],r,e,n+1)}}}function Ag(a,r,e,n,o,s){var u=a.children||[],h=n.sort;h!=="asc"&&h!=="desc"&&(h=null);var v=n.leafDepth!=null&&n.leafDepth<=s;if(o&&!v)return a.viewChildren=[];u=g.hX(u,function(A){return!A.isRemoved()}),Nv(u,h);var d=Bv(r,u,h);if(d.sum===0)return a.viewChildren=[];if(d.sum=py(r,e,d.sum,h,u),d.sum===0)return a.viewChildren=[];for(var m=0,_=u.length;m<_;m++){var S=u[m].getValue()/d.sum*e;u[m].setLayout({area:S})}return v&&(u.length&&a.setLayout({isLeafRoot:!0},!0),u.length=0),a.viewChildren=u,a.setLayout({dataExtent:d.dataExtent},!0),u}function py(a,r,e,n,o){if(!n)return e;for(var s=a.get("visibleMin"),u=o.length,h=u,v=u-1;v>=0;v--){var d=o[n==="asc"?u-v-1:v].getValue();d/e*r<s&&(h=v,e-=d)}return n==="asc"?o.splice(0,u-h):o.splice(h,u-h),e}function Nv(a,r){return r&&a.sort(function(e,n){var o=r==="asc"?e.getValue()-n.getValue():n.getValue()-e.getValue();return o===0?r==="asc"?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:o}),a}function Bv(a,r,e){for(var n=0,o=0,s=r.length;o<s;o++)n+=r[o].getValue();var u=a.get("visualDimension"),h;return!r||!r.length?h=[NaN,NaN]:u==="value"&&e?(h=[r[r.length-1].getValue(),r[0].getValue()],e==="asc"&&h.reverse()):(h=[1/0,-1/0],hh(r,function(v){var d=v.getValue(u);d<h[0]&&(h[0]=d),d>h[1]&&(h[1]=d)})),{sum:n,dataExtent:h}}function Fv(a,r,e){for(var n=0,o=1/0,s=0,u=void 0,h=a.length;s<h;s++)u=a[s].getLayout().area,u&&(u<o&&(o=u),u>n&&(n=u));var v=a.area*a.area,d=r*r*e;return v?zl(d*n/v,v/(d*o)):1/0}function vh(a,r,e,n,o){var s=r===e.width?0:1,u=1-s,h=["x","y"],v=["width","height"],d=e[h[s]],m=r?a.area/r:0;(o||m>e[v[u]])&&(m=e[v[u]]);for(var _=0,S=a.length;_<S;_++){var A=a[_],L={},I=m?A.getLayout().area/m:0,U=L[v[u]]=zl(m-2*n,0),et=e[h[s]]+e[v[s]]-d,ft=_===S-1||et<I?et:I,ht=L[v[s]]=zl(ft-2*n,0);L[h[u]]=e[h[u]]+Wu(n,U/2),L[h[s]]=d+Wu(n,ht/2),d+=ft,A.setLayout(L,!0)}e[h[u]]+=m,e[v[u]]-=m}function Gv(a,r,e,n,o){var s=(r||{}).node,u=[n,o];if(!s||s===e)return u;for(var h,v=n*o,d=v*a.option.zoomToNodeRatio;h=s.parentNode;){for(var m=0,_=h.children,S=0,A=_.length;S<A;S++)m+=_[S].getValue();var L=s.getValue();if(L===0)return u;d*=m/L;var I=h.getModel(),U=I.get(Iv),et=Math.max(U,dh(I));d+=4*U*U+(3*U+et)*Math.pow(d,.5),d>De.YM&&(d=De.YM),s=h}d<v&&(d=v);var ft=Math.pow(d/v,.5);return[n*ft,o*ft]}function os(a,r,e){if(r)return{x:r.x,y:r.y};var n={x:0,y:0};if(!e)return n;var o=e.node,s=o.getLayout();if(!s)return n;for(var u=[s.width/2,s.height/2],h=o;h;){var v=h.getLayout();u[0]+=v.x,u[1]+=v.y,h=h.parentNode}return{x:a.width/2-u[0],y:a.height/2-u[1]}}function zv(a,r,e,n,o){var s=a.getLayout(),u=e[o],h=u&&u===a;if(!(u&&!h||o===e.length&&a!==n)){a.setLayout({isInView:!0,invisible:!h&&!r.intersect(s),isAboveViewRoot:h},!0);var v=new gn.Z(r.x-s.x,r.y-s.y,r.width,r.height);hh(a.viewChildren||[],function(d){zv(d,v,e,n,o+1)})}}function dh(a){return a.get(wg)?a.get(ch):0}function va(a){a.registerSeriesModel(mg),a.registerChartView(bv),a.registerVisual(di),a.registerLayout(Rv),dg(a)}function Qa(a){var r=a.findComponents({mainType:"legend"});!r||!r.length||a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getGraph(),s=o.data,u=n.mapArray(n.getName);s.filterSelf(function(h){var v=s.getItemModel(h),d=v.getShallow("category");if(d!=null){(0,g.hj)(d)&&(d=u[d]);for(var m=0;m<r.length;m++)if(!r[m].isSelected(d))return!1}return!0})})}function Vv(a){var r={};a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getData(),s={};n.each(function(u){var h=n.getName(u);s["ec-"+h]=u;var v=n.getItemModel(u),d=v.getModel("itemStyle").getItemStyle();d.fill||(d.fill=e.getColorFromPalette(h,r)),n.setItemVisual(u,"style",d);for(var m=["symbol","symbolSize","symbolKeepAspect"],_=0;_<m.length;_++){var S=v.getShallow(m[_],!0);S!=null&&n.setItemVisual(u,m[_],S)}}),n.count()&&o.each(function(u){var h=o.getItemModel(u),v=h.getShallow("category");if(v!=null){(0,g.HD)(v)&&(v=s["ec-"+v]);var d=n.getItemVisual(v,"style"),m=o.ensureUniqueItemVisual(u,"style");(0,g.l7)(m,d);for(var _=["symbol","symbolSize","symbolKeepAspect"],S=0;S<_.length;S++)o.setItemVisual(u,_[S],n.getItemVisual(v,_[S]))}})})}function Vl(a){return a instanceof Array||(a=[a,a]),a}function kv(a){a.eachSeriesByType("graph",function(r){var e=r.getGraph(),n=r.getEdgeData(),o=Vl(r.get("edgeSymbol")),s=Vl(r.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",s&&s[0]),n.setVisual("toSymbolSize",s&&s[1]),n.setVisual("style",r.getModel("lineStyle").getLineStyle()),n.each(function(u){var h=n.getItemModel(u),v=e.getEdgeByIndex(u),d=Vl(h.getShallow("symbol",!0)),m=Vl(h.getShallow("symbolSize",!0)),_=h.getModel("lineStyle").getLineStyle(),S=n.ensureUniqueItemVisual(u,"style");switch((0,g.l7)(S,_),S.stroke){case"source":{var A=v.node1.getVisual("style");S.stroke=A&&A.fill;break}case"target":{var A=v.node2.getVisual("style");S.stroke=A&&A.fill;break}}d[0]&&v.setVisual("fromSymbol",d[0]),d[1]&&v.setVisual("toSymbol",d[1]),m[0]&&v.setVisual("fromSymbolSize",m[0]),m[1]&&v.setVisual("toSymbolSize",m[1])})})}var $a="-->",Hu=function(a){return a.get("autoCurveness")||null},Uv=function(a,r){var e=Hu(a),n=20,o=[];if(g.hj(e))n=e;else if(g.kJ(e)){a.__curvenessList=e;return}r>n&&(n=r);var s=n%2?n+2:n+3;o=[];for(var u=0;u<s;u++)o.push((u%2?u+1:u)/10*(u%2?-1:1));a.__curvenessList=o},kl=function(a,r,e){var n=[a.id,a.dataIndex].join("."),o=[r.id,r.dataIndex].join(".");return[e.uid,n,o].join($a)},Zv=function(a){var r=a.split($a);return[r[0],r[2],r[1]].join($a)},bg=function(a,r){var e=kl(a.node1,a.node2,r);return r.__edgeMap[e]},Xu=function(a,r){var e=ph(kl(a.node1,a.node2,r),r),n=ph(kl(a.node2,a.node1,r),r);return e+n},ph=function(a,r){var e=r.__edgeMap;return e[a]?e[a].length:0};function Mg(a){Hu(a)&&(a.__curvenessList=[],a.__edgeMap={},Uv(a))}function Cg(a,r,e,n){if(Hu(e)){var o=kl(a,r,e),s=e.__edgeMap,u=s[Zv(o)];s[o]&&!u?s[o].isForward=!0:u&&s[o]&&(u.isForward=!0,s[o].isForward=!1),s[o]=s[o]||[],s[o].push(n)}}function gh(a,r,e,n){var o=Hu(r),s=g.kJ(o);if(!o)return null;var u=bg(a,r);if(!u)return null;for(var h=-1,v=0;v<u.length;v++)if(u[v]===e){h=v;break}var d=Xu(a,r);Uv(r,d),a.lineStyle=a.lineStyle||{};var m=kl(a.node1,a.node2,r),_=r.__curvenessList,S=s||d%2?0:1;if(u.isForward)return _[S+h];var A=Zv(m),L=ph(A,r),I=_[h+L+S];return n?s?o&&o[0]===0?(L+S)%2?I:-I:((L%2?0:1)+S)%2?I:-I:(L+S)%2?I:-I:_[h+L+S]}function Wv(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view")){var e=a.getGraph();e.eachNode(function(n){var o=n.getModel();n.setLayout([+o.get("x"),+o.get("y")])}),mh(e,a)}}function mh(a,r){a.eachEdge(function(e,n){var o=g.R1(e.getModel().get(["lineStyle","curveness"]),-gh(e,r,n,!0),0),s=Pr.d9(e.node1.getLayout()),u=Pr.d9(e.node2.getLayout()),h=[s,u];+o&&h.push([(s[0]+u[0])/2-(s[1]-u[1])*o,(s[1]+u[1])/2-(u[0]-s[0])*o]),e.setLayout(h)})}function Eg(a,r){a.eachSeriesByType("graph",function(e){var n=e.get("layout"),o=e.coordinateSystem;if(o&&o.type!=="view"){var s=e.getData(),u=[];(0,g.S6)(o.dimensions,function(S){u=u.concat(s.mapDimensionsAll(S))});for(var h=0;h<s.count();h++){for(var v=[],d=!1,m=0;m<u.length;m++){var _=s.get(u[m],h);isNaN(_)||(d=!0),v.push(_)}d?s.setItemLayout(h,o.dataToPoint(v)):s.setItemLayout(h,[NaN,NaN])}mh(s.graph,e)}else(!n||n==="none")&&Wv(e)})}function Ul(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var e=a.option.nodeScaleRatio,n=r.scaleX,o=r.getZoom(),s=(o-1)*e+1;return s/n}function Zs(a){var r=a.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var Hv=Math.PI,yh=[];function _h(a,r,e,n){var o=a.coordinateSystem;if(!(o&&o.type!=="view")){var s=o.getBoundingRect(),u=a.getData(),h=u.graph,v=s.width/2+s.x,d=s.height/2+s.y,m=Math.min(s.width,s.height)/2,_=u.count();if(u.setLayout({cx:v,cy:d}),!!_){if(e){var S=o.pointToData(n),A=S[0],L=S[1],I=[A-v,L-d];Pr.Fv(I,I),Pr.bA(I,I,m),e.setLayout([v+I[0],d+I[1]],!0);var U=a.get(["circular","rotateLabel"]);Ku(e,U,v,d)}Pg[r](a,h,u,m,v,d,_),h.eachEdge(function(et,ft){var ht=g.R1(et.getModel().get(["lineStyle","curveness"]),gh(et,a,ft),0),Tt=Pr.d9(et.node1.getLayout()),Et=Pr.d9(et.node2.getLayout()),Ct,It=(Tt[0]+Et[0])/2,zt=(Tt[1]+Et[1])/2;+ht&&(ht*=3,Ct=[v*ht+It*(1-ht),d*ht+zt*(1-ht)]),et.setLayout([Tt,Et,Ct])})}}}var Pg={value:function(a,r,e,n,o,s,u){var h=0,v=e.getSum("value"),d=Math.PI*2/(v||u);r.eachNode(function(m){var _=m.getValue("value"),S=d*(v?_:1)/2;h+=S,m.setLayout([n*Math.cos(h)+o,n*Math.sin(h)+s]),h+=S})},symbolSize:function(a,r,e,n,o,s,u){var h=0;yh.length=u;var v=Ul(a);r.eachNode(function(_){var S=Zs(_);isNaN(S)&&(S=2),S<0&&(S=0),S*=v;var A=Math.asin(S/2/n);isNaN(A)&&(A=Hv/2),yh[_.dataIndex]=A,h+=A*2});var d=(2*Hv-h)/u/2,m=0;r.eachNode(function(_){var S=d+yh[_.dataIndex];m+=S,(!_.getLayout()||!_.getLayout().fixed)&&_.setLayout([n*Math.cos(m)+o,n*Math.sin(m)+s]),m+=S})}};function Ku(a,r,e,n){var o=a.getGraphicEl();if(o){var s=a.getModel(),u=s.get(["label","rotate"])||0,h=o.getSymbolPath();if(r){var v=a.getLayout(),d=Math.atan2(v[1]-n,v[0]-e);d<0&&(d=Math.PI*2+d);var m=v[0]<e;m&&(d=d-Math.PI);var _=m?"left":"right";h.setTextConfig({rotation:-d,position:_,origin:"center"});var S=h.ensureState("emphasis");g.l7(S.textConfig||(S.textConfig={}),{position:_})}else h.setTextConfig({rotation:u*=Math.PI/180})}}function Xv(a){a.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&_h(r,"symbolSize")})}var Ws=Pr.od;function Lg(a,r,e){for(var n=a,o=r,s=e.rect,u=s.width,h=s.height,v=[s.x+u/2,s.y+h/2],d=e.gravity==null?.1:e.gravity,m=0;m<n.length;m++){var _=n[m];_.p||(_.p=Pr.Ue(u*(Math.random()-.5)+v[0],h*(Math.random()-.5)+v[1])),_.pp=Pr.d9(_.p),_.edges=null}var S=e.friction==null?.6:e.friction,A=S,L,I;return{warmUp:function(){A=S*.8},setFixed:function(U){n[U].fixed=!0},setUnfixed:function(U){n[U].fixed=!1},beforeStep:function(U){L=U},afterStep:function(U){I=U},step:function(U){L&&L(n,o);for(var et=[],ft=n.length,ht=0;ht<o.length;ht++){var Tt=o[ht];if(!Tt.ignoreForceLayout){var Et=Tt.n1,Ct=Tt.n2;Pr.lu(et,Ct.p,Et.p);var It=Pr.Zh(et)-Tt.d,zt=Ct.w/(Et.w+Ct.w);isNaN(zt)&&(zt=0),Pr.Fv(et,et),!Et.fixed&&Ws(Et.p,Et.p,et,zt*It*A),!Ct.fixed&&Ws(Ct.p,Ct.p,et,-(1-zt)*It*A)}}for(var ht=0;ht<ft;ht++){var Kt=n[ht];Kt.fixed||(Pr.lu(et,v,Kt.p),Ws(Kt.p,Kt.p,et,d*A))}for(var ht=0;ht<ft;ht++)for(var Et=n[ht],Yt=ht+1;Yt<ft;Yt++){var Ct=n[Yt];Pr.lu(et,Ct.p,Et.p);var It=Pr.Zh(et);It===0&&(Pr.t8(et,Math.random()-.5,Math.random()-.5),It=1);var ne=(Et.rep+Ct.rep)/It/It;!Et.fixed&&Ws(Et.pp,Et.pp,et,ne),!Ct.fixed&&Ws(Ct.pp,Ct.pp,et,-ne)}for(var oe=[],ht=0;ht<ft;ht++){var Kt=n[ht];Kt.fixed||(Pr.lu(oe,Kt.p,Kt.pp),Ws(Kt.p,Kt.p,oe,A),Pr.JG(Kt.pp,Kt.p))}A=A*.992;var ce=A<.01;I&&I(n,o,ce),U&&U(ce)}}}function Ig(a){a.eachSeriesByType("graph",function(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view"))if(r.get("layout")==="force"){var n=r.preservedPoints||{},o=r.getGraph(),s=o.data,u=o.edgeData,h=r.getModel("force"),v=h.get("initLayout");r.preservedPoints?s.each(function(ht){var Tt=s.getId(ht);s.setItemLayout(ht,n[Tt]||[NaN,NaN])}):!v||v==="none"?Wv(r):v==="circular"&&_h(r,"value");var d=s.getDataExtent("value"),m=u.getDataExtent("value"),_=h.get("repulsion"),S=h.get("edgeLength"),A=g.kJ(_)?_:[_,_],L=g.kJ(S)?S:[S,S];L=[L[1],L[0]];var I=s.mapArray("value",function(ht,Tt){var Et=s.getItemLayout(Tt),Ct=(0,De.NU)(ht,d,A);return isNaN(Ct)&&(Ct=(A[0]+A[1])/2),{w:Ct,rep:Ct,fixed:s.getItemModel(Tt).get("fixed"),p:!Et||isNaN(Et[0])||isNaN(Et[1])?null:Et}}),U=u.mapArray("value",function(ht,Tt){var Et=o.getEdgeByIndex(Tt),Ct=(0,De.NU)(ht,m,L);isNaN(Ct)&&(Ct=(L[0]+L[1])/2);var It=Et.getModel(),zt=g.R1(Et.getModel().get(["lineStyle","curveness"]),-gh(Et,r,Tt,!0),0);return{n1:I[Et.node1.dataIndex],n2:I[Et.node2.dataIndex],d:Ct,curveness:zt,ignoreForceLayout:It.get("ignoreForceLayout")}}),et=e.getBoundingRect(),ft=Lg(I,U,{rect:et,gravity:h.get("gravity"),friction:h.get("friction")});ft.beforeStep(function(ht,Tt){for(var Et=0,Ct=ht.length;Et<Ct;Et++)ht[Et].fixed&&Pr.JG(ht[Et].p,o.getNodeByIndex(Et).getLayout())}),ft.afterStep(function(ht,Tt,Et){for(var Ct=0,It=ht.length;Ct<It;Ct++)ht[Ct].fixed||o.getNodeByIndex(Ct).setLayout(ht[Ct].p),n[s.getId(Ct)]=ht[Ct].p;for(var Ct=0,It=Tt.length;Ct<It;Ct++){var zt=Tt[Ct],Kt=o.getEdgeByIndex(Ct),Yt=zt.n1.p,ne=zt.n2.p,oe=Kt.getLayout();oe=oe?oe.slice():[],oe[0]=oe[0]||[],oe[1]=oe[1]||[],Pr.JG(oe[0],Yt),Pr.JG(oe[1],ne),+zt.curveness&&(oe[2]=[(Yt[0]+ne[0])/2-(Yt[1]-ne[1])*zt.curveness,(Yt[1]+ne[1])/2-(ne[0]-Yt[0])*zt.curveness]),Kt.setLayout(oe)}}),r.forceLayout=ft,r.preservedPoints=n,ft.step()}else r.forceLayout=null})}function Rg(a,r,e){var n=(0,g.l7)(a.getBoxLayoutParams(),{aspect:e});return(0,Hr.ME)(n,{width:r.getWidth(),height:r.getHeight()})}function Og(a,r){var e=[];return a.eachSeriesByType("graph",function(n){var o=n.get("coordinateSystem");if(!o||o==="view"){var s=n.getData(),u=s.mapArray(function(U){var et=s.getItemModel(U);return[+et.get("x"),+et.get("y")]}),h=[],v=[];ca.zk(u,h,v),v[0]-h[0]===0&&(v[0]+=1,h[0]-=1),v[1]-h[1]===0&&(v[1]+=1,h[1]-=1);var d=(v[0]-h[0])/(v[1]-h[1]),m=Rg(n,r,d);isNaN(d)&&(h=[m.x,m.y],v=[m.x+m.width,m.y+m.height]);var _=v[0]-h[0],S=v[1]-h[1],A=m.width,L=m.height,I=n.coordinateSystem=new Al;I.zoomLimit=n.get("scaleLimit"),I.setBoundingRect(h[0],h[1],_,S),I.setViewRect(m.x,m.y,A,L),I.setCenter(n.get("center"),r),I.setZoom(n.get("zoom")),e.push(I)}}),e}var Kv=zi.Z.prototype,Yu=iv.Z.prototype,ju=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),gy=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(ju);function Ra(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var Yv=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-line",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new ju},r.prototype.buildPath=function(e,n){Ra(n)?Kv.buildPath.call(this,e,n):Yu.buildPath.call(this,e,n)},r.prototype.pointAt=function(e){return Ra(this.shape)?Kv.pointAt.call(this,e):Yu.pointAt.call(this,e)},r.prototype.tangentAt=function(e){var n=this.shape,o=Ra(n)?[n.x2-n.x1,n.y2-n.y1]:Yu.tangentAt.call(this,e);return Pr.Fv(o,o)},r}(yt.ZP),Ng=Yv,Ju=["fromSymbol","toSymbol"];function Bg(a){return"_"+a+"Type"}function jv(a,r,e){var n=r.getItemVisual(e,a);if(!(!n||n==="none")){var o=r.getItemVisual(e,a+"Size"),s=r.getItemVisual(e,a+"Rotate"),u=r.getItemVisual(e,a+"Offset"),h=r.getItemVisual(e,a+"KeepAspect"),v=fn.zp(o),d=fn.Cq(u||0,v),m=fn.th(n,-v[0]/2+d[0],-v[1]/2+d[1],v[0],v[1],null,h);return m.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,m.name=a,m}}function To(a){var r=new Ng({name:"line",subPixelOptimize:!0});return ss(r.shape,a),r}function ss(a,r){a.x1=r[0][0],a.y1=r[0][1],a.x2=r[1][0],a.y2=r[1][1],a.percent=1;var e=r[2];e?(a.cpx1=e[0],a.cpy1=e[1]):(a.cpx1=NaN,a.cpy1=NaN)}var xh=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createLine(e,n,o),s}return r.prototype._createLine=function(e,n,o){var s=e.hostModel,u=e.getItemLayout(n),h=To(u);h.shape.percent=0,rr.KZ(h,{shape:{percent:1}},s,n),this.add(h),(0,g.S6)(Ju,function(v){var d=jv(v,e,n);this.add(d),this[Bg(v)]=e.getItemVisual(n,v)},this),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),h=e.getItemLayout(n),v={shape:{}};ss(v.shape,h),rr.D(u,v,s,n),(0,g.S6)(Ju,function(d){var m=e.getItemVisual(n,d),_=Bg(d);if(this[_]!==m){this.remove(this.childOfName(d));var S=jv(d,e,n);this.add(S)}this[_]=m},this),this._updateCommonStl(e,n,o)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),h=o&&o.emphasisLineStyle,v=o&&o.blurLineStyle,d=o&&o.selectLineStyle,m=o&&o.labelStatesModels,_=o&&o.emphasisDisabled,S=o&&o.focus,A=o&&o.blurScope;if(!o||e.hasItemOption){var L=e.getItemModel(n),I=L.getModel("emphasis");h=I.getModel("lineStyle").getLineStyle(),v=L.getModel(["blur","lineStyle"]).getLineStyle(),d=L.getModel(["select","lineStyle"]).getLineStyle(),_=I.get("disabled"),S=I.get("focus"),A=I.get("blurScope"),m=(0,Ge.k3)(L)}var U=e.getItemVisual(n,"style"),et=U.stroke;u.useStyle(U),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=h,u.ensureState("blur").style=v,u.ensureState("select").style=d,(0,g.S6)(Ju,function(Ct){var It=this.childOfName(Ct);if(It){It.setColor(et),It.style.opacity=U.opacity;for(var zt=0;zt<Qe.L1.length;zt++){var Kt=Qe.L1[zt],Yt=u.getState(Kt);if(Yt){var ne=Yt.style||{},oe=It.ensureState(Kt),ce=oe.style||(oe.style={});ne.stroke!=null&&(ce[It.__isEmptyBrush?"stroke":"fill"]=ne.stroke),ne.opacity!=null&&(ce.opacity=ne.opacity)}}It.markRedraw()}},this);var ft=s.getRawValue(n);(0,Ge.ni)(this,m,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(Ct,It){return s.getFormattedLabel(Ct,It,e.dataType)}},inheritColor:et||"#000",defaultOpacity:U.opacity,defaultText:(ft==null?e.getName(n):isFinite(ft)?(0,De.NM)(ft):ft)+""});var ht=this.getTextContent();if(ht){var Tt=m.normal;ht.__align=ht.style.align,ht.__verticalAlign=ht.style.verticalAlign,ht.__position=Tt.get("position")||"middle";var Et=Tt.get("distance");(0,g.kJ)(Et)||(Et=[Et,Et]),ht.__labelDistance=Et}this.setTextConfig({position:null,local:!0,inside:!1}),(0,Qe.k5)(this,S,A,_)},r.prototype.highlight=function(){(0,Qe.fD)(this)},r.prototype.downplay=function(){(0,Qe.Mh)(this)},r.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},r.prototype.setLinePoints=function(e){var n=this.childOfName("line");ss(n.shape,e),n.dirty()},r.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),s=e.getTextContent();if(!n&&!o&&(!s||s.ignore))return;for(var u=1,h=this.parent;h;)h.scaleX&&(u/=h.scaleX),h=h.parent;var v=e.childOfName("line");if(!this.__dirty&&!v.__dirty)return;var d=v.shape.percent,m=v.pointAt(0),_=v.pointAt(d),S=Pr.lu([],_,m);Pr.Fv(S,S);function A(Yt,ne){var oe=Yt.__specifiedRotation;if(oe==null){var ce=v.tangentAt(ne);Yt.attr("rotation",(ne===1?-1:1)*Math.PI/2-Math.atan2(ce[1],ce[0]))}else Yt.attr("rotation",oe)}if(n&&(n.setPosition(m),A(n,0),n.scaleX=n.scaleY=u*d,n.markRedraw()),o&&(o.setPosition(_),A(o,1),o.scaleX=o.scaleY=u*d,o.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var L=void 0,I=void 0,U=s.__labelDistance,et=U[0]*u,ft=U[1]*u,ht=d/2,Tt=v.tangentAt(ht),Et=[Tt[1],-Tt[0]],Ct=v.pointAt(ht);Et[1]>0&&(Et[0]=-Et[0],Et[1]=-Et[1]);var It=Tt[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var zt=-Math.atan2(Tt[1],Tt[0]);_[0]<m[0]&&(zt=Math.PI+zt),s.rotation=zt}var Kt=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Kt=-ft,I="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Kt=ft,I="top";break;default:Kt=0,I="middle"}switch(s.__position){case"end":s.x=S[0]*et+_[0],s.y=S[1]*ft+_[1],L=S[0]>.8?"left":S[0]<-.8?"right":"center",I=S[1]>.8?"top":S[1]<-.8?"bottom":"middle";break;case"start":s.x=-S[0]*et+m[0],s.y=-S[1]*ft+m[1],L=S[0]>.8?"right":S[0]<-.8?"left":"center",I=S[1]>.8?"bottom":S[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=et*It+m[0],s.y=m[1]+Kt,L=Tt[0]<0?"right":"left",s.originX=-et*It,s.originY=-Kt;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=Ct[0],s.y=Ct[1]+Kt,L="center",s.originY=-Kt;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-et*It+_[0],s.y=_[1]+Kt,L=Tt[0]>=0?"right":"left",s.originX=et*It,s.originY=-Kt;break}s.scaleX=s.scaleY=u,s.setStyle({verticalAlign:s.__verticalAlign||I,align:s.__align||L})}},r}(Mr.Z),Ri=xh,Hs=function(){function a(r){this.group=new Mr.Z,this._LineCtor=r||Ri}return a.prototype.updateData=function(r){var e=this;this._progressiveEls=null;var n=this,o=n.group,s=n._lineData;n._lineData=r,s||o.removeAll();var u=Zl(r);r.diff(s).add(function(h){e._doAdd(r,h,u)}).update(function(h,v){e._doUpdate(s,r,v,h,u)}).remove(function(h){o.remove(s.getItemGraphicEl(h))}).execute()},a.prototype.updateLayout=function(){var r=this._lineData;r&&r.eachItemGraphicEl(function(e,n){e.updateLayout(r,n)},this)},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Zl(r),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e){this._progressiveEls=[];function n(h){!h.isGroup&&!Sh(h)&&(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var o=r.start;o<r.end;o++){var s=e.getItemLayout(o);if(Th(s)){var u=new this._LineCtor(e,o,this._seriesScope);u.traverse(n),this.group.add(u),e.setItemGraphicEl(o,u),this._progressiveEls.push(u)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(r){mr.traverseElements(this._progressiveEls||this.group,r)},a.prototype._doAdd=function(r,e,n){var o=r.getItemLayout(e);if(Th(o)){var s=new this._LineCtor(r,e,n);r.setItemGraphicEl(e,s),this.group.add(s)}},a.prototype._doUpdate=function(r,e,n,o,s){var u=r.getItemGraphicEl(n);if(!Th(e.getItemLayout(o))){this.group.remove(u);return}u?u.updateData(e,o,s):u=new this._LineCtor(e,o,s),e.setItemGraphicEl(o,u),this.group.add(u)},a}();function Sh(a){return a.animators&&a.animators.length>0}function Zl(a){var r=a.hostModel,e=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:(0,Ge.k3)(r)}}function Xs(a){return isNaN(a[0])||isNaN(a[1])}function Th(a){return a&&!Xs(a[0])&&!Xs(a[1])}var Qu=Hs,Dh=[],wh=[],Ah=[],ls=_i.Zm,Wl=Pr.WU,Jv=Math.abs;function qa(a,r,e){for(var n=a[0],o=a[1],s=a[2],u=1/0,h,v=e*e,d=.1,m=.1;m<=.9;m+=.1){Dh[0]=ls(n[0],o[0],s[0],m),Dh[1]=ls(n[1],o[1],s[1],m);var _=Jv(Wl(Dh,r)-v);_<u&&(u=_,h=m)}for(var S=0;S<32;S++){var A=h+d;wh[0]=ls(n[0],o[0],s[0],h),wh[1]=ls(n[1],o[1],s[1],h),Ah[0]=ls(n[0],o[0],s[0],A),Ah[1]=ls(n[1],o[1],s[1],A);var _=Wl(wh,r)-v;if(Jv(_)<.01)break;var L=Wl(Ah,r)-v;d/=2,_<0?L>=0?h=h+d:h=h-d:L>=0?h=h-d:h=h+d}return h}function $u(a,r){var e=[],n=_i.Lx,o=[[],[],[]],s=[[],[]],u=[];r/=2,a.eachEdge(function(h,v){var d=h.getLayout(),m=h.getVisual("fromSymbol"),_=h.getVisual("toSymbol");d.__original||(d.__original=[Pr.d9(d[0]),Pr.d9(d[1])],d[2]&&d.__original.push(Pr.d9(d[2])));var S=d.__original;if(d[2]!=null){if(Pr.JG(o[0],S[0]),Pr.JG(o[1],S[2]),Pr.JG(o[2],S[1]),m&&m!=="none"){var A=Zs(h.node1),L=qa(o,S[0],A*r);n(o[0][0],o[1][0],o[2][0],L,e),o[0][0]=e[3],o[1][0]=e[4],n(o[0][1],o[1][1],o[2][1],L,e),o[0][1]=e[3],o[1][1]=e[4]}if(_&&_!=="none"){var A=Zs(h.node2),L=qa(o,S[1],A*r);n(o[0][0],o[1][0],o[2][0],L,e),o[1][0]=e[1],o[2][0]=e[2],n(o[0][1],o[1][1],o[2][1],L,e),o[1][1]=e[1],o[2][1]=e[2]}Pr.JG(d[0],o[0]),Pr.JG(d[1],o[2]),Pr.JG(d[2],o[1])}else{if(Pr.JG(s[0],S[0]),Pr.JG(s[1],S[1]),Pr.lu(u,s[1],s[0]),Pr.Fv(u,u),m&&m!=="none"){var A=Zs(h.node1);Pr.od(s[0],s[0],u,A*r)}if(_&&_!=="none"){var A=Zs(h.node2);Pr.od(s[1],s[1],u,-A*r)}Pr.JG(d[0],s[0]),Pr.JG(d[1],s[1])}})}function Qv(a){return a.type==="view"}var Fg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){var o=new Ma,s=new Qu,u=this.group;this._controller=new xl(n.getZr()),this._controllerHost={target:u},u.add(o.group),u.add(s.group),this._symbolDraw=o,this._lineDraw=s,this._firstRender=!0},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem;this._model=e;var h=this._symbolDraw,v=this._lineDraw,d=this.group;if(Qv(u)){var m={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?d.attr(m):rr.D(d,m,e)}$u(e.getGraph(),Ul(e));var _=e.getData();h.updateData(_);var S=e.getEdgeData();v.updateData(S),this._updateNodeAndLinkScale(),this._updateController(e,n,o),clearTimeout(this._layoutTimeout);var A=e.forceLayout,L=e.get(["force","layoutAnimation"]);A&&this._startForceLayoutIteration(A,L);var I=e.get("layout");_.graph.eachNode(function(ht){var Tt=ht.dataIndex,Et=ht.getGraphicEl(),Ct=ht.getModel();if(Et){Et.off("drag").off("dragend");var It=Ct.get("draggable");It&&Et.on("drag",function(Kt){switch(I){case"force":A.warmUp(),!s._layouting&&s._startForceLayoutIteration(A,L),A.setFixed(Tt),_.setItemLayout(Tt,[Et.x,Et.y]);break;case"circular":_.setItemLayout(Tt,[Et.x,Et.y]),ht.setLayout({fixed:!0},!0),_h(e,"symbolSize",ht,[Kt.offsetX,Kt.offsetY]),s.updateLayout(e);break;case"none":default:_.setItemLayout(Tt,[Et.x,Et.y]),mh(e.getGraph(),e),s.updateLayout(e);break}}).on("dragend",function(){A&&A.setUnfixed(Tt)}),Et.setDraggable(It,!!Ct.get("cursor"));var zt=Ct.get(["emphasis","focus"]);zt==="adjacency"&&((0,Er.A)(Et).focus=ht.getAdjacentDataIndices())}}),_.graph.eachEdge(function(ht){var Tt=ht.getGraphicEl(),Et=ht.getModel().get(["emphasis","focus"]);Tt&&Et==="adjacency"&&((0,Er.A)(Tt).focus={edge:[ht.dataIndex],node:[ht.node1.dataIndex,ht.node2.dataIndex]})});var U=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),et=_.getLayout("cx"),ft=_.getLayout("cy");_.graph.eachNode(function(ht){Ku(ht,U,et,ft)}),this._firstRender=!1},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(e,n){var o=this;(function s(){e.step(function(u){o.updateLayout(o._model),(o._layouting=!u)&&(n?o._layoutTimeout=setTimeout(s,16):s())})})()},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,h=this._controllerHost,v=this.group;if(u.setPointerChecker(function(d,m,_){var S=v.getBoundingRect();return S.applyTransform(v.transform),S.contain(m,_)&&!Su(d,o,e)}),!Qv(e.coordinateSystem)){u.disable();return}u.enable(e.get("roam")),h.zoomLimit=e.get("scaleLimit"),h.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Jo(h,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){zf(h,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(),$u(e.getGraph(),Ul(e)),s._lineDraw.updateLayout(),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var e=this._model,n=e.getData(),o=Ul(e);n.eachItemGraphicEl(function(s,u){s&&s.setSymbolScale(o)})},r.prototype.updateLayout=function(e){$u(e.getGraph(),Ul(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(Mn.Z),Gg=Fg,zg=z(91054),Ks=z(20666);function $v(a,r,e,n,o){for(var s=new zg.ZP(n),u=0;u<a.length;u++)s.addNode(g.Jv(a[u].id,a[u].name,u),u);for(var h=[],v=[],d=0,u=0;u<r.length;u++){var m=r[u],_=m.source,S=m.target;s.addEdge(_,S,d)&&(v.push(m),h.push(g.Jv((0,We.U5)(m.id,null),_+" > "+S)),d++)}var A=e.get("coordinateSystem"),L;if(A==="cartesian2d"||A==="polar")L=(0,un.Z)(a,e);else{var I=Ks.Z.get(A),U=I?I.dimensions||[]:[];g.cq(U,"value")<0&&U.concat(["value"]);var et=(0,ge.Z)(a,{coordDimensions:U,encodeDefine:e.getEncode()}).dimensions;L=new Ae.Z(et,e),L.initData(a)}var ft=new Ae.Z(["value"],e);return ft.initData(v,h),o&&o(L,ft),(0,cv.Z)({mainData:L,struct:s,structAttr:"graph",datas:{node:L,edge:ft},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var Vg=z(88990),kg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new fr(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(e){a.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,We.Cc)(e,"edgeLabel",["show"])},r.prototype.getInitialData=function(e,n){var o=e.edges||e.links||[],s=e.data||e.nodes||[],u=this;if(s&&o){Mg(this);var h=$v(s,o,this,!0,v);return g.S6(h.edges,function(d){Cg(d.node1,d.node2,this,d.dataIndex)},this),h.data}function v(d,m){d.wrapMethod("getItemModel",function(L){var I=u._categoriesModels,U=L.getShallow("category"),et=I[U];return et&&(et.parentModel=L.parentModel,L.parentModel=et),L});var _=zn.Z.prototype.getModel;function S(L,I){var U=_.call(this,L,I);return U.resolveParentPath=A,U}m.wrapMethod("getItemModel",function(L){return L.resolveParentPath=A,L.getModel=S,L});function A(L){if(L&&(L[0]==="label"||L[1]==="label")){var I=L.slice();return L[0]==="label"?I[0]="edgeLabel":L[1]==="label"&&(I[1]="edgeLabel"),I}return L}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(e,n,o){if(o==="edge"){var s=this.getData(),u=this.getDataParams(e,o),h=s.graph.getEdgeByIndex(e),v=s.getName(h.node1.dataIndex),d=s.getName(h.node2.dataIndex),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),(0,Un.TX)("nameValue",{name:m.join(" > "),value:u.value,noValue:u.value==null})}var _=(0,Vg.w)({series:this,dataIndex:e,multipleSeries:n});return _},r.prototype._updateCategoriesData=function(){var e=g.UI(this.option.categories||[],function(o){return o.value!=null?o:g.l7({value:0},o)}),n=new Ae.Z(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(o){return n.getItemModel(o)})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(yn.Z),Ug=kg,Zg={type:"graphRoam",event:"graphRoam",update:"none"};function Wg(a){a.registerChartView(Gg),a.registerSeriesModel(Ug),a.registerProcessor(Qa),a.registerVisual(Vv),a.registerVisual(kv),a.registerLayout(Eg),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,Xv),a.registerLayout(Ig),a.registerCoordinateSystem("graphView",{dimensions:Al.dimensions,create:Og}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},g.ZT),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},g.ZT),a.registerAction(Zg,function(r,e,n){e.eachComponent({mainType:"series",query:r},function(o){var s=o.coordinateSystem,u=eh(s,r,void 0,n);o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom)})})}var Hg=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),Xg=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="pointer",n}return r.prototype.getDefaultShape=function(){return new Hg},r.prototype.buildPath=function(e,n){var o=Math.cos,s=Math.sin,u=n.r,h=n.width,v=n.angle,d=n.x-o(v)*h*(h>=u/3?1:2),m=n.y-s(v)*h*(h>=u/3?1:2);v=n.angle-Math.PI/2,e.moveTo(d,m),e.lineTo(n.x+o(v)*h,n.y+s(v)*h),e.lineTo(n.x+o(n.angle)*u,n.y+s(n.angle)*u),e.lineTo(n.x-o(v)*h,n.y-s(v)*h),e.lineTo(d,m)},r}(yt.ZP),Kg=Xg;function bh(a,r){var e=a.get("center"),n=r.getWidth(),o=r.getHeight(),s=Math.min(n,o),u=(0,De.GM)(e[0],r.getWidth()),h=(0,De.GM)(e[1],r.getHeight()),v=(0,De.GM)(a.get("radius"),s/2);return{cx:u,cy:h,r:v}}function Hl(a,r){var e=a==null?"":a+"";return r&&((0,g.HD)(r)?e=r.replace("{value}",e):(0,g.mf)(r)&&(e=r(a))),e}var Yg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeAll();var s=e.get(["axisLine","lineStyle","color"]),u=bh(e,o);this._renderMain(e,n,o,s,u),this._data=e.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(e,n,o,s,u){var h=this.group,v=e.get("clockwise"),d=-e.get("startAngle")/180*Math.PI,m=-e.get("endAngle")/180*Math.PI,_=e.getModel("axisLine"),S=_.get("roundCap"),A=S?Li:Ei.C,L=_.get("show"),I=_.getModel("lineStyle"),U=I.get("width"),et=[d,m];(0,at.L)(et,!v),d=et[0],m=et[1];for(var ft=m-d,ht=d,Tt=[],Et=0;L&&Et<s.length;Et++){var Ct=Math.min(Math.max(s[Et][0],0),1);m=d+ft*Ct;var It=new A({shape:{startAngle:ht,endAngle:m,cx:u.cx,cy:u.cy,clockwise:v,r0:u.r-U,r:u.r},silent:!0});It.setStyle({fill:s[Et][1]}),It.setStyle(I.getLineStyle(["color","width"])),Tt.push(It),ht=m}Tt.reverse(),(0,g.S6)(Tt,function(Kt){return h.add(Kt)});var zt=function(Kt){if(Kt<=0)return s[0][1];var Yt;for(Yt=0;Yt<s.length;Yt++)if(s[Yt][0]>=Kt&&(Yt===0?0:s[Yt-1][0])<Kt)return s[Yt][1];return s[Yt-1][1]};this._renderTicks(e,n,o,zt,u,d,m,v,U),this._renderTitleAndDetail(e,n,o,zt,u),this._renderAnchor(e,u),this._renderPointer(e,n,o,zt,u,d,m,v,U)},r.prototype._renderTicks=function(e,n,o,s,u,h,v,d,m){for(var _=this.group,S=u.cx,A=u.cy,L=u.r,I=+e.get("min"),U=+e.get("max"),et=e.getModel("splitLine"),ft=e.getModel("axisTick"),ht=e.getModel("axisLabel"),Tt=e.get("splitNumber"),Et=ft.get("splitNumber"),Ct=(0,De.GM)(et.get("length"),L),It=(0,De.GM)(ft.get("length"),L),zt=h,Kt=(v-h)/Tt,Yt=Kt/Et,ne=et.getModel("lineStyle").getLineStyle(),oe=ft.getModel("lineStyle").getLineStyle(),ce=et.get("distance"),me,_e,Ce=0;Ce<=Tt;Ce++){if(me=Math.cos(zt),_e=Math.sin(zt),et.get("show")){var ke=ce?ce+m:m,Oe=new zi.Z({shape:{x1:me*(L-ke)+S,y1:_e*(L-ke)+A,x2:me*(L-Ct-ke)+S,y2:_e*(L-Ct-ke)+A},style:ne,silent:!0});ne.stroke==="auto"&&Oe.setStyle({stroke:s(Ce/Tt)}),_.add(Oe)}if(ht.get("show")){var ke=ht.get("distance")+ce,$e=Hl((0,De.NM)(Ce/Tt*(U-I)+I),ht.get("formatter")),yr=s(Ce/Tt),_r=me*(L-Ct-ke)+S,Xr=_e*(L-Ct-ke)+A,Wr=ht.get("rotate"),Gr=0;Wr==="radial"?(Gr=-zt+2*Math.PI,Gr>Math.PI/2&&(Gr+=Math.PI)):Wr==="tangential"?Gr=-zt-Math.PI/2:(0,g.hj)(Wr)&&(Gr=Wr*Math.PI/180),Gr===0?_.add(new he.ZP({style:(0,Ge.Lr)(ht,{text:$e,x:_r,y:Xr,verticalAlign:_e<-.8?"top":_e>.8?"bottom":"middle",align:me<-.4?"left":me>.4?"right":"center"},{inheritColor:yr}),silent:!0})):_.add(new he.ZP({style:(0,Ge.Lr)(ht,{text:$e,x:_r,y:Xr,verticalAlign:"middle",align:"center"},{inheritColor:yr}),silent:!0,originX:_r,originY:Xr,rotation:Gr}))}if(ft.get("show")&&Ce!==Tt){var ke=ft.get("distance");ke=ke?ke+m:m;for(var ln=0;ln<=Et;ln++){me=Math.cos(zt),_e=Math.sin(zt);var Ln=new zi.Z({shape:{x1:me*(L-ke)+S,y1:_e*(L-ke)+A,x2:me*(L-It-ke)+S,y2:_e*(L-It-ke)+A},silent:!0,style:oe});oe.stroke==="auto"&&Ln.setStyle({stroke:s((Ce+ln/Et)/Tt)}),_.add(Ln),zt+=Yt}zt-=Yt}else zt+=Kt}},r.prototype._renderPointer=function(e,n,o,s,u,h,v,d,m){var _=this.group,S=this._data,A=this._progressEls,L=[],I=e.get(["pointer","show"]),U=e.getModel("progress"),et=U.get("show"),ft=e.getData(),ht=ft.mapDimension("value"),Tt=+e.get("min"),Et=+e.get("max"),Ct=[Tt,Et],It=[h,v];function zt(Yt,ne){var oe=ft.getItemModel(Yt),ce=oe.getModel("pointer"),me=(0,De.GM)(ce.get("width"),u.r),_e=(0,De.GM)(ce.get("length"),u.r),Ce=e.get(["pointer","icon"]),ke=ce.get("offsetCenter"),Oe=(0,De.GM)(ke[0],u.r),$e=(0,De.GM)(ke[1],u.r),yr=ce.get("keepAspect"),_r;return Ce?_r=(0,fn.th)(Ce,Oe-me/2,$e-_e,me,_e,null,yr):_r=new Kg({shape:{angle:-Math.PI/2,width:me,r:_e,x:Oe,y:$e}}),_r.rotation=-(ne+Math.PI/2),_r.x=u.cx,_r.y=u.cy,_r}function Kt(Yt,ne){var oe=U.get("roundCap"),ce=oe?Li:Ei.C,me=U.get("overlap"),_e=me?U.get("width"):m/ft.count(),Ce=me?u.r-_e:u.r-(Yt+1)*_e,ke=me?u.r:u.r-Yt*_e,Oe=new ce({shape:{startAngle:h,endAngle:ne,cx:u.cx,cy:u.cy,clockwise:d,r0:Ce,r:ke}});return me&&(Oe.z2=Et-ft.get(ht,Yt)%Et),Oe}(et||I)&&(ft.diff(S).add(function(Yt){var ne=ft.get(ht,Yt);if(I){var oe=zt(Yt,h);rr.KZ(oe,{rotation:-((isNaN(+ne)?It[0]:(0,De.NU)(ne,Ct,It,!0))+Math.PI/2)},e),_.add(oe),ft.setItemGraphicEl(Yt,oe)}if(et){var ce=Kt(Yt,h),me=U.get("clip");rr.KZ(ce,{shape:{endAngle:(0,De.NU)(ne,Ct,It,me)}},e),_.add(ce),(0,Er.Q)(e.seriesIndex,ft.dataType,Yt,ce),L[Yt]=ce}}).update(function(Yt,ne){var oe=ft.get(ht,Yt);if(I){var ce=S.getItemGraphicEl(ne),me=ce?ce.rotation:h,_e=zt(Yt,me);_e.rotation=me,rr.D(_e,{rotation:-((isNaN(+oe)?It[0]:(0,De.NU)(oe,Ct,It,!0))+Math.PI/2)},e),_.add(_e),ft.setItemGraphicEl(Yt,_e)}if(et){var Ce=A[ne],ke=Ce?Ce.shape.endAngle:h,Oe=Kt(Yt,ke),$e=U.get("clip");rr.D(Oe,{shape:{endAngle:(0,De.NU)(oe,Ct,It,$e)}},e),_.add(Oe),(0,Er.Q)(e.seriesIndex,ft.dataType,Yt,Oe),L[Yt]=Oe}}).execute(),ft.each(function(Yt){var ne=ft.getItemModel(Yt),oe=ne.getModel("emphasis"),ce=oe.get("focus"),me=oe.get("blurScope"),_e=oe.get("disabled");if(I){var Ce=ft.getItemGraphicEl(Yt),ke=ft.getItemVisual(Yt,"style"),Oe=ke.fill;if(Ce instanceof gt.ZP){var $e=Ce.style;Ce.useStyle((0,g.l7)({image:$e.image,x:$e.x,y:$e.y,width:$e.width,height:$e.height},ke))}else Ce.useStyle(ke),Ce.type!=="pointer"&&Ce.setColor(Oe);Ce.setStyle(ne.getModel(["pointer","itemStyle"]).getItemStyle()),Ce.style.fill==="auto"&&Ce.setStyle("fill",s((0,De.NU)(ft.get(ht,Yt),Ct,[0,1],!0))),Ce.z2EmphasisLift=0,(0,Qe.WO)(Ce,ne),(0,Qe.k5)(Ce,ce,me,_e)}if(et){var yr=L[Yt];yr.useStyle(ft.getItemVisual(Yt,"style")),yr.setStyle(ne.getModel(["progress","itemStyle"]).getItemStyle()),yr.z2EmphasisLift=0,(0,Qe.WO)(yr,ne),(0,Qe.k5)(yr,ce,me,_e)}}),this._progressEls=L)},r.prototype._renderAnchor=function(e,n){var o=e.getModel("anchor"),s=o.get("show");if(s){var u=o.get("size"),h=o.get("icon"),v=o.get("offsetCenter"),d=o.get("keepAspect"),m=(0,fn.th)(h,n.cx-u/2+(0,De.GM)(v[0],n.r),n.cy-u/2+(0,De.GM)(v[1],n.r),u,u,null,d);m.z2=o.get("showAbove")?1:0,m.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(m)}},r.prototype._renderTitleAndDetail=function(e,n,o,s,u){var h=this,v=e.getData(),d=v.mapDimension("value"),m=+e.get("min"),_=+e.get("max"),S=new Mr.Z,A=[],L=[],I=e.isAnimationEnabled(),U=e.get(["pointer","showAbove"]);v.diff(this._data).add(function(et){A[et]=new he.ZP({silent:!0}),L[et]=new he.ZP({silent:!0})}).update(function(et,ft){A[et]=h._titleEls[ft],L[et]=h._detailEls[ft]}).execute(),v.each(function(et){var ft=v.getItemModel(et),ht=v.get(d,et),Tt=new Mr.Z,Et=s((0,De.NU)(ht,[m,_],[0,1],!0)),Ct=ft.getModel("title");if(Ct.get("show")){var It=Ct.get("offsetCenter"),zt=u.cx+(0,De.GM)(It[0],u.r),Kt=u.cy+(0,De.GM)(It[1],u.r),Yt=A[et];Yt.attr({z2:U?0:2,style:(0,Ge.Lr)(Ct,{x:zt,y:Kt,text:v.getName(et),align:"center",verticalAlign:"middle"},{inheritColor:Et})}),Tt.add(Yt)}var ne=ft.getModel("detail");if(ne.get("show")){var oe=ne.get("offsetCenter"),ce=u.cx+(0,De.GM)(oe[0],u.r),me=u.cy+(0,De.GM)(oe[1],u.r),_e=(0,De.GM)(ne.get("width"),u.r),Ce=(0,De.GM)(ne.get("height"),u.r),ke=e.get(["progress","show"])?v.getItemVisual(et,"style").fill:Et,Yt=L[et],Oe=ne.get("formatter");Yt.attr({z2:U?0:2,style:(0,Ge.Lr)(ne,{x:ce,y:me,text:Hl(ht,Oe),width:isNaN(_e)?null:_e,height:isNaN(Ce)?null:Ce,align:"center",verticalAlign:"middle"},{inheritColor:ke})}),(0,Ge.pe)(Yt,{normal:ne},ht,function(yr){return Hl(yr,Oe)}),I&&(0,Ge.tD)(Yt,et,v,e,{getFormattedLabel:function(yr,_r,Xr,Wr,Gr,ln){return Hl(ln?ln.interpolatedValue:ht,Oe)}}),Tt.add(Yt)}S.add(Tt)}),this.group.add(S),this._titleEls=A,this._detailEls=L},r.type="gauge",r}(Mn.Z),jg=Yg,Jg=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="itemStyle",e}return r.prototype.getInitialData=function(e,n){return Re(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(yn.Z),Qg=Jg;function Mh(a){a.registerChartView(jg),a.registerSeriesModel(Qg)}var $g=["itemStyle","opacity"],Ch=function(a){(0,Wt.ZT)(r,a);function r(e,n){var o=a.call(this)||this,s=o,u=new Rt.Z,h=new he.ZP;return s.setTextContent(h),o.setTextGuideLine(u),o.updateData(e,n,!0),o}return r.prototype.updateData=function(e,n,o){var s=this,u=e.hostModel,h=e.getItemModel(n),v=e.getItemLayout(n),d=h.getModel("emphasis"),m=h.get($g);m=m==null?1:m,o||(0,rr.Zi)(s),s.useStyle(e.getItemVisual(n,"style")),s.style.lineJoin="round",o?(s.setShape({points:v.points}),s.style.opacity=0,rr.KZ(s,{style:{opacity:m}},u,n)):rr.D(s,{style:{opacity:m},shape:{points:v.points}},u,n),(0,Qe.WO)(s,h),this._updateLabel(e,n),(0,Qe.k5)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n){var o=this,s=this.getTextGuideLine(),u=o.getTextContent(),h=e.hostModel,v=e.getItemModel(n),d=e.getItemLayout(n),m=d.label,_=e.getItemVisual(n,"style"),S=_.fill;(0,Ge.ni)(u,(0,Ge.k3)(v),{labelFetcher:e.hostModel,labelDataIndex:n,defaultOpacity:_.opacity,defaultText:e.getName(n)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),o.setTextConfig({local:!0,inside:!!m.inside,insideStroke:S,outsideFill:S});var A=m.linePoints;s.setShape({points:A}),o.textGuideLineConfig={anchor:A?new Ft.Z(A[0][0],A[0][1]):null},rr.D(u,{style:{x:m.x,y:m.y}},h,n),u.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),(0,Lt.Iu)(o,(0,Lt.$x)(v),{stroke:S})},r}(fa.Z),Ys=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._data,h=this.group;s.diff(u).add(function(v){var d=new Ch(s,v);s.setItemGraphicEl(v,d),h.add(d)}).update(function(v,d){var m=u.getItemGraphicEl(d);m.updateData(s,v),h.add(m),s.setItemGraphicEl(v,m)}).remove(function(v){var d=u.getItemGraphicEl(v);rr.XD(d,e,v)}).execute(),this._data=s},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(Mn.Z),qg=Ys,Xl=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new fr(g.ak(this.getData,this),g.ak(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.getInitialData=function(e,n){return Re(this,{coordDimensions:["value"],encodeDefaulter:g.WA(Ye.Ss,this)})},r.prototype._defaultLabelLine=function(e){(0,We.Cc)(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.prototype.getDataParams=function(e){var n=this.getData(),o=a.prototype.getDataParams.call(this,e),s=n.mapDimension("value"),u=n.getSum(s);return o.percent=u?+(n.get(s,e)/u*100).toFixed(2):0,o.$vars.push("percent"),o},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(yn.Z),qu=Xl;function qv(a,r){return Hr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function t0(a,r){for(var e=a.mapDimension("value"),n=a.mapArray(e,function(v){return v}),o=[],s=r==="ascending",u=0,h=a.count();u<h;u++)o[u]=u;return(0,g.mf)(r)?o.sort(r):r!=="none"&&o.sort(function(v,d){return s?n[v]-n[d]:n[d]-n[v]}),o}function Zn(a){var r=a.hostModel,e=r.get("orient");a.each(function(n){var o=a.getItemModel(n),s=o.getModel("label"),u=s.get("position"),h=o.getModel("labelLine"),v=a.getItemLayout(n),d=v.points,m=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",_,S,A,L;if(m)u==="insideLeft"?(S=(d[0][0]+d[3][0])/2+5,A=(d[0][1]+d[3][1])/2,_="left"):u==="insideRight"?(S=(d[1][0]+d[2][0])/2-5,A=(d[1][1]+d[2][1])/2,_="right"):(S=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,A=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,_="center"),L=[[S,A],[S,A]];else{var I=void 0,U=void 0,et=void 0,ft=void 0,ht=h.get("length");u==="left"?(I=(d[3][0]+d[0][0])/2,U=(d[3][1]+d[0][1])/2,et=I-ht,S=et-5,_="right"):u==="right"?(I=(d[1][0]+d[2][0])/2,U=(d[1][1]+d[2][1])/2,et=I+ht,S=et+5,_="left"):u==="top"?(I=(d[3][0]+d[0][0])/2,U=(d[3][1]+d[0][1])/2,ft=U-ht,A=ft-5,_="center"):u==="bottom"?(I=(d[1][0]+d[2][0])/2,U=(d[1][1]+d[2][1])/2,ft=U+ht,A=ft+5,_="center"):u==="rightTop"?(I=e==="horizontal"?d[3][0]:d[1][0],U=e==="horizontal"?d[3][1]:d[1][1],e==="horizontal"?(ft=U-ht,A=ft-5,_="center"):(et=I+ht,S=et+5,_="top")):u==="rightBottom"?(I=d[2][0],U=d[2][1],e==="horizontal"?(ft=U+ht,A=ft+5,_="center"):(et=I+ht,S=et+5,_="bottom")):u==="leftTop"?(I=d[0][0],U=e==="horizontal"?d[0][1]:d[1][1],e==="horizontal"?(ft=U-ht,A=ft-5,_="center"):(et=I-ht,S=et-5,_="right")):u==="leftBottom"?(I=e==="horizontal"?d[1][0]:d[3][0],U=e==="horizontal"?d[1][1]:d[2][1],e==="horizontal"?(ft=U+ht,A=ft+5,_="center"):(et=I-ht,S=et-5,_="right")):(I=(d[1][0]+d[2][0])/2,U=(d[1][1]+d[2][1])/2,e==="horizontal"?(ft=U+ht,A=ft+5,_="center"):(et=I+ht,S=et+5,_="left")),e==="horizontal"?(et=I,S=et):(ft=U,A=ft),L=[[I,U],[et,ft]]}v.label={linePoints:L,x:S,y:A,verticalAlign:"middle",textAlign:_,inside:m}})}function e0(a,r){a.eachSeriesByType("funnel",function(e){var n=e.getData(),o=n.mapDimension("value"),s=e.get("sort"),u=qv(e,r),h=e.get("orient"),v=u.width,d=u.height,m=t0(n,s),_=u.x,S=u.y,A=h==="horizontal"?[(0,De.GM)(e.get("minSize"),d),(0,De.GM)(e.get("maxSize"),d)]:[(0,De.GM)(e.get("minSize"),v),(0,De.GM)(e.get("maxSize"),v)],L=n.getDataExtent(o),I=e.get("min"),U=e.get("max");I==null&&(I=Math.min(L[0],0)),U==null&&(U=L[1]);var et=e.get("funnelAlign"),ft=e.get("gap"),ht=h==="horizontal"?v:d,Tt=(ht-ft*(n.count()-1))/n.count(),Et=function(me,_e){if(h==="horizontal"){var Ce=n.get(o,me)||0,ke=(0,De.NU)(Ce,[I,U],A,!0),Oe=void 0;switch(et){case"top":Oe=S;break;case"center":Oe=S+(d-ke)/2;break;case"bottom":Oe=S+(d-ke);break}return[[_e,Oe],[_e,Oe+ke]]}var $e=n.get(o,me)||0,yr=(0,De.NU)($e,[I,U],A,!0),_r;switch(et){case"left":_r=_;break;case"center":_r=_+(v-yr)/2;break;case"right":_r=_+v-yr;break}return[[_r,_e],[_r+yr,_e]]};s==="ascending"&&(Tt=-Tt,ft=-ft,h==="horizontal"?_+=v:S+=d,m=m.reverse());for(var Ct=0;Ct<m.length;Ct++){var It=m[Ct],zt=m[Ct+1],Kt=n.getItemModel(It);if(h==="horizontal"){var Yt=Kt.get(["itemStyle","width"]);Yt==null?Yt=Tt:(Yt=(0,De.GM)(Yt,v),s==="ascending"&&(Yt=-Yt));var ne=Et(It,_),oe=Et(zt,_+Yt);_+=Yt+ft,n.setItemLayout(It,{points:ne.concat(oe.slice().reverse())})}else{var ce=Kt.get(["itemStyle","height"]);ce==null?ce=Tt:(ce=(0,De.GM)(ce,d),s==="ascending"&&(ce=-ce));var ne=Et(It,S),oe=Et(zt,S+ce);S+=ce+ft,n.setItemLayout(It,{points:ne.concat(oe.slice().reverse())})}}Zn(n)})}function Eh(a){a.registerChartView(qg),a.registerSeriesModel(qu),a.registerLayout(e0),a.registerProcessor(Xn("funnel"))}var r0=.3,n0=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._dataGroup=new Mr.Z,e._initialized=!1,e}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._dataGroup,h=e.getData(),v=this._data,d=e.coordinateSystem,m=d.dimensions,_=rd(e);h.diff(v).add(S).update(A).remove(L).execute();function S(U){var et=ed(h,u,U,m,d);Ph(et,h,U,_)}function A(U,et){var ft=v.getItemGraphicEl(et),ht=td(h,U,m,d);h.setItemGraphicEl(U,ft),rr.D(ft,{shape:{points:ht}},e,U),(0,rr.Zi)(ft),Ph(ft,h,U,_)}function L(U){var et=v.getItemGraphicEl(U);u.remove(et)}if(!this._initialized){this._initialized=!0;var I=i0(d,e,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(I)}this._data=h},r.prototype.incrementalPrepareRender=function(e,n,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(e,n,o){for(var s=n.getData(),u=n.coordinateSystem,h=u.dimensions,v=rd(n),d=this._progressiveEls=[],m=e.start;m<e.end;m++){var _=ed(s,this._dataGroup,m,h,u);_.incremental=!0,Ph(_,s,m,v),d.push(_)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(Mn.Z);function i0(a,r,e){var n=a.model,o=a.getRect(),s=new Kr.Z({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),u=n.get("layout")==="horizontal"?"width":"height";return s.setShape(u,0),rr.KZ(s,{shape:{width:o.width,height:o.height}},r,e),s}function td(a,r,e,n){for(var o=[],s=0;s<e.length;s++){var u=e[s],h=a.get(a.mapDimension(u),r);a0(h,n.getAxis(u).type)||o.push(n.dataToPoint(h,u))}return o}function ed(a,r,e,n,o){var s=td(a,e,n,o),u=new Rt.Z({shape:{points:s},z2:10});return r.add(u),a.setItemGraphicEl(e,u),u}function rd(a){var r=a.get("smooth",!0);return r===!0&&(r=r0),r=(0,De.FK)(r),(0,g.Bu)(r)&&(r=0),{smooth:r}}function Ph(a,r,e,n){a.useStyle(r.getItemVisual(e,"style")),a.style.fill=null,a.setShape("smooth",n.smooth);var o=r.getItemModel(e),s=o.getModel("emphasis");(0,Qe.WO)(a,o,"lineStyle"),(0,Qe.k5)(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function a0(a,r){return r==="category"?a==null:a==null||isNaN(a)}var o0=n0,s0=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this,{useEncodeDefaulter:(0,g.ak)(l0,null,this)})},r.prototype.getRawIndicesByActiveState=function(e){var n=this.coordinateSystem,o=this.getData(),s=[];return n.eachActiveState(o,function(u,h){e===u&&s.push(o.getRawIndex(h))}),s},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(yn.Z);function l0(a){var r=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(r){var e={};return(0,g.S6)(r.dimensions,function(n){var o=Lh(n);e[n]=o}),e}}function Lh(a){return+a.replace("dim","")}var u0=s0,f0=["lineStyle","opacity"],Ih={seriesType:"parallel",reset:function(a,r){var e=a.coordinateSystem,n={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(o,s){e.eachActiveState(s,function(u,h){var v=n[u];if(u==="normal"&&s.hasItemOption){var d=s.getItemModel(h).get(f0,!0);d!=null&&(v=d)}var m=s.ensureUniqueItemVisual(h,"style");m.opacity=v},o.start,o.end)}}}},nd=Ih;function id(a){h0(a),c0(a)}function h0(a){if(!a.parallel){var r=!1;g.S6(a.series,function(e){e&&e.type==="parallel"&&(r=!0)}),r&&(a.parallel=[{}])}}function c0(a){var r=We.kF(a.parallelAxis);g.S6(r,function(e){if(g.Kn(e)){var n=e.parallelIndex||0,o=We.kF(a.parallel)[n];o&&o.parallelAxisDefault&&g.TS(e,o.parallelAxisDefault,!1)}})}var Rh=5,v0=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this._model=e,this._api=o,this._handlers||(this._handlers={},(0,g.S6)(d0,function(s,u){o.getZr().on(u,this._handlers[u]=(0,g.ak)(s,this))},this)),(0,_n.T9)(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(e,n){(0,_n.ZH)(this,"_throttledDispatchExpand"),(0,g.S6)(this._handlers,function(o,s){n.getZr().off(s,o)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},r.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction((0,g.l7)({type:"parallelAxisExpand"},e))},r.type="parallel",r}(qn.Z),d0={mousedown:function(a){tf(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var r=this._mouseDownPoint;if(tf(this,"click")&&r){var e=[a.offsetX,a.offsetY],n=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2);if(n>Rh)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!tf(this,"mousemove"))){var r=this._model,e=r.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),n=e.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function tf(a,r){var e=a._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===r}var ad=v0,p0=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(e){var n=this.option;e&&g.TS(n,e,!0),this._initDimensions()},r.prototype.contains=function(e,n){var o=e.get("parallelIndex");return o!=null&&n.getComponent("parallel",o)===this},r.prototype.setAxisExpand=function(e){g.S6(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){e.hasOwnProperty(n)&&(this.option[n]=e[n])},this)},r.prototype._initDimensions=function(){var e=this.dimensions=[],n=this.parallelAxisIndex=[],o=g.hX(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);g.S6(o,function(s){e.push("dim"+s.get("dim")),n.push(s.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(ti.Z),Oh=p0,Kl=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.type=s||"value",h.axisIndex=u,h}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(Xi.Z),g0=Kl;function us(a,r,e,n,o,s){a=a||0;var u=e[1]-e[0];if(o!=null&&(o=fs(o,[0,u])),s!=null&&(s=Math.max(s,o!=null?o:0)),n==="all"){var h=Math.abs(r[1]-r[0]);h=fs(h,[0,u]),o=s=fs(h,[o,s]),n=0}r[0]=fs(r[0],e),r[1]=fs(r[1],e);var v=Jn(r,n);r[n]+=a;var d=o||0,m=e.slice();v.sign<0?m[0]+=d:m[1]-=d,r[n]=fs(r[n],m);var _;return _=Jn(r,n),o!=null&&(_.sign!==v.sign||_.span<o)&&(r[1-n]=r[n]+v.sign*o),_=Jn(r,n),s!=null&&_.span>s&&(r[1-n]=r[n]+_.sign*s),r}function Jn(a,r){var e=a[r]-a[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function fs(a,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,a))}var ba=g.S6,Yl=Math.min,Nh=Math.max,ef=Math.floor,Do=Math.ceil,to=De.NM,da=Math.PI,wo=function(){function a(r,e,n){this.type="parallel",this._axesMap=g.kW(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=r.dimensions,s=r.parallelAxisIndex;ba(o,function(u,h){var v=s[h],d=e.getComponent("parallelAxis",v),m=this._axesMap.set(u,new g0(u,ai.aG(d),[0,0],d.get("type"),v)),_=m.type==="category";m.onBand=_&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(r,e){this._updateAxesFromSeries(this._model,r)},a.prototype.containPoint=function(r){var e=this._makeLayoutInfo(),n=e.axisBase,o=e.layoutBase,s=e.pixelDimIndex,u=r[1-s],h=r[s];return u>=n&&u<=n+e.axisLength&&h>=o&&h<=o+e.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(r,e){e.eachSeries(function(n){if(r.contains(n,e)){var o=n.getData();ba(this.dimensions,function(s){var u=this._axesMap.get(s);u.scale.unionExtentFromData(o,o.mapDimension(s)),ai.Jk(u.scale,u.model)},this)}},this)},a.prototype.resize=function(r,e){this._rect=Hr.ME(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var r=this._model,e=this._rect,n=["x","y"],o=["width","height"],s=r.get("layout"),u=s==="horizontal"?0:1,h=e[o[u]],v=[0,h],d=this.dimensions.length,m=Ao(r.get("axisExpandWidth"),v),_=Ao(r.get("axisExpandCount")||0,[0,d]),S=r.get("axisExpandable")&&d>3&&d>_&&_>1&&m>0&&h>0,A=r.get("axisExpandWindow"),L;if(A)L=Ao(A[1]-A[0],v),A[1]=A[0]+L;else{L=Ao(m*(_-1),v);var I=r.get("axisExpandCenter")||ef(d/2);A=[m*I-L/2],A[1]=A[0]+L}var U=(h-L)/(d-_);U<3&&(U=0);var et=[ef(to(A[0]/m,1))+1,Do(to(A[1]/m,1))-1],ft=U/m*A[0];return{layout:s,pixelDimIndex:u,layoutBase:e[n[u]],layoutLength:h,axisBase:e[n[1-u]],axisLength:e[o[1-u]],axisExpandable:S,axisExpandWidth:m,axisCollapseWidth:U,axisExpandWindow:A,axisCount:d,winInnerIndices:et,axisExpandWindow0Pos:ft}},a.prototype._layoutAxes=function(){var r=this._rect,e=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),s=o.layout;e.each(function(u){var h=[0,o.axisLength],v=u.inverse?1:0;u.setExtent(h[v],h[1-v])}),ba(n,function(u,h){var v=(o.axisExpandable?sd:od)(h,o),d={horizontal:{x:v.position,y:o.axisLength},vertical:{x:0,y:v.position}},m={horizontal:da/2,vertical:0},_=[d[s].x+r.x,d[s].y+r.y],S=m[s],A=An.Ue();An.U1(A,A,S),An.Iu(A,A,_),this._axesLayout[u]={position:_,rotation:S,transform:A,axisNameAvailableWidth:v.axisNameAvailableWidth,axisLabelShow:v.axisLabelShow,nameTruncateMaxWidth:v.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(r){return this._axesMap.get(r)},a.prototype.dataToPoint=function(r,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(r),e)},a.prototype.eachActiveState=function(r,e,n,o){n==null&&(n=0),o==null&&(o=r.count());var s=this._axesMap,u=this.dimensions,h=[],v=[];g.S6(u,function(U){h.push(r.mapDimension(U)),v.push(s.get(U).model)});for(var d=this.hasAxisBrushed(),m=n;m<o;m++){var _=void 0;if(!d)_="normal";else{_="active";for(var S=r.getValues(h,m),A=0,L=u.length;A<L;A++){var I=v[A].getActiveState(S[A]);if(I==="inactive"){_="inactive";break}}}e(_,m)}},a.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,e=this._axesMap,n=!1,o=0,s=r.length;o<s;o++)e.get(r[o]).model.getActiveState()!=="normal"&&(n=!0);return n},a.prototype.axisCoordToPoint=function(r,e){var n=this._axesLayout[e];return mr.applyTransform([r,0],n.transform)},a.prototype.getAxisLayout=function(r){return g.d9(this._axesLayout[r])},a.prototype.getSlidedAxisExpandWindow=function(r){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,o=e.axisExpandWindow.slice(),s=o[1]-o[0],u=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:o};var h=r[n]-e.layoutBase-e.axisExpandWindow0Pos,v,d="slide",m=e.axisCollapseWidth,_=this._model.get("axisExpandSlideTriggerArea"),S=_[0]!=null;if(m)S&&m&&h<s*_[0]?(d="jump",v=h-s*_[2]):S&&m&&h>s*(1-_[0])?(d="jump",v=h-s*(1-_[2])):(v=h-s*_[1])>=0&&(v=h-s*(1-_[1]))<=0&&(v=0),v*=e.axisExpandWidth/m,v?us(v,o,u,"all"):d="none";else{var A=o[1]-o[0],L=u[1]*h/A;o=[Nh(0,L-A/2)],o[1]=Yl(u[1],o[0]+A),o[0]=o[1]-A}return{axisExpandWindow:o,behavior:d}},a}();function Ao(a,r){return Yl(Nh(a,r[0]),r[1])}function od(a,r){var e=r.layoutLength/(r.axisCount-1);return{position:e*a,axisNameAvailableWidth:e,axisLabelShow:!0}}function sd(a,r){var e=r.layoutLength,n=r.axisExpandWidth,o=r.axisCount,s=r.axisCollapseWidth,u=r.winInnerIndices,h,v=s,d=!1,m;return a<u[0]?(h=a*s,m=s):a<=u[1]?(h=r.axisExpandWindow0Pos+a*n-r.axisExpandWindow[0],v=n,d=!0):(h=e-(o-1-a)*s,m=s),{position:h,axisNameAvailableWidth:v,axisLabelShow:d,nameTruncateMaxWidth:m}}var m0=wo;function y0(a,r){var e=[];return a.eachComponent("parallel",function(n,o){var s=new m0(n,a,r);s.name="parallel_"+o,s.resize(n,r),n.coordinateSystem=s,s.model=n,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var o=n.getReferringComponents("parallel",We.C6).models[0];n.coordinateSystem=o.coordinateSystem}}),e}var ld={create:y0},ud=ld,fd=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.activeIntervals=[],e}return r.prototype.getAreaSelectStyle=function(){return(0,Sv.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(e){var n=this.activeIntervals=g.d9(e);if(n)for(var o=n.length-1;o>=0;o--)De.dt(n[o])},r.prototype.getActiveState=function(e){var n=this.activeIntervals;if(!n.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(n.length===1){var o=n[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var s=0,u=n.length;s<u;s++)if(n[s][0]<=e&&e<=n[s][1])return"active";return"inactive"},r}(ti.Z);g.jB(fd,fu.W);var Bh=fd,hs=!0,jl=Math.min,js=Math.max,hd=Math.pow,_0=1e4,x0=6,S0=6,cd="globalPan",T0={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},vd={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Fh={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},D0=0,w0=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Mr.Z,n._uid="brushController_"+D0++,(0,g.S6)(Si,function(o,s){this._handlers[s]=(0,g.ak)(o,this)},n),n}return r.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},r.prototype._doEnableBrush=function(e){var n=this._zr;this._enableGlobalPan||Pn(n,cd,this._uid),(0,g.S6)(this._handlers,function(o,s){n.on(s,o)}),this._brushType=e.brushType,this._brushOption=(0,g.TS)((0,g.d9)(Fh),e,!0)},r.prototype._doDisableBrush=function(){var e=this._zr;Mc(e,cd,this._uid),(0,g.S6)(this._handlers,function(n,o){e.off(o,n)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(e){if(e&&e.length){var n=this._panels={};(0,g.S6)(e,function(o){n[o.panelId]=(0,g.d9)(o)})}else this._panels=null;return this},r.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=n.getLocalTransform(),this},r.prototype.updateCovers=function(e){e=(0,g.UI)(e,function(S){return(0,g.TS)((0,g.d9)(Fh),S,!0)});var n="\0-brush-index-",o=this._covers,s=this._covers=[],u=this,h=this._creatingCover;return new yo.Z(o,e,d,v).add(m).update(m).remove(_).execute(),this;function v(S,A){return(S.id!=null?S.id:n+A)+"-"+S.brushType}function d(S,A){return v(S.__brushOption,A)}function m(S,A){var L=e[S];if(A!=null&&o[A]===h)s[S]=o[A];else{var I=s[S]=A!=null?(o[A].__brushOption=L,o[A]):Gh(u,dd(u,L));zh(u,I)}}function _(S){o[S]!==h&&u.group.remove(o[S])}},r.prototype.unmount=function(){return this.enableBrush(!1),Mo(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Gf.Z);function dd(a,r){var e=uf[r.brushType].createCover(a,r);return e.__brushOption=r,bo(e,r),a.group.add(e),e}function Gh(a,r){var e=Vh(r);return e.endCreating&&(e.endCreating(a,r),bo(r,r.__brushOption)),r}function pd(a,r){var e=r.__brushOption;Vh(r).updateCoverShape(a,r,e.range,e)}function bo(a,r){var e=r.z;e==null&&(e=_0),a.traverse(function(n){n.z=e,n.z2=e})}function zh(a,r){Vh(r).updateCommon(a,r),pd(a,r)}function Vh(a){return uf[a.__brushOption.brushType]}function kh(a,r,e){var n=a._panels;if(!n)return hs;var o,s=a._transform;return(0,g.S6)(n,function(u){u.isTargetByCursor(r,e,s)&&(o=u)}),o}function Uh(a,r){var e=a._panels;if(!e)return hs;var n=r.__brushOption.panelId;return n!=null?e[n]:hs}function Mo(a){var r=a._covers,e=r.length;return(0,g.S6)(r,function(n){a.group.remove(n)},a),r.length=0,!!e}function cs(a,r){var e=(0,g.UI)(a._covers,function(n){var o=n.__brushOption,s=(0,g.d9)(o.range);return{brushType:o.brushType,panelId:o.panelId,range:s}});a.trigger("brush",{areas:e,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function A0(a){var r=a._track;if(!r.length)return!1;var e=r[r.length-1],n=r[0],o=e[0]-n[0],s=e[1]-n[1],u=hd(o*o+s*s,.5);return u>x0}function gd(a){var r=a.length-1;return r<0&&(r=0),[a[0],a[r]]}function md(a,r,e,n){var o=new Mr.Z;return o.add(new Kr.Z({name:"main",style:nf(e),silent:!0,draggable:!0,cursor:"move",drift:(0,g.WA)(_d,a,r,o,["n","s","w","e"]),ondragend:(0,g.WA)(cs,r,{isEnd:!0})})),(0,g.S6)(n,function(s){o.add(new Kr.Z({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,g.WA)(_d,a,r,o,s),ondragend:(0,g.WA)(cs,r,{isEnd:!0})}))}),o}function Zh(a,r,e,n){var o=n.brushStyle.lineWidth||0,s=js(o,S0),u=e[0][0],h=e[1][0],v=u-o/2,d=h-o/2,m=e[0][1],_=e[1][1],S=m-s+o/2,A=_-s+o/2,L=m-u,I=_-h,U=L+o,et=I+o;Oi(a,r,"main",u,h,L,I),n.transformable&&(Oi(a,r,"w",v,d,s,et),Oi(a,r,"e",S,d,s,et),Oi(a,r,"n",v,d,U,s),Oi(a,r,"s",v,A,U,s),Oi(a,r,"nw",v,d,s,s),Oi(a,r,"ne",S,d,s,s),Oi(a,r,"sw",v,A,s,s),Oi(a,r,"se",S,A,s,s))}function rf(a,r){var e=r.__brushOption,n=e.transformable,o=r.childAt(0);o.useStyle(nf(e)),o.attr({silent:!n,cursor:n?"move":"default"}),(0,g.S6)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var u=r.childOfName(s.join("")),h=s.length===1?Wh(a,s[0]):M0(a,s);u&&u.attr({silent:!n,invisible:!n,cursor:n?vd[h]+"-resize":null})})}function Oi(a,r,e,n,o,s,u){var h=r.childOfName(e);h&&h.setShape(li(Hh(a,r,[[n,o],[n+s,o+u]])))}function nf(a){return(0,g.ce)({strokeNoScale:!0},a.brushStyle)}function yd(a,r,e,n){var o=[jl(a,e),jl(r,n)],s=[js(a,e),js(r,n)];return[[o[0],s[0]],[o[1],s[1]]]}function b0(a){return mr.getTransform(a.group)}function Wh(a,r){var e={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=mr.transformDirection(e[r],b0(a));return n[o]}function M0(a,r){var e=[Wh(a,r[0]),Wh(a,r[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function _d(a,r,e,n,o,s){var u=e.__brushOption,h=a.toRectRange(u.range),v=Js(r,o,s);(0,g.S6)(n,function(d){var m=T0[d];h[m[0]][m[1]]+=v[m[0]]}),u.range=a.fromRectRange(yd(h[0][0],h[1][0],h[0][1],h[1][1])),zh(r,e),cs(r,{isEnd:!1})}function C0(a,r,e,n){var o=r.__brushOption.range,s=Js(a,e,n);(0,g.S6)(o,function(u){u[0]+=s[0],u[1]+=s[1]}),zh(a,r),cs(a,{isEnd:!1})}function Js(a,r,e){var n=a.group,o=n.transformCoordToLocal(r,e),s=n.transformCoordToLocal(0,0);return[o[0]-s[0],o[1]-s[1]]}function Hh(a,r,e){var n=Uh(a,r);return n&&n!==hs?n.clipPath(e,a._transform):(0,g.d9)(e)}function li(a){var r=jl(a[0][0],a[1][0]),e=jl(a[0][1],a[1][1]),n=js(a[0][0],a[1][0]),o=js(a[0][1],a[1][1]);return{x:r,y:e,width:n-r,height:o-e}}function xd(a,r,e){if(!(!a._brushType||E0(a,r.offsetX,r.offsetY))){var n=a._zr,o=a._covers,s=kh(a,r,e);if(!a._dragging)for(var u=0;u<o.length;u++){var h=o[u].__brushOption;if(s&&(s===hs||h.panelId===s.panelId)&&uf[h.brushType].contain(o[u],e[0],e[1]))return}s&&n.setCursorStyle("crosshair")}}function af(a){var r=a.event;r.preventDefault&&r.preventDefault()}function of(a,r,e){return a.childOfName("main").contain(r,e)}function Sd(a,r,e,n){var o=a._creatingCover,s=a._creatingPanel,u=a._brushOption,h;if(a._track.push(e.slice()),A0(a)||o){if(s&&!o){u.brushMode==="single"&&Mo(a);var v=(0,g.d9)(u);v.brushType=sf(v.brushType,s),v.panelId=s===hs?null:s.panelId,o=a._creatingCover=dd(a,v),a._covers.push(o)}if(o){var d=uf[sf(a._brushType,s)],m=o.__brushOption;m.range=d.getCreatingRange(Hh(a,o,a._track)),n&&(Gh(a,o),d.updateCommon(a,o)),pd(a,o),h={isEnd:n}}}else n&&u.brushMode==="single"&&u.removeOnClick&&kh(a,r,e)&&Mo(a)&&(h={isEnd:n,removeOnClick:!0});return h}function sf(a,r){return a==="auto"?r.defaultBrushType:a}var Si={mousedown:function(a){if(this._dragging)lf(this,a);else if(!a.target||!a.target.draggable){af(a);var r=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var e=this._creatingPanel=kh(this,a,r);e&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(a){var r=a.offsetX,e=a.offsetY,n=this.group.transformCoordToLocal(r,e);if(xd(this,a,n),this._dragging){af(a);var o=Sd(this,a,n,!1);o&&cs(this,o)}},mouseup:function(a){lf(this,a)}};function lf(a,r){if(a._dragging){af(r);var e=r.offsetX,n=r.offsetY,o=a.group.transformCoordToLocal(e,n),s=Sd(a,r,o,!0);a._dragging=!1,a._track=[],a._creatingCover=null,s&&cs(a,s)}}function E0(a,r,e){var n=a._zr;return r<0||r>n.getWidth()||e<0||e>n.getHeight()}var uf={lineX:Qs(0),lineY:Qs(1),rect:{createCover:function(a,r){function e(n){return n}return md({toRectRange:e,fromRectRange:e},a,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var r=gd(a);return yd(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(a,r,e,n){Zh(a,r,e,n)},updateCommon:rf,contain:of},polygon:{createCover:function(a,r){var e=new Mr.Z;return e.add(new Rt.Z({name:"main",style:nf(r),silent:!0})),e},getCreatingRange:function(a){return a},endCreating:function(a,r){r.remove(r.childAt(0)),r.add(new fa.Z({name:"main",draggable:!0,drift:(0,g.WA)(C0,a,r),ondragend:(0,g.WA)(cs,a,{isEnd:!0})}))},updateCoverShape:function(a,r,e,n){r.childAt(0).setShape({points:Hh(a,r,e)})},updateCommon:rf,contain:of}};function Qs(a){return{createCover:function(r,e){return md({toRectRange:function(n){var o=[n,[0,100]];return a&&o.reverse(),o},fromRectRange:function(n){return n[a]}},r,e,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(r){var e=gd(r),n=jl(e[0][a],e[1][a]),o=js(e[0][a],e[1][a]);return[n,o]},updateCoverShape:function(r,e,n,o){var s,u=Uh(r,e);if(u!==hs&&u.getLinearBrushOtherExtent)s=u.getLinearBrushOtherExtent(a);else{var h=r._zr;s=[0,[h.getWidth(),h.getHeight()][1-a]]}var v=[n,s];a&&v.reverse(),Zh(r,e,v,o)},updateCommon:rf,contain:of}}var vs=w0;function Ji(a){return a=Kh(a),function(r){return mr.clipPointsByRect(r,a)}}function Xh(a,r){return a=Kh(a),function(e){var n=r!=null?r:e,o=n?a.width:a.height,s=n?a.x:a.y;return[s,s+(o||0)]}}function Td(a,r,e){var n=Kh(a);return function(o,s){return n.contain(s[0],s[1])&&!Su(o,r,e)}}function Kh(a){return gn.Z.create(a)}var P0=["axisLine","axisTickLabel","axisName"],ff=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){a.prototype.init.apply(this,arguments),(this._brushController=new vs(n.getZr())).on("brush",g.ak(this._onBrush,this))},r.prototype.render=function(e,n,o,s){if(!L0(e,n,s)){this.axisModel=e,this.api=o,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Mr.Z,this.group.add(this._axisGroup),!!e.get("show")){var h=hf(e,n),v=h.coordinateSystem,d=e.getAreaSelectStyle(),m=d.width,_=e.axis.dim,S=v.getAxisLayout(_),A=g.l7({strokeContainThreshold:m},S),L=new Ka(e,A);g.S6(P0,L.add,L),this._axisGroup.add(L.getGroup()),this._refreshBrushController(A,d,e,h,m,o),mr.groupTransition(u,this._axisGroup,e)}}},r.prototype._refreshBrushController=function(e,n,o,s,u,h){var v=o.axis.getExtent(),d=v[1]-v[0],m=Math.min(30,Math.abs(d)*.1),_=gn.Z.create({x:v[0],y:-u/2,width:d,height:u});_.x-=m,_.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:Ji(_),isTargetByCursor:Td(_,h,s),getLinearBrushOtherExtent:Xh(_,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(I0(o))},r.prototype._onBrush=function(e){var n=e.areas,o=this.axisModel,s=o.axis,u=g.UI(n,function(h){return[s.coordToData(h.range[0],!0),s.coordToData(h.range[1],!0)]});(!o.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:u})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(qn.Z);function L0(a,r,e){return e&&e.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:e})[0]===a}function I0(a){var r=a.axis;return g.UI(a.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(e[0],!0),r.dataToCoord(e[1],!0)]}})}function hf(a,r){return r.getComponent("parallel",a.get("parallelIndex"))}var R0=ff,O0={type:"axisAreaSelect",event:"axisAreaSelected"};function N0(a){a.registerAction(O0,function(r,e){e.eachComponent({mainType:"parallelAxis",query:r},function(n){n.axis.model.setActiveIntervals(r.intervals)})}),a.registerAction("parallelAxisExpand",function(r,e){e.eachComponent({mainType:"parallel",query:r},function(n){n.setAxisExpand(r)})})}var B0={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Dd(a){a.registerComponentView(ad),a.registerComponentModel(Oh),a.registerCoordinateSystem("parallel",ud),a.registerPreprocessor(id),a.registerComponentModel(Bh),a.registerComponentView(R0),Ms(a,"parallel",Bh,B0),N0(a)}function F0(a){(0,F.D)(Dd),a.registerChartView(o0),a.registerSeriesModel(u0),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,nd)}var Yh=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),G0=function(a){(0,Wt.ZT)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultShape=function(){return new Yh},r.prototype.buildPath=function(e,n){var o=n.extent;e.moveTo(n.x1,n.y1),e.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(e.lineTo(n.x2+o,n.y2),e.bezierCurveTo(n.cpx2+o,n.cpy2,n.cpx1+o,n.cpy1,n.x1+o,n.y1)):(e.lineTo(n.x2,n.y2+o),e.bezierCurveTo(n.cpx2,n.cpy2+o,n.cpx1,n.cpy1+o,n.x1,n.y1+o)),e.closePath()},r.prototype.highlight=function(){(0,Qe.fD)(this)},r.prototype.downplay=function(){(0,Qe.Mh)(this)},r}(yt.ZP),z0=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._focusAdjacencyDisabled=!1,e}return r.prototype.render=function(e,n,o){var s=this,u=e.getGraph(),h=this.group,v=e.layoutInfo,d=v.width,m=v.height,_=e.getData(),S=e.getData("edge"),A=e.get("orient");this._model=e,h.removeAll(),h.x=v.x,h.y=v.y,u.eachEdge(function(L){var I=new G0,U=(0,Er.A)(I);U.dataIndex=L.dataIndex,U.seriesIndex=e.seriesIndex,U.dataType="edge";var et=L.getModel(),ft=et.getModel("lineStyle"),ht=ft.get("curveness"),Tt=L.node1.getLayout(),Et=L.node1.getModel(),Ct=Et.get("localX"),It=Et.get("localY"),zt=L.node2.getLayout(),Kt=L.node2.getModel(),Yt=Kt.get("localX"),ne=Kt.get("localY"),oe=L.getLayout(),ce,me,_e,Ce,ke,Oe,$e,yr;switch(I.shape.extent=Math.max(1,oe.dy),I.shape.orient=A,A==="vertical"?(ce=(Ct!=null?Ct*d:Tt.x)+oe.sy,me=(It!=null?It*m:Tt.y)+Tt.dy,_e=(Yt!=null?Yt*d:zt.x)+oe.ty,Ce=ne!=null?ne*m:zt.y,ke=ce,Oe=me*(1-ht)+Ce*ht,$e=_e,yr=me*ht+Ce*(1-ht)):(ce=(Ct!=null?Ct*d:Tt.x)+Tt.dx,me=(It!=null?It*m:Tt.y)+oe.sy,_e=Yt!=null?Yt*d:zt.x,Ce=(ne!=null?ne*m:zt.y)+oe.ty,ke=ce*(1-ht)+_e*ht,Oe=me,$e=ce*ht+_e*(1-ht),yr=Ce),I.setShape({x1:ce,y1:me,x2:_e,y2:Ce,cpx1:ke,cpy1:Oe,cpx2:$e,cpy2:yr}),I.useStyle(ft.getItemStyle()),I.style.fill){case"source":I.style.fill=L.node1.getVisual("color"),I.style.decal=L.node1.getVisual("style").decal;break;case"target":I.style.fill=L.node2.getVisual("color"),I.style.decal=L.node2.getVisual("style").decal;break;case"gradient":var _r=L.node1.getVisual("color"),Xr=L.node2.getVisual("color");(0,g.HD)(_r)&&(0,g.HD)(Xr)&&(I.style.fill=new Ar.Z(0,0,+(A==="horizontal"),+(A==="vertical"),[{color:_r,offset:0},{color:Xr,offset:1}]))}(0,Ge.ni)(I,(0,Ge.k3)(et,"edgeLabel"),{labelFetcher:e,labelDataIndex:L.dataIndex,defaultText:""+et.get("value")}),I.setTextConfig({position:"inside"});var Wr=et.getModel("emphasis");(0,Qe.WO)(I,et,"lineStyle",function(ln){return ln.getItemStyle()}),h.add(I),S.setItemGraphicEl(L.dataIndex,I);var Gr=Wr.get("focus");(0,Qe.k5)(I,Gr==="adjacency"?L.getAdjacentDataIndices():Gr,Wr.get("blurScope"),Wr.get("disabled")),(0,Er.A)(I).dataType="edge"}),u.eachNode(function(L){var I=L.getLayout(),U=L.getModel(),et=U.get("localX"),ft=U.get("localY"),ht=U.getModel("emphasis"),Tt=new Kr.Z({shape:{x:et!=null?et*d:I.x,y:ft!=null?ft*m:I.y,width:I.dx,height:I.dy},style:U.getModel("itemStyle").getItemStyle(),z2:10});(0,Ge.ni)(Tt,(0,Ge.k3)(U),{labelFetcher:e,labelDataIndex:L.dataIndex,defaultText:L.id}),Tt.disableLabelAnimation=!0,Tt.setStyle("fill",L.getVisual("color")),Tt.setStyle("decal",L.getVisual("style").decal),(0,Qe.WO)(Tt,U),h.add(Tt),_.setItemGraphicEl(L.dataIndex,Tt),(0,Er.A)(Tt).dataType="node";var Et=ht.get("focus");(0,Qe.k5)(Tt,Et==="adjacency"?L.getAdjacentDataIndices():Et,ht.get("blurScope"),ht.get("disabled"))}),_.eachItemGraphicEl(function(L,I){var U=_.getItemModel(I);U.get("draggable")&&(L.drift=function(et,ft){s._focusAdjacencyDisabled=!0,this.shape.x+=et,this.shape.y+=ft,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:_.getRawIndex(I),localX:this.shape.x/d,localY:this.shape.y/m})},L.ondragend=function(){s._focusAdjacencyDisabled=!1},L.draggable=!0,L.cursor="move")}),!this._data&&e.isAnimationEnabled()&&h.setClipPath(V0(h.getBoundingRect(),e,function(){h.removeClipPath()})),this._data=e.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(Mn.Z);function V0(a,r,e){var n=new Kr.Z({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return rr.KZ(n,{shape:{width:a.width+20}},r,e),n}var wd=z0,jh=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){var o=e.edges||e.links,s=e.data||e.nodes,u=e.levels;this.levelModels=[];for(var h=this.levelModels,v=0;v<u.length;v++)u[v].depth!=null&&u[v].depth>=0&&(h[u[v].depth]=new zn.Z(u[v],this,n));if(s&&o){var d=$v(s,o,this,!0,m);return d.data}function m(_,S){_.wrapMethod("getItemModel",function(A,L){var I=A.parentModel,U=I.getData().getItemLayout(L);if(U){var et=U.depth,ft=I.levelModels[et];ft&&(A.parentModel=ft)}return A}),S.wrapMethod("getItemModel",function(A,L){var I=A.parentModel,U=I.getGraph().getEdgeByIndex(L),et=U.node1.getLayout();if(et){var ft=et.depth,ht=I.levelModels[ft];ht&&(A.parentModel=ht)}return A})}},r.prototype.setNodePosition=function(e,n){var o=this.option.data||this.option.nodes,s=o[e];s.localX=n[0],s.localY=n[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(e,n,o){function s(A){return isNaN(A)||A==null}if(o==="edge"){var u=this.getDataParams(e,o),h=u.data,v=u.value,d=h.source+" -- "+h.target;return(0,Un.TX)("nameValue",{name:d,value:v,noValue:s(v)})}else{var m=this.getGraph().getNodeByIndex(e),_=m.getLayout().value,S=this.getDataParams(e,o).data.name;return(0,Un.TX)("nameValue",{name:S!=null?S+"":null,value:_,noValue:s(_)})}},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(e,n){var o=a.prototype.getDataParams.call(this,e,n);if(o.value==null&&n==="node"){var s=this.getGraph().getNodeByIndex(e),u=s.getLayout().value;o.value=u}return o},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(yn.Z),k0=jh;function U0(a,r){a.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),o=e.get("nodeGap"),s=Z0(e,r);e.layoutInfo=s;var u=s.width,h=s.height,v=e.getGraph(),d=v.nodes,m=v.edges;i(d);var _=g.hX(d,function(I){return I.getLayout().value===0}),S=_.length!==0?0:e.get("layoutIterations"),A=e.get("orient"),L=e.get("nodeAlign");t(d,m,n,o,u,h,S,A,L)})}function Z0(a,r){return Hr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function t(a,r,e,n,o,s,u,h,v){l(a,r,e,o,s,h,v),x(a,r,s,o,n,u,h),jt(a,h)}function i(a){g.S6(a,function(r){var e=te(r.outEdges,kt),n=te(r.inEdges,kt),o=r.getValue()||0,s=Math.max(e,n,o);r.setLayout({value:s},!0)})}function l(a,r,e,n,o,s,u){for(var h=[],v=[],d=[],m=[],_=0,S=0;S<r.length;S++)h[S]=1;for(var S=0;S<a.length;S++)v[S]=a[S].inEdges.length,v[S]===0&&d.push(a[S]);for(var A=-1;d.length;){for(var L=0;L<d.length;L++){var I=d[L],U=I.hostGraph.data.getRawDataItem(I.dataIndex),et=U.depth!=null&&U.depth>=0;et&&U.depth>A&&(A=U.depth),I.setLayout({depth:et?U.depth:_},!0),s==="vertical"?I.setLayout({dy:e},!0):I.setLayout({dx:e},!0);for(var ft=0;ft<I.outEdges.length;ft++){var ht=I.outEdges[ft],Tt=r.indexOf(ht);h[Tt]=0;var Et=ht.node2,Ct=a.indexOf(Et);--v[Ct]===0&&m.indexOf(Et)<0&&m.push(Et)}}++_,d=m,m=[]}for(var S=0;S<h.length;S++)if(h[S]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var It=A>_-1?A:_-1;u&&u!=="left"&&c(a,u,s,It);var zt=s==="vertical"?(o-e)/It:(n-e)/It;y(a,zt,s)}function f(a){var r=a.hostGraph.data.getRawDataItem(a.dataIndex);return r.depth!=null&&r.depth>=0}function c(a,r,e,n){if(r==="right"){for(var o=[],s=a,u=0;s.length;){for(var h=0;h<s.length;h++){var v=s[h];v.setLayout({skNodeHeight:u},!0);for(var d=0;d<v.inEdges.length;d++){var m=v.inEdges[d];o.indexOf(m.node1)<0&&o.push(m.node1)}}s=o,o=[],++u}g.S6(a,function(_){f(_)||_.setLayout({depth:Math.max(0,n-_.getLayout().skNodeHeight)},!0)})}else r==="justify"&&p(a,n)}function p(a,r){g.S6(a,function(e){!f(e)&&!e.outEdges.length&&e.setLayout({depth:r},!0)})}function y(a,r,e){g.S6(a,function(n){var o=n.getLayout().depth*r;e==="vertical"?n.setLayout({y:o},!0):n.setLayout({x:o},!0)})}function x(a,r,e,n,o,s,u){var h=D(a,u);E(h,r,e,n,o,u),N(h,o,e,n,u);for(var v=1;s>0;s--)v*=.99,$(h,v,u),N(h,o,e,n,u),qt(h,v,u),N(h,o,e,n,u)}function D(a,r){var e=[],n=r==="vertical"?"y":"x",o=(0,We.pv)(a,function(s){return s.getLayout()[n]});return o.keys.sort(function(s,u){return s-u}),g.S6(o.keys,function(s){e.push(o.buckets.get(s))}),e}function E(a,r,e,n,o,s){var u=1/0;g.S6(a,function(h){var v=h.length,d=0;g.S6(h,function(_){d+=_.getLayout().value});var m=s==="vertical"?(n-(v-1)*o)/d:(e-(v-1)*o)/d;m<u&&(u=m)}),g.S6(a,function(h){g.S6(h,function(v,d){var m=v.getLayout().value*u;s==="vertical"?(v.setLayout({x:d},!0),v.setLayout({dx:m},!0)):(v.setLayout({y:d},!0),v.setLayout({dy:m},!0))})}),g.S6(r,function(h){var v=+h.getValue()*u;h.setLayout({dy:v},!0)})}function N(a,r,e,n,o){var s=o==="vertical"?"x":"y";g.S6(a,function(u){u.sort(function(I,U){return I.getLayout()[s]-U.getLayout()[s]});for(var h,v,d,m=0,_=u.length,S=o==="vertical"?"dx":"dy",A=0;A<_;A++)v=u[A],d=m-v.getLayout()[s],d>0&&(h=v.getLayout()[s]+d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0)),m=v.getLayout()[s]+v.getLayout()[S]+r;var L=o==="vertical"?n:e;if(d=m-r-L,d>0){h=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0),m=h;for(var A=_-2;A>=0;--A)v=u[A],d=v.getLayout()[s]+v.getLayout()[S]+r-m,d>0&&(h=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0)),m=v.getLayout()[s]}})}function $(a,r,e){g.S6(a.slice().reverse(),function(n){g.S6(n,function(o){if(o.outEdges.length){var s=te(o.outEdges,_t,e)/te(o.outEdges,kt);if(isNaN(s)){var u=o.outEdges.length;s=u?te(o.outEdges,pt,e)/u:0}if(e==="vertical"){var h=o.getLayout().x+(s-Nt(o,e))*r;o.setLayout({x:h},!0)}else{var v=o.getLayout().y+(s-Nt(o,e))*r;o.setLayout({y:v},!0)}}})})}function _t(a,r){return Nt(a.node2,r)*a.getValue()}function pt(a,r){return Nt(a.node2,r)}function At(a,r){return Nt(a.node1,r)*a.getValue()}function Mt(a,r){return Nt(a.node1,r)}function Nt(a,r){return r==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function kt(a){return a.getValue()}function te(a,r,e){for(var n=0,o=a.length,s=-1;++s<o;){var u=+r(a[s],e);isNaN(u)||(n+=u)}return n}function qt(a,r,e){g.S6(a,function(n){g.S6(n,function(o){if(o.inEdges.length){var s=te(o.inEdges,At,e)/te(o.inEdges,kt);if(isNaN(s)){var u=o.inEdges.length;s=u?te(o.inEdges,Mt,e)/u:0}if(e==="vertical"){var h=o.getLayout().x+(s-Nt(o,e))*r;o.setLayout({x:h},!0)}else{var v=o.getLayout().y+(s-Nt(o,e))*r;o.setLayout({y:v},!0)}}})})}function jt(a,r){var e=r==="vertical"?"x":"y";g.S6(a,function(n){n.outEdges.sort(function(o,s){return o.node2.getLayout()[e]-s.node2.getLayout()[e]}),n.inEdges.sort(function(o,s){return o.node1.getLayout()[e]-s.node1.getLayout()[e]})}),g.S6(a,function(n){var o=0,s=0;g.S6(n.outEdges,function(u){u.setLayout({sy:o},!0),o+=u.getLayout().dy}),g.S6(n.inEdges,function(u){u.setLayout({ty:s},!0),s+=u.getLayout().dy})})}function fe(a){a.eachSeriesByType("sankey",function(r){var e=r.getGraph(),n=e.nodes,o=e.edges;if(n.length){var s=1/0,u=-1/0;g.S6(n,function(h){var v=h.getLayout().value;v<s&&(s=v),v>u&&(u=v)}),g.S6(n,function(h){var v=new vi({type:"color",mappingMethod:"linear",dataExtent:[s,u],visual:r.get("color")}),d=v.mapValueToVisual(h.getLayout().value),m=h.getModel().get(["itemStyle","color"]);m!=null?(h.setVisual("color",m),h.setVisual("style",{fill:m})):(h.setVisual("color",d),h.setVisual("style",{fill:d}))})}o.length&&g.S6(o,function(h){var v=h.getModel().get("lineStyle");h.setVisual("style",v)})})}function ue(a){a.registerChartView(wd),a.registerSeriesModel(k0),a.registerLayout(U0),a.registerVisual(fe),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"sankey",query:r},function(n){n.setNodePosition(r.dataIndex,[r.localX,r.localY])})})}var Te=z(51535),xe=function(){function a(){}return a.prototype.getInitialData=function(r,e){var n,o=e.getComponent("xAxis",this.get("xAxisIndex")),s=e.getComponent("yAxis",this.get("yAxisIndex")),u=o.get("type"),h=s.get("type"),v;u==="category"?(r.layout="horizontal",n=o.getOrdinalMeta(),v=!0):h==="category"?(r.layout="vertical",n=s.getOrdinalMeta(),v=!0):r.layout=r.layout||"horizontal";var d=["x","y"],m=r.layout==="horizontal"?0:1,_=this._baseAxisDim=d[m],S=d[1-m],A=[o,s],L=A[m].get("type"),I=A[1-m].get("type"),U=r.data;if(U&&v){var et=[];g.S6(U,function(Tt,Et){var Ct;g.kJ(Tt)?(Ct=Tt.slice(),Tt.unshift(Et)):g.kJ(Tt.value)?(Ct=g.l7({},Tt),Ct.value=Ct.value.slice(),Tt.value.unshift(Et)):Ct=Tt,et.push(Ct)}),r.data=et}var ft=this.defaultValueDimensions,ht=[{name:_,type:(0,Te.T)(L),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:S,type:(0,Te.T)(I),dimsDef:ft.slice()}];return Re(this,{coordDimensions:ht,dimensionsCount:ft.length+1,encodeDefaulter:g.WA(Ye.pY,ht,this)})},a.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},a}(),Ie=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(yn.Z);(0,g.jB)(Ie,xe,!0);var je=Ie,Ve=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this.group,h=this._data;this._data||u.removeAll();var v=e.get("layout")==="horizontal"?1:0;s.diff(h).add(function(d){if(s.hasValue(d)){var m=s.getItemLayout(d),_=Xe(m,s,d,v,!0);s.setItemGraphicEl(d,_),u.add(_)}}).update(function(d,m){var _=h.getItemGraphicEl(m);if(!s.hasValue(d)){u.remove(_);return}var S=s.getItemLayout(d);_?((0,rr.Zi)(_),ir(S,_,s,d)):_=Xe(S,s,d,v),u.add(_),s.setItemGraphicEl(d,_)}).remove(function(d){var m=h.getItemGraphicEl(d);m&&u.remove(m)}).execute(),this._data=s},r.prototype.remove=function(e){var n=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(s){s&&n.remove(s)})},r.type="boxplot",r}(Mn.Z),Je=function(){function a(){}return a}(),er=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="boxplotBoxPath",n}return r.prototype.getDefaultShape=function(){return new Je},r.prototype.buildPath=function(e,n){var o=n.points,s=0;for(e.moveTo(o[s][0],o[s][1]),s++;s<4;s++)e.lineTo(o[s][0],o[s][1]);for(e.closePath();s<o.length;s++)e.moveTo(o[s][0],o[s][1]),s++,e.lineTo(o[s][0],o[s][1])},r}(yt.ZP);function Xe(a,r,e,n,o){var s=a.ends,u=new er({shape:{points:o?xr(s,n,a):s}});return ir(a,u,r,e,o),u}function ir(a,r,e,n,o){var s=e.hostModel,u=mr[o?"initProps":"updateProps"];u(r,{shape:{points:a.ends}},s,n),r.useStyle(e.getItemVisual(n,"style")),r.style.strokeNoScale=!0,r.z2=100;var h=e.getItemModel(n),v=h.getModel("emphasis");(0,Qe.WO)(r,h),(0,Qe.k5)(r,v.get("focus"),v.get("blurScope"),v.get("disabled"))}function xr(a,r,e){return g.UI(a,function(n){return n=n.slice(),n[r]=e.initBaseline,n})}var Lr=Ve,ar=g.S6;function vn(a){var r=br(a);ar(r,function(e){var n=e.seriesModels;n.length&&(Cn(e),ar(n,function(o,s){dn(o,e.boxOffsetList[s],e.boxWidthList[s])}))})}function br(a){var r=[],e=[];return a.eachSeriesByType("boxplot",function(n){var o=n.getBaseAxis(),s=g.cq(e,o);s<0&&(s=e.length,e[s]=o,r[s]={axis:o,seriesModels:[]}),r[s].seriesModels.push(n)}),r}function Cn(a){var r=a.axis,e=a.seriesModels,n=e.length,o=a.boxWidthList=[],s=a.boxOffsetList=[],u=[],h;if(r.type==="category")h=r.getBandWidth();else{var v=0;ar(e,function(L){v=Math.max(v,L.getData().count())});var d=r.getExtent();h=Math.abs(d[1]-d[0])/v}ar(e,function(L){var I=L.get("boxWidth");g.kJ(I)||(I=[I,I]),u.push([(0,De.GM)(I[0],h)||0,(0,De.GM)(I[1],h)||0])});var m=h*.8-2,_=m/n*.3,S=(m-_*(n-1))/n,A=S/2-m/2;ar(e,function(L,I){s.push(A),A+=_+S,o.push(Math.min(Math.max(S,u[I][0]),u[I][1]))})}function dn(a,r,e){var n=a.coordinateSystem,o=a.getData(),s=e/2,u=a.get("layout")==="horizontal"?0:1,h=1-u,v=["x","y"],d=o.mapDimension(v[u]),m=o.mapDimensionsAll(v[h]);if(d==null||m.length<5)return;for(var _=0;_<o.count();_++){var S=o.get(d,_),A=ht(S,m[2],_),L=ht(S,m[0],_),I=ht(S,m[1],_),U=ht(S,m[3],_),et=ht(S,m[4],_),ft=[];Tt(ft,I,!1),Tt(ft,U,!0),ft.push(L,I,et,U),Et(ft,L),Et(ft,et),Et(ft,A),o.setItemLayout(_,{initBaseline:A[h],ends:ft})}function ht(Ct,It,zt){var Kt=o.get(It,zt),Yt=[];Yt[u]=Ct,Yt[h]=Kt;var ne;return isNaN(Ct)||isNaN(Kt)?ne=[NaN,NaN]:(ne=n.dataToPoint(Yt),ne[u]+=r),ne}function Tt(Ct,It,zt){var Kt=It.slice(),Yt=It.slice();Kt[u]+=s,Yt[u]-=s,zt?Ct.push(Kt,Yt):Ct.push(Yt,Kt)}function Et(Ct,It){var zt=It.slice(),Kt=It.slice();zt[u]-=s,Kt[u]+=s,Ct.push(zt,Kt)}}function On(a,r){r=r||{};for(var e=[],n=[],o=r.boundIQR,s=o==="none"||o===0,u=0;u<a.length;u++){var h=(0,De.dt)(a[u].slice()),v=(0,De.VR)(h,.25),d=(0,De.VR)(h,.5),m=(0,De.VR)(h,.75),_=h[0],S=h[h.length-1],A=(o==null?1.5:o)*(m-v),L=s?_:Math.max(_,v-A),I=s?S:Math.min(S,m+A),U=r.itemNameFormatter,et=(0,g.mf)(U)?U({value:u}):(0,g.HD)(U)?U.replace("{value}",u+""):u+"";e.push([et,L,v,d,m,I]);for(var ft=0;ft<h.length;ft++){var ht=h[ft];if(ht<L||ht>I){var Tt=[et,ht];n.push(Tt)}}}return{boxData:e,outliers:n}}var Zr=z(13259),$r=z(27674),ui={type:"echarts:boxplot",transform:function(r){var e=r.upstream;if(e.sourceFormat!==$r.XD){var n="";(0,Zr._y)(n)}var o=On(e.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function Wn(a){a.registerSeriesModel(je),a.registerChartView(Lr),a.registerLayout(vn),a.registerTransform(ui)}var Qn=["color","borderColor"],bi=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},r.prototype.incrementalPrepareRender=function(e,n,o){this._clear(),this._updateDrawMode(e)},r.prototype.incrementalRender=function(e,n,o,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,n):this._incrementalRenderNormal(e,n)},r.prototype.eachRendered=function(e){mr.traverseElements(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e){var n=e.getData(),o=this._data,s=this.group,u=n.getLayout("isSimpleBox"),h=e.get("clip",!0),v=e.coordinateSystem,d=v.getArea&&v.getArea();this._data||s.removeAll(),n.diff(o).add(function(m){if(n.hasValue(m)){var _=n.getItemLayout(m);if(h&&ei(d,_))return;var S=ds(_,m,!0);rr.KZ(S,{shape:{points:_.ends}},e,m),pa(S,n,m,u),s.add(S),n.setItemGraphicEl(m,S)}}).update(function(m,_){var S=o.getItemGraphicEl(_);if(!n.hasValue(m)){s.remove(S);return}var A=n.getItemLayout(m);if(h&&ei(d,A)){s.remove(S);return}S?(rr.D(S,{shape:{points:A.ends}},e,m),(0,rr.Zi)(S)):S=ds(A,m),pa(S,n,m,u),s.add(S),n.setItemGraphicEl(m,S)}).remove(function(m){var _=o.getItemGraphicEl(m);_&&s.remove(_)}).execute(),this._data=n},r.prototype._renderLarge=function(e){this._clear(),my(e,this.group);var n=e.get("clip",!0)?oo(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(e,n){for(var o=n.getData(),s=o.getLayout("isSimpleBox"),u;(u=e.next())!=null;){var h=o.getItemLayout(u),v=ds(h,u);pa(v,o,u,s),v.incremental=!0,this.group.add(v),this._progressiveEls.push(v)}},r.prototype._incrementalRenderLarge=function(e,n){my(n,this.group,this._progressiveEls,!0)},r.prototype.remove=function(e){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(Mn.Z),pi=function(){function a(){}return a}(),gi=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="normalCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new pi},r.prototype.buildPath=function(e,n){var o=n.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))},r}(yt.ZP);function ds(a,r,e){var n=a.ends;return new gi({shape:{points:e?Ni(n,a):n},z2:100})}function ei(a,r){for(var e=!0,n=0;n<r.ends.length;n++)if(a.contain(r.ends[n][0],r.ends[n][1])){e=!1;break}return e}function pa(a,r,e,n){var o=r.getItemModel(e);a.useStyle(r.getItemVisual(e,"style")),a.style.strokeNoScale=!0,a.__simpleBox=n,(0,Qe.WO)(a,o)}function Ni(a,r){return g.UI(a,function(e){return e=e.slice(),e[1]=r.initBaseline,e})}var Jh=function(){function a(){}return a}(),W0=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new Jh},r.prototype.buildPath=function(e,n){for(var o=n.points,s=0;s<o.length;)if(this.__sign===o[s++]){var u=o[s++];e.moveTo(u,o[s++]),e.lineTo(u,o[s++])}else s+=3},r}(yt.ZP);function my(a,r,e,n){var o=a.getData(),s=o.getLayout("largePoints"),u=new W0({shape:{points:s},__sign:1,ignoreCoarsePointer:!0});r.add(u);var h=new W0({shape:{points:s},__sign:-1,ignoreCoarsePointer:!0});r.add(h);var v=new W0({shape:{points:s},__sign:0,ignoreCoarsePointer:!0});r.add(v),H0(1,u,a,o),H0(-1,h,a,o),H0(0,v,a,o),n&&(u.incremental=!0,h.incremental=!0),e&&e.push(u,h)}function H0(a,r,e,n){var o=e.get(["itemStyle",a>0?"borderColor":"borderColor0"])||e.get(["itemStyle",a>0?"color":"color0"]);a===0&&(o=e.get(["itemStyle","borderColorDoji"]));var s=e.getModel("itemStyle").getItemStyle(Qn);r.useStyle(s),r.style.fill=null,r.style.stroke=o}var jx=bi,yy=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(e,n,o){var s=n.getItemLayout(e);return s&&o.rect(s.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(yn.Z);(0,g.jB)(yy,xe,!0);var Jx=yy;function Qx(a){!a||!g.kJ(a.series)||g.S6(a.series,function(r){g.Kn(r)&&r.type==="k"&&(r.type="candlestick")})}var $x=["itemStyle","borderColor"],qx=["itemStyle","borderColor0"],tS=["itemStyle","borderColorDoji"],eS=["itemStyle","color"],rS=["itemStyle","color0"],nS={seriesType:"candlestick",plan:(0,Wi.Z)(),performRawSeries:!0,reset:function(a,r){function e(s,u){return u.get(s>0?eS:rS)}function n(s,u){return u.get(s===0?tS:s>0?$x:qx)}if(!r.isSeriesFiltered(a)){var o=a.pipelineContext.large;return!o&&{progress:function(s,u){for(var h;(h=s.next())!=null;){var v=u.getItemModel(h),d=u.getItemLayout(h).sign,m=v.getItemStyle();m.fill=e(d,v),m.stroke=n(d,v)||m.fill;var _=u.ensureUniqueItemVisual(h,"style");(0,g.l7)(_,m)}}}}}},iS=nS,aS={seriesType:"candlestick",plan:(0,Wi.Z)(),reset:function(a){var r=a.coordinateSystem,e=a.getData(),n=oS(a,e),o=0,s=1,u=["x","y"],h=e.getDimensionIndex(e.mapDimension(u[o])),v=(0,g.UI)(e.mapDimensionsAll(u[s]),e.getDimensionIndex,e),d=v[0],m=v[1],_=v[2],S=v[3];if(e.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),h<0||v.length<4)return;return{progress:a.pipelineContext.large?L:A};function A(I,U){for(var et,ft=U.getStore();(et=I.next())!=null;){var ht=ft.get(h,et),Tt=ft.get(d,et),Et=ft.get(m,et),Ct=ft.get(_,et),It=ft.get(S,et),zt=Math.min(Tt,Et),Kt=Math.max(Tt,Et),Yt=ke(zt,ht),ne=ke(Kt,ht),oe=ke(Ct,ht),ce=ke(It,ht),me=[];Oe(me,ne,0),Oe(me,Yt,1),me.push(yr(ce),yr(ne),yr(oe),yr(Yt));var _e=U.getItemModel(et),Ce=!!_e.get(["itemStyle","borderColorDoji"]);U.setItemLayout(et,{sign:_y(ft,et,Tt,Et,m,Ce),initBaseline:Tt>Et?ne[s]:Yt[s],ends:me,brushRect:$e(Ct,It,ht)})}function ke(_r,Xr){var Wr=[];return Wr[o]=Xr,Wr[s]=_r,isNaN(Xr)||isNaN(_r)?[NaN,NaN]:r.dataToPoint(Wr)}function Oe(_r,Xr,Wr){var Gr=Xr.slice(),ln=Xr.slice();Gr[o]=(0,mr.subPixelOptimize)(Gr[o]+n/2,1,!1),ln[o]=(0,mr.subPixelOptimize)(ln[o]-n/2,1,!0),Wr?_r.push(Gr,ln):_r.push(ln,Gr)}function $e(_r,Xr,Wr){var Gr=ke(_r,Wr),ln=ke(Xr,Wr);return Gr[o]-=n/2,ln[o]-=n/2,{x:Gr[0],y:Gr[1],width:s?n:ln[0]-Gr[0],height:s?ln[1]-Gr[1]:n}}function yr(_r){return _r[o]=(0,mr.subPixelOptimize)(_r[o],1),_r}}function L(I,U){for(var et=(0,En.o)(I.count*4),ft=0,ht,Tt=[],Et=[],Ct,It=U.getStore(),zt=!!a.get(["itemStyle","borderColorDoji"]);(Ct=I.next())!=null;){var Kt=It.get(h,Ct),Yt=It.get(d,Ct),ne=It.get(m,Ct),oe=It.get(_,Ct),ce=It.get(S,Ct);if(isNaN(Kt)||isNaN(oe)||isNaN(ce)){et[ft++]=NaN,ft+=3;continue}et[ft++]=_y(It,Ct,Yt,ne,m,zt),Tt[o]=Kt,Tt[s]=oe,ht=r.dataToPoint(Tt,null,Et),et[ft++]=ht?ht[0]:NaN,et[ft++]=ht?ht[1]:NaN,Tt[s]=ce,ht=r.dataToPoint(Tt,null,Et),et[ft++]=ht?ht[1]:NaN}U.setLayout("largePoints",et)}}};function _y(a,r,e,n,o,s){var u;return e>n?u=-1:e<n?u=1:u=s?0:r>0?a.get(o,r-1)<=n?1:-1:1,u}function oS(a,r){var e=a.getBaseAxis(),n,o=e.type==="category"?e.getBandWidth():(n=e.getExtent(),Math.abs(n[1]-n[0])/r.count()),s=(0,De.GM)((0,g.pD)(a.get("barMaxWidth"),o),o),u=(0,De.GM)((0,g.pD)(a.get("barMinWidth"),1),o),h=a.get("barWidth");return h!=null?(0,De.GM)(h,o):Math.max(Math.min(o/2,s),u)}var sS=aS;function lS(a){a.registerChartView(jx),a.registerSeriesModel(Jx),a.registerPreprocessor(Qx),a.registerVisual(iS),a.registerLayout(sS)}function xy(a,r){var e=r.rippleEffectColor||r.color;a.eachChild(function(n){n.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?e:null,fill:r.brushType==="fill"?e:null}})})}var uS=function(a){(0,Wt.ZT)(r,a);function r(e,n){var o=a.call(this)||this,s=new ni(e,n),u=new Mr.Z;return o.add(s),o.add(u),o.updateData(e,n),o}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(e){for(var n=e.symbolType,o=e.color,s=e.rippleNumber,u=this.childAt(1),h=0;h<s;h++){var v=(0,fn.th)(n,-1,-1,2,2,o);v.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-h/s*e.period+e.effectOffset;v.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(d).start(),v.animateStyle(!0).when(e.period,{opacity:0}).delay(d).start(),u.add(v)}xy(u,e)},r.prototype.updateEffectAnimation=function(e){for(var n=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],u=0;u<s.length;u++){var h=s[u];if(n[h]!==e[h]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}xy(o,e)},r.prototype.highlight=function(){(0,Qe.fD)(this)},r.prototype.downplay=function(){(0,Qe.Mh)(this)},r.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},r.prototype.updateData=function(e,n){var o=this,s=e.hostModel;this.childAt(0).updateData(e,n);var u=this.childAt(1),h=e.getItemModel(n),v=e.getItemVisual(n,"symbol"),d=(0,fn.zp)(e.getItemVisual(n,"symbolSize")),m=e.getItemVisual(n,"style"),_=m&&m.fill,S=h.getModel("emphasis");u.setScale(d),u.traverse(function(U){U.setStyle("fill",_)});var A=(0,fn.Cq)(e.getItemVisual(n,"symbolOffset"),d);A&&(u.x=A[0],u.y=A[1]);var L=e.getItemVisual(n,"symbolRotate");u.rotation=(L||0)*Math.PI/180||0;var I={};I.showEffectOn=s.get("showEffectOn"),I.rippleScale=h.get(["rippleEffect","scale"]),I.brushType=h.get(["rippleEffect","brushType"]),I.period=h.get(["rippleEffect","period"])*1e3,I.effectOffset=n/e.count(),I.z=s.getShallow("z")||0,I.zlevel=s.getShallow("zlevel")||0,I.symbolType=v,I.color=_,I.rippleEffectColor=h.get(["rippleEffect","color"]),I.rippleNumber=h.get(["rippleEffect","number"]),I.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(I):this.startEffectAnimation(I),this._effectCfg=I):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(U){U==="emphasis"?I.showEffectOn!=="render"&&o.startEffectAnimation(I):U==="normal"&&I.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=I,(0,Qe.k5)(this,S.get("focus"),S.get("blurScope"),S.get("disabled"))},r.prototype.fadeOut=function(e){e&&e()},r}(Mr.Z),fS=uS,hS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._symbolDraw=new Ma(fS)},r.prototype.render=function(e,n,o){var s=e.getData(),u=this._symbolDraw;u.updateData(s,{clipShape:this._getClipShape(e)}),this.group.add(u.group)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype.updateTransform=function(e,n,o){var s=e.getData();this.group.dirty();var u=Hn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(e){var n=e.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=An.d9(n.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(Mn.Z),cS=hS,vS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(yn.Z),dS=vS;function pS(a){a.registerChartView(cS),a.registerSeriesModel(dS),a.registerLayout(Hn("effectScatter"))}var gS=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s.add(s.createLine(e,n,o)),s._updateEffectSymbol(e,n),s}return r.prototype.createLine=function(e,n,o){return new Ri(e,n,o)},r.prototype._updateEffectSymbol=function(e,n){var o=e.getItemModel(n),s=o.getModel("effect"),u=s.get("symbolSize"),h=s.get("symbol");g.kJ(u)||(u=[u,u]);var v=e.getItemVisual(n,"style"),d=s.get("color")||v&&v.stroke,m=this.childAt(1);this._symbolType!==h&&(this.remove(m),m=(0,fn.th)(h,-.5,-.5,1,1,d),m.z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",d),m.setStyle(s.getItemStyle(["color"])),m.scaleX=u[0],m.scaleY=u[1],m.setColor(d),this._symbolType=h,this._symbolScale=u,this._updateEffectAnimation(e,s,n))},r.prototype._updateEffectAnimation=function(e,n,o){var s=this.childAt(1);if(s){var u=e.getItemLayout(o),h=n.get("period")*1e3,v=n.get("loop"),d=n.get("roundTrip"),m=n.get("constantSpeed"),_=g.Jv(n.get("delay"),function(A){return A/e.count()*h/3});if(s.ignore=!0,this._updateAnimationPoints(s,u),m>0&&(h=this._getLineLength(s)/m*1e3),h!==this._period||v!==this._loop||d!==this._roundTrip){s.stopAnimation();var S=void 0;g.mf(_)?S=_(o):S=_,s.__t>0&&(S=-h*s.__t),this._animateSymbol(s,h,S,v,d)}this._period=h,this._loop=v,this._roundTrip=d}},r.prototype._animateSymbol=function(e,n,o,s,u){if(n>0){e.__t=0;var h=this,v=e.animate("",s).when(u?n*2:n,{__t:u?2:1}).delay(o).during(function(){h._updateSymbolPosition(e)});s||v.done(function(){h.remove(e)}),v.start()}},r.prototype._getLineLength=function(e){return Pr.TK(e.__p1,e.__cp1)+Pr.TK(e.__cp1,e.__p2)},r.prototype._updateAnimationPoints=function(e,n){e.__p1=n[0],e.__p2=n[1],e.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},r.prototype.updateData=function(e,n,o){this.childAt(0).updateData(e,n,o),this._updateEffectSymbol(e,n)},r.prototype._updateSymbolPosition=function(e){var n=e.__p1,o=e.__p2,s=e.__cp1,u=e.__t<1?e.__t:2-e.__t,h=[e.x,e.y],v=h.slice(),d=_i.Zm,m=_i.AZ;h[0]=d(n[0],s[0],o[0],u),h[1]=d(n[1],s[1],o[1],u);var _=e.__t<1?m(n[0],s[0],o[0],u):m(o[0],s[0],n[0],1-u),S=e.__t<1?m(n[1],s[1],o[1],u):m(o[1],s[1],n[1],1-u);e.rotation=-Math.atan2(S,_)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=Pr.TK(v,h)*1.05,u===1&&(h[0]=v[0]+(h[0]-v[0])/2,h[1]=v[1]+(h[1]-v[1])/2)):e.__lastT===1?e.scaleY=2*Pr.TK(n,h):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=h[0],e.y=h[1]},r.prototype.updateLayout=function(e,n){this.childAt(0).updateLayout(e,n);var o=e.getItemModel(n).getModel("effect");this._updateEffectAnimation(e,o,n)},r}(Mr.Z),Sy=gS,mS=function(a){(0,Wt.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createPolyline(e,n,o),s}return r.prototype._createPolyline=function(e,n,o){var s=e.getItemLayout(n),u=new Rt.Z({shape:{points:s}});this.add(u),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childAt(0),h={shape:{points:e.getItemLayout(n)}};rr.D(u,h,s,n),this._updateCommonStl(e,n,o)},r.prototype._updateCommonStl=function(e,n,o){var s=this.childAt(0),u=e.getItemModel(n),h=o&&o.emphasisLineStyle,v=o&&o.focus,d=o&&o.blurScope,m=o&&o.emphasisDisabled;if(!o||e.hasItemOption){var _=u.getModel("emphasis");h=_.getModel("lineStyle").getLineStyle(),m=_.get("disabled"),v=_.get("focus"),d=_.get("blurScope")}s.useStyle(e.getItemVisual(n,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var S=s.ensureState("emphasis");S.style=h,(0,Qe.k5)(this,v,d,m)},r.prototype.updateLayout=function(e,n){var o=this.childAt(0);o.setShape("points",e.getItemLayout(n))},r}(Mr.Z),Ty=mS,yS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return r.prototype.createLine=function(e,n,o){return new Ty(e,n,o)},r.prototype._updateAnimationPoints=function(e,n){this._points=n;for(var o=[0],s=0,u=1;u<n.length;u++){var h=n[u-1],v=n[u];s+=Pr.TK(h,v),o.push(s)}if(s===0){this._length=0;return}for(var u=0;u<o.length;u++)o[u]/=s;this._offsets=o,this._length=s},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(e){var n=e.__t<1?e.__t:2-e.__t,o=this._points,s=this._offsets,u=o.length;if(s){var h=this._lastFrame,v;if(n<this._lastFramePercent){var d=Math.min(h+1,u-1);for(v=d;v>=0&&!(s[v]<=n);v--);v=Math.min(v,u-2)}else{for(v=h;v<u&&!(s[v]>n);v++);v=Math.min(v-1,u-2)}var m=(n-s[v])/(s[v+1]-s[v]),_=o[v],S=o[v+1];e.x=_[0]*(1-m)+m*S[0],e.y=_[1]*(1-m)+m*S[1];var A=e.__t<1?S[0]-_[0]:_[0]-S[0],L=e.__t<1?S[1]-_[1]:_[1]-S[1];e.rotation=-Math.atan2(L,A)-Math.PI/2,this._lastFrame=v,this._lastFramePercent=n,e.ignore=!1}},r}(Sy),_S=yS,Dy=z(55265),xS=z(48610),SS=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),TS=function(a){(0,Wt.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new SS},r.prototype.buildPath=function(e,n){var o=n.segs,s=n.curveness,u;if(n.polyline)for(u=this._off;u<o.length;){var h=o[u++];if(h>0){e.moveTo(o[u++],o[u++]);for(var v=1;v<h;v++)e.lineTo(o[u++],o[u++])}}else for(u=this._off;u<o.length;){var d=o[u++],m=o[u++],_=o[u++],S=o[u++];if(e.moveTo(d,m),s>0){var A=(d+_)/2-(m-S)*s,L=(m+S)/2-(_-d)*s;e.quadraticCurveTo(A,L,_,S)}else e.lineTo(_,S)}this.incremental&&(this._off=u,this.notClear=!0)},r.prototype.findDataIndex=function(e,n){var o=this.shape,s=o.segs,u=o.curveness,h=this.style.lineWidth;if(o.polyline)for(var v=0,d=0;d<s.length;){var m=s[d++];if(m>0)for(var _=s[d++],S=s[d++],A=1;A<m;A++){var L=s[d++],I=s[d++];if(Dy.m(_,S,L,I,h,e,n))return v}v++}else for(var v=0,d=0;d<s.length;){var _=s[d++],S=s[d++],L=s[d++],I=s[d++];if(u>0){var U=(_+L)/2-(S-I)*u,et=(S+I)/2-(L-_)*u;if(xS.m(_,S,U,et,L,I,h,e,n))return v}else if(Dy.m(_,S,L,I,h,e,n))return v;v++}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.segs,s=1/0,u=1/0,h=-1/0,v=-1/0,d=0;d<o.length;){var m=o[d++],_=o[d++];s=Math.min(m,s),h=Math.max(m,h),u=Math.min(_,u),v=Math.max(_,v)}e=this._rect=new gn.Z(s,u,h,v)}return e},r}(yt.ZP),DS=function(){function a(){this.group=new Mr.Z}return a.prototype.updateData=function(r){this._clear();var e=this._create();e.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(e,r)},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(r,e){var n=this._newAdded[0],o=e.getLayout("linesPoints"),s=n&&n.shape.segs;if(s&&s.length<2e4){var u=s.length,h=new Float32Array(u+o.length);h.set(s),h.set(o,u),n.setShape({segs:h})}else{this._newAdded=[];var v=this._create();v.incremental=!0,v.setShape({segs:o}),this._setCommon(v,e),v.__startIndex=r.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new TS({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(r),this.group.add(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;r.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),r.useStyle(o.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var s=e.getVisual("style");s&&s.stroke&&r.setStyle("stroke",s.stroke),r.setStyle("fill",null);var u=(0,Er.A)(r);u.seriesIndex=o.seriesIndex,r.on("mousemove",function(h){u.dataIndex=null;var v=r.hoverDataIdx;v>0&&(u.dataIndex=v+r.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),wS=DS,AS={seriesType:"lines",plan:(0,Wi.Z)(),reset:function(a){var r=a.coordinateSystem;if(r){var e=a.get("polyline"),n=a.pipelineContext.large;return{progress:function(o,s){var u=[];if(n){var h=void 0,v=o.end-o.start;if(e){for(var d=0,m=o.start;m<o.end;m++)d+=a.getLineCoordsCount(m);h=new Float32Array(v+d*2)}else h=new Float32Array(v*4);for(var _=0,S=[],m=o.start;m<o.end;m++){var A=a.getLineCoords(m,u);e&&(h[_++]=A);for(var L=0;L<A;L++)S=r.dataToPoint(u[L],!1,S),h[_++]=S[0],h[_++]=S[1]}s.setLayout("linesPoints",h)}else for(var m=o.start;m<o.end;m++){var I=s.getItemModel(m),A=a.getLineCoords(m,u),U=[];if(e)for(var et=0;et<A;et++)U.push(r.dataToPoint(u[et]));else{U[0]=r.dataToPoint(u[0]),U[1]=r.dataToPoint(u[1]);var ft=I.get(["lineStyle","curveness"]);+ft&&(U[2]=[(U[0][0]+U[1][0])/2-(U[0][1]-U[1][1])*ft,(U[0][1]+U[1][1])/2-(U[1][0]-U[0][0])*ft])}s.setItemLayout(m,U)}}}}}},wy=AS,bS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e),h=e.get("zlevel"),v=e.get(["effect","trailLength"]),d=o.getZr(),m=d.painter.getType()==="svg";m||d.painter.getLayer(h).clear(!0),this._lastZlevel!=null&&!m&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&v>0&&(m||d.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(v/10+.9,1),0)})),u.updateData(s);var _=e.get("clip",!0)&&oo(e.coordinateSystem,!1,e);_?this.group.setClipPath(_):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e);u.incrementalPrepareUpdate(s),this._clearLayer(o),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._lineDraw.incrementalUpdate(e,n.getData()),this._finished=e.end===n.getData().count()},r.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},r.prototype.updateTransform=function(e,n,o){var s=e.getData(),u=e.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var h=wy.reset(e,n,o);h.progress&&h.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(o)},r.prototype._updateLineDraw=function(e,n){var o=this._lineDraw,s=this._showEffect(n),u=!!n.get("polyline"),h=n.pipelineContext,v=h.large;return(!o||s!==this._hasEffet||u!==this._isPolyline||v!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=v?new wS:new Qu(u?s?_S:Ty:s?Sy:Ri),this._hasEffet=s,this._isPolyline=u,this._isLargeDraw=v),this.group.add(o.group),o},r.prototype._showEffect=function(e){return!!e.get(["effect","show"])},r.prototype._clearLayer=function(e){var n=e.getZr(),o=n.painter.getType()==="svg";!o&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(e,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.type="lines",r}(Mn.Z),MS=bS,CS=typeof Uint32Array=="undefined"?Array:Uint32Array,ES=typeof Float64Array=="undefined"?Array:Float64Array;function Ay(a){var r=a.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(a.data=(0,g.UI)(r,function(e){var n=[e[0].coord,e[1].coord],o={coords:n};return e[0].name&&(o.fromName=e[0].name),e[1].name&&(o.toName=e[1].name),(0,g.Jn)([o,e[0],e[1]])}))}var PS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.init=function(e){e.data=e.data||[],Ay(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),a.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(e){if(Ay(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}a.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=(0,g.WW)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=(0,g.WW)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},r.prototype._getCoordsFromItemModel=function(e){var n=this.getData().getItemModel(e),o=n.option instanceof Array?n.option:n.getShallow("coords");return o},r.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},r.prototype.getLineCoords=function(e,n){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[e*2],s=this._flatCoordsOffset[e*2+1],u=0;u<s;u++)n[u]=n[u]||[],n[u][0]=this._flatCoords[o+u*2],n[u][1]=this._flatCoords[o+u*2+1];return s}else{for(var h=this._getCoordsFromItemModel(e),u=0;u<h.length;u++)n[u]=n[u]||[],n[u][0]=h[u][0],n[u][1]=h[u][1];return h.length}},r.prototype._processFlatCoordsArray=function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),(0,g.hj)(e[0])){for(var o=e.length,s=new CS(o),u=new ES(o),h=0,v=0,d=0,m=0;m<o;){d++;var _=e[m++];s[v++]=h+n,s[v++]=_;for(var S=0;S<_;S++){var A=e[m++],L=e[m++];u[h++]=A,u[h++]=L,m>o}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,v),flatCoords:u,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},r.prototype.getInitialData=function(e,n){if(!1)var o;var s=new Ae.Z(["value"],this);return s.hasItemOption=!1,s.initData(e.data,[],function(u,h,v,d){if(u instanceof Array)return NaN;s.hasItemOption=!0;var m=u.value;if(m!=null)return m instanceof Array?m[d]:m}),s},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getItemModel(e),h=u.get("name");if(h)return h;var v=u.get("fromName"),d=u.get("toName"),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),(0,Un.TX)("nameValue",{name:m.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var e=this.option.progressive;return e==null?this.option.large?1e4:this.get("progressive"):e},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e==null?this.option.large?2e4:this.get("progressiveThreshold"):e},r.prototype.getZLevelKey=function(){var e=this.getModel("effect"),n=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&n>0?n+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(yn.Z),LS=PS;function Ad(a){return a instanceof Array||(a=[a,a]),a}var IS={seriesType:"lines",reset:function(a){var r=Ad(a.get("symbol")),e=Ad(a.get("symbolSize")),n=a.getData();n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",e&&e[0]),n.setVisual("toSymbolSize",e&&e[1]);function o(s,u){var h=s.getItemModel(u),v=Ad(h.getShallow("symbol",!0)),d=Ad(h.getShallow("symbolSize",!0));v[0]&&s.setItemVisual(u,"fromSymbol",v[0]),v[1]&&s.setItemVisual(u,"toSymbol",v[1]),d[0]&&s.setItemVisual(u,"fromSymbolSize",d[0]),d[1]&&s.setItemVisual(u,"toSymbolSize",d[1])}return{dataEach:n.hasItemOption?o:null}}},RS=IS;function OS(a){a.registerChartView(MS),a.registerSeriesModel(LS),a.registerLayout(wy),a.registerVisual(RS)}var NS=256,BS=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=be.qW.createCanvas();this.canvas=r}return a.prototype.update=function(r,e,n,o,s,u){var h=this._getBrush(),v=this._getGradient(s,"inRange"),d=this._getGradient(s,"outOfRange"),m=this.pointSize+this.blurSize,_=this.canvas,S=_.getContext("2d"),A=r.length;_.width=e,_.height=n;for(var L=0;L<A;++L){var I=r[L],U=I[0],et=I[1],ft=I[2],ht=o(ft);S.globalAlpha=ht,S.drawImage(h,U-m,et-m)}if(!_.width||!_.height)return _;for(var Tt=S.getImageData(0,0,_.width,_.height),Et=Tt.data,Ct=0,It=Et.length,zt=this.minOpacity,Kt=this.maxOpacity,Yt=Kt-zt;Ct<It;){var ht=Et[Ct+3]/256,ne=Math.floor(ht*(NS-1))*4;if(ht>0){var oe=u(ht)?v:d;ht>0&&(ht=ht*Yt+zt),Et[Ct++]=oe[ne],Et[Ct++]=oe[ne+1],Et[Ct++]=oe[ne+2],Et[Ct++]=oe[ne+3]*ht*256}else Ct+=4}return S.putImageData(Tt,0,0),_},a.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=be.qW.createCanvas()),e=this.pointSize+this.blurSize,n=e*2;r.width=n,r.height=n;var o=r.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),r},a.prototype._getGradient=function(r,e){for(var n=this._gradientPixels,o=n[e]||(n[e]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],u=0,h=0;h<256;h++)r[e](h/255,!0,s),o[u++]=s[0],o[u++]=s[1],o[u++]=s[2],o[u++]=s[3];return o},a}(),FS=BS;function GS(a,r,e){var n=a[1]-a[0];r=g.UI(r,function(u){return{interval:[(u.interval[0]-a[0])/n,(u.interval[1]-a[0])/n]}});var o=r.length,s=0;return function(u){var h;for(h=s;h<o;h++){var v=r[h].interval;if(v[0]<=u&&u<=v[1]){s=h;break}}if(h===o)for(h=s-1;h>=0;h--){var v=r[h].interval;if(v[0]<=u&&u<=v[1]){s=h;break}}return h>=0&&h<o&&e[h]}}function zS(a,r){var e=a[1]-a[0];return r=[(r[0]-a[0])/e,(r[1]-a[0])/e],function(n){return n>=r[0]&&n<=r[1]}}function by(a){var r=a.dimensions;return r[0]==="lng"&&r[1]==="lat"}var VS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s;n.eachComponent("visualMap",function(h){h.eachTargetSeries(function(v){v===e&&(s=h)})}),this._progressiveEls=null,this.group.removeAll();var u=e.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):by(u)&&this._renderOnGeo(u,e,s,o)},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll()},r.prototype.incrementalRender=function(e,n,o,s){var u=n.coordinateSystem;u&&(by(u)?this.render(n,o,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,s,e.start,e.end,!0)))},r.prototype.eachRendered=function(e){mr.traverseElements(this._progressiveEls||this.group,e)},r.prototype._renderOnCartesianAndCalendar=function(e,n,o,s,u){var h=e.coordinateSystem,v=ya(h,"cartesian2d"),d,m,_,S;if(v){var A=h.getAxis("x"),L=h.getAxis("y");d=A.getBandWidth()+.5,m=L.getBandWidth()+.5,_=A.scale.getExtent(),S=L.scale.getExtent()}for(var I=this.group,U=e.getData(),et=e.getModel(["emphasis","itemStyle"]).getItemStyle(),ft=e.getModel(["blur","itemStyle"]).getItemStyle(),ht=e.getModel(["select","itemStyle"]).getItemStyle(),Tt=e.get(["itemStyle","borderRadius"]),Et=(0,Ge.k3)(e),Ct=e.getModel("emphasis"),It=Ct.get("focus"),zt=Ct.get("blurScope"),Kt=Ct.get("disabled"),Yt=v?[U.mapDimension("x"),U.mapDimension("y"),U.mapDimension("value")]:[U.mapDimension("time"),U.mapDimension("value")],ne=o;ne<s;ne++){var oe=void 0,ce=U.getItemVisual(ne,"style");if(v){var me=U.get(Yt[0],ne),_e=U.get(Yt[1],ne);if(isNaN(U.get(Yt[2],ne))||isNaN(me)||isNaN(_e)||me<_[0]||me>_[1]||_e<S[0]||_e>S[1])continue;var Ce=h.dataToPoint([me,_e]);oe=new Kr.Z({shape:{x:Ce[0]-d/2,y:Ce[1]-m/2,width:d,height:m},style:ce})}else{if(isNaN(U.get(Yt[1],ne)))continue;oe=new Kr.Z({z2:1,shape:h.dataToRect([U.get(Yt[0],ne)]).contentShape,style:ce})}if(U.hasItemOption){var ke=U.getItemModel(ne),Oe=ke.getModel("emphasis");et=Oe.getModel("itemStyle").getItemStyle(),ft=ke.getModel(["blur","itemStyle"]).getItemStyle(),ht=ke.getModel(["select","itemStyle"]).getItemStyle(),Tt=ke.get(["itemStyle","borderRadius"]),It=Oe.get("focus"),zt=Oe.get("blurScope"),Kt=Oe.get("disabled"),Et=(0,Ge.k3)(ke)}oe.shape.r=Tt;var $e=e.getRawValue(ne),yr="-";$e&&$e[2]!=null&&(yr=$e[2]+""),(0,Ge.ni)(oe,Et,{labelFetcher:e,labelDataIndex:ne,defaultOpacity:ce.opacity,defaultText:yr}),oe.ensureState("emphasis").style=et,oe.ensureState("blur").style=ft,oe.ensureState("select").style=ht,(0,Qe.k5)(oe,It,zt,Kt),oe.incremental=u,u&&(oe.states.emphasis.hoverLayer=!0),I.add(oe),U.setItemGraphicEl(ne,oe),this._progressiveEls&&this._progressiveEls.push(oe)}},r.prototype._renderOnGeo=function(e,n,o,s){var u=o.targetVisuals.inRange,h=o.targetVisuals.outOfRange,v=n.getData(),d=this._hmLayer||this._hmLayer||new FS;d.blurSize=n.get("blurSize"),d.pointSize=n.get("pointSize"),d.minOpacity=n.get("minOpacity"),d.maxOpacity=n.get("maxOpacity");var m=e.getViewRect().clone(),_=e.getRoamTransform();m.applyTransform(_);var S=Math.max(m.x,0),A=Math.max(m.y,0),L=Math.min(m.width+m.x,s.getWidth()),I=Math.min(m.height+m.y,s.getHeight()),U=L-S,et=I-A,ft=[v.mapDimension("lng"),v.mapDimension("lat"),v.mapDimension("value")],ht=v.mapArray(ft,function(It,zt,Kt){var Yt=e.dataToPoint([It,zt]);return Yt[0]-=S,Yt[1]-=A,Yt.push(Kt),Yt}),Tt=o.getExtent(),Et=o.type==="visualMap.continuous"?zS(Tt,o.option.range):GS(Tt,o.getPieceList(),o.option.selected);d.update(ht,U,et,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:h.color.getColorMapper()},Et);var Ct=new gt.ZP({style:{width:U,height:et,x:S,y:A,image:d.canvas},silent:!0});this.group.add(Ct)},r.type="heatmap",r}(Mn.Z),kS=VS,US=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var e=Ks.Z.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(yn.Z),ZS=US;function WS(a){a.registerChartView(kS),a.registerSeriesModel(ZS)}var HS=["itemStyle","borderWidth"],My=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],X0=new jo.Z,XS=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group,u=e.getData(),h=this._data,v=e.coordinateSystem,d=v.getBaseAxis(),m=d.isHorizontal(),_=v.master.getRect(),S={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:v,coordSysExtent:[[_.x,_.x+_.width],[_.y,_.y+_.height]],isHorizontal:m,valueDim:My[+m],categoryDim:My[1-+m]};return u.diff(h).add(function(A){if(u.hasValue(A)){var L=Oy(u,A),I=Cy(u,A,L,S),U=Ny(u,S,I);u.setItemGraphicEl(A,U),s.add(U),Gy(U,S,I)}}).update(function(A,L){var I=h.getItemGraphicEl(L);if(!u.hasValue(A)){s.remove(I);return}var U=Oy(u,A),et=Cy(u,A,U,S),ft=Fy(u,et);I&&ft!==I.__pictorialShapeStr&&(s.remove(I),u.setItemGraphicEl(A,null),I=null),I?qS(I,S,et):I=Ny(u,S,et,!0),u.setItemGraphicEl(A,I),I.__pictorialSymbolMeta=et,s.add(I),Gy(I,S,et)}).remove(function(A){var L=h.getItemGraphicEl(A);L&&By(h,A,L.__pictorialSymbolMeta.animationModel,L)}).execute(),this._data=u,this.group},r.prototype.remove=function(e,n){var o=this.group,s=this._data;e.get("animation")?s&&s.eachItemGraphicEl(function(u){By(s,(0,Er.A)(u).dataIndex,e,u)}):o.removeAll()},r.type="pictorialBar",r}(Mn.Z);function Cy(a,r,e,n){var o=a.getItemLayout(r),s=e.get("symbolRepeat"),u=e.get("symbolClip"),h=e.get("symbolPosition")||"start",v=e.get("symbolRotate"),d=(v||0)*Math.PI/180||0,m=e.get("symbolPatternSize")||2,_=e.isAnimationEnabled(),S={dataIndex:r,layout:o,itemModel:e,symbolType:a.getItemVisual(r,"symbol")||"circle",style:a.getItemVisual(r,"style"),symbolClip:u,symbolRepeat:s,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:d,animationModel:_?e:null,hoverScale:_&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};KS(e,s,o,n,S),YS(a,r,o,s,u,S.boundingLength,S.pxSign,m,n,S),jS(e,S.symbolScale,d,n,S);var A=S.symbolSize,L=(0,fn.Cq)(e.get("symbolOffset"),A);return JS(e,A,o,s,u,L,h,S.valueLineWidth,S.boundingLength,S.repeatCutLength,n,S),S}function KS(a,r,e,n,o){var s=n.valueDim,u=a.get("symbolBoundingData"),h=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),v=h.toGlobalCoord(h.dataToCoord(0)),d=1-+(e[s.wh]<=0),m;if(g.kJ(u)){var _=[K0(h,u[0])-v,K0(h,u[1])-v];_[1]<_[0]&&_.reverse(),m=_[d]}else u!=null?m=K0(h,u)-v:r?m=n.coordSysExtent[s.index][d]-v:m=e[s.wh];o.boundingLength=m,r&&(o.repeatCutLength=e[s.wh]),o.pxSign=m>0?1:-1}function K0(a,r){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(r)))}function YS(a,r,e,n,o,s,u,h,v,d){var m=v.valueDim,_=v.categoryDim,S=Math.abs(e[_.wh]),A=a.getItemVisual(r,"symbolSize"),L;g.kJ(A)?L=A.slice():A==null?L=["100%","100%"]:L=[A,A],L[_.index]=(0,De.GM)(L[_.index],S),L[m.index]=(0,De.GM)(L[m.index],n?S:Math.abs(s)),d.symbolSize=L;var I=d.symbolScale=[L[0]/h,L[1]/h];I[m.index]*=(v.isHorizontal?-1:1)*u}function jS(a,r,e,n,o){var s=a.get(HS)||0;s&&(X0.attr({scaleX:r[0],scaleY:r[1],rotation:e}),X0.updateTransform(),s/=X0.getLineScale(),s*=r[n.valueDim.index]),o.valueLineWidth=s||0}function JS(a,r,e,n,o,s,u,h,v,d,m,_){var S=m.categoryDim,A=m.valueDim,L=_.pxSign,I=Math.max(r[A.index]+h,0),U=I;if(n){var et=Math.abs(v),ft=g.Jv(a.get("symbolMargin"),"15%")+"",ht=!1;ft.lastIndexOf("!")===ft.length-1&&(ht=!0,ft=ft.slice(0,ft.length-1));var Tt=(0,De.GM)(ft,r[A.index]),Et=Math.max(I+Tt*2,0),Ct=ht?0:Tt*2,It=(0,De.kE)(n),zt=It?n:zy((et+Ct)/Et),Kt=et-zt*I;Tt=Kt/2/(ht?zt:Math.max(zt-1,1)),Et=I+Tt*2,Ct=ht?0:Tt*2,!It&&n!=="fixed"&&(zt=d?zy((Math.abs(d)+Ct)/Et):0),U=zt*Et-Ct,_.repeatTimes=zt,_.symbolMargin=Tt}var Yt=L*(U/2),ne=_.pathPosition=[];ne[S.index]=e[S.wh]/2,ne[A.index]=u==="start"?Yt:u==="end"?v-Yt:v/2,s&&(ne[0]+=s[0],ne[1]+=s[1]);var oe=_.bundlePosition=[];oe[S.index]=e[S.xy],oe[A.index]=e[A.xy];var ce=_.barRectShape=g.l7({},e);ce[A.wh]=L*Math.max(Math.abs(e[A.wh]),Math.abs(ne[A.index]+Yt)),ce[S.wh]=e[S.wh];var me=_.clipShape={};me[S.xy]=-e[S.xy],me[S.wh]=m.ecSize[S.wh],me[A.xy]=0,me[A.wh]=e[A.wh]}function Ey(a){var r=a.symbolPatternSize,e=(0,fn.th)(a.symbolType,-r/2,-r/2,r,r);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function Py(a,r,e,n){var o=a.__pictorialBundle,s=e.symbolSize,u=e.valueLineWidth,h=e.pathPosition,v=r.valueDim,d=e.repeatTimes||0,m=0,_=s[r.valueDim.index]+u+e.symbolMargin*2;for(Y0(a,function(I){I.__pictorialAnimationIndex=m,I.__pictorialRepeatTimes=d,m<d?cf(I,null,L(m),e,n):cf(I,null,{scaleX:0,scaleY:0},e,n,function(){o.remove(I)}),m++});m<d;m++){var S=Ey(e);S.__pictorialAnimationIndex=m,S.__pictorialRepeatTimes=d,o.add(S);var A=L(m);cf(S,{x:A.x,y:A.y,scaleX:0,scaleY:0},{scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation},e,n)}function L(I){var U=h.slice(),et=e.pxSign,ft=I;return(e.symbolRepeatDirection==="start"?et>0:et<0)&&(ft=d-1-I),U[v.index]=_*(ft-d/2+.5)+h[v.index],{x:U[0],y:U[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function Ly(a,r,e,n){var o=a.__pictorialBundle,s=a.__pictorialMainPath;s?cf(s,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,n):(s=a.__pictorialMainPath=Ey(e),o.add(s),cf(s,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,n))}function Iy(a,r,e){var n=g.l7({},r.barRectShape),o=a.__pictorialBarRect;o?cf(o,null,{shape:n},r,e):(o=a.__pictorialBarRect=new Kr.Z({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,a.add(o))}function Ry(a,r,e,n){if(e.symbolClip){var o=a.__pictorialClipPath,s=g.l7({},e.clipShape),u=r.valueDim,h=e.animationModel,v=e.dataIndex;if(o)rr.D(o,{shape:s},h,v);else{s[u.wh]=0,o=new Kr.Z({shape:s}),a.__pictorialBundle.setClipPath(o),a.__pictorialClipPath=o;var d={};d[u.wh]=e.clipShape[u.wh],mr[n?"updateProps":"initProps"](o,{shape:d},h,v)}}}function Oy(a,r){var e=a.getItemModel(r);return e.getAnimationDelayParams=QS,e.isAnimationEnabled=$S,e}function QS(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function $S(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ny(a,r,e,n){var o=new Mr.Z,s=new Mr.Z;return o.add(s),o.__pictorialBundle=s,s.x=e.bundlePosition[0],s.y=e.bundlePosition[1],e.symbolRepeat?Py(o,r,e):Ly(o,r,e),Iy(o,e,n),Ry(o,r,e,n),o.__pictorialShapeStr=Fy(a,e),o.__pictorialSymbolMeta=e,o}function qS(a,r,e){var n=e.animationModel,o=e.dataIndex,s=a.__pictorialBundle;rr.D(s,{x:e.bundlePosition[0],y:e.bundlePosition[1]},n,o),e.symbolRepeat?Py(a,r,e,!0):Ly(a,r,e,!0),Iy(a,e,!0),Ry(a,r,e,!0)}function By(a,r,e,n){var o=n.__pictorialBarRect;o&&o.removeTextContent();var s=[];Y0(n,function(u){s.push(u)}),n.__pictorialMainPath&&s.push(n.__pictorialMainPath),n.__pictorialClipPath&&(e=null),g.S6(s,function(u){rr.bX(u,{scaleX:0,scaleY:0},e,r,function(){n.parent&&n.parent.remove(n)})}),a.setItemGraphicEl(r,null)}function Fy(a,r){return[a.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function Y0(a,r,e){g.S6(a.__pictorialBundle.children(),function(n){n!==a.__pictorialBarRect&&r.call(e,n)})}function cf(a,r,e,n,o,s){r&&a.attr(r),n.symbolClip&&!o?e&&a.attr(e):e&&mr[o?"updateProps":"initProps"](a,e,n.animationModel,n.dataIndex,s)}function Gy(a,r,e){var n=e.dataIndex,o=e.itemModel,s=o.getModel("emphasis"),u=s.getModel("itemStyle").getItemStyle(),h=o.getModel(["blur","itemStyle"]).getItemStyle(),v=o.getModel(["select","itemStyle"]).getItemStyle(),d=o.getShallow("cursor"),m=s.get("focus"),_=s.get("blurScope"),S=s.get("scale");Y0(a,function(I){if(I instanceof gt.ZP){var U=I.style;I.useStyle(g.l7({image:U.image,x:U.x,y:U.y,width:U.width,height:U.height},e.style))}else I.useStyle(e.style);var et=I.ensureState("emphasis");et.style=u,S&&(et.scaleX=I.scaleX*1.1,et.scaleY=I.scaleY*1.1),I.ensureState("blur").style=h,I.ensureState("select").style=v,d&&(I.cursor=d),I.z2=e.z2});var A=r.valueDim.posDesc[+(e.boundingLength>0)],L=a.__pictorialBarRect;(0,Ge.ni)(L,(0,Ge.k3)(o),{labelFetcher:r.seriesModel,labelDataIndex:n,defaultText:pn(r.seriesModel.getData(),n),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:A}),(0,Qe.k5)(a,m,_,s.get("disabled"))}function zy(a){var r=Math.round(a);return Math.abs(a-r)<1e-4?r:Math.ceil(a)}var tT=XS,eT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return r.prototype.getInitialData=function(e){return e.stack=null,a.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=(0,Di.ZL)(hi.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(hi),rT=eT;function nT(a){a.registerChartView(tT),a.registerSeriesModel(rT),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,(0,g.WA)(Qr.bK,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Qr.Bk)("pictorialBar"))}var iT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._layers=[],e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this,h=this.group,v=e.getLayerSeries(),d=s.getLayout("layoutInfo"),m=d.rect,_=d.boundaryGap;h.x=0,h.y=m.y+_[0];function S(U){return U.name}var A=new yo.Z(this._layersSeries||[],v,S,S),L=[];A.add((0,g.ak)(I,this,"add")).update((0,g.ak)(I,this,"update")).remove((0,g.ak)(I,this,"remove")).execute();function I(U,et,ft){var ht=u._layers;if(U==="remove"){h.remove(ht[et]);return}for(var Tt=[],Et=[],Ct,It=v[et].indices,zt=0;zt<It.length;zt++){var Kt=s.getItemLayout(It[zt]),Yt=Kt.x,ne=Kt.y0,oe=Kt.y;Tt.push(Yt,ne),Et.push(Yt,ne+oe),Ct=s.getItemVisual(It[zt],"style")}var ce,me=s.getItemLayout(It[0]),_e=e.getModel("label"),Ce=_e.get("margin"),ke=e.getModel("emphasis");if(U==="add"){var Oe=L[et]=new Mr.Z;ce=new Oo({shape:{points:Tt,stackedOnPoints:Et,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Oe.add(ce),h.add(Oe),e.isAnimationEnabled()&&ce.setClipPath(aT(ce.getBoundingRect(),e,function(){ce.removeClipPath()}))}else{var Oe=ht[ft];ce=Oe.childAt(0),h.add(Oe),L[et]=Oe,rr.D(ce,{shape:{points:Tt,stackedOnPoints:Et}},e),(0,rr.Zi)(ce)}(0,Ge.ni)(ce,(0,Ge.k3)(e),{labelDataIndex:It[zt-1],defaultText:s.getName(It[zt-1]),inheritColor:Ct.fill},{normal:{verticalAlign:"middle"}}),ce.setTextConfig({position:null,local:!0});var $e=ce.getTextContent();$e&&($e.x=me.x-Ce,$e.y=me.y0+me.y/2),ce.useStyle(Ct),s.setItemGraphicEl(et,ce),(0,Qe.WO)(ce,e),(0,Qe.k5)(ce,ke.get("focus"),ke.get("blurScope"),ke.get("disabled"))}this._layersSeries=v,this._layers=L},r.type="themeRiver",r}(Mn.Z);function aT(a,r,e){var n=new Kr.Z({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return rr.KZ(n,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},r,e),n}var oT=iT,j0=2,sT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new fr(g.ak(this.getData,this),g.ak(this.getRawData,this))},r.prototype.fixData=function(e){var n=e.length,o={},s=(0,We.pv)(e,function(S){return o.hasOwnProperty(S[0]+"")||(o[S[0]+""]=-1),S[2]}),u=[];s.buckets.each(function(S,A){u.push({name:A,dataList:S})});for(var h=u.length,v=0;v<h;++v){for(var d=u[v].name,m=0;m<u[v].dataList.length;++m){var _=u[v].dataList[m][0]+"";o[_]=v}for(var _ in o)o.hasOwnProperty(_)&&o[_]!==v&&(o[_]=v,e[n]=[_,0,d],n++)}return e},r.prototype.getInitialData=function(e,n){for(var o=this.getReferringComponents("singleAxis",We.C6).models[0],s=o.get("type"),u=g.hX(e.data,function(L){return L[2]!==void 0}),h=this.fixData(u||[]),v=[],d=this.nameMap=g.kW(),m=0,_=0;_<h.length;++_)v.push(h[_][j0]),d.get(h[_][j0])||(d.set(h[_][j0],m),m++);var S=(0,ge.Z)(h,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,Te.T)(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,A=new Ae.Z(S,this);return A.initData(h),A},r.prototype.getLayerSeries=function(){for(var e=this.getData(),n=e.count(),o=[],s=0;s<n;++s)o[s]=s;var u=e.mapDimension("single"),h=(0,We.pv)(o,function(d){return e.get("name",d)}),v=[];return h.buckets.each(function(d,m){d.sort(function(_,S){return e.get(u,_)-e.get(u,S)}),v.push({name:m,indices:d})}),v},r.prototype.getAxisTooltipData=function(e,n,o){g.kJ(e)||(e=e?[e]:[]);for(var s=this.getData(),u=this.getLayerSeries(),h=[],v=u.length,d,m=0;m<v;++m){for(var _=Number.MAX_VALUE,S=-1,A=u[m].indices.length,L=0;L<A;++L){var I=s.get(e[0],u[m].indices[L]),U=Math.abs(I-n);U<=_&&(d=I,_=U,S=u[m].indices[L])}h.push(S)}return{dataIndices:h,nestestValue:d}},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getName(e),h=s.get(s.mapDimension("value"),e);return(0,Un.TX)("nameValue",{name:u,value:h})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(yn.Z),lT=sT;function uT(a,r){a.eachSeriesByType("themeRiver",function(e){var n=e.getData(),o=e.coordinateSystem,s={},u=o.getRect();s.rect=u;var h=e.get("boundaryGap"),v=o.getAxis();if(s.boundaryGap=h,v.orient==="horizontal"){h[0]=De.GM(h[0],u.height),h[1]=De.GM(h[1],u.height);var d=u.height-h[0]-h[1];Vy(n,e,d)}else{h[0]=De.GM(h[0],u.width),h[1]=De.GM(h[1],u.width);var m=u.width-h[0]-h[1];Vy(n,e,m)}n.setLayout("layoutInfo",s)})}function Vy(a,r,e){if(a.count())for(var n=r.coordinateSystem,o=r.getLayerSeries(),s=a.mapDimension("single"),u=a.mapDimension("value"),h=g.UI(o,function(U){return g.UI(U.indices,function(et){var ft=n.dataToPoint(a.get(s,et));return ft[1]=a.get(u,et),ft})}),v=fT(h),d=v.y0,m=e/v.max,_=o.length,S=o[0].indices.length,A,L=0;L<S;++L){A=d[L]*m,a.setItemLayout(o[0].indices[L],{layerIndex:0,x:h[0][L][0],y0:A,y:h[0][L][1]*m});for(var I=1;I<_;++I)A+=h[I-1][L][1]*m,a.setItemLayout(o[I].indices[L],{layerIndex:I,x:h[I][L][0],y0:A,y:h[I][L][1]*m})}}function fT(a){for(var r=a.length,e=a[0].length,n=[],o=[],s=0,u=0;u<e;++u){for(var h=0,v=0;v<r;++v)h+=a[v][u][1];h>s&&(s=h),n.push(h)}for(var d=0;d<e;++d)o[d]=(s-n[d])/2;s=0;for(var m=0;m<e;++m){var _=n[m]+o[m];_>s&&(s=_)}return{y0:o,max:s}}function hT(a){a.registerChartView(oT),a.registerSeriesModel(lT),a.registerLayout(uT),a.registerProcessor(Xn("themeRiver"))}var cT=z(47833),vT=2,dT=4,pT=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s){var u=a.call(this)||this;u.z2=vT,u.textConfig={inside:!0},(0,Er.A)(u).seriesIndex=n.seriesIndex;var h=new he.ZP({z2:dT,silent:e.getModel().get(["label","silent"])});return u.setTextContent(h),u.updateData(!0,e,n,o,s),u}return r.prototype.updateData=function(e,n,o,s,u){this.node=n,n.piece=this,o=o||this._seriesModel,s=s||this._ecModel;var h=this;(0,Er.A)(h).dataIndex=n.dataIndex;var v=n.getModel(),d=v.getModel("emphasis"),m=n.getLayout(),_=g.l7({},m);_.label=null;var S=n.getVisual("style");S.lineJoin="bevel";var A=n.getVisual("decal");A&&(S.decal=(0,Eu.I)(A,u));var L=ua(v.getModel("itemStyle"),_,!0);g.l7(_,L),g.S6(Qe.L1,function(ft){var ht=h.ensureState(ft),Tt=v.getModel([ft,"itemStyle"]);ht.style=Tt.getItemStyle();var Et=ua(Tt,_);Et&&(ht.shape=Et)}),e?(h.setShape(_),h.shape.r=m.r0,rr.KZ(h,{shape:{r:m.r}},o,n.dataIndex)):(rr.D(h,{shape:_},o),(0,rr.Zi)(h)),h.useStyle(S),this._updateLabel(o);var I=v.getShallow("cursor");I&&h.attr("cursor",I),this._seriesModel=o||this._seriesModel,this._ecModel=s||this._ecModel;var U=d.get("focus"),et=U==="ancestor"?n.getAncestorsIndices():U==="descendant"?n.getDescendantIndices():U;(0,Qe.k5)(this,et,d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e){var n=this,o=this.node.getModel(),s=o.getModel("label"),u=this.node.getLayout(),h=u.endAngle-u.startAngle,v=(u.startAngle+u.endAngle)/2,d=Math.cos(v),m=Math.sin(v),_=this,S=_.getTextContent(),A=this.node.dataIndex,L=s.get("minAngle")/180*Math.PI,I=s.get("show")&&!(L!=null&&Math.abs(h)<L);S.ignore=!I,g.S6(Qe.qc,function(et){var ft=et==="normal"?o.getModel("label"):o.getModel([et,"label"]),ht=et==="normal",Tt=ht?S:S.ensureState(et),Et=e.getFormattedLabel(A,et);ht&&(Et=Et||n.node.name),Tt.style=(0,Ge.Lr)(ft,{},null,et!=="normal",!0),Et&&(Tt.style.text=Et);var Ct=ft.get("show");Ct!=null&&!ht&&(Tt.ignore=!Ct);var It=U(ft,"position"),zt=ht?_:_.states[et],Kt=zt.style.fill;zt.textConfig={outsideFill:ft.get("color")==="inherit"?Kt:null,inside:It!=="outside"};var Yt,ne=U(ft,"distance")||0,oe=U(ft,"align");It==="outside"?(Yt=u.r+ne,oe=v>Math.PI/2?"right":"left"):!oe||oe==="center"?(h===2*Math.PI&&u.r0===0?Yt=0:Yt=(u.r+u.r0)/2,oe="center"):oe==="left"?(Yt=u.r0+ne,v>Math.PI/2&&(oe="right")):oe==="right"&&(Yt=u.r-ne,v>Math.PI/2&&(oe="left")),Tt.style.align=oe,Tt.style.verticalAlign=U(ft,"verticalAlign")||"middle",Tt.x=Yt*d+u.cx,Tt.y=Yt*m+u.cy;var ce=U(ft,"rotate"),me=0;ce==="radial"?(me=(0,cT.m)(-v),me>Math.PI/2&&me<Math.PI*1.5&&(me+=Math.PI)):ce==="tangential"?(me=Math.PI/2-v,me>Math.PI/2?me-=Math.PI:me<-Math.PI/2&&(me+=Math.PI)):g.hj(ce)&&(me=ce*Math.PI/180),Tt.rotation=me});function U(et,ft){var ht=et.get(ft);return ht==null?s.get(ft):ht}S.dirtyStyle()},r}(Ei.C),ky=pT,J0="sunburstRootToNode",Uy="sunburstHighlight",gT="sunburstUnhighlight";function mT(a){a.registerAction({type:J0,update:"updateView"},function(r,e){e.eachComponent({mainType:"series",subType:"sunburst",query:r},n);function n(o,s){var u=rs(r,[J0],o);if(u){var h=o.getViewRoot();h&&(r.direction=Fn(h,u.node)?"rollUp":"drillDown"),o.resetViewRoot(u.node)}}}),a.registerAction({type:Uy,update:"none"},function(r,e,n){r=(0,g.l7)({},r),e.eachComponent({mainType:"series",subType:"sunburst",query:r},o);function o(s){var u=rs(r,[Uy],s);u&&(r.dataIndex=u.node.dataIndex)}n.dispatchAction((0,g.l7)(r,{type:"highlight"}))}),a.registerAction({type:gT,update:"updateView"},function(r,e,n){r=(0,g.l7)({},r),n.dispatchAction((0,g.l7)(r,{type:"downplay"}))})}var yT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){var u=this;this.seriesModel=e,this.api=o,this.ecModel=n;var h=e.getData(),v=h.tree.root,d=e.getViewRoot(),m=this.group,_=e.get("renderLabelForZeroData"),S=[];d.eachNode(function(ft){S.push(ft)});var A=this._oldChildren||[];L(S,A),et(v,d),this._initEvents(),this._oldChildren=S;function L(ft,ht){if(ft.length===0&&ht.length===0)return;new yo.Z(ht,ft,Tt,Tt).add(Et).update(Et).remove(g.WA(Et,null)).execute();function Tt(Ct){return Ct.getId()}function Et(Ct,It){var zt=Ct==null?null:ft[Ct],Kt=It==null?null:ht[It];I(zt,Kt)}}function I(ft,ht){if(!_&&ft&&!ft.getValue()&&(ft=null),ft!==v&&ht!==v){if(ht&&ht.piece)ft?(ht.piece.updateData(!1,ft,e,n,o),h.setItemGraphicEl(ft.dataIndex,ht.piece)):U(ht);else if(ft){var Tt=new ky(ft,e,n,o);m.add(Tt),h.setItemGraphicEl(ft.dataIndex,Tt)}}}function U(ft){ft&&ft.piece&&(m.remove(ft.piece),ft.piece=null)}function et(ft,ht){ht.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,ft,e,n,o):(u.virtualPiece=new ky(ft,e,n,o),m.add(u.virtualPiece)),ht.piece.off("click"),u.virtualPiece.on("click",function(Tt){u._rootToNode(ht.parentNode)})):u.virtualPiece&&(m.remove(u.virtualPiece),u.virtualPiece=null)}},r.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(n){var o=!1,s=e.seriesModel.getViewRoot();s.eachNode(function(u){if(!o&&u.piece&&u.piece===n.target){var h=u.getModel().get("nodeClick");if(h==="rootToNode")e._rootToNode(u);else if(h==="link"){var v=u.getModel(),d=v.get("link");if(d){var m=v.get("target",!0)||"_blank";(0,ii.MI)(d,m)}}o=!0}})})},r.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:J0,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,h=e[1]-s.cy,v=Math.sqrt(u*u+h*h);return v<=s.r&&v>=s.r0}},r.type="sunburst",r}(Mn.Z),_T=yT,xT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};Zy(o);var s=this._levelModels=g.UI(e.levels||[],function(v){return new zn.Z(v,this,n)},this),u=oh.createTree(o,this,h);function h(v){v.wrapMethod("getItemModel",function(d,m){var _=u.getNodeByDataIndex(m),S=s[_.depth];return S&&(d.parentModel=S),d})}return u.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=Ml(o,this),n},r.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){mv(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(yn.Z);function Zy(a){var r=0;g.S6(a.children,function(n){Zy(n);var o=n.value;g.kJ(o)&&(o=o[0]),r+=o});var e=a.value;g.kJ(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.kJ(a.value)?a.value[0]=e:a.value=e}var ST=xT,Wy=Math.PI/180;function TT(a,r,e){r.eachSeriesByType(a,function(n){var o=n.get("center"),s=n.get("radius");g.kJ(s)||(s=[0,s]),g.kJ(o)||(o=[o,o]);var u=e.getWidth(),h=e.getHeight(),v=Math.min(u,h),d=(0,De.GM)(o[0],u),m=(0,De.GM)(o[1],h),_=(0,De.GM)(s[0],v/2),S=(0,De.GM)(s[1],v/2),A=-n.get("startAngle")*Wy,L=n.get("minAngle")*Wy,I=n.getData().tree.root,U=n.getViewRoot(),et=U.depth,ft=n.get("sort");ft!=null&&Hy(U,ft);var ht=0;g.S6(U.children,function(Ce){!isNaN(Ce.getValue())&&ht++});var Tt=U.getValue(),Et=Math.PI/(Tt||ht)*2,Ct=U.depth>0,It=U.height-(Ct?-1:1),zt=(S-_)/(It||1),Kt=n.get("clockwise"),Yt=n.get("stillShowZeroSum"),ne=Kt?1:-1,oe=function(Ce,ke){if(Ce){var Oe=ke;if(Ce!==I){var $e=Ce.getValue(),yr=Tt===0&&Yt?Et:$e*Et;yr<L&&(yr=L),Oe=ke+ne*yr;var _r=Ce.depth-et-(Ct?-1:1),Xr=_+zt*_r,Wr=_+zt*(_r+1),Gr=n.getLevelModel(Ce);if(Gr){var ln=Gr.get("r0",!0),Ln=Gr.get("r",!0),on=Gr.get("radius",!0);on!=null&&(ln=on[0],Ln=on[1]),ln!=null&&(Xr=(0,De.GM)(ln,v/2)),Ln!=null&&(Wr=(0,De.GM)(Ln,v/2))}Ce.setLayout({angle:yr,startAngle:ke,endAngle:Oe,clockwise:Kt,cx:d,cy:m,r0:Xr,r:Wr})}if(Ce.children&&Ce.children.length){var zr=0;g.S6(Ce.children,function(bn){zr+=oe(bn,ke+zr)})}return Oe-ke}};if(Ct){var ce=_,me=_+zt,_e=Math.PI*2;I.setLayout({angle:_e,startAngle:A,endAngle:A+_e,clockwise:Kt,cx:d,cy:m,r0:ce,r:me})}oe(U,A)})}function Hy(a,r){var e=a.children||[];a.children=DT(e,r),e.length&&g.S6(a.children,function(n){Hy(n,r)})}function DT(a,r){if(g.mf(r)){var e=g.UI(a,function(o,s){var u=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return u}},index:s}});return e.sort(function(o,s){return r(o.params,s.params)}),g.UI(e,function(o){return a[o.index]})}else{var n=r==="asc";return a.sort(function(o,s){var u=(o.getValue()-s.getValue())*(n?1:-1);return u===0?(o.dataIndex-s.dataIndex)*(n?-1:1):u})}}function wT(a){var r={};function e(n,o,s){for(var u=n;u&&u.depth>1;)u=u.parentNode;var h=o.getColorFromPalette(u.name||u.dataIndex+"",r);return n.depth>1&&(0,g.HD)(h)&&(h=(0,Bn.lift)(h,(n.depth-1)/(s-1)*.5)),h}a.eachSeriesByType("sunburst",function(n){var o=n.getData(),s=o.tree;s.eachNode(function(u){var h=u.getModel(),v=h.getModel("itemStyle").getItemStyle();v.fill||(v.fill=e(u,n,s.root.height));var d=o.ensureUniqueItemVisual(u.dataIndex,"style");(0,g.l7)(d,v)})})}function AT(a){a.registerChartView(_T),a.registerSeriesModel(ST),a.registerLayout((0,g.WA)(TT,"sunburst")),a.registerProcessor((0,g.WA)(Xn,"sunburst")),a.registerVisual(wT),mT(a)}var Xy={color:"fill",borderColor:"stroke"},bT={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ps=(0,We.Yf)(),MT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(e,n){return(0,un.Z)(null,this)},r.prototype.getDataParams=function(e,n,o){var s=a.prototype.getDataParams.call(this,e,n);return o&&(s.info=ps(o).info),s},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(yn.Z),CT=MT;function ET(a,r){return r=r||[0,0],g.UI(["x","y"],function(e,n){var o=this.getAxis(e),s=r[n],u=a[n]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-u)-o.dataToCoord(s+u))},this)}function PT(a){var r=a.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:g.ak(ET,a)}}}function LT(a,r){return r=r||[0,0],g.UI([0,1],function(e){var n=r[e],o=a[e]/2,s=[],u=[];return s[e]=n-o,u[e]=n+o,s[1-e]=u[1-e]=r[1-e],Math.abs(this.dataToPoint(s)[e]-this.dataToPoint(u)[e])},this)}function IT(a){var r=a.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:a.getZoom()},api:{coord:function(e){return a.dataToPoint(e)},size:g.ak(LT,a)}}}function RT(a,r){var e=this.getAxis(),n=r instanceof Array?r[0]:r,o=(a instanceof Array?a[0]:a)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(n-o)-e.dataToCoord(n+o))}function OT(a){var r=a.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:(0,g.ak)(RT,a)}}}function NT(a,r){return r=r||[0,0],g.UI(["Radius","Angle"],function(e,n){var o="get"+e+"Axis",s=this[o](),u=r[n],h=a[n]/2,v=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(u-h)-s.dataToCoord(u+h));return e==="Angle"&&(v=v*Math.PI/180),v},this)}function BT(a){var r=a.getRadiusAxis(),e=a.getAngleAxis(),n=r.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:n[1],r0:n[0]},api:{coord:function(o){var s=r.dataToRadius(o[0]),u=e.dataToAngle(o[1]),h=a.coordToPoint([s,u]);return h.push(s,u*Math.PI/180),h},size:g.ak(NT,a)}}}function FT(a){var r=a.getRect(),e=a.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(n,o){return a.dataToPoint(n,o)}}}}var NC={};function Ky(a,r,e,n){return a&&(a.legacy||a.legacy!==!1&&!e&&!n&&r!=="tspan"&&(r==="text"||(0,g.RI)(a,"text")))}function Yy(a,r,e){var n=a,o,s,u;if(r==="text")u=n;else{u={},(0,g.RI)(n,"text")&&(u.text=n.text),(0,g.RI)(n,"rich")&&(u.rich=n.rich),(0,g.RI)(n,"textFill")&&(u.fill=n.textFill),(0,g.RI)(n,"textStroke")&&(u.stroke=n.textStroke),(0,g.RI)(n,"fontFamily")&&(u.fontFamily=n.fontFamily),(0,g.RI)(n,"fontSize")&&(u.fontSize=n.fontSize),(0,g.RI)(n,"fontStyle")&&(u.fontStyle=n.fontStyle),(0,g.RI)(n,"fontWeight")&&(u.fontWeight=n.fontWeight),s={type:"text",style:u,silent:!0},o={};var h=(0,g.RI)(n,"textPosition");e?o.position=h?n.textPosition:"inside":h&&(o.position=n.textPosition),(0,g.RI)(n,"textPosition")&&(o.position=n.textPosition),(0,g.RI)(n,"textOffset")&&(o.offset=n.textOffset),(0,g.RI)(n,"textRotation")&&(o.rotation=n.textRotation),(0,g.RI)(n,"textDistance")&&(o.distance=n.textDistance)}return jy(u,a),(0,g.S6)(u.rich,function(v){jy(v,v)}),{textConfig:o,textContent:s}}function jy(a,r){r&&(r.font=r.textFont||r.font,(0,g.RI)(r,"textStrokeWidth")&&(a.lineWidth=r.textStrokeWidth),(0,g.RI)(r,"textAlign")&&(a.align=r.textAlign),(0,g.RI)(r,"textVerticalAlign")&&(a.verticalAlign=r.textVerticalAlign),(0,g.RI)(r,"textLineHeight")&&(a.lineHeight=r.textLineHeight),(0,g.RI)(r,"textWidth")&&(a.width=r.textWidth),(0,g.RI)(r,"textHeight")&&(a.height=r.textHeight),(0,g.RI)(r,"textBackgroundColor")&&(a.backgroundColor=r.textBackgroundColor),(0,g.RI)(r,"textPadding")&&(a.padding=r.textPadding),(0,g.RI)(r,"textBorderColor")&&(a.borderColor=r.textBorderColor),(0,g.RI)(r,"textBorderWidth")&&(a.borderWidth=r.textBorderWidth),(0,g.RI)(r,"textBorderRadius")&&(a.borderRadius=r.textBorderRadius),(0,g.RI)(r,"textBoxShadowColor")&&(a.shadowColor=r.textBoxShadowColor),(0,g.RI)(r,"textBoxShadowBlur")&&(a.shadowBlur=r.textBoxShadowBlur),(0,g.RI)(r,"textBoxShadowOffsetX")&&(a.shadowOffsetX=r.textBoxShadowOffsetX),(0,g.RI)(r,"textBoxShadowOffsetY")&&(a.shadowOffsetY=r.textBoxShadowOffsetY))}function Jy(a,r,e){var n=a;n.textPosition=n.textPosition||e.position||"inside",e.offset!=null&&(n.textOffset=e.offset),e.rotation!=null&&(n.textRotation=e.rotation),e.distance!=null&&(n.textDistance=e.distance);var o=n.textPosition.indexOf("inside")>=0,s=a.fill||"#000";Qy(n,r);var u=n.textFill==null;return o?u&&(n.textFill=e.insideFill||"#fff",!n.textStroke&&e.insideStroke&&(n.textStroke=e.insideStroke),!n.textStroke&&(n.textStroke=s),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(u&&(n.textFill=a.fill||e.outsideFill||"#000"),!n.textStroke&&e.outsideStroke&&(n.textStroke=e.outsideStroke)),n.text=r.text,n.rich=r.rich,(0,g.S6)(r.rich,function(h){Qy(h,h)}),n}function Qy(a,r){r&&((0,g.RI)(r,"fill")&&(a.textFill=r.fill),(0,g.RI)(r,"stroke")&&(a.textStroke=r.fill),(0,g.RI)(r,"lineWidth")&&(a.textStrokeWidth=r.lineWidth),(0,g.RI)(r,"font")&&(a.font=r.font),(0,g.RI)(r,"fontStyle")&&(a.fontStyle=r.fontStyle),(0,g.RI)(r,"fontWeight")&&(a.fontWeight=r.fontWeight),(0,g.RI)(r,"fontSize")&&(a.fontSize=r.fontSize),(0,g.RI)(r,"fontFamily")&&(a.fontFamily=r.fontFamily),(0,g.RI)(r,"align")&&(a.textAlign=r.align),(0,g.RI)(r,"verticalAlign")&&(a.textVerticalAlign=r.verticalAlign),(0,g.RI)(r,"lineHeight")&&(a.textLineHeight=r.lineHeight),(0,g.RI)(r,"width")&&(a.textWidth=r.width),(0,g.RI)(r,"height")&&(a.textHeight=r.height),(0,g.RI)(r,"backgroundColor")&&(a.textBackgroundColor=r.backgroundColor),(0,g.RI)(r,"padding")&&(a.textPadding=r.padding),(0,g.RI)(r,"borderColor")&&(a.textBorderColor=r.borderColor),(0,g.RI)(r,"borderWidth")&&(a.textBorderWidth=r.borderWidth),(0,g.RI)(r,"borderRadius")&&(a.textBorderRadius=r.borderRadius),(0,g.RI)(r,"shadowColor")&&(a.textBoxShadowColor=r.shadowColor),(0,g.RI)(r,"shadowBlur")&&(a.textBoxShadowBlur=r.shadowBlur),(0,g.RI)(r,"shadowOffsetX")&&(a.textBoxShadowOffsetX=r.shadowOffsetX),(0,g.RI)(r,"shadowOffsetY")&&(a.textBoxShadowOffsetY=r.shadowOffsetY),(0,g.RI)(r,"textShadowColor")&&(a.textShadowColor=r.textShadowColor),(0,g.RI)(r,"textShadowBlur")&&(a.textShadowBlur=r.textShadowBlur),(0,g.RI)(r,"textShadowOffsetX")&&(a.textShadowOffsetX=r.textShadowOffsetX),(0,g.RI)(r,"textShadowOffsetY")&&(a.textShadowOffsetY=r.textShadowOffsetY))}function BC(a,r){if(!1)var e}var GT=z(70295),$y={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},qy=(0,g.XP)($y),FC=(0,g.u4)(St.dN,function(a,r){return a[r]=1,a},{}),GC=St.dN.join(", "),bd=["","style","shape","extra"],vf=(0,We.Yf)();function Q0(a,r,e,n,o){var s=a+"Animation",u=(0,rr.ke)(a,n,o)||{},h=vf(r).userDuring;return u.duration>0&&(u.during=h?(0,g.ak)(ZT,{el:r,userDuring:h}):null,u.setToFinal=!0,u.scope=a),(0,g.l7)(u,e[s]),u}function Md(a,r,e,n){n=n||{};var o=n.dataIndex,s=n.isInit,u=n.clearStyle,h=e.isAnimationEnabled(),v=vf(a),d=r.style;v.userDuring=r.during;var m={},_={};if(HT(a,r,_),r_("shape",r,_),r_("extra",r,_),!s&&h&&(WT(a,r,m),e_("shape",a,r,m),e_("extra",a,r,m),XT(a,r,d,m)),_.style=d,zT(a,_,u),kT(a,r),h)if(s){var S={};(0,g.S6)(bd,function(L){var I=L?r[L]:r;I&&I.enterFrom&&(L&&(S[L]=S[L]||{}),(0,g.l7)(L?S[L]:S,I.enterFrom))});var A=Q0("enter",a,r,e,o);A.duration>0&&a.animateFrom(S,A)}else VT(a,r,o||0,e,m);t_(a,r),d?a.dirty():a.markRedraw()}function t_(a,r){for(var e=vf(a).leaveToProps,n=0;n<bd.length;n++){var o=bd[n],s=o?r[o]:r;s&&s.leaveTo&&(e||(e=vf(a).leaveToProps={}),o&&(e[o]=e[o]||{}),(0,g.l7)(o?e[o]:e,s.leaveTo))}}function Cd(a,r,e,n){if(a){var o=a.parent,s=vf(a).leaveToProps;if(s){var u=Q0("update",a,r,e,0);u.done=function(){o.remove(a),n&&n()},a.animateTo(s,u)}else o.remove(a),n&&n()}}function Jl(a){return a==="all"}function zT(a,r,e){var n=r.style;if(!a.isGroup&&n){if(e){a.useStyle({});for(var o=a.animators,s=0;s<o.length;s++){var u=o[s];u.targetName==="style"&&u.changeTarget(a.style)}}a.setStyle(n)}r&&(r.style=null,r&&a.attr(r),r.style=n)}function VT(a,r,e,n,o){if(o){var s=Q0("update",a,r,n,e);s.duration>0&&a.animateFrom(o,s)}}function kT(a,r){(0,g.RI)(r,"silent")&&(a.silent=r.silent),(0,g.RI)(r,"ignore")&&(a.ignore=r.ignore),a instanceof Ia.ZP&&(0,g.RI)(r,"invisible")&&(a.invisible=r.invisible),a instanceof yt.ZP&&(0,g.RI)(r,"autoBatch")&&(a.autoBatch=r.autoBatch)}var Co={},UT={setTransform:function(a,r){return Co.el[a]=r,this},getTransform:function(a){return Co.el[a]},setShape:function(a,r){var e=Co.el,n=e.shape||(e.shape={});return n[a]=r,e.dirtyShape&&e.dirtyShape(),this},getShape:function(a){var r=Co.el.shape;if(r)return r[a]},setStyle:function(a,r){var e=Co.el,n=e.style;return n&&(n[a]=r,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(a){var r=Co.el.style;if(r)return r[a]},setExtra:function(a,r){var e=Co.el.extra||(Co.el.extra={});return e[a]=r,this},getExtra:function(a){var r=Co.el.extra;if(r)return r[a]}};function zC(a){}function ZT(){var a=this,r=a.el;if(r){var e=vf(r).userDuring,n=a.userDuring;if(e!==n){a.el=a.userDuring=null;return}Co.el=r,n(UT)}}function e_(a,r,e,n){var o=e[a];if(o){var s=r[a],u;if(s){var h=e.transition,v=o.transition;if(v)if(!u&&(u=n[a]={}),Jl(v))(0,g.l7)(u,s);else for(var d=(0,We.kF)(v),m=0;m<d.length;m++){var _=d[m],S=s[_];u[_]=S}else if(Jl(h)||(0,g.cq)(h,a)>=0){!u&&(u=n[a]={});for(var A=(0,g.XP)(s),m=0;m<A.length;m++){var _=A[m],S=s[_];KT(o[_],S)&&(u[_]=S)}}}}}function r_(a,r,e){var n=r[a];if(n)for(var o=e[a]={},s=(0,g.XP)(n),u=0;u<s.length;u++){var h=s[u];o[h]=(0,GT.V)(n[h])}}function WT(a,r,e){for(var n=r.transition,o=Jl(n)?St.dN:(0,We.kF)(n||[]),s=0;s<o.length;s++){var u=o[s];if(!(u==="style"||u==="shape"||u==="extra")){var h=a[u];e[u]=h}}}function HT(a,r,e){for(var n=0;n<qy.length;n++){var o=qy[n],s=$y[o],u=r[o];u&&(e[s[0]]=u[0],e[s[1]]=u[1])}for(var n=0;n<St.dN.length;n++){var h=St.dN[n];r[h]!=null&&(e[h]=r[h])}}function XT(a,r,e,n){if(e){var o=a.style,s;if(o){var u=e.transition,h=r.transition;if(u&&!Jl(u)){var v=(0,We.kF)(u);!s&&(s=n.style={});for(var d=0;d<v.length;d++){var m=v[d],_=o[m];s[m]=_}}else if(a.getAnimationStyleProps&&(Jl(h)||Jl(u)||(0,g.cq)(h,"style")>=0)){var S=a.getAnimationStyleProps(),A=S?S.style:null;if(A){!s&&(s=n.style={});for(var L=(0,g.XP)(e),d=0;d<L.length;d++){var m=L[d];if(A[m]){var _=o[m];s[m]=_}}}}}}}function KT(a,r){return(0,g.zG)(a)?a!==r:a!=null&&isFinite(a)}var VC,n_=(0,We.Yf)(),YT=["percent","easing","shape","style","extra"];function i_(a){a.stopAnimation("keyframe"),a.attr(n_(a))}function Ed(a,r,e){if(!(!e.isAnimationEnabled()||!r)){if((0,g.kJ)(r)){(0,g.S6)(r,function(h){Ed(a,h,e)});return}var n=r.keyframes,o=r.duration;if(e&&o==null){var s=(0,rr.ke)("enter",e,0);o=s&&s.duration}if(!(!n||!o)){var u=n_(a);(0,g.S6)(bd,function(h){if(!(h&&!a[h])){var v,d=!1;n.sort(function(m,_){return m.percent-_.percent}),(0,g.S6)(n,function(m){var _=a.animators,S=h?m[h]:m;if(S){var A=(0,g.XP)(S);if(h||(A=(0,g.hX)(A,function(U){return(0,g.cq)(YT,U)<0})),!!A.length){v||(v=a.animate(h,r.loop,!0),v.scope="keyframe");for(var L=0;L<_.length;L++)_[L]!==v&&_[L].targetName===v.targetName&&_[L].stopTracks(A);h&&(u[h]=u[h]||{});var I=h?u[h]:u;(0,g.S6)(A,function(U){I[U]=((h?a[h]:a)||{})[U]}),v.whenWithKeys(o*m.percent,S,A,m.easing)}}}),v&&v.delay(r.delay||0).duration(o).start(r.easing)}})}}}var gs="emphasis",$s="normal",$0="blur",q0="select",qs=[$s,gs,$0,q0],tm={normal:["itemStyle"],emphasis:[gs,"itemStyle"],blur:[$0,"itemStyle"],select:[q0,"itemStyle"]},em={normal:["label"],emphasis:[gs,"label"],blur:[$0,"label"],select:[q0,"label"]},jT=["x","y"],JT="e\0\0",Oa={normal:{},emphasis:{},blur:{},select:{}},QT={cartesian2d:PT,geo:IT,single:OT,polar:BT,calendar:FT};function rm(a){return a instanceof yt.ZP}function nm(a){return a instanceof Ia.ZP}function $T(a,r){r.copyTransform(a),nm(r)&&nm(a)&&(r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r.invisible=a.invisible,r.ignore=a.ignore,rm(r)&&rm(a)&&r.setShape(a.shape))}var qT=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._data,h=e.getData(),v=this.group,d=o_(e,h,n,o);u||v.removeAll(),h.diff(u).add(function(_){om(o,null,_,d(_,s),e,v,h)}).remove(function(_){var S=u.getItemGraphicEl(_);S&&Cd(S,ps(S).option,e)}).update(function(_,S){var A=u.getItemGraphicEl(S);om(o,A,_,d(_,s),e,v,h)}).execute();var m=e.get("clip",!0)?oo(e.coordinateSystem,!1,e):null;m?v.setClipPath(m):v.removeClipPath(),this._data=h},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(e,n,o,s,u){var h=n.getData(),v=o_(n,h,o,s),d=this._progressiveEls=[];function m(A){A.isGroup||(A.incremental=!0,A.ensureState("emphasis").hoverLayer=!0)}for(var _=e.start;_<e.end;_++){var S=om(null,null,_,v(_,u),n,this.group,h);S&&(S.traverse(m),d.push(S))}},r.prototype.eachRendered=function(e){mr.traverseElements(this._progressiveEls||this.group,e)},r.prototype.filterForExposedEvent=function(e,n,o,s){var u=n.element;if(u==null||o.name===u)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===u)return!0;return!1},r.type="custom",r}(Mn.Z),t2=qT;function im(a){var r=a.type,e;if(r==="path"){var n=a.shape,o=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,s=h_(n);e=mr.makePath(s,null,o,n.layout||"center"),ps(e).customPathData=s}else if(r==="image")e=new gt.ZP({}),ps(e).customImagePath=a.style.image;else if(r==="text")e=new he.ZP({});else if(r==="group")e=new Mr.Z;else{if(r==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=mr.getShapeClass(r);if(!u){var h="";(0,Zr._y)(h)}e=new u}return ps(e).customGraphicType=r,e.name=a.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function am(a,r,e,n,o,s,u){i_(r);var h=o&&o.normal.cfg;h&&r.setTextConfig(h),n&&n.transition==null&&(n.transition=jT);var v=n&&n.style;if(v){if(r.type==="text"){var d=v;(0,g.RI)(d,"textFill")&&(d.fill=d.textFill),(0,g.RI)(d,"textStroke")&&(d.stroke=d.textStroke)}var m=void 0,_=rm(r)?v.decal:null;a&&_&&(_.dirty=!0,m=(0,Eu.I)(_,a)),v.__decalPattern=m}if(nm(r)&&v){var m=v.__decalPattern;m&&(v.decal=m)}Md(r,n,s,{dataIndex:e,isInit:u,clearStyle:!0}),Ed(r,n.keyframeAnimation,s)}function a_(a,r,e,n,o){var s=r.isGroup?null:r,u=o&&o[a].cfg;if(s){var h=s.ensureState(a);if(n===!1){var v=s.getState(a);v&&(v.style=null)}else h.style=n||null;u&&(h.textConfig=u),(0,Qe.MA)(s)}}function e2(a,r,e){if(!a.isGroup){var n=a,o=e.currentZ,s=e.currentZLevel;n.z=o,n.zlevel=s;var u=r.z2;u!=null&&(n.z2=u||0);for(var h=0;h<qs.length;h++)r2(n,r,qs[h])}}function r2(a,r,e){var n=e===$s,o=n?r:Pd(r,e),s=o?o.z2:null,u;s!=null&&(u=n?a:a.ensureState(e),u.z2=s||0)}function o_(a,r,e,n){var o=a.get("renderItem"),s=a.coordinateSystem,u={};s&&(u=s.prepareCustoms?s.prepareCustoms(s):QT[s.type](s));for(var h=(0,g.ce)({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:Tt,style:Ct,ordinalRawValue:Et,styleEmphasis:It,visual:Yt,barLayout:ne,currentSeriesIndices:oe,font:ce},u.api||{}),v={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:u.coordSys,dataInsideLength:r.count(),encode:n2(a.getData())},d,m,_={},S={},A={},L={},I=0;I<qs.length;I++){var U=qs[I];A[U]=a.getModel(tm[U]),L[U]=a.getModel(em[U])}function et(me){return me===d?m||(m=r.getItemModel(me)):r.getItemModel(me)}function ft(me,_e){return r.hasItemOption?me===d?_[_e]||(_[_e]=et(me).getModel(tm[_e])):et(me).getModel(tm[_e]):A[_e]}function ht(me,_e){return r.hasItemOption?me===d?S[_e]||(S[_e]=et(me).getModel(em[_e])):et(me).getModel(em[_e]):L[_e]}return function(me,_e){return d=me,m=null,_={},S={},o&&o((0,g.ce)({dataIndexInside:me,dataIndex:r.getRawIndex(me),actionType:_e?_e.type:null},v),h)};function Tt(me,_e){return _e==null&&(_e=d),r.getStore().get(r.getDimensionIndex(me||0),_e)}function Et(me,_e){_e==null&&(_e=d),me=me||0;var Ce=r.getDimensionInfo(me);if(!Ce){var ke=r.getDimensionIndex(me);return ke>=0?r.getStore().get(ke,_e):void 0}var Oe=r.get(Ce.name,_e),$e=Ce&&Ce.ordinalMeta;return $e?$e.categories[Oe]:Oe}function Ct(me,_e){_e==null&&(_e=d);var Ce=r.getItemVisual(_e,"style"),ke=Ce&&Ce.fill,Oe=Ce&&Ce.opacity,$e=ft(_e,$s).getItemStyle();ke!=null&&($e.fill=ke),Oe!=null&&($e.opacity=Oe);var yr={inheritColor:(0,g.HD)(ke)?ke:"#000"},_r=ht(_e,$s),Xr=Ge.Lr(_r,null,yr,!1,!0);Xr.text=_r.getShallow("show")?(0,g.pD)(a.getFormattedLabel(_e,$s),pn(r,_e)):null;var Wr=Ge.nC(_r,yr,!1);return Kt(me,$e),$e=Jy($e,Xr,Wr),me&&zt($e,me),$e.legacy=!0,$e}function It(me,_e){_e==null&&(_e=d);var Ce=ft(_e,gs).getItemStyle(),ke=ht(_e,gs),Oe=Ge.Lr(ke,null,null,!0,!0);Oe.text=ke.getShallow("show")?(0,g.R1)(a.getFormattedLabel(_e,gs),a.getFormattedLabel(_e,$s),pn(r,_e)):null;var $e=Ge.nC(ke,null,!0);return Kt(me,Ce),Ce=Jy(Ce,Oe,$e),me&&zt(Ce,me),Ce.legacy=!0,Ce}function zt(me,_e){for(var Ce in _e)(0,g.RI)(_e,Ce)&&(me[Ce]=_e[Ce])}function Kt(me,_e){me&&(me.textFill&&(_e.textFill=me.textFill),me.textPosition&&(_e.textPosition=me.textPosition))}function Yt(me,_e){if(_e==null&&(_e=d),(0,g.RI)(Xy,me)){var Ce=r.getItemVisual(_e,"style");return Ce?Ce[Xy[me]]:null}if((0,g.RI)(bT,me))return r.getItemVisual(_e,me)}function ne(me){if(s.type==="cartesian2d"){var _e=s.getBaseAxis();return(0,Qr.Gk)((0,g.ce)({axis:_e},me))}}function oe(){return e.getCurrentSeriesIndices()}function ce(me){return Ge.qT(me,e)}}function n2(a){var r={};return(0,g.S6)(a.dimensions,function(e){var n=a.getDimensionInfo(e);if(!n.isExtraCoord){var o=n.coordDim,s=r[o]=r[o]||[];s[n.coordDimIndex]=a.getDimensionIndex(e)}}),r}function om(a,r,e,n,o,s,u){if(!n){s.remove(r);return}var h=sm(a,r,e,n,o,s);return h&&u.setItemGraphicEl(e,h),h&&(0,Qe.k5)(h,n.focus,n.blurScope,n.emphasisDisabled),h}function sm(a,r,e,n,o,s){var u=-1,h=r;r&&s_(r,n,o)&&(u=(0,g.cq)(s.childrenRef(),r),r=null);var v=!r,d=r;d?d.clearStates():(d=im(n),h&&$T(h,d)),n.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),Oa.normal.cfg=Oa.normal.conOpt=Oa.emphasis.cfg=Oa.emphasis.conOpt=Oa.blur.cfg=Oa.blur.conOpt=Oa.select.cfg=Oa.select.conOpt=null,Oa.isLegacy=!1,a2(d,e,n,o,v,Oa),i2(d,e,n,o,v),am(a,d,e,n,Oa,o,v),(0,g.RI)(n,"info")&&(ps(d).info=n.info);for(var m=0;m<qs.length;m++){var _=qs[m];if(_!==$s){var S=Pd(n,_),A=lm(n,S,_);a_(_,d,S,A,Oa)}}return e2(d,n,o),n.type==="group"&&o2(a,d,e,n,o),u>=0?s.replaceAt(d,u):s.add(d),d}function s_(a,r,e){var n=ps(a),o=r.type,s=r.shape,u=r.style;return e.isUniversalTransitionEnabled()||o!=null&&o!==n.customGraphicType||o==="path"&&f2(s)&&h_(s)!==n.customPathData||o==="image"&&(0,g.RI)(u,"image")&&u.image!==n.customImagePath}function i2(a,r,e,n,o){var s=e.clipPath;if(s===!1)a&&a.getClipPath()&&a.removeClipPath();else if(s){var u=a.getClipPath();u&&s_(u,s,n)&&(u=null),u||(u=im(s),a.setClipPath(u)),am(null,u,r,s,null,n,o)}}function a2(a,r,e,n,o,s){if(!a.isGroup){l_(e,null,s),l_(e,gs,s);var u=s.normal.conOpt,h=s.emphasis.conOpt,v=s.blur.conOpt,d=s.select.conOpt;if(u!=null||h!=null||d!=null||v!=null){var m=a.getTextContent();if(u===!1)m&&a.removeTextContent();else{u=s.normal.conOpt=u||{type:"text"},m?m.clearStates():(m=im(u),a.setTextContent(m)),am(null,m,r,u,null,n,o);for(var _=u&&u.style,S=0;S<qs.length;S++){var A=qs[S];if(A!==$s){var L=s[A].conOpt;a_(A,m,L,lm(u,L,A),null)}}_?m.dirty():m.markRedraw()}}}}function l_(a,r,e){var n=r?Pd(a,r):a,o=r?lm(a,n,gs):a.style,s=a.type,u=n?n.textConfig:null,h=a.textContent,v=h?r?Pd(h,r):h:null;if(o&&(e.isLegacy||Ky(o,s,!!u,!!v))){e.isLegacy=!0;var d=Yy(o,s,!r);!u&&d.textConfig&&(u=d.textConfig),!v&&d.textContent&&(v=d.textContent)}if(!r&&v){var m=v;!m.type&&(m.type="text")}var _=r?e[r]:e.normal;_.cfg=u,_.conOpt=v}function Pd(a,r){return r?a?a[r]:null:a}function lm(a,r,e){var n=r&&r.style;return n==null&&e===gs&&a&&(n=a.styleEmphasis),n}function o2(a,r,e,n,o){var s=n.children,u=s?s.length:0,h=n.$mergeChildren,v=h==="byName"||n.diffChildrenByName,d=h===!1;if(!(!u&&!v&&!d)){if(v){l2({api:a,oldChildren:r.children()||[],newChildren:s||[],dataIndex:e,seriesModel:o,group:r});return}d&&r.removeAll();for(var m=0;m<u;m++){var _=s[m],S=r.childAt(m);_?(_.ignore==null&&(_.ignore=!1),sm(a,S,e,_,o,r)):S.ignore=!0}for(var A=r.childCount()-1;A>=m;A--){var L=r.childAt(A);s2(r,L,o)}}}function s2(a,r,e){r&&Cd(r,ps(a).option,e)}function l2(a){new yo.Z(a.oldChildren,a.newChildren,u_,u_,a).add(f_).update(f_).remove(u2).execute()}function u_(a,r){var e=a&&a.name;return e!=null?e:JT+r}function f_(a,r){var e=this.context,n=a!=null?e.newChildren[a]:null,o=r!=null?e.oldChildren[r]:null;sm(e.api,o,e.dataIndex,n,e.seriesModel,e.group)}function u2(a){var r=this.context,e=r.oldChildren[a];e&&Cd(e,ps(e).option,r.seriesModel)}function h_(a){return a&&(a.pathData||a.d)}function f2(a){return a&&((0,g.RI)(a,"pathData")||(0,g.RI)(a,"d"))}function h2(a){a.registerChartView(t2),a.registerSeriesModel(CT)}var Ql=(0,We.Yf)(),c_=g.d9,um=g.ak,c2=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(r,e,n,o){var s=e.get("value"),u=e.get("status");if(this._axisModel=r,this._axisPointerModel=e,this._api=n,!(!o&&this._lastValue===s&&this._lastStatus===u)){this._lastValue=s,this._lastStatus=u;var h=this._group,v=this._handle;if(!u||u==="hide"){h&&h.hide(),v&&v.hide();return}h&&h.show(),v&&v.show();var d={};this.makeElOption(d,s,r,e,n);var m=d.graphicKey;m!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=m;var _=this._moveAnimation=this.determineAnimation(r,e);if(!h)h=this._group=new Mr.Z,this.createPointerEl(h,d,r,e),this.createLabelEl(h,d,r,e),n.getZr().add(h);else{var S=g.WA(v_,e,_);this.updatePointerEl(h,d,S),this.updateLabelEl(h,d,S,e)}g_(h,e,!0),this._renderHandle(s)}},a.prototype.remove=function(r){this.clear(r)},a.prototype.dispose=function(r){this.clear(r)},a.prototype.determineAnimation=function(r,e){var n=e.get("animation"),o=r.axis,s=o.type==="category",u=e.get("snap");if(!u&&!s)return!1;if(n==="auto"||n==null){var h=this.animationThreshold;if(s&&o.getBandWidth()>h)return!0;if(u){var v=Of(r).seriesDataCount,d=o.getExtent();return Math.abs(d[0]-d[1])/v>h}return!1}return n===!0},a.prototype.makeElOption=function(r,e,n,o,s){},a.prototype.createPointerEl=function(r,e,n,o){var s=e.pointer;if(s){var u=Ql(r).pointerEl=new mr[s.type](c_(e.pointer));r.add(u)}},a.prototype.createLabelEl=function(r,e,n,o){if(e.label){var s=Ql(r).labelEl=new he.ZP(c_(e.label));r.add(s),p_(s,o)}},a.prototype.updatePointerEl=function(r,e,n){var o=Ql(r).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),n(o,{shape:e.pointer.shape}))},a.prototype.updateLabelEl=function(r,e,n,o){var s=Ql(r).labelEl;s&&(s.setStyle(e.label.style),n(s,{x:e.label.x,y:e.label.y}),p_(s,o))},a.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,n=this._api.getZr(),o=this._handle,s=e.getModel("handle"),u=e.get("status");if(!s.get("show")||!u||u==="hide"){o&&n.remove(o),this._handle=null;return}var h;this._handle||(h=!0,o=this._handle=mr.createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){Yi.sT(d.event)},onmousedown:um(this._onHandleDragMove,this,0,0),drift:um(this._onHandleDragMove,this),ondragend:um(this._onHandleDragEnd,this)}),n.add(o)),g_(o,e,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var v=s.get("size");g.kJ(v)||(v=[v,v]),o.scaleX=v[0]/2,o.scaleY=v[1]/2,_n.T9(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,h)}},a.prototype._moveHandleToValue=function(r,e){v_(this._axisPointerModel,!e&&this._moveAnimation,this._handle,fm(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(r,e){var n=this._handle;if(n){this._dragging=!0;var o=this.updateHandleTransform(fm(n),[r,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(fm(o)),Ql(n).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(r){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(r){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var e=r.getZr(),n=this._group,o=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),_n.ZH(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(r,e,n){return n=n||0,{x:r[n],y:r[1-n],width:e[n],height:e[1-n]}},a}();function v_(a,r,e,n){d_(Ql(e).lastProp,n)||(Ql(e).lastProp=n,r?rr.D(e,n,a):(e.stopAnimation(),e.attr(n)))}function d_(a,r){if(g.Kn(a)&&g.Kn(r)){var e=!0;return g.S6(r,function(n,o){e=e&&d_(a[o],n)}),!!e}else return a===r}function p_(a,r){a[r.get(["label","show"])?"show":"hide"]()}function fm(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function g_(a,r,e){var n=r.get("z"),o=r.get("zlevel");a&&a.traverse(function(s){s.type!=="group"&&(n!=null&&(s.z=n),o!=null&&(s.zlevel=o),s.silent=e)})}var hm=c2;function cm(a){var r=a.get("type"),e=a.getModel(r+"Style"),n;return r==="line"?(n=e.getLineStyle(),n.fill=null):r==="shadow"&&(n=e.getAreaStyle(),n.stroke=null),n}function m_(a,r,e,n,o){var s=e.get("value"),u=y_(s,r.axis,r.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),h=e.getModel("label"),v=ii.MY(h.get("padding")||0),d=h.getFont(),m=xt.lP(u,d),_=o.position,S=m.width+v[1]+v[3],A=m.height+v[0]+v[2],L=o.align;L==="right"&&(_[0]-=S),L==="center"&&(_[0]-=S/2);var I=o.verticalAlign;I==="bottom"&&(_[1]-=A),I==="middle"&&(_[1]-=A/2),v2(_,S,A,n);var U=h.get("backgroundColor");(!U||U==="auto")&&(U=r.get(["axisLine","lineStyle","color"])),a.label={x:_[0],y:_[1],style:(0,Ge.Lr)(h,{text:u,font:d,fill:h.getTextColor(),padding:v,backgroundColor:U}),z2:10}}function v2(a,r,e,n){var o=n.getWidth(),s=n.getHeight();a[0]=Math.min(a[0]+r,o)-r,a[1]=Math.min(a[1]+e,s)-e,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function y_(a,r,e,n,o){a=r.scale.parse(a);var s=r.scale.getLabel({value:a},{precision:o.precision}),u=o.formatter;if(u){var h={value:ai.DX(r,{value:a}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};g.S6(n,function(v){var d=e.getSeriesByIndex(v.seriesIndex),m=v.dataIndexInside,_=d&&d.getDataParams(m);_&&h.seriesData.push(_)}),g.HD(u)?s=u.replace("{value}",s):g.mf(u)&&(s=u(h))}return s}function vm(a,r,e){var n=An.Ue();return An.U1(n,n,e.rotation),An.Iu(n,n,e.position),mr.applyTransform([a.dataToCoord(r),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],n)}function __(a,r,e,n,o,s){var u=Ka.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=o.get(["label","margin"]),m_(r,n,o,s,{position:vm(n.axis,a,e),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function dm(a,r,e){return e=e||0,{x1:a[e],y1:a[1-e],x2:r[e],y2:r[1-e]}}function x_(a,r,e){return e=e||0,{x:a[e],y:a[1-e],width:r[e],height:r[1-e]}}function S_(a,r,e,n,o,s){return{cx:a,cy:r,r0:e,r:n,startAngle:o,endAngle:s,clockwise:!0}}var d2=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis,v=h.grid,d=s.get("type"),m=T_(v,h).getOtherAxis(h).getGlobalExtent(),_=h.toGlobalCoord(h.dataToCoord(n,!0));if(d&&d!=="none"){var S=cm(s),A=p2[d](h,_,m);A.style=S,e.graphicKey=A.type,e.pointer=A}var L=Cf(v.model,o);__(n,e,L,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=Cf(n.axis.grid.model,n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=vm(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,h=u.grid,v=u.getGlobalExtent(!0),d=T_(h,u).getOtherAxis(u).getGlobalExtent(),m=u.dim==="x"?0:1,_=[e.x,e.y];_[m]+=n[m],_[m]=Math.min(v[1],_[m]),_[m]=Math.max(v[0],_[m]);var S=(d[1]+d[0])/2,A=[S,S];A[m]=_[m];var L=[{verticalAlign:"middle"},{align:"center"}];return{x:_[0],y:_[1],rotation:e.rotation,cursorPoint:A,tooltipOption:L[m]}},r}(hm);function T_(a,r){var e={};return e[r.dim+"AxisIndex"]=r.index,a.getCartesian(e)}var p2={line:function(a,r,e){var n=dm([r,e[0]],[r,e[1]],D_(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=Math.max(1,a.getBandWidth()),o=e[1]-e[0];return{type:"Rect",shape:x_([r-n/2,e[0]],[n,o],D_(a))}}};function D_(a){return a.dim==="x"?0:1}var g2=d2,m2=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(ti.Z),y2=m2,aa=z(54490),ms=(0,We.Yf)(),_2=g.S6;function w_(a,r,e){if(!aa.Z.node){var n=r.getZr();ms(n).records||(ms(n).records={}),x2(n,r);var o=ms(n).records[a]||(ms(n).records[a]={});o.handler=e}}function x2(a,r){if(ms(a).initialized)return;ms(a).initialized=!0,e("click",g.WA(A_,"click")),e("mousemove",g.WA(A_,"mousemove")),e("globalout",T2);function e(n,o){a.on(n,function(s){var u=D2(r);_2(ms(a).records,function(h){h&&o(h,s,u.dispatchAction)}),S2(u.pendings,r)})}}function S2(a,r){var e=a.showTip.length,n=a.hideTip.length,o;e?o=a.showTip[e-1]:n&&(o=a.hideTip[n-1]),o&&(o.dispatchAction=null,r.dispatchAction(o))}function T2(a,r,e){a.handler("leave",null,e)}function A_(a,r,e,n){r.handler(a,e,n)}function D2(a){var r={showTip:[],hideTip:[]},e=function(n){var o=r[n.type];o?o.push(n):(n.dispatchAction=e,a.dispatchAction(n))};return{dispatchAction:e,pendings:r}}function pm(a,r){if(!aa.Z.node){var e=r.getZr(),n=(ms(e).records||{})[a];n&&(ms(e).records[a]=null)}}var w2=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=n.getComponent("tooltip"),u=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";w_("axisPointer",o,function(h,v,d){u!=="none"&&(h==="leave"||u.indexOf(h)>=0)&&d({type:"updateAxisPointer",currTrigger:h,x:v&&v.offsetX,y:v&&v.offsetY})})},r.prototype.remove=function(e,n){pm("axisPointer",n)},r.prototype.dispose=function(e,n){pm("axisPointer",n)},r.type="axisPointer",r}(qn.Z),A2=w2;function b_(a,r){var e=[],n=a.seriesIndex,o;if(n==null||!(o=r.getSeriesByIndex(n)))return{point:[]};var s=o.getData(),u=We.gO(s,a);if(u==null||u<0||g.kJ(u))return{point:[]};var h=s.getItemGraphicEl(u),v=o.coordinateSystem;if(o.getTooltipPosition)e=o.getTooltipPosition(u)||[];else if(v&&v.dataToPoint)if(a.isStacked){var d=v.getBaseAxis(),m=v.getOtherAxis(d),_=m.dim,S=d.dim,A=_==="x"||_==="radius"?1:0,L=s.mapDimension(S),I=[];I[A]=s.get(L,u),I[1-A]=s.get(s.getCalculationInfo("stackResultDimension"),u),e=v.dataToPoint(I)||[]}else e=v.dataToPoint(s.getValues(g.UI(v.dimensions,function(et){return s.mapDimension(et)}),u))||[];else if(h){var U=h.getBoundingRect().clone();U.applyTransform(h.transform),e=[U.x+U.width/2,U.y+U.height/2]}return{point:e,el:h}}var M_=(0,We.Yf)();function b2(a,r,e){var n=a.currTrigger,o=[a.x,a.y],s=a,u=a.dispatchAction||(0,g.ak)(e.dispatchAction,e),h=r.getComponent("axisPointer").coordSysAxesInfo;if(h){Ld(o)&&(o=b_({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},r).point);var v=Ld(o),d=s.axesInfo,m=h.axesInfo,_=n==="leave"||Ld(o),S={},A={},L={list:[],map:{}},I={showPointer:(0,g.WA)(C2,A),showTooltip:(0,g.WA)(E2,L)};(0,g.S6)(h.coordSysMap,function(et,ft){var ht=v||et.containPoint(o);(0,g.S6)(h.coordSysAxesInfo[ft],function(Tt,Et){var Ct=Tt.axis,It=R2(d,Tt);if(!_&&ht&&(!d||It)){var zt=It&&It.value;zt==null&&!v&&(zt=Ct.pointToData(o)),zt!=null&&C_(Tt,zt,I,!1,S)}})});var U={};return(0,g.S6)(m,function(et,ft){var ht=et.linkGroup;ht&&!A[ft]&&(0,g.S6)(ht.axesInfo,function(Tt,Et){var Ct=A[Et];if(Tt!==et&&Ct){var It=Ct.value;ht.mapper&&(It=et.axis.scale.parse(ht.mapper(It,E_(Tt),E_(et)))),U[et.key]=It}})}),(0,g.S6)(U,function(et,ft){C_(m[ft],et,I,!0,S)}),P2(A,m,S),L2(L,o,a,u),I2(m,u,e),S}}function C_(a,r,e,n,o){var s=a.axis;if(!(s.scale.isBlank()||!s.containData(r))){if(!a.involveSeries){e.showPointer(a,r);return}var u=M2(r,a),h=u.payloadBatch,v=u.snapToValue;h[0]&&o.seriesIndex==null&&(0,g.l7)(o,h[0]),!n&&a.snap&&s.containData(v)&&v!=null&&(r=v),e.showPointer(a,r,h),e.showTooltip(a,u,v)}}function M2(a,r){var e=r.axis,n=e.dim,o=a,s=[],u=Number.MAX_VALUE,h=-1;return(0,g.S6)(r.seriesModels,function(v,d){var m=v.getData().mapDimensionsAll(n),_,S;if(v.getAxisTooltipData){var A=v.getAxisTooltipData(m,a,e);S=A.dataIndices,_=A.nestestValue}else{if(S=v.getData().indicesOfNearest(m[0],a,e.type==="category"?.5:null),!S.length)return;_=v.getData().get(m[0],S[0])}if(!(_==null||!isFinite(_))){var L=a-_,I=Math.abs(L);I<=u&&((I<u||L>=0&&h<0)&&(u=I,h=L,o=_,s.length=0),(0,g.S6)(S,function(U){s.push({seriesIndex:v.seriesIndex,dataIndexInside:U,dataIndex:v.getData().getRawIndex(U)})}))}}),{payloadBatch:s,snapToValue:o}}function C2(a,r,e,n){a[r.key]={value:e,payloadBatch:n}}function E2(a,r,e,n){var o=e.payloadBatch,s=r.axis,u=s.model,h=r.axisPointerModel;if(!(!r.triggerTooltip||!o.length)){var v=r.coordSys.model,d=Jr(v),m=a.map[d];m||(m=a.map[d]={coordSysId:v.id,coordSysIndex:v.componentIndex,coordSysType:v.type,coordSysMainType:v.mainType,dataByAxis:[]},a.list.push(m)),m.dataByAxis.push({axisDim:s.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:n,valueLabelOpt:{precision:h.get(["label","precision"]),formatter:h.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function P2(a,r,e){var n=e.axesInfo=[];(0,g.S6)(r,function(o,s){var u=o.axisPointerModel.option,h=a[s];h?(!o.useHandle&&(u.status="show"),u.value=h.value,u.seriesDataIndices=(h.payloadBatch||[]).slice()):!o.useHandle&&(u.status="hide"),u.status==="show"&&n.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:u.value})})}function L2(a,r,e,n){if(Ld(r)||!a.list.length){n({type:"hideTip"});return}var o=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:a.list})}function I2(a,r,e){var n=e.getZr(),o="axisPointerLastHighlights",s=M_(n)[o]||{},u=M_(n)[o]={};(0,g.S6)(a,function(d,m){var _=d.axisPointerModel.option;_.status==="show"&&(0,g.S6)(_.seriesDataIndices,function(S){var A=S.seriesIndex+" | "+S.dataIndex;u[A]=S})});var h=[],v=[];(0,g.S6)(s,function(d,m){!u[m]&&v.push(d)}),(0,g.S6)(u,function(d,m){!s[m]&&h.push(d)}),v.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:v}),h.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:h})}function R2(a,r){for(var e=0;e<(a||[]).length;e++){var n=a[e];if(r.axis.dim===n.axisDim&&r.axis.model.componentIndex===n.axisIndex)return n}}function E_(a){var r=a.axis.model,e={},n=e.axisDim=a.axis.dim;return e.axisIndex=e[n+"AxisIndex"]=r.componentIndex,e.axisName=e[n+"AxisName"]=r.name,e.axisId=e[n+"AxisId"]=r.id,e}function Ld(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Qh(a){Yo.registerAxisPointerClass("CartesianAxisPointer",g2),a.registerComponentModel(y2),a.registerComponentView(A2),a.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var e=r.axisPointer.link;e&&!(0,g.kJ)(e)&&(r.axisPointer.link=[e])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(r,e){r.getComponent("axisPointer").coordSysAxesInfo=gp(r,e)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},b2)}function O2(a){(0,F.D)(kn),(0,F.D)(Qh)}var N2=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis;h.dim==="angle"&&(this.animationThreshold=Math.PI/18);var v=h.polar,d=v.getOtherAxis(h),m=d.getExtent(),_=h.dataToCoord(n),S=s.get("type");if(S&&S!=="none"){var A=cm(s),L=F2[S](h,v,_,m);L.style=A,e.graphicKey=L.type,e.pointer=L}var I=s.get(["label","margin"]),U=B2(n,o,s,v,I);m_(e,o,s,u,U)},r}(hm);function B2(a,r,e,n,o){var s=r.axis,u=s.dataToCoord(a),h=n.getAngleAxis().getExtent()[0];h=h/180*Math.PI;var v=n.getRadiusAxis().getExtent(),d,m,_;if(s.dim==="radius"){var S=An.Ue();An.U1(S,S,h),An.Iu(S,S,[n.cx,n.cy]),d=mr.applyTransform([u,-o],S);var A=r.getModel("axisLabel").get("rotate")||0,L=Ka.innerTextLayout(h,A*Math.PI/180,-1);m=L.textAlign,_=L.textVerticalAlign}else{var I=v[1];d=n.coordToPoint([I+o,u]);var U=n.cx,et=n.cy;m=Math.abs(d[0]-U)/I<.3?"center":d[0]>U?"left":"right",_=Math.abs(d[1]-et)/I<.3?"middle":d[1]>et?"top":"bottom"}return{position:d,align:m,verticalAlign:_}}var F2={line:function(a,r,e,n){return a.dim==="angle"?{type:"Line",shape:dm(r.coordToPoint([n[0],e]),r.coordToPoint([n[1],e]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:e}}},shadow:function(a,r,e,n){var o=Math.max(1,a.getBandWidth()),s=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:S_(r.cx,r.cy,n[0],n[1],(-e-o/2)*s,(-e+o/2)*s)}:{type:"Sector",shape:S_(r.cx,r.cy,e-o/2,e+o/2,0,Math.PI*2)}}},G2=N2,z2=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.findAxisModel=function(e){var n,o=this.ecModel;return o.eachComponent(e,function(s){s.getCoordSysModel()===this&&(n=s)},this),n},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(ti.Z),V2=z2,gm=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",We.C6).models[0]},r.type="polarAxis",r}(ti.Z);g.jB(gm,fu.W);var k2=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="angleAxis",r}(gm),U2=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="radiusAxis",r}(gm),mm=function(a){(0,Wt.ZT)(r,a);function r(e,n){return a.call(this,"radius",e,n)||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r}(Xi.Z);mm.prototype.dataToRadius=Xi.Z.prototype.dataToCoord,mm.prototype.radiusToData=Xi.Z.prototype.coordToData;var Z2=mm,W2=(0,We.Yf)(),ym=function(a){(0,Wt.ZT)(r,a);function r(e,n){return a.call(this,"angle",e,n||[0,360])||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var e=this,n=e.getLabelModel(),o=e.scale,s=o.getExtent(),u=o.count();if(s[1]-s[0]<1)return 0;var h=s[0],v=e.dataToCoord(h+1)-e.dataToCoord(h),d=Math.abs(v),m=xt.lP(h==null?"":h+"",n.getFont(),"center","top"),_=Math.max(m.height,7),S=_/d;isNaN(S)&&(S=1/0);var A=Math.max(0,Math.floor(S)),L=W2(e.model),I=L.lastAutoInterval,U=L.lastTickCount;return I!=null&&U!=null&&Math.abs(I-A)<=1&&Math.abs(U-u)<=1&&I>A?A=I:(L.lastTickCount=u,L.lastAutoInterval=A),A},r}(Xi.Z);ym.prototype.dataToAngle=Xi.Z.prototype.dataToCoord,ym.prototype.angleToData=Xi.Z.prototype.coordToData;var H2=ym,P_=["radius","angle"],X2=function(){function a(r){this.dimensions=P_,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new Z2,this._angleAxis=new H2,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var e=this.pointToCoord(r);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var e="_"+r+"Axis";return this[e]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var e=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===r&&e.push(n),o.scale.type===r&&e.push(o),e},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var e=this._angleAxis;return r===e?this._radiusAxis:e},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var e=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},a.prototype.dataToPoint=function(r,e){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],e),this._angleAxis.dataToAngle(r[1],e)])},a.prototype.pointToData=function(r,e){var n=this.pointToCoord(r);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},a.prototype.pointToCoord=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=this.getAngleAxis(),s=o.getExtent(),u=Math.min(s[0],s[1]),h=Math.max(s[0],s[1]);o.inverse?u=h-360:h=u+360;var v=Math.sqrt(e*e+n*n);e/=v,n/=v;for(var d=Math.atan2(-n,e)/Math.PI*180,m=d<u?1:-1;d<u||d>h;)d+=m*360;return[v,d]},a.prototype.coordToPoint=function(r){var e=r[0],n=r[1]/180*Math.PI,o=Math.cos(n)*e+this.cx,s=-Math.sin(n)*e+this.cy;return[o,s]},a.prototype.getArea=function(){var r=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var o=r.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:r.inverse,contain:function(u,h){var v=u-this.cx,d=h-this.cy,m=v*v+d*d-1e-4,_=this.r,S=this.r0;return m<=_*_&&m>=S*S}}},a.prototype.convertToPixel=function(r,e,n){var o=L_(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=L_(e);return o===this?this.pointToData(n):null},a}();function L_(a){var r=a.seriesModel,e=a.polarModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var K2=X2;function Y2(a,r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight();a.cx=(0,De.GM)(n[0],o),a.cy=(0,De.GM)(n[1],s);var u=a.getRadiusAxis(),h=Math.min(o,s)/2,v=r.get("radius");v==null?v=[0,"100%"]:g.kJ(v)||(v=[0,v]);var d=[(0,De.GM)(v[0],h),(0,De.GM)(v[1],h)];u.inverse?u.setExtent(d[1],d[0]):u.setExtent(d[0],d[1])}function j2(a,r){var e=this,n=e.getAngleAxis(),o=e.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),a.eachSeries(function(h){if(h.coordinateSystem===e){var v=h.getData();g.S6((0,ai.PY)(v,"radius"),function(d){o.scale.unionExtentFromData(v,d)}),g.S6((0,ai.PY)(v,"angle"),function(d){n.scale.unionExtentFromData(v,d)})}}),(0,ai.Jk)(n.scale,n.model),(0,ai.Jk)(o.scale,o.model),n.type==="category"&&!n.onBand){var s=n.getExtent(),u=360/n.scale.count();n.inverse?s[1]+=u:s[1]-=u,n.setExtent(s[0],s[1])}}function J2(a){return a.mainType==="angleAxis"}function I_(a,r){if(a.type=r.get("type"),a.scale=(0,ai.aG)(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),J2(r)){a.inverse=a.inverse!==r.get("clockwise");var e=r.get("startAngle");a.setExtent(e,e+(a.inverse?-360:360))}r.axis=a,a.model=r}var Q2={dimensions:P_,create:function(a,r){var e=[];return a.eachComponent("polar",function(n,o){var s=new K2(o+"");s.update=j2;var u=s.getRadiusAxis(),h=s.getAngleAxis(),v=n.findAxisModel("radiusAxis"),d=n.findAxisModel("angleAxis");I_(u,v),I_(h,d),Y2(s,n,r),e.push(s),n.coordinateSystem=s,s.model=n}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var o=n.getReferringComponents("polar",We.C6).models[0];n.coordinateSystem=o.coordinateSystem}}),e}},$2=Q2,q2=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Id(a,r,e){r[1]>r[0]&&(r=r.slice().reverse());var n=a.coordToPoint([r[0],e]),o=a.coordToPoint([r[1],e]);return{x1:n[0],y1:n[1],x2:o[0],y2:o[1]}}function Rd(a){var r=a.getRadiusAxis();return r.inverse?0:1}function R_(a){var r=a[0],e=a[a.length-1];r&&e&&Math.abs(Math.abs(r.coord-e.coord)-360)<1e-4&&a.pop()}var tD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=e.axis,s=o.polar,u=s.getRadiusAxis().getExtent(),h=o.getTicksCoords(),v=o.getMinorTicksCoords(),d=g.UI(o.getViewLabels(),function(m){m=g.d9(m);var _=o.scale,S=_.type==="ordinal"?_.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=o.dataToCoord(S),m});R_(d),R_(h),g.S6(q2,function(m){e.get([m,"show"])&&(!o.scale.isBlank()||m==="axisLine")&&eD[m](this.group,e,s,h,v,u,d)},this)}},r.type="angleAxis",r}(Yo),eD={axisLine:function(a,r,e,n,o,s){var u=r.getModel(["axisLine","lineStyle"]),h=Rd(e),v=h?0:1,d;s[v]===0?d=new jo.Z({shape:{cx:e.cx,cy:e.cy,r:s[h]},style:u.getLineStyle(),z2:1,silent:!0}):d=new Ac.Z({shape:{cx:e.cx,cy:e.cy,r:s[h],r0:s[v]},style:u.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,a.add(d)},axisTick:function(a,r,e,n,o,s){var u=r.getModel("axisTick"),h=(u.get("inside")?-1:1)*u.get("length"),v=s[Rd(e)],d=g.UI(n,function(m){return new zi.Z({shape:Id(e,[v,v+h],m.coord)})});a.add(mr.mergePath(d,{style:g.ce(u.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,e,n,o,s){if(o.length){for(var u=r.getModel("axisTick"),h=r.getModel("minorTick"),v=(u.get("inside")?-1:1)*h.get("length"),d=s[Rd(e)],m=[],_=0;_<o.length;_++)for(var S=0;S<o[_].length;S++)m.push(new zi.Z({shape:Id(e,[d,d+v],o[_][S].coord)}));a.add(mr.mergePath(m,{style:g.ce(h.getModel("lineStyle").getLineStyle(),g.ce(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,e,n,o,s,u){var h=r.getCategories(!0),v=r.getModel("axisLabel"),d=v.get("margin"),m=r.get("triggerEvent");g.S6(u,function(_,S){var A=v,L=_.tickValue,I=s[Rd(e)],U=e.coordToPoint([I+d,_.coord]),et=e.cx,ft=e.cy,ht=Math.abs(U[0]-et)/I<.3?"center":U[0]>et?"left":"right",Tt=Math.abs(U[1]-ft)/I<.3?"middle":U[1]>ft?"top":"bottom";if(h&&h[L]){var Et=h[L];g.Kn(Et)&&Et.textStyle&&(A=new zn.Z(Et.textStyle,v,v.ecModel))}var Ct=new he.ZP({silent:Ka.isLabelSilent(r),style:(0,Ge.Lr)(A,{x:U[0],y:U[1],fill:A.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:_.formattedLabel,align:ht,verticalAlign:Tt})});if(a.add(Ct),m){var It=Ka.makeAxisEventDataBase(r);It.targetType="axisLabel",It.value=_.rawLabel,(0,Er.A)(Ct).eventData=It}},this)},splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),h=u.getModel("lineStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=0;_<n.length;_++){var S=d++%v.length;m[S]=m[S]||[],m[S].push(new zi.Z({shape:Id(e,s,n[_].coord)}))}for(var _=0;_<m.length;_++)a.add(mr.mergePath(m[_],{style:g.ce({stroke:v[_%v.length]},h.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,e,n,o,s){if(o.length){for(var u=r.getModel("minorSplitLine"),h=u.getModel("lineStyle"),v=[],d=0;d<o.length;d++)for(var m=0;m<o[d].length;m++)v.push(new zi.Z({shape:Id(e,s,o[d][m].coord)}));a.add(mr.mergePath(v,{style:h.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,e,n,o,s){if(n.length){var u=r.getModel("splitArea"),h=u.getModel("areaStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=Math.PI/180,S=-n[0].coord*_,A=Math.min(s[0],s[1]),L=Math.max(s[0],s[1]),I=r.get("clockwise"),U=1,et=n.length;U<=et;U++){var ft=U===et?n[0].coord:n[U].coord,ht=d++%v.length;m[ht]=m[ht]||[],m[ht].push(new Ei.C({shape:{cx:e.cx,cy:e.cy,r0:A,r:L,startAngle:S,endAngle:-ft*_,clockwise:I},silent:!0})),S=-ft*_}for(var U=0;U<m.length;U++)a.add(mr.mergePath(m[U],{style:g.ce({fill:v[U%v.length]},h.getAreaStyle()),silent:!0}))}}},rD=tD,nD=["axisLine","axisTickLabel","axisName"],iD=["splitLine","splitArea","minorSplitLine"],aD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=this._axisGroup,s=this._axisGroup=new Mr.Z;this.group.add(s);var u=e.axis,h=u.polar,v=h.getAngleAxis(),d=u.getTicksCoords(),m=u.getMinorTicksCoords(),_=v.getExtent()[0],S=u.getExtent(),A=sD(h,e,_),L=new Ka(e,A);g.S6(nD,L.add,L),s.add(L.getGroup()),mr.groupTransition(o,s,e),g.S6(iD,function(I){e.get([I,"show"])&&!u.scale.isBlank()&&oD[I](this.group,e,h,_,S,d,m)},this)}},r.type="radiusAxis",r}(Yo),oD={splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),h=u.getModel("lineStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=0;_<s.length;_++){var S=d++%v.length;m[S]=m[S]||[],m[S].push(new jo.Z({shape:{cx:e.cx,cy:e.cy,r:Math.max(s[_].coord,0)}}))}for(var _=0;_<m.length;_++)a.add(mr.mergePath(m[_],{style:g.ce({stroke:v[_%v.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,e,n,o,s,u){if(u.length){for(var h=r.getModel("minorSplitLine"),v=h.getModel("lineStyle"),d=[],m=0;m<u.length;m++)for(var _=0;_<u[m].length;_++)d.push(new jo.Z({shape:{cx:e.cx,cy:e.cy,r:u[m][_].coord}}));a.add(mr.mergePath(d,{style:g.ce({fill:null},v.getLineStyle()),silent:!0}))}},splitArea:function(a,r,e,n,o,s){if(s.length){var u=r.getModel("splitArea"),h=u.getModel("areaStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=s[0].coord,S=1;S<s.length;S++){var A=d++%v.length;m[A]=m[A]||[],m[A].push(new Ei.C({shape:{cx:e.cx,cy:e.cy,r0:_,r:s[S].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),_=s[S].coord}for(var S=0;S<m.length;S++)a.add(mr.mergePath(m[S],{style:g.ce({fill:v[S%v.length]},h.getAreaStyle()),silent:!0}))}}};function sD(a,r,e){return{position:[a.cx,a.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}var lD=aD;function O_(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function N_(a,r){return r.dim+a.model.componentIndex}function uD(a,r,e){var n={},o=fD(g.hX(r.getSeriesByType(a),function(s){return!r.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(s){if(s.coordinateSystem.type==="polar"){var u=s.getData(),h=s.coordinateSystem,v=h.getBaseAxis(),d=N_(h,v),m=O_(s),_=o[d][m],S=_.offset,A=_.width,L=h.getOtherAxis(v),I=s.coordinateSystem.cx,U=s.coordinateSystem.cy,et=s.get("barMinHeight")||0,ft=s.get("barMinAngle")||0;n[m]=n[m]||[];for(var ht=u.mapDimension(L.dim),Tt=u.mapDimension(v.dim),Et=(0,oa.M)(u,ht),Ct=v.dim!=="radius"||!s.get("roundCap",!0),It=L.dataToCoord(0),zt=0,Kt=u.count();zt<Kt;zt++){var Yt=u.get(ht,zt),ne=u.get(Tt,zt),oe=Yt>=0?"p":"n",ce=It;Et&&(n[m][ne]||(n[m][ne]={p:It,n:It}),ce=n[m][ne][oe]);var me=void 0,_e=void 0,Ce=void 0,ke=void 0;if(L.dim==="radius"){var Oe=L.dataToCoord(Yt)-It,$e=v.dataToCoord(ne);Math.abs(Oe)<et&&(Oe=(Oe<0?-1:1)*et),me=ce,_e=ce+Oe,Ce=$e-S,ke=Ce-A,Et&&(n[m][ne][oe]=_e)}else{var yr=L.dataToCoord(Yt,Ct)-It,_r=v.dataToCoord(ne);Math.abs(yr)<ft&&(yr=(yr<0?-1:1)*ft),me=_r+S,_e=me+A,Ce=ce,ke=ce+yr,Et&&(n[m][ne][oe]=ke)}u.setItemLayout(zt,{cx:I,cy:U,r0:me,r:_e,startAngle:-Ce*Math.PI/180,endAngle:-ke*Math.PI/180,clockwise:Ce>=ke})}}})}function fD(a){var r={};g.S6(a,function(n,o){var s=n.getData(),u=n.coordinateSystem,h=u.getBaseAxis(),v=N_(u,h),d=h.getExtent(),m=h.type==="category"?h.getBandWidth():Math.abs(d[1]-d[0])/s.count(),_=r[v]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},S=_.stacks;r[v]=_;var A=O_(n);S[A]||_.autoWidthCount++,S[A]=S[A]||{width:0,maxWidth:0};var L=(0,De.GM)(n.get("barWidth"),m),I=(0,De.GM)(n.get("barMaxWidth"),m),U=n.get("barGap"),et=n.get("barCategoryGap");L&&!S[A].width&&(L=Math.min(_.remainedWidth,L),S[A].width=L,_.remainedWidth-=L),I&&(S[A].maxWidth=I),U!=null&&(_.gap=U),et!=null&&(_.categoryGap=et)});var e={};return g.S6(r,function(n,o){e[o]={};var s=n.stacks,u=n.bandWidth,h=(0,De.GM)(n.categoryGap,u),v=(0,De.GM)(n.gap,1),d=n.remainedWidth,m=n.autoWidthCount,_=(d-h)/(m+(m-1)*v);_=Math.max(_,0),g.S6(s,function(I,U){var et=I.maxWidth;et&&et<_&&(et=Math.min(et,d),I.width&&(et=Math.min(et,I.width)),d-=et,I.width=et,m--)}),_=(d-h)/(m+(m-1)*v),_=Math.max(_,0);var S=0,A;g.S6(s,function(I,U){I.width||(I.width=_),A=I,S+=I.width*(1+v)}),A&&(S-=A.width*v);var L=-S/2;g.S6(s,function(I,U){e[o][U]=e[o][U]||{offset:L,width:I.width},L+=I.width*(1+v)})}),e}var hD=uD,cD={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},vD={splitNumber:5},dD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="polar",r}(qn.Z);function pD(a){(0,F.D)(Qh),Yo.registerAxisPointerClass("PolarAxisPointer",G2),a.registerCoordinateSystem("polar",$2),a.registerComponentModel(V2),a.registerComponentView(dD),Ms(a,"angle",k2,cD),Ms(a,"radius",U2,vD),a.registerComponentView(rD),a.registerComponentView(lD),a.registerLayout((0,g.WA)(hD,"bar"))}function _m(a,r){r=r||{};var e=a.coordinateSystem,n=a.axis,o={},s=n.position,u=n.orient,h=e.getRect(),v=[h.x,h.x+h.width,h.y,h.y+h.height],d={horizontal:{top:v[2],bottom:v[3]},vertical:{left:v[0],right:v[1]}};o.position=[u==="vertical"?d.vertical[s]:v[0],u==="horizontal"?d.horizontal[s]:v[3]];var m={horizontal:0,vertical:1};o.rotation=Math.PI/2*m[u];var _={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=_[s],a.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),g.Jv(r.labelInside,a.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var S=r.rotate;return S==null&&(S=a.get(["axisLabel","rotate"])),o.labelRotation=s==="top"?-S:S,o.z2=1,o}var gD=["axisLine","axisTickLabel","axisName"],mD=["splitArea","splitLine"],yD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="SingleAxisPointer",e}return r.prototype.render=function(e,n,o,s){var u=this.group;u.removeAll();var h=this._axisGroup;this._axisGroup=new Mr.Z;var v=_m(e),d=new Ka(e,v);g.S6(gD,d.add,d),u.add(this._axisGroup),u.add(d.getGroup()),g.S6(mD,function(m){e.get([m,"show"])&&_D[m](this,this.group,this._axisGroup,e)},this),mr.groupTransition(h,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)},r.prototype.remove=function(){Dc(this)},r.type="singleAxis",r}(Yo),_D={splitLine:function(a,r,e,n){var o=n.axis;if(!o.scale.isBlank()){var s=n.getModel("splitLine"),u=s.getModel("lineStyle"),h=u.get("color");h=h instanceof Array?h:[h];for(var v=u.get("width"),d=n.coordinateSystem.getRect(),m=o.isHorizontal(),_=[],S=0,A=o.getTicksCoords({tickModel:s}),L=[],I=[],U=0;U<A.length;++U){var et=o.toGlobalCoord(A[U].coord);m?(L[0]=et,L[1]=d.y,I[0]=et,I[1]=d.y+d.height):(L[0]=d.x,L[1]=et,I[0]=d.x+d.width,I[1]=et);var ft=new zi.Z({shape:{x1:L[0],y1:L[1],x2:I[0],y2:I[1]},silent:!0});mr.subPixelOptimizeLine(ft.shape,v);var ht=S++%h.length;_[ht]=_[ht]||[],_[ht].push(ft)}for(var Tt=u.getLineStyle(["color"]),U=0;U<_.length;++U)r.add(mr.mergePath(_[U],{style:g.ce({stroke:h[U%h.length]},Tt),silent:!0}))}},splitArea:function(a,r,e,n){Tc(a,e,n,n)}},xD=yD,B_=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(ti.Z);(0,g.jB)(B_,fu.W.prototype);var xm=B_,SD=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.type=s||"value",h.position=u||"bottom",h}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.pointToData=function(e,n){return this.coordinateSystem.pointToData(e)[0]},r}(Xi.Z),TD=SD,F_=["single"],DD=function(){function a(r,e,n){this.type="single",this.dimension="single",this.dimensions=F_,this.axisPointerEnabled=!0,this.model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=this.dimension,s=new TD(o,ai.aG(r),[0,0],r.get("type"),r.get("position")),u=s.type==="category";s.onBand=u&&r.get("boundaryGap"),s.inverse=r.get("inverse"),s.orient=r.get("orient"),r.axis=s,s.model=r,s.coordinateSystem=this,this._axis=s},a.prototype.update=function(r,e){r.eachSeries(function(n){if(n.coordinateSystem===this){var o=n.getData();(0,g.S6)(o.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(o,s)},this),ai.Jk(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(r,e){this._rect=(0,Hr.ME)({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var r=this._rect,e=this._axis,n=e.isHorizontal(),o=n?[0,r.width]:[0,r.height],s=e.inverse?1:0;e.setExtent(o[s],o[1-s]),this._updateAxisTransform(e,n?r.x:r.y)},a.prototype._updateAxisTransform=function(r,e){var n=r.getExtent(),o=n[0]+n[1],s=r.isHorizontal();r.toGlobalCoord=s?function(u){return u+e}:function(u){return o-u+e},r.toLocalCoord=s?function(u){return u-e}:function(u){return o-u+e}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(r){var e=this.getRect(),n=this.getAxis(),o=n.orient;return o==="horizontal"?n.contain(n.toLocalCoord(r[0]))&&r[1]>=e.y&&r[1]<=e.y+e.height:n.contain(n.toLocalCoord(r[1]))&&r[0]>=e.y&&r[0]<=e.y+e.height},a.prototype.pointToData=function(r){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(r[e.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(r){var e=this.getAxis(),n=this.getRect(),o=[],s=e.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),o[s]=e.toGlobalCoord(e.dataToCoord(+r)),o[1-s]=s===0?n.y+n.height/2:n.x+n.width/2,o},a.prototype.convertToPixel=function(r,e,n){var o=G_(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=G_(e);return o===this?this.pointToData(n):null},a}();function G_(a){var r=a.seriesModel,e=a.singleAxisModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var wD=DD;function AD(a,r){var e=[];return a.eachComponent("singleAxis",function(n,o){var s=new wD(n,a,r);s.name="single_"+o,s.resize(n,r),n.coordinateSystem=s,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var o=n.getReferringComponents("singleAxis",We.C6).models[0];n.coordinateSystem=o&&o.coordinateSystem}}),e}var bD={create:AD,dimensions:F_},MD=bD,z_=["x","y"],CD=["width","height"],ED=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis,v=h.coordinateSystem,d=Sm(v,1-Od(h)),m=v.dataToPoint(n)[0],_=s.get("type");if(_&&_!=="none"){var S=cm(s),A=PD[_](h,m,d);A.style=S,e.graphicKey=A.type,e.pointer=A}var L=_m(o);__(n,e,L,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=_m(n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=vm(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,h=u.coordinateSystem,v=Od(u),d=Sm(h,v),m=[e.x,e.y];m[v]+=n[v],m[v]=Math.min(d[1],m[v]),m[v]=Math.max(d[0],m[v]);var _=Sm(h,1-v),S=(_[1]+_[0])/2,A=[S,S];return A[v]=m[v],{x:m[0],y:m[1],rotation:e.rotation,cursorPoint:A,tooltipOption:{verticalAlign:"middle"}}},r}(hm),PD={line:function(a,r,e){var n=dm([r,e[0]],[r,e[1]],Od(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=a.getBandWidth(),o=e[1]-e[0];return{type:"Rect",shape:x_([r-n/2,e[0]],[n,o],Od(a))}}};function Od(a){return a.isHorizontal()?0:1}function Sm(a,r){var e=a.getRect();return[e[z_[r]],e[z_[r]]+e[CD[r]]]}var LD=ED,ID=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="single",r}(qn.Z);function RD(a){(0,F.D)(Qh),Yo.registerAxisPointerClass("SingleAxisPointer",LD),a.registerComponentView(ID),a.registerComponentView(xD),a.registerComponentModel(xm),Ms(a,"single",xm,xm.defaultOption),a.registerCoordinateSystem("single",MD)}var OD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=(0,Hr.tE)(e);a.prototype.init.apply(this,arguments),V_(e,s)},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),V_(this.option,e)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(ti.Z);function V_(a,r){var e=a.cellSize,n;g.kJ(e)?n=e:n=a.cellSize=[e,e],n.length===1&&(n[1]=n[0]);var o=g.UI([0,1],function(s){return(0,Hr.QM)(r,s)&&(n[s]="auto"),n[s]!=null&&n[s]!=="auto"});(0,Hr.dt)(a,r,{type:"box",ignoreSize:o})}var ND=OD,k_=z(57338),BD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll();var u=e.coordinateSystem,h=u.getRangeInfo(),v=u.getOrient(),d=n.getLocaleModel();this._renderDayRect(e,h,s),this._renderLines(e,h,v,s),this._renderYearText(e,h,v,s),this._renderMonthText(e,d,v,s),this._renderWeekText(e,d,h,v,s)},r.prototype._renderDayRect=function(e,n,o){for(var s=e.coordinateSystem,u=e.getModel("itemStyle").getItemStyle(),h=s.getCellWidth(),v=s.getCellHeight(),d=n.start.time;d<=n.end.time;d=s.getNextNDay(d,1).time){var m=s.dataToRect([d],!1).tl,_=new Kr.Z({shape:{x:m[0],y:m[1],width:h,height:v},cursor:"default",style:u});o.add(_)}},r.prototype._renderLines=function(e,n,o,s){var u=this,h=e.coordinateSystem,v=e.getModel(["splitLine","lineStyle"]).getLineStyle(),d=e.get(["splitLine","show"]),m=v.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var _=n.start,S=0;_.time<=n.end.time;S++){L(_.formatedDate),S===0&&(_=h.getDateInfo(n.start.y+"-"+n.start.m));var A=_.date;A.setMonth(A.getMonth()+1),_=h.getDateInfo(A)}L(h.getNextNDay(n.end.time,1).formatedDate);function L(I){u._firstDayOfMonth.push(h.getDateInfo(I)),u._firstDayPoints.push(h.dataToRect([I],!1).tl);var U=u._getLinePointsOfOneWeek(e,I,o);u._tlpoints.push(U[0]),u._blpoints.push(U[U.length-1]),d&&u._drawSplitline(U,v,s)}d&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,m,o),v,s),d&&this._drawSplitline(u._getEdgesPoints(u._blpoints,m,o),v,s)},r.prototype._getEdgesPoints=function(e,n,o){var s=[e[0].slice(),e[e.length-1].slice()],u=o==="horizontal"?0:1;return s[0][u]=s[0][u]-n/2,s[1][u]=s[1][u]+n/2,s},r.prototype._drawSplitline=function(e,n,o){var s=new Rt.Z({z2:20,shape:{points:e},style:n});o.add(s)},r.prototype._getLinePointsOfOneWeek=function(e,n,o){for(var s=e.coordinateSystem,u=s.getDateInfo(n),h=[],v=0;v<7;v++){var d=s.getNextNDay(u.time,v),m=s.dataToRect([d.time],!1);h[2*d.day]=m.tl,h[2*d.day+1]=m[o==="horizontal"?"bl":"tr"]}return h},r.prototype._formatterLabel=function(e,n){return(0,g.HD)(e)&&e?(0,ii.wx)(e,n):(0,g.mf)(e)?e(n):n.nameMap},r.prototype._yearTextPositionControl=function(e,n,o,s,u){var h=n[0],v=n[1],d=["center","bottom"];s==="bottom"?(v+=u,d=["center","top"]):s==="left"?h-=u:s==="right"?(h+=u,d=["center","top"]):v-=u;var m=0;return(s==="left"||s==="right")&&(m=Math.PI/2),{rotation:m,x:h,y:v,style:{align:d[0],verticalAlign:d[1]}}},r.prototype._renderYearText=function(e,n,o,s){var u=e.getModel("yearLabel");if(u.get("show")){var h=u.get("margin"),v=u.get("position");v||(v=o!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(d[0][0]+d[1][0])/2,_=(d[0][1]+d[1][1])/2,S=o==="horizontal"?0:1,A={top:[m,d[S][1]],bottom:[m,d[1-S][1]],left:[d[1-S][0],_],right:[d[S][0],_]},L=n.start.y;+n.end.y>+n.start.y&&(L=L+"-"+n.end.y);var I=u.get("formatter"),U={start:n.start.y,end:n.end.y,nameMap:L},et=this._formatterLabel(I,U),ft=new he.ZP({z2:30,style:(0,Ge.Lr)(u,{text:et})});ft.attr(this._yearTextPositionControl(ft,A[v],o,v,h)),s.add(ft)}},r.prototype._monthTextPositionControl=function(e,n,o,s,u){var h="left",v="top",d=e[0],m=e[1];return o==="horizontal"?(m=m+u,n&&(h="center"),s==="start"&&(v="bottom")):(d=d+u,n&&(v="middle"),s==="start"&&(h="right")),{x:d,y:m,align:h,verticalAlign:v}},r.prototype._renderMonthText=function(e,n,o,s){var u=e.getModel("monthLabel");if(u.get("show")){var h=u.get("nameMap"),v=u.get("margin"),d=u.get("position"),m=u.get("align"),_=[this._tlpoints,this._blpoints];(!h||(0,g.HD)(h))&&(h&&(n=(0,k_.G8)(h)||n),h=n.get(["time","monthAbbr"])||[]);var S=d==="start"?0:1,A=o==="horizontal"?0:1;v=d==="start"?-v:v;for(var L=m==="center",I=0;I<_[S].length-1;I++){var U=_[S][I].slice(),et=this._firstDayOfMonth[I];if(L){var ft=this._firstDayPoints[I];U[A]=(ft[A]+_[0][I+1][A])/2}var ht=u.get("formatter"),Tt=h[+et.m-1],Et={yyyy:et.y,yy:(et.y+"").slice(2),MM:et.m,M:+et.m,nameMap:Tt},Ct=this._formatterLabel(ht,Et),It=new he.ZP({z2:30,style:(0,g.l7)((0,Ge.Lr)(u,{text:Ct}),this._monthTextPositionControl(U,L,o,d,v))});s.add(It)}}},r.prototype._weekTextPositionControl=function(e,n,o,s,u){var h="center",v="middle",d=e[0],m=e[1],_=o==="start";return n==="horizontal"?(d=d+s+(_?1:-1)*u[0]/2,h=_?"right":"left"):(m=m+s+(_?1:-1)*u[1]/2,v=_?"bottom":"top"),{x:d,y:m,align:h,verticalAlign:v}},r.prototype._renderWeekText=function(e,n,o,s,u){var h=e.getModel("dayLabel");if(h.get("show")){var v=e.coordinateSystem,d=h.get("position"),m=h.get("nameMap"),_=h.get("margin"),S=v.getFirstDayOfWeek();if(!m||(0,g.HD)(m)){m&&(n=(0,k_.G8)(m)||n);var A=n.get(["time","dayOfWeekShort"]);m=A||(0,g.UI)(n.get(["time","dayOfWeekAbbr"]),function(Et){return Et[0]})}var L=v.getNextNDay(o.end.time,7-o.lweek).time,I=[v.getCellWidth(),v.getCellHeight()];_=(0,De.GM)(_,Math.min(I[1],I[0])),d==="start"&&(L=v.getNextNDay(o.start.time,-(7+o.fweek)).time,_=-_);for(var U=0;U<7;U++){var et=v.getNextNDay(L,U),ft=v.dataToRect([et.time],!1).center,ht=U;ht=Math.abs((U+S)%7);var Tt=new he.ZP({z2:30,style:(0,g.l7)((0,Ge.Lr)(h,{text:m[ht]}),this._weekTextPositionControl(ft,s,d,_,I))});u.add(Tt)}}},r.type="calendar",r}(qn.Z),FD=BD,Tm=864e5,GD=function(){function a(r,e,n){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=r}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(r){r=De.sG(r);var e=r.getFullYear(),n=r.getMonth()+1,o=n<10?"0"+n:""+n,s=r.getDate(),u=s<10?"0"+s:""+s,h=r.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:e+"",m:o,d:u,day:h,time:r.getTime(),formatedDate:e+"-"+o+"-"+u,date:r}},a.prototype.getNextNDay=function(r,e){return e=e||0,e===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+e),this.getDateInfo(r))},a.prototype.update=function(r,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],s=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),h=this._orient==="horizontal"?[n,7]:[7,n];g.S6([0,1],function(_){m(s,_)&&(u[o[_]]=s[_]*h[_])});var v={width:e.getWidth(),height:e.getHeight()},d=this._rect=Hr.ME(u,v);g.S6([0,1],function(_){m(s,_)||(s[_]=d[o[_]]/h[_])});function m(_,S){return _[S]!=null&&_[S]!=="auto"}this._sw=s[0],this._sh=s[1]},a.prototype.dataToPoint=function(r,e){g.kJ(r)&&(r=r[0]),e==null&&(e=!0);var n=this.getDateInfo(r),o=this._rangeInfo,s=n.formatedDate;if(e&&!(n.time>=o.start.time&&n.time<o.end.time+Tm))return[NaN,NaN];var u=n.day,h=this._getRangeInfo([o.start.time,s]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},a.prototype.pointToData=function(r){var e=this.pointToDate(r);return e&&e.time},a.prototype.dataToRect=function(r,e){var n=this.dataToPoint(r,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},a.prototype.pointToDate=function(r){var e=Math.floor((r[0]-this._rect.x)/this._sw)+1,n=Math.floor((r[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,e-1,o):this._getDateByWeeksAndDay(e,n-1,o)},a.prototype.convertToPixel=function(r,e,n){var o=U_(e);return o===this?o.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=U_(e);return o===this?o.pointToData(n):null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var r=this._model.get("range"),e;if(g.kJ(r)&&r.length===1&&(r=r[0]),g.kJ(r))e=r;else{var n=r.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),s=o.date;s.setMonth(s.getMonth()+1);var u=this.getNextNDay(s,-1);e=[o.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return r;var h=this._getRangeInfo(e);return h.start.time>h.end.time&&e.reverse(),e},a.prototype._getRangeInfo=function(r){var e=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],n;e[0].time>e[1].time&&(n=!0,e.reverse());var o=Math.floor(e[1].time/Tm)-Math.floor(e[0].time/Tm)+1,s=new Date(e[0].time),u=s.getDate(),h=e[1].date.getDate();s.setDate(u+o-1);var v=s.getDate();if(v!==h)for(var d=s.getTime()-e[1].time>0?1:-1;(v=s.getDate())!==h&&(s.getTime()-e[1].time)*d>0;)o-=d,s.setDate(v-d);var m=Math.floor((o+e[0].day+6)/7),_=n?-m+1:m-1;return n&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:o,weeks:m,nthWeek:_,fweek:e[0].day,lweek:e[1].day}},a.prototype._getDateByWeeksAndDay=function(r,e,n){var o=this._getRangeInfo(n);if(r>o.weeks||r===0&&e<o.fweek||r===o.weeks&&e>o.lweek)return null;var s=(r-1)*7-o.fweek+e,u=new Date(o.start.time);return u.setDate(+o.start.d+s),this.getDateInfo(u)},a.create=function(r,e){var n=[];return r.eachComponent("calendar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},a.dimensions=["time","value"],a}();function U_(a){var r=a.calendarModel,e=a.seriesModel,n=r?r.coordinateSystem:e?e.coordinateSystem:null;return n}var zD=GD;function VD(a){a.registerComponentModel(ND),a.registerComponentView(FD),a.registerCoordinateSystem("calendar",zD)}function kD(a,r){var e=a.existing;if(r.id=a.keyInfo.id,!r.type&&e&&(r.type=e.type),r.parentId==null){var n=r.parentOption;n?r.parentId=n.id:e&&(r.parentId=e.parentId)}r.parentOption=null}function Z_(a,r){var e;return g.S6(r,function(n){a[n]!=null&&a[n]!=="auto"&&(e=!0)}),e}function UD(a,r,e){var n=g.l7({},e),o=a[r],s=e.$action||"merge";if(s==="merge")if(o){if(!1)var u;g.TS(o,n,!0),(0,Hr.dt)(o,n,{ignoreSize:!0}),(0,Hr.QT)(e,o),Nd(e,o),Nd(e,o,"shape"),Nd(e,o,"style"),Nd(e,o,"extra"),e.clipPath=o.clipPath}else a[r]=n;else s==="replace"?a[r]=n:s==="remove"&&o&&(a[r]=null)}var W_=["transition","enterFrom","leaveTo"],ZD=W_.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Nd(a,r,e){if(e&&(!a[e]&&r[e]&&(a[e]={}),a=a[e],r=r[e]),!(!a||!r))for(var n=e?W_:ZD,o=0;o<n.length;o++){var s=n[o];a[s]==null&&r[s]!=null&&(a[s]=r[s])}}function WD(a,r){if(a&&(a.hv=r.hv=[Z_(r,["left","right"]),Z_(r,["top","bottom"])],a.type==="group")){var e=a,n=r;e.width==null&&(e.width=n.width=0),e.height==null&&(e.height=n.height=0)}}var HD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventAutoZ=!0,e}return r.prototype.mergeOption=function(e,n){var o=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,e,n),this.option.elements=o},r.prototype.optionUpdated=function(e,n){var o=this.option,s=(n?o:e).elements,u=o.elements=n?[]:o.elements,h=[];this._flatten(s,h,null);var v=We.ab(u,h,"normalMerge"),d=this._elOptionsToUpdate=[];g.S6(v,function(m,_){var S=m.newOption;S&&(d.push(S),kD(m,S),UD(u,_,S),WD(u[_],S))},this),o.elements=g.hX(u,function(m){return m&&delete m.$action,m!=null})},r.prototype._flatten=function(e,n,o){g.S6(e,function(s){if(s){o&&(s.parentOption=o),n.push(s);var u=s.children;u&&u.length&&this._flatten(u,n,s),delete s.children}},this)},r.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},r.type="graphic",r.defaultOption={elements:[]},r}(ti.Z),H_={path:null,compoundPath:null,group:Mr.Z,image:gt.ZP,text:he.ZP},Na=We.Yf(),XD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._elMap=g.kW()},r.prototype.render=function(e,n,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},r.prototype._updateElements=function(e){var n=e.useElOptionsToUpdate();if(n){var o=this._elMap,s=this.group,u=e.get("z"),h=e.get("zlevel");g.S6(n,function(v){var d=We.U5(v.id,null),m=d!=null?o.get(d):null,_=We.U5(v.parentId,null),S=_!=null?o.get(_):s,A=v.type,L=v.style;A==="text"&&L&&v.hv&&v.hv[1]&&(L.textVerticalAlign=L.textBaseline=L.verticalAlign=L.align=null);var I=v.textContent,U=v.textConfig;if(L&&Ky(L,A,!!U,!!I)){var et=Yy(L,A,!0);!U&&et.textConfig&&(U=v.textConfig=et.textConfig),!I&&et.textContent&&(I=et.textContent)}var ft=KD(v),ht=v.$action||"merge",Tt=ht==="merge",Et=ht==="replace";if(Tt){var Ct=!m,It=m;Ct?It=X_(d,S,v.type,o):(It&&(Na(It).isNew=!1),i_(It)),It&&(Md(It,ft,e,{isInit:Ct}),K_(It,v,u,h))}else if(Et){Bd(m,v,o,e);var zt=X_(d,S,v.type,o);zt&&(Md(zt,ft,e,{isInit:!0}),K_(zt,v,u,h))}else ht==="remove"&&(t_(m,v),Bd(m,v,o,e));var Kt=o.get(d);if(Kt&&I)if(Tt){var Yt=Kt.getTextContent();Yt?Yt.attr(I):Kt.setTextContent(new he.ZP(I))}else Et&&Kt.setTextContent(new he.ZP(I));if(Kt){var ne=v.clipPath;if(ne){var oe=ne.type,ce=void 0,Ct=!1;if(Tt){var me=Kt.getClipPath();Ct=!me||Na(me).type!==oe,ce=Ct?Dm(oe):me}else Et&&(Ct=!0,ce=Dm(oe));Kt.setClipPath(ce),Md(ce,ne,e,{isInit:Ct}),Ed(ce,ne.keyframeAnimation,e)}var _e=Na(Kt);Kt.setTextConfig(U),_e.option=v,YD(Kt,e,v),mr.setTooltipConfig({el:Kt,componentModel:e,itemName:Kt.name,itemTooltipOption:v.tooltip}),Ed(Kt,v.keyframeAnimation,e)}})}},r.prototype._relocate=function(e,n){for(var o=e.option.elements,s=this.group,u=this._elMap,h=n.getWidth(),v=n.getHeight(),d=["x","y"],m=0;m<o.length;m++){var _=o[m],S=We.U5(_.id,null),A=S!=null?u.get(S):null;if(!(!A||!A.isGroup)){var L=A.parent,I=L===s,U=Na(A),et=Na(L);U.width=(0,De.GM)(U.option.width,I?h:et.width)||0,U.height=(0,De.GM)(U.option.height,I?v:et.height)||0}}for(var m=o.length-1;m>=0;m--){var _=o[m],S=We.U5(_.id,null),A=S!=null?u.get(S):null;if(A){var L=A.parent,et=Na(L),ft=L===s?{width:h,height:v}:{width:et.width,height:et.height},ht={},Tt=Hr.p$(A,_,ft,null,{hv:_.hv,boundingMode:_.bounding},ht);if(!Na(A).isNew&&Tt){for(var Et=_.transition,Ct={},It=0;It<d.length;It++){var zt=d[It],Kt=ht[zt];Et&&(Jl(Et)||g.cq(Et,zt)>=0)?Ct[zt]=Kt:A[zt]=Kt}(0,rr.D)(A,Ct,e,0)}else A.attr(ht)}}},r.prototype._clear=function(){var e=this,n=this._elMap;n.each(function(o){Bd(o,Na(o).option,n,e._lastGraphicModel)}),this._elMap=g.kW()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(qn.Z);function Dm(a){var r=g.RI(H_,a)?H_[a]:mr.getShapeClass(a),e=new r({});return Na(e).type=a,e}function X_(a,r,e,n){var o=Dm(e);return r.add(o),n.set(a,o),Na(o).id=a,Na(o).isNew=!0,o}function Bd(a,r,e,n){var o=a&&a.parent;o&&(a.type==="group"&&a.traverse(function(s){Bd(s,r,e,n)}),Cd(a,r,n),e.removeKey(Na(a).id))}function K_(a,r,e,n){a.isGroup||g.S6([["cursor",Ia.ZP.prototype.cursor],["zlevel",n||0],["z",e||0],["z2",0]],function(o){var s=o[0];g.RI(r,s)?a[s]=g.pD(r[s],o[1]):a[s]==null&&(a[s]=o[1])}),g.S6(g.XP(r),function(o){if(o.indexOf("on")===0){var s=r[o];a[o]=g.mf(s)?s:null}}),g.RI(r,"draggable")&&(a.draggable=r.draggable),r.name!=null&&(a.name=r.name),r.id!=null&&(a.id=r.id)}function KD(a){return a=g.l7({},a),g.S6(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Hr.gN),function(r){delete a[r]}),a}function YD(a,r,e){var n=(0,Er.A)(a).eventData;!a.silent&&!a.ignore&&!n&&(n=(0,Er.A)(a).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:a.name}),n&&(n.info=e.info)}function jD(a){a.registerComponentModel(HD),a.registerComponentView(XD),a.registerPreprocessor(function(r){var e=r.graphic;(0,g.kJ)(e)?!e[0]||!e[0].elements?r.graphic=[{elements:e}]:r.graphic=[r.graphic[0]]:e&&!e.elements&&(r.graphic=[{elements:[e]}])})}var Y_=["x","y","radius","angle","single"],JD=["cartesian2d","polar","singleAxis"];function QD(a){var r=a.get("coordinateSystem");return(0,g.cq)(JD,r)>=0}function tl(a){return a+"Axis"}function kC(a){return a+"AxisIndex"}function UC(a){return a+"AxisId"}function $D(a,r){var e=(0,g.kW)(),n=[],o=(0,g.kW)();a.eachComponent({mainType:"dataZoom",query:r},function(m){o.get(m.uid)||h(m)});var s;do s=!1,a.eachComponent("dataZoom",u);while(s);function u(m){!o.get(m.uid)&&v(m)&&(h(m),s=!0)}function h(m){o.set(m.uid,!0),n.push(m),d(m)}function v(m){var _=!1;return m.eachTargetAxis(function(S,A){var L=e.get(S);L&&L[A]&&(_=!0)}),_}function d(m){m.eachTargetAxis(function(_,S){(e.get(_)||e.set(_,[]))[S]=!0})}return n}function j_(a){var r=a.ecModel,e={infoList:[],infoMap:(0,g.kW)()};return a.eachTargetAxis(function(n,o){var s=r.getComponent(tl(n),o);if(s){var u=s.getCoordSysModel();if(u){var h=u.uid,v=e.infoMap.get(h);v||(v={model:u,axisModels:[]},e.infoList.push(v),e.infoMap.set(h,v)),v.axisModels.push(s)}}}),e}var wm=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},a}(),qD=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,n,o){var s=J_(e);this.settledOption=s,this.mergeDefaultAndTheme(e,o),this._doInit(s)},r.prototype.mergeOption=function(e){var n=J_(e);(0,g.TS)(this.option,e,!0),(0,g.TS)(this.settledOption,n,!0),this._doInit(n)},r.prototype._doInit=function(e){var n=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;(0,g.S6)([["start","startValue"],["end","endValue"]],function(s,u){this._rangePropMode[u]==="value"&&(n[s[0]]=o[s[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),n=this._targetAxisInfoMap=(0,g.kW)(),o=this._fillSpecifiedTargetAxis(n);o?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var n=!1;return(0,g.S6)(Y_,function(o){var s=this.getReferringComponents(tl(o),We.iP);if(s.specified){n=!0;var u=new wm;(0,g.S6)(s.models,function(h){u.add(h.componentIndex)}),e.set(o,u)}},this),n},r.prototype._fillAutoTargetAxisByOrient=function(e,n){var o=this.ecModel,s=!0;if(s){var u=n==="vertical"?"y":"x",h=o.findComponents({mainType:u+"Axis"});v(h,u)}if(s){var h=o.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===n}});v(h,"single")}function v(d,m){var _=d[0];if(_){var S=new wm;if(S.add(_.componentIndex),e.set(m,S),s=!1,m==="x"||m==="y"){var A=_.getReferringComponents("grid",We.C6).models[0];A&&(0,g.S6)(d,function(L){_.componentIndex!==L.componentIndex&&A===L.getReferringComponents("grid",We.C6).models[0]&&S.add(L.componentIndex)})}}}s&&(0,g.S6)(Y_,function(d){if(s){var m=o.findComponents({mainType:tl(d),filter:function(S){return S.get("type",!0)==="category"}});if(m[0]){var _=new wm;_.add(m[0].componentIndex),e.set(d,_),s=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(n){!e&&(e=n)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var n=this._rangePropMode,o=this.get("rangeMode");(0,g.S6)([["start","startValue"],["end","endValue"]],function(s,u){var h=e[s[0]]!=null,v=e[s[1]]!=null;h&&!v?n[u]="percent":!h&&v?n[u]="value":o?n[u]=o[u]:h&&(n[u]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(n,o){e==null&&(e=this.ecModel.getComponent(tl(n),o))},this),e},r.prototype.eachTargetAxis=function(e,n){this._targetAxisInfoMap.each(function(o,s){(0,g.S6)(o.indexList,function(u){e.call(n,s,u)})})},r.prototype.getAxisProxy=function(e,n){var o=this.getAxisModel(e,n);if(o)return o.__dzAxisProxy},r.prototype.getAxisModel=function(e,n){var o=this._targetAxisInfoMap.get(e);if(o&&o.indexMap[n])return this.ecModel.getComponent(tl(e),n)},r.prototype.setRawRange=function(e){var n=this.option,o=this.settledOption;(0,g.S6)([["start","startValue"],["end","endValue"]],function(s){(e[s[0]]!=null||e[s[1]]!=null)&&(n[s[0]]=o[s[0]]=e[s[0]],n[s[1]]=o[s[1]]=e[s[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var n=this.option;(0,g.S6)(["start","startValue","end","endValue"],function(o){n[o]=e[o]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,n){if(e==null&&n==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(e,n).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var n,o=this._targetAxisInfoMap.keys(),s=0;s<o.length;s++)for(var u=o[s],h=this._targetAxisInfoMap.get(u),v=0;v<h.indexList.length;v++){var d=this.getAxisProxy(u,h.indexList[v]);if(d.hostedBy(this))return d;n||(n=d)}return n},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(ti.Z);function J_(a){var r={};return(0,g.S6)(["start","end","startValue","endValue","throttle"],function(e){a.hasOwnProperty(e)&&(r[e]=a[e])}),r}var $h=qD,tw=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}($h),ew=tw,rw=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.dataZoomModel=e,this.ecModel=n,this.api=o},r.type="dataZoom",r}(qn.Z),Am=rw,nw=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}(Am),iw=nw,aw=z(67060),df=g.S6,Q_=De.dt,ow=function(){function a(r,e,n,o){this._dimName=r,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=n}return a.prototype.hostedBy=function(r){return this._dataZoomModel===r},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(QD(e)){var n=tl(this._dimName),o=e.getReferringComponents(n,We.C6).models[0];o&&this._axisIndex===o.componentIndex&&r.push(e)}},this),r},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return g.d9(this._minMaxSpan)},a.prototype.calculateDataWindow=function(r){var e=this._dataExtent,n=this.getAxisModel(),o=n.axis.scale,s=this._dataZoomModel.getRangePropMode(),u=[0,100],h=[],v=[],d;df(["start","end"],function(S,A){var L=r[S],I=r[S+"Value"];s[A]==="percent"?(L==null&&(L=u[A]),I=o.parse(De.NU(L,u,e))):(d=!0,I=I==null?e[A]:o.parse(I),L=De.NU(I,e,u)),v[A]=I==null||isNaN(I)?e[A]:I,h[A]=L==null||isNaN(L)?u[A]:L}),Q_(v),Q_(h);var m=this._minMaxSpan;d?_(v,h,e,u,!1):_(h,v,u,e,!0);function _(S,A,L,I,U){var et=U?"Span":"ValueSpan";us(0,S,L,"all",m["min"+et],m["max"+et]);for(var ft=0;ft<2;ft++)A[ft]=De.NU(S[ft],L,I,!0),U&&(A[ft]=o.parse(A[ft]))}return{valueWindow:v,percentWindow:h}},a.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=sw(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(r.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var n=this._dimName,o=this.getTargetSeriesModels(),s=r.get("filterMode"),u=this._valueWindow;if(s==="none")return;df(o,function(v){var d=v.getData(),m=d.mapDimensionsAll(n);if(m.length){if(s==="weakFilter"){var _=d.getStore(),S=g.UI(m,function(A){return d.getDimensionIndex(A)},d);d.filterSelf(function(A){for(var L,I,U,et=0;et<m.length;et++){var ft=_.get(S[et],A),ht=!isNaN(ft),Tt=ft<u[0],Et=ft>u[1];if(ht&&!Tt&&!Et)return!0;ht&&(U=!0),Tt&&(L=!0),Et&&(I=!0)}return U&&L&&I})}else df(m,function(A){if(s==="empty")v.setData(d=d.map(A,function(I){return h(I)?I:NaN}));else{var L={};L[A]=u,d.selectRange(L)}});df(m,function(A){d.setApproximateExtent(u,A)})}});function h(v){return v>=u[0]&&v<=u[1]}},a.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;df(["min","max"],function(o){var s=e.get(o+"Span"),u=e.get(o+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?s=De.NU(n[0]+u,n,[0,100],!0):s!=null&&(u=De.NU(s,[0,100],n,!0)-n[0]),r[o+"Span"]=s,r[o+"ValueSpan"]=u},this)},a.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var o=De.M9(n,[0,500]);o=Math.min(o,20);var s=r.axis.scale.rawExtentInfo;e[0]!==0&&s.setDeterminedMinMax("min",+n[0].toFixed(o)),e[1]!==100&&s.setDeterminedMinMax("max",+n[1].toFixed(o)),s.freeze()}},a}();function sw(a,r,e){var n=[1/0,-1/0];df(e,function(u){(0,ai.AH)(n,u.getData(),r)});var o=a.getAxisModel(),s=(0,aw.Qw)(o.axis.scale,o,n).calculate();return[s.min,s.max]}var lw=ow,uw={getTargetSeries:function(a){function r(o){a.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(u,h){var v=a.getComponent(tl(u),h);o(u,h,v,s)})})}r(function(o,s,u,h){u.__dzAxisProxy=null});var e=[];r(function(o,s,u,h){u.__dzAxisProxy||(u.__dzAxisProxy=new lw(o,s,h,a),e.push(u.__dzAxisProxy))});var n=(0,g.kW)();return(0,g.S6)(e,function(o){(0,g.S6)(o.getTargetSeriesModels(),function(s){n.set(s.uid,s)})}),n},overallReset:function(a,r){a.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).reset(e)}),e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).filterData(e,r)})}),a.eachComponent("dataZoom",function(e){var n=e.findRepresentativeAxisProxy();if(n){var o=n.getDataPercentWindow(),s=n.getDataValueWindow();e.setCalculatedRange({start:o[0],end:o[1],startValue:s[0],endValue:s[1]})}})}},fw=uw;function hw(a){a.registerAction("dataZoom",function(r,e){var n=$D(e,r);(0,g.S6)(n,function(o){o.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var $_=!1;function bm(a){$_||($_=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,fw),hw(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function cw(a){a.registerComponentModel(ew),a.registerComponentView(iw),bm(a)}var Ba=function(){function a(){}return a}(),q_={};function pf(a,r){q_[a]=r}function t1(a){return q_[a]}var vw=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;g.S6(this.option.feature,function(n,o){var s=t1(o);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(e)),g.TS(n,s.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(ti.Z),dw=vw;function pw(a,r,e){var n=r.getBoxLayoutParams(),o=r.get("padding"),s={width:e.getWidth(),height:e.getHeight()},u=(0,Hr.ME)(n,s,o);(0,Hr.BZ)(r.get("orient"),a,r.get("itemGap"),u.width,u.height),(0,Hr.p$)(a,n,s,o)}function e1(a,r){var e=ii.MY(r.get("padding")),n=r.getItemStyle(["color","opacity"]);return n.fill=r.get("backgroundColor"),a=new Kr.Z({shape:{x:a.x-e[3],y:a.y-e[0],width:a.width+e[1]+e[3],height:a.height+e[0]+e[2],r:r.get("borderRadius")},style:n,silent:!0,z2:-1}),a}var gw=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){var u=this.group;if(u.removeAll(),!e.get("show"))return;var h=+e.get("itemSize"),v=e.get("orient")==="vertical",d=e.get("feature")||{},m=this._features||(this._features={}),_=[];g.S6(d,function(L,I){_.push(I)}),new yo.Z(this._featureNames||[],_).add(S).update(S).remove(g.WA(S,null)).execute(),this._featureNames=_;function S(L,I){var U=_[L],et=_[I],ft=d[U],ht=new zn.Z(ft,e,e.ecModel),Tt;if(s&&s.newTitle!=null&&s.featureName===U&&(ft.title=s.newTitle),U&&!et){if(mw(U))Tt={onclick:ht.option.onclick,featureName:U};else{var Et=t1(U);if(!Et)return;Tt=new Et}m[U]=Tt}else if(Tt=m[et],!Tt)return;Tt.uid=(0,Di.Kr)("toolbox-feature"),Tt.model=ht,Tt.ecModel=n,Tt.api=o;var Ct=Tt instanceof Ba;if(!U&&et){Ct&&Tt.dispose&&Tt.dispose(n,o);return}if(!ht.get("show")||Ct&&Tt.unusable){Ct&&Tt.remove&&Tt.remove(n,o);return}A(ht,Tt,U),ht.setIconStatus=function(It,zt){var Kt=this.option,Yt=this.iconPaths;Kt.iconStatus=Kt.iconStatus||{},Kt.iconStatus[It]=zt,Yt[It]&&(zt==="emphasis"?Qe.fD:Qe.Mh)(Yt[It])},Tt instanceof Ba&&Tt.render&&Tt.render(ht,n,o,s)}function A(L,I,U){var et=L.getModel("iconStyle"),ft=L.getModel(["emphasis","iconStyle"]),ht=I instanceof Ba&&I.getIcons?I.getIcons():L.get("icon"),Tt=L.get("title")||{},Et,Ct;g.HD(ht)?(Et={},Et[U]=ht):Et=ht,g.HD(Tt)?(Ct={},Ct[U]=Tt):Ct=Tt;var It=L.iconPaths={};g.S6(Et,function(zt,Kt){var Yt=mr.createIcon(zt,{},{x:-h/2,y:-h/2,width:h,height:h});Yt.setStyle(et.getItemStyle());var ne=Yt.ensureState("emphasis");ne.style=ft.getItemStyle();var oe=new he.ZP({style:{text:Ct[Kt],align:ft.get("textAlign"),borderRadius:ft.get("textBorderRadius"),padding:ft.get("textPadding"),fill:null},ignore:!0});Yt.setTextContent(oe),mr.setTooltipConfig({el:Yt,componentModel:e,itemName:Kt,formatterParamsExtra:{title:Ct[Kt]}}),Yt.__title=Ct[Kt],Yt.on("mouseover",function(){var ce=ft.getItemStyle(),me=v?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";oe.setStyle({fill:ft.get("textFill")||ce.fill||ce.stroke||"#000",backgroundColor:ft.get("textBackgroundColor")}),Yt.setTextConfig({position:ft.get("textPosition")||me}),oe.ignore=!e.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){L.get(["iconStatus",Kt])!=="emphasis"&&o.leaveEmphasis(this),oe.hide()}),(L.get(["iconStatus",Kt])==="emphasis"?Qe.fD:Qe.Mh)(Yt),u.add(Yt),Yt.on("click",g.ak(I.onclick,I,n,o,Kt)),It[Kt]=Yt})}pw(u,e,o),u.add(e1(u.getBoundingRect(),e)),v||u.eachChild(function(L){var I=L.__title,U=L.ensureState("emphasis"),et=U.textConfig||(U.textConfig={}),ft=L.getTextContent(),ht=ft&&ft.ensureState("emphasis");if(ht&&!g.mf(ht)&&I){var Tt=ht.style||(ht.style={}),Et=xt.lP(I,he.ZP.makeFont(Tt)),Ct=L.x+u.x,It=L.y+u.y+h,zt=!1;It+Et.height>o.getHeight()&&(et.position="top",zt=!0);var Kt=zt?-5-Et.height:h+10;Ct+Et.width/2>o.getWidth()?(et.position=["100%",Kt],Tt.align="right"):Ct-Et.width/2<0&&(et.position=[0,Kt],Tt.align="left")}})},r.prototype.updateView=function(e,n,o,s){g.S6(this._features,function(u){u instanceof Ba&&u.updateView&&u.updateView(u.model,n,o,s)})},r.prototype.remove=function(e,n){g.S6(this._features,function(o){o instanceof Ba&&o.remove&&o.remove(e,n)}),this.group.removeAll()},r.prototype.dispose=function(e,n){g.S6(this._features,function(o){o instanceof Ba&&o.dispose&&o.dispose(e,n)})},r.type="toolbox",r}(qn.Z);function mw(a){return a.indexOf("my")===0}var yw=gw,_w=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){var o=this.model,s=o.get("name")||e.get("title.0.text")||"echarts",u=n.getZr().painter.getType()==="svg",h=u?"svg":o.get("type",!0)||"png",v=n.getConnectedDataURL({type:h,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),d=aa.Z.browser;if((0,g.mf)(MouseEvent)&&(d.newEdge||!d.ie&&!d.edge)){var m=document.createElement("a");m.download=s+"."+h,m.target="_blank",m.href=v;var _=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});m.dispatchEvent(_)}else if(window.navigator.msSaveOrOpenBlob||u){var S=v.split(","),A=S[0].indexOf("base64")>-1,L=u?decodeURIComponent(S[1]):S[1];A&&(L=window.atob(L));var I=s+"."+h;if(window.navigator.msSaveOrOpenBlob){for(var U=L.length,et=new Uint8Array(U);U--;)et[U]=L.charCodeAt(U);var ft=new Blob([et]);window.navigator.msSaveOrOpenBlob(ft,I)}else{var ht=document.createElement("iframe");document.body.appendChild(ht);var Tt=ht.contentWindow,Et=Tt.document;Et.open("image/svg+xml","replace"),Et.write(L),Et.close(),Tt.focus(),Et.execCommand("SaveAs",!0,I),document.body.removeChild(ht)}}else{var Ct=o.get("lang"),It='<body style="margin:0;"><img src="'+v+'" style="max-width:100%;" title="'+(Ct&&Ct[0]||"")+'" /></body>',zt=window.open();zt.document.write(It),zt.document.title=s}},r.getDefaultOption=function(e){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},r}(Ba),xw=_w,r1="__ec_magicType_stack__",ZC=null,WC=null,Sw=[["line","bar"],["stack"]],Tw=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getIcons=function(){var e=this.model,n=e.get("icon"),o={};return g.S6(e.get("type"),function(s){n[s]&&(o[s]=n[s])}),o},r.getDefaultOption=function(e){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},r.prototype.onclick=function(e,n,o){var s=this.model,u=s.get(["seriesIndex",o]);if(n1[o]){var h={series:[]},v=function(_){var S=_.subType,A=_.id,L=n1[o](S,A,_,s);L&&(g.ce(L,_.option),h.series.push(L));var I=_.coordinateSystem;if(I&&I.type==="cartesian2d"&&(o==="line"||o==="bar")){var U=I.getAxesByScale("ordinal")[0];if(U){var et=U.dim,ft=et+"Axis",ht=_.getReferringComponents(ft,We.C6).models[0],Tt=ht.componentIndex;h[ft]=h[ft]||[];for(var Et=0;Et<=Tt;Et++)h[ft][Tt]=h[ft][Tt]||{};h[ft][Tt].boundaryGap=o==="bar"}}};g.S6(Sw,function(_){g.cq(_,o)>=0&&g.S6(_,function(S){s.setIconStatus(S,"normal")})}),s.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},v);var d,m=o;o==="stack"&&(d=g.TS({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",o])!=="emphasis"&&(m="tiled")),n.dispatchAction({type:"changeMagicType",currentType:m,newOption:h,newTitle:d,featureName:"magicType"})}},r}(Ba),n1={line:function(a,r,e,n){if(a==="bar")return g.TS({id:r,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(a,r,e,n){if(a==="line")return g.TS({id:r,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(a,r,e,n){var o=e.get("stack")===r1;if(a==="line"||a==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),g.TS({id:r,stack:o?"":r1},n.get(["option","stack"])||{},!0)}};ae.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,r){r.mergeOption(a.newOption)});var Dw=Tw,Fd=new Array(60).join("-"),gf="	";function ww(a){var r={},e=[],n=[];return a.eachRawSeries(function(o){var s=o.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var u=s.getBaseAxis();if(u.type==="category"){var h=u.dim+"_"+u.index;r[h]||(r[h]={categoryAxis:u,valueAxis:s.getOtherAxis(u),series:[]},n.push({axisDim:u.dim,axisIndex:u.index})),r[h].series.push(o)}else e.push(o)}else e.push(o)}),{seriesGroupByCategoryAxis:r,other:e,meta:n}}function Aw(a){var r=[];return g.S6(a,function(e,n){var o=e.categoryAxis,s=e.valueAxis,u=s.dim,h=[" "].concat(g.UI(e.series,function(A){return A.name})),v=[o.model.getCategories()];g.S6(e.series,function(A){var L=A.getRawData();v.push(A.getRawData().mapArray(L.mapDimension(u),function(I){return I}))});for(var d=[h.join(gf)],m=0;m<v[0].length;m++){for(var _=[],S=0;S<v.length;S++)_.push(v[S][m]);d.push(_.join(gf))}r.push(d.join(`
`))}),r.join(`

`+Fd+`

`)}function bw(a){return g.UI(a,function(r){var e=r.getRawData(),n=[r.name],o=[];return e.each(e.dimensions,function(){for(var s=arguments.length,u=arguments[s-1],h=e.getName(u),v=0;v<s-1;v++)o[v]=arguments[v];n.push((h?h+gf:"")+o.join(gf))}),n.join(`
`)}).join(`

`+Fd+`

`)}function Mw(a){var r=ww(a);return{value:g.hX([Aw(r.seriesGroupByCategoryAxis),bw(r.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+Fd+`

`),meta:r.meta}}function Gd(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Cw(a){var r=a.slice(0,a.indexOf(`
`));if(r.indexOf(gf)>=0)return!0}var Mm=new RegExp("["+gf+"]+","g");function Ew(a){for(var r=a.split(/\n+/g),e=Gd(r.shift()).split(Mm),n=[],o=g.UI(e,function(v){return{name:v,data:[]}}),s=0;s<r.length;s++){var u=Gd(r[s]).split(Mm);n.push(u.shift());for(var h=0;h<u.length;h++)o[h]&&(o[h].data[s]=u[h])}return{series:o,categories:n}}function Pw(a){for(var r=a.split(/\n+/g),e=Gd(r.shift()),n=[],o=0;o<r.length;o++){var s=Gd(r[o]);if(s){var u=s.split(Mm),h="",v=void 0,d=!1;isNaN(u[0])?(d=!0,h=u[0],u=u.slice(1),n[o]={name:h,value:[]},v=n[o].value):v=n[o]=[];for(var m=0;m<u.length;m++)v.push(+u[m]);v.length===1&&(d?n[o].value=v[0]:n[o]=v[0])}}return{name:e,data:n}}function Lw(a,r){var e=a.split(new RegExp(`
*`+Fd+`
*`,"g")),n={series:[]};return g.S6(e,function(o,s){if(Cw(o)){var u=Ew(o),h=r[s],v=h.axisDim+"Axis";h&&(n[v]=n[v]||[],n[v][h.axisIndex]={data:u.categories},n.series=n.series.concat(u.series))}else{var u=Pw(o);n.series.push(u)}}),n}var Iw=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),s=this.model;this._dom&&o.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=s.get("backgroundColor")||"#fff";var h=document.createElement("h4"),v=s.get("lang")||[];h.innerHTML=v[0]||s.get("title"),h.style.cssText="margin:10px 20px",h.style.color=s.get("textColor");var d=document.createElement("div"),m=document.createElement("textarea");d.style.cssText="overflow:auto";var _=s.get("optionToContent"),S=s.get("contentToOption"),A=Mw(e);if(g.mf(_)){var L=_(n.getOption());g.HD(L)?d.innerHTML=L:g.Mh(L)&&d.appendChild(L)}else{m.readOnly=s.get("readOnly");var I=m.style;I.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",I.color=s.get("textColor"),I.borderColor=s.get("textareaBorderColor"),I.backgroundColor=s.get("textareaColor"),m.value=A.value,d.appendChild(m)}var U=A.meta,et=document.createElement("div");et.style.cssText="position:absolute;bottom:5px;left:0;right:0";var ft="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",ht=document.createElement("div"),Tt=document.createElement("div");ft+=";background-color:"+s.get("buttonColor"),ft+=";color:"+s.get("buttonTextColor");var Et=this;function Ct(){o.removeChild(u),Et._dom=null}(0,Yi.Oo)(ht,"click",Ct),(0,Yi.Oo)(Tt,"click",function(){if(S==null&&_!=null||S!=null&&_==null){Ct();return}var It;try{g.mf(S)?It=S(d,n.getOption()):It=Lw(m.value,U)}catch(zt){throw Ct(),new Error("Data view format error "+zt)}It&&n.dispatchAction({type:"changeDataView",newOption:It}),Ct()}),ht.innerHTML=v[1],Tt.innerHTML=v[2],Tt.style.cssText=ht.style.cssText=ft,!s.get("readOnly")&&et.appendChild(Tt),et.appendChild(ht),u.appendChild(h),u.appendChild(d),u.appendChild(et),d.style.height=o.clientHeight-80+"px",o.appendChild(u),this._dom=u},r.prototype.remove=function(e,n){this._dom&&n.getDom().removeChild(this._dom)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.getDefaultOption=function(e){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},r}(Ba);function Rw(a,r){return g.UI(a,function(e,n){var o=r&&r[n];if(g.Kn(o)&&!g.kJ(o)){var s=g.Kn(e)&&!g.kJ(e);s||(e={value:e});var u=o.name!=null&&e.name==null;return e=g.ce(e,o),u&&delete e.name,e}else return e})}ae.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,r){var e=[];g.S6(a.newOption.series,function(n){var o=r.getSeriesByName(n.name)[0];if(!o)e.push(g.l7({type:"scatter"},n));else{var s=o.get("data");e.push({name:n.name,data:Rw(n.data,s)})}}),r.mergeOption(g.ce({series:e},a.newOption))});var Ow=Iw,i1=g.S6,a1=(0,We.Yf)();function Nw(a,r){var e=Cm(a);i1(r,function(n,o){for(var s=e.length-1;s>=0;s--){var u=e[s];if(u[o])break}if(s<0){var h=a.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(h){var v=h.getPercentRange();e[0][o]={dataZoomId:o,start:v[0],end:v[1]}}}}),e.push(r)}function Bw(a){var r=Cm(a),e=r[r.length-1];r.length>1&&r.pop();var n={};return i1(e,function(o,s){for(var u=r.length-1;u>=0;u--)if(o=r[u][s],o){n[s]=o;break}}),n}function Fw(a){a1(a).snapshots=null}function Gw(a){return Cm(a).length}function Cm(a){var r=a1(a);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var zw=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){Fw(e),n.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(e){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return n},r}(Ba);ae.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,r){r.resetOption("recreate")});var Vw=zw,kw=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Uw=function(){function a(r,e,n){var o=this;this._targetInfoList=[];var s=o1(e,r);(0,g.S6)(Zw,function(u,h){(!n||!n.include||(0,g.cq)(n.include,h)>=0)&&u(s,o._targetInfoList)})}return a.prototype.setOutputRanges=function(r,e){return this.matchOutputRanges(r,e,function(n,o,s){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var u=Pm[n.brushType](0,s,o);n.__rangeOffset={offset:f1[n.brushType](u.values,n.range,[1,1]),xyMinMax:u.xyMinMax}}}),r},a.prototype.matchOutputRanges=function(r,e,n){(0,g.S6)(r,function(o){var s=this.findTargetInfo(o,e);s&&s!==!0&&(0,g.S6)(s.coordSyses,function(u){var h=Pm[o.brushType](1,u,o.range,!0);n(o,h.values,u,e)})},this)},a.prototype.setInputRanges=function(r,e){(0,g.S6)(r,function(n){var o=this.findTargetInfo(n,e);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var s=Pm[n.brushType](0,o.coordSys,n.coordRange),u=n.__rangeOffset;n.range=u?f1[n.brushType](s.values,u.offset,Ww(s.xyMinMax,u.xyMinMax)):s.values}},this)},a.prototype.makePanelOpts=function(r,e){return(0,g.UI)(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:Ji(o),isTargetByCursor:Td(o,r,n.coordSysModel),getLinearBrushOtherExtent:Xh(o)}})},a.prototype.controlSeries=function(r,e,n){var o=this.findTargetInfo(r,n);return o===!0||o&&(0,g.cq)(o.coordSyses,e.coordinateSystem)>=0},a.prototype.findTargetInfo=function(r,e){for(var n=this._targetInfoList,o=o1(e,r),s=0;s<n.length;s++){var u=n[s],h=r.panelId;if(h){if(u.panelId===h)return u}else for(var v=0;v<s1.length;v++)if(s1[v](o,u))return u}return!0},a}();function Em(a){return a[0]>a[1]&&a.reverse(),a}function o1(a,r){return(0,We.pm)(a,r,{includeMainTypes:kw})}var Zw={grid:function(a,r){var e=a.xAxisModels,n=a.yAxisModels,o=a.gridModels,s=(0,g.kW)(),u={},h={};!e&&!n&&!o||((0,g.S6)(e,function(v){var d=v.axis.grid.model;s.set(d.id,d),u[d.id]=!0}),(0,g.S6)(n,function(v){var d=v.axis.grid.model;s.set(d.id,d),h[d.id]=!0}),(0,g.S6)(o,function(v){s.set(v.id,v),u[v.id]=!0,h[v.id]=!0}),s.each(function(v){var d=v.coordinateSystem,m=[];(0,g.S6)(d.getCartesians(),function(_,S){((0,g.cq)(e,_.getAxis("x").model)>=0||(0,g.cq)(n,_.getAxis("y").model)>=0)&&m.push(_)}),r.push({panelId:"grid--"+v.id,gridModel:v,coordSysModel:v,coordSys:m[0],coordSyses:m,getPanelRect:l1.grid,xAxisDeclared:u[v.id],yAxisDeclared:h[v.id]})}))},geo:function(a,r){(0,g.S6)(a.geoModels,function(e){var n=e.coordinateSystem;r.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:l1.geo})})}},s1=[function(a,r){var e=a.xAxisModel,n=a.yAxisModel,o=a.gridModel;return!o&&e&&(o=e.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===r.gridModel},function(a,r){var e=a.geoModel;return e&&e===r.geoModel}],l1={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,r=a.getBoundingRect().clone();return r.applyTransform(mr.getTransform(a)),r}},Pm={lineX:(0,g.WA)(u1,0),lineY:(0,g.WA)(u1,1),rect:function(a,r,e,n){var o=a?r.pointToData([e[0][0],e[1][0]],n):r.dataToPoint([e[0][0],e[1][0]],n),s=a?r.pointToData([e[0][1],e[1][1]],n):r.dataToPoint([e[0][1],e[1][1]],n),u=[Em([o[0],s[0]]),Em([o[1],s[1]])];return{values:u,xyMinMax:u}},polygon:function(a,r,e,n){var o=[[1/0,-1/0],[1/0,-1/0]],s=(0,g.UI)(e,function(u){var h=a?r.pointToData(u,n):r.dataToPoint(u,n);return o[0][0]=Math.min(o[0][0],h[0]),o[1][0]=Math.min(o[1][0],h[1]),o[0][1]=Math.max(o[0][1],h[0]),o[1][1]=Math.max(o[1][1],h[1]),h});return{values:s,xyMinMax:o}}};function u1(a,r,e,n){var o=e.getAxis(["x","y"][a]),s=Em((0,g.UI)([0,1],function(h){return r?o.coordToData(o.toLocalCoord(n[h]),!0):o.toGlobalCoord(o.dataToCoord(n[h]))})),u=[];return u[a]=s,u[1-a]=[NaN,NaN],{values:s,xyMinMax:u}}var f1={lineX:(0,g.WA)(h1,0),lineY:(0,g.WA)(h1,1),rect:function(a,r,e){return[[a[0][0]-e[0]*r[0][0],a[0][1]-e[0]*r[0][1]],[a[1][0]-e[1]*r[1][0],a[1][1]-e[1]*r[1][1]]]},polygon:function(a,r,e){return(0,g.UI)(a,function(n,o){return[n[0]-e[0]*r[o][0],n[1]-e[1]*r[o][1]]})}};function h1(a,r,e,n){return[r[0]-n[a]*e[0],r[1]-n[a]*e[1]]}function Ww(a,r){var e=c1(a),n=c1(r),o=[e[0]/n[0],e[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function c1(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var Lm=Uw,Hw=z(89166),Im=g.S6,Xw=(0,We.g0)("toolbox-dataZoom_"),HC=null,Kw=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){this._brushController||(this._brushController=new vs(o.getZr()),this._brushController.on("brush",g.ak(this._onBrush,this)).mount()),Jw(e,n,this,s,o),jw(e,n)},r.prototype.onclick=function(e,n,o){Yw[o].call(this)},r.prototype.remove=function(e,n){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(e,n){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(e){var n=e.areas;if(!e.isEnd||!n.length)return;var o={},s=this.ecModel;this._brushController.updateCovers([]);var u=new Lm(Rm(this.model),s,{include:["grid"]});u.matchOutputRanges(n,s,function(d,m,_){if(_.type==="cartesian2d"){var S=d.brushType;S==="rect"?(h("x",_,m[0]),h("y",_,m[1])):h({lineX:"x",lineY:"y"}[S],_,m)}}),Nw(s,o),this._dispatchZoomAction(o);function h(d,m,_){var S=m.getAxis(d),A=S.model,L=v(d,A,s),I=L.findRepresentativeAxisProxy(A).getMinMaxSpan();(I.minValueSpan!=null||I.maxValueSpan!=null)&&(_=us(0,_.slice(),S.scale.getExtent(),0,I.minValueSpan,I.maxValueSpan)),L&&(o[L.id]={dataZoomId:L.id,startValue:_[0],endValue:_[1]})}function v(d,m,_){var S;return _.eachComponent({mainType:"dataZoom",subType:"select"},function(A){var L=A.getAxisModel(d,m.componentIndex);L&&(S=A)}),S}},r.prototype._dispatchZoomAction=function(e){var n=[];Im(e,function(o,s){n.push(g.d9(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},r.getDefaultOption=function(e){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},r}(Ba),Yw={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(Bw(this.ecModel))}};function Rm(a){var r={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function jw(a,r){a.setIconStatus("back",Gw(r)>1?"emphasis":"normal")}function Jw(a,r,e,n,o){var s=e._isZoomActive;n&&n.type==="takeGlobalCursor"&&(s=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),e._isZoomActive=s,a.setIconStatus("zoom",s?"emphasis":"normal");var u=new Lm(Rm(a),r,{include:["grid"]}),h=u.makePanelOpts(o,function(v){return v.xAxisDeclared&&!v.yAxisDeclared?"lineX":!v.xAxisDeclared&&v.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(h).enableBrush(s&&h.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}(0,Hw.f)("dataZoom",function(a){var r=a.getComponent("toolbox",0),e=["feature","dataZoom"];if(!r||r.get(e)==null)return;var n=r.getModel(e),o=[],s=Rm(n),u=(0,We.pm)(a,s);Im(u.xAxisModels,function(v){return h(v,"xAxis","xAxisIndex")}),Im(u.yAxisModels,function(v){return h(v,"yAxis","yAxisIndex")});function h(v,d,m){var _=v.componentIndex,S={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Xw+d+_};S[m]=_,o.push(S)}return o});var Qw=Kw;function $w(a){a.registerComponentModel(dw),a.registerComponentView(yw),pf("saveAsImage",xw),pf("magicType",Dw),pf("dataView",Ow),pf("dataZoom",Qw),pf("restore",Vw),(0,F.D)(cw)}var qw=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(ti.Z),tA=qw;function v1(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function d1(a){if(aa.Z.domSupported){for(var r=document.documentElement.style,e=0,n=a.length;e<n;e++)if(a[e]in r)return a[e]}}var p1=d1(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),eA=d1(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function g1(a,r){if(!a)return r;r=(0,ii.zW)(r,!0);var e=a.indexOf(r);return a=e===-1?r:"-"+a.slice(0,e)+"-"+r,a.toLowerCase()}function rA(a,r){var e=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return e?r?e[r]:e:null}var nA=g1(eA,"transition"),Om=g1(p1,"transform"),iA="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(aa.Z.transform3dSupported?"will-change:transform;":"");function aA(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function oA(a,r,e){if(!(0,g.HD)(e)||e==="inside")return"";var n=a.get("backgroundColor"),o=a.get("borderWidth");r=(0,ii.Lz)(r);var s=aA(e),u=Math.max(Math.round(o)*1.5,6),h="",v=Om+":",d;(0,g.cq)(["left","right"],s)>-1?(h+="top:50%",v+="translateY(-50%) rotate("+(d=s==="left"?-225:-45)+"deg)"):(h+="left:50%",v+="translateX(-50%) rotate("+(d=s==="top"?225:45)+"deg)");var m=d*Math.PI/180,_=u+o,S=_*Math.abs(Math.cos(m))+_*Math.abs(Math.sin(m)),A=Math.round(((S-Math.SQRT2*o)/2+Math.SQRT2*o-(S-_)/2)*100)/100;h+=";"+s+":-"+A+"px";var L=r+" solid "+o+"px;",I=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",h+";"+v+";","border-bottom:"+L,"border-right:"+L,"background-color:"+n+";"];return'<div style="'+I.join("")+'"></div>'}function sA(a,r){var e="cubic-bezier(0.23,1,0.32,1)",n=" "+a/2+"s "+e,o="opacity"+n+",visibility"+n;return r||(n=" "+a+"s "+e,o+=aa.Z.transformSupported?","+Om+n:",left"+n+",top"+n),nA+":"+o}function m1(a,r,e){var n=a.toFixed(0)+"px",o=r.toFixed(0)+"px";if(!aa.Z.transformSupported)return e?"top:"+o+";left:"+n+";":[["top",o],["left",n]];var s=aa.Z.transform3dSupported,u="translate"+(s?"3d":"")+"("+n+","+o+(s?",0":"")+")";return e?"top:0;left:0;"+Om+":"+u+";":[["top",0],["left",0],[p1,u]]}function lA(a){var r=[],e=a.get("fontSize"),n=a.getTextColor();n&&r.push("color:"+n),r.push("font:"+a.getFont()),e&&r.push("line-height:"+Math.round(e*3/2)+"px");var o=a.get("textShadowColor"),s=a.get("textShadowBlur")||0,u=a.get("textShadowOffsetX")||0,h=a.get("textShadowOffsetY")||0;return o&&s&&r.push("text-shadow:"+u+"px "+h+"px "+s+"px "+o),(0,g.S6)(["decoration","align"],function(v){var d=a.get(v);d&&r.push("text-"+v+":"+d)}),r.join(";")}function uA(a,r,e){var n=[],o=a.get("transitionDuration"),s=a.get("backgroundColor"),u=a.get("shadowBlur"),h=a.get("shadowColor"),v=a.get("shadowOffsetX"),d=a.get("shadowOffsetY"),m=a.getModel("textStyle"),_=(0,Un.d_)(a,"html"),S=v+"px "+d+"px "+u+"px "+h;return n.push("box-shadow:"+S),r&&o&&n.push(sA(o,e)),s&&n.push("background-color:"+s),(0,g.S6)(["width","color","radius"],function(A){var L="border-"+A,I=(0,ii.zW)(L),U=a.get(I);U!=null&&n.push(L+":"+U+(A==="color"?"":"px"))}),n.push(lA(m)),_!=null&&n.push("padding:"+(0,ii.MY)(_).join("px ")+"px"),n.join(";")+";"}function y1(a,r,e,n,o){var s=r&&r.painter;if(e){var u=s&&s.getViewportRoot();u&&(0,R.YB)(a,u,document.body,n,o)}else{a[0]=n,a[1]=o;var h=s&&s.getViewportRootOffset();h&&(a[0]+=h.offsetLeft,a[1]+=h.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var fA=function(){function a(r,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,aa.Z.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=e.getZr(),u=this._appendToBody=n&&n.appendToBody;y1(this._styleCoord,s,u,e.getWidth()/2,e.getHeight()/2),u?document.body.appendChild(o):r.appendChild(o),this._container=r;var h=this;o.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},o.onmousemove=function(v){if(v=v||window.event,!h._enterable){var d=s.handler,m=s.painter.getViewportRoot();(0,Yi.OD)(m,v,!0),d.dispatch("mousemove",v)}},o.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return a.prototype.update=function(r){var e=this._container,n=rA(e,"position"),o=e.style;o.position!=="absolute"&&n!=="absolute"&&(o.position="relative");var s=r.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=r.get("className")||""},a.prototype.show=function(r,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,o=n.style,s=this._styleCoord;n.innerHTML?o.cssText=iA+uA(r,!this._firstShow,this._longHide)+m1(s[0],s[1],!0)+("border-color:"+(0,ii.Lz)(e)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,e,n,o,s){var u=this.el;if(r==null){u.innerHTML="";return}var h="";if((0,g.HD)(s)&&n.get("trigger")==="item"&&!v1(n)&&(h=oA(n,o,s)),(0,g.HD)(r))u.innerHTML=r+h;else if(r){u.innerHTML="",(0,g.kJ)(r)||(r=[r]);for(var v=0;v<r.length;v++)(0,g.Mh)(r[v])&&r[v].parentNode!==u&&u.appendChild(r[v]);if(h&&u.childNodes.length){var d=document.createElement("div");d.innerHTML=h,u.appendChild(d)}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},a.prototype.moveTo=function(r,e){var n=this._styleCoord;if(y1(n,this._zr,this._appendToBody,r,e),n[0]!=null&&n[1]!=null){var o=this.el.style,s=m1(n[0],n[1]);(0,g.S6)(s,function(u){o[u[0]]=u[1]})}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){var r=this,e=this.el.style;e.visibility="hidden",e.opacity="0",aa.Z.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout((0,g.ak)(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},a}(),hA=fA,cA=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=r.getZr(),x1(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var e=r.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,e,n,o,s){var u=this;g.Kn(r)&&(0,Zr._y)(""),this.el&&this._zr.remove(this.el);var h=n.getModel("textStyle");this.el=new he.ZP({style:{rich:e.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:h.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:(0,Un.d_)(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),g.S6(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){u.el.style[d]=n.get(d)}),g.S6(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){u.el.style[d]=h.get(d)||0}),this._zr.add(this.el);var v=this;this.el.on("mouseover",function(){v._enterable&&(clearTimeout(v._hideTimeout),v._show=!0),v._inContent=!0}),this.el.on("mouseout",function(){v._enterable&&v._show&&v.hideLater(v._hideDelay),v._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,e=this.el.getBoundingRect(),n=_1(r.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},a.prototype.moveTo=function(r,e){var n=this.el;if(n){var o=this._styleCoord;x1(o,this._zr,r,e),r=o[0],e=o[1];var s=n.style,u=el(s.borderWidth||0),h=_1(s);n.x=r+u+h.left,n.y=e+u+h.top,n.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(g.ak(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function el(a){return Math.max(0,a)}function _1(a){var r=el(a.shadowBlur||0),e=el(a.shadowOffsetX||0),n=el(a.shadowOffsetY||0);return{left:el(r-e),right:el(r+e),top:el(r-n),bottom:el(r+n)}}function x1(a,r,e,n){a[0]=e,a[1]=n,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var vA=cA,dA=z(48295),zd=z(53743),pA=new Kr.Z({shape:{x:-1,y:-1,width:2,height:2}}),gA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){if(!(aa.Z.node||!n.getDom())){var o=e.getComponent("tooltip"),s=this._renderMode=(0,We.U9)(o.get("renderMode"));this._tooltipContent=s==="richText"?new vA(n):new hA(n.getDom(),n,{appendToBody:o.get("appendToBody",!0)})}},r.prototype.render=function(e,n,o){if(!(aa.Z.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=n,this._api=o;var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?(0,_n.T9)(this,"_updatePosition",50,"fixRate"):(0,_n.ZH)(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var e=this._tooltipModel,n=e.get("triggerOn");w_("itemTooltip",this._api,(0,g.ak)(function(o,s,u){n!=="none"&&(n.indexOf(o)>=0?this._tryShow(s,u):o==="leave"&&this._hide(u))},this))},r.prototype._keepShow=function(){var e=this._tooltipModel,n=this._ecModel,o=this._api,s=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&u.manuallyShowTip(e,n,o,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(e,n,o,s){if(!(s.from===this.uid||aa.Z.node||!o.getDom())){var u=S1(s,o);this._ticket="";var h=s.dataByCoordSys,v=xA(s,n,o);if(v){var d=v.el.getBoundingRect().clone();d.applyTransform(v.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:v.el,position:s.position,positionDefault:"bottom"},u)}else if(s.tooltip&&s.x!=null&&s.y!=null){var m=pA;m.x=s.x,m.y=s.y,m.update(),(0,Er.A)(m).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:m},u)}else if(h)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:h,tooltipOption:s.tooltipOption},u);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,n,o,s))return;var _=b_(s,n),S=_.point[0],A=_.point[1];S!=null&&A!=null&&this._tryShow({offsetX:S,offsetY:A,target:_.el,position:s.position,positionDefault:"bottom"},u)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},u))}},r.prototype.manuallyHideTip=function(e,n,o,s){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(S1(s,o))},r.prototype._manuallyAxisShowTip=function(e,n,o,s){var u=s.seriesIndex,h=s.dataIndex,v=n.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||h==null||v==null)){var d=n.getSeriesByIndex(u);if(d){var m=d.getData(),_=qh([m.getItemModel(h),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(_.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:h,position:s.position}),!0}}},r.prototype._tryShow=function(e,n){var o=e.target,s=this._tooltipModel;if(s){this._lastX=e.offsetX,this._lastY=e.offsetY;var u=e.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,e);else if(o){this._lastDataByCoordSys=null;var h,v;(0,rh.o)(o,function(d){if((0,Er.A)(d).dataIndex!=null)return h=d,!0;if((0,Er.A)(d).tooltipConfig!=null)return v=d,!0},!0),h?this._showSeriesItemTooltip(e,h,n):v?this._showComponentItemTooltip(e,v,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},r.prototype._showOrMove=function(e,n){var o=e.get("showDelay");n=(0,g.ak)(n,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(n,o):n()},r.prototype._showAxisTooltip=function(e,n){var o=this._ecModel,s=this._tooltipModel,u=[n.offsetX,n.offsetY],h=qh([n.tooltipOption],s),v=this._renderMode,d=[],m=(0,Un.TX)("section",{blocks:[],noHeader:!0}),_=[],S=new Un.iv;(0,g.S6)(e,function(ft){(0,g.S6)(ft.dataByAxis,function(ht){var Tt=o.getComponent(ht.axisDim+"Axis",ht.axisIndex),Et=ht.value;if(!(!Tt||Et==null)){var Ct=y_(Et,Tt.axis,o,ht.seriesDataIndices,ht.valueLabelOpt),It=(0,Un.TX)("section",{header:Ct,noHeader:!(0,g.fy)(Ct),sortBlocks:!0,blocks:[]});m.blocks.push(It),(0,g.S6)(ht.seriesDataIndices,function(zt){var Kt=o.getSeriesByIndex(zt.seriesIndex),Yt=zt.dataIndexInside,ne=Kt.getDataParams(Yt);if(!(ne.dataIndex<0)){ne.axisDim=ht.axisDim,ne.axisIndex=ht.axisIndex,ne.axisType=ht.axisType,ne.axisId=ht.axisId,ne.axisValue=ai.DX(Tt.axis,{value:Et}),ne.axisValueLabel=Ct,ne.marker=S.makeTooltipMarker("item",(0,ii.Lz)(ne.color),v);var oe=(0,zd.f)(Kt.formatTooltip(Yt,!0,null)),ce=oe.frag;if(ce){var me=qh([Kt],s).get("valueFormatter");It.blocks.push(me?(0,g.l7)({valueFormatter:me},ce):ce)}oe.text&&_.push(oe.text),d.push(ne)}})}})}),m.blocks.reverse(),_.reverse();var A=n.position,L=h.get("order"),I=(0,Un.BY)(m,S,v,L,o.get("useUTC"),h.get("textStyle"));I&&_.unshift(I);var U=v==="richText"?`

`:"<br/>",et=_.join(U);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(e,d)?this._updatePosition(h,A,u[0],u[1],this._tooltipContent,d):this._showTooltipContent(h,et,d,Math.random()+"",u[0],u[1],A,null,S)})},r.prototype._showSeriesItemTooltip=function(e,n,o){var s=this._ecModel,u=(0,Er.A)(n),h=u.seriesIndex,v=s.getSeriesByIndex(h),d=u.dataModel||v,m=u.dataIndex,_=u.dataType,S=d.getData(_),A=this._renderMode,L=e.positionDefault,I=qh([S.getItemModel(m),d,v&&(v.coordinateSystem||{}).model],this._tooltipModel,L?{position:L}:null),U=I.get("trigger");if(!(U!=null&&U!=="item")){var et=d.getDataParams(m,_),ft=new Un.iv;et.marker=ft.makeTooltipMarker("item",(0,ii.Lz)(et.color),A);var ht=(0,zd.f)(d.formatTooltip(m,!1,_)),Tt=I.get("order"),Et=I.get("valueFormatter"),Ct=ht.frag,It=Ct?(0,Un.BY)(Et?(0,g.l7)({valueFormatter:Et},Ct):Ct,ft,A,Tt,s.get("useUTC"),I.get("textStyle")):ht.text,zt="item_"+d.name+"_"+m;this._showOrMove(I,function(){this._showTooltipContent(I,It,et,zt,e.offsetX,e.offsetY,e.position,e.target,ft)}),o({type:"showTip",dataIndexInside:m,dataIndex:S.getRawIndex(m),seriesIndex:h,from:this.uid})}},r.prototype._showComponentItemTooltip=function(e,n,o){var s=(0,Er.A)(n),u=s.tooltipConfig,h=u.option||{};if((0,g.HD)(h)){var v=h;h={content:v,formatter:v}}var d=[h],m=this._ecModel.getComponent(s.componentMainType,s.componentIndex);m&&d.push(m),d.push({formatter:h.content});var _=e.positionDefault,S=qh(d,this._tooltipModel,_?{position:_}:null),A=S.get("content"),L=Math.random()+"",I=new Un.iv;this._showOrMove(S,function(){var U=(0,g.d9)(S.get("formatterParams")||{});this._showTooltipContent(S,A,U,L,e.offsetX,e.offsetY,e.position,n,I)}),o({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(e,n,o,s,u,h,v,d,m){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var _=this._tooltipContent;_.setEnterable(e.get("enterable"));var S=e.get("formatter");v=v||e.get("position");var A=n,L=this._getNearestPoint([u,h],o,e.get("trigger"),e.get("borderColor")),I=L.color;if(S)if((0,g.HD)(S)){var U=e.ecModel.get("useUTC"),et=(0,g.kJ)(o)?o[0]:o,ft=et&&et.axisType&&et.axisType.indexOf("time")>=0;A=S,ft&&(A=(0,dA.WU)(et.axisValue,A,U)),A=(0,ii.kF)(A,o,!0)}else if((0,g.mf)(S)){var ht=(0,g.ak)(function(Tt,Et){Tt===this._ticket&&(_.setContent(Et,m,e,I,v),this._updatePosition(e,v,u,h,_,o,d))},this);this._ticket=s,A=S(o,s,ht)}else A=S;_.setContent(A,m,e,I,v),_.show(e,I),this._updatePosition(e,v,u,h,_,o,d)}},r.prototype._getNearestPoint=function(e,n,o,s){if(o==="axis"||(0,g.kJ)(n))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!(0,g.kJ)(n))return{color:s||n.color||n.borderColor}},r.prototype._updatePosition=function(e,n,o,s,u,h,v){var d=this._api.getWidth(),m=this._api.getHeight();n=n||e.get("position");var _=u.getSize(),S=e.get("align"),A=e.get("verticalAlign"),L=v&&v.getBoundingRect().clone();if(v&&L.applyTransform(v.transform),(0,g.mf)(n)&&(n=n([o,s],h,u.el,L,{viewSize:[d,m],contentSize:_.slice()})),(0,g.kJ)(n))o=(0,De.GM)(n[0],d),s=(0,De.GM)(n[1],m);else if((0,g.Kn)(n)){var I=n;I.width=_[0],I.height=_[1];var U=(0,Hr.ME)(I,{width:d,height:m});o=U.x,s=U.y,S=null,A=null}else if((0,g.HD)(n)&&v){var et=_A(n,L,_,e.get("borderWidth"));o=et[0],s=et[1]}else{var et=mA(o,s,u,d,m,S?null:20,A?null:20);o=et[0],s=et[1]}if(S&&(o-=T1(S)?_[0]/2:S==="right"?_[0]:0),A&&(s-=T1(A)?_[1]/2:A==="bottom"?_[1]:0),v1(e)){var et=yA(o,s,u,d,m);o=et[0],s=et[1]}u.moveTo(o,s)},r.prototype._updateContentNotChangedOnAxis=function(e,n){var o=this._lastDataByCoordSys,s=this._cbParamsList,u=!!o&&o.length===e.length;return u&&(0,g.S6)(o,function(h,v){var d=h.dataByAxis||[],m=e[v]||{},_=m.dataByAxis||[];u=u&&d.length===_.length,u&&(0,g.S6)(d,function(S,A){var L=_[A]||{},I=S.seriesDataIndices||[],U=L.seriesDataIndices||[];u=u&&S.value===L.value&&S.axisType===L.axisType&&S.axisId===L.axisId&&I.length===U.length,u&&(0,g.S6)(I,function(et,ft){var ht=U[ft];u=u&&et.seriesIndex===ht.seriesIndex&&et.dataIndex===ht.dataIndex}),s&&(0,g.S6)(S.seriesDataIndices,function(et){var ft=et.seriesIndex,ht=n[ft],Tt=s[ft];ht&&Tt&&Tt.data!==ht.data&&(u=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=n,!!u},r.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},r.prototype.dispose=function(e,n){aa.Z.node||!n.getDom()||((0,_n.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),pm("itemTooltip",n))},r.type="tooltip",r}(qn.Z);function qh(a,r,e){var n=r.ecModel,o;e?(o=new zn.Z(e,n,n),o=new zn.Z(r.option,o,n)):o=r;for(var s=a.length-1;s>=0;s--){var u=a[s];u&&(u instanceof zn.Z&&(u=u.get("tooltip",!0)),(0,g.HD)(u)&&(u={formatter:u}),u&&(o=new zn.Z(u,o,n)))}return o}function S1(a,r){return a.dispatchAction||(0,g.ak)(r.dispatchAction,r)}function mA(a,r,e,n,o,s,u){var h=e.getSize(),v=h[0],d=h[1];return s!=null&&(a+v+s+2>n?a-=v+s:a+=s),u!=null&&(r+d+u>o?r-=d+u:r+=u),[a,r]}function yA(a,r,e,n,o){var s=e.getSize(),u=s[0],h=s[1];return a=Math.min(a+u,n)-u,r=Math.min(r+h,o)-h,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function _A(a,r,e,n){var o=e[0],s=e[1],u=Math.ceil(Math.SQRT2*n)+8,h=0,v=0,d=r.width,m=r.height;switch(a){case"inside":h=r.x+d/2-o/2,v=r.y+m/2-s/2;break;case"top":h=r.x+d/2-o/2,v=r.y-s-u;break;case"bottom":h=r.x+d/2-o/2,v=r.y+m+u;break;case"left":h=r.x-o-u,v=r.y+m/2-s/2;break;case"right":h=r.x+d+u,v=r.y+m/2-s/2}return[h,v]}function T1(a){return a==="center"||a==="middle"}function xA(a,r,e){var n=(0,We.zH)(a).queryOptionMap,o=n.keys()[0];if(!(!o||o==="series")){var s=(0,We.HZ)(r,o,n.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),u=s.models[0];if(u){var h=e.getViewOfComponentModel(u),v;if(h.group.traverse(function(d){var m=(0,Er.A)(d).tooltipConfig;if(m&&m.name===a.name)return v=d,!0}),v)return{componentMainType:o,componentIndex:u.componentIndex,el:v}}}}var SA=gA;function TA(a){(0,F.D)(Qh),a.registerComponentModel(tA),a.registerComponentView(SA),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},g.ZT),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},g.ZT)}var DA=["rect","polygon","keep","clear"];function wA(a,r){var e=(0,We.kF)(a?a.brush:[]);if(e.length){var n=[];g.S6(e,function(v){var d=v.hasOwnProperty("toolbox")?v.toolbox:[];d instanceof Array&&(n=n.concat(d))});var o=a&&a.toolbox;g.kJ(o)&&(o=o[0]),o||(o={feature:{}},a.toolbox=[o]);var s=o.feature||(o.feature={}),u=s.brush||(s.brush={}),h=u.type||(u.type=[]);h.push.apply(h,n),AA(h),r&&!h.length&&h.push.apply(h,DA)}}function AA(a){var r={};g.S6(a,function(e){r[e]=1}),a.length=0,g.S6(r,function(e,n){a.push(n)})}var rl=z(53331),D1=g.S6;function w1(a){if(a){for(var r in a)if(a.hasOwnProperty(r))return!0}}function Nm(a,r,e){var n={};return D1(r,function(s){var u=n[s]=o();D1(a[s],function(h,v){if(vi.isValidType(v)){var d={type:v,visual:h};e&&e(d,s),u[v]=new vi(d),v==="opacity"&&(d=g.d9(d),d.type="colorAlpha",u.__hidden.__alphaForOpacity=new vi(d))}})}),n;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var u=new s;return u}}function A1(a,r,e){var n;g.S6(e,function(o){r.hasOwnProperty(o)&&w1(r[o])&&(n=!0)}),n&&g.S6(e,function(o){r.hasOwnProperty(o)&&w1(r[o])?a[o]=g.d9(r[o]):delete a[o]})}function bA(a,r,e,n,o,s){var u={};g.S6(a,function(_){var S=vi.prepareVisualTypes(r[_]);u[_]=S});var h;function v(_){return(0,rl.Or)(e,h,_)}function d(_,S){(0,rl.LZ)(e,h,_,S)}s==null?e.each(m):e.each([s],m);function m(_,S){h=s==null?_:S;var A=e.getRawDataItem(h);if(!(A&&A.visualMap===!1))for(var L=n.call(o,_),I=r[L],U=u[L],et=0,ft=U.length;et<ft;et++){var ht=U[et];I[ht]&&I[ht].applyVisual(_,v,d)}}}function MA(a,r,e,n){var o={};return g.S6(a,function(s){var u=vi.prepareVisualTypes(r[s]);o[s]=u}),{progress:function(u,h){var v;n!=null&&(v=h.getDimensionIndex(n));function d(Et){return(0,rl.Or)(h,_,Et)}function m(Et,Ct){(0,rl.LZ)(h,_,Et,Ct)}for(var _,S=h.getStore();(_=u.next())!=null;){var A=h.getRawDataItem(_);if(!(A&&A.visualMap===!1))for(var L=n!=null?S.get(v,_):_,I=e(L),U=r[I],et=o[I],ft=0,ht=et.length;ft<ht;ft++){var Tt=et[ft];U[Tt]&&U[Tt].applyVisual(L,d,m)}}}}}var tc=z(48154);function CA(a){var r=a.brushType,e={point:function(n){return b1[r].point(n,e,a)},rect:function(n){return b1[r].rect(n,e,a)}};return e}var b1={lineX:M1(0),lineY:M1(1),rect:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])},rect:function(a,r,e){return a&&e.boundingRect.intersect(a)}},polygon:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])&&tc.X(e.range,a[0],a[1])},rect:function(a,r,e){var n=e.range;if(!a||n.length<=1)return!1;var o=a.x,s=a.y,u=a.width,h=a.height,v=n[0];if(tc.X(n,o,s)||tc.X(n,o+u,s)||tc.X(n,o,s+h)||tc.X(n,o+u,s+h)||gn.Z.create(a).contain(v[0],v[1])||(0,mr.linePolygonIntersect)(o,s,o+u,s,n)||(0,mr.linePolygonIntersect)(o,s,o,s+h,n)||(0,mr.linePolygonIntersect)(o+u,s,o+u,s+h,n)||(0,mr.linePolygonIntersect)(o,s+h,o+u,s+h,n))return!0}}};function M1(a){var r=["x","y"],e=["width","height"];return{point:function(n,o,s){if(n){var u=s.range,h=n[a];return ec(h,u)}},rect:function(n,o,s){if(n){var u=s.range,h=[n[r[a]],n[r[a]]+n[e[a]]];return h[1]<h[0]&&h.reverse(),ec(h[0],u)||ec(h[1],u)||ec(u[0],h)||ec(u[1],h)}}}}function ec(a,r){return r[0]<=a&&a<=r[1]}var XC=null,C1=["inBrush","outOfBrush"],Bm="__ecBrushSelect",Fm="__ecInBrushSelectEvent";function E1(a){a.eachComponent({mainType:"brush"},function(r){var e=r.brushTargetManager=new Lm(r.option,a);e.setInputRanges(r.areas,a)})}function EA(a,r,e){var n=[],o,s;a.eachComponent({mainType:"brush"},function(u){e&&e.type==="takeGlobalCursor"&&u.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),E1(a),a.eachComponent({mainType:"brush"},function(u,h){var v={brushId:u.id,brushIndex:h,brushName:u.name,areas:g.d9(u.areas),selected:[]};n.push(v);var d=u.option,m=d.brushLink,_=[],S=[],A=[],L=!1;h||(o=d.throttleType,s=d.throttleDelay);var I=g.UI(u.areas,function(Et){var Ct=RA[Et.brushType],It=g.ce({boundingRect:Ct?Ct(Et):void 0},Et);return It.selectors=CA(It),It}),U=Nm(u.option,C1,function(Et){Et.mappingMethod="fixed"});g.kJ(m)&&g.S6(m,function(Et){_[Et]=1});function et(Et){return m==="all"||!!_[Et]}function ft(Et){return!!Et.length}a.eachSeries(function(Et,Ct){var It=A[Ct]=[];Et.subType==="parallel"?ht(Et,Ct):Tt(Et,Ct,It)});function ht(Et,Ct){var It=Et.coordinateSystem;L=L||It.hasAxisBrushed(),et(Ct)&&It.eachActiveState(Et.getData(),function(zt,Kt){zt==="active"&&(S[Kt]=1)})}function Tt(Et,Ct,It){if(!(!Et.brushSelector||IA(u,Ct))&&(g.S6(I,function(Kt){u.brushTargetManager.controlSeries(Kt,Et,a)&&It.push(Kt),L=L||ft(It)}),et(Ct)&&ft(It))){var zt=Et.getData();zt.each(function(Kt){P1(Et,It,zt,Kt)&&(S[Kt]=1)})}}a.eachSeries(function(Et,Ct){var It={seriesId:Et.id,seriesIndex:Ct,seriesName:Et.name,dataIndex:[]};v.selected.push(It);var zt=A[Ct],Kt=Et.getData(),Yt=et(Ct)?function(ne){return S[ne]?(It.dataIndex.push(Kt.getRawIndex(ne)),"inBrush"):"outOfBrush"}:function(ne){return P1(Et,zt,Kt,ne)?(It.dataIndex.push(Kt.getRawIndex(ne)),"inBrush"):"outOfBrush"};(et(Ct)?L:ft(zt))&&bA(C1,U,Kt,Yt)})}),PA(r,o,s,n,e)}function PA(a,r,e,n,o){if(o){var s=a.getZr();if(!s[Fm]){s[Bm]||(s[Bm]=LA);var u=_n.T9(s,Bm,e,r);u(a,n)}}}function LA(a,r){if(!a.isDisposed()){var e=a.getZr();e[Fm]=!0,a.dispatchAction({type:"brushSelect",batch:r}),e[Fm]=!1}}function P1(a,r,e,n){for(var o=0,s=r.length;o<s;o++){var u=r[o];if(a.brushSelector(n,e,u.selectors,u))return!0}}function IA(a,r){var e=a.option.seriesIndex;return e!=null&&e!=="all"&&(g.kJ(e)?g.cq(e,r)<0:r!==e)}var RA={rect:function(a){return L1(a.range)},polygon:function(a){for(var r,e=a.range,n=0,o=e.length;n<o;n++){r=r||[[1/0,-1/0],[1/0,-1/0]];var s=e[n];s[0]<r[0][0]&&(r[0][0]=s[0]),s[0]>r[0][1]&&(r[0][1]=s[0]),s[1]<r[1][0]&&(r[1][0]=s[1]),s[1]>r[1][1]&&(r[1][1]=s[1])}return r&&L1(r)}};function L1(a){return new gn.Z(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var OA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new vs(n.getZr())).on("brush",g.ak(this._onBrush,this)).mount()},r.prototype.render=function(e,n,o,s){this.model=e,this._updateController(e,n,o,s)},r.prototype.updateTransform=function(e,n,o,s){E1(n),this._updateController(e,n,o,s)},r.prototype.updateVisual=function(e,n,o,s){this.updateTransform(e,n,o,s)},r.prototype.updateView=function(e,n,o,s){this._updateController(e,n,o,s)},r.prototype._updateController=function(e,n,o,s){(!s||s.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(e){var n=this.model.id,o=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:g.d9(o),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:g.d9(o),$from:n})},r.type="brush",r}(qn.Z),NA=OA,BA="#ddd",FA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.areas=[],e.brushOption={},e}return r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&A1(o,e,["inBrush","outOfBrush"]);var s=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:BA},s.hasOwnProperty("liftZ")||(s.liftZ=5)},r.prototype.setAreas=function(e){e&&(this.areas=g.UI(e,function(n){return I1(this.option,n)},this))},r.prototype.setBrushOption=function(e){this.brushOption=I1(this.option,e),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(ti.Z);function I1(a,r){return g.TS({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new zn.Z(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},r,!0)}var GA=FA,zA=["rect","polygon","lineX","lineY","keep","clear"],VA=function(a){(0,Wt.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o){var s,u,h;n.eachComponent({mainType:"brush"},function(v){s=v.brushType,u=v.brushOption.brushMode||"single",h=h||!!v.areas.length}),this._brushType=s,this._brushMode=u,g.S6(e.get("type",!0),function(v){e.setIconStatus(v,(v==="keep"?u==="multiple":v==="clear"?h:v===s)?"emphasis":"normal")})},r.prototype.updateView=function(e,n,o){this.render(e,n,o)},r.prototype.getIcons=function(){var e=this.model,n=e.get("icon",!0),o={};return g.S6(e.get("type",!0),function(s){n[s]&&(o[s]=n[s])}),o},r.prototype.onclick=function(e,n,o){var s=this._brushType,u=this._brushMode;o==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?s:s===o?!1:o,brushMode:o==="keep"?u==="multiple"?"single":"multiple":u}})},r.getDefaultOption=function(e){var n={show:!0,type:zA.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return n},r}(Ba),kA=VA;function UA(a){a.registerComponentView(NA),a.registerComponentModel(GA),a.registerPreprocessor(wA),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,EA),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,e){e.eachComponent({mainType:"brush",query:r},function(n){n.setAreas(r.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},g.ZT),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},g.ZT),pf("brush",kA)}var ZA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(ti.Z),WA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){if(this.group.removeAll(),!!e.get("show")){var s=this.group,u=e.getModel("textStyle"),h=e.getModel("subtextStyle"),v=e.get("textAlign"),d=g.pD(e.get("textBaseline"),e.get("textVerticalAlign")),m=new he.ZP({style:(0,Ge.Lr)(u,{text:e.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),_=m.getBoundingRect(),S=e.get("subtext"),A=new he.ZP({style:(0,Ge.Lr)(h,{text:S,fill:h.getTextColor(),y:_.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),L=e.get("link"),I=e.get("sublink"),U=e.get("triggerEvent",!0);m.silent=!L&&!U,A.silent=!I&&!U,L&&m.on("click",function(){(0,ii.MI)(L,"_"+e.get("target"))}),I&&A.on("click",function(){(0,ii.MI)(I,"_"+e.get("subtarget"))}),(0,Er.A)(m).eventData=(0,Er.A)(A).eventData=U?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(m),S&&s.add(A);var et=s.getBoundingRect(),ft=e.getBoxLayoutParams();ft.width=et.width,ft.height=et.height;var ht=(0,Hr.ME)(ft,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));v||(v=e.get("left")||e.get("right"),v==="middle"&&(v="center"),v==="right"?ht.x+=ht.width:v==="center"&&(ht.x+=ht.width/2)),d||(d=e.get("top")||e.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?ht.y+=ht.height:d==="middle"&&(ht.y+=ht.height/2),d=d||"top"),s.x=ht.x,s.y=ht.y,s.markRedraw();var Tt={align:v,verticalAlign:d};m.setStyle(Tt),A.setStyle(Tt),et=s.getBoundingRect();var Et=ht.margin,Ct=e.getItemStyle(["color","opacity"]);Ct.fill=e.get("backgroundColor");var It=new Kr.Z({shape:{x:et.x-Et[3],y:et.y-Et[0],width:et.width+Et[1]+Et[3],height:et.height+Et[0]+Et[2],r:e.get("borderRadius")},style:Ct,subPixelOptimize:!0,silent:!0});s.add(It)}},r.type="title",r}(qn.Z);function HA(a){a.registerComponentModel(ZA),a.registerComponentView(WA)}var XA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode="box",e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._initData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var n=this._data.count();this.option.loop?e=(e%n+n)%n:(e>=n&&(e=n-1),e<0&&(e=0)),this.option.currentIndex=e},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(e){this.option.autoPlay=!!e},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var e=this.option,n=e.data||[],o=e.axisType,s=this._names=[],u;o==="category"?(u=[],(0,g.S6)(n,function(d,m){var _=(0,We.U5)((0,We.C4)(d),""),S;(0,g.Kn)(d)?(S=(0,g.d9)(d),S.value=m):S=m,u.push(S),s.push(_)})):u=n;var h={category:"ordinal",time:"time",value:"number"}[o]||"number",v=this._data=new Ae.Z([{name:"value",type:h}],this);v.initData(u,s)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(ti.Z),R1=XA,O1=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline.slider",r.defaultOption=(0,Di.ZL)(R1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(R1);(0,g.jB)(O1,zd.X.prototype);var KA=O1,YA=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline",r}(qn.Z),jA=YA,JA=function(a){(0,Wt.ZT)(r,a);function r(e,n,o,s){var u=a.call(this,e,n,o)||this;return u.type=s||"value",u}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(Xi.Z),QA=JA,$A=z(64907),qA=z(29154),Gm=Math.PI,N1=(0,We.Yf)(),tb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.api=n},r.prototype.render=function(e,n,o){if(this.model=e,this.api=o,this.ecModel=n,this.group.removeAll(),e.get("show",!0)){var s=this._layout(e,o),u=this._createGroup("_mainGroup"),h=this._createGroup("_labelGroup"),v=this._axis=this._createAxis(s,e);e.formatTooltip=function(d){var m=v.scale.getLabel({value:d});return(0,Un.TX)("nameValue",{noName:!0,value:m})},(0,g.S6)(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](s,u,v,e)},this),this._renderAxisLabel(s,h,v,e),this._position(s,e)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(e,n){var o=e.get(["label","position"]),s=e.get("orient"),u=rb(e,n),h;o==null||o==="auto"?h=s==="horizontal"?u.y+u.height/2<n.getHeight()/2?"-":"+":u.x+u.width/2<n.getWidth()/2?"+":"-":(0,g.HD)(o)?h={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:h=o;var v={horizontal:"center",vertical:h>=0||h==="+"?"left":"right"},d={horizontal:h>=0||h==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:Gm/2},_=s==="vertical"?u.height:u.width,S=e.getModel("controlStyle"),A=S.get("show",!0),L=A?S.get("itemSize"):0,I=A?S.get("itemGap"):0,U=L+I,et=e.get(["label","rotate"])||0;et=et*Gm/180;var ft,ht,Tt,Et=S.get("position",!0),Ct=A&&S.get("showPlayBtn",!0),It=A&&S.get("showPrevBtn",!0),zt=A&&S.get("showNextBtn",!0),Kt=0,Yt=_;Et==="left"||Et==="bottom"?(Ct&&(ft=[0,0],Kt+=U),It&&(ht=[Kt,0],Kt+=U),zt&&(Tt=[Yt-L,0],Yt-=U)):(Ct&&(ft=[Yt-L,0],Yt-=U),It&&(ht=[0,0],Kt+=U),zt&&(Tt=[Yt-L,0],Yt-=U));var ne=[Kt,Yt];return e.get("inverse")&&ne.reverse(),{viewRect:u,mainLength:_,orient:s,rotation:m[s],labelRotation:et,labelPosOpt:h,labelAlign:e.get(["label","align"])||v[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||d[s],playPosition:ft,prevBtnPosition:ht,nextBtnPosition:Tt,axisExtent:ne,controlSize:L,controlGap:I}},r.prototype._position=function(e,n){var o=this._mainGroup,s=this._labelGroup,u=e.viewRect;if(e.orient==="vertical"){var h=An.Ue(),v=u.x,d=u.y+u.height;An.Iu(h,h,[-v,-d]),An.U1(h,h,-Gm/2),An.Iu(h,h,[v,d]),u=u.clone(),u.applyTransform(h)}var m=ft(u),_=ft(o.getBoundingRect()),S=ft(s.getBoundingRect()),A=[o.x,o.y],L=[s.x,s.y];L[0]=A[0]=m[0][0];var I=e.labelPosOpt;if(I==null||(0,g.HD)(I)){var U=I==="+"?0:1;ht(A,_,m,1,U),ht(L,S,m,1,1-U)}else{var U=I>=0?0:1;ht(A,_,m,1,U),L[1]=A[1]+I}o.setPosition(A),s.setPosition(L),o.rotation=s.rotation=e.rotation,et(o),et(s);function et(Tt){Tt.originX=m[0][0]-Tt.x,Tt.originY=m[1][0]-Tt.y}function ft(Tt){return[[Tt.x,Tt.x+Tt.width],[Tt.y,Tt.y+Tt.height]]}function ht(Tt,Et,Ct,It,zt){Tt[It]+=Ct[It][zt]-Et[It][zt]}},r.prototype._createAxis=function(e,n){var o=n.getData(),s=n.get("axisType"),u=eb(n,s);u.getTicks=function(){return o.mapArray(["value"],function(d){return{value:d}})};var h=o.getDataExtent("value");u.setExtent(h[0],h[1]),u.calcNiceTicks();var v=new QA("value",u,e.axisExtent,s);return v.model=n,v},r.prototype._createGroup=function(e){var n=this[e]=new Mr.Z;return this.group.add(n),n},r.prototype._renderAxisLine=function(e,n,o,s){var u=o.getExtent();if(s.get(["lineStyle","show"])){var h=new zi.Z({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:(0,g.l7)({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(h);var v=this._progressLine=new zi.Z({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:(0,g.ce)({lineCap:"round",lineWidth:h.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(v)}},r.prototype._renderAxisTick=function(e,n,o,s){var u=this,h=s.getData(),v=o.scale.getTicks();this._tickSymbols=[],(0,g.S6)(v,function(d){var m=o.dataToCoord(d.value),_=h.getItemModel(d.value),S=_.getModel("itemStyle"),A=_.getModel(["emphasis","itemStyle"]),L=_.getModel(["progress","itemStyle"]),I={x:m,y:0,onclick:(0,g.ak)(u._changeTimeline,u,d.value)},U=B1(_,S,n,I);U.ensureState("emphasis").style=A.getItemStyle(),U.ensureState("progress").style=L.getItemStyle(),(0,Qe.vF)(U);var et=(0,Er.A)(U);_.get("tooltip")?(et.dataIndex=d.value,et.dataModel=s):et.dataIndex=et.dataModel=null,u._tickSymbols.push(U)})},r.prototype._renderAxisLabel=function(e,n,o,s){var u=this,h=o.getLabelModel();if(h.get("show")){var v=s.getData(),d=o.getViewLabels();this._tickLabels=[],(0,g.S6)(d,function(m){var _=m.tickValue,S=v.getItemModel(_),A=S.getModel("label"),L=S.getModel(["emphasis","label"]),I=S.getModel(["progress","label"]),U=o.dataToCoord(m.tickValue),et=new he.ZP({x:U,y:0,rotation:e.labelRotation-e.rotation,onclick:(0,g.ak)(u._changeTimeline,u,_),silent:!1,style:(0,Ge.Lr)(A,{text:m.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});et.ensureState("emphasis").style=(0,Ge.Lr)(L),et.ensureState("progress").style=(0,Ge.Lr)(I),n.add(et),(0,Qe.vF)(et),N1(et).dataIndex=_,u._tickLabels.push(et)})}},r.prototype._renderControl=function(e,n,o,s){var u=e.controlSize,h=e.rotation,v=s.getModel("controlStyle").getItemStyle(),d=s.getModel(["emphasis","controlStyle"]).getItemStyle(),m=s.getPlayState(),_=s.get("inverse",!0);S(e.nextBtnPosition,"next",(0,g.ak)(this._changeTimeline,this,_?"-":"+")),S(e.prevBtnPosition,"prev",(0,g.ak)(this._changeTimeline,this,_?"+":"-")),S(e.playPosition,m?"stop":"play",(0,g.ak)(this._handlePlayClick,this,!m),!0);function S(A,L,I,U){if(A){var et=(0,xt.GM)((0,g.pD)(s.get(["controlStyle",L+"BtnSize"]),u),u),ft=[0,-et/2,et,et],ht=nb(s,L+"Icon",ft,{x:A[0],y:A[1],originX:u/2,originY:0,rotation:U?-h:0,rectHover:!0,style:v,onclick:I});ht.ensureState("emphasis").style=d,n.add(ht),(0,Qe.vF)(ht)}}},r.prototype._renderCurrentPointer=function(e,n,o,s){var u=s.getData(),h=s.getCurrentIndex(),v=u.getItemModel(h).getModel("checkpointStyle"),d=this,m={onCreate:function(_){_.draggable=!0,_.drift=(0,g.ak)(d._handlePointerDrag,d),_.ondragend=(0,g.ak)(d._handlePointerDragend,d),F1(_,d._progressLine,h,o,s,!0)},onUpdate:function(_){F1(_,d._progressLine,h,o,s)}};this._currentPointer=B1(v,v,this._mainGroup,{},this._currentPointer,m)},r.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},r.prototype._handlePointerDrag=function(e,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},r.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},r.prototype._pointerChangeTimeline=function(e,n){var o=this._toAxisCoord(e)[0],s=this._axis,u=De.dt(s.getExtent().slice());o>u[1]&&(o=u[1]),o<u[0]&&(o=u[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var h=this._progressLine;h&&(h.shape.x2=o,h.dirty());var v=this._findNearestTick(o),d=this.model;(n||v!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(v)},r.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=e.model;e._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(e){var n=this._mainGroup.getLocalTransform();return mr.applyTransform(e,n,!0)},r.prototype._findNearestTick=function(e){var n=this.model.getData(),o=1/0,s,u=this._axis;return n.each(["value"],function(h,v){var d=u.dataToCoord(h),m=Math.abs(d-e);m<o&&(o=m,s=v)}),s},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(e){var n=this.model.getCurrentIndex();e==="+"?e=n+1:e==="-"&&(e=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},r.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",s<e);if(o)for(var s=0;s<o.length;s++)o&&o[s]&&o[s].toggleState("progress",N1(o[s]).dataIndex<=e)},r.type="timeline.slider",r}(jA);function eb(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new $A.Z({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new qA.Z({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new hu.Z}}function rb(a,r){return Hr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},a.get("padding"))}function nb(a,r,e,n){var o=n.style,s=mr.createIcon(a.get(["controlStyle",r]),n||{},new gn.Z(e[0],e[1],e[2],e[3]));return o&&s.setStyle(o),s}function B1(a,r,e,n,o,s){var u=r.get("color");if(o)o.setColor(u),e.add(o),s&&s.onUpdate(o);else{var h=a.get("symbol");o=(0,fn.th)(h,-1,-1,2,2,u),o.setStyle("strokeNoScale",!0),e.add(o),s&&s.onCreate(o)}var v=r.getItemStyle(["color"]);o.setStyle(v),n=(0,g.TS)({rectHover:!0,z2:100},n,!0);var d=(0,fn.zp)(a.get("symbolSize"));n.scaleX=d[0]/2,n.scaleY=d[1]/2;var m=(0,fn.Cq)(a.get("symbolOffset"),d);m&&(n.x=(n.x||0)+m[0],n.y=(n.y||0)+m[1]);var _=a.get("symbolRotate");return n.rotation=(_||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function F1(a,r,e,n,o,s){if(!a.dragging){var u=o.getModel("checkpointStyle"),h=n.dataToCoord(o.getData().get("value",e));if(s||!u.get("animation",!0))a.attr({x:h,y:0}),r&&r.attr({shape:{x2:h}});else{var v={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:h,y:0},v),r&&r.animateTo({shape:{x2:h}},v)}}}var ib=tb;function ab(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,e,n){var o=e.getComponent("timeline");return o&&r.currentIndex!=null&&(o.setCurrentIndex(r.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),e.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),(0,g.ce)({currentIndex:o.option.currentIndex},r)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,e){var n=e.getComponent("timeline");n&&r.playState!=null&&n.setPlayState(r.playState)})}function ob(a){var r=a&&a.timeline;g.kJ(r)||(r=r?[r]:[]),g.S6(r,function(e){e&&sb(e)})}function sb(a){var r=a.type,e={number:"value",time:"time"};if(e[r]&&(a.axisType=e[r],delete a.type),G1(a),$l(a,"controlPosition")){var n=a.controlStyle||(a.controlStyle={});$l(n,"position")||(n.position=a.controlPosition),n.position==="none"&&!$l(n,"show")&&(n.show=!1,delete n.position),delete a.controlPosition}g.S6(a.data||[],function(o){g.Kn(o)&&!g.kJ(o)&&(!$l(o,"value")&&$l(o,"name")&&(o.value=o.name),G1(o))})}function G1(a){var r=a.itemStyle||(a.itemStyle={}),e=r.emphasis||(r.emphasis={}),n=a.label||a.label||{},o=n.normal||(n.normal={}),s={normal:1,emphasis:1};g.S6(n,function(u,h){!s[h]&&!$l(o,h)&&(o[h]=u)}),e.label&&!$l(n,"emphasis")&&(n.emphasis=e.label,delete e.label)}function $l(a,r){return a.hasOwnProperty(r)}function lb(a){a.registerComponentModel(KA),a.registerComponentView(ib),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),ab(a),a.registerPreprocessor(ob)}function zm(a,r){if(!a)return!1;for(var e=(0,g.kJ)(a)?a:[a],n=0;n<e.length;n++)if(e[n]&&e[n][r])return!0;return!1}function Vd(a){(0,We.Cc)(a,"label",["show"])}var kd=(0,We.Yf)(),z1=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.createdBySelf=!1,e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},r.prototype.isAnimationEnabled=function(){if(aa.Z.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},r.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},r.prototype._mergeOption=function(e,n,o,s){var u=this.mainType;o||n.eachSeries(function(h){var v=h.get(this.mainType,!0),d=kd(h)[u];if(!v||!v.data){kd(h)[u]=null;return}d?d._mergeOption(v,n,!0):(s&&Vd(v),g.S6(v.data,function(m){m instanceof Array?(Vd(m[0]),Vd(m[1])):Vd(m)}),d=this.createMarkerModelFromSeries(v,this,n),g.l7(d,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0}),d.__hostSeries=h),kd(h)[u]=d},this)},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),h=s.getName(e);return(0,Un.TX)("section",{header:this.name,blocks:[(0,Un.TX)("nameValue",{name:h,value:u,noName:!h,noValue:u==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(e){this._data=e},r.getMarkerModelFromSeries=function(e,n){return kd(e)[n]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(ti.Z);g.jB(z1,zd.X.prototype);var nl=z1,ub=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(nl),fb=ub,il=z(43422);function Vm(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hb(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Ud(a,r,e,n,o,s){var u=[],h=(0,oa.M)(r,n),v=h?r.getCalculationInfo("stackResultDimension"):n,d=Um(r,v,a),m=r.indicesOfNearest(v,d)[0];u[o]=r.get(e,m),u[s]=r.get(v,m);var _=r.get(n,m),S=De.p8(r.get(n,m));return S=Math.min(S,20),S>=0&&(u[s]=+u[s].toFixed(S)),[u,_]}var km={min:(0,g.WA)(Ud,"min"),max:(0,g.WA)(Ud,"max"),average:(0,g.WA)(Ud,"average"),median:(0,g.WA)(Ud,"median")};function rc(a,r){if(r){var e=a.getData(),n=a.coordinateSystem,o=n&&n.dimensions;if(!hb(r)&&!(0,g.kJ)(r.coord)&&(0,g.kJ)(o)){var s=V1(r,e,n,a);if(r=(0,g.d9)(r),r.type&&km[r.type]&&s.baseAxis&&s.valueAxis){var u=(0,g.cq)(o,s.baseAxis.dim),h=(0,g.cq)(o,s.valueAxis.dim),v=km[r.type](e,s.baseDataDim,s.valueDataDim,u,h);r.coord=v[0],r.value=v[1]}else r.coord=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis]}if(r.coord==null||!(0,g.kJ)(o))r.coord=[];else for(var d=r.coord,m=0;m<2;m++)km[d[m]]&&(d[m]=Um(e,e.mapDimension(o[m]),d[m]));return r}}function V1(a,r,e,n){var o={};return a.valueIndex!=null||a.valueDim!=null?(o.valueDataDim=a.valueIndex!=null?r.getDimension(a.valueIndex):a.valueDim,o.valueAxis=e.getAxis(cb(n,o.valueDataDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim),o.valueDataDim=r.mapDimension(o.valueAxis.dim)),o}function cb(a,r){var e=a.getData().getDimensionInfo(r);return e&&e.coordDim}function nc(a,r){return a&&a.containData&&r.coord&&!Vm(r)?a.containData(r.coord):!0}function vb(a,r,e){return a&&a.containZone&&r.coord&&e.coord&&!Vm(r)&&!Vm(e)?a.containZone(r.coord,e.coord):!0}function k1(a,r){return a?function(e,n,o,s){var u=s<2?e.coord&&e.coord[s]:e.value;return(0,il.yQ)(u,r[s])}:function(e,n,o,s){return(0,il.yQ)(e.value,r[s])}}function Um(a,r,e){if(e==="average"){var n=0,o=0;return a.each(r,function(s,u){isNaN(s)||(n+=s,o++)}),n/o}else return e==="median"?a.getMedian(r):a.getDataExtent(r)[e==="max"?1:0]}var Zm=(0,We.Yf)(),db=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this.markerGroupMap=(0,g.kW)()},r.prototype.render=function(e,n,o){var s=this,u=this.markerGroupMap;u.each(function(h){Zm(h).keep=!1}),n.eachSeries(function(h){var v=nl.getMarkerModelFromSeries(h,s.type);v&&s.renderSeries(h,v,n,o)}),u.each(function(h){!Zm(h).keep&&s.group.remove(h.group)})},r.prototype.markKeep=function(e){Zm(e).keep=!0},r.prototype.toggleBlurSeries=function(e,n){var o=this;(0,g.S6)(e,function(s){var u=nl.getMarkerModelFromSeries(s,o.type);if(u){var h=u.getData();h.eachItemGraphicEl(function(v){v&&(n?(0,Qe.SX)(v):(0,Qe.VP)(v))})}})},r.type="marker",r}(qn.Z),Wm=db;function U1(a,r,e){var n=r.coordinateSystem;a.each(function(o){var s=a.getItemModel(o),u,h=De.GM(s.get("x"),e.getWidth()),v=De.GM(s.get("y"),e.getHeight());if(!isNaN(h)&&!isNaN(v))u=[h,v];else if(r.getMarkerPosition)u=r.getMarkerPosition(a.getValues(a.dimensions,o));else if(n){var d=a.get(n.dimensions[0],o),m=a.get(n.dimensions[1],o);u=n.dataToPoint([d,m])}isNaN(h)||(u[0]=h),isNaN(v)||(u[1]=v),a.setItemLayout(o,u)})}var pb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=nl.getMarkerModelFromSeries(s,"markPoint");u&&(U1(u.getData(),s,o),this.markerGroupMap.get(s.id).updateLayout())},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,new Ma),_=gb(u,e,n);n.setData(_),U1(n.getData(),e,s),_.each(function(S){var A=_.getItemModel(S),L=A.getShallow("symbol"),I=A.getShallow("symbolSize"),U=A.getShallow("symbolRotate"),et=A.getShallow("symbolOffset"),ft=A.getShallow("symbolKeepAspect");if((0,g.mf)(L)||(0,g.mf)(I)||(0,g.mf)(U)||(0,g.mf)(et)){var ht=n.getRawValue(S),Tt=n.getDataParams(S);(0,g.mf)(L)&&(L=L(ht,Tt)),(0,g.mf)(I)&&(I=I(ht,Tt)),(0,g.mf)(U)&&(U=U(ht,Tt)),(0,g.mf)(et)&&(et=et(ht,Tt))}var Et=A.getModel("itemStyle").getItemStyle(),Ct=(0,rl.UL)(v,"color");Et.fill||(Et.fill=Ct),_.setItemVisual(S,{symbol:L,symbolSize:I,symbolRotate:U,symbolOffset:et,symbolKeepAspect:ft,style:Et})}),m.updateData(_),this.group.add(m.group),_.eachItemGraphicEl(function(S){S.traverse(function(A){(0,Er.A)(A).dataModel=n})}),this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markPoint",r}(Wm);function gb(a,r,e){var n;a?n=(0,g.UI)(a&&a.dimensions,function(h){var v=r.getData().getDimensionInfo(r.getData().mapDimension(h))||{};return(0,g.l7)((0,g.l7)({},v),{name:h,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new Ae.Z(n,e),s=(0,g.UI)(e.get("data"),(0,g.WA)(rc,r));a&&(s=(0,g.hX)(s,(0,g.WA)(nc,a)));var u=k1(!!a,n);return o.initData(s,null,u),o}var mb=pb;function yb(a){a.registerComponentModel(fb),a.registerComponentView(mb),a.registerPreprocessor(function(r){zm(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var _b=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(nl),xb=_b,Zd=(0,We.Yf)(),Sb=function(a,r,e,n){var o=a.getData(),s;if((0,g.kJ)(n))s=n;else{var u=n.type;if(u==="min"||u==="max"||u==="average"||u==="median"||n.xAxis!=null||n.yAxis!=null){var h=void 0,v=void 0;if(n.yAxis!=null||n.xAxis!=null)h=r.getAxis(n.yAxis!=null?"y":"x"),v=(0,g.Jv)(n.yAxis,n.xAxis);else{var d=V1(n,o,r,a);h=d.valueAxis;var m=(0,oa.IR)(o,d.valueDataDim);v=Um(o,m,u)}var _=h.dim==="x"?0:1,S=1-_,A=(0,g.d9)(n),L={coord:[]};A.type=null,A.coord=[],A.coord[S]=-1/0,L.coord[S]=1/0;var I=e.get("precision");I>=0&&(0,g.hj)(v)&&(v=+v.toFixed(Math.min(I,20))),A.coord[_]=L.coord[_]=v,s=[A,L,{type:u,valueIndex:n.valueIndex,value:v}]}else s=[]}var U=[rc(a,s[0]),rc(a,s[1]),(0,g.l7)({},s[2])];return U[2].type=U[2].type||null,(0,g.TS)(U[2],U[0]),(0,g.TS)(U[2],U[1]),U};function Wd(a){return!isNaN(a)&&!isFinite(a)}function Z1(a,r,e,n){var o=1-a,s=n.dimensions[a];return Wd(r[o])&&Wd(e[o])&&r[a]===e[a]&&n.getAxis(s).containData(r[a])}function Tb(a,r){if(a.type==="cartesian2d"){var e=r[0].coord,n=r[1].coord;if(e&&n&&(Z1(1,e,n,a)||Z1(0,e,n,a)))return!0}return nc(a,r[0])&&nc(a,r[1])}function Hm(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),h,v=De.GM(u.get("x"),o.getWidth()),d=De.GM(u.get("y"),o.getHeight());if(!isNaN(v)&&!isNaN(d))h=[v,d];else{if(n.getMarkerPosition)h=n.getMarkerPosition(a.getValues(a.dimensions,r));else{var m=s.dimensions,_=a.get(m[0],r),S=a.get(m[1],r);h=s.dataToPoint([_,S])}if(ya(s,"cartesian2d")){var A=s.getAxis("x"),L=s.getAxis("y"),m=s.dimensions;Wd(a.get(m[0],r))?h[0]=A.toGlobalCoord(A.getExtent()[e?0:1]):Wd(a.get(m[1],r))&&(h[1]=L.toGlobalCoord(L.getExtent()[e?0:1]))}isNaN(v)||(h[0]=v),isNaN(d)||(h[1]=d)}a.setItemLayout(r,h)}var Db=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=nl.getMarkerModelFromSeries(s,"markLine");if(u){var h=u.getData(),v=Zd(u).from,d=Zd(u).to;v.each(function(m){Hm(v,m,!0,s,o),Hm(d,m,!1,s,o)}),h.each(function(m){h.setItemLayout(m,[v.getItemLayout(m),d.getItemLayout(m)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,new Qu);this.group.add(m.group);var _=wb(u,e,n),S=_.from,A=_.to,L=_.line;Zd(n).from=S,Zd(n).to=A,n.setData(L);var I=n.get("symbol"),U=n.get("symbolSize"),et=n.get("symbolRotate"),ft=n.get("symbolOffset");(0,g.kJ)(I)||(I=[I,I]),(0,g.kJ)(U)||(U=[U,U]),(0,g.kJ)(et)||(et=[et,et]),(0,g.kJ)(ft)||(ft=[ft,ft]),_.from.each(function(Tt){ht(S,Tt,!0),ht(A,Tt,!1)}),L.each(function(Tt){var Et=L.getItemModel(Tt).getModel("lineStyle").getLineStyle();L.setItemLayout(Tt,[S.getItemLayout(Tt),A.getItemLayout(Tt)]),Et.stroke==null&&(Et.stroke=S.getItemVisual(Tt,"style").fill),L.setItemVisual(Tt,{fromSymbolKeepAspect:S.getItemVisual(Tt,"symbolKeepAspect"),fromSymbolOffset:S.getItemVisual(Tt,"symbolOffset"),fromSymbolRotate:S.getItemVisual(Tt,"symbolRotate"),fromSymbolSize:S.getItemVisual(Tt,"symbolSize"),fromSymbol:S.getItemVisual(Tt,"symbol"),toSymbolKeepAspect:A.getItemVisual(Tt,"symbolKeepAspect"),toSymbolOffset:A.getItemVisual(Tt,"symbolOffset"),toSymbolRotate:A.getItemVisual(Tt,"symbolRotate"),toSymbolSize:A.getItemVisual(Tt,"symbolSize"),toSymbol:A.getItemVisual(Tt,"symbol"),style:Et})}),m.updateData(L),_.line.eachItemGraphicEl(function(Tt){(0,Er.A)(Tt).dataModel=n,Tt.traverse(function(Et){(0,Er.A)(Et).dataModel=n})});function ht(Tt,Et,Ct){var It=Tt.getItemModel(Et);Hm(Tt,Et,Ct,e,s);var zt=It.getModel("itemStyle").getItemStyle();zt.fill==null&&(zt.fill=(0,rl.UL)(v,"color")),Tt.setItemVisual(Et,{symbolKeepAspect:It.get("symbolKeepAspect"),symbolOffset:(0,g.pD)(It.get("symbolOffset",!0),ft[Ct?0:1]),symbolRotate:(0,g.pD)(It.get("symbolRotate",!0),et[Ct?0:1]),symbolSize:(0,g.pD)(It.get("symbolSize"),U[Ct?0:1]),symbol:(0,g.pD)(It.get("symbol",!0),I[Ct?0:1]),style:zt})}this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markLine",r}(Wm);function wb(a,r,e){var n;a?n=(0,g.UI)(a&&a.dimensions,function(d){var m=r.getData().getDimensionInfo(r.getData().mapDimension(d))||{};return(0,g.l7)((0,g.l7)({},m),{name:d,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new Ae.Z(n,e),s=new Ae.Z(n,e),u=new Ae.Z([],e),h=(0,g.UI)(e.get("data"),(0,g.WA)(Sb,r,a,e));a&&(h=(0,g.hX)(h,(0,g.WA)(Tb,a)));var v=k1(!!a,n);return o.initData((0,g.UI)(h,function(d){return d[0]}),null,v),s.initData((0,g.UI)(h,function(d){return d[1]}),null,v),u.initData((0,g.UI)(h,function(d){return d[2]})),u.hasItemOption=!0,{from:o,to:s,line:u}}var Ab=Db;function bb(a){a.registerComponentModel(xb),a.registerComponentView(Ab),a.registerPreprocessor(function(r){zm(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var Mb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(nl),Cb=Mb,Hd=(0,We.Yf)(),Eb=function(a,r,e,n){var o=n[0],s=n[1];if(!(!o||!s)){var u=rc(a,o),h=rc(a,s),v=u.coord,d=h.coord;v[0]=(0,g.Jv)(v[0],-1/0),v[1]=(0,g.Jv)(v[1],-1/0),d[0]=(0,g.Jv)(d[0],1/0),d[1]=(0,g.Jv)(d[1],1/0);var m=(0,g.Jn)([{},u,h]);return m.coord=[u.coord,h.coord],m.x0=u.x,m.y0=u.y,m.x1=h.x,m.y1=h.y,m}};function Xd(a){return!isNaN(a)&&!isFinite(a)}function W1(a,r,e,n){var o=1-a;return Xd(r[o])&&Xd(e[o])}function Pb(a,r){var e=r.coord[0],n=r.coord[1],o={coord:e,x:r.x0,y:r.y0},s={coord:n,x:r.x1,y:r.y1};return ya(a,"cartesian2d")?e&&n&&(W1(1,e,n,a)||W1(0,e,n,a))?!0:vb(a,o,s):nc(a,o)||nc(a,s)}function H1(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),h,v=De.GM(u.get(e[0]),o.getWidth()),d=De.GM(u.get(e[1]),o.getHeight());if(!isNaN(v)&&!isNaN(d))h=[v,d];else{if(n.getMarkerPosition){var m=a.getValues(["x0","y0"],r),_=a.getValues(["x1","y1"],r),S=s.clampData(m),A=s.clampData(_),L=[];e[0]==="x0"?L[0]=S[0]>A[0]?_[0]:m[0]:L[0]=S[0]>A[0]?m[0]:_[0],e[1]==="y0"?L[1]=S[1]>A[1]?_[1]:m[1]:L[1]=S[1]>A[1]?m[1]:_[1],h=n.getMarkerPosition(L,e,!0)}else{var I=a.get(e[0],r),U=a.get(e[1],r),et=[I,U];s.clampData&&s.clampData(et,et),h=s.dataToPoint(et,!0)}if(ya(s,"cartesian2d")){var ft=s.getAxis("x"),ht=s.getAxis("y"),I=a.get(e[0],r),U=a.get(e[1],r);Xd(I)?h[0]=ft.toGlobalCoord(ft.getExtent()[e[0]==="x0"?0:1]):Xd(U)&&(h[1]=ht.toGlobalCoord(ht.getExtent()[e[1]==="y0"?0:1]))}isNaN(v)||(h[0]=v),isNaN(d)||(h[1]=d)}return h}var X1=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Lb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=nl.getMarkerModelFromSeries(s,"markArea");if(u){var h=u.getData();h.each(function(v){var d=(0,g.UI)(X1,function(_){return H1(h,v,_,s,o)});h.setItemLayout(v,d);var m=h.getItemGraphicEl(v);m.setShape("points",d)})}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,{group:new Mr.Z});this.group.add(m.group),this.markKeep(m);var _=Ib(u,e,n);n.setData(_),_.each(function(S){var A=(0,g.UI)(X1,function(zt){return H1(_,S,zt,e,s)}),L=u.getAxis("x").scale,I=u.getAxis("y").scale,U=L.getExtent(),et=I.getExtent(),ft=[L.parse(_.get("x0",S)),L.parse(_.get("x1",S))],ht=[I.parse(_.get("y0",S)),I.parse(_.get("y1",S))];De.dt(ft),De.dt(ht);var Tt=!(U[0]>ft[1]||U[1]<ft[0]||et[0]>ht[1]||et[1]<ht[0]),Et=!Tt;_.setItemLayout(S,{points:A,allClipped:Et});var Ct=_.getItemModel(S).getModel("itemStyle").getItemStyle(),It=(0,rl.UL)(v,"color");Ct.fill||(Ct.fill=It,(0,g.HD)(Ct.fill)&&(Ct.fill=Bn.modifyAlpha(Ct.fill,.4))),Ct.stroke||(Ct.stroke=It),_.setItemVisual(S,"style",Ct)}),_.diff(Hd(m).data).add(function(S){var A=_.getItemLayout(S);if(!A.allClipped){var L=new fa.Z({shape:{points:A.points}});_.setItemGraphicEl(S,L),m.group.add(L)}}).update(function(S,A){var L=Hd(m).data.getItemGraphicEl(A),I=_.getItemLayout(S);I.allClipped?L&&m.group.remove(L):(L?rr.D(L,{shape:{points:I.points}},n,S):L=new fa.Z({shape:{points:I.points}}),_.setItemGraphicEl(S,L),m.group.add(L))}).remove(function(S){var A=Hd(m).data.getItemGraphicEl(S);m.group.remove(A)}).execute(),_.eachItemGraphicEl(function(S,A){var L=_.getItemModel(A),I=_.getItemVisual(A,"style");S.useStyle(_.getItemVisual(A,"style")),(0,Ge.ni)(S,(0,Ge.k3)(L),{labelFetcher:n,labelDataIndex:A,defaultText:_.getName(A)||"",inheritColor:(0,g.HD)(I.fill)?Bn.modifyAlpha(I.fill,1):"#000"}),(0,Qe.WO)(S,L),(0,Qe.k5)(S,null,null,L.get(["emphasis","disabled"])),(0,Er.A)(S).dataModel=n}),Hd(m).data=_,m.group.silent=n.get("silent")||e.get("silent")},r.type="markArea",r}(Wm);function Ib(a,r,e){var n,o,s=["x0","y0","x1","y1"];if(a){var u=(0,g.UI)(a&&a.dimensions,function(d){var m=r.getData(),_=m.getDimensionInfo(m.mapDimension(d))||{};return(0,g.l7)((0,g.l7)({},_),{name:d,ordinalMeta:null})});o=(0,g.UI)(s,function(d,m){return{name:d,type:u[m%2].type}}),n=new Ae.Z(o,e)}else o=[{name:"value",type:"float"}],n=new Ae.Z(o,e);var h=(0,g.UI)(e.get("data"),(0,g.WA)(Eb,r,a,e));a&&(h=(0,g.hX)(h,(0,g.WA)(Pb,a)));var v=a?function(d,m,_,S){var A=d.coord[Math.floor(S/2)][S%2];return(0,il.yQ)(A,o[S])}:function(d,m,_,S){return(0,il.yQ)(d.value,o[S])};return n.initData(h,null,v),n.hasItemOption=!0,n}var Rb=Lb;function Ob(a){a.registerComponentModel(Cb),a.registerComponentView(Rb),a.registerPreprocessor(function(r){zm(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var Nb=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},Bb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},r.prototype._updateSelector=function(e){var n=e.selector,o=this.ecModel;n===!0&&(n=e.selector=["all","inverse"]),g.kJ(n)&&g.S6(n,function(s,u){g.HD(s)&&(s={type:s}),n[u]=g.TS(s,Nb(o,s.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var n=!1,o=0;o<e.length;o++){var s=e[o].get("name");if(this.isSelected(s)){this.select(s),n=!0;break}}!n&&this.select(e[0].get("name"))}},r.prototype._updateData=function(e){var n=[],o=[];e.eachRawSeries(function(v){var d=v.name;o.push(d);var m;if(v.legendVisualProvider){var _=v.legendVisualProvider,S=_.getAllNames();e.isSeriesFiltered(v)||(o=o.concat(S)),S.length?n=n.concat(S):m=!0}else m=!0;m&&(0,We.yu)(v)&&n.push(v.name)}),this._availableNames=o;var s=this.get("data")||n,u=g.kW(),h=g.UI(s,function(v){return(g.HD(v)||g.hj(v))&&(v={name:v}),u.get(v.name)?null:(u.set(v.name,!0),new zn.Z(v,this,this.ecModel))},this);this._data=g.hX(h,function(v){return!!v})},r.prototype.getData=function(){return this._data},r.prototype.select=function(e){var n=this.option.selected,o=this.get("selectedMode");if(o==="single"){var s=this._data;g.S6(s,function(u){n[u.get("name")]=!1})}n[e]=!0},r.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},r.prototype.toggleSelected=function(e){var n=this.option.selected;n.hasOwnProperty(e)||(n[e]=!0),this[n[e]?"unSelect":"select"](e)},r.prototype.allSelect=function(){var e=this._data,n=this.option.selected;g.S6(e,function(o){n[o.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var e=this._data,n=this.option.selected;g.S6(e,function(o){var s=o.get("name",!0);n.hasOwnProperty(s)||(n[s]=!0),n[s]=!n[s]})},r.prototype.isSelected=function(e){var n=this.option.selected;return!(n.hasOwnProperty(e)&&!n[e])&&g.cq(this._availableNames,e)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(ti.Z),Xm=Bb,mf=g.WA,Km=g.S6,Kd=Mr.Z,Fb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!1,e}return r.prototype.init=function(){this.group.add(this._contentGroup=new Kd),this.group.add(this._selectorGroup=new Kd),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(e,n,o){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var u=e.get("align"),h=e.get("orient");(!u||u==="auto")&&(u=e.get("left")==="right"&&h==="vertical"?"right":"left");var v=e.get("selector",!0),d=e.get("selectorPosition",!0);v&&(!d||d==="auto")&&(d=h==="horizontal"?"end":"start"),this.renderInner(u,e,n,o,v,h,d);var m=e.getBoxLayoutParams(),_={width:o.getWidth(),height:o.getHeight()},S=e.get("padding"),A=Hr.ME(m,_,S),L=this.layoutInner(e,u,A,s,v,d),I=Hr.ME(g.ce({width:L.width,height:L.height},m),_,S);this.group.x=I.x-L.x,this.group.y=I.y-L.y,this.group.markRedraw(),this.group.add(this._backgroundEl=e1(L,e))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(e,n,o,s,u,h,v){var d=this.getContentGroup(),m=g.kW(),_=n.get("selectedMode"),S=[];o.eachRawSeries(function(A){!A.get("legendHoverLink")&&S.push(A.id)}),Km(n.getData(),function(A,L){var I=A.get("name");if(!this.newlineDisabled&&(I===""||I===`
`)){var U=new Kd;U.newline=!0,d.add(U);return}var et=o.getSeriesByName(I)[0];if(!m.get(I))if(et){var ft=et.getData(),ht=ft.getVisual("legendLineStyle")||{},Tt=ft.getVisual("legendIcon"),Et=ft.getVisual("style"),Ct=this._createItem(et,I,L,A,n,e,ht,Et,Tt,_,s);Ct.on("click",mf(K1,I,null,s,S)).on("mouseover",mf(Ym,et.name,null,s,S)).on("mouseout",mf(jm,et.name,null,s,S)),m.set(I,!0)}else o.eachRawSeries(function(It){if(!m.get(I)&&It.legendVisualProvider){var zt=It.legendVisualProvider;if(!zt.containName(I))return;var Kt=zt.indexOfName(I),Yt=zt.getItemVisual(Kt,"style"),ne=zt.getItemVisual(Kt,"legendIcon"),oe=(0,Bn.parse)(Yt.fill);oe&&oe[3]===0&&(oe[3]=.2,Yt=g.l7(g.l7({},Yt),{fill:(0,Bn.stringify)(oe,"rgba")}));var ce=this._createItem(It,I,L,A,n,e,{},Yt,ne,_,s);ce.on("click",mf(K1,null,I,s,S)).on("mouseover",mf(Ym,null,I,s,S)).on("mouseout",mf(jm,null,I,s,S)),m.set(I,!0)}},this)},this),u&&this._createSelector(u,n,s,h,v)},r.prototype._createSelector=function(e,n,o,s,u){var h=this.getSelectorGroup();Km(e,function(d){var m=d.type,_=new he.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:m==="all"?"legendAllSelect":"legendInverseSelect"})}});h.add(_);var S=n.getModel("selectorLabel"),A=n.getModel(["emphasis","selectorLabel"]);(0,Ge.ni)(_,{normal:S,emphasis:A},{defaultText:d.title}),(0,Qe.vF)(_)})},r.prototype._createItem=function(e,n,o,s,u,h,v,d,m,_,S){var A=e.visualDrawType,L=u.get("itemWidth"),I=u.get("itemHeight"),U=u.isSelected(n),et=s.get("symbolRotate"),ft=s.get("symbolKeepAspect"),ht=s.get("icon");m=ht||m||"roundRect";var Tt=Gb(m,s,v,d,A,U,S),Et=new Kd,Ct=s.getModel("textStyle");if(g.mf(e.getLegendIcon)&&(!ht||ht==="inherit"))Et.add(e.getLegendIcon({itemWidth:L,itemHeight:I,icon:m,iconRotate:et,itemStyle:Tt.itemStyle,lineStyle:Tt.lineStyle,symbolKeepAspect:ft}));else{var It=ht==="inherit"&&e.getData().getVisual("symbol")?et==="inherit"?e.getData().getVisual("symbolRotate"):et:0;Et.add(zb({itemWidth:L,itemHeight:I,icon:m,iconRotate:It,itemStyle:Tt.itemStyle,lineStyle:Tt.lineStyle,symbolKeepAspect:ft}))}var zt=h==="left"?L+5:-5,Kt=h,Yt=u.get("formatter"),ne=n;g.HD(Yt)&&Yt?ne=Yt.replace("{name}",n!=null?n:""):g.mf(Yt)&&(ne=Yt(n));var oe=s.get("inactiveColor");Et.add(new he.ZP({style:(0,Ge.Lr)(Ct,{text:ne,x:zt,y:I/2,fill:U?Ct.getTextColor():oe,align:Kt,verticalAlign:"middle"})}));var ce=new Kr.Z({shape:Et.getBoundingRect(),invisible:!0}),me=s.getModel("tooltip");return me.get("show")&&mr.setTooltipConfig({el:ce,componentModel:u,itemName:n,itemTooltipOption:me.option}),Et.add(ce),Et.eachChild(function(_e){_e.silent=!0}),ce.silent=!_,this.getContentGroup().add(Et),(0,Qe.vF)(Et),Et.__legendDataIndex=o,Et},r.prototype.layoutInner=function(e,n,o,s,u,h){var v=this.getContentGroup(),d=this.getSelectorGroup();Hr.BZ(e.get("orient"),v,e.get("itemGap"),o.width,o.height);var m=v.getBoundingRect(),_=[-m.x,-m.y];if(d.markRedraw(),v.markRedraw(),u){Hr.BZ("horizontal",d,e.get("selectorItemGap",!0));var S=d.getBoundingRect(),A=[-S.x,-S.y],L=e.get("selectorButtonGap",!0),I=e.getOrient().index,U=I===0?"width":"height",et=I===0?"height":"width",ft=I===0?"y":"x";h==="end"?A[I]+=m[U]+L:_[I]+=S[U]+L,A[1-I]+=m[et]/2-S[et]/2,d.x=A[0],d.y=A[1],v.x=_[0],v.y=_[1];var ht={x:0,y:0};return ht[U]=m[U]+L+S[U],ht[et]=Math.max(m[et],S[et]),ht[ft]=Math.min(0,S[ft]+A[1-I]),ht}else return v.x=_[0],v.y=_[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(qn.Z);function Gb(a,r,e,n,o,s,u){function h(U,et){U.lineWidth==="auto"&&(U.lineWidth=et.lineWidth>0?2:0),Km(U,function(ft,ht){U[ht]==="inherit"&&(U[ht]=et[ht])})}var v=r.getModel("itemStyle"),d=v.getItemStyle(),m=a.lastIndexOf("empty",0)===0?"fill":"stroke",_=v.getShallow("decal");d.decal=!_||_==="inherit"?n.decal:(0,Eu.I)(_,u),d.fill==="inherit"&&(d.fill=n[o]),d.stroke==="inherit"&&(d.stroke=n[m]),d.opacity==="inherit"&&(d.opacity=(o==="fill"?n:e).opacity),h(d,n);var S=r.getModel("lineStyle"),A=S.getLineStyle();if(h(A,e),d.fill==="auto"&&(d.fill=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),A.stroke==="auto"&&(A.stroke=n.fill),!s){var L=r.get("inactiveBorderWidth"),I=d[m];d.lineWidth=L==="auto"?n.lineWidth>0&&I?2:0:d.lineWidth,d.fill=r.get("inactiveColor"),d.stroke=r.get("inactiveBorderColor"),A.stroke=S.get("inactiveColor"),A.lineWidth=S.get("inactiveWidth")}return{itemStyle:d,lineStyle:A}}function zb(a){var r=a.icon||"roundRect",e=(0,fn.th)(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return e.setStyle(a.itemStyle),e.rotation=(a.iconRotate||0)*Math.PI/180,e.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function K1(a,r,e,n){jm(a,r,e,n),e.dispatchAction({type:"legendToggleSelect",name:a!=null?a:r}),Ym(a,r,e,n)}function Y1(a){for(var r=a.getZr().storage.getDisplayList(),e,n=0,o=r.length;n<o&&!(e=r[n].states.emphasis);)n++;return e&&e.hoverLayer}function Ym(a,r,e,n){Y1(e)||e.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:n})}function jm(a,r,e,n){Y1(e)||e.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:n})}var j1=Fb;function Vb(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(e){for(var n=0;n<r.length;n++)if(!r[n].isSelected(e.name))return!1;return!0})}function ic(a,r,e){var n={},o=a==="toggleSelected",s;return e.eachComponent("legend",function(u){o&&s!=null?u[s?"select":"unSelect"](r.name):a==="allSelect"||a==="inverseSelect"?u[a]():(u[a](r.name),s=u.isSelected(r.name));var h=u.getData();(0,g.S6)(h,function(v){var d=v.get("name");if(!(d===`
`||d==="")){var m=u.isSelected(d);n.hasOwnProperty(d)?n[d]=n[d]&&m:n[d]=m}})}),a==="allSelect"||a==="inverseSelect"?{selected:n}:{name:r.name,selected:n}}function kb(a){a.registerAction("legendToggleSelect","legendselectchanged",(0,g.WA)(ic,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",(0,g.WA)(ic,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",(0,g.WA)(ic,"inverseSelect")),a.registerAction("legendSelect","legendselected",(0,g.WA)(ic,"select")),a.registerAction("legendUnSelect","legendunselected",(0,g.WA)(ic,"unSelect"))}function J1(a){a.registerComponentModel(Xm),a.registerComponentView(j1),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,Vb),a.registerSubTypeDefaulter("legend",function(){return"plain"}),kb(a)}var Ub=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},r.prototype.init=function(e,n,o){var s=(0,Hr.tE)(e);a.prototype.init.call(this,e,n,o),Q1(this,e,s)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),Q1(this,this.option,e)},r.type="legend.scroll",r.defaultOption=(0,Di.ZL)(Xm.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(Xm);function Q1(a,r,e){var n=a.getOrient(),o=[1,1];o[n.index]=0,(0,Hr.dt)(r,e,{type:"box",ignoreSize:!!o})}var Zb=Ub,$1=Mr.Z,Jm=["width","height"],Qm=["x","y"],Wb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!0,e._currentIndex=0,e}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new $1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new $1)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(e,n,o,s,u,h,v){var d=this;a.prototype.renderInner.call(this,e,n,o,s,u,h,v);var m=this._controllerGroup,_=n.get("pageIconSize",!0),S=g.kJ(_)?_:[_,_];L("pagePrev",0);var A=n.getModel("pageTextStyle");m.add(new he.ZP({name:"pageText",style:{text:"xx/xx",fill:A.getTextColor(),font:A.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),L("pageNext",1);function L(I,U){var et=I+"DataIndex",ft=mr.createIcon(n.get("pageIcons",!0)[n.getOrient().name][U],{onclick:g.ak(d._pageGo,d,et,n,s)},{x:-S[0]/2,y:-S[1]/2,width:S[0],height:S[1]});ft.name=I,m.add(ft)}},r.prototype.layoutInner=function(e,n,o,s,u,h){var v=this.getSelectorGroup(),d=e.getOrient().index,m=Jm[d],_=Qm[d],S=Jm[1-d],A=Qm[1-d];u&&Hr.BZ("horizontal",v,e.get("selectorItemGap",!0));var L=e.get("selectorButtonGap",!0),I=v.getBoundingRect(),U=[-I.x,-I.y],et=g.d9(o);u&&(et[m]=o[m]-I[m]-L);var ft=this._layoutContentAndController(e,s,et,d,m,S,A,_);if(u){if(h==="end")U[d]+=ft[m]+L;else{var ht=I[m]+L;U[d]-=ht,ft[_]-=ht}ft[m]+=I[m]+L,U[1-d]+=ft[A]+ft[S]/2-I[S]/2,ft[S]=Math.max(ft[S],I[S]),ft[A]=Math.min(ft[A],I[A]+U[1-d]),v.x=U[0],v.y=U[1],v.markRedraw()}return ft},r.prototype._layoutContentAndController=function(e,n,o,s,u,h,v,d){var m=this.getContentGroup(),_=this._containerGroup,S=this._controllerGroup;Hr.BZ(e.get("orient"),m,e.get("itemGap"),s?o.width:null,s?null:o.height),Hr.BZ("horizontal",S,e.get("pageButtonItemGap",!0));var A=m.getBoundingRect(),L=S.getBoundingRect(),I=this._showController=A[u]>o[u],U=[-A.x,-A.y];n||(U[s]=m[d]);var et=[0,0],ft=[-L.x,-L.y],ht=g.pD(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(I){var Tt=e.get("pageButtonPosition",!0);Tt==="end"?ft[s]+=o[u]-L[u]:et[s]+=L[u]+ht}ft[1-s]+=A[h]/2-L[h]/2,m.setPosition(U),_.setPosition(et),S.setPosition(ft);var Et={x:0,y:0};if(Et[u]=I?o[u]:A[u],Et[h]=Math.max(A[h],L[h]),Et[v]=Math.min(0,L[v]+ft[1-s]),_.__rectSize=o[u],I){var Ct={x:0,y:0};Ct[u]=Math.max(o[u]-L[u]-ht,0),Ct[h]=Et[h],_.setClipPath(new Kr.Z({shape:Ct})),_.__rectSize=Ct[u]}else S.eachChild(function(zt){zt.attr({invisible:!0,silent:!0})});var It=this._getPageInfo(e);return It.pageIndex!=null&&rr.D(m,{x:It.contentPosition[0],y:It.contentPosition[1]},I?e:null),this._updatePageInfoView(e,It),Et},r.prototype._pageGo=function(e,n,o){var s=this._getPageInfo(n)[e];s!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:n.id})},r.prototype._updatePageInfoView=function(e,n){var o=this._controllerGroup;g.S6(["pagePrev","pageNext"],function(m){var _=m+"DataIndex",S=n[_]!=null,A=o.childOfName(m);A&&(A.setStyle("fill",S?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),A.cursor=S?"pointer":"default")});var s=o.childOfName("pageText"),u=e.get("pageFormatter"),h=n.pageIndex,v=h!=null?h+1:0,d=n.pageCount;s&&u&&s.setStyle("text",g.HD(u)?u.replace("{current}",v==null?"":v+"").replace("{total}",d==null?"":d+""):u({current:v,total:d}))},r.prototype._getPageInfo=function(e){var n=e.get("scrollDataIndex",!0),o=this.getContentGroup(),s=this._containerGroup.__rectSize,u=e.getOrient().index,h=Jm[u],v=Qm[u],d=this._findTargetItemIndex(n),m=o.children(),_=m[d],S=m.length,A=S?1:0,L={contentPosition:[o.x,o.y],pageCount:A,pageIndex:A-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!_)return L;var I=Tt(_);L.contentPosition[u]=-I.s;for(var U=d+1,et=I,ft=I,ht=null;U<=S;++U)ht=Tt(m[U]),(!ht&&ft.e>et.s+s||ht&&!Et(ht,et.s))&&(ft.i>et.i?et=ft:et=ht,et&&(L.pageNextDataIndex==null&&(L.pageNextDataIndex=et.i),++L.pageCount)),ft=ht;for(var U=d-1,et=I,ft=I,ht=null;U>=-1;--U)ht=Tt(m[U]),(!ht||!Et(ft,ht.s))&&et.i<ft.i&&(ft=et,L.pagePrevDataIndex==null&&(L.pagePrevDataIndex=et.i),++L.pageCount,++L.pageIndex),et=ht;return L;function Tt(Ct){if(Ct){var It=Ct.getBoundingRect(),zt=It[v]+Ct[v];return{s:zt,e:zt+It[h],i:Ct.__legendDataIndex}}}function Et(Ct,It){return Ct.e>=It&&Ct.s<=It+s}},r.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var n,o=this.getContentGroup(),s;return o.eachChild(function(u,h){var v=u.__legendDataIndex;s==null&&v!=null&&(s=h),v===e&&(n=h)}),n!=null?n:s},r.type="legend.scroll",r}(j1),Hb=Wb;function Xb(a){a.registerAction("legendScroll","legendscroll",function(r,e){var n=r.scrollDataIndex;n!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:r},function(o){o.setScrollDataIndex(n)})})}function Kb(a){(0,F.D)(J1),a.registerComponentModel(Zb),a.registerComponentView(Hb),Xb(a)}function Yb(a){(0,F.D)(J1),(0,F.D)(Kb)}var jb=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=(0,Di.ZL)($h.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}($h),Jb=jb,$m=(0,We.Yf)();function Qb(a,r,e){$m(a).coordSysRecordMap.each(function(n){var o=n.dataZoomInfoMap.get(r.uid);o&&(o.getRange=e)})}function $b(a,r){for(var e=$m(a).coordSysRecordMap,n=e.keys(),o=0;o<n.length;o++){var s=n[o],u=e.get(s),h=u.dataZoomInfoMap;if(h){var v=r.uid,d=h.get(v);d&&(h.removeKey(v),h.keys().length||q1(e,u))}}}function q1(a,r){if(r){a.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function qb(a,r){var e={model:r,containsPoint:(0,g.WA)(eM,r),dispatchAction:(0,g.WA)(tM,a),dataZoomInfoMap:null,controller:null},n=e.controller=new xl(a.getZr());return(0,g.S6)(["pan","zoom","scrollMove"],function(o){n.on(o,function(s){var u=[];e.dataZoomInfoMap.each(function(h){if(s.isAvailableBehavior(h.model.option)){var v=(h.getRange||{})[o],d=v&&v(h.dzReferCoordSysInfo,e.model.mainType,e.controller,s);!h.model.get("disabled",!0)&&d&&u.push({dataZoomId:h.model.id,start:d[0],end:d[1]})}}),u.length&&e.dispatchAction(u)})}),e}function tM(a,r){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function eM(a,r,e,n){return a.coordinateSystem.containPoint([e,n])}function rM(a){var r,e="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return a.each(function(s){var u=s.model,h=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;n[e+h]>n[e+r]&&(r=h),o=o&&u.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function nM(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(r,e){var n=$m(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=(0,g.kW)());o.each(function(s){s.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var u=j_(s);(0,g.S6)(u.infoList,function(h){var v=h.model.uid,d=o.get(v)||o.set(v,qb(e,h.model)),m=d.dataZoomInfoMap||(d.dataZoomInfoMap=(0,g.kW)());m.set(s.uid,{dzReferCoordSysInfo:h,model:s,getRange:null})})}),o.each(function(s){var u=s.controller,h,v=s.dataZoomInfoMap;if(v){var d=v.keys()[0];d!=null&&(h=v.get(d))}if(!h){q1(o,s);return}var m=rM(v);u.enable(m.controlType,m.opt),u.setPointerChecker(s.containsPoint),_n.T9(s,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}var iM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,n,o){if(a.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Qb(o,e,{pan:(0,g.ak)(qm.pan,this),zoom:(0,g.ak)(qm.zoom,this),scrollMove:(0,g.ak)(qm.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){$b(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(Am),qm={zoom:function(a,r,e,n){var o=this.range,s=o.slice(),u=a.axisModels[0];if(u){var h=ty[r](null,[n.originX,n.originY],u,e,a),v=(h.signal>0?h.pixelStart+h.pixelLength-h.pixel:h.pixel-h.pixelStart)/h.pixelLength*(s[1]-s[0])+s[0],d=Math.max(1/n.scale,0);s[0]=(s[0]-v)*d+v,s[1]=(s[1]-v)*d+v;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(us(0,s,[0,100],0,m.minSpan,m.maxSpan),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}},pan:tx(function(a,r,e,n,o,s){var u=ty[n]([s.oldX,s.oldY],[s.newX,s.newY],r,o,e);return u.signal*(a[1]-a[0])*u.pixel/u.pixelLength}),scrollMove:tx(function(a,r,e,n,o,s){var u=ty[n]([0,0],[s.scrollDelta,s.scrollDelta],r,o,e);return u.signal*(a[1]-a[0])*s.scrollDelta})};function tx(a){return function(r,e,n,o){var s=this.range,u=s.slice(),h=r.axisModels[0];if(h){var v=a(u,h,r,e,n,o);if(us(v,u,[0,100],"all"),this.range=u,s[0]!==u[0]||s[1]!==u[1])return u}}}var ty={grid:function(a,r,e,n,o){var s=e.axis,u={},h=o.model.coordinateSystem.getRect();return a=a||[0,0],s.dim==="x"?(u.pixel=r[0]-a[0],u.pixelLength=h.width,u.pixelStart=h.x,u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=h.height,u.pixelStart=h.y,u.signal=s.inverse?-1:1),u},polar:function(a,r,e,n,o){var s=e.axis,u={},h=o.model.coordinateSystem,v=h.getRadiusAxis().getExtent(),d=h.getAngleAxis().getExtent();return a=a?h.pointToCoord(a):[0,0],r=h.pointToCoord(r),e.mainType==="radiusAxis"?(u.pixel=r[0]-a[0],u.pixelLength=v[1]-v[0],u.pixelStart=v[0],u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=d[1]-d[0],u.pixelStart=d[0],u.signal=s.inverse?-1:1),u},singleAxis:function(a,r,e,n,o){var s=e.axis,u=o.model.coordinateSystem.getRect(),h={};return a=a||[0,0],s.orient==="horizontal"?(h.pixel=r[0]-a[0],h.pixelLength=u.width,h.pixelStart=u.x,h.signal=s.inverse?1:-1):(h.pixel=r[1]-a[1],h.pixelLength=u.height,h.pixelStart=u.y,h.signal=s.inverse?-1:1),h}},aM=iM;function ex(a){bm(a),a.registerComponentModel(Jb),a.registerComponentView(aM),nM(a)}var oM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=(0,Di.ZL)($h.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}($h),sM=oM,ac=Kr.Z,rx=7,lM=1,ey=30,uM=7,oc="horizontal",nx="vertical",fM=5,hM=["line","bar","candlestick","scatter"],cM={easing:"cubicOut",duration:100,delay:0},vM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,n){this.api=n,this._onBrush=(0,g.ak)(this._onBrush,this),this._onBrushEnd=(0,g.ak)(this._onBrushEnd,this)},r.prototype.render=function(e,n,o,s){if(a.prototype.render.apply(this,arguments),_n.T9(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){_n.ZH(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Mr.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(n),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,n=this.api,o=e.get("brushSelect"),s=o?uM:0,u=this._findCoordRect(),h={width:n.getWidth(),height:n.getHeight()},v=this._orient===oc?{right:h.width-u.x-u.width,top:h.height-ey-rx-s,width:u.width,height:ey}:{right:rx,top:u.y,width:ey,height:u.height},d=Hr.tE(e.option);(0,g.S6)(["right","top","width","height"],function(_){d[_]==="ph"&&(d[_]=v[_])});var m=Hr.ME(d,h);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===nx&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,n=this._location,o=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),u=s&&s.get("inverse"),h=this._displayables.sliderGroup,v=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(o===oc&&!u?{scaleY:v?1:-1,scaleX:1}:o===oc&&u?{scaleY:v?1:-1,scaleX:-1}:o===nx&&!u?{scaleY:v?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:v?-1:1,scaleX:-1,rotation:Math.PI/2});var d=e.getBoundingRect([h]);e.x=n.x-d.x,e.y=n.y-d.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,n=this._size,o=this._displayables.sliderGroup,s=e.get("brushSelect");o.add(new ac({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var u=new ac({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:(0,g.ak)(this._onClickPanel,this)}),h=this.api.getZr();s?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",h.on("mousemove",this._onBrush),h.on("mouseup",this._onBrushEnd)):(h.off("mousemove",this._onBrush),h.off("mouseup",this._onBrushEnd)),o.add(u)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var n=this._size,o=this._shadowSize||[],s=e.series,u=s.getRawData(),h=s.getShadowDim&&s.getShadowDim(),v=h&&u.getDimensionInfo(h)?s.getShadowDim():e.otherDim;if(v==null)return;var d=this._shadowPolygonPts,m=this._shadowPolylinePts;if(u!==this._shadowData||v!==this._shadowDim||n[0]!==o[0]||n[1]!==o[1]){var _=u.getDataExtent(v),S=(_[1]-_[0])*.3;_=[_[0]-S,_[1]+S];var A=[0,n[1]],L=[0,n[0]],I=[[n[0],0],[0,0]],U=[],et=L[1]/(u.count()-1),ft=0,ht=Math.round(u.count()/n[0]),Tt;u.each([v],function(Kt,Yt){if(ht>0&&Yt%ht){ft+=et;return}var ne=Kt==null||isNaN(Kt)||Kt==="",oe=ne?0:(0,De.NU)(Kt,_,A,!0);ne&&!Tt&&Yt?(I.push([I[I.length-1][0],0]),U.push([U[U.length-1][0],0])):!ne&&Tt&&(I.push([ft,0]),U.push([ft,0])),I.push([ft,oe]),U.push([ft,oe]),ft+=et,Tt=ne}),d=this._shadowPolygonPts=I,m=this._shadowPolylinePts=U}this._shadowData=u,this._shadowDim=v,this._shadowSize=[n[0],n[1]];var Et=this.dataZoomModel;function Ct(Kt){var Yt=Et.getModel(Kt?"selectedDataBackground":"dataBackground"),ne=new Mr.Z,oe=new fa.Z({shape:{points:d},segmentIgnoreThreshold:1,style:Yt.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ce=new Rt.Z({shape:{points:m},segmentIgnoreThreshold:1,style:Yt.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return ne.add(oe),ne.add(ce),ne}for(var It=0;It<3;It++){var zt=Ct(It===1);this._displayables.sliderGroup.add(zt),this._displayables.dataShadowSegs.push(zt)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,n=e.get("showDataShadow");if(n!==!1){var o,s=this.ecModel;return e.eachTargetAxis(function(u,h){var v=e.getAxisProxy(u,h).getTargetSeriesModels();(0,g.S6)(v,function(d){if(!o&&!(n!==!0&&(0,g.cq)(hM,d.get("type"))<0)){var m=s.getComponent(tl(u),h).axis,_=dM(u),S,A=d.coordinateSystem;_!=null&&A.getOtherAxis&&(S=A.getOtherAxis(m).inverse),_=d.getData().mapDimension(_),o={thisAxis:m,series:d,thisDim:u,otherDim:_,otherAxisInverse:S}}},this)},this),o}},r.prototype._renderHandle=function(){var e=this.group,n=this._displayables,o=n.handles=[null,null],s=n.handleLabels=[null,null],u=this._displayables.sliderGroup,h=this._size,v=this.dataZoomModel,d=this.api,m=v.get("borderRadius")||0,_=v.get("brushSelect"),S=n.filler=new ac({silent:_,style:{fill:v.get("fillerColor")},textConfig:{position:"inside"}});u.add(S),u.add(new ac({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:h[0],height:h[1],r:m},style:{stroke:v.get("dataBackgroundColor")||v.get("borderColor"),lineWidth:lM,fill:"rgba(0,0,0,0)"}})),(0,g.S6)([0,1],function(ht){var Tt=v.get("handleIcon");!fn.Pw[Tt]&&Tt.indexOf("path://")<0&&Tt.indexOf("image://")<0&&(Tt="path://"+Tt);var Et=(0,fn.th)(Tt,-1,0,2,2,null,!0);Et.attr({cursor:ix(this._orient),draggable:!0,drift:(0,g.ak)(this._onDragMove,this,ht),ondragend:(0,g.ak)(this._onDragEnd,this),onmouseover:(0,g.ak)(this._showDataInfo,this,!0),onmouseout:(0,g.ak)(this._showDataInfo,this,!1),z2:5});var Ct=Et.getBoundingRect(),It=v.get("handleSize");this._handleHeight=(0,De.GM)(It,this._size[1]),this._handleWidth=Ct.width/Ct.height*this._handleHeight,Et.setStyle(v.getModel("handleStyle").getItemStyle()),Et.style.strokeNoScale=!0,Et.rectHover=!0,Et.ensureState("emphasis").style=v.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Qe.vF)(Et);var zt=v.get("handleColor");zt!=null&&(Et.style.fill=zt),u.add(o[ht]=Et);var Kt=v.getModel("textStyle");e.add(s[ht]=new he.ZP({silent:!0,invisible:!0,style:(0,Ge.Lr)(Kt,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Kt.getTextColor(),font:Kt.getFont()}),z2:10}))},this);var A=S;if(_){var L=(0,De.GM)(v.get("moveHandleSize"),h[1]),I=n.moveHandle=new Kr.Z({style:v.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:h[1]-.5,height:L}}),U=L*.8,et=n.moveHandleIcon=(0,fn.th)(v.get("moveHandleIcon"),-U/2,-U/2,U,U,"#fff",!0);et.silent=!0,et.y=h[1]+L/2-.5,I.ensureState("emphasis").style=v.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var ft=Math.min(h[1]/2,Math.max(L,10));A=n.moveZone=new Kr.Z({invisible:!0,shape:{y:h[1]-ft,height:L+ft}}),A.on("mouseover",function(){d.enterEmphasis(I)}).on("mouseout",function(){d.leaveEmphasis(I)}),u.add(I),u.add(et),u.add(A)}A.attr({draggable:!0,cursor:ix(this._orient),drift:(0,g.ak)(this._onDragMove,this,"all"),ondragstart:(0,g.ak)(this._showDataInfo,this,!0),ondragend:(0,g.ak)(this._onDragEnd,this),onmouseover:(0,g.ak)(this._showDataInfo,this,!0),onmouseout:(0,g.ak)(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[(0,De.NU)(e[0],[0,100],n,!0),(0,De.NU)(e[1],[0,100],n,!0)]},r.prototype._updateInterval=function(e,n){var o=this.dataZoomModel,s=this._handleEnds,u=this._getViewExtent(),h=o.findRepresentativeAxisProxy().getMinMaxSpan(),v=[0,100];us(n,s,u,o.get("zoomLock")?"all":e,h.minSpan!=null?(0,De.NU)(h.minSpan,v,u,!0):null,h.maxSpan!=null?(0,De.NU)(h.maxSpan,v,u,!0):null);var d=this._range,m=this._range=(0,De.dt)([(0,De.NU)(s[0],u,v,!0),(0,De.NU)(s[1],u,v,!0)]);return!d||d[0]!==m[0]||d[1]!==m[1]},r.prototype._updateView=function(e){var n=this._displayables,o=this._handleEnds,s=(0,De.dt)(o.slice()),u=this._size;(0,g.S6)([0,1],function(A){var L=n.handles[A],I=this._handleHeight;L.attr({scaleX:I/2,scaleY:I/2,x:o[A]+(A?-1:1),y:u[1]/2-I/2})},this),n.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:u[1]});var h={x:s[0],width:s[1]-s[0]};n.moveHandle&&(n.moveHandle.setShape(h),n.moveZone.setShape(h),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",h.x+h.width/2));for(var v=n.dataShadowSegs,d=[0,s[0],s[1],u[0]],m=0;m<v.length;m++){var _=v[m],S=_.getClipPath();S||(S=new Kr.Z,_.setClipPath(S)),S.setShape({x:d[m],y:0,width:d[m+1]-d[m],height:u[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var n=this.dataZoomModel,o=this._displayables,s=o.handleLabels,u=this._orient,h=["",""];if(n.get("showDetail")){var v=n.findRepresentativeAxisProxy();if(v){var d=v.getAxisModel().axis,m=this._range,_=e?v.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:v.getDataValueWindow();h=[this._formatLabel(_[0],d),this._formatLabel(_[1],d)]}}var S=(0,De.dt)(this._handleEnds.slice());A.call(this,0),A.call(this,1);function A(L){var I=mr.getTransform(o.handles[L].parent,this.group),U=mr.transformDirection(L===0?"right":"left",I),et=this._handleWidth/2+fM,ft=mr.applyTransform([S[L]+(L===0?-et:et),this._size[1]/2],I);s[L].setStyle({x:ft[0],y:ft[1],verticalAlign:u===oc?"middle":U,align:u===oc?U:"center",text:h[L]})}},r.prototype._formatLabel=function(e,n){var o=this.dataZoomModel,s=o.get("labelFormatter"),u=o.get("labelPrecision");(u==null||u==="auto")&&(u=n.getPixelPrecision());var h=e==null||isNaN(e)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(u,20));return(0,g.mf)(s)?s(e,h):(0,g.HD)(s)?s.replace("{value}",h):h},r.prototype._showDataInfo=function(e){e=this._dragging||e;var n=this._displayables,o=n.handleLabels;o[0].attr("invisible",!e),o[1].attr("invisible",!e),n.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},r.prototype._onDragMove=function(e,n,o,s){this._dragging=!0,Yi.sT(s.event);var u=this._displayables.sliderGroup.getLocalTransform(),h=mr.applyTransform([n,o],u,!0),v=this._updateInterval(e,h[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),v&&d&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var n=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){var s=this._handleEnds,u=(s[0]+s[1])/2,h=this._updateInterval("all",o[0]-u);this._updateView(),h&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var n=e.offsetX,o=e.offsetY;this._brushStart=new Ft.Z(n,o),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var o=n.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(o.width)<5)){var u=this._getViewExtent(),h=[0,100];this._range=(0,De.dt)([(0,De.NU)(o.x,u,h,!0),(0,De.NU)(o.x+o.width,u,h,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(Yi.sT(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,n){var o=this._displayables,s=this.dataZoomModel,u=o.brushRect;u||(u=o.brushRect=new ac({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(u)),u.attr("ignore",!1);var h=this._brushStart,v=this._displayables.sliderGroup,d=v.transformCoordToLocal(e,n),m=v.transformCoordToLocal(h.x,h.y),_=this._size;d[0]=Math.max(Math.min(_[0],d[0]),0),u.setShape({x:m[0],y:0,width:d[0]-m[0],height:_[1]})},r.prototype._dispatchZoomAction=function(e){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?cM:null,start:n[0],end:n[1]})},r.prototype._findCoordRect=function(){var e,n=j_(this.dataZoomModel).infoList;if(!e&&n.length){var o=n[0].model.coordinateSystem;e=o.getRect&&o.getRect()}if(!e){var s=this.api.getWidth(),u=this.api.getHeight();e={x:s*.2,y:u*.2,width:s*.6,height:u*.6}}return e},r.type="dataZoom.slider",r}(Am);function dM(a){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[a]}function ix(a){return a==="vertical"?"ns-resize":"ew-resize"}var pM=vM;function ax(a){a.registerComponentModel(sM),a.registerComponentView(pM),bm(a)}function gM(a){(0,F.D)(ex),(0,F.D)(ax)}var mM={get:function(a,r,e){var n=g.d9((yM[a]||{})[r]);return e&&g.kJ(n)?n[n.length-1]:n}},yM={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},ox=mM,sx=vi.mapVisual,_M=vi.eachVisual,xM=g.kJ,lx=g.S6,SM=De.dt,TM=De.NU,DM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o)},r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&A1(o,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var n=this.stateList;e=g.ak(e,this),this.controllerVisuals=Nm(this.option.controller,n,e),this.targetVisuals=Nm(this.option.target,n,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,n=[];return e==null||e==="all"?this.ecModel.eachSeries(function(o,s){n.push(s)}):n=We.kF(e),n},r.prototype.eachTargetSeries=function(e,n){g.S6(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&e.call(n,s)},this)},r.prototype.isTargetSeries=function(e){var n=!1;return this.eachTargetSeries(function(o){o===e&&(n=!0)}),n},r.prototype.formatValueText=function(e,n,o){var s=this.option,u=s.precision,h=this.dataBound,v=s.formatter,d;o=o||["<",">"],g.kJ(e)&&(e=e.slice(),d=!0);var m=n?e:d?[_(e[0]),_(e[1])]:_(e);if(g.HD(v))return v.replace("{value}",d?m[0]:m).replace("{value2}",d?m[1]:m);if(g.mf(v))return d?v(e[0],e[1]):v(e);if(d)return e[0]===h[0]?o[0]+" "+m[1]:e[1]===h[1]?o[1]+" "+m[0]:m[0]+" - "+m[1];return m;function _(S){return S===h[0]?"min":S===h[1]?"max":(+S).toFixed(Math.min(u,20))}},r.prototype.resetExtent=function(){var e=this.option,n=SM([e.min,e.max]);this._dataExtent=n},r.prototype.getDataDimensionIndex=function(e){var n=this.option.dimension;if(n!=null)return e.getDimensionIndex(n);for(var o=e.dimensions,s=o.length-1;s>=0;s--){var u=o[s],h=e.getDimensionInfo(u);if(!h.isCalculationCoord)return h.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,n=this.option,o={inRange:n.inRange,outOfRange:n.outOfRange},s=n.target||(n.target={}),u=n.controller||(n.controller={});g.TS(s,o),g.TS(u,o);var h=this.isCategory();v.call(this,s),v.call(this,u),d.call(this,s,"inRange","outOfRange"),m.call(this,u);function v(_){xM(n.color)&&!_.inRange&&(_.inRange={color:n.color.slice().reverse()}),_.inRange=_.inRange||{color:e.get("gradientColor")}}function d(_,S,A){var L=_[S],I=_[A];L&&!I&&(I=_[A]={},lx(L,function(U,et){if(vi.isValidType(et)){var ft=ox.get(et,"inactive",h);ft!=null&&(I[et]=ft,et==="color"&&!I.hasOwnProperty("opacity")&&!I.hasOwnProperty("colorAlpha")&&(I.opacity=[0,0]))}}))}function m(_){var S=(_.inRange||{}).symbol||(_.outOfRange||{}).symbol,A=(_.inRange||{}).symbolSize||(_.outOfRange||{}).symbolSize,L=this.get("inactiveColor"),I=this.getItemSymbol(),U=I||"roundRect";lx(this.stateList,function(et){var ft=this.itemSize,ht=_[et];ht||(ht=_[et]={color:h?L:[L]}),ht.symbol==null&&(ht.symbol=S&&g.d9(S)||(h?U:[U])),ht.symbolSize==null&&(ht.symbolSize=A&&g.d9(A)||(h?ft[0]:[ft[0],ft[0]])),ht.symbol=sx(ht.symbol,function(Ct){return Ct==="none"?U:Ct});var Tt=ht.symbolSize;if(Tt!=null){var Et=-1/0;_M(Tt,function(Ct){Ct>Et&&(Et=Ct)}),ht.symbolSize=sx(Tt,function(Ct){return TM(Ct,[0,Et],[0,ft[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(ti.Z),Yd=DM,ux=[20,140],wM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=ux[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=ux[1])},r.prototype._resetRange=function(){var e=this.getExtent(),n=this.option.range;!n||n.auto?(e.auto=1,this.option.range=e):g.kJ(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],e[0]),n[1]=Math.min(n[1],e[1]))},r.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),g.S6(this.stateList,function(e){var n=this.option.controller[e].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),n=De.dt((this.get("range")||[]).slice());return n[0]>e[1]&&(n[0]=e[1]),n[1]>e[1]&&(n[1]=e[1]),n[0]<e[0]&&(n[0]=e[0]),n[1]<e[0]&&(n[1]=e[0]),n},r.prototype.getValueState=function(e){var n=this.option.range,o=this.getExtent();return(n[0]<=o[0]||n[0]<=e)&&(n[1]>=o[1]||e<=n[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[];return this.eachTargetSeries(function(o){var s=[],u=o.getData();u.each(this.getDataDimensionIndex(u),function(h,v){e[0]<=h&&h<=e[1]&&s.push(v)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},r.prototype.getVisualMeta=function(e){var n=fx(this,"outOfRange",this.getExtent()),o=fx(this,"inRange",this.option.range.slice()),s=[];function u(A,L){s.push({value:A,color:e(A,L)})}for(var h=0,v=0,d=o.length,m=n.length;v<m&&(!o.length||n[v]<=o[0]);v++)n[v]<o[h]&&u(n[v],"outOfRange");for(var _=1;h<d;h++,_=0)_&&s.length&&u(o[h],"outOfRange"),u(o[h],"inRange");for(var _=1;v<m;v++)(!o.length||o[o.length-1]<n[v])&&(_&&(s.length&&u(s[s.length-1].value,"outOfRange"),_=0),u(n[v],"outOfRange"));var S=s.length;return{stops:s,outerColors:[S?s[0].color:"transparent",S?s[S-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=(0,Di.ZL)(Yd.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Yd);function fx(a,r,e){if(e[0]===e[1])return e.slice();for(var n=200,o=(e[1]-e[0])/n,s=e[0],u=[],h=0;h<=n&&s<e[1];h++)u.push(s),s+=o;return u.push(e[1]),u}var AM=wM,bM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n},r.prototype.render=function(e,n,o,s){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,n,o,s)},r.prototype.renderBackground=function(e){var n=this.visualMapModel,o=ii.MY(n.get("padding")||0),s=e.getBoundingRect();e.add(new Kr.Z({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,n,o){o=o||{};var s=o.forceState,u=this.visualMapModel,h={};if(n==="color"){var v=u.get("contentColor");h.color=v}function d(A){return h[A]}function m(A,L){h[A]=L}var _=u.controllerVisuals[s||u.getValueState(e)],S=vi.prepareVisualTypes(_);return g.S6(S,function(A){var L=_[A];o.convertOpacityToAlpha&&A==="opacity"&&(A="colorAlpha",L=_.__alphaForOpacity),vi.dependsOn(A,n)&&L&&L.applyVisual(e,d,m)}),h[n]},r.prototype.positionGroup=function(e){var n=this.visualMapModel,o=this.api;Hr.p$(e,n.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},r.prototype.doRender=function(e,n,o,s){},r.type="visualMap",r}(qn.Z),hx=bM,cx=[["left","right","width"],["top","bottom","height"]];function vx(a,r,e){var n=a.option,o=n.align;if(o!=null&&o!=="auto")return o;for(var s={width:r.getWidth(),height:r.getHeight()},u=n.orient==="horizontal"?1:0,h=cx[u],v=[0,null,10],d={},m=0;m<3;m++)d[cx[1-u][m]]=v[m],d[h[m]]=m===2?e[0]:n[h[m]];var _=[["x","width",3],["y","height",0]][u],S=(0,Hr.ME)(d,s,n.padding);return h[(S.margin[_[2]]||0)+S[_[0]]+S[_[1]]*.5<s[_[1]]*.5?0:1]}function jd(a,r){return g.S6(a||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),a}var Eo=De.NU,MM=g.S6,dx=Math.min,ry=Math.max,CM=12,EM=6,PM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return r.prototype.doRender=function(e,n,o,s){this._api=o,(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,n=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(n);var o=e.get("text");this._renderEndsText(n,o,0),this._renderEndsText(n,o,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},r.prototype._renderEndsText=function(e,n,o){if(n){var s=n[1-o];s=s!=null?s+"":"";var u=this.visualMapModel,h=u.get("textGap"),v=u.itemSize,d=this._shapes.mainGroup,m=this._applyTransform([v[0]/2,o===0?-h:v[1]+h],d),_=this._applyTransform(o===0?"bottom":"top",d),S=this._orient,A=this.visualMapModel.textStyleModel;this.group.add(new he.ZP({style:(0,Ge.Lr)(A,{x:m[0],y:m[1],verticalAlign:S==="horizontal"?"middle":_,align:S==="horizontal"?_:"center",text:s})}))}},r.prototype._renderBar=function(e){var n=this.visualMapModel,o=this._shapes,s=n.itemSize,u=this._orient,h=this._useHandle,v=vx(n,this.api,s),d=o.mainGroup=this._createBarGroup(v),m=new Mr.Z;d.add(m),m.add(o.outOfRange=px()),m.add(o.inRange=px(null,h?mx(this._orient):null,g.ak(this._dragHandle,this,"all",!1),g.ak(this._dragHandle,this,"all",!0))),m.setClipPath(new Kr.Z({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var _=n.textStyleModel.getTextRect("\u56FD"),S=ry(_.width,_.height);h&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(n,d,0,s,S,u),this._createHandle(n,d,1,s,S,u)),this._createIndicator(n,d,s,S,u),e.add(d)},r.prototype._createHandle=function(e,n,o,s,u,h){var v=g.ak(this._dragHandle,this,o,!1),d=g.ak(this._dragHandle,this,o,!0),m=(0,xt.GM)(e.get("handleSize"),s[0]),_=(0,fn.th)(e.get("handleIcon"),-m/2,-m/2,m,m,null,!0),S=mx(this._orient);_.attr({cursor:S,draggable:!0,drift:v,ondragend:d,onmousemove:function(et){Yi.sT(et.event)}}),_.x=s[0]/2,_.useStyle(e.getModel("handleStyle").getItemStyle()),_.setStyle({strokeNoScale:!0,strokeFirst:!0}),_.style.lineWidth*=2,_.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Qe.Nj)(_,!0),n.add(_);var A=this.visualMapModel.textStyleModel,L=new he.ZP({cursor:S,draggable:!0,drift:v,onmousemove:function(et){Yi.sT(et.event)},ondragend:d,style:(0,Ge.Lr)(A,{x:0,y:0,text:""})});L.ensureState("blur").style={opacity:.1},L.stateTransition={duration:200},this.group.add(L);var I=[m,0],U=this._shapes;U.handleThumbs[o]=_,U.handleLabelPoints[o]=I,U.handleLabels[o]=L},r.prototype._createIndicator=function(e,n,o,s,u){var h=(0,xt.GM)(e.get("indicatorSize"),o[0]),v=(0,fn.th)(e.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);v.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var d=e.getModel("indicatorStyle").getItemStyle();if(v instanceof gt.ZP){var m=v.style;v.useStyle(g.l7({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},d))}else v.useStyle(d);n.add(v);var _=this.visualMapModel.textStyleModel,S=new he.ZP({silent:!0,invisible:!0,style:(0,Ge.Lr)(_,{x:0,y:0,text:""})});this.group.add(S);var A=[(u==="horizontal"?s/2:EM)+o[0]/2,0],L=this._shapes;L.indicator=v,L.indicatorLabel=S,L.indicatorLabelPoint=A,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,n,o,s){if(this._useHandle){if(this._dragging=!n,!n){var u=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(e,u[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():gx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,n=this._dataInterval=e.getSelected(),o=e.getExtent(),s=[0,e.itemSize[1]];this._handleEnds=[Eo(n[0],o,s,!0),Eo(n[1],o,s,!0)]},r.prototype._updateInterval=function(e,n){n=n||0;var o=this.visualMapModel,s=this._handleEnds,u=[0,o.itemSize[1]];us(n,s,u,e,0);var h=o.getExtent();this._dataInterval=[Eo(s[0],u,h,!0),Eo(s[1],u,h,!0)]},r.prototype._updateView=function(e){var n=this.visualMapModel,o=n.getExtent(),s=this._shapes,u=[0,n.itemSize[1]],h=e?u:this._handleEnds,v=this._createBarVisual(this._dataInterval,o,h,"inRange"),d=this._createBarVisual(o,o,u,"outOfRange");s.inRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),s.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(h,v)},r.prototype._createBarVisual=function(e,n,o,s){var u={forceState:s,convertOpacityToAlpha:!0},h=this._makeColorGradient(e,u),v=[this.getControllerVisual(e[0],"symbolSize",u),this.getControllerVisual(e[1],"symbolSize",u)],d=this._createBarPoints(o,v);return{barColor:new Ar.Z(0,0,0,1,h),barPoints:d,handlesColor:[h[0].color,h[h.length-1].color]}},r.prototype._makeColorGradient=function(e,n){var o=100,s=[],u=(e[1]-e[0])/o;s.push({color:this.getControllerVisual(e[0],"color",n),offset:0});for(var h=1;h<o;h++){var v=e[0]+u*h;if(v>e[1])break;s.push({color:this.getControllerVisual(v,"color",n),offset:h/o})}return s.push({color:this.getControllerVisual(e[1],"color",n),offset:1}),s},r.prototype._createBarPoints=function(e,n){var o=this.visualMapModel.itemSize;return[[o[0]-n[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-n[1],e[1]]]},r.prototype._createBarGroup=function(e){var n=this._orient,o=this.visualMapModel.get("inverse");return new Mr.Z(n==="horizontal"&&!o?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&o?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!o?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},r.prototype._updateHandle=function(e,n){if(this._useHandle){var o=this._shapes,s=this.visualMapModel,u=o.handleThumbs,h=o.handleLabels,v=s.itemSize,d=s.getExtent();MM([0,1],function(m){var _=u[m];_.setStyle("fill",n.handlesColor[m]),_.y=e[m];var S=Eo(e[m],[0,v[1]],d,!0),A=this.getControllerVisual(S,"symbolSize");_.scaleX=_.scaleY=A/v[0],_.x=v[0]-A/2;var L=mr.applyTransform(o.handleLabelPoints[m],mr.getTransform(_,this.group));h[m].setStyle({x:L[0],y:L[1],text:s.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,n,o,s){var u=this.visualMapModel,h=u.getExtent(),v=u.itemSize,d=[0,v[1]],m=this._shapes,_=m.indicator;if(_){_.attr("invisible",!1);var S={convertOpacityToAlpha:!0},A=this.getControllerVisual(e,"color",S),L=this.getControllerVisual(e,"symbolSize"),I=Eo(e,h,d,!0),U=v[0]-L/2,et={x:_.x,y:_.y};_.y=I,_.x=U;var ft=mr.applyTransform(m.indicatorLabelPoint,mr.getTransform(_,this.group)),ht=m.indicatorLabel;ht.attr("invisible",!1);var Tt=this._applyTransform("left",m.mainGroup),Et=this._orient,Ct=Et==="horizontal";ht.setStyle({text:(o||"")+u.formatValueText(n),verticalAlign:Ct?Tt:"middle",align:Ct?"center":Tt});var It={x:U,y:I,style:{fill:A}},zt={style:{x:ft[0],y:ft[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Kt={duration:100,easing:"cubicInOut",additive:!0};_.x=et.x,_.y=et.y,_.animateTo(It,Kt),ht.animateTo(zt,Kt)}else _.attr(It),ht.attr(zt);this._firstShowIndicator=!1;var Yt=this._shapes.handleLabels;if(Yt)for(var ne=0;ne<Yt.length;ne++)this._api.enterBlur(Yt[ne])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(n){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,s=e._applyTransform([n.offsetX,n.offsetY],e._shapes.mainGroup,!0,!0);s[1]=dx(ry(0,s[1]),o[1]),e._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,n){var o=this.visualMapModel,s=o.itemSize;if(o.option.hoverLink){var u=[0,s[1]],h=o.getExtent();e=dx(ry(u[0],e),u[1]);var v=LM(o,h,u),d=[e-v,e+v],m=Eo(e,u,h,!0),_=[Eo(d[0],u,h,!0),Eo(d[1],u,h,!0)];d[0]<u[0]&&(_[0]=-1/0),d[1]>u[1]&&(_[1]=1/0),n&&(_[0]===-1/0?this._showIndicator(m,_[1],"< ",v):_[1]===1/0?this._showIndicator(m,_[0],"> ",v):this._showIndicator(m,m,"\u2248 ",v));var S=this._hoverLinkDataIndices,A=[];(n||gx(o))&&(A=this._hoverLinkDataIndices=o.findTargetDataIndices(_));var L=We.XI(S,A);this._dispatchHighDown("downplay",jd(L[0],o)),this._dispatchHighDown("highlight",jd(L[1],o))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var n;if((0,rh.o)(e.target,function(v){var d=(0,Er.A)(v);if(d.dataIndex!=null)return n=d,!0},!0),!!n){var o=this.ecModel.getSeriesByIndex(n.seriesIndex),s=this.visualMapModel;if(s.isTargetSeries(o)){var u=o.getData(n.dataType),h=u.getStore().get(s.getDataDimensionIndex(u),n.dataIndex);isNaN(h)||this._showIndicator(h,h)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var o=0;o<n.length;o++)this._api.leaveBlur(n[o])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",jd(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,n,o,s){var u=mr.getTransform(n,s?null:this.group);return g.kJ(e)?mr.applyTransform(e,u,o):mr.transformDirection(e,u,o)},r.prototype._dispatchHighDown=function(e,n){n&&n.length&&this.api.dispatchAction({type:e,batch:n})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(hx);function px(a,r,e,n){return new fa.Z({shape:{points:a},draggable:!!e,cursor:r,drift:e,onmousemove:function(o){Yi.sT(o.event)},ondragend:n})}function LM(a,r,e){var n=CM/2,o=a.get("hoverLinkDataSize");return o&&(n=Eo(o,r,e,!0)/2),n}function gx(a){var r=a.get("hoverLinkOnHandle");return!!(r==null?a.get("realtime"):r)}function mx(a){return a==="vertical"?"ns-resize":"ew-resize"}var IM=PM,RM={type:"selectDataRange",event:"dataRangeSelected",update:"update"},OM=function(a,r){r.eachComponent({mainType:"visualMap",query:a},function(e){e.setSelected(a.selected)})},NM=[{createOnAllSeries:!0,reset:function(a,r){var e=[];return r.eachComponent("visualMap",function(n){var o=a.pipelineContext;!n.isTargetSeries(a)||o&&o.large||e.push(MA(n.stateList,n.targetVisuals,g.ak(n.getValueState,n),n.getDataDimensionIndex(a.getData())))}),e}},{createOnAllSeries:!0,reset:function(a,r){var e=a.getData(),n=[];r.eachComponent("visualMap",function(o){if(o.isTargetSeries(a)){var s=o.getVisualMeta(g.ak(BM,null,a,o))||{stops:[],outerColors:[]},u=o.getDataDimensionIndex(e);u>=0&&(s.dimension=u,n.push(s))}}),a.getData().setVisual("visualMeta",n)}}];function BM(a,r,e,n){for(var o=r.targetVisuals[n],s=vi.prepareVisualTypes(o),u={color:(0,rl.UL)(a.getData(),"color")},h=0,v=s.length;h<v;h++){var d=s[h],m=o[d==="opacity"?"__alphaForOpacity":d];m&&m.applyVisual(e,_,S)}return u.color;function _(A){return u[A]}function S(A,L){u[A]=L}}var yx=g.S6;function FM(a){var r=a&&a.visualMap;g.kJ(r)||(r=r?[r]:[]),yx(r,function(e){if(e){yf(e,"splitList")&&!yf(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var n=e.pieces;n&&g.kJ(n)&&yx(n,function(o){g.Kn(o)&&(yf(o,"start")&&!yf(o,"min")&&(o.min=o.start),yf(o,"end")&&!yf(o,"max")&&(o.max=o.end))})}})}function yf(a,r){return a&&a.hasOwnProperty&&a.hasOwnProperty(r)}var _x=!1;function xx(a){_x||(_x=!0,a.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),a.registerAction(RM,OM),(0,g.S6)(NM,function(r){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,r)}),a.registerPreprocessor(FM))}function Sx(a){a.registerComponentModel(AM),a.registerComponentView(IM),xx(a)}var GM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],zM[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var s=this.option.categories;this.resetVisual(function(u,h){o==="categories"?(u.mappingMethod="category",u.categories=g.d9(s)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=g.UI(this._pieceList,function(v){return v=g.d9(v),h!=="inRange"&&(v.visual=null),v}))})},r.prototype.completeVisualOption=function(){var e=this.option,n={},o=vi.listVisualTypes(),s=this.isCategory();g.S6(e.pieces,function(h){g.S6(o,function(v){h.hasOwnProperty(v)&&(n[v]=1)})}),g.S6(n,function(h,v){var d=!1;g.S6(this.stateList,function(m){d=d||u(e,m,v)||u(e.target,m,v)},this),!d&&g.S6(this.stateList,function(m){(e[m]||(e[m]={}))[v]=ox.get(v,m==="inRange"?"active":"inactive",s)})},this);function u(h,v,d){return h&&h[v]&&h[v].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,n){var o=this.option,s=this._pieceList,u=(n?o:e).selected||{};if(o.selected=u,g.S6(s,function(v,d){var m=this.getSelectedMapKey(v);u.hasOwnProperty(m)||(u[m]=!0)},this),o.selectedMode==="single"){var h=!1;g.S6(s,function(v,d){var m=this.getSelectedMapKey(v);u[m]&&(h?u[m]=!1:h=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=g.d9(e)},r.prototype.getValueState=function(e){var n=vi.findPieceIndex(e,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[],o=this._pieceList;return this.eachTargetSeries(function(s){var u=[],h=s.getData();h.each(this.getDataDimensionIndex(h),function(v,d){var m=vi.findPieceIndex(v,o);m===e&&u.push(d)},this),n.push({seriesId:s.id,dataIndex:u})},this),n},r.prototype.getRepresentValue=function(e){var n;if(this.isCategory())n=e.value;else if(e.value!=null)n=e.value;else{var o=e.interval||[];n=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return n},r.prototype.getVisualMeta=function(e){if(this.isCategory())return;var n=[],o=["",""],s=this;function u(m,_){var S=s.getRepresentValue({interval:m});_||(_=s.getValueState(S));var A=e(S,_);m[0]===-1/0?o[0]=A:m[1]===1/0?o[1]=A:n.push({value:m[0],color:A},{value:m[1],color:A})}var h=this._pieceList.slice();if(!h.length)h.push({interval:[-1/0,1/0]});else{var v=h[0].interval[0];v!==-1/0&&h.unshift({interval:[-1/0,v]}),v=h[h.length-1].interval[1],v!==1/0&&h.push({interval:[v,1/0]})}var d=-1/0;return g.S6(h,function(m){var _=m.interval;_&&(_[0]>d&&u([d,_[0]],"outOfRange"),u(_.slice()),d=_[1])},this),{stops:n,outerColors:o}},r.type="visualMap.piecewise",r.defaultOption=(0,Di.ZL)(Yd.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Yd),zM={splitNumber:function(a){var r=this.option,e=Math.min(r.precision,20),n=this.getExtent(),o=r.splitNumber;o=Math.max(parseInt(o,10),1),r.splitNumber=o;for(var s=(n[1]-n[0])/o;+s.toFixed(e)!==s&&e<5;)e++;r.precision=e,s=+s.toFixed(e),r.minOpen&&a.push({interval:[-1/0,n[0]],close:[0,0]});for(var u=0,h=n[0];u<o;h+=s,u++){var v=u===o-1?n[1]:h+s;a.push({interval:[h,v],close:[1,1]})}r.maxOpen&&a.push({interval:[n[1],1/0],close:[0,0]}),(0,De.nR)(a),g.S6(a,function(d,m){d.index=m,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var r=this.option;g.S6(r.categories,function(e){a.push({text:this.formatValueText(e,!0),value:e})},this),Tx(r,a)},pieces:function(a){var r=this.option;g.S6(r.pieces,function(e,n){g.Kn(e)||(e={value:e});var o={text:"",index:n};if(e.label!=null&&(o.text=e.label),e.hasOwnProperty("value")){var s=o.value=e.value;o.interval=[s,s],o.close=[1,1]}else{for(var u=o.interval=[],h=o.close=[0,0],v=[1,0,1],d=[-1/0,1/0],m=[],_=0;_<2;_++){for(var S=[["gte","gt","min"],["lte","lt","max"]][_],A=0;A<3&&u[_]==null;A++)u[_]=e[S[A]],h[_]=v[A],m[_]=A===2;u[_]==null&&(u[_]=d[_])}m[0]&&u[1]===1/0&&(h[0]=0),m[1]&&u[0]===-1/0&&(h[1]=0),u[0]===u[1]&&h[0]&&h[1]&&(o.value=u[0])}o.visual=vi.retrieveVisuals(e),a.push(o)},this),Tx(r,a),(0,De.nR)(a),g.S6(a,function(e){var n=e.close,o=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,o)},this)}};function Tx(a,r){var e=a.inverse;(a.orient==="vertical"?!e:e)&&r.reverse()}var VM=GM,kM=function(a){(0,Wt.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.doRender=function(){var e=this.group;e.removeAll();var n=this.visualMapModel,o=n.get("textGap"),s=n.textStyleModel,u=s.getFont(),h=s.getTextColor(),v=this._getItemAlign(),d=n.itemSize,m=this._getViewData(),_=m.endsText,S=g.Jv(n.get("showLabel",!0),!_);_&&this._renderEndsText(e,_[0],d,S,v),g.S6(m.viewPieceList,function(A){var L=A.piece,I=new Mr.Z;I.onclick=g.ak(this._onItemClick,this,L),this._enableHoverLink(I,A.indexInModelPieceList);var U=n.getRepresentValue(L);if(this._createItemSymbol(I,U,[0,0,d[0],d[1]]),S){var et=this.visualMapModel.getValueState(U);I.add(new he.ZP({style:{x:v==="right"?-o:d[0]+o,y:d[1]/2,text:L.text,verticalAlign:"middle",align:v,font:u,fill:h,opacity:et==="outOfRange"?.5:1}}))}e.add(I)},this),_&&this._renderEndsText(e,_[1],d,S,v),Hr.BZ(n.get("orient"),e,n.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,n){var o=this;e.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(u){var h=o.visualMapModel;h.option.hoverLink&&o.api.dispatchAction({type:u,batch:jd(h.findTargetDataIndices(n),h)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,n=e.option;if(n.orient==="vertical")return vx(e,this.api,e.itemSize);var o=n.align;return(!o||o==="auto")&&(o="left"),o},r.prototype._renderEndsText=function(e,n,o,s,u){if(n){var h=new Mr.Z,v=this.visualMapModel.textStyleModel;h.add(new he.ZP({style:(0,Ge.Lr)(v,{x:s?u==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?u:"center",text:n})})),e.add(h)}},r.prototype._getViewData=function(){var e=this.visualMapModel,n=g.UI(e.getPieceList(),function(h,v){return{piece:h,indexInModelPieceList:v}}),o=e.get("text"),s=e.get("orient"),u=e.get("inverse");return(s==="horizontal"?u:!u)?n.reverse():o&&(o=o.slice().reverse()),{viewPieceList:n,endsText:o}},r.prototype._createItemSymbol=function(e,n,o){e.add((0,fn.th)(this.getControllerVisual(n,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(n,"color")))},r.prototype._onItemClick=function(e){var n=this.visualMapModel,o=n.option,s=o.selectedMode;if(s){var u=g.d9(o.selected),h=n.getSelectedMapKey(e);s==="single"||s===!0?(u[h]=!0,g.S6(u,function(v,d){u[d]=d===h})):u[h]=!u[h],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},r.type="visualMap.piecewise",r}(hx),UM=kM;function Dx(a){a.registerComponentModel(VM),a.registerComponentView(UM),xx(a)}function ZM(a){(0,F.D)(Sx),(0,F.D)(Dx)}var WM={label:{enabled:!0},decal:{show:!1}},Ax=(0,We.Yf)(),HM={};function XM(a,r){var e=a.getModel("aria");if(!e.get("enabled"))return;var n=g.d9(WM);g.TS(n.label,a.getLocaleModel().get("aria"),!1),g.TS(e.option,n,!1),o(),s();function o(){var d=e.getModel("decal"),m=d.get("show");if(m){var _=g.kW();a.eachSeries(function(S){if(!S.isColorBySeries()){var A=_.get(S.type);A||(A={},_.set(S.type,A)),Ax(S).scope=A}}),a.eachRawSeries(function(S){if(a.isSeriesFiltered(S))return;if(g.mf(S.enableAriaDecal)){S.enableAriaDecal();return}var A=S.getData();if(S.isColorBySeries()){var ft=(0,Bu.i)(S.ecModel,S.name,HM,a.getSeriesCount()),ht=A.getVisual("decal");A.setVisual("decal",Tt(ht,ft))}else{var L=S.getRawData(),I={},U=Ax(S).scope;A.each(function(Et){var Ct=A.getRawIndex(Et);I[Ct]=Et});var et=L.count();L.each(function(Et){var Ct=I[Et],It=L.getName(Et)||Et+"",zt=(0,Bu.i)(S.ecModel,It,U,et),Kt=A.getItemVisual(Ct,"decal");A.setItemVisual(Ct,"decal",Tt(Kt,zt))})}function Tt(Et,Ct){var It=Et?g.l7(g.l7({},Ct),Et):Ct;return It.dirty=!0,It}})}}function s(){var d=a.getLocaleModel().get("aria"),m=e.getModel("label");if(m.option=g.ce(m.option,d),!!m.get("enabled")){var _=r.getZr().dom;if(m.get("description")){_.setAttribute("aria-label",m.get("description"));return}var S=a.getSeriesCount(),A=m.get(["data","maxCount"])||10,L=m.get(["series","maxCount"])||10,I=Math.min(S,L),U;if(!(S<1)){var et=h();if(et){var ft=m.get(["general","withTitle"]);U=u(ft,{title:et})}else U=m.get(["general","withoutTitle"]);var ht=[],Tt=S>1?m.get(["series","multiple","prefix"]):m.get(["series","single","prefix"]);U+=u(Tt,{seriesCount:S}),a.eachSeries(function(zt,Kt){if(Kt<I){var Yt=void 0,ne=zt.get("name"),oe=ne?"withName":"withoutName";Yt=S>1?m.get(["series","multiple",oe]):m.get(["series","single",oe]),Yt=u(Yt,{seriesId:zt.seriesIndex,seriesName:zt.get("name"),seriesType:v(zt.subType)});var ce=zt.getData();if(ce.count()>A){var me=m.get(["data","partialData"]);Yt+=u(me,{displayCnt:A})}else Yt+=m.get(["data","allData"]);for(var _e=m.get(["data","separator","middle"]),Ce=m.get(["data","separator","end"]),ke=[],Oe=0;Oe<ce.count();Oe++)if(Oe<A){var $e=ce.getName(Oe),yr=ce.getValues(Oe),_r=m.get(["data",$e?"withName":"withoutName"]);ke.push(u(_r,{name:$e,value:yr.join(_e)}))}Yt+=ke.join(_e)+Ce,ht.push(Yt)}});var Et=m.getModel(["series","multiple","separator"]),Ct=Et.get("middle"),It=Et.get("end");U+=ht.join(Ct)+It,_.setAttribute("aria-label",U)}}}function u(d,m){if(!g.HD(d))return d;var _=d;return g.S6(m,function(S,A){_=_.replace(new RegExp("\\{\\s*"+A+"\\s*\\}","g"),S)}),_}function h(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function v(d){return a.getLocaleModel().get(["series","typeNames"])[d]||"\u81EA\u5B9A\u4E49\u56FE"}}function KM(a){if(!(!a||!a.aria)){var r=a.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},g.S6(["description","general","series","data"],function(e){r[e]!=null&&(r.label[e]=r[e])})}}function YM(a){a.registerPreprocessor(KM),a.registerVisual(a.PRIORITY.VISUAL.ARIA,XM)}var bx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},jM=function(){function a(r){var e=this._condVal=(0,g.HD)(r)?new RegExp(r):(0,g.Kj)(r)?r:null;if(e==null){var n="";(0,Zr._y)(n)}}return a.prototype.evaluate=function(r){var e=typeof r;return(0,g.HD)(e)?this._condVal.test(r):(0,g.hj)(e)?this._condVal.test(r+""):!1},a}(),JM=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),QM=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(!r[e].evaluate())return!1;return!0},a}(),$M=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(r[e].evaluate())return!0;return!1},a}(),qM=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),tC=function(){function a(){}return a.prototype.evaluate=function(){for(var r=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),o=r?this.valueParser(n):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(r?o:n))return!1;return!0},a}();function ny(a,r){if(a===!0||a===!1){var e=new JM;return e.value=a,e}var n="";return Cx(a)||(0,Zr._y)(n),a.and?Mx("and",a,r):a.or?Mx("or",a,r):a.not?eC(a,r):rC(a,r)}function Mx(a,r,e){var n=r[a],o="";(0,g.kJ)(n)||(0,Zr._y)(o),n.length||(0,Zr._y)(o);var s=a==="and"?new QM:new $M;return s.children=(0,g.UI)(n,function(u){return ny(u,e)}),s.children.length||(0,Zr._y)(o),s}function eC(a,r){var e=a.not,n="";Cx(e)||(0,Zr._y)(n);var o=new qM;return o.child=ny(e,r),o.child||(0,Zr._y)(n),o}function rC(a,r){for(var e="",n=r.prepareGetValue(a),o=[],s=(0,g.XP)(a),u=a.parser,h=u?(0,il.o2)(u):null,v=0;v<s.length;v++){var d=s[v];if(!(d==="parser"||r.valueGetterAttrMap.get(d))){var m=(0,g.RI)(bx,d)?bx[d]:d,_=a[d],S=h?h(_):_,A=(0,il.tR)(m,S)||m==="reg"&&new jM(S);A||(0,Zr._y)(e),o.push(A)}}o.length||(0,Zr._y)(e);var L=new tC;return L.valueGetterParam=n,L.valueParser=h,L.getValue=r.getValue,L.subCondList=o,L}function Cx(a){return(0,g.Kn)(a)&&!(0,g.zG)(a)}var nC=function(){function a(r,e){this._cond=ny(r,e)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function iC(a,r){return new nC(a,r)}var aC={type:"echarts:filter",transform:function(a){for(var r=a.upstream,e,n=iC(a.config,{valueGetterAttrMap:(0,g.kW)({dimension:!0}),prepareGetValue:function(h){var v="",d=h.dimension;(0,g.RI)(h,"dimension")||(0,Zr._y)(v);var m=r.getDimensionInfo(d);return m||(0,Zr._y)(v),{dimIdx:m.index}},getValue:function(h){return r.retrieveValueFromItem(e,h.dimIdx)}}),o=[],s=0,u=r.count();s<u;s++)e=r.getRawDataItem(s),n.evaluate()&&o.push(e);return{data:o}}},KC="",oC={type:"echarts:sort",transform:function(a){var r=a.upstream,e=a.config,n="",o=(0,We.kF)(e);o.length||(0,Zr._y)(n);var s=[];(0,g.S6)(o,function(m){var _=m.dimension,S=m.order,A=m.parser,L=m.incomparable;if(_==null&&(0,Zr._y)(n),S!=="asc"&&S!=="desc"&&(0,Zr._y)(n),L&&L!=="min"&&L!=="max"){var I="";(0,Zr._y)(I)}if(S!=="asc"&&S!=="desc"){var U="";(0,Zr._y)(U)}var et=r.getDimensionInfo(_);et||(0,Zr._y)(n);var ft=A?(0,il.o2)(A):null;A&&!ft&&(0,Zr._y)(n),s.push({dimIdx:et.index,parser:ft,comparator:new il.ID(S,L)})});var u=r.sourceFormat;u!==$r.XD&&u!==$r.qb&&(0,Zr._y)(n);for(var h=[],v=0,d=r.count();v<d;v++)h.push(r.getRawDataItem(v));return h.sort(function(m,_){for(var S=0;S<s.length;S++){var A=s[S],L=r.retrieveValueFromItem(m,A.dimIdx),I=r.retrieveValueFromItem(_,A.dimIdx);A.parser&&(L=A.parser(L),I=A.parser(I));var U=A.comparator.evaluate(L,I);if(U!==0)return U}return 0}),{data:h}}};function sC(a){a.registerTransform(aC),a.registerTransform(oC)}var lC=z(35913),Po=at.Z.CMD;function _f(a,r){return Math.abs(a-r)<1e-5}function iy(a){var r=a.data,e=a.len(),n=[],o,s=0,u=0,h=0,v=0;function d(ce,me){o&&o.length>2&&n.push(o),o=[ce,me]}function m(ce,me,_e,Ce){_f(ce,_e)&&_f(me,Ce)||o.push(ce,me,_e,Ce,_e,Ce)}function _(ce,me,_e,Ce,ke,Oe){var $e=Math.abs(me-ce),yr=Math.tan($e/4)*4/3,_r=me<ce?-1:1,Xr=Math.cos(ce),Wr=Math.sin(ce),Gr=Math.cos(me),ln=Math.sin(me),Ln=Xr*ke+_e,on=Wr*Oe+Ce,zr=Gr*ke+_e,bn=ln*Oe+Ce,Sn=ke*yr*_r,In=Oe*yr*_r;o.push(Ln-Sn*Wr,on+In*Xr,zr+Sn*ln,bn-In*Gr,zr,bn)}for(var S,A,L,I,U=0;U<e;){var et=r[U++],ft=U===1;switch(ft&&(s=r[U],u=r[U+1],h=s,v=u,(et===Po.L||et===Po.C||et===Po.Q)&&(o=[h,v])),et){case Po.M:s=h=r[U++],u=v=r[U++],d(h,v);break;case Po.L:S=r[U++],A=r[U++],m(s,u,S,A),s=S,u=A;break;case Po.C:o.push(r[U++],r[U++],r[U++],r[U++],s=r[U++],u=r[U++]);break;case Po.Q:S=r[U++],A=r[U++],L=r[U++],I=r[U++],o.push(s+2/3*(S-s),u+2/3*(A-u),L+2/3*(S-L),I+2/3*(A-I),L,I),s=L,u=I;break;case Po.A:var ht=r[U++],Tt=r[U++],Et=r[U++],Ct=r[U++],It=r[U++],zt=r[U++]+It;U+=1;var Kt=!r[U++];S=Math.cos(It)*Et+ht,A=Math.sin(It)*Ct+Tt,ft?(h=S,v=A,d(h,v)):m(s,u,S,A),s=Math.cos(zt)*Et+ht,u=Math.sin(zt)*Ct+Tt;for(var Yt=(Kt?-1:1)*Math.PI/2,ne=It;Kt?ne>zt:ne<zt;ne+=Yt){var oe=Kt?Math.max(ne+Yt,zt):Math.min(ne+Yt,zt);_(ne,oe,ht,Tt,Et,Ct)}break;case Po.R:h=s=r[U++],v=u=r[U++],S=h+r[U++],A=v+r[U++],d(S,v),m(S,v,S,A),m(S,A,h,A),m(h,A,h,v),m(h,v,S,v);break;case Po.Z:o&&m(s,u,h,v),s=h,u=v;break}}return o&&o.length>2&&n.push(o),n}function ay(a,r,e,n,o,s,u,h,v,d){if(_f(a,e)&&_f(r,n)&&_f(o,u)&&_f(s,h)){v.push(u,h);return}var m=2/d,_=m*m,S=u-a,A=h-r,L=Math.sqrt(S*S+A*A);S/=L,A/=L;var I=e-a,U=n-r,et=o-u,ft=s-h,ht=I*I+U*U,Tt=et*et+ft*ft;if(ht<_&&Tt<_){v.push(u,h);return}var Et=S*I+A*U,Ct=-S*et-A*ft,It=ht-Et*Et,zt=Tt-Ct*Ct;if(It<_&&Et>=0&&zt<_&&Ct>=0){v.push(u,h);return}var Kt=[],Yt=[];(0,_i.Vz)(a,e,o,u,.5,Kt),(0,_i.Vz)(r,n,s,h,.5,Yt),ay(Kt[0],Yt[0],Kt[1],Yt[1],Kt[2],Yt[2],Kt[3],Yt[3],v,d),ay(Kt[4],Yt[4],Kt[5],Yt[5],Kt[6],Yt[6],Kt[7],Yt[7],v,d)}function uC(a,r){var e=iy(a),n=[];r=r||1;for(var o=0;o<e.length;o++){var s=e[o],u=[],h=s[0],v=s[1];u.push(h,v);for(var d=2;d<s.length;){var m=s[d++],_=s[d++],S=s[d++],A=s[d++],L=s[d++],I=s[d++];ay(h,v,m,_,S,A,L,I,u,r),h=L,v=I}n.push(u)}return n}function Ex(a,r,e){var n=a[r],o=a[1-r],s=Math.abs(n/o),u=Math.ceil(Math.sqrt(s*e)),h=Math.floor(e/u);h===0&&(h=1,u=e);for(var v=[],d=0;d<u;d++)v.push(h);var m=u*h,_=e-m;if(_>0)for(var d=0;d<_;d++)v[d%u]+=1;return v}function Px(a,r,e){for(var n=a.r0,o=a.r,s=a.startAngle,u=a.endAngle,h=Math.abs(u-s),v=h*o,d=o-n,m=v>Math.abs(d),_=Ex([v,d],m?0:1,r),S=(m?h:d)/_.length,A=0;A<_.length;A++)for(var L=(m?d:h)/_[A],I=0;I<_[A];I++){var U={};m?(U.startAngle=s+S*A,U.endAngle=s+S*(A+1),U.r0=n+L*I,U.r=n+L*(I+1)):(U.startAngle=s+L*I,U.endAngle=s+L*(I+1),U.r0=n+S*A,U.r=n+S*(A+1)),U.clockwise=a.clockwise,U.cx=a.cx,U.cy=a.cy,e.push(U)}}function fC(a,r,e){for(var n=a.width,o=a.height,s=n>o,u=Ex([n,o],s?0:1,r),h=s?"width":"height",v=s?"height":"width",d=s?"x":"y",m=s?"y":"x",_=a[h]/u.length,S=0;S<u.length;S++)for(var A=a[v]/u[S],L=0;L<u[S];L++){var I={};I[d]=S*_,I[m]=L*A,I[h]=_,I[v]=A,I.x+=a.x,I.y+=a.y,e.push(I)}}function Lx(a,r,e,n){return a*n-e*r}function hC(a,r,e,n,o,s,u,h){var v=e-a,d=n-r,m=u-o,_=h-s,S=Lx(m,_,v,d);if(Math.abs(S)<1e-6)return null;var A=a-o,L=r-s,I=Lx(A,L,m,_)/S;return I<0||I>1?null:new Ft.Z(I*v+a,I*d+r)}function cC(a,r,e){var n=new Ft.Z;Ft.Z.sub(n,e,r),n.normalize();var o=new Ft.Z;Ft.Z.sub(o,a,r);var s=o.dot(n);return s}function xf(a,r){var e=a[a.length-1];e&&e[0]===r[0]&&e[1]===r[1]||a.push(r)}function vC(a,r,e){for(var n=a.length,o=[],s=0;s<n;s++){var u=a[s],h=a[(s+1)%n],v=hC(u[0],u[1],h[0],h[1],r.x,r.y,e.x,e.y);v&&o.push({projPt:cC(v,r,e),pt:v,idx:s})}if(o.length<2)return[{points:a},{points:a}];o.sort(function(U,et){return U.projPt-et.projPt});var d=o[0],m=o[o.length-1];if(m.idx<d.idx){var _=d;d=m,m=_}for(var S=[d.pt.x,d.pt.y],A=[m.pt.x,m.pt.y],L=[S],I=[A],s=d.idx+1;s<=m.idx;s++)xf(L,a[s].slice());xf(L,A),xf(L,S);for(var s=m.idx+1;s<=d.idx+n;s++)xf(I,a[s%n].slice());return xf(I,S),xf(I,A),[{points:L},{points:I}]}function Ix(a){var r=a.points,e=[],n=[];(0,ca.zk)(r,e,n);var o=new gn.Z(e[0],e[1],n[0]-e[0],n[1]-e[1]),s=o.width,u=o.height,h=o.x,v=o.y,d=new Ft.Z,m=new Ft.Z;return s>u?(d.x=m.x=h+s/2,d.y=v,m.y=v+u):(d.y=m.y=v+u/2,d.x=h,m.x=h+s),vC(r,d,m)}function Jd(a,r,e,n){if(e===1)n.push(r);else{var o=Math.floor(e/2),s=a(r);Jd(a,s[0],o,n),Jd(a,s[1],e-o,n)}return n}function dC(a,r){for(var e=[],n=0;n<r;n++)e.push((0,Vf.U5)(a));return e}function pC(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function gC(a){for(var r=[],e=0;e<a.length;)r.push([a[e++],a[e++]]);return r}function mC(a,r){var e=[],n=a.shape,o;switch(a.type){case"rect":fC(n,r,e),o=Kr.Z;break;case"sector":Px(n,r,e),o=Ei.C;break;case"circle":Px({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},r,e),o=Ei.C;break;default:var s=a.getComputedTransform(),u=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,h=(0,g.UI)(uC(a.getUpdatedPathProxy(),u),function(et){return gC(et)}),v=h.length;if(v===0)Jd(Ix,{points:h[0]},r,e);else if(v===r)for(var d=0;d<v;d++)e.push({points:h[d]});else{var m=0,_=(0,g.UI)(h,function(et){var ft=[],ht=[];(0,ca.zk)(et,ft,ht);var Tt=(ht[1]-ft[1])*(ht[0]-ft[0]);return m+=Tt,{poly:et,area:Tt}});_.sort(function(et,ft){return ft.area-et.area});for(var S=r,d=0;d<v;d++){var A=_[d];if(S<=0)break;var L=d===v-1?S:Math.ceil(A.area/m*r);L<0||(Jd(Ix,{points:A.poly},L,e),S-=L)}}o=fa.Z;break}if(!o)return dC(a,r);for(var I=[],d=0;d<e.length;d++){var U=new o;U.setShape(e[d]),pC(a,U),I.push(U)}return I}function yC(a,r){var e=a.length,n=r.length;if(e===n)return[a,r];for(var o=[],s=[],u=e<n?a:r,h=Math.min(e,n),v=Math.abs(n-e)/6,d=(h-2)/6,m=Math.ceil(v/d)+1,_=[u[0],u[1]],S=v,A=2;A<h;){var L=u[A-2],I=u[A-1],U=u[A++],et=u[A++],ft=u[A++],ht=u[A++],Tt=u[A++],Et=u[A++];if(S<=0){_.push(U,et,ft,ht,Tt,Et);continue}for(var Ct=Math.min(S,m-1)+1,It=1;It<=Ct;It++){var zt=It/Ct;(0,_i.Vz)(L,U,ft,Tt,zt,o),(0,_i.Vz)(I,et,ht,Et,zt,s),L=o[3],I=s[3],_.push(o[1],s[1],o[2],s[2],L,I),U=o[5],et=s[5],ft=o[6],ht=s[6]}S-=Ct-1}return u===a?[_,r]:[a,_]}function Rx(a,r){for(var e=a.length,n=a[e-2],o=a[e-1],s=[],u=0;u<r.length;)s[u++]=n,s[u++]=o;return s}function _C(a,r){for(var e,n,o,s=[],u=[],h=0;h<Math.max(a.length,r.length);h++){var v=a[h],d=r[h],m=void 0,_=void 0;v?d?(e=yC(v,d),m=e[0],_=e[1],n=m,o=_):(_=Rx(o||v,v),m=v):(m=Rx(n||d,d),_=d),s.push(m),u.push(_)}return[s,u]}function Ox(a){for(var r=0,e=0,n=0,o=a.length,s=0,u=o-2;s<o;u=s,s+=2){var h=a[u],v=a[u+1],d=a[s],m=a[s+1],_=h*m-d*v;r+=_,e+=(h+d)*_,n+=(v+m)*_}return r===0?[a[0]||0,a[1]||0]:[e/r/3,n/r/3,r]}function xC(a,r,e,n){for(var o=(a.length-2)/6,s=1/0,u=0,h=a.length,v=h-2,d=0;d<o;d++){for(var m=d*6,_=0,S=0;S<h;S+=2){var A=S===0?m:(m+S-2)%v+2,L=a[A]-e[0],I=a[A+1]-e[1],U=r[S]-n[0],et=r[S+1]-n[1],ft=U-L,ht=et-I;_+=ft*ft+ht*ht}_<s&&(s=_,u=d)}return u}function SC(a){for(var r=[],e=a.length,n=0;n<e;n+=2)r[n]=a[e-n-2],r[n+1]=a[e-n-1];return r}function TC(a,r,e,n){for(var o=[],s,u=0;u<a.length;u++){var h=a[u],v=r[u],d=Ox(h),m=Ox(v);s==null&&(s=d[2]<0!=m[2]<0);var _=[],S=[],A=0,L=1/0,I=[],U=h.length;s&&(h=SC(h));for(var et=xC(h,v,d,m)*6,ft=U-2,ht=0;ht<ft;ht+=2){var Tt=(et+ht)%ft+2;_[ht+2]=h[Tt]-d[0],_[ht+3]=h[Tt+1]-d[1]}if(_[0]=h[et]-d[0],_[1]=h[et+1]-d[1],e>0)for(var Et=n/e,Ct=-n/2;Ct<=n/2;Ct+=Et){for(var It=Math.sin(Ct),zt=Math.cos(Ct),Kt=0,ht=0;ht<h.length;ht+=2){var Yt=_[ht],ne=_[ht+1],oe=v[ht]-m[0],ce=v[ht+1]-m[1],me=oe*zt-ce*It,_e=oe*It+ce*zt;I[ht]=me,I[ht+1]=_e;var Ce=me-Yt,ke=_e-ne;Kt+=Ce*Ce+ke*ke}if(Kt<L){L=Kt,A=Ct;for(var Oe=0;Oe<I.length;Oe++)S[Oe]=I[Oe]}}else for(var $e=0;$e<U;$e+=2)S[$e]=v[$e]-m[0],S[$e+1]=v[$e+1]-m[1];o.push({from:_,to:S,fromCp:d,toCp:m,rotation:-A})}return o}function Qd(a){return a.__isCombineMorphing}function YC(a){return a.__morphT>=0}var Nx="__mOriginal_";function $d(a,r,e){var n=Nx+r,o=a[n]||a[r];a[n]||(a[n]=a[r]);var s=e.replace,u=e.after,h=e.before;a[r]=function(){var v=arguments,d;return h&&h.apply(this,v),s?d=s.apply(this,v):d=o.apply(this,v),u&&u.apply(this,v),d}}function sc(a,r){var e=Nx+r;a[e]&&(a[r]=a[e],a[e]=null)}function Bx(a,r){for(var e=0;e<a.length;e++)for(var n=a[e],o=0;o<n.length;){var s=n[o],u=n[o+1];n[o++]=r[0]*s+r[2]*u+r[4],n[o++]=r[1]*s+r[3]*u+r[5]}}function Fx(a,r){var e=a.getUpdatedPathProxy(),n=r.getUpdatedPathProxy(),o=_C(iy(e),iy(n)),s=o[0],u=o[1],h=a.getComputedTransform(),v=r.getComputedTransform();function d(){this.transform=null}h&&Bx(s,h),v&&Bx(u,v),$d(r,"updateTransform",{replace:d}),r.transform=null;var m=TC(s,u,10,Math.PI),_=[];$d(r,"buildPath",{replace:function(S){for(var A=r.__morphT,L=1-A,I=[],U=0;U<m.length;U++){var et=m[U],ft=et.from,ht=et.to,Tt=et.rotation*A,Et=et.fromCp,Ct=et.toCp,It=Math.sin(Tt),zt=Math.cos(Tt);(0,Pr.t7)(I,Et,Ct,A);for(var Kt=0;Kt<ft.length;Kt+=2){var Yt=ft[Kt],ne=ft[Kt+1],oe=ht[Kt],ce=ht[Kt+1],me=Yt*L+oe*A,_e=ne*L+ce*A;_[Kt]=me*zt-_e*It+I[0],_[Kt+1]=me*It+_e*zt+I[1]}var Ce=_[0],ke=_[1];S.moveTo(Ce,ke);for(var Kt=2;Kt<ft.length;){var oe=_[Kt++],ce=_[Kt++],Oe=_[Kt++],$e=_[Kt++],yr=_[Kt++],_r=_[Kt++];Ce===oe&&ke===ce&&Oe===yr&&$e===_r?S.lineTo(yr,_r):S.bezierCurveTo(oe,ce,Oe,$e,yr,_r),Ce=yr,ke=_r}}}})}function oy(a,r,e){if(!a||!r)return r;var n=e.done,o=e.during;Fx(a,r),r.__morphT=0;function s(){sc(r,"buildPath"),sc(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},(0,g.ce)({during:function(u){r.dirtyShape(),o&&o(u)},done:function(){s(),n&&n()}},e)),r}function DC(a,r,e,n,o,s){var u=16;a=o===e?0:Math.round(32767*(a-e)/(o-e)),r=s===n?0:Math.round(32767*(r-n)/(s-n));for(var h=0,v,d=(1<<u)/2;d>0;d/=2){var m=0,_=0;(a&d)>0&&(m=1),(r&d)>0&&(_=1),h+=d*d*(3*m^_),_===0&&(m===1&&(a=d-1-a,r=d-1-r),v=a,a=r,r=v)}return h}function qd(a){var r=1/0,e=1/0,n=-1/0,o=-1/0,s=(0,g.UI)(a,function(h){var v=h.getBoundingRect(),d=h.getComputedTransform(),m=v.x+v.width/2+(d?d[4]:0),_=v.y+v.height/2+(d?d[5]:0);return r=Math.min(m,r),e=Math.min(_,e),n=Math.max(m,n),o=Math.max(_,o),[m,_]}),u=(0,g.UI)(s,function(h,v){return{cp:h,z:DC(h[0],h[1],r,e,n,o),path:a[v]}});return u.sort(function(h,v){return h.z-v.z}).map(function(h){return h.path})}function Gx(a){return mC(a.path,a.count)}function sy(){return{fromIndividuals:[],toIndividuals:[],count:0}}function wC(a,r,e){var n=[];function o(Et){for(var Ct=0;Ct<Et.length;Ct++){var It=Et[Ct];Qd(It)?o(It.childrenRef()):It instanceof yt.ZP&&n.push(It)}}o(a);var s=n.length;if(!s)return sy();var u=e.dividePath||Gx,h=u({path:r,count:s});if(h.length!==s)return console.error("Invalid morphing: unmatched splitted path"),sy();n=qd(n),h=qd(h);for(var v=e.done,d=e.during,m=e.individualDelay,_=new St.ZP,S=0;S<s;S++){var A=n[S],L=h[S];L.parent=r,L.copyTransform(_),m||Fx(A,L)}r.__isCombineMorphing=!0,r.childrenRef=function(){return h};function I(Et){for(var Ct=0;Ct<h.length;Ct++)h[Ct].addSelfToZr(Et)}$d(r,"addSelfToZr",{after:function(Et){I(Et)}}),$d(r,"removeSelfFromZr",{after:function(Et){for(var Ct=0;Ct<h.length;Ct++)h[Ct].removeSelfFromZr(Et)}});function U(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,sc(r,"addSelfToZr"),sc(r,"removeSelfFromZr")}var et=h.length;if(m)for(var ft=et,ht=function(){ft--,ft===0&&(U(),v&&v())},S=0;S<et;S++){var Tt=m?(0,g.ce)({delay:(e.delay||0)+m(S,et,n[S],h[S]),done:ht},e):e;oy(n[S],h[S],Tt)}else r.__morphT=0,r.animateTo({__morphT:1},(0,g.ce)({during:function(Et){for(var Ct=0;Ct<et;Ct++){var It=h[Ct];It.__morphT=r.__morphT,It.dirtyShape()}d&&d(Et)},done:function(){U();for(var Et=0;Et<a.length;Et++)sc(a[Et],"updateTransform");v&&v()}},e));return r.__zr&&I(r.__zr),{fromIndividuals:n,toIndividuals:h,count:et}}function AC(a,r,e){var n=r.length,o=[],s=e.dividePath||Gx;function u(A){for(var L=0;L<A.length;L++){var I=A[L];Qd(I)?u(I.childrenRef()):I instanceof yt.ZP&&o.push(I)}}if(Qd(a)){u(a.childrenRef());var h=o.length;if(h<n)for(var v=0,d=h;d<n;d++)o.push((0,Vf.U5)(o[v++%h]));o.length=n}else{o=s({path:a,count:n});for(var m=a.getComputedTransform(),d=0;d<o.length;d++)o[d].setLocalTransform(m);if(o.length!==n)return console.error("Invalid morphing: unmatched splitted path"),sy()}o=qd(o),r=qd(r);for(var _=e.individualDelay,d=0;d<n;d++){var S=_?(0,g.ce)({delay:(e.delay||0)+_(d,n,o[d],r[d])},e):e;oy(o[d],r[d],S)}return{fromIndividuals:o,toIndividuals:r,count:r.length}}function zx(a){return(0,g.kJ)(a[0])}function Vx(a,r){for(var e=[],n=a.length,o=0;o<n;o++)e.push({one:a[o],many:[]});for(var o=0;o<r.length;o++){var s=r[o].length,u=void 0;for(u=0;u<s;u++)e[u%n].many.push(r[o][u])}for(var h=0,o=n-1;o>=0;o--)if(!e[o].many.length){var v=e[h].many;if(v.length<=1)if(h)h=0;else return e;var s=v.length,d=Math.ceil(s/2);e[o].many=v.slice(d,s),e[h].many=v.slice(0,d),h++}return e}var bC={clone:function(a){for(var r=[],e=1-Math.pow(1-a.path.style.opacity,1/a.count),n=0;n<a.count;n++){var o=(0,Vf.U5)(a.path);o.setStyle("opacity",e),r.push(o)}return r},split:null};function ly(a,r,e,n,o,s){if(!a.length||!r.length)return;var u=(0,rr.ke)("update",n,o);if(!(u&&u.duration>0))return;var h=n.getModel("universalTransition").get("delay"),v=Object.assign({setToFinal:!0},u),d,m;zx(a)&&(d=a,m=r),zx(r)&&(d=r,m=a);function _(et,ft,ht,Tt,Et){var Ct=et.many,It=et.one;if(Ct.length===1&&!Et){var zt=ft?Ct[0]:It,Kt=ft?It:Ct[0];if(Qd(zt))_({many:[zt],one:Kt},!0,ht,Tt,!0);else{var Yt=h?(0,g.ce)({delay:h(ht,Tt)},v):v;oy(zt,Kt,Yt),s(zt,Kt,zt,Kt,Yt)}}else for(var ne=(0,g.ce)({dividePath:bC[e],individualDelay:h&&function(ke,Oe,$e,yr){return h(ke+ht,Tt)}},v),oe=ft?wC(Ct,It,ne):AC(It,Ct,ne),ce=oe.fromIndividuals,me=oe.toIndividuals,_e=ce.length,Ce=0;Ce<_e;Ce++){var Yt=h?(0,g.ce)({delay:h(Ce,_e)},v):v;s(ce[Ce],me[Ce],ft?Ct[Ce]:et.one,ft?et.one:Ct[Ce],Yt)}}for(var S=d?d===a:a.length>r.length,A=d?Vx(m,d):Vx(S?r:a,[S?a:r]),L=0,I=0;I<A.length;I++)L+=A[I].many.length;for(var U=0,I=0;I<A.length;I++)_(A[I],S,U,L),U+=A[I].many.length}function ql(a){if(!a)return[];if((0,g.kJ)(a)){for(var r=[],e=0;e<a.length;e++)r.push(ql(a[e]));return r}var n=[];return a.traverse(function(o){o instanceof yt.ZP&&!o.disableMorphing&&!o.invisible&&!o.ignore&&n.push(o)}),n}var kx=1e4,MC=(0,We.Yf)();function CC(a){for(var r=a.dimensions,e=0;e<r.length;e++){var n=a.getDimensionInfo(r[e]);if(n&&n.otherDims.itemGroupId===0)return r[e]}}function Ux(a){var r=[];return(0,g.S6)(a,function(e){var n=e.data;if(!(n.count()>kx))for(var o=n.getIndices(),s=CC(n),u=0;u<o.length;u++)r.push({dataGroupId:e.dataGroupId,data:n,dim:e.dim||s,divide:e.divide,dataIndex:u})}),r}function uy(a,r,e){a.traverse(function(n){n instanceof yt.ZP&&(0,rr.KZ)(n,{style:{opacity:0}},r,{dataIndex:e,isFrom:!0})})}function fy(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function Sf(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function EC(a,r,e){var n=(0,rr.ke)("update",e,r);n&&a.traverse(function(o){if(o instanceof Ia.ZP){var s=(0,rr._W)(o);s&&o.animateFrom({style:s},n)}})}function PC(a,r){var e=a.length;if(e!==r.length)return!1;for(var n=0;n<e;n++){var o=a[n],s=r[n];if(o.data.getId(o.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function Zx(a,r,e){var n=Ux(a),o=Ux(r);function s(et,ft,ht,Tt,Et){(ht||et)&&ft.animateFrom({style:ht&&ht!==et?(0,g.l7)((0,g.l7)({},ht.style),et.style):et.style},Et)}function u(et){for(var ft=0;ft<et.length;ft++)if(et[ft].dim)return et[ft].dim}var h=u(n),v=u(o),d=!1;function m(et,ft){return function(ht){var Tt=ht.data,Et=ht.dataIndex;if(ft)return Tt.getId(Et);var Ct=ht.dataGroupId,It=et?h||v:v||h,zt=It&&Tt.getDimensionInfo(It),Kt=zt&&zt.ordinalMeta;if(zt){var Yt=Tt.get(zt.name,Et);return Kt&&Kt.categories[Yt]||Yt+""}var ne=Tt.getRawDataItem(Et);return ne&&ne.groupId?ne.groupId+"":Ct||Tt.getId(Et)}}var _=PC(n,o),S={};if(!_)for(var A=0;A<o.length;A++){var L=o[A],I=L.data.getItemGraphicEl(L.dataIndex);I&&(S[I.id]=!0)}function U(et,ft){var ht=n[ft],Tt=o[et],Et=Tt.data.hostModel,Ct=ht.data.getItemGraphicEl(ht.dataIndex),It=Tt.data.getItemGraphicEl(Tt.dataIndex);if(Ct===It){It&&EC(It,Tt.dataIndex,Et);return}Ct&&S[Ct.id]||It&&(Sf(It),Ct?(Sf(Ct),fy(Ct),d=!0,ly(ql(Ct),ql(It),Tt.divide,Et,et,s)):uy(It,Et,et))}new yo.Z(n,o,m(!0,_),m(!1,_),null,"multiple").update(U).updateManyToOne(function(et,ft){var ht=o[et],Tt=ht.data,Et=Tt.hostModel,Ct=Tt.getItemGraphicEl(ht.dataIndex),It=(0,g.hX)((0,g.UI)(ft,function(zt){return n[zt].data.getItemGraphicEl(n[zt].dataIndex)}),function(zt){return zt&&zt!==Ct&&!S[zt.id]});Ct&&(Sf(Ct),It.length?((0,g.S6)(It,function(zt){Sf(zt),fy(zt)}),d=!0,ly(ql(It),ql(Ct),ht.divide,Et,et,s)):uy(Ct,Et,ht.dataIndex))}).updateOneToMany(function(et,ft){var ht=n[ft],Tt=ht.data.getItemGraphicEl(ht.dataIndex);if(!(Tt&&S[Tt.id])){var Et=(0,g.hX)((0,g.UI)(et,function(It){return o[It].data.getItemGraphicEl(o[It].dataIndex)}),function(It){return It&&It!==Tt}),Ct=o[et[0]].data.hostModel;Et.length&&((0,g.S6)(Et,function(It){return Sf(It)}),Tt?(Sf(Tt),fy(Tt),d=!0,ly(ql(Tt),ql(Et),ht.divide,Ct,et[0],s)):(0,g.S6)(Et,function(It){return uy(It,Ct,et[0])}))}}).updateManyToMany(function(et,ft){new yo.Z(ft,et,function(ht){return n[ht].data.getId(n[ht].dataIndex)},function(ht){return o[ht].data.getId(o[ht].dataIndex)}).update(function(ht,Tt){U(et[ht],ft[Tt])}).execute()}).execute(),d&&(0,g.S6)(r,function(et){var ft=et.data,ht=ft.hostModel,Tt=ht&&e.getViewOfSeriesModel(ht),Et=(0,rr.ke)("update",ht,0);Tt&&ht.isAnimationEnabled()&&Et&&Et.duration>0&&Tt.group.traverse(function(Ct){Ct instanceof yt.ZP&&!Ct.animators.length&&Ct.animateFrom({style:{opacity:0}},Et)})})}function Wx(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function Hx(a){return(0,g.kJ)(a)?a.sort().join(","):a}function al(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function LC(a,r){var e=(0,g.kW)(),n=(0,g.kW)(),o=(0,g.kW)();(0,g.S6)(a.oldSeries,function(u,h){var v=a.oldDataGroupIds[h],d=a.oldData[h],m=Wx(u),_=Hx(m);n.set(_,{dataGroupId:v,data:d}),(0,g.kJ)(m)&&(0,g.S6)(m,function(S){o.set(S,{key:_,dataGroupId:v,data:d})})});function s(u){e.get(u)&&(0,Zr.ZK)("Duplicated seriesKey in universalTransition "+u)}return(0,g.S6)(r.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var h=u.get("dataGroupId"),v=u.getData(),d=Wx(u),m=Hx(d),_=n.get(m);if(_)e.set(m,{oldSeries:[{dataGroupId:_.dataGroupId,divide:al(_.data),data:_.data}],newSeries:[{dataGroupId:h,divide:al(v),data:v}]});else if((0,g.kJ)(d)){var S=[];(0,g.S6)(d,function(I){var U=n.get(I);U.data&&S.push({dataGroupId:U.dataGroupId,divide:al(U.data),data:U.data})}),S.length&&e.set(m,{oldSeries:S,newSeries:[{dataGroupId:h,data:v,divide:al(v)}]})}else{var A=o.get(d);if(A){var L=e.get(A.key);L||(L={oldSeries:[{dataGroupId:A.dataGroupId,data:A.data,divide:al(A.data)}],newSeries:[]},e.set(A.key,L)),L.newSeries.push({dataGroupId:h,data:v,divide:al(v)})}}}}),e}function Xx(a,r){for(var e=0;e<a.length;e++){var n=r.seriesIndex!=null&&r.seriesIndex===a[e].seriesIndex||r.seriesId!=null&&r.seriesId===a[e].id;if(n)return e}}function IC(a,r,e,n){var o=[],s=[];(0,g.S6)((0,We.kF)(a.from),function(u){var h=Xx(r.oldSeries,u);h>=0&&o.push({dataGroupId:r.oldDataGroupIds[h],data:r.oldData[h],divide:al(r.oldData[h]),dim:u.dimension})}),(0,g.S6)((0,We.kF)(a.to),function(u){var h=Xx(e.updatedSeries,u);if(h>=0){var v=e.updatedSeries[h].getData();s.push({dataGroupId:r.oldDataGroupIds[h],data:v,divide:al(v),dim:u.dimension})}}),o.length>0&&s.length>0&&Zx(o,s,n)}function RC(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,e,n){(0,g.S6)((0,We.kF)(n.seriesTransition),function(o){(0,g.S6)((0,We.kF)(o.to),function(s){for(var u=n.updatedSeries,h=0;h<u.length;h++)(s.seriesIndex!=null&&s.seriesIndex===u[h].seriesIndex||s.seriesId!=null&&s.seriesId===u[h].id)&&(u[h][yn.V]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,e,n){var o=MC(e);if(o.oldSeries&&n.updatedSeries&&n.optionChanged){var s=n.seriesTransition;if(s)(0,g.S6)((0,We.kF)(s),function(A){IC(A,o,n,e)});else{var u=LC(o,n);(0,g.S6)(u.keys(),function(A){var L=u.get(A);Zx(L.oldSeries,L.newSeries,e)})}(0,g.S6)(n.updatedSeries,function(A){A[yn.V]&&(A[yn.V]=!1)})}for(var h=r.getSeries(),v=o.oldSeries=[],d=o.oldDataGroupIds=[],m=o.oldData=[],_=0;_<h.length;_++){var S=h[_].getData();S.count()<kx&&(v.push(h[_]),d.push(h[_].get("dataGroupId")),m.push(S))}})}var OC=z(31840);(0,F.D)([q.N]),(0,F.D)([Nr]),(0,F.D)([Ea,La,wn,Vi,Bp,tg,vg,va,Wg,Mh,Eh,F0,ue,Wn,lS,pS,OS,WS,nT,hT,AT,h2]),(0,F.D)(O2),(0,F.D)(pD),(0,F.D)(Iu),(0,F.D)(RD),(0,F.D)(Dd),(0,F.D)(VD),(0,F.D)(jD),(0,F.D)($w),(0,F.D)(TA),(0,F.D)(Qh),(0,F.D)(UA),(0,F.D)(HA),(0,F.D)(lb),(0,F.D)(yb),(0,F.D)(bb),(0,F.D)(Ob),(0,F.D)(Yb),(0,F.D)(gM),(0,F.D)(ex),(0,F.D)(ax),(0,F.D)(ZM),(0,F.D)(Sx),(0,F.D)(Dx),(0,F.D)(YM),(0,F.D)(sC),(0,F.D)(lC.N),(0,F.D)(RC),(0,F.D)(OC.T)},25400:function(Pe,ee,z){z.d(ee,{D:function(){return gt},KZ:function(){return xt},XD:function(){return ot},Zi:function(){return W},_W:function(){return Y},bX:function(){return Z},eq:function(){return nt},ke:function(){return vt}});var F=z(70324),dt=z(21611),q=(0,dt.Yf)();function vt(H,st,J,g,Q){var j;if(st&&st.ecModel){var O=st.ecModel.getUpdatePayload();j=O&&O.animation}var X=st&&st.isAnimationEnabled(),K=H==="update";if(X){var G=void 0,k=void 0,R=void 0;g?(G=(0,F.pD)(g.duration,200),k=(0,F.pD)(g.easing,"cubicOut"),R=0):(G=st.getShallow(K?"animationDurationUpdate":"animationDuration"),k=st.getShallow(K?"animationEasingUpdate":"animationEasing"),R=st.getShallow(K?"animationDelayUpdate":"animationDelay")),j&&(j.duration!=null&&(G=j.duration),j.easing!=null&&(k=j.easing),j.delay!=null&&(R=j.delay)),(0,F.mf)(R)&&(R=R(J,Q)),(0,F.mf)(G)&&(G=G(J));var T={duration:G||0,delay:R,easing:k};return T}else return null}function yt(H,st,J,g,Q,j,O){var X=!1,K;(0,F.mf)(Q)?(O=j,j=Q,Q=null):(0,F.Kn)(Q)&&(j=Q.cb,O=Q.during,X=Q.isFrom,K=Q.removeOpt,Q=Q.dataIndex);var G=H==="leave";G||st.stopAnimation("leave");var k=vt(H,g,Q,G?K||{}:null,g&&g.getAnimationDelayParams?g.getAnimationDelayParams(st,Q):null);if(k&&k.duration>0){var R=k.duration,T=k.delay,P=k.easing,M={duration:R,delay:T||0,easing:P,done:j,force:!!j||!!O,setToFinal:!G,scope:H,during:O};X?st.animateFrom(J,M):st.animateTo(J,M)}else st.stopAnimation(),!X&&st.attr(J),O&&O(1),j&&j()}function gt(H,st,J,g,Q,j){yt("update",H,st,J,g,Q,j)}function xt(H,st,J,g,Q,j){yt("enter",H,st,J,g,Q,j)}function nt(H){if(!H.__zr)return!0;for(var st=0;st<H.animators.length;st++){var J=H.animators[st];if(J.scope==="leave")return!0}return!1}function Z(H,st,J,g,Q,j){nt(H)||yt("leave",H,st,J,g,Q,j)}function tt(H,st,J,g){H.removeTextContent(),H.removeTextGuideLine(),Z(H,{style:{opacity:0}},st,J,g)}function ot(H,st,J){function g(){H.parent&&H.parent.remove(H)}H.isGroup?H.traverse(function(Q){Q.isGroup||tt(Q,st,J,g)}):tt(H,st,J,g)}function W(H){q(H).oldStyle=H.style}function Y(H){return q(H).oldStyle}},22004:function(Pe,ee,z){z.d(ee,{Z:function(){return dt}});var F=z(21611);function dt(){var q=(0,F.Yf)();return function(vt){var yt=q(vt),gt=vt.pipelineContext,xt=!!yt.large,nt=!!yt.progressiveRender,Z=yt.large=!!(gt&&gt.large),tt=yt.progressiveRender=!!(gt&&gt.progressiveRender);return(xt!==Z||nt!==tt)&&"reset"}}},12526:function(Pe,ee,z){z.d(ee,{Z:function(){return O}});var F=z(70324),dt=z(56152),q=z(22253),vt=z(51535),yt=z(21611),gt=z(20666),xt=function(){function X(K){this.coordSysDims=[],this.axisMap=(0,F.kW)(),this.categoryAxisMap=(0,F.kW)(),this.coordSysName=K}return X}();function nt(X){var K=X.get("coordinateSystem"),G=new xt(K),k=Z[K];if(k)return k(X,G,G.axisMap,G.categoryAxisMap),G}var Z={cartesian2d:function(X,K,G,k){var R=X.getReferringComponents("xAxis",yt.C6).models[0],T=X.getReferringComponents("yAxis",yt.C6).models[0];K.coordSysDims=["x","y"],G.set("x",R),G.set("y",T),tt(R)&&(k.set("x",R),K.firstCategoryDimIndex=0),tt(T)&&(k.set("y",T),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=1))},singleAxis:function(X,K,G,k){var R=X.getReferringComponents("singleAxis",yt.C6).models[0];K.coordSysDims=["single"],G.set("single",R),tt(R)&&(k.set("single",R),K.firstCategoryDimIndex=0)},polar:function(X,K,G,k){var R=X.getReferringComponents("polar",yt.C6).models[0],T=R.findAxisModel("radiusAxis"),P=R.findAxisModel("angleAxis");K.coordSysDims=["radius","angle"],G.set("radius",T),G.set("angle",P),tt(T)&&(k.set("radius",T),K.firstCategoryDimIndex=0),tt(P)&&(k.set("angle",P),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=1))},geo:function(X,K,G,k){K.coordSysDims=["lng","lat"]},parallel:function(X,K,G,k){var R=X.ecModel,T=R.getComponent("parallel",X.get("parallelIndex")),P=K.coordSysDims=T.dimensions.slice();(0,F.S6)(T.parallelAxisIndex,function(M,b){var w=R.getComponent("parallelAxis",M),C=P[b];G.set(C,w),tt(w)&&(k.set(C,w),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=b))})}};function tt(X){return X.get("type")==="category"}var ot=z(79518),W=z(28391),Y=z(459),H=z(27674);function st(X,K){var G=X.get("coordinateSystem"),k=gt.Z.get(G),R;return K&&K.coordSysDims&&(R=F.UI(K.coordSysDims,function(T){var P={name:T},M=K.axisMap.get(T);if(M){var b=M.get("type");P.type=(0,vt.T)(b)}return P})),R||(R=k&&(k.getDimensionsInfo?k.getDimensionsInfo():k.dimensions.slice())||["x","y"]),R}function J(X,K,G){var k,R;return G&&F.S6(X,function(T,P){var M=T.coordDim,b=G.categoryAxisMap.get(M);b&&(k==null&&(k=P),T.ordinalMeta=b.getOrdinalMeta(),K&&(T.createInvertedIndices=!0)),T.otherDims.itemName!=null&&(R=!0)}),!R&&k!=null&&(X[k].otherDims.itemName=0),k}function g(X,K,G){G=G||{};var k=K.getSourceManager(),R,T=!1;X?(T=!0,R=(0,ot.nx)(X)):(R=k.getSource(),T=R.sourceFormat===H.cy);var P=nt(K),M=st(K,P),b=G.useEncodeDefaulter,w=F.mf(b)?b:b?F.WA(Y.pY,M,K):null,C={coordDimensions:M,generateCoord:G.generateCoord,encodeDefine:K.getEncode(),encodeDefaulter:w,canOmitUnusedDimensions:!T},V=(0,q.Z)(R,C),B=J(V.dimensions,G.createInvertedIndices,P),ut=T?null:k.getSharedDataStore(V),it=(0,W.BM)(K,{schema:V,store:ut}),lt=new dt.Z(V,K);lt.setCalculationInfo(it);var rt=B!=null&&Q(R)?function(ct,St,at,mt){return mt===B?at:this.defaultDimValueGetter(ct,St,at,mt)}:null;return lt.hasItemOption=!1,lt.initData(T?R:ut,null,rt),lt}function Q(X){if(X.sourceFormat===H.cy){var K=j(X.data||[]);return!F.kJ((0,yt.C4)(K))}}function j(X){for(var K=0;K<X.length&&X[K]==null;)K++;return X[K]}var O=g},35913:function(Pe,ee,z){z.d(ee,{N:function(){return nt}});var F=z(12012),dt=z(47497),q=z(70296),vt=z(27674),yt=z(75818),gt=function(Z){(0,F.ZT)(tt,Z);function tt(){var ot=Z!==null&&Z.apply(this,arguments)||this;return ot.type="dataset",ot}return tt.prototype.init=function(ot,W,Y){Z.prototype.init.call(this,ot,W,Y),this._sourceManager=new yt.U(this),(0,yt.t)(this)},tt.prototype.mergeOption=function(ot,W){Z.prototype.mergeOption.call(this,ot,W),(0,yt.t)(this)},tt.prototype.optionUpdated=function(){this._sourceManager.dirty()},tt.prototype.getSourceManager=function(){return this._sourceManager},tt.type="dataset",tt.defaultOption={seriesLayoutBy:vt.fY},tt}(dt.Z),xt=function(Z){(0,F.ZT)(tt,Z);function tt(){var ot=Z!==null&&Z.apply(this,arguments)||this;return ot.type="dataset",ot}return tt.type="dataset",tt}(q.Z);function nt(Z){Z.registerComponentModel(gt),Z.registerComponentView(xt)}},88990:function(Pe,ee,z){z.d(ee,{w:function(){return yt}});var F=z(70324),dt=z(40912),q=z(92502),vt=z(21611);function yt(xt){var nt=xt.series,Z=xt.dataIndex,tt=xt.multipleSeries,ot=nt.getData(),W=ot.mapDimensionsAll("defaultedTooltip"),Y=W.length,H=nt.getRawValue(Z),st=(0,F.kJ)(H),J=(0,dt.jT)(nt,Z),g,Q,j,O;if(Y>1||st&&!Y){var X=gt(H,nt,Z,W,J);g=X.inlineValues,Q=X.inlineValueTypes,j=X.blocks,O=X.inlineValues[0]}else if(Y){var K=ot.getDimensionInfo(W[0]);O=g=(0,q.hk)(ot,Z,W[0]),Q=K.type}else O=g=st?H[0]:H;var G=(0,vt.yu)(nt),k=G&&nt.name||"",R=ot.getName(Z),T=tt?k:R;return(0,dt.TX)("section",{header:k,noHeader:tt||!G,sortParam:O,blocks:[(0,dt.TX)("nameValue",{markerType:"item",markerColor:J,name:T,noName:!(0,F.fy)(T),value:g,valueType:Q})].concat(j||[])})}function gt(xt,nt,Z,tt,ot){var W=nt.getData(),Y=(0,F.u4)(xt,function(Q,j,O){var X=W.getDimensionInfo(O);return Q=Q||X&&X.tooltip!==!1&&X.displayName!=null},!1),H=[],st=[],J=[];tt.length?(0,F.S6)(tt,function(Q){g((0,q.hk)(W,Z,Q),Q)}):(0,F.S6)(xt,g);function g(Q,j){var O=W.getDimensionInfo(j);!O||O.otherDims.tooltip===!1||(Y?J.push((0,dt.TX)("nameValue",{markerType:"subItem",markerColor:ot,name:O.displayName,value:Q,valueType:O.type})):(H.push(Q),st.push(O.type)))}return{inlineValues:H,inlineValueTypes:st,blocks:J}}},40912:function(Pe,ee,z){z.d(ee,{BY:function(){return J},TX:function(){return tt},d_:function(){return k},iv:function(){return R},jT:function(){return G}});var F=z(80400),dt=z(20283),q=z(70324),vt=z(43422),yt=z(97414),gt="line-height:1";function xt(T,P){var M=T.color||"#6e7079",b=T.fontSize||12,w=T.fontWeight||"400",C=T.color||"#464646",V=T.fontSize||14,B=T.fontWeight||"900";return P==="html"?{nameStyle:"font-size:"+(0,F.F1)(b+"")+"px;color:"+(0,F.F1)(M)+";font-weight:"+(0,F.F1)(w+""),valueStyle:"font-size:"+(0,F.F1)(V+"")+"px;color:"+(0,F.F1)(C)+";font-weight:"+(0,F.F1)(B+"")}:{nameStyle:{fontSize:b,fill:M,fontWeight:w},valueStyle:{fontSize:V,fill:C,fontWeight:B}}}var nt=[0,10,20,30],Z=["",`
`,`

`,`


`];function tt(T,P){return P.type=T,P}function ot(T){return T.type==="section"}function W(T){return ot(T)?H:st}function Y(T){if(ot(T)){var P=0,M=T.blocks.length,b=M>1||M>0&&!T.noHeader;return(0,q.S6)(T.blocks,function(w){var C=Y(w);C>=P&&(P=C+ +(b&&(!C||ot(w)&&!w.noHeader)))}),P}return 0}function H(T,P,M,b){var w=P.noHeader,C=g(Y(P)),V=[],B=P.blocks||[];(0,q.hu)(!B||(0,q.kJ)(B)),B=B||[];var ut=T.orderMode;if(P.sortBlocks&&ut){B=B.slice();var it={valueAsc:"asc",valueDesc:"desc"};if((0,q.RI)(it,ut)){var lt=new vt.ID(it[ut],null);B.sort(function(at,mt){return lt.evaluate(at.sortParam,mt.sortParam)})}else ut==="seriesDesc"&&B.reverse()}(0,q.S6)(B,function(at,mt){var Dt=P.valueFormatter,wt=W(at)(Dt?(0,q.l7)((0,q.l7)({},T),{valueFormatter:Dt}):T,at,mt>0?C.html:0,b);wt!=null&&V.push(wt)});var rt=T.renderMode==="richText"?V.join(C.richText):Q(V.join(""),w?M:C.html);if(w)return rt;var ct=(0,dt.uX)(P.header,"ordinal",T.useUTC),St=xt(b,T.renderMode).nameStyle;return T.renderMode==="richText"?X(T,ct,St)+C.richText+rt:Q('<div style="'+St+";"+gt+';">'+(0,F.F1)(ct)+"</div>"+rt,M)}function st(T,P,M,b){var w=T.renderMode,C=P.noName,V=P.noValue,B=!P.markerType,ut=P.name,it=T.useUTC,lt=P.valueFormatter||T.valueFormatter||function(Ot){return Ot=(0,q.kJ)(Ot)?Ot:[Ot],(0,q.UI)(Ot,function(Bt,Ht){return(0,dt.uX)(Bt,(0,q.kJ)(St)?St[Ht]:St,it)})};if(!(C&&V)){var rt=B?"":T.markupStyleCreator.makeTooltipMarker(P.markerType,P.markerColor||"#333",w),ct=C?"":(0,dt.uX)(ut,"ordinal",it),St=P.valueType,at=V?[]:lt(P.value),mt=!B||!C,Dt=!B&&C,wt=xt(b,w),Pt=wt.nameStyle,bt=wt.valueStyle;return w==="richText"?(B?"":rt)+(C?"":X(T,ct,Pt))+(V?"":K(T,at,mt,Dt,bt)):Q((B?"":rt)+(C?"":j(ct,!B,Pt))+(V?"":O(at,mt,Dt,bt)),M)}}function J(T,P,M,b,w,C){if(T){var V=W(T),B={useUTC:w,renderMode:M,orderMode:b,markupStyleCreator:P,valueFormatter:T.valueFormatter};return V(B,T,0,C)}}function g(T){return{html:nt[T],richText:Z[T]}}function Q(T,P){var M='<div style="clear:both"></div>',b="margin: "+P+"px 0 0";return'<div style="'+b+";"+gt+';">'+T+M+"</div>"}function j(T,P,M){var b=P?"margin-left:2px":"";return'<span style="'+M+";"+b+'">'+(0,F.F1)(T)+"</span>"}function O(T,P,M,b){var w=M?"10px":"20px",C=P?"float:right;margin-left:"+w:"";return T=(0,q.kJ)(T)?T:[T],'<span style="'+C+";"+b+'">'+(0,q.UI)(T,function(V){return(0,F.F1)(V)}).join("&nbsp;&nbsp;")+"</span>"}function X(T,P,M){return T.markupStyleCreator.wrapRichTextStyle(P,M)}function K(T,P,M,b,w){var C=[w],V=b?10:20;return M&&C.push({padding:[0,0,0,V],align:"right"}),T.markupStyleCreator.wrapRichTextStyle((0,q.kJ)(P)?P.join("  "):P,C)}function G(T,P){var M=T.getData().getItemVisual(P,"style"),b=M[T.visualDrawType];return(0,dt.Lz)(b)}function k(T,P){var M=T.get("padding");return M!=null?M:P==="richText"?[8,10]:10}var R=function(){function T(){this.richTextStyles={},this._nextStyleNameId=(0,yt.jj)()}return T.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},T.prototype.makeTooltipMarker=function(P,M,b){var w=b==="richText"?this._generateStyleName():null,C=(0,dt.A0)({color:M,type:P,renderMode:b,markerId:w});return(0,q.HD)(C)?C:(this.richTextStyles[w]=C.style,C.content)},T.prototype.wrapRichTextStyle=function(P,M){var b={};(0,q.kJ)(M)?(0,q.S6)(M,function(C){return(0,q.l7)(b,C)}):(0,q.l7)(b,M);var w=this._generateStyleName();return this.richTextStyles[w]=b,"{"+w+"|"+P+"}"},T}()},26992:function(Pe,ee,z){z.d(ee,{Z:function(){return R}});var F=z(70324),dt=z(97414),q=z(98733),vt=z(21611),yt=z(33871),gt=(0,vt.Yf)();function xt(T){return T.type==="category"?Z(T):W(T)}function nt(T,P){return T.type==="category"?ot(T,P):{ticks:F.UI(T.scale.getTicks(),function(M){return M.value})}}function Z(T){var P=T.getLabelModel(),M=tt(T,P);return!P.get("show")||T.scale.isBlank()?{labels:[],labelCategoryInterval:M.labelCategoryInterval}:M}function tt(T,P){var M=Y(T,"labels"),b=(0,yt.rk)(P),w=H(M,b);if(w)return w;var C,V;return F.mf(b)?C=O(T,b):(V=b==="auto"?J(T):b,C=j(T,V)),st(M,b,{labels:C,labelCategoryInterval:V})}function ot(T,P){var M=Y(T,"ticks"),b=(0,yt.rk)(P),w=H(M,b);if(w)return w;var C,V;if((!P.get("show")||T.scale.isBlank())&&(C=[]),F.mf(b))C=O(T,b,!0);else if(b==="auto"){var B=tt(T,T.getLabelModel());V=B.labelCategoryInterval,C=F.UI(B.labels,function(ut){return ut.tickValue})}else V=b,C=j(T,V,!0);return st(M,b,{ticks:C,tickCategoryInterval:V})}function W(T){var P=T.scale.getTicks(),M=(0,yt.J9)(T);return{labels:F.UI(P,function(b,w){return{level:b.level,formattedLabel:M(b,w),rawLabel:T.scale.getLabel(b),tickValue:b.value}})}}function Y(T,P){return gt(T)[P]||(gt(T)[P]=[])}function H(T,P){for(var M=0;M<T.length;M++)if(T[M].key===P)return T[M].value}function st(T,P,M){return T.push({key:P,value:M}),M}function J(T){var P=gt(T).autoInterval;return P!=null?P:gt(T).autoInterval=T.calculateCategoryInterval()}function g(T){var P=Q(T),M=(0,yt.J9)(T),b=(P.axisRotate-P.labelRotate)/180*Math.PI,w=T.scale,C=w.getExtent(),V=w.count();if(C[1]-C[0]<1)return 0;var B=1;V>40&&(B=Math.max(1,Math.floor(V/40)));for(var ut=C[0],it=T.dataToCoord(ut+1)-T.dataToCoord(ut),lt=Math.abs(it*Math.cos(b)),rt=Math.abs(it*Math.sin(b)),ct=0,St=0;ut<=C[1];ut+=B){var at=0,mt=0,Dt=q.lP(M({value:ut}),P.font,"center","top");at=Dt.width*1.3,mt=Dt.height*1.3,ct=Math.max(ct,at,7),St=Math.max(St,mt,7)}var wt=ct/lt,Pt=St/rt;isNaN(wt)&&(wt=1/0),isNaN(Pt)&&(Pt=1/0);var bt=Math.max(0,Math.floor(Math.min(wt,Pt))),Ot=gt(T.model),Bt=T.getExtent(),Ht=Ot.lastAutoInterval,Qt=Ot.lastTickCount;return Ht!=null&&Qt!=null&&Math.abs(Ht-bt)<=1&&Math.abs(Qt-V)<=1&&Ht>bt&&Ot.axisExtent0===Bt[0]&&Ot.axisExtent1===Bt[1]?bt=Ht:(Ot.lastTickCount=V,Ot.lastAutoInterval=bt,Ot.axisExtent0=Bt[0],Ot.axisExtent1=Bt[1]),bt}function Q(T){var P=T.getLabelModel();return{axisRotate:T.getRotate?T.getRotate():T.isHorizontal&&!T.isHorizontal()?90:0,labelRotate:P.get("rotate")||0,font:P.getFont()}}function j(T,P,M){var b=(0,yt.J9)(T),w=T.scale,C=w.getExtent(),V=T.getLabelModel(),B=[],ut=Math.max((P||0)+1,1),it=C[0],lt=w.count();it!==0&&ut>1&&lt/ut>2&&(it=Math.round(Math.ceil(it/ut)*ut));var rt=(0,yt.WY)(T),ct=V.get("showMinLabel")||rt,St=V.get("showMaxLabel")||rt;ct&&it!==C[0]&&mt(C[0]);for(var at=it;at<=C[1];at+=ut)mt(at);St&&at-ut!==C[1]&&mt(C[1]);function mt(Dt){var wt={value:Dt};B.push(M?Dt:{formattedLabel:b(wt),rawLabel:w.getLabel(wt),tickValue:Dt})}return B}function O(T,P,M){var b=T.scale,w=(0,yt.J9)(T),C=[];return F.S6(b.getTicks(),function(V){var B=b.getLabel(V),ut=V.value;P(V.value,B)&&C.push(M?ut:{formattedLabel:w(V),rawLabel:B,tickValue:ut})}),C}var X=[0,1],K=function(){function T(P,M,b){this.onBand=!1,this.inverse=!1,this.dim=P,this.scale=M,this._extent=b||[0,0]}return T.prototype.contain=function(P){var M=this._extent,b=Math.min(M[0],M[1]),w=Math.max(M[0],M[1]);return P>=b&&P<=w},T.prototype.containData=function(P){return this.scale.contain(P)},T.prototype.getExtent=function(){return this._extent.slice()},T.prototype.getPixelPrecision=function(P){return(0,dt.M9)(P||this.scale.getExtent(),this._extent)},T.prototype.setExtent=function(P,M){var b=this._extent;b[0]=P,b[1]=M},T.prototype.dataToCoord=function(P,M){var b=this._extent,w=this.scale;return P=w.normalize(P),this.onBand&&w.type==="ordinal"&&(b=b.slice(),G(b,w.count())),(0,dt.NU)(P,X,b,M)},T.prototype.coordToData=function(P,M){var b=this._extent,w=this.scale;this.onBand&&w.type==="ordinal"&&(b=b.slice(),G(b,w.count()));var C=(0,dt.NU)(P,b,X,M);return this.scale.scale(C)},T.prototype.pointToData=function(P,M){},T.prototype.getTicksCoords=function(P){P=P||{};var M=P.tickModel||this.getTickModel(),b=nt(this,M),w=b.ticks,C=(0,F.UI)(w,function(B){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(B):B),tickValue:B}},this),V=M.get("alignWithLabel");return k(this,C,V,P.clamp),C},T.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var P=this.model.getModel("minorTick"),M=P.get("splitNumber");M>0&&M<100||(M=5);var b=this.scale.getMinorTicks(M),w=(0,F.UI)(b,function(C){return(0,F.UI)(C,function(V){return{coord:this.dataToCoord(V),tickValue:V}},this)},this);return w},T.prototype.getViewLabels=function(){return xt(this).labels},T.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},T.prototype.getTickModel=function(){return this.model.getModel("axisTick")},T.prototype.getBandWidth=function(){var P=this._extent,M=this.scale.getExtent(),b=M[1]-M[0]+(this.onBand?1:0);b===0&&(b=1);var w=Math.abs(P[1]-P[0]);return Math.abs(w)/b},T.prototype.calculateCategoryInterval=function(){return g(this)},T}();function G(T,P){var M=T[1]-T[0],b=P,w=M/b/2;T[0]+=w,T[1]-=w}function k(T,P,M,b){var w=P.length;if(!T.onBand||M||!w)return;var C=T.getExtent(),V,B;if(w===1)P[0].coord=C[0],V=P[1]={coord:C[0]};else{var ut=P[w-1].tickValue-P[0].tickValue,it=(P[w-1].coord-P[0].coord)/ut;(0,F.S6)(P,function(St){St.coord-=it/2});var lt=T.scale.getExtent();B=1+lt[1]-P[w-1].tickValue,V={coord:P[w-1].coord+it*B},P.push(V)}var rt=C[0]>C[1];ct(P[0].coord,C[0])&&(b?P[0].coord=C[0]:P.shift()),b&&ct(C[0],P[0].coord)&&P.unshift({coord:C[0]}),ct(C[1],V.coord)&&(b?V.coord=C[1]:P.pop()),b&&ct(V.coord,C[1])&&P.push({coord:C[1]});function ct(St,at){return St=(0,dt.NM)(St),at=(0,dt.NM)(at),rt?St>at:St<at}}var R=K},33871:function(Pe,ee,z){z.d(ee,{aG:function(){return P},Do:function(){return C},DX:function(){return w},PY:function(){return it},rk:function(){return B},Xv:function(){return k},Yb:function(){return M},J9:function(){return b},Jk:function(){return T},WY:function(){return ut},AH:function(){return lt}});var F=z(70324),dt=z(64907),q=z(8835),vt=z(12763),yt=z(93784),gt=z(16128),xt=z(29154),nt=z(12012),Z=z(97414),tt=z(46726),ot=vt.Z.prototype,W=q.Z.prototype,Y=Z.NM,H=Math.floor,st=Math.ceil,J=Math.pow,g=Math.log,Q=function(rt){(0,nt.ZT)(ct,rt);function ct(){var St=rt!==null&&rt.apply(this,arguments)||this;return St.type="log",St.base=10,St._originalScale=new q.Z,St._interval=0,St}return ct.prototype.getTicks=function(St){var at=this._originalScale,mt=this._extent,Dt=at.getExtent(),wt=W.getTicks.call(this,St);return F.UI(wt,function(Pt){var bt=Pt.value,Ot=Z.NM(J(this.base,bt));return Ot=bt===mt[0]&&this._fixMin?O(Ot,Dt[0]):Ot,Ot=bt===mt[1]&&this._fixMax?O(Ot,Dt[1]):Ot,{value:Ot}},this)},ct.prototype.setExtent=function(St,at){var mt=g(this.base);St=g(Math.max(0,St))/mt,at=g(Math.max(0,at))/mt,W.setExtent.call(this,St,at)},ct.prototype.getExtent=function(){var St=this.base,at=ot.getExtent.call(this);at[0]=J(St,at[0]),at[1]=J(St,at[1]);var mt=this._originalScale,Dt=mt.getExtent();return this._fixMin&&(at[0]=O(at[0],Dt[0])),this._fixMax&&(at[1]=O(at[1],Dt[1])),at},ct.prototype.unionExtent=function(St){this._originalScale.unionExtent(St);var at=this.base;St[0]=g(St[0])/g(at),St[1]=g(St[1])/g(at),ot.unionExtent.call(this,St)},ct.prototype.unionExtentFromData=function(St,at){this.unionExtent(St.getApproximateExtent(at))},ct.prototype.calcNiceTicks=function(St){St=St||10;var at=this._extent,mt=at[1]-at[0];if(!(mt===1/0||mt<=0)){var Dt=Z.Xd(mt),wt=St/mt*Dt;for(wt<=.5&&(Dt*=10);!isNaN(Dt)&&Math.abs(Dt)<1&&Math.abs(Dt)>0;)Dt*=10;var Pt=[Z.NM(st(at[0]/Dt)*Dt),Z.NM(H(at[1]/Dt)*Dt)];this._interval=Dt,this._niceExtent=Pt}},ct.prototype.calcNiceExtent=function(St){W.calcNiceExtent.call(this,St),this._fixMin=St.fixMin,this._fixMax=St.fixMax},ct.prototype.parse=function(St){return St},ct.prototype.contain=function(St){return St=g(St)/g(this.base),tt.XS(St,this._extent)},ct.prototype.normalize=function(St){return St=g(St)/g(this.base),tt.Fv(St,this._extent)},ct.prototype.scale=function(St){return St=tt.bA(St,this._extent),J(this.base,St)},ct.type="log",ct}(vt.Z),j=Q.prototype;j.getMinorTicks=W.getMinorTicks,j.getLabel=W.getLabel;function O(rt,ct){return Y(rt,Z.p8(ct))}vt.Z.registerClass(Q);var X=Q,K=z(28391),G=z(67060);function k(rt,ct){var St=rt.type,at=(0,G.Qw)(rt,ct,rt.getExtent()).calculate();rt.setBlank(at.isBlank);var mt=at.min,Dt=at.max,wt=ct.ecModel;if(wt&&St==="time"){var Pt=(0,yt.Ge)("bar",wt),bt=!1;if(F.S6(Pt,function(Ht){bt=bt||Ht.getBaseAxis()===ct.axis}),bt){var Ot=(0,yt.My)(Pt),Bt=R(mt,Dt,ct,Ot);mt=Bt.min,Dt=Bt.max}}return{extent:[mt,Dt],fixMin:at.minFixed,fixMax:at.maxFixed}}function R(rt,ct,St,at){var mt=St.axis.getExtent(),Dt=mt[1]-mt[0],wt=(0,yt.G_)(at,St.axis);if(wt===void 0)return{min:rt,max:ct};var Pt=1/0;F.S6(wt,function(re){Pt=Math.min(re.offset,Pt)});var bt=-1/0;F.S6(wt,function(re){bt=Math.max(re.offset+re.width,bt)}),Pt=Math.abs(Pt),bt=Math.abs(bt);var Ot=Pt+bt,Bt=ct-rt,Ht=1-(Pt+bt)/Dt,Qt=Bt/Ht-Bt;return ct+=Qt*(bt/Ot),rt-=Qt*(Pt/Ot),{min:rt,max:ct}}function T(rt,ct){var St=ct,at=k(rt,St),mt=at.extent,Dt=St.get("splitNumber");rt instanceof X&&(rt.base=St.get("logBase"));var wt=rt.type,Pt=St.get("interval"),bt=wt==="interval"||wt==="time";rt.setExtent(mt[0],mt[1]),rt.calcNiceExtent({splitNumber:Dt,fixMin:at.fixMin,fixMax:at.fixMax,minInterval:bt?St.get("minInterval"):null,maxInterval:bt?St.get("maxInterval"):null}),Pt!=null&&rt.setInterval&&rt.setInterval(Pt)}function P(rt,ct){if(ct=ct||rt.get("type"),ct)switch(ct){case"category":return new dt.Z({ordinalMeta:rt.getOrdinalMeta?rt.getOrdinalMeta():rt.getCategories(),extent:[1/0,-1/0]});case"time":return new xt.Z({locale:rt.ecModel.getLocaleModel(),useUTC:rt.ecModel.get("useUTC")});default:return new(vt.Z.getClass(ct)||q.Z)}}function M(rt){var ct=rt.scale.getExtent(),St=ct[0],at=ct[1];return!(St>0&&at>0||St<0&&at<0)}function b(rt){var ct=rt.getLabelModel().get("formatter"),St=rt.type==="category"?rt.scale.getExtent()[0]:null;return rt.scale.type==="time"?function(at){return function(mt,Dt){return rt.scale.getFormattedLabel(mt,Dt,at)}}(ct):F.HD(ct)?function(at){return function(mt){var Dt=rt.scale.getLabel(mt),wt=at.replace("{value}",Dt!=null?Dt:"");return wt}}(ct):F.mf(ct)?function(at){return function(mt,Dt){return St!=null&&(Dt=mt.value-St),at(w(rt,mt),Dt,mt.level!=null?{level:mt.level}:null)}}(ct):function(at){return rt.scale.getLabel(at)}}function w(rt,ct){return rt.type==="category"?rt.scale.getLabel(ct):ct.value}function C(rt){var ct=rt.model,St=rt.scale;if(!(!ct.get(["axisLabel","show"])||St.isBlank())){var at,mt,Dt=St.getExtent();St instanceof dt.Z?mt=St.count():(at=St.getTicks(),mt=at.length);var wt=rt.getLabelModel(),Pt=b(rt),bt,Ot=1;mt>40&&(Ot=Math.ceil(mt/40));for(var Bt=0;Bt<mt;Bt+=Ot){var Ht=at?at[Bt]:{value:Dt[0]+Bt},Qt=Pt(Ht,Bt),re=wt.getTextRect(Qt),ye=V(re,wt.get("rotate")||0);bt?bt.union(ye):bt=ye}return bt}}function V(rt,ct){var St=ct*Math.PI/180,at=rt.width,mt=rt.height,Dt=at*Math.abs(Math.cos(St))+Math.abs(mt*Math.sin(St)),wt=at*Math.abs(Math.sin(St))+Math.abs(mt*Math.cos(St)),Pt=new gt.Z(rt.x,rt.y,Dt,wt);return Pt}function B(rt){var ct=rt.get("interval");return ct==null?"auto":ct}function ut(rt){return rt.type==="category"&&B(rt.getLabelModel())===0}function it(rt,ct){var St={};return F.S6(rt.mapDimensionsAll(ct),function(at){St[(0,K.IR)(rt,at)]=!0}),F.XP(St)}function lt(rt,ct,St){ct&&F.S6(it(ct,St),function(at){var mt=ct.getApproximateExtent(at);mt[0]<rt[0]&&(rt[0]=mt[0]),mt[1]>rt[1]&&(rt[1]=mt[1])})}},68935:function(Pe,ee,z){z.d(ee,{W:function(){return F}});var F=function(){function dt(){}return dt.prototype.getNeedCrossZero=function(){var q=this.option;return!q.scale},dt.prototype.getCoordSysModel=function(){},dt}()},54146:function(Pe,ee,z){var F=z(70324),dt=function(){function q(vt){this.type="cartesian",this._dimList=[],this._axes={},this.name=vt||""}return q.prototype.getAxis=function(vt){return this._axes[vt]},q.prototype.getAxes=function(){return F.UI(this._dimList,function(vt){return this._axes[vt]},this)},q.prototype.getAxesByScale=function(vt){return vt=vt.toLowerCase(),F.hX(this.getAxes(),function(yt){return yt.scale.type===vt})},q.prototype.addAxis=function(vt){var yt=vt.dim;this._axes[yt]=vt,this._dimList.push(yt)},q}();ee.Z=dt},16059:function(Pe,ee,z){z.d(ee,{Im:function(){return st},Ni:function(){return H},Qh:function(){return W},jM:function(){return Y}});var F=z(12012),dt=z(16128),q=z(85755),vt=z(48154),yt=z(58427),gt=z(70324),xt=[];function nt(J,g){for(var Q=0;Q<J.length;Q++)q.Ne(J[Q],J[Q],g)}function Z(J,g,Q,j){for(var O=0;O<J.length;O++){var X=J[O];j&&(X=j.project(X)),X&&isFinite(X[0])&&isFinite(X[1])&&(q.VV(g,g,X),q.Fp(Q,Q,X))}}function tt(J){for(var g=0,Q=0,j=0,O=J.length,X=J[O-1][0],K=J[O-1][1],G=0;G<O;G++){var k=J[G][0],R=J[G][1],T=X*R-k*K;g+=T,Q+=(X+k)*T,j+=(K+R)*T,X=k,K=R}return g?[Q/g/3,j/g/3,g]:[J[0][0]||0,J[0][1]||0]}var ot=function(){function J(g){this.name=g}return J.prototype.setCenter=function(g){this._center=g},J.prototype.getCenter=function(){var g=this._center;return g||(g=this._center=this.calcCenter()),g},J}(),W=function(){function J(g,Q){this.type="polygon",this.exterior=g,this.interiors=Q}return J}(),Y=function(){function J(g){this.type="linestring",this.points=g}return J}(),H=function(J){(0,F.ZT)(g,J);function g(Q,j,O){var X=J.call(this,Q)||this;return X.type="geoJSON",X.geometries=j,X._center=O&&[O[0],O[1]],X}return g.prototype.calcCenter=function(){for(var Q=this.geometries,j,O=0,X=0;X<Q.length;X++){var K=Q[X],G=K.exterior,k=G&&G.length;k>O&&(j=K,O=k)}if(j)return tt(j.exterior);var R=this.getBoundingRect();return[R.x+R.width/2,R.y+R.height/2]},g.prototype.getBoundingRect=function(Q){var j=this._rect;if(j&&!Q)return j;var O=[1/0,1/0],X=[-1/0,-1/0],K=this.geometries;return(0,gt.S6)(K,function(G){G.type==="polygon"?Z(G.exterior,O,X,Q):(0,gt.S6)(G.points,function(k){Z(k,O,X,Q)})}),isFinite(O[0])&&isFinite(O[1])&&isFinite(X[0])&&isFinite(X[1])||(O[0]=O[1]=X[0]=X[1]=0),j=new dt.Z(O[0],O[1],X[0]-O[0],X[1]-O[1]),Q||(this._rect=j),j},g.prototype.contain=function(Q){var j=this.getBoundingRect(),O=this.geometries;if(!j.contain(Q[0],Q[1]))return!1;t:for(var X=0,K=O.length;X<K;X++){var G=O[X];if(G.type==="polygon"){var k=G.exterior,R=G.interiors;if(vt.X(k,Q[0],Q[1])){for(var T=0;T<(R?R.length:0);T++)if(vt.X(R[T],Q[0],Q[1]))continue t;return!0}}}return!1},g.prototype.transformTo=function(Q,j,O,X){var K=this.getBoundingRect(),G=K.width/K.height;O?X||(X=O/G):O=G*X;for(var k=new dt.Z(Q,j,O,X),R=K.calculateTransform(k),T=this.geometries,P=0;P<T.length;P++){var M=T[P];M.type==="polygon"?(nt(M.exterior,R),(0,gt.S6)(M.interiors,function(b){nt(b,R)})):(0,gt.S6)(M.points,function(b){nt(b,R)})}K=this._rect,K.copy(k),this._center=[K.x+K.width/2,K.y+K.height/2]},g.prototype.cloneShallow=function(Q){Q==null&&(Q=this.name);var j=new g(Q,this.geometries,this._center);return j._rect=this._rect,j.transformTo=null,j},g}(ot),st=function(J){(0,F.ZT)(g,J);function g(Q,j){var O=J.call(this,Q)||this;return O.type="geoSVG",O._elOnlyForCalculate=j,O}return g.prototype.calcCenter=function(){for(var Q=this._elOnlyForCalculate,j=Q.getBoundingRect(),O=[j.x+j.width/2,j.y+j.height/2],X=yt.yR(xt),K=Q;K&&!K.isGeoSVGGraphicRoot;)yt.dC(X,K.getLocalTransform(),X),K=K.parent;return yt.U_(X,X),q.Ne(O,O,X),O},g}(ot)},11815:function(Pe,ee,z){z.d(ee,{Z:function(){return dt}});var F={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function dt(q,vt){if(q==="china"){var yt=F[vt.name];if(yt){var gt=vt.getCenter();gt[0]+=yt[0]/10.5,gt[1]+=-yt[1]/(10.5/.75),vt.setCenter(gt)}}}},97271:function(Pe,ee,z){z.d(ee,{Z:function(){return gt}});var F=z(70324),dt=z(16059);function q(xt){if(!xt.UTF8Encoding)return xt;var nt=xt,Z=nt.UTF8Scale;Z==null&&(Z=1024);var tt=nt.features;return F.S6(tt,function(ot){var W=ot.geometry,Y=W.encodeOffsets,H=W.coordinates;if(Y)switch(W.type){case"LineString":W.coordinates=yt(H,Y,Z);break;case"Polygon":vt(H,Y,Z);break;case"MultiLineString":vt(H,Y,Z);break;case"MultiPolygon":F.S6(H,function(st,J){return vt(st,Y[J],Z)})}}),nt.UTF8Encoding=!1,nt}function vt(xt,nt,Z){for(var tt=0;tt<xt.length;tt++)xt[tt]=yt(xt[tt],nt[tt],Z)}function yt(xt,nt,Z){for(var tt=[],ot=nt[0],W=nt[1],Y=0;Y<xt.length;Y+=2){var H=xt.charCodeAt(Y)-64,st=xt.charCodeAt(Y+1)-64;H=H>>1^-(H&1),st=st>>1^-(st&1),H+=ot,st+=W,ot=H,W=st,tt.push([H/Z,st/Z])}return tt}function gt(xt,nt){return xt=q(xt),F.UI(F.hX(xt.features,function(Z){return Z.geometry&&Z.properties&&Z.geometry.coordinates.length>0}),function(Z){var tt=Z.properties,ot=Z.geometry,W=[];switch(ot.type){case"Polygon":var Y=ot.coordinates;W.push(new dt.Qh(Y[0],Y.slice(1)));break;case"MultiPolygon":F.S6(ot.coordinates,function(st){st[0]&&W.push(new dt.Qh(st[0],st.slice(1)))});break;case"LineString":W.push(new dt.jM([ot.coordinates]));break;case"MultiLineString":W.push(new dt.jM(ot.coordinates))}var H=new dt.Ni(tt[nt||"name"],W,tt.cp);return H.properties=tt,H})}},67060:function(Pe,ee,z){z.d(ee,{Qw:function(){return gt}});var F=z(70324),dt=z(98733),q=function(){function nt(Z,tt,ot){this._prepareParams(Z,tt,ot)}return nt.prototype._prepareParams=function(Z,tt,ot){ot[1]<ot[0]&&(ot=[NaN,NaN]),this._dataMin=ot[0],this._dataMax=ot[1];var W=this._isOrdinal=Z.type==="ordinal";this._needCrossZero=Z.type==="interval"&&tt.getNeedCrossZero&&tt.getNeedCrossZero();var Y=this._modelMinRaw=tt.get("min",!0);(0,F.mf)(Y)?this._modelMinNum=xt(Z,Y({min:ot[0],max:ot[1]})):Y!=="dataMin"&&(this._modelMinNum=xt(Z,Y));var H=this._modelMaxRaw=tt.get("max",!0);if((0,F.mf)(H)?this._modelMaxNum=xt(Z,H({min:ot[0],max:ot[1]})):H!=="dataMax"&&(this._modelMaxNum=xt(Z,H)),W)this._axisDataLen=tt.getCategories().length;else{var st=tt.get("boundaryGap"),J=(0,F.kJ)(st)?st:[st||0,st||0];typeof J[0]=="boolean"||typeof J[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[(0,dt.GM)(J[0],1),(0,dt.GM)(J[1],1)]}},nt.prototype.calculate=function(){var Z=this._isOrdinal,tt=this._dataMin,ot=this._dataMax,W=this._axisDataLen,Y=this._boundaryGapInner,H=Z?null:ot-tt||Math.abs(tt),st=this._modelMinRaw==="dataMin"?tt:this._modelMinNum,J=this._modelMaxRaw==="dataMax"?ot:this._modelMaxNum,g=st!=null,Q=J!=null;st==null&&(st=Z?W?0:NaN:tt-Y[0]*H),J==null&&(J=Z?W?W-1:NaN:ot+Y[1]*H),(st==null||!isFinite(st))&&(st=NaN),(J==null||!isFinite(J))&&(J=NaN);var j=(0,F.Bu)(st)||(0,F.Bu)(J)||Z&&!W;this._needCrossZero&&(st>0&&J>0&&!g&&(st=0),st<0&&J<0&&!Q&&(J=0));var O=this._determinedMin,X=this._determinedMax;return O!=null&&(st=O,g=!0),X!=null&&(J=X,Q=!0),{min:st,max:J,minFixed:g,maxFixed:Q,isBlank:j}},nt.prototype.modifyDataMinMax=function(Z,tt){this[yt[Z]]=tt},nt.prototype.setDeterminedMinMax=function(Z,tt){var ot=vt[Z];this[ot]=tt},nt.prototype.freeze=function(){this.frozen=!0},nt}(),vt={min:"_determinedMin",max:"_determinedMax"},yt={min:"_dataMin",max:"_dataMax"};function gt(nt,Z,tt){var ot=nt.rawExtentInfo;return ot||(ot=new q(nt,Z,tt),nt.rawExtentInfo=ot,ot)}function xt(nt,Z){return Z==null?null:(0,F.Bu)(Z)?NaN:nt.parse(Z)}},20666:function(Pe,ee,z){var F=z(70324),dt={},q=function(){function vt(){this._coordinateSystems=[]}return vt.prototype.create=function(yt,gt){var xt=[];F.S6(dt,function(nt,Z){var tt=nt.create(yt,gt);xt=xt.concat(tt||[])}),this._coordinateSystems=xt},vt.prototype.update=function(yt,gt){F.S6(this._coordinateSystems,function(xt){xt.update&&xt.update(yt,gt)})},vt.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},vt.register=function(yt,gt){dt[yt]=gt},vt.get=function(yt){return dt[yt]},vt}();ee.Z=q},78358:function(Pe,ee,z){z.d(ee,{Hr:function(){return No},wL:function(){return Da},FU:function(){return gl},S1:function(){return Ds},zl:function(){return Gn},RS:function(){return ko},qR:function(){return lu},yn:function(){return ea},je:function(){return fo},sq:function(){return Ha},Br:function(){return uo},ds:function(){return su},Pu:function(){return ws},OB:function(){return Wo},YK:function(){return As},Og:function(){return La}});var F=z(12012),dt=z(32389),q=z(70324),vt=z(54490),yt=z(59330),gt=z(10563),xt=z(21611),nt=z(97853),Z=z(47497),tt="";typeof navigator!="undefined"&&(tt=navigator.platform||"");var ot="rgba(0, 0, 0, 0.2)",W={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:ot,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:ot,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:ot,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:ot,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:ot,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:ot,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:tt.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Y=z(459),H=z(89166),st=z(35247),J,g,Q,j="\0_ec_inner",O=1,X={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},K={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},G={};function k(Rt){each(Rt,function(Ft,Lt){if(!ComponentModel.hasClass(Lt)){var Gt=X[Lt];Gt&&!G[Gt]&&(error("Component "+Lt+` is used but not imported.
import { `+Gt+` } from 'echarts/components';
echarts.use([`+Gt+"]);"),G[Gt]=!0)}})}var R=function(Rt){(0,F.ZT)(Ft,Rt);function Ft(){return Rt!==null&&Rt.apply(this,arguments)||this}return Ft.prototype.init=function(Lt,Gt,Ut,Jt,de,Le){Jt=Jt||{},this.option=null,this._theme=new nt.Z(Jt),this._locale=new nt.Z(de),this._optionManager=Le},Ft.prototype.setOption=function(Lt,Gt,Ut){var Jt=w(Gt);this._optionManager.setOption(Lt,Ut,Jt),this._resetOption(null,Jt)},Ft.prototype.resetOption=function(Lt,Gt){return this._resetOption(Lt,w(Gt))},Ft.prototype._resetOption=function(Lt,Gt){var Ut=!1,Jt=this._optionManager;if(!Lt||Lt==="recreate"){var de=Jt.mountOption(Lt==="recreate");!this.option||Lt==="recreate"?Q(this,de):(this.restoreData(),this._mergeOption(de,Gt)),Ut=!0}if((Lt==="timeline"||Lt==="media")&&this.restoreData(),!Lt||Lt==="recreate"||Lt==="timeline"){var Le=Jt.getTimelineOption(this);Le&&(Ut=!0,this._mergeOption(Le,Gt))}if(!Lt||Lt==="recreate"||Lt==="media"){var Me=Jt.getMediaOption(this);Me.length&&(0,q.S6)(Me,function(Ke){Ut=!0,this._mergeOption(Ke,Gt)},this)}return Ut},Ft.prototype.mergeOption=function(Lt){this._mergeOption(Lt,null)},Ft.prototype._mergeOption=function(Lt,Gt){var Ut=this.option,Jt=this._componentsMap,de=this._componentsCount,Le=[],Me=(0,q.kW)(),Ke=Gt&&Gt.replaceMergeMainTypeMap;(0,Y.md)(this),(0,q.S6)(Lt,function(se,Se){se!=null&&(Z.Z.hasClass(Se)?Se&&(Le.push(Se),Me.set(Se,!0)):Ut[Se]=Ut[Se]==null?(0,q.d9)(se):(0,q.TS)(Ut[Se],se,!0))}),Ke&&Ke.each(function(se,Se){Z.Z.hasClass(Se)&&!Me.get(Se)&&(Le.push(Se),Me.set(Se,!0))}),Z.Z.topologicalTravel(Le,Z.Z.getAllClassMainTypes(),lr,this);function lr(se){var Se=(0,H.R)(this,se,xt.kF(Lt[se])),ge=Jt.get(se),Ae=ge?Ke&&Ke.get(se)?"replaceMerge":"normalMerge":"replaceAll",Re=xt.ab(ge,Se,Ae);xt.O0(Re,se,Z.Z),Ut[se]=null,Jt.set(se,null),de.set(se,0);var Ye=[],tr=[],fr=0,hr,Fr;(0,q.S6)(Re,function(en,Ur){var wn=en.existing,wi=en.newOption;if(!wi)wn&&(wn.mergeOption({},this),wn.optionUpdated({},!1));else{var Rn=se==="series",gn=Z.Z.getClass(se,en.keyInfo.subType,!Rn);if(!gn){if(!1)var wa,uu;return}if(se==="tooltip"){if(hr)return;hr=!0}if(wn&&wn.constructor===gn)wn.name=en.keyInfo.name,wn.mergeOption(wi,this),wn.optionUpdated(wi,!1);else{var bs=(0,q.l7)({componentIndex:Ur},en.keyInfo);wn=new gn(wi,this,this,bs),(0,q.l7)(wn,bs),en.brandNew&&(wn.__requireNewView=!0),wn.init(wi,this,this),wn.optionUpdated(null,!0)}}wn?(Ye.push(wn.option),tr.push(wn),fr++):(Ye.push(void 0),tr.push(void 0))},this),Ut[se]=Ye,Jt.set(se,tr),de.set(se,fr),se==="series"&&J(this)}this._seriesIndices||J(this)},Ft.prototype.getOption=function(){var Lt=(0,q.d9)(this.option);return(0,q.S6)(Lt,function(Gt,Ut){if(Z.Z.hasClass(Ut)){for(var Jt=xt.kF(Gt),de=Jt.length,Le=!1,Me=de-1;Me>=0;Me--)Jt[Me]&&!xt.lY(Jt[Me])?Le=!0:(Jt[Me]=null,!Le&&de--);Jt.length=de,Lt[Ut]=Jt}}),delete Lt[j],Lt},Ft.prototype.getTheme=function(){return this._theme},Ft.prototype.getLocaleModel=function(){return this._locale},Ft.prototype.setUpdatePayload=function(Lt){this._payload=Lt},Ft.prototype.getUpdatePayload=function(){return this._payload},Ft.prototype.getComponent=function(Lt,Gt){var Ut=this._componentsMap.get(Lt);if(Ut){var Jt=Ut[Gt||0];if(Jt)return Jt;if(Gt==null){for(var de=0;de<Ut.length;de++)if(Ut[de])return Ut[de]}}},Ft.prototype.queryComponents=function(Lt){var Gt=Lt.mainType;if(!Gt)return[];var Ut=Lt.index,Jt=Lt.id,de=Lt.name,Le=this._componentsMap.get(Gt);if(!Le||!Le.length)return[];var Me;return Ut!=null?(Me=[],(0,q.S6)(xt.kF(Ut),function(Ke){Le[Ke]&&Me.push(Le[Ke])})):Jt!=null?Me=M("id",Jt,Le):de!=null?Me=M("name",de,Le):Me=(0,q.hX)(Le,function(Ke){return!!Ke}),b(Me,Lt)},Ft.prototype.findComponents=function(Lt){var Gt=Lt.query,Ut=Lt.mainType,Jt=Le(Gt),de=Jt?this.queryComponents(Jt):(0,q.hX)(this._componentsMap.get(Ut),function(Ke){return!!Ke});return Me(b(de,Lt));function Le(Ke){var lr=Ut+"Index",se=Ut+"Id",Se=Ut+"Name";return Ke&&(Ke[lr]!=null||Ke[se]!=null||Ke[Se]!=null)?{mainType:Ut,index:Ke[lr],id:Ke[se],name:Ke[Se]}:null}function Me(Ke){return Lt.filter?(0,q.hX)(Ke,Lt.filter):Ke}},Ft.prototype.eachComponent=function(Lt,Gt,Ut){var Jt=this._componentsMap;if((0,q.mf)(Lt)){var de=Gt,Le=Lt;Jt.each(function(se,Se){for(var ge=0;se&&ge<se.length;ge++){var Ae=se[ge];Ae&&Le.call(de,Se,Ae,Ae.componentIndex)}})}else for(var Me=(0,q.HD)(Lt)?Jt.get(Lt):(0,q.Kn)(Lt)?this.findComponents(Lt):null,Ke=0;Me&&Ke<Me.length;Ke++){var lr=Me[Ke];lr&&Gt.call(Ut,lr,lr.componentIndex)}},Ft.prototype.getSeriesByName=function(Lt){var Gt=xt.U5(Lt,null);return(0,q.hX)(this._componentsMap.get("series"),function(Ut){return!!Ut&&Gt!=null&&Ut.name===Gt})},Ft.prototype.getSeriesByIndex=function(Lt){return this._componentsMap.get("series")[Lt]},Ft.prototype.getSeriesByType=function(Lt){return(0,q.hX)(this._componentsMap.get("series"),function(Gt){return!!Gt&&Gt.subType===Lt})},Ft.prototype.getSeries=function(){return(0,q.hX)(this._componentsMap.get("series"),function(Lt){return!!Lt})},Ft.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ft.prototype.eachSeries=function(Lt,Gt){g(this),(0,q.S6)(this._seriesIndices,function(Ut){var Jt=this._componentsMap.get("series")[Ut];Lt.call(Gt,Jt,Ut)},this)},Ft.prototype.eachRawSeries=function(Lt,Gt){(0,q.S6)(this._componentsMap.get("series"),function(Ut){Ut&&Lt.call(Gt,Ut,Ut.componentIndex)})},Ft.prototype.eachSeriesByType=function(Lt,Gt,Ut){g(this),(0,q.S6)(this._seriesIndices,function(Jt){var de=this._componentsMap.get("series")[Jt];de.subType===Lt&&Gt.call(Ut,de,Jt)},this)},Ft.prototype.eachRawSeriesByType=function(Lt,Gt,Ut){return(0,q.S6)(this.getSeriesByType(Lt),Gt,Ut)},Ft.prototype.isSeriesFiltered=function(Lt){return g(this),this._seriesIndicesMap.get(Lt.componentIndex)==null},Ft.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ft.prototype.filterSeries=function(Lt,Gt){g(this);var Ut=[];(0,q.S6)(this._seriesIndices,function(Jt){var de=this._componentsMap.get("series")[Jt];Lt.call(Gt,de,Jt)&&Ut.push(Jt)},this),this._seriesIndices=Ut,this._seriesIndicesMap=(0,q.kW)(Ut)},Ft.prototype.restoreData=function(Lt){J(this);var Gt=this._componentsMap,Ut=[];Gt.each(function(Jt,de){Z.Z.hasClass(de)&&Ut.push(de)}),Z.Z.topologicalTravel(Ut,Z.Z.getAllClassMainTypes(),function(Jt){(0,q.S6)(Gt.get(Jt),function(de){de&&(Jt!=="series"||!T(de,Lt))&&de.restoreData()})})},Ft.internalField=function(){J=function(Lt){var Gt=Lt._seriesIndices=[];(0,q.S6)(Lt._componentsMap.get("series"),function(Ut){Ut&&Gt.push(Ut.componentIndex)}),Lt._seriesIndicesMap=(0,q.kW)(Gt)},g=function(Lt){},Q=function(Lt,Gt){Lt.option={},Lt.option[j]=O,Lt._componentsMap=(0,q.kW)({series:[]}),Lt._componentsCount=(0,q.kW)();var Ut=Gt.aria;(0,q.Kn)(Ut)&&Ut.enabled==null&&(Ut.enabled=!0),P(Gt,Lt._theme.option),(0,q.TS)(Gt,W,!1),Lt._mergeOption(Gt,null)}}(),Ft}(nt.Z);function T(Rt,Ft){if(Ft){var Lt=Ft.seriesIndex,Gt=Ft.seriesId,Ut=Ft.seriesName;return Lt!=null&&Rt.componentIndex!==Lt||Gt!=null&&Rt.id!==Gt||Ut!=null&&Rt.name!==Ut}}function P(Rt,Ft){var Lt=Rt.color&&!Rt.colorLayer;(0,q.S6)(Ft,function(Gt,Ut){Ut==="colorLayer"&&Lt||Z.Z.hasClass(Ut)||(typeof Gt=="object"?Rt[Ut]=Rt[Ut]?(0,q.TS)(Rt[Ut],Gt,!1):(0,q.d9)(Gt):Rt[Ut]==null&&(Rt[Ut]=Gt))})}function M(Rt,Ft,Lt){if((0,q.kJ)(Ft)){var Gt=(0,q.kW)();return(0,q.S6)(Ft,function(Jt){if(Jt!=null){var de=xt.U5(Jt,null);de!=null&&Gt.set(Jt,!0)}}),(0,q.hX)(Lt,function(Jt){return Jt&&Gt.get(Jt[Rt])})}else{var Ut=xt.U5(Ft,null);return(0,q.hX)(Lt,function(Jt){return Jt&&Ut!=null&&Jt[Rt]===Ut})}}function b(Rt,Ft){return Ft.hasOwnProperty("subType")?(0,q.hX)(Rt,function(Lt){return Lt&&Lt.subType===Ft.subType}):Rt}function w(Rt){var Ft=(0,q.kW)();return Rt&&(0,q.S6)(xt.kF(Rt.replaceMerge),function(Lt){Ft.set(Lt,!0)}),{replaceMergeMainTypeMap:Ft}}(0,q.jB)(R,st._);var C=R,V=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],B=function(){function Rt(Ft){q.S6(V,function(Lt){this[Lt]=q.ak(Ft[Lt],Ft)},this)}return Rt}(),ut=B,it=z(20666),lt=/^(min|max)?(.+)$/,rt=function(){function Rt(Ft){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ft}return Rt.prototype.setOption=function(Ft,Lt,Gt){Ft&&((0,q.S6)((0,xt.kF)(Ft.series),function(de){de&&de.data&&(0,q.fU)(de.data)&&(0,q.s7)(de.data)}),(0,q.S6)((0,xt.kF)(Ft.dataset),function(de){de&&de.source&&(0,q.fU)(de.source)&&(0,q.s7)(de.source)})),Ft=(0,q.d9)(Ft);var Ut=this._optionBackup,Jt=ct(Ft,Lt,!Ut);this._newBaseOption=Jt.baseOption,Ut?(Jt.timelineOptions.length&&(Ut.timelineOptions=Jt.timelineOptions),Jt.mediaList.length&&(Ut.mediaList=Jt.mediaList),Jt.mediaDefault&&(Ut.mediaDefault=Jt.mediaDefault)):this._optionBackup=Jt},Rt.prototype.mountOption=function(Ft){var Lt=this._optionBackup;return this._timelineOptions=Lt.timelineOptions,this._mediaList=Lt.mediaList,this._mediaDefault=Lt.mediaDefault,this._currentMediaIndices=[],(0,q.d9)(Ft?Lt.baseOption:this._newBaseOption)},Rt.prototype.getTimelineOption=function(Ft){var Lt,Gt=this._timelineOptions;if(Gt.length){var Ut=Ft.getComponent("timeline");Ut&&(Lt=(0,q.d9)(Gt[Ut.getCurrentIndex()]))}return Lt},Rt.prototype.getMediaOption=function(Ft){var Lt=this._api.getWidth(),Gt=this._api.getHeight(),Ut=this._mediaList,Jt=this._mediaDefault,de=[],Le=[];if(!Ut.length&&!Jt)return Le;for(var Me=0,Ke=Ut.length;Me<Ke;Me++)St(Ut[Me].query,Lt,Gt)&&de.push(Me);return!de.length&&Jt&&(de=[-1]),de.length&&!mt(de,this._currentMediaIndices)&&(Le=(0,q.UI)(de,function(lr){return(0,q.d9)(lr===-1?Jt.option:Ut[lr].option)})),this._currentMediaIndices=de,Le},Rt}();function ct(Rt,Ft,Lt){var Gt=[],Ut,Jt,de=Rt.baseOption,Le=Rt.timeline,Me=Rt.options,Ke=Rt.media,lr=!!Rt.media,se=!!(Me||Le||de&&de.timeline);de?(Jt=de,Jt.timeline||(Jt.timeline=Le)):((se||lr)&&(Rt.options=Rt.media=null),Jt=Rt),lr&&(0,q.kJ)(Ke)&&(0,q.S6)(Ke,function(ge){ge&&ge.option&&(ge.query?Gt.push(ge):Ut||(Ut=ge))}),Se(Jt),(0,q.S6)(Me,function(ge){return Se(ge)}),(0,q.S6)(Gt,function(ge){return Se(ge.option)});function Se(ge){(0,q.S6)(Ft,function(Ae){Ae(ge,Lt)})}return{baseOption:Jt,timelineOptions:Me||[],mediaDefault:Ut,mediaList:Gt}}function St(Rt,Ft,Lt){var Gt={width:Ft,height:Lt,aspectratio:Ft/Lt},Ut=!0;return(0,q.S6)(Rt,function(Jt,de){var Le=de.match(lt);if(!(!Le||!Le[1]||!Le[2])){var Me=Le[1],Ke=Le[2].toLowerCase();at(Gt[Ke],Jt,Me)||(Ut=!1)}}),Ut}function at(Rt,Ft,Lt){return Lt==="min"?Rt>=Ft:Lt==="max"?Rt<=Ft:Rt===Ft}function mt(Rt,Ft){return Rt.join(",")===Ft.join(",")}var Dt=rt,wt=q.S6,Pt=q.Kn,bt=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ot(Rt){var Ft=Rt&&Rt.itemStyle;if(Ft)for(var Lt=0,Gt=bt.length;Lt<Gt;Lt++){var Ut=bt[Lt],Jt=Ft.normal,de=Ft.emphasis;Jt&&Jt[Ut]&&(Rt[Ut]=Rt[Ut]||{},Rt[Ut].normal?q.TS(Rt[Ut].normal,Jt[Ut]):Rt[Ut].normal=Jt[Ut],Jt[Ut]=null),de&&de[Ut]&&(Rt[Ut]=Rt[Ut]||{},Rt[Ut].emphasis?q.TS(Rt[Ut].emphasis,de[Ut]):Rt[Ut].emphasis=de[Ut],de[Ut]=null)}}function Bt(Rt,Ft,Lt){if(Rt&&Rt[Ft]&&(Rt[Ft].normal||Rt[Ft].emphasis)){var Gt=Rt[Ft].normal,Ut=Rt[Ft].emphasis;Gt&&(Lt?(Rt[Ft].normal=Rt[Ft].emphasis=null,q.ce(Rt[Ft],Gt)):Rt[Ft]=Gt),Ut&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis[Ft]=Ut,Ut.focus&&(Rt.emphasis.focus=Ut.focus),Ut.blurScope&&(Rt.emphasis.blurScope=Ut.blurScope))}}function Ht(Rt){Bt(Rt,"itemStyle"),Bt(Rt,"lineStyle"),Bt(Rt,"areaStyle"),Bt(Rt,"label"),Bt(Rt,"labelLine"),Bt(Rt,"upperLabel"),Bt(Rt,"edgeLabel")}function Qt(Rt,Ft){var Lt=Pt(Rt)&&Rt[Ft],Gt=Pt(Lt)&&Lt.textStyle;if(Gt)for(var Ut=0,Jt=xt.Td.length;Ut<Jt;Ut++){var de=xt.Td[Ut];Gt.hasOwnProperty(de)&&(Lt[de]=Gt[de])}}function re(Rt){Rt&&(Ht(Rt),Qt(Rt,"label"),Rt.emphasis&&Qt(Rt.emphasis,"label"))}function ye(Rt){if(Pt(Rt)){Ot(Rt),Ht(Rt),Qt(Rt,"label"),Qt(Rt,"upperLabel"),Qt(Rt,"edgeLabel"),Rt.emphasis&&(Qt(Rt.emphasis,"label"),Qt(Rt.emphasis,"upperLabel"),Qt(Rt.emphasis,"edgeLabel"));var Ft=Rt.markPoint;Ft&&(Ot(Ft),re(Ft));var Lt=Rt.markLine;Lt&&(Ot(Lt),re(Lt));var Gt=Rt.markArea;Gt&&re(Gt);var Ut=Rt.data;if(Rt.type==="graph"){Ut=Ut||Rt.nodes;var Jt=Rt.links||Rt.edges;if(Jt&&!q.fU(Jt))for(var de=0;de<Jt.length;de++)re(Jt[de]);q.S6(Rt.categories,function(Ke){Ht(Ke)})}if(Ut&&!q.fU(Ut))for(var de=0;de<Ut.length;de++)re(Ut[de]);if(Ft=Rt.markPoint,Ft&&Ft.data)for(var Le=Ft.data,de=0;de<Le.length;de++)re(Le[de]);if(Lt=Rt.markLine,Lt&&Lt.data)for(var Me=Lt.data,de=0;de<Me.length;de++)q.kJ(Me[de])?(re(Me[de][0]),re(Me[de][1])):re(Me[de]);Rt.type==="gauge"?(Qt(Rt,"axisLabel"),Qt(Rt,"title"),Qt(Rt,"detail")):Rt.type==="treemap"?(Bt(Rt.breadcrumb,"itemStyle"),q.S6(Rt.levels,function(Ke){Ht(Ke)})):Rt.type==="tree"&&Ht(Rt.leaves)}}function he(Rt){return q.kJ(Rt)?Rt:Rt?[Rt]:[]}function be(Rt){return(q.kJ(Rt)?Rt[0]:Rt)||{}}function Be(Rt,Ft){wt(he(Rt.series),function(Gt){Pt(Gt)&&ye(Gt)});var Lt=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ft&&Lt.push("valueAxis","categoryAxis","logAxis","timeAxis"),wt(Lt,function(Gt){wt(he(Rt[Gt]),function(Ut){Ut&&(Qt(Ut,"axisLabel"),Qt(Ut.axisPointer,"label"))})}),wt(he(Rt.parallel),function(Gt){var Ut=Gt&&Gt.parallelAxisDefault;Qt(Ut,"axisLabel"),Qt(Ut&&Ut.axisPointer,"label")}),wt(he(Rt.calendar),function(Gt){Bt(Gt,"itemStyle"),Qt(Gt,"dayLabel"),Qt(Gt,"monthLabel"),Qt(Gt,"yearLabel")}),wt(he(Rt.radar),function(Gt){Qt(Gt,"name"),Gt.name&&Gt.axisName==null&&(Gt.axisName=Gt.name,delete Gt.name),Gt.nameGap!=null&&Gt.axisNameGap==null&&(Gt.axisNameGap=Gt.nameGap,delete Gt.nameGap)}),wt(he(Rt.geo),function(Gt){Pt(Gt)&&(re(Gt),wt(he(Gt.regions),function(Ut){re(Ut)}))}),wt(he(Rt.timeline),function(Gt){re(Gt),Bt(Gt,"label"),Bt(Gt,"itemStyle"),Bt(Gt,"controlStyle",!0);var Ut=Gt.data;q.kJ(Ut)&&q.S6(Ut,function(Jt){q.Kn(Jt)&&(Bt(Jt,"label"),Bt(Jt,"itemStyle"))})}),wt(he(Rt.toolbox),function(Gt){Bt(Gt,"iconStyle"),wt(Gt.feature,function(Ut){Bt(Ut,"iconStyle")})}),Qt(be(Rt.axisPointer),"label"),Qt(be(Rt.tooltip).axisPointer,"label")}function Ze(Rt,Ft){for(var Lt=Ft.split(","),Gt=Rt,Ut=0;Ut<Lt.length&&(Gt=Gt&&Gt[Lt[Ut]],Gt!=null);Ut++);return Gt}function qe(Rt,Ft,Lt,Gt){for(var Ut=Ft.split(","),Jt=Rt,de,Le=0;Le<Ut.length-1;Le++)de=Ut[Le],Jt[de]==null&&(Jt[de]={}),Jt=Jt[de];(Gt||Jt[Ut[Le]]==null)&&(Jt[Ut[Le]]=Lt)}function pr(Rt){Rt&&(0,q.S6)(wr,function(Ft){Ft[0]in Rt&&!(Ft[1]in Rt)&&(Rt[Ft[1]]=Rt[Ft[0]])})}var wr=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Or=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Sr=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Vr(Rt){var Ft=Rt&&Rt.itemStyle;if(Ft)for(var Lt=0;Lt<Sr.length;Lt++){var Gt=Sr[Lt][1],Ut=Sr[Lt][0];Ft[Gt]!=null&&(Ft[Ut]=Ft[Gt])}}function sn(Rt){Rt&&Rt.alignTo==="edge"&&Rt.margin!=null&&Rt.edgeDistance==null&&(Rt.edgeDistance=Rt.margin)}function cr(Rt){Rt&&Rt.downplay&&!Rt.blur&&(Rt.blur=Rt.downplay)}function or(Rt){Rt&&Rt.focusNodeAdjacency!=null&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis.focus==null&&(Rt.emphasis.focus="adjacency"))}function Dr(Rt,Ft){if(Rt)for(var Lt=0;Lt<Rt.length;Lt++)Ft(Rt[Lt]),Rt[Lt]&&Dr(Rt[Lt].children,Ft)}function ze(Rt,Ft){Be(Rt,Ft),Rt.series=(0,xt.kF)(Rt.series),(0,q.S6)(Rt.series,function(Lt){if((0,q.Kn)(Lt)){var Gt=Lt.type;if(Gt==="line")Lt.clipOverflow!=null&&(Lt.clip=Lt.clipOverflow);else if(Gt==="pie"||Gt==="gauge"){Lt.clockWise!=null&&(Lt.clockwise=Lt.clockWise),sn(Lt.label);var Ut=Lt.data;if(Ut&&!(0,q.fU)(Ut))for(var Jt=0;Jt<Ut.length;Jt++)sn(Ut[Jt]);Lt.hoverOffset!=null&&(Lt.emphasis=Lt.emphasis||{},(Lt.emphasis.scaleSize=null)&&(Lt.emphasis.scaleSize=Lt.hoverOffset))}else if(Gt==="gauge"){var de=Ze(Lt,"pointer.color");de!=null&&qe(Lt,"itemStyle.color",de)}else if(Gt==="bar"){Vr(Lt),Vr(Lt.backgroundStyle),Vr(Lt.emphasis);var Ut=Lt.data;if(Ut&&!(0,q.fU)(Ut))for(var Jt=0;Jt<Ut.length;Jt++)typeof Ut[Jt]=="object"&&(Vr(Ut[Jt]),Vr(Ut[Jt]&&Ut[Jt].emphasis))}else if(Gt==="sunburst"){var Le=Lt.highlightPolicy;Le&&(Lt.emphasis=Lt.emphasis||{},Lt.emphasis.focus||(Lt.emphasis.focus=Le)),cr(Lt),Dr(Lt.data,cr)}else Gt==="graph"||Gt==="sankey"?or(Lt):Gt==="map"&&(Lt.mapType&&!Lt.map&&(Lt.map=Lt.mapType),Lt.mapLocation&&(0,q.ce)(Lt,Lt.mapLocation));Lt.hoverAnimation!=null&&(Lt.emphasis=Lt.emphasis||{},Lt.emphasis&&Lt.emphasis.scale==null&&(Lt.emphasis.scale=Lt.hoverAnimation)),pr(Lt)}}),Rt.dataRange&&(Rt.visualMap=Rt.dataRange),(0,q.S6)(Or,function(Lt){var Gt=Rt[Lt];Gt&&((0,q.kJ)(Gt)||(Gt=[Gt]),(0,q.S6)(Gt,function(Ut){pr(Ut)}))})}var Ne=z(97414);function He(Rt){var Ft=(0,q.kW)();Rt.eachSeries(function(Lt){var Gt=Lt.get("stack");if(Gt){var Ut=Ft.get(Gt)||Ft.set(Gt,[]),Jt=Lt.getData(),de={stackResultDimension:Jt.getCalculationInfo("stackResultDimension"),stackedOverDimension:Jt.getCalculationInfo("stackedOverDimension"),stackedDimension:Jt.getCalculationInfo("stackedDimension"),stackedByDimension:Jt.getCalculationInfo("stackedByDimension"),isStackedByIndex:Jt.getCalculationInfo("isStackedByIndex"),data:Jt,seriesModel:Lt};if(!de.stackedDimension||!(de.isStackedByIndex||de.stackedByDimension))return;Ut.length&&Jt.setCalculationInfo("stackedOnSeries",Ut[Ut.length-1].seriesModel),Ut.push(de)}}),Ft.each(Vt)}function Vt(Rt){(0,q.S6)(Rt,function(Ft,Lt){var Gt=[],Ut=[NaN,NaN],Jt=[Ft.stackResultDimension,Ft.stackedOverDimension],de=Ft.data,Le=Ft.isStackedByIndex,Me=Ft.seriesModel.get("stackStrategy")||"samesign";de.modify(Jt,function(Ke,lr,se){var Se=de.get(Ft.stackedDimension,se);if(isNaN(Se))return Ut;var ge,Ae;Le?Ae=de.getRawIndex(se):ge=de.get(Ft.stackedByDimension,se);for(var Re=NaN,Ye=Lt-1;Ye>=0;Ye--){var tr=Rt[Ye];if(Le||(Ae=tr.data.rawIndexOf(tr.stackedByDimension,ge)),Ae>=0){var fr=tr.data.getByRawIndex(tr.stackResultDimension,Ae);if(Me==="all"||Me==="positive"&&fr>0||Me==="negative"&&fr<0||Me==="samesign"&&Se>=0&&fr>0||Me==="samesign"&&Se<=0&&fr<0){Se=(0,Ne.S$)(Se,fr),Re=fr;break}}}return Gt[0]=Se,Gt[1]=Re,Gt})})}var le=z(88242),Ee=z(70296),Fe=z(57839),Xt=z(73909),$t=z(13806),ie=z(25400),Zt=z(66210),pe=z(98845),ve=z(58833),we=z(39783),Ue=z(59036),ur=z(3382),gr=z(16121),Ir=(0,xt.Yf)(),hn={itemStyle:(0,Ue.Z)(ur.t,!0),lineStyle:(0,Ue.Z)(gr.v,!0)},Rr={lineStyle:"stroke",itemStyle:"fill"};function Nn(Rt,Ft){var Lt=Rt.visualStyleMapper||hn[Ft];return Lt||(console.warn("Unknown style type '"+Ft+"'."),hn.itemStyle)}function Vn(Rt,Ft){var Lt=Rt.visualDrawType||Rr[Ft];return Lt||(console.warn("Unknown style type '"+Ft+"'."),"fill")}var yi={createOnAllSeries:!0,performRawSeries:!0,reset:function(Rt,Ft){var Lt=Rt.getData(),Gt=Rt.visualStyleAccessPath||"itemStyle",Ut=Rt.getModel(Gt),Jt=Nn(Rt,Gt),de=Jt(Ut),Le=Ut.getShallow("decal");Le&&(Lt.setVisual("decal",Le),Le.dirty=!0);var Me=Vn(Rt,Gt),Ke=de[Me],lr=(0,q.mf)(Ke)?Ke:null,se=de.fill==="auto"||de.stroke==="auto";if(!de[Me]||lr||se){var Se=Rt.getColorFromPalette(Rt.name,null,Ft.getSeriesCount());de[Me]||(de[Me]=Se,Lt.setVisual("colorFromPalette",!0)),de.fill=de.fill==="auto"||(0,q.mf)(de.fill)?Se:de.fill,de.stroke=de.stroke==="auto"||(0,q.mf)(de.stroke)?Se:de.stroke}if(Lt.setVisual("style",de),Lt.setVisual("drawType",Me),!Ft.isSeriesFiltered(Rt)&&lr)return Lt.setVisual("colorFromPalette",!1),{dataEach:function(ge,Ae){var Re=Rt.getDataParams(Ae),Ye=(0,q.l7)({},de);Ye[Me]=lr(Re),ge.setItemVisual(Ae,"style",Ye)}}}},Fi=new nt.Z,Ci={createOnAllSeries:!0,performRawSeries:!0,reset:function(Rt,Ft){if(!(Rt.ignoreStyleOnData||Ft.isSeriesFiltered(Rt))){var Lt=Rt.getData(),Gt=Rt.visualStyleAccessPath||"itemStyle",Ut=Nn(Rt,Gt),Jt=Lt.getVisual("drawType");return{dataEach:Lt.hasItemOption?function(de,Le){var Me=de.getRawDataItem(Le);if(Me&&Me[Gt]){Fi.option=Me[Gt];var Ke=Ut(Fi),lr=de.ensureUniqueItemVisual(Le,"style");(0,q.l7)(lr,Ke),Fi.option.decal&&(de.setItemVisual(Le,"decal",Fi.option.decal),Fi.option.decal.dirty=!0),Jt in Ke&&de.setItemVisual(Le,"colorFromPalette",!1)}}:null}}}},ri={performRawSeries:!0,overallReset:function(Rt){var Ft=(0,q.kW)();Rt.eachSeries(function(Lt){var Gt=Lt.getColorBy();if(!Lt.isColorBySeries()){var Ut=Lt.type+"-"+Gt,Jt=Ft.get(Ut);Jt||(Jt={},Ft.set(Ut,Jt)),Ir(Lt).scope=Jt}}),Rt.eachSeries(function(Lt){if(!(Lt.isColorBySeries()||Rt.isSeriesFiltered(Lt))){var Gt=Lt.getRawData(),Ut={},Jt=Lt.getData(),de=Ir(Lt).scope,Le=Lt.visualStyleAccessPath||"itemStyle",Me=Vn(Lt,Le);Jt.each(function(Ke){var lr=Jt.getRawIndex(Ke);Ut[lr]=Ke}),Gt.each(function(Ke){var lr=Ut[Ke],se=Jt.getItemVisual(lr,"colorFromPalette");if(se){var Se=Jt.ensureUniqueItemVisual(lr,"style"),ge=Gt.getName(Ke)||Ke+"",Ae=Gt.count();Se[Me]=Lt.getColorFromPalette(ge,de,Ae)}})}})}},eo=z(2574),Lo=z(95169),Fa=z(5485),ro=Math.PI;function _s(Rt,Ft){Ft=Ft||{},q.ce(Ft,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Lt=new eo.Z,Gt=new Xt.Z({style:{fill:Ft.maskColor},zlevel:Ft.zlevel,z:1e4});Lt.add(Gt);var Ut=new Lo.ZP({style:{text:Ft.text,fill:Ft.textColor,fontSize:Ft.fontSize,fontWeight:Ft.fontWeight,fontStyle:Ft.fontStyle,fontFamily:Ft.fontFamily},zlevel:Ft.zlevel,z:10001}),Jt=new Xt.Z({style:{fill:"none"},textContent:Ut,textConfig:{position:"right",distance:10},zlevel:Ft.zlevel,z:10001});Lt.add(Jt);var de;return Ft.showSpinner&&(de=new Fa.Z({shape:{startAngle:-ro/2,endAngle:-ro/2+.1,r:Ft.spinnerRadius},style:{stroke:Ft.color,lineCap:"round",lineWidth:Ft.lineWidth},zlevel:Ft.zlevel,z:10001}),de.animateShape(!0).when(1e3,{endAngle:ro*3/2}).start("circularInOut"),de.animateShape(!0).when(1e3,{startAngle:ro*3/2}).delay(300).start("circularInOut"),Lt.add(de)),Lt.resize=function(){var Le=Ut.getBoundingRect().width,Me=Ft.showSpinner?Ft.spinnerRadius:0,Ke=(Rt.getWidth()-Me*2-(Ft.showSpinner&&Le?10:0)-Le)/2-(Ft.showSpinner&&Le?0:5+Le/2)+(Ft.showSpinner?0:Le/2)+(Le?0:Me),lr=Rt.getHeight()/2;Ft.showSpinner&&de.setShape({cx:Ke,cy:lr}),Jt.setShape({x:Ke-Me,y:lr-Me,width:Me*2,height:Me*2}),Gt.setShape({x:0,y:0,width:Rt.getWidth(),height:Rt.getHeight()})},Lt.resize(),Lt}var no=z(85966),io=z(95827),Ga=function(){function Rt(Ft,Lt,Gt,Ut){this._stageTaskMap=(0,q.kW)(),this.ecInstance=Ft,this.api=Lt,Gt=this._dataProcessorHandlers=Gt.slice(),Ut=this._visualHandlers=Ut.slice(),this._allHandlers=Gt.concat(Ut)}return Rt.prototype.restoreData=function(Ft,Lt){Ft.restoreData(Lt),this._stageTaskMap.each(function(Gt){var Ut=Gt.overallTask;Ut&&Ut.dirty()})},Rt.prototype.getPerformArgs=function(Ft,Lt){if(Ft.__pipeline){var Gt=this._pipelineMap.get(Ft.__pipeline.id),Ut=Gt.context,Jt=!Lt&&Gt.progressiveEnabled&&(!Ut||Ut.progressiveRender)&&Ft.__idxInPipeline>Gt.blockIndex,de=Jt?Gt.step:null,Le=Ut&&Ut.modDataCount,Me=Le!=null?Math.ceil(Le/de):null;return{step:de,modBy:Me,modDataCount:Le}}},Rt.prototype.getPipeline=function(Ft){return this._pipelineMap.get(Ft)},Rt.prototype.updateStreamModes=function(Ft,Lt){var Gt=this._pipelineMap.get(Ft.uid),Ut=Ft.getData(),Jt=Ut.count(),de=Gt.progressiveEnabled&&Lt.incrementalPrepareRender&&Jt>=Gt.threshold,Le=Ft.get("large")&&Jt>=Ft.get("largeThreshold"),Me=Ft.get("progressiveChunkMode")==="mod"?Jt:null;Ft.pipelineContext=Gt.context={progressiveRender:de,modDataCount:Me,large:Le}},Rt.prototype.restorePipelines=function(Ft){var Lt=this,Gt=Lt._pipelineMap=(0,q.kW)();Ft.eachSeries(function(Ut){var Jt=Ut.getProgressive(),de=Ut.uid;Gt.set(de,{id:de,head:null,tail:null,threshold:Ut.getProgressiveThreshold(),progressiveEnabled:Jt&&!(Ut.preventIncremental&&Ut.preventIncremental()),blockIndex:-1,step:Math.round(Jt||700),count:0}),Lt._pipe(Ut,Ut.dataTask)})},Rt.prototype.prepareStageTasks=function(){var Ft=this._stageTaskMap,Lt=this.api.getModel(),Gt=this.api;(0,q.S6)(this._allHandlers,function(Ut){var Jt=Ft.get(Ut.uid)||Ft.set(Ut.uid,{}),de="";(0,q.hu)(!(Ut.reset&&Ut.overallReset),de),Ut.reset&&this._createSeriesStageTask(Ut,Jt,Lt,Gt),Ut.overallReset&&this._createOverallStageTask(Ut,Jt,Lt,Gt)},this)},Rt.prototype.prepareView=function(Ft,Lt,Gt,Ut){var Jt=Ft.renderTask,de=Jt.context;de.model=Lt,de.ecModel=Gt,de.api=Ut,Jt.__block=!Ft.incrementalPrepareRender,this._pipe(Lt,Jt)},Rt.prototype.performDataProcessorTasks=function(Ft,Lt){this._performStageTasks(this._dataProcessorHandlers,Ft,Lt,{block:!0})},Rt.prototype.performVisualTasks=function(Ft,Lt,Gt){this._performStageTasks(this._visualHandlers,Ft,Lt,Gt)},Rt.prototype._performStageTasks=function(Ft,Lt,Gt,Ut){Ut=Ut||{};var Jt=!1,de=this;(0,q.S6)(Ft,function(Me,Ke){if(!(Ut.visualType&&Ut.visualType!==Me.visualType)){var lr=de._stageTaskMap.get(Me.uid),se=lr.seriesTaskMap,Se=lr.overallTask;if(Se){var ge,Ae=Se.agentStubMap;Ae.each(function(Ye){Le(Ut,Ye)&&(Ye.dirty(),ge=!0)}),ge&&Se.dirty(),de.updatePayload(Se,Gt);var Re=de.getPerformArgs(Se,Ut.block);Ae.each(function(Ye){Ye.perform(Re)}),Se.perform(Re)&&(Jt=!0)}else se&&se.each(function(Ye,tr){Le(Ut,Ye)&&Ye.dirty();var fr=de.getPerformArgs(Ye,Ut.block);fr.skip=!Me.performRawSeries&&Lt.isSeriesFiltered(Ye.context.model),de.updatePayload(Ye,Gt),Ye.perform(fr)&&(Jt=!0)})}});function Le(Me,Ke){return Me.setDirty&&(!Me.dirtyMap||Me.dirtyMap.get(Ke.__pipeline.id))}this.unfinished=Jt||this.unfinished},Rt.prototype.performSeriesTasks=function(Ft){var Lt;Ft.eachSeries(function(Gt){Lt=Gt.dataTask.perform()||Lt}),this.unfinished=Lt||this.unfinished},Rt.prototype.plan=function(){this._pipelineMap.each(function(Ft){var Lt=Ft.tail;do{if(Lt.__block){Ft.blockIndex=Lt.__idxInPipeline;break}Lt=Lt.getUpstream()}while(Lt)})},Rt.prototype.updatePayload=function(Ft,Lt){Lt!=="remain"&&(Ft.context.payload=Lt)},Rt.prototype._createSeriesStageTask=function(Ft,Lt,Gt,Ut){var Jt=this,de=Lt.seriesTaskMap,Le=Lt.seriesTaskMap=(0,q.kW)(),Me=Ft.seriesType,Ke=Ft.getTargetSeries;Ft.createOnAllSeries?Gt.eachRawSeries(lr):Me?Gt.eachRawSeriesByType(Me,lr):Ke&&Ke(Gt,Ut).each(lr);function lr(se){var Se=se.uid,ge=Le.set(Se,de&&de.get(Se)||(0,no.v)({plan:sl,reset:Tn,count:Wt}));ge.context={model:se,ecModel:Gt,api:Ut,useClearVisual:Ft.isVisual&&!Ft.isLayout,plan:Ft.plan,reset:Ft.reset,scheduler:Jt},Jt._pipe(se,ge)}},Rt.prototype._createOverallStageTask=function(Ft,Lt,Gt,Ut){var Jt=this,de=Lt.overallTask=Lt.overallTask||(0,no.v)({reset:Yn});de.context={ecModel:Gt,api:Ut,overallReset:Ft.overallReset,scheduler:Jt};var Le=de.agentStubMap,Me=de.agentStubMap=(0,q.kW)(),Ke=Ft.seriesType,lr=Ft.getTargetSeries,se=!0,Se=!1,ge="";(0,q.hu)(!Ft.createOnAllSeries,ge),Ke?Gt.eachRawSeriesByType(Ke,Ae):lr?lr(Gt,Ut).each(Ae):(se=!1,(0,q.S6)(Gt.getSeries(),Ae));function Ae(Re){var Ye=Re.uid,tr=Me.set(Ye,Le&&Le.get(Ye)||(Se=!0,(0,no.v)({reset:tu,onDirty:dr})));tr.context={model:Re,overallProgress:se},tr.agent=de,tr.__block=se,Jt._pipe(Re,tr)}Se&&de.dirty()},Rt.prototype._pipe=function(Ft,Lt){var Gt=Ft.uid,Ut=this._pipelineMap.get(Gt);!Ut.head&&(Ut.head=Lt),Ut.tail&&Ut.tail.pipe(Lt),Ut.tail=Lt,Lt.__idxInPipeline=Ut.count++,Lt.__pipeline=Ut},Rt.wrapStageHandler=function(Ft,Lt){return(0,q.mf)(Ft)&&(Ft={overallReset:Ft,seriesType:un(Ft)}),Ft.uid=(0,io.Kr)("stageHandler"),Lt&&(Ft.visualType=Lt),Ft},Rt}();function Yn(Rt){Rt.overallReset(Rt.ecModel,Rt.api,Rt.payload)}function tu(Rt){return Rt.overallProgress&&Tf}function Tf(){this.agent.dirty(),this.getDownstream().dirty()}function dr(){this.agent&&this.agent.dirty()}function sl(Rt){return Rt.plan?Rt.plan(Rt.model,Rt.ecModel,Rt.api,Rt.payload):null}function Tn(Rt){Rt.useClearVisual&&Rt.data.clearAllVisual();var Ft=Rt.resetDefines=(0,xt.kF)(Rt.reset(Rt.model,Rt.ecModel,Rt.api,Rt.payload));return Ft.length>1?(0,q.UI)(Ft,function(Lt,Gt){return Nr(Gt)}):nr}var nr=Nr(0);function Nr(Rt){return function(Ft,Lt){var Gt=Lt.data,Ut=Lt.resetDefines[Rt];if(Ut&&Ut.dataEach)for(var Jt=Ft.start;Jt<Ft.end;Jt++)Ut.dataEach(Gt,Jt);else Ut&&Ut.progress&&Ut.progress(Ft,Gt)}}function Wt(Rt){return Rt.data.count()}function un(Rt){Mr=null;try{Rt(yn,fn)}catch(Ft){}return Mr}var yn={},fn={},Mr;eu(yn,C),eu(fn,ut),yn.eachSeriesByType=yn.eachRawSeriesByType=function(Rt){Mr=Rt},yn.eachComponent=function(Rt){Rt.mainType==="series"&&Rt.subType&&(Mr=Rt.subType)};function eu(Rt,Ft){for(var Lt in Ft.prototype)Rt[Lt]=q.ZT}var ru=Ga,rr=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],mr={color:rr,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],rr]},Er="#B9B8CE",Qe="#100C2A",Zi=function(){return{axisLine:{lineStyle:{color:Er}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},pn=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],za={darkMode:!0,color:pn,backgroundColor:Qe,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Er}},textStyle:{color:Er},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Er}},dataZoom:{borderColor:"#71708A",textStyle:{color:Er},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Er}},timeline:{lineStyle:{color:Er},label:{color:Er},controlStyle:{color:Er,borderColor:Er}},calendar:{itemStyle:{color:Qe},dayLabel:{color:Er},monthLabel:{color:Er},yearLabel:{color:Er}},timeAxis:Zi(),logAxis:Zi(),valueAxis:Zi(),categoryAxis:Zi(),line:{symbol:"circle"},graph:{color:pn},gauge:{title:{color:Er},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Er},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};za.categoryAxis.splitLine.show=!1;var Ge=za,ao=z(71619),ll=function(){function Rt(){}return Rt.prototype.normalizeQuery=function(Ft){var Lt={},Gt={},Ut={};if(q.HD(Ft)){var Jt=(0,ao.u9)(Ft);Lt.mainType=Jt.main||null,Lt.subType=Jt.sub||null}else{var de=["Index","Name","Id"],Le={name:1,dataIndex:1,dataType:1};q.S6(Ft,function(Me,Ke){for(var lr=!1,se=0;se<de.length;se++){var Se=de[se],ge=Ke.lastIndexOf(Se);if(ge>0&&ge===Ke.length-Se.length){var Ae=Ke.slice(0,ge);Ae!=="data"&&(Lt.mainType=Ae,Lt[Se.toLowerCase()]=Me,lr=!0)}}Le.hasOwnProperty(Ke)&&(Gt[Ke]=Me,lr=!0),lr||(Ut[Ke]=Me)})}return{cptQuery:Lt,dataQuery:Gt,otherQuery:Ut}},Rt.prototype.filter=function(Ft,Lt){var Gt=this.eventInfo;if(!Gt)return!0;var Ut=Gt.targetEl,Jt=Gt.packedEvent,de=Gt.model,Le=Gt.view;if(!de||!Le)return!0;var Me=Lt.cptQuery,Ke=Lt.dataQuery;return lr(Me,de,"mainType")&&lr(Me,de,"subType")&&lr(Me,de,"index","componentIndex")&&lr(Me,de,"name")&&lr(Me,de,"id")&&lr(Ke,Jt,"name")&&lr(Ke,Jt,"dataIndex")&&lr(Ke,Jt,"dataType")&&(!Le.filterForExposedEvent||Le.filterForExposedEvent(Ft,Lt.otherQuery,Ut,Jt));function lr(se,Se,ge,Ae){return se[ge]==null||Se[Ae||ge]===se[ge]}},Rt.prototype.afterTrigger=function(){this.eventInfo=null},Rt}(),ni=["symbol","symbolSize","symbolRotate","symbolOffset"],cn=ni.concat(["symbolKeepAspect"]),Gi={createOnAllSeries:!0,performRawSeries:!0,reset:function(Rt,Ft){var Lt=Rt.getData();if(Rt.legendIcon&&Lt.setVisual("legendIcon",Rt.legendIcon),!Rt.hasSymbolVisual)return;for(var Gt={},Ut={},Jt=!1,de=0;de<ni.length;de++){var Le=ni[de],Me=Rt.get(Le);(0,q.mf)(Me)?(Jt=!0,Ut[Le]=Me):Gt[Le]=Me}if(Gt.symbol=Gt.symbol||Rt.defaultSymbol,Lt.setVisual((0,q.l7)({legendIcon:Rt.legendIcon||Gt.symbol,symbolKeepAspect:Rt.get("symbolKeepAspect")},Gt)),Ft.isSeriesFiltered(Rt))return;var Ke=(0,q.XP)(Ut);function lr(se,Se){for(var ge=Rt.getRawValue(Se),Ae=Rt.getDataParams(Se),Re=0;Re<Ke.length;Re++){var Ye=Ke[Re];se.setItemVisual(Se,Ye,Ut[Ye](ge,Ae))}}return{dataEach:Jt?lr:null}}},Va={createOnAllSeries:!0,performRawSeries:!0,reset:function(Rt,Ft){if(!Rt.hasSymbolVisual||Ft.isSeriesFiltered(Rt))return;var Lt=Rt.getData();function Gt(Ut,Jt){for(var de=Ut.getItemModel(Jt),Le=0;Le<cn.length;Le++){var Me=cn[Le],Ke=de.getShallow(Me,!0);Ke!=null&&Ut.setItemVisual(Jt,Me,Ke)}}return{dataEach:Lt.hasItemOption?Gt:null}}},sr=z(53331),Ma=z(13259),oa=z(67849),Io=z(57335),jr=z(57338),vr=z(84515),En=z(83617);function qr(Rt,Ft){Rt.eachRawSeries(function(Lt){if(!Rt.isSeriesFiltered(Lt)){var Gt=Lt.getData();Gt.hasItemVisual()&&Gt.each(function(de){var Le=Gt.getItemVisual(de,"decal");if(Le){var Me=Gt.ensureUniqueItemVisual(de,"style");Me.decal=(0,En.I)(Le,Ft)}});var Ut=Gt.getVisual("decal");if(Ut){var Jt=Gt.getVisual("style");Jt.decal=(0,En.I)(Ut,Ft)}}})}var an=new gt.Z,Ar=an,We=z(47297),_i=z(5536),ma="5.4.2",Tr={zrender:"5.4.3"},tn=1,ka=800,Ro=900,nu=1e3,Ca=2e3,Oo=5e3,Mn=1e3,Kr=1100,Ei=2e3,De=3e3,$i=4e3,fi=4500,oo=4600,ya=5e3,ii=6e3,Bn=7e3,No={PROCESSOR:{FILTER:nu,SERIES_FILTER:ka,STATISTIC:Oo},VISUAL:{LAYOUT:Mn,PROGRESSIVE_LAYOUT:Kr,GLOBAL:Ei,CHART:De,POST_CHART_LAYOUT:oo,COMPONENT:$i,BRUSH:ya,CHART_ITEM:fi,ARIA:ii,DECAL:Bn}},$n="__flagInMainProcess",Br="__pendingUpdate",Cr="__needsUpdateStatus",Pi=/^[a-zA-Z0-9_]+$/,xi="__connectUpdateStatus",Bo=0,iu=1,au=2;function ul(Rt){return function(){for(var Ft=[],Lt=0;Lt<arguments.length;Lt++)Ft[Lt]=arguments[Lt];if(this.isDisposed()){this.id;return}return xs(this,Rt,Ft)}}function ou(Rt){return function(){for(var Ft=[],Lt=0;Lt<arguments.length;Lt++)Ft[Lt]=arguments[Lt];return xs(this,Rt,Ft)}}function xs(Rt,Ft,Lt){return Lt[0]=Lt[0]&&Lt[0].toLowerCase(),gt.Z.prototype[Ft].apply(Rt,Lt)}var Yr=function(Rt){(0,F.ZT)(Ft,Rt);function Ft(){return Rt!==null&&Rt.apply(this,arguments)||this}return Ft}(gt.Z),fl=Yr.prototype;fl.on=ou("on"),fl.off=ou("off");var _a,sa,Fo,xa,qi,Wi,Hn,la,ta,Hi,Ea,Qr,hl,hi,Di,Ua,ci,_n,Ss=function(Rt){(0,F.ZT)(Ft,Rt);function Ft(Lt,Gt,Ut){var Jt=Rt.call(this,new ll)||this;Jt._chartsViews=[],Jt._chartsMap={},Jt._componentsViews=[],Jt._componentsMap={},Jt._pendingActions=[],Ut=Ut||{},(0,q.HD)(Gt)&&(Gt=so[Gt]),Jt._dom=Lt;var de="canvas",Le="auto",Me=!1;if(!1)var Ke,lr;var se=Jt._zr=dt.init(Lt,{renderer:Ut.renderer||de,devicePixelRatio:Ut.devicePixelRatio,width:Ut.width,height:Ut.height,ssr:Ut.ssr,useDirtyRect:(0,q.pD)(Ut.useDirtyRect,Me),useCoarsePointer:(0,q.pD)(Ut.useCoarsePointer,Le),pointerSize:Ut.pointerSize});Jt._ssr=Ut.ssr,Jt._throttledZrFlush=(0,we.P2)((0,q.ak)(se.flush,se),17),Gt=(0,q.d9)(Gt),Gt&&ze(Gt,!0),Jt._theme=Gt,Jt._locale=(0,jr.D0)(Ut.locale||jr.sO),Jt._coordSysMgr=new it.Z;var Se=Jt._api=Di(Jt);function ge(Ae,Re){return Ae.__prio-Re.__prio}return(0,yt.Z)(Pa,ge),(0,yt.Z)(Za,ge),Jt._scheduler=new ru(Jt,Se,Za,Pa),Jt._messageCenter=new Yr,Jt._initEvents(),Jt.resize=(0,q.ak)(Jt.resize,Jt),se.animation.on("frame",Jt._onframe,Jt),Hi(se,Jt),Ea(se,Jt),(0,q.s7)(Jt),Jt}return Ft.prototype._onframe=function(){if(!this._disposed){_n(this);var Lt=this._scheduler;if(this[Br]){var Gt=this[Br].silent;this[$n]=!0;try{_a(this),xa.update.call(this,null,this[Br].updateParams)}catch(Me){throw this[$n]=!1,this[Br]=null,Me}this._zr.flush(),this[$n]=!1,this[Br]=null,la.call(this,Gt),ta.call(this,Gt)}else if(Lt.unfinished){var Ut=tn,Jt=this._model,de=this._api;Lt.unfinished=!1;do{var Le=+new Date;Lt.performSeriesTasks(Jt),Lt.performDataProcessorTasks(Jt),Wi(this,Jt),Lt.performVisualTasks(Jt),hi(this,this._model,de,"remain",{}),Ut-=+new Date-Le}while(Ut>0&&Lt.unfinished);Lt.unfinished||this._zr.flush()}}},Ft.prototype.getDom=function(){return this._dom},Ft.prototype.getId=function(){return this.id},Ft.prototype.getZr=function(){return this._zr},Ft.prototype.isSSR=function(){return this._ssr},Ft.prototype.setOption=function(Lt,Gt,Ut){if(!this[$n]){if(this._disposed){this.id;return}var Jt,de,Le;if((0,q.Kn)(Gt)&&(Ut=Gt.lazyUpdate,Jt=Gt.silent,de=Gt.replaceMerge,Le=Gt.transition,Gt=Gt.notMerge),this[$n]=!0,!this._model||Gt){var Me=new Dt(this._api),Ke=this._theme,lr=this._model=new C;lr.scheduler=this._scheduler,lr.ssr=this._ssr,lr.init(null,null,null,Ke,this._locale,Me)}this._model.setOption(Lt,{replaceMerge:de},ua);var se={seriesTransition:Le,optionChanged:!0};if(Ut)this[Br]={silent:Jt,updateParams:se},this[$n]=!1,this.getZr().wakeUp();else{try{_a(this),xa.update.call(this,null,se)}catch(Se){throw this[Br]=null,this[$n]=!1,Se}this._ssr||this._zr.flush(),this[Br]=null,this[$n]=!1,la.call(this,Jt),ta.call(this,Jt)}}},Ft.prototype.setTheme=function(){(0,Ma.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ft.prototype.getModel=function(){return this._model},Ft.prototype.getOption=function(){return this._model&&this._model.getOption()},Ft.prototype.getWidth=function(){return this._zr.getWidth()},Ft.prototype.getHeight=function(){return this._zr.getHeight()},Ft.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||vt.Z.hasGlobalWindow&&window.devicePixelRatio||1},Ft.prototype.getRenderedCanvas=function(Lt){return this.renderToCanvas(Lt)},Ft.prototype.renderToCanvas=function(Lt){Lt=Lt||{};var Gt=this._zr.painter;return Gt.getRenderedCanvas({backgroundColor:Lt.backgroundColor||this._model.get("backgroundColor"),pixelRatio:Lt.pixelRatio||this.getDevicePixelRatio()})},Ft.prototype.renderToSVGString=function(Lt){Lt=Lt||{};var Gt=this._zr.painter;return Gt.renderToString({useViewBox:Lt.useViewBox})},Ft.prototype.getSvgDataURL=function(){if(vt.Z.svgSupported){var Lt=this._zr,Gt=Lt.storage.getDisplayList();return(0,q.S6)(Gt,function(Ut){Ut.stopAnimation(null,!0)}),Lt.painter.toDataURL()}},Ft.prototype.getDataURL=function(Lt){if(this._disposed){this.id;return}Lt=Lt||{};var Gt=Lt.excludeComponents,Ut=this._model,Jt=[],de=this;(0,q.S6)(Gt,function(Me){Ut.eachComponent({mainType:Me},function(Ke){var lr=de._componentsMap[Ke.__viewId];lr.group.ignore||(Jt.push(lr),lr.group.ignore=!0)})});var Le=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(Lt).toDataURL("image/"+(Lt&&Lt.type||"png"));return(0,q.S6)(Jt,function(Me){Me.group.ignore=!1}),Le},Ft.prototype.getConnectedDataURL=function(Lt){if(this._disposed){this.id;return}var Gt=Lt.type==="svg",Ut=this.group,Jt=Math.min,de=Math.max,Le=1/0;if(zo[Ut]){var Me=Le,Ke=Le,lr=-Le,se=-Le,Se=[],ge=Lt&&Lt.pixelRatio||this.getDevicePixelRatio();(0,q.S6)(Sa,function(hr,Fr){if(hr.group===Ut){var en=Gt?hr.getZr().painter.getSvgDom().innerHTML:hr.renderToCanvas((0,q.d9)(Lt)),Ur=hr.getDom().getBoundingClientRect();Me=Jt(Ur.left,Me),Ke=Jt(Ur.top,Ke),lr=de(Ur.right,lr),se=de(Ur.bottom,se),Se.push({dom:en,left:Ur.left,top:Ur.top})}}),Me*=ge,Ke*=ge,lr*=ge,se*=ge;var Ae=lr-Me,Re=se-Ke,Ye=We.qW.createCanvas(),tr=dt.init(Ye,{renderer:Gt?"svg":"canvas"});if(tr.resize({width:Ae,height:Re}),Gt){var fr="";return(0,q.S6)(Se,function(hr){var Fr=hr.left-Me,en=hr.top-Ke;fr+='<g transform="translate('+Fr+","+en+')">'+hr.dom+"</g>"}),tr.painter.getSvgRoot().innerHTML=fr,Lt.connectedBackgroundColor&&tr.painter.setBackgroundColor(Lt.connectedBackgroundColor),tr.refreshImmediately(),tr.painter.toDataURL()}else return Lt.connectedBackgroundColor&&tr.add(new Xt.Z({shape:{x:0,y:0,width:Ae,height:Re},style:{fill:Lt.connectedBackgroundColor}})),(0,q.S6)(Se,function(hr){var Fr=new $t.ZP({style:{x:hr.left*ge-Me,y:hr.top*ge-Ke,image:hr.dom}});tr.add(Fr)}),tr.refreshImmediately(),Ye.toDataURL("image/"+(Lt&&Lt.type||"png"))}else return this.getDataURL(Lt)},Ft.prototype.convertToPixel=function(Lt,Gt){return qi(this,"convertToPixel",Lt,Gt)},Ft.prototype.convertFromPixel=function(Lt,Gt){return qi(this,"convertFromPixel",Lt,Gt)},Ft.prototype.containPixel=function(Lt,Gt){if(this._disposed){this.id;return}var Ut=this._model,Jt,de=xt.pm(Ut,Lt);return(0,q.S6)(de,function(Le,Me){Me.indexOf("Models")>=0&&(0,q.S6)(Le,function(Ke){var lr=Ke.coordinateSystem;if(lr&&lr.containPoint)Jt=Jt||!!lr.containPoint(Gt);else if(Me==="seriesModels"){var se=this._chartsMap[Ke.__viewId];se&&se.containPoint&&(Jt=Jt||se.containPoint(Gt,Ke))}},this)},this),!!Jt},Ft.prototype.getVisual=function(Lt,Gt){var Ut=this._model,Jt=xt.pm(Ut,Lt,{defaultMainType:"series"}),de=Jt.seriesModel,Le=de.getData(),Me=Jt.hasOwnProperty("dataIndexInside")?Jt.dataIndexInside:Jt.hasOwnProperty("dataIndex")?Le.indexOfRawIndex(Jt.dataIndex):null;return Me!=null?(0,sr.Or)(Le,Me,Gt):(0,sr.UL)(Le,Gt)},Ft.prototype.getViewOfComponentModel=function(Lt){return this._componentsMap[Lt.__viewId]},Ft.prototype.getViewOfSeriesModel=function(Lt){return this._chartsMap[Lt.__viewId]},Ft.prototype._initEvents=function(){var Lt=this;(0,q.S6)(Li,function(Gt){var Ut=function(Jt){var de=Lt.getModel(),Le=Jt.target,Me,Ke=Gt==="globalout";if(Ke?Me={}:Le&&(0,vr.o)(Le,function(Ae){var Re=(0,pe.A)(Ae);if(Re&&Re.dataIndex!=null){var Ye=Re.dataModel||de.getSeriesByIndex(Re.seriesIndex);return Me=Ye&&Ye.getDataParams(Re.dataIndex,Re.dataType)||{},!0}else if(Re.eventData)return Me=(0,q.l7)({},Re.eventData),!0},!0),Me){var lr=Me.componentType,se=Me.componentIndex;(lr==="markLine"||lr==="markPoint"||lr==="markArea")&&(lr="series",se=Me.seriesIndex);var Se=lr&&se!=null&&de.getComponent(lr,se),ge=Se&&Lt[Se.mainType==="series"?"_chartsMap":"_componentsMap"][Se.__viewId];Me.event=Jt,Me.type=Gt,Lt._$eventProcessor.eventInfo={targetEl:Le,packedEvent:Me,model:Se,view:ge},Lt.trigger(Gt,Me)}};Ut.zrEventfulCallAtLast=!0,Lt._zr.on(Gt,Ut,Lt)}),(0,q.S6)(Dn,function(Gt,Ut){Lt._messageCenter.on(Ut,function(Jt){this.trigger(Ut,Jt)},Lt)}),(0,q.S6)(["selectchanged"],function(Gt){Lt._messageCenter.on(Gt,function(Ut){this.trigger(Gt,Ut)},Lt)}),(0,oa.s)(this._messageCenter,this,this._api)},Ft.prototype.isDisposed=function(){return this._disposed},Ft.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},Ft.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var Lt=this.getDom();Lt&&xt.P$(this.getDom(),Vo,"");var Gt=this,Ut=Gt._api,Jt=Gt._model;(0,q.S6)(Gt._componentsViews,function(de){de.dispose(Jt,Ut)}),(0,q.S6)(Gt._chartsViews,function(de){de.dispose(Jt,Ut)}),Gt._zr.dispose(),Gt._dom=Gt._model=Gt._chartsMap=Gt._componentsMap=Gt._chartsViews=Gt._componentsViews=Gt._scheduler=Gt._api=Gt._zr=Gt._throttledZrFlush=Gt._theme=Gt._coordSysMgr=Gt._messageCenter=null,delete Sa[Gt.id]},Ft.prototype.resize=function(Lt){if(!this[$n]){if(this._disposed){this.id;return}this._zr.resize(Lt);var Gt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!Gt){var Ut=Gt.resetOption("media"),Jt=Lt&&Lt.silent;this[Br]&&(Jt==null&&(Jt=this[Br].silent),Ut=!0,this[Br]=null),this[$n]=!0;try{Ut&&_a(this),xa.update.call(this,{type:"resize",animation:(0,q.l7)({duration:0},Lt&&Lt.animation)})}catch(de){throw this[$n]=!1,de}this[$n]=!1,la.call(this,Jt),ta.call(this,Jt)}}},Ft.prototype.showLoading=function(Lt,Gt){if(this._disposed){this.id;return}if((0,q.Kn)(Lt)&&(Gt=Lt,Lt=""),Lt=Lt||"default",this.hideLoading(),!!Ts[Lt]){var Ut=Ts[Lt](this._api,Gt),Jt=this._zr;this._loadingFX=Ut,Jt.add(Ut)}},Ft.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Ft.prototype.makeActionFromEvent=function(Lt){var Gt=(0,q.l7)({},Lt);return Gt.type=Dn[Lt.type],Gt},Ft.prototype.dispatchAction=function(Lt,Gt){if(this._disposed){this.id;return}if((0,q.Kn)(Gt)||(Gt={silent:!!Gt}),!!Go[Lt.type]&&this._model){if(this[$n]){this._pendingActions.push(Lt);return}var Ut=Gt.silent;Hn.call(this,Lt,Ut);var Jt=Gt.flush;Jt?this._zr.flush():Jt!==!1&&vt.Z.browser.weChat&&this._throttledZrFlush(),la.call(this,Ut),ta.call(this,Ut)}},Ft.prototype.updateLabelLayout=function(){Ar.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ft.prototype.appendData=function(Lt){if(this._disposed){this.id;return}var Gt=Lt.seriesIndex,Ut=this.getModel(),Jt=Ut.getSeriesByIndex(Gt);Jt.appendData(Lt),this._scheduler.unfinished=!0,this.getZr().wakeUp()},Ft.internalField=function(){_a=function(se){var Se=se._scheduler;Se.restorePipelines(se._model),Se.prepareStageTasks(),sa(se,!0),sa(se,!1),Se.plan()},sa=function(se,Se){for(var ge=se._model,Ae=se._scheduler,Re=Se?se._componentsViews:se._chartsViews,Ye=Se?se._componentsMap:se._chartsMap,tr=se._zr,fr=se._api,hr=0;hr<Re.length;hr++)Re[hr].__alive=!1;Se?ge.eachComponent(function(Ur,wn){Ur!=="series"&&Fr(wn)}):ge.eachSeries(Fr);function Fr(Ur){var wn=Ur.__requireNewView;Ur.__requireNewView=!1;var wi="_ec_"+Ur.id+"_"+Ur.type,Rn=!wn&&Ye[wi];if(!Rn){var gn=(0,ao.u9)(Ur.type),wa=Se?Ee.Z.getClass(gn.main,gn.sub):Fe.Z.getClass(gn.sub);Rn=new wa,Rn.init(ge,fr),Ye[wi]=Rn,Re.push(Rn),tr.add(Rn.group)}Ur.__viewId=Rn.__id=wi,Rn.__alive=!0,Rn.__model=Ur,Rn.group.__ecComponentInfo={mainType:Ur.mainType,index:Ur.componentIndex},!Se&&Ae.prepareView(Rn,Ur,ge,fr)}for(var hr=0;hr<Re.length;){var en=Re[hr];en.__alive?hr++:(!Se&&en.renderTask.dispose(),tr.remove(en.group),en.dispose(ge,fr),Re.splice(hr,1),Ye[en.__id]===en&&delete Ye[en.__id],en.__id=en.group.__ecComponentInfo=null)}},Fo=function(se,Se,ge,Ae,Re){var Ye=se._model;if(Ye.setUpdatePayload(ge),!Ae){(0,q.S6)([].concat(se._componentsViews).concat(se._chartsViews),en);return}var tr={};tr[Ae+"Id"]=ge[Ae+"Id"],tr[Ae+"Index"]=ge[Ae+"Index"],tr[Ae+"Name"]=ge[Ae+"Name"];var fr={mainType:Ae,query:tr};Re&&(fr.subType=Re);var hr=ge.excludeSeriesId,Fr;hr!=null&&(Fr=(0,q.kW)(),(0,q.S6)(xt.kF(hr),function(Ur){var wn=xt.U5(Ur,null);wn!=null&&Fr.set(wn,!0)})),Ye&&Ye.eachComponent(fr,function(Ur){var wn=Fr&&Fr.get(Ur.id)!=null;if(!wn)if((0,ve.xp)(ge))if(Ur instanceof le.Z)ge.type===ve.Ki&&!ge.notBlur&&!Ur.get(["emphasis","disabled"])&&(0,ve.UL)(Ur,ge,se._api);else{var wi=(0,ve.oJ)(Ur.mainType,Ur.componentIndex,ge.name,se._api),Rn=wi.focusSelf,gn=wi.dispatchers;ge.type===ve.Ki&&Rn&&!ge.notBlur&&(0,ve.zI)(Ur.mainType,Ur.componentIndex,se._api),gn&&(0,q.S6)(gn,function(wa){ge.type===ve.Ki?(0,ve.fD)(wa):(0,ve.Mh)(wa)})}else(0,ve.aG)(ge)&&Ur instanceof le.Z&&((0,ve.og)(Ur,ge,se._api),(0,ve.ci)(Ur),ci(se))},se),Ye&&Ye.eachComponent(fr,function(Ur){var wn=Fr&&Fr.get(Ur.id)!=null;wn||en(se[Ae==="series"?"_chartsMap":"_componentsMap"][Ur.__viewId])},se);function en(Ur){Ur&&Ur.__alive&&Ur[Se]&&Ur[Se](Ur.__model,Ye,se._api,ge)}},xa={prepareAndUpdate:function(se){_a(this),xa.update.call(this,se,{optionChanged:se.newOption!=null})},update:function(se,Se){var ge=this._model,Ae=this._api,Re=this._zr,Ye=this._coordSysMgr,tr=this._scheduler;if(ge){ge.setUpdatePayload(se),tr.restoreData(ge,se),tr.performSeriesTasks(ge),Ye.create(ge,Ae),tr.performDataProcessorTasks(ge,se),Wi(this,ge),Ye.update(ge,Ae),Lt(ge),tr.performVisualTasks(ge,se),Qr(this,ge,Ae,se,Se);var fr=ge.get("backgroundColor")||"transparent",hr=ge.get("darkMode");Re.setBackgroundColor(fr),hr!=null&&hr!=="auto"&&Re.setDarkMode(hr),Ar.trigger("afterupdate",ge,Ae)}},updateTransform:function(se){var Se=this,ge=this._model,Ae=this._api;if(ge){ge.setUpdatePayload(se);var Re=[];ge.eachComponent(function(tr,fr){if(tr!=="series"){var hr=Se.getViewOfComponentModel(fr);if(hr&&hr.__alive)if(hr.updateTransform){var Fr=hr.updateTransform(fr,ge,Ae,se);Fr&&Fr.update&&Re.push(hr)}else Re.push(hr)}});var Ye=(0,q.kW)();ge.eachSeries(function(tr){var fr=Se._chartsMap[tr.__viewId];if(fr.updateTransform){var hr=fr.updateTransform(tr,ge,Ae,se);hr&&hr.update&&Ye.set(tr.uid,1)}else Ye.set(tr.uid,1)}),Lt(ge),this._scheduler.performVisualTasks(ge,se,{setDirty:!0,dirtyMap:Ye}),hi(this,ge,Ae,se,{},Ye),Ar.trigger("afterupdate",ge,Ae)}},updateView:function(se){var Se=this._model;Se&&(Se.setUpdatePayload(se),Fe.Z.markUpdateMethod(se,"updateView"),Lt(Se),this._scheduler.performVisualTasks(Se,se,{setDirty:!0}),Qr(this,Se,this._api,se,{}),Ar.trigger("afterupdate",Se,this._api))},updateVisual:function(se){var Se=this,ge=this._model;ge&&(ge.setUpdatePayload(se),ge.eachSeries(function(Ae){Ae.getData().clearAllVisual()}),Fe.Z.markUpdateMethod(se,"updateVisual"),Lt(ge),this._scheduler.performVisualTasks(ge,se,{visualType:"visual",setDirty:!0}),ge.eachComponent(function(Ae,Re){if(Ae!=="series"){var Ye=Se.getViewOfComponentModel(Re);Ye&&Ye.__alive&&Ye.updateVisual(Re,ge,Se._api,se)}}),ge.eachSeries(function(Ae){var Re=Se._chartsMap[Ae.__viewId];Re.updateVisual(Ae,ge,Se._api,se)}),Ar.trigger("afterupdate",ge,this._api))},updateLayout:function(se){xa.update.call(this,se)}},qi=function(se,Se,ge,Ae){if(se._disposed){se.id;return}for(var Re=se._model,Ye=se._coordSysMgr.getCoordinateSystems(),tr,fr=xt.pm(Re,ge),hr=0;hr<Ye.length;hr++){var Fr=Ye[hr];if(Fr[Se]&&(tr=Fr[Se](Re,fr,Ae))!=null)return tr}},Wi=function(se,Se){var ge=se._chartsMap,Ae=se._scheduler;Se.eachSeries(function(Re){Ae.updateStreamModes(Re,ge[Re.__viewId])})},Hn=function(se,Se){var ge=this,Ae=this.getModel(),Re=se.type,Ye=se.escapeConnect,tr=Go[Re],fr=tr.actionInfo,hr=(fr.update||"update").split(":"),Fr=hr.pop(),en=hr[0]!=null&&(0,ao.u9)(hr[0]);this[$n]=!0;var Ur=[se],wn=!1;se.batch&&(wn=!0,Ur=(0,q.UI)(se.batch,function(ra){return ra=(0,q.ce)((0,q.l7)({},ra),se),ra.batch=null,ra}));var wi=[],Rn,gn=(0,ve.aG)(se),wa=(0,ve.xp)(se);if(wa&&(0,ve.T5)(this._api),(0,q.S6)(Ur,function(ra){if(Rn=tr.action(ra,ge._model,ge._api),Rn=Rn||(0,q.l7)({},ra),Rn.type=fr.event||Rn.type,wi.push(Rn),wa){var bf=xt.zH(se),uc=bf.queryOptionMap,fc=bf.mainTypeSpecified,qn=fc?uc.keys()[0]:"series";Fo(ge,Fr,ra,qn),ci(ge)}else gn?(Fo(ge,Fr,ra,"series"),ci(ge)):en&&Fo(ge,Fr,ra,en.main,en.sub)}),Fr!=="none"&&!wa&&!gn&&!en)try{this[Br]?(_a(this),xa.update.call(this,se),this[Br]=null):xa[Fr].call(this,se)}catch(ra){throw this[$n]=!1,ra}if(wn?Rn={type:fr.event||Re,escapeConnect:Ye,batch:wi}:Rn=wi[0],this[$n]=!1,!Se){var uu=this._messageCenter;if(uu.trigger(Rn.type,Rn),gn){var bs={type:"selectchanged",escapeConnect:Ye,selected:(0,ve.C5)(Ae),isFromClick:se.isFromClick||!1,fromAction:se.type,fromActionPayload:se};uu.trigger(bs.type,bs)}}},la=function(se){for(var Se=this._pendingActions;Se.length;){var ge=Se.shift();Hn.call(this,ge,se)}},ta=function(se){!se&&this.trigger("updated")},Hi=function(se,Se){se.on("rendered",function(ge){Se.trigger("rendered",ge),se.animation.isFinished()&&!Se[Br]&&!Se._scheduler.unfinished&&!Se._pendingActions.length&&Se.trigger("finished")})},Ea=function(se,Se){se.on("mouseover",function(ge){var Ae=ge.target,Re=(0,vr.o)(Ae,ve.Av);Re&&((0,ve.$l)(Re,ge,Se._api),ci(Se))}).on("mouseout",function(ge){var Ae=ge.target,Re=(0,vr.o)(Ae,ve.Av);Re&&((0,ve.xr)(Re,ge,Se._api),ci(Se))}).on("click",function(ge){var Ae=ge.target,Re=(0,vr.o)(Ae,function(fr){return(0,pe.A)(fr).dataIndex!=null},!0);if(Re){var Ye=Re.selected?"unselect":"select",tr=(0,pe.A)(Re);Se._api.dispatchAction({type:Ye,dataType:tr.dataType,dataIndexInside:tr.dataIndex,seriesIndex:tr.seriesIndex,isFromClick:!0})}})};function Lt(se){se.clearColorPalette(),se.eachSeries(function(Se){Se.clearColorPalette()})}function Gt(se){var Se=[],ge=[],Ae=!1;if(se.eachComponent(function(fr,hr){var Fr=hr.get("zlevel")||0,en=hr.get("z")||0,Ur=hr.getZLevelKey();Ae=Ae||!!Ur,(fr==="series"?ge:Se).push({zlevel:Fr,z:en,idx:hr.componentIndex,type:fr,key:Ur})}),Ae){var Re=Se.concat(ge),Ye,tr;(0,yt.Z)(Re,function(fr,hr){return fr.zlevel===hr.zlevel?fr.z-hr.z:fr.zlevel-hr.zlevel}),(0,q.S6)(Re,function(fr){var hr=se.getComponent(fr.type,fr.idx),Fr=fr.zlevel,en=fr.key;Ye!=null&&(Fr=Math.max(Ye,Fr)),en?(Fr===Ye&&en!==tr&&Fr++,tr=en):tr&&(Fr===Ye&&Fr++,tr=""),Ye=Fr,hr.setZLevel(Fr)})}}Qr=function(se,Se,ge,Ae,Re){Gt(Se),hl(se,Se,ge,Ae,Re),(0,q.S6)(se._chartsViews,function(Ye){Ye.__alive=!1}),hi(se,Se,ge,Ae,Re),(0,q.S6)(se._chartsViews,function(Ye){Ye.__alive||Ye.remove(Se,ge)})},hl=function(se,Se,ge,Ae,Re,Ye){(0,q.S6)(Ye||se._componentsViews,function(tr){var fr=tr.__model;Ke(fr,tr),tr.render(fr,Se,ge,Ae),Le(fr,tr),lr(fr,tr)})},hi=function(se,Se,ge,Ae,Re,Ye){var tr=se._scheduler;Re=(0,q.l7)(Re||{},{updatedSeries:Se.getSeries()}),Ar.trigger("series:beforeupdate",Se,ge,Re);var fr=!1;Se.eachSeries(function(hr){var Fr=se._chartsMap[hr.__viewId];Fr.__alive=!0;var en=Fr.renderTask;tr.updatePayload(en,Ae),Ke(hr,Fr),Ye&&Ye.get(hr.uid)&&en.dirty(),en.perform(tr.getPerformArgs(en))&&(fr=!0),Fr.group.silent=!!hr.get("silent"),de(hr,Fr),(0,ve.ci)(hr)}),tr.unfinished=fr||tr.unfinished,Ar.trigger("series:layoutlabels",Se,ge,Re),Ar.trigger("series:transition",Se,ge,Re),Se.eachSeries(function(hr){var Fr=se._chartsMap[hr.__viewId];Le(hr,Fr),lr(hr,Fr)}),Jt(se,Se),Ar.trigger("series:afterupdate",Se,ge,Re)},ci=function(se){se[Cr]=!0,se.getZr().wakeUp()},_n=function(se){se[Cr]&&(se.getZr().storage.traverse(function(Se){ie.eq(Se)||Ut(Se)}),se[Cr]=!1)};function Ut(se){for(var Se=[],ge=se.currentStates,Ae=0;Ae<ge.length;Ae++){var Re=ge[Ae];Re==="emphasis"||Re==="blur"||Re==="select"||Se.push(Re)}se.selected&&se.states.select&&Se.push("select"),se.hoverState===ve.wU&&se.states.emphasis?Se.push("emphasis"):se.hoverState===ve.CX&&se.states.blur&&Se.push("blur"),se.useStates(Se)}function Jt(se,Se){var ge=se._zr,Ae=ge.storage,Re=0;Ae.traverse(function(Ye){Ye.isGroup||Re++}),Re>Se.get("hoverLayerThreshold")&&!vt.Z.node&&!vt.Z.worker&&Se.eachSeries(function(Ye){if(!Ye.preventUsingHoverLayer){var tr=se._chartsMap[Ye.__viewId];tr.__alive&&tr.eachRendered(function(fr){fr.states.emphasis&&(fr.states.emphasis.hoverLayer=!0)})}})}function de(se,Se){var ge=se.get("blendMode")||null;Se.eachRendered(function(Ae){Ae.isGroup||(Ae.style.blend=ge)})}function Le(se,Se){if(!se.preventAutoZ){var ge=se.get("z")||0,Ae=se.get("zlevel")||0;Se.eachRendered(function(Re){return Me(Re,ge,Ae,-1/0),!0})}}function Me(se,Se,ge,Ae){var Re=se.getTextContent(),Ye=se.getTextGuideLine(),tr=se.isGroup;if(tr)for(var fr=se.childrenRef(),hr=0;hr<fr.length;hr++)Ae=Math.max(Me(fr[hr],Se,ge,Ae),Ae);else se.z=Se,se.zlevel=ge,Ae=Math.max(se.z2,Ae);if(Re&&(Re.z=Se,Re.zlevel=ge,isFinite(Ae)&&(Re.z2=Ae+2)),Ye){var Fr=se.textGuideLineConfig;Ye.z=Se,Ye.zlevel=ge,isFinite(Ae)&&(Ye.z2=Ae+(Fr&&Fr.showAbove?1:-1))}return Ae}function Ke(se,Se){Se.eachRendered(function(ge){if(!ie.eq(ge)){var Ae=ge.getTextContent(),Re=ge.getTextGuideLine();ge.stateTransition&&(ge.stateTransition=null),Ae&&Ae.stateTransition&&(Ae.stateTransition=null),Re&&Re.stateTransition&&(Re.stateTransition=null),ge.hasState()?(ge.prevStates=ge.currentStates,ge.clearStates()):ge.prevStates&&(ge.prevStates=null)}})}function lr(se,Se){var ge=se.getModel("stateAnimation"),Ae=se.isAnimationEnabled(),Re=ge.get("duration"),Ye=Re>0?{duration:Re,delay:ge.get("delay"),easing:ge.get("easing")}:null;Se.eachRendered(function(tr){if(tr.states&&tr.states.emphasis){if(ie.eq(tr))return;if(tr instanceof Zt.ZP&&(0,ve.e9)(tr),tr.__dirty){var fr=tr.prevStates;fr&&tr.useStates(fr)}if(Ae){tr.stateTransition=Ye;var hr=tr.getTextContent(),Fr=tr.getTextGuideLine();hr&&(hr.stateTransition=Ye),Fr&&(Fr.stateTransition=Ye)}tr.__dirty&&Ut(tr)}})}Di=function(se){return new(function(Se){(0,F.ZT)(ge,Se);function ge(){return Se!==null&&Se.apply(this,arguments)||this}return ge.prototype.getCoordinateSystems=function(){return se._coordSysMgr.getCoordinateSystems()},ge.prototype.getComponentByElement=function(Ae){for(;Ae;){var Re=Ae.__ecComponentInfo;if(Re!=null)return se._model.getComponent(Re.mainType,Re.index);Ae=Ae.parent}},ge.prototype.enterEmphasis=function(Ae,Re){(0,ve.fD)(Ae,Re),ci(se)},ge.prototype.leaveEmphasis=function(Ae,Re){(0,ve.Mh)(Ae,Re),ci(se)},ge.prototype.enterBlur=function(Ae){(0,ve.SX)(Ae),ci(se)},ge.prototype.leaveBlur=function(Ae){(0,ve.VP)(Ae),ci(se)},ge.prototype.enterSelect=function(Ae){(0,ve.XX)(Ae),ci(se)},ge.prototype.leaveSelect=function(Ae){(0,ve.SJ)(Ae),ci(se)},ge.prototype.getModel=function(){return se.getModel()},ge.prototype.getViewOfComponentModel=function(Ae){return se.getViewOfComponentModel(Ae)},ge.prototype.getViewOfSeriesModel=function(Ae){return se.getViewOfSeriesModel(Ae)},ge}(ut))(se)},Ua=function(se){function Se(ge,Ae){for(var Re=0;Re<ge.length;Re++){var Ye=ge[Re];Ye[xi]=Ae}}(0,q.S6)(Dn,function(ge,Ae){se._messageCenter.on(Ae,function(Re){if(zo[se.group]&&se[xi]!==Bo){if(Re&&Re.escapeConnect)return;var Ye=se.makeActionFromEvent(Re),tr=[];(0,q.S6)(Sa,function(fr){fr!==se&&fr.group===se.group&&tr.push(fr)}),Se(tr,Bo),(0,q.S6)(tr,function(fr){fr[xi]!==iu&&fr.dispatchAction(Ye)}),Se(tr,au)}})})}}(),Ft}(gt.Z),cl=Ss.prototype;cl.on=ul("on"),cl.off=ul("off"),cl.one=function(Rt,Ft,Lt){var Gt=this;(0,Ma.Sh)("ECharts#one is deprecated.");function Ut(){for(var Jt=[],de=0;de<arguments.length;de++)Jt[de]=arguments[de];Ft&&Ft.apply&&Ft.apply(this,Jt),Gt.off(Rt,Ut)}this.on.call(this,Rt,Ut,Lt)};var Li=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function vl(Rt){}var Go={},Dn={},Za=[],ua=[],Pa=[],so={},Ts={},Sa={},zo={},Wa=+new Date-0,Df=+new Date-0,Vo="_echarts_instance_";function Ds(Rt,Ft,Lt){var Gt=!(Lt&&Lt.ssr);if(Gt){var Ut=Ta(Rt);if(Ut)return Ut}var Jt=new Ss(Rt,Ft,Lt);return Jt.id="ec_"+Wa++,Sa[Jt.id]=Jt,Gt&&xt.P$(Rt,Vo,Jt.id),Ua(Jt),Ar.trigger("afterinit",Jt),Jt}function lc(Rt){if(isArray(Rt)){var Ft=Rt;Rt=null,each(Ft,function(Lt){Lt.group!=null&&(Rt=Lt.group)}),Rt=Rt||"g_"+Df++,each(Ft,function(Lt){Lt.group=Rt})}return zo[Rt]=!0,Rt}function dl(Rt){zo[Rt]=!1}var wf=null;function pl(Rt){isString(Rt)?Rt=Sa[Rt]:Rt instanceof Ss||(Rt=Ta(Rt)),Rt instanceof Ss&&!Rt.isDisposed()&&Rt.dispose()}function Ta(Rt){return Sa[xt.IL(Rt,Vo)]}function Af(Rt){return Sa[Rt]}function lo(Rt,Ft){so[Rt]=Ft}function su(Rt){(0,q.cq)(ua,Rt)<0&&ua.push(Rt)}function ws(Rt,Ft){Hr(Za,Rt,Ft,Ca)}function Ha(Rt){As("afterinit",Rt)}function uo(Rt){As("afterupdate",Rt)}function As(Rt,Ft){Ar.on(Rt,Ft)}function Gn(Rt,Ft,Lt){(0,q.mf)(Ft)&&(Lt=Ft,Ft="");var Gt=(0,q.Kn)(Rt)?Rt.type:[Rt,Rt={event:Ft}][0];Rt.event=(Rt.event||Gt).toLowerCase(),Ft=Rt.event,!Dn[Ft]&&((0,q.hu)(Pi.test(Gt)&&Pi.test(Ft)),Go[Gt]||(Go[Gt]={action:Lt,actionInfo:Rt}),Dn[Ft]=Gt)}function ko(Rt,Ft){it.Z.register(Rt,Ft)}function Da(Rt){var Ft=it.Z.get(Rt);if(Ft)return Ft.getDimensionsInfo?Ft.getDimensionsInfo():Ft.dimensions.slice()}function lu(Rt,Ft){Hr(Pa,Rt,Ft,Mn,"layout")}function La(Rt,Ft){Hr(Pa,Rt,Ft,De,"visual")}var Uo=[];function Hr(Rt,Ft,Lt,Gt,Ut){if(((0,q.mf)(Ft)||(0,q.Kn)(Ft))&&(Lt=Ft,Ft=Gt),!((0,q.cq)(Uo,Lt)>=0)){Uo.push(Lt);var Jt=ru.wrapStageHandler(Lt,Ut);Jt.__prio=Ft,Jt.__raw=Lt,Rt.push(Jt)}}function ea(Rt,Ft){Ts[Rt]=Ft}function Zo(Rt){setPlatformAPI({createCanvas:Rt})}function fo(Rt,Ft,Lt){var Gt=(0,_i.C)("registerMap");Gt&&Gt(Rt,Ft,Lt)}function gl(Rt){var Ft=(0,_i.C)("getMap");return Ft&&Ft(Rt)}var Wo=Io.DA;La(Ei,yi),La(fi,Ci),La(fi,ri),La(Ei,Gi),La(fi,Va),La(Bn,qr),su(ze),ws(Ro,He),ea("default",_s),Gn({type:ve.Ki,event:ve.Ki,update:ve.Ki},q.ZT),Gn({type:ve.yx,event:ve.yx,update:ve.yx},q.ZT),Gn({type:ve.Hg,event:ve.Hg,update:ve.Hg},q.ZT),Gn({type:ve.JQ,event:ve.JQ,update:ve.JQ},q.ZT),Gn({type:ve.iK,event:ve.iK,update:ve.iK},q.ZT),lo("light",mr),lo("dark",Ge);var Xn={}},5536:function(Pe,ee,z){z.d(ee,{C:function(){return q},M:function(){return dt}});var F={};function dt(vt,yt){F[vt]=yt}function q(vt){return F[vt]}},57338:function(Pe,ee,z){z.d(ee,{sO:function(){return ot},D0:function(){return Y},Li:function(){return st},G8:function(){return H}});var F=z(97853),dt=z(54490),q={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},vt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}},yt=z(70324),gt="ZH",xt="EN",nt=xt,Z={},tt={},ot=dt.Z.domSupported?function(){var J=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return J.indexOf(gt)>-1?gt:nt}():nt;function W(J,g){J=J.toUpperCase(),tt[J]=new F.Z(g),Z[J]=g}function Y(J){if((0,yt.HD)(J)){var g=Z[J.toUpperCase()]||{};return J===gt||J===xt?(0,yt.d9)(g):(0,yt.TS)((0,yt.d9)(g),(0,yt.d9)(Z[nt]),!1)}else return(0,yt.TS)((0,yt.d9)(J),(0,yt.d9)(Z[nt]),!1)}function H(J){return tt[J]}function st(){return tt[nt]}W(xt,q),W(gt,vt)},85966:function(Pe,ee,z){z.d(ee,{v:function(){return dt}});var F=z(70324);function dt(yt){return new q(yt)}var q=function(){function yt(gt){gt=gt||{},this._reset=gt.reset,this._plan=gt.plan,this._count=gt.count,this._onDirty=gt.onDirty,this._dirty=!0}return yt.prototype.perform=function(gt){var xt=this._upstream,nt=gt&&gt.skip;if(this._dirty&&xt){var Z=this.context;Z.data=Z.outputData=xt.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var tt;this._plan&&!nt&&(tt=this._plan(this.context));var ot=st(this._modBy),W=this._modDataCount||0,Y=st(gt&&gt.modBy),H=gt&&gt.modDataCount||0;(ot!==Y||W!==H)&&(tt="reset");function st(G){return!(G>=1)&&(G=1),G}var J;(this._dirty||tt==="reset")&&(this._dirty=!1,J=this._doReset(nt)),this._modBy=Y,this._modDataCount=H;var g=gt&&gt.step;if(xt?this._dueEnd=xt._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var Q=this._dueIndex,j=Math.min(g!=null?this._dueIndex+g:1/0,this._dueEnd);if(!nt&&(J||Q<j)){var O=this._progress;if((0,F.kJ)(O))for(var X=0;X<O.length;X++)this._doProgress(O[X],Q,j,Y,H);else this._doProgress(O,Q,j,Y,H)}this._dueIndex=j;var K=this._settedOutputEnd!=null?this._settedOutputEnd:j;this._outputDueEnd=K}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},yt.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},yt.prototype._doProgress=function(gt,xt,nt,Z,tt){vt.reset(xt,nt,Z,tt),this._callingProgress=gt,this._callingProgress({start:xt,end:nt,count:nt-xt,next:vt.next},this.context)},yt.prototype._doReset=function(gt){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var xt,nt;!gt&&this._reset&&(xt=this._reset(this.context),xt&&xt.progress&&(nt=xt.forceFirstProgress,xt=xt.progress),(0,F.kJ)(xt)&&!xt.length&&(xt=null)),this._progress=xt,this._modBy=this._modDataCount=null;var Z=this._downstream;return Z&&Z.dirty(),nt},yt.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},yt.prototype.pipe=function(gt){(this._downstream!==gt||this._dirty)&&(this._downstream=gt,gt._upstream=this,gt.dirty())},yt.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},yt.prototype.getUpstream=function(){return this._upstream},yt.prototype.getDownstream=function(){return this._downstream},yt.prototype.setOutputEnd=function(gt){this._outputDueEnd=this._settedOutputEnd=gt},yt}(),vt=function(){var yt,gt,xt,nt,Z,tt={reset:function(Y,H,st,J){gt=Y,yt=H,xt=st,nt=J,Z=Math.ceil(nt/xt),tt.next=xt>1&&nt>0?W:ot}};return tt;function ot(){return gt<yt?gt++:null}function W(){var Y=gt%Z*xt+Math.ceil(gt/Z),H=gt>=yt?null:Y<nt?Y:gt;return gt++,H}}()},86273:function(Pe,ee){function z(q){return q==null?0:q.length||1}function F(q){return q}var dt=function(){function q(vt,yt,gt,xt,nt,Z){this._old=vt,this._new=yt,this._oldKeyGetter=gt||F,this._newKeyGetter=xt||F,this.context=nt,this._diffModeMultiple=Z==="multiple"}return q.prototype.add=function(vt){return this._add=vt,this},q.prototype.update=function(vt){return this._update=vt,this},q.prototype.updateManyToOne=function(vt){return this._updateManyToOne=vt,this},q.prototype.updateOneToMany=function(vt){return this._updateOneToMany=vt,this},q.prototype.updateManyToMany=function(vt){return this._updateManyToMany=vt,this},q.prototype.remove=function(vt){return this._remove=vt,this},q.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},q.prototype._executeOneToOne=function(){var vt=this._old,yt=this._new,gt={},xt=new Array(vt.length),nt=new Array(yt.length);this._initIndexMap(vt,null,xt,"_oldKeyGetter"),this._initIndexMap(yt,gt,nt,"_newKeyGetter");for(var Z=0;Z<vt.length;Z++){var tt=xt[Z],ot=gt[tt],W=z(ot);if(W>1){var Y=ot.shift();ot.length===1&&(gt[tt]=ot[0]),this._update&&this._update(Y,Z)}else W===1?(gt[tt]=null,this._update&&this._update(ot,Z)):this._remove&&this._remove(Z)}this._performRestAdd(nt,gt)},q.prototype._executeMultiple=function(){var vt=this._old,yt=this._new,gt={},xt={},nt=[],Z=[];this._initIndexMap(vt,gt,nt,"_oldKeyGetter"),this._initIndexMap(yt,xt,Z,"_newKeyGetter");for(var tt=0;tt<nt.length;tt++){var ot=nt[tt],W=gt[ot],Y=xt[ot],H=z(W),st=z(Y);if(H>1&&st===1)this._updateManyToOne&&this._updateManyToOne(Y,W),xt[ot]=null;else if(H===1&&st>1)this._updateOneToMany&&this._updateOneToMany(Y,W),xt[ot]=null;else if(H===1&&st===1)this._update&&this._update(Y,W),xt[ot]=null;else if(H>1&&st>1)this._updateManyToMany&&this._updateManyToMany(Y,W),xt[ot]=null;else if(H>1)for(var J=0;J<H;J++)this._remove&&this._remove(W[J]);else this._remove&&this._remove(W)}this._performRestAdd(Z,xt)},q.prototype._performRestAdd=function(vt,yt){for(var gt=0;gt<vt.length;gt++){var xt=vt[gt],nt=yt[xt],Z=z(nt);if(Z>1)for(var tt=0;tt<Z;tt++)this._add&&this._add(nt[tt]);else Z===1&&this._add&&this._add(nt);yt[xt]=null}},q.prototype._initIndexMap=function(vt,yt,gt,xt){for(var nt=this._diffModeMultiple,Z=0;Z<vt.length;Z++){var tt="_ec_"+this[xt](vt[Z],Z);if(nt||(gt[Z]=tt),!!yt){var ot=yt[tt],W=z(ot);W===0?(yt[tt]=Z,nt&&gt.push(tt)):W===1?yt[tt]=[ot,Z]:ot.push(Z)}}},q}();ee.Z=dt},2343:function(Pe,ee,z){z.d(ee,{hG:function(){return xt}});var F=z(70324),dt=z(43422),q=z(79518),vt="undefined",yt=typeof Uint32Array===vt?Array:Uint32Array,gt=typeof Uint16Array===vt?Array:Uint16Array,xt=typeof Int32Array===vt?Array:Int32Array,nt=typeof Float64Array===vt?Array:Float64Array,Z={float:nt,int:xt,ordinal:Array,number:Array,time:nt},tt;function ot(J){return J>65535?yt:gt}function W(){return[1/0,-1/0]}function Y(J){var g=J.constructor;return g===Array?J.slice():new g(J)}function H(J,g,Q,j,O){var X=Z[Q||"float"];if(O){var K=J[g],G=K&&K.length;if(G!==j){for(var k=new X(j),R=0;R<G;R++)k[R]=K[R];J[g]=k}}else J[g]=new X(j)}var st=function(){function J(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,F.kW)()}return J.prototype.initData=function(g,Q,j){this._provider=g,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var O=g.getSource(),X=this.defaultDimValueGetter=tt[O.sourceFormat];this._dimValueGetter=j||X,this._rawExtent=[];var K=(0,q.QY)(O);this._dimensions=(0,F.UI)(Q,function(G){return{type:G.type,property:G.property}}),this._initDataFromProvider(0,g.count())},J.prototype.getProvider=function(){return this._provider},J.prototype.getSource=function(){return this._provider.getSource()},J.prototype.ensureCalculationDimension=function(g,Q){var j=this._calcDimNameToIdx,O=this._dimensions,X=j.get(g);if(X!=null){if(O[X].type===Q)return X}else X=O.length;return O[X]={type:Q},j.set(g,X),this._chunks[X]=new Z[Q||"float"](this._rawCount),this._rawExtent[X]=W(),X},J.prototype.collectOrdinalMeta=function(g,Q){var j=this._chunks[g],O=this._dimensions[g],X=this._rawExtent,K=O.ordinalOffset||0,G=j.length;K===0&&(X[g]=W());for(var k=X[g],R=K;R<G;R++){var T=j[R]=Q.parseAndCollect(j[R]);isNaN(T)||(k[0]=Math.min(T,k[0]),k[1]=Math.max(T,k[1]))}O.ordinalMeta=Q,O.ordinalOffset=G,O.type="ordinal"},J.prototype.getOrdinalMeta=function(g){var Q=this._dimensions[g],j=Q.ordinalMeta;return j},J.prototype.getDimensionProperty=function(g){var Q=this._dimensions[g];return Q&&Q.property},J.prototype.appendData=function(g){var Q=this._provider,j=this.count();Q.appendData(g);var O=Q.count();return Q.persistent||(O+=j),j<O&&this._initDataFromProvider(j,O,!0),[j,O]},J.prototype.appendValues=function(g,Q){for(var j=this._chunks,O=this._dimensions,X=O.length,K=this._rawExtent,G=this.count(),k=G+Math.max(g.length,Q||0),R=0;R<X;R++){var T=O[R];H(j,R,T.type,k,!0)}for(var P=[],M=G;M<k;M++)for(var b=M-G,w=0;w<X;w++){var T=O[w],C=tt.arrayRows.call(this,g[b]||P,T.property,b,w);j[w][M]=C;var V=K[w];C<V[0]&&(V[0]=C),C>V[1]&&(V[1]=C)}return this._rawCount=this._count=k,{start:G,end:k}},J.prototype._initDataFromProvider=function(g,Q,j){for(var O=this._provider,X=this._chunks,K=this._dimensions,G=K.length,k=this._rawExtent,R=(0,F.UI)(K,function(ut){return ut.property}),T=0;T<G;T++){var P=K[T];k[T]||(k[T]=W()),H(X,T,P.type,Q,j)}if(O.fillStorage)O.fillStorage(g,Q,X,k);else for(var M=[],b=g;b<Q;b++){M=O.getItem(b,M);for(var w=0;w<G;w++){var C=X[w],V=this._dimValueGetter(M,R[w],b,w);C[b]=V;var B=k[w];V<B[0]&&(B[0]=V),V>B[1]&&(B[1]=V)}}!O.persistent&&O.clean&&O.clean(),this._rawCount=this._count=Q,this._extent=[]},J.prototype.count=function(){return this._count},J.prototype.get=function(g,Q){if(!(Q>=0&&Q<this._count))return NaN;var j=this._chunks[g];return j?j[this.getRawIndex(Q)]:NaN},J.prototype.getValues=function(g,Q){var j=[],O=[];if(Q==null){Q=g,g=[];for(var X=0;X<this._dimensions.length;X++)O.push(X)}else O=g;for(var X=0,K=O.length;X<K;X++)j.push(this.get(O[X],Q));return j},J.prototype.getByRawIndex=function(g,Q){if(!(Q>=0&&Q<this._rawCount))return NaN;var j=this._chunks[g];return j?j[Q]:NaN},J.prototype.getSum=function(g){var Q=this._chunks[g],j=0;if(Q)for(var O=0,X=this.count();O<X;O++){var K=this.get(g,O);isNaN(K)||(j+=K)}return j},J.prototype.getMedian=function(g){var Q=[];this.each([g],function(X){isNaN(X)||Q.push(X)});var j=Q.sort(function(X,K){return X-K}),O=this.count();return O===0?0:O%2===1?j[(O-1)/2]:(j[O/2]+j[O/2-1])/2},J.prototype.indexOfRawIndex=function(g){if(g>=this._rawCount||g<0)return-1;if(!this._indices)return g;var Q=this._indices,j=Q[g];if(j!=null&&j<this._count&&j===g)return g;for(var O=0,X=this._count-1;O<=X;){var K=(O+X)/2|0;if(Q[K]<g)O=K+1;else if(Q[K]>g)X=K-1;else return K}return-1},J.prototype.indicesOfNearest=function(g,Q,j){var O=this._chunks,X=O[g],K=[];if(!X)return K;j==null&&(j=1/0);for(var G=1/0,k=-1,R=0,T=0,P=this.count();T<P;T++){var M=this.getRawIndex(T),b=Q-X[M],w=Math.abs(b);w<=j&&((w<G||w===G&&b>=0&&k<0)&&(G=w,k=b,R=0),b===k&&(K[R++]=T))}return K.length=R,K},J.prototype.getIndices=function(){var g,Q=this._indices;if(Q){var j=Q.constructor,O=this._count;if(j===Array){g=new j(O);for(var X=0;X<O;X++)g[X]=Q[X]}else g=new j(Q.buffer,0,O)}else{var j=ot(this._rawCount);g=new j(this.count());for(var X=0;X<g.length;X++)g[X]=X}return g},J.prototype.filter=function(g,Q){if(!this._count)return this;for(var j=this.clone(),O=j.count(),X=ot(j._rawCount),K=new X(O),G=[],k=g.length,R=0,T=g[0],P=j._chunks,M=0;M<O;M++){var b=void 0,w=j.getRawIndex(M);if(k===0)b=Q(M);else if(k===1){var C=P[T][w];b=Q(C,M)}else{for(var V=0;V<k;V++)G[V]=P[g[V]][w];G[V]=M,b=Q.apply(null,G)}b&&(K[R++]=w)}return R<O&&(j._indices=K),j._count=R,j._extent=[],j._updateGetRawIdx(),j},J.prototype.selectRange=function(g){var Q=this.clone(),j=Q._count;if(!j)return this;var O=(0,F.XP)(g),X=O.length;if(!X)return this;var K=Q.count(),G=ot(Q._rawCount),k=new G(K),R=0,T=O[0],P=g[T][0],M=g[T][1],b=Q._chunks,w=!1;if(!Q._indices){var C=0;if(X===1){for(var V=b[O[0]],B=0;B<j;B++){var ut=V[B];(ut>=P&&ut<=M||isNaN(ut))&&(k[R++]=C),C++}w=!0}else if(X===2){for(var V=b[O[0]],it=b[O[1]],lt=g[O[1]][0],rt=g[O[1]][1],B=0;B<j;B++){var ut=V[B],ct=it[B];(ut>=P&&ut<=M||isNaN(ut))&&(ct>=lt&&ct<=rt||isNaN(ct))&&(k[R++]=C),C++}w=!0}}if(!w)if(X===1)for(var B=0;B<K;B++){var St=Q.getRawIndex(B),ut=b[O[0]][St];(ut>=P&&ut<=M||isNaN(ut))&&(k[R++]=St)}else for(var B=0;B<K;B++){for(var at=!0,St=Q.getRawIndex(B),mt=0;mt<X;mt++){var Dt=O[mt],ut=b[Dt][St];(ut<g[Dt][0]||ut>g[Dt][1])&&(at=!1)}at&&(k[R++]=Q.getRawIndex(B))}return R<K&&(Q._indices=k),Q._count=R,Q._extent=[],Q._updateGetRawIdx(),Q},J.prototype.map=function(g,Q){var j=this.clone(g);return this._updateDims(j,g,Q),j},J.prototype.modify=function(g,Q){this._updateDims(this,g,Q)},J.prototype._updateDims=function(g,Q,j){for(var O=g._chunks,X=[],K=Q.length,G=g.count(),k=[],R=g._rawExtent,T=0;T<Q.length;T++)R[Q[T]]=W();for(var P=0;P<G;P++){for(var M=g.getRawIndex(P),b=0;b<K;b++)k[b]=O[Q[b]][M];k[K]=P;var w=j&&j.apply(null,k);if(w!=null){typeof w!="object"&&(X[0]=w,w=X);for(var T=0;T<w.length;T++){var C=Q[T],V=w[T],B=R[C],ut=O[C];ut&&(ut[M]=V),V<B[0]&&(B[0]=V),V>B[1]&&(B[1]=V)}}}},J.prototype.lttbDownSample=function(g,Q){var j=this.clone([g],!0),O=j._chunks,X=O[g],K=this.count(),G=0,k=Math.floor(1/Q),R=this.getRawIndex(0),T,P,M,b=new(ot(this._rawCount))(Math.min((Math.ceil(K/k)+2)*2,K));b[G++]=R;for(var w=1;w<K-1;w+=k){for(var C=Math.min(w+k,K-1),V=Math.min(w+k*2,K),B=(V+C)/2,ut=0,it=C;it<V;it++){var lt=this.getRawIndex(it),rt=X[lt];isNaN(rt)||(ut+=rt)}ut/=V-C;var ct=w,St=Math.min(w+k,K),at=w-1,mt=X[R];T=-1,M=ct;for(var Dt=-1,wt=0,it=ct;it<St;it++){var lt=this.getRawIndex(it),rt=X[lt];if(isNaN(rt)){wt++,Dt<0&&(Dt=lt);continue}P=Math.abs((at-B)*(rt-mt)-(at-it)*(ut-mt)),P>T&&(T=P,M=lt)}wt>0&&wt<St-ct&&(b[G++]=Math.min(Dt,M),M=Math.max(Dt,M)),b[G++]=M,R=M}return b[G++]=this.getRawIndex(K-1),j._count=G,j._indices=b,j.getRawIndex=this._getRawIdx,j},J.prototype.downSample=function(g,Q,j,O){for(var X=this.clone([g],!0),K=X._chunks,G=[],k=Math.floor(1/Q),R=K[g],T=this.count(),P=X._rawExtent[g]=W(),M=new(ot(this._rawCount))(Math.ceil(T/k)),b=0,w=0;w<T;w+=k){k>T-w&&(k=T-w,G.length=k);for(var C=0;C<k;C++){var V=this.getRawIndex(w+C);G[C]=R[V]}var B=j(G),ut=this.getRawIndex(Math.min(w+O(G,B)||0,T-1));R[ut]=B,B<P[0]&&(P[0]=B),B>P[1]&&(P[1]=B),M[b++]=ut}return X._count=b,X._indices=M,X._updateGetRawIdx(),X},J.prototype.each=function(g,Q){if(this._count)for(var j=g.length,O=this._chunks,X=0,K=this.count();X<K;X++){var G=this.getRawIndex(X);switch(j){case 0:Q(X);break;case 1:Q(O[g[0]][G],X);break;case 2:Q(O[g[0]][G],O[g[1]][G],X);break;default:for(var k=0,R=[];k<j;k++)R[k]=O[g[k]][G];R[k]=X,Q.apply(null,R)}}},J.prototype.getDataExtent=function(g){var Q=this._chunks[g],j=W();if(!Q)return j;var O=this.count(),X=!this._indices,K;if(X)return this._rawExtent[g].slice();if(K=this._extent[g],K)return K.slice();K=j;for(var G=K[0],k=K[1],R=0;R<O;R++){var T=this.getRawIndex(R),P=Q[T];P<G&&(G=P),P>k&&(k=P)}return K=[G,k],this._extent[g]=K,K},J.prototype.getRawDataItem=function(g){var Q=this.getRawIndex(g);if(this._provider.persistent)return this._provider.getItem(Q);for(var j=[],O=this._chunks,X=0;X<O.length;X++)j.push(O[X][Q]);return j},J.prototype.clone=function(g,Q){var j=new J,O=this._chunks,X=g&&(0,F.u4)(g,function(G,k){return G[k]=!0,G},{});if(X)for(var K=0;K<O.length;K++)j._chunks[K]=X[K]?Y(O[K]):O[K];else j._chunks=O;return this._copyCommonProps(j),Q||(j._indices=this._cloneIndices()),j._updateGetRawIdx(),j},J.prototype._copyCommonProps=function(g){g._count=this._count,g._rawCount=this._rawCount,g._provider=this._provider,g._dimensions=this._dimensions,g._extent=(0,F.d9)(this._extent),g._rawExtent=(0,F.d9)(this._rawExtent)},J.prototype._cloneIndices=function(){if(this._indices){var g=this._indices.constructor,Q=void 0;if(g===Array){var j=this._indices.length;Q=new g(j);for(var O=0;O<j;O++)Q[O]=this._indices[O]}else Q=new g(this._indices);return Q}return null},J.prototype._getRawIdxIdentity=function(g){return g},J.prototype._getRawIdx=function(g){return g<this._count&&g>=0?this._indices[g]:-1},J.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},J.internalField=function(){function g(Q,j,O,X){return(0,dt.yQ)(Q[X],this._dimensions[X])}tt={arrayRows:g,objectRows:function(Q,j,O,X){return(0,dt.yQ)(Q[j],this._dimensions[X])},keyedColumns:g,original:function(Q,j,O,X){var K=Q&&(Q.value==null?Q:Q.value);return(0,dt.yQ)(K instanceof Array?K[X]:K,this._dimensions[X])},typedArray:function(Q,j,O,X){return Q[X]}}}(),J}();ee.ZP=st},91054:function(Pe,ee,z){var F=z(70324);function dt(xt){return"_EC_"+xt}var q=function(){function xt(nt){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=nt||!1}return xt.prototype.isDirected=function(){return this._directed},xt.prototype.addNode=function(nt,Z){nt=nt==null?""+Z:""+nt;var tt=this._nodesMap;if(!tt[dt(nt)]){var ot=new vt(nt,Z);return ot.hostGraph=this,this.nodes.push(ot),tt[dt(nt)]=ot,ot}},xt.prototype.getNodeByIndex=function(nt){var Z=this.data.getRawIndex(nt);return this.nodes[Z]},xt.prototype.getNodeById=function(nt){return this._nodesMap[dt(nt)]},xt.prototype.addEdge=function(nt,Z,tt){var ot=this._nodesMap,W=this._edgesMap;if(F.hj(nt)&&(nt=this.nodes[nt]),F.hj(Z)&&(Z=this.nodes[Z]),nt instanceof vt||(nt=ot[dt(nt)]),Z instanceof vt||(Z=ot[dt(Z)]),!(!nt||!Z)){var Y=nt.id+"-"+Z.id,H=new yt(nt,Z,tt);return H.hostGraph=this,this._directed&&(nt.outEdges.push(H),Z.inEdges.push(H)),nt.edges.push(H),nt!==Z&&Z.edges.push(H),this.edges.push(H),W[Y]=H,H}},xt.prototype.getEdgeByIndex=function(nt){var Z=this.edgeData.getRawIndex(nt);return this.edges[Z]},xt.prototype.getEdge=function(nt,Z){nt instanceof vt&&(nt=nt.id),Z instanceof vt&&(Z=Z.id);var tt=this._edgesMap;return this._directed?tt[nt+"-"+Z]:tt[nt+"-"+Z]||tt[Z+"-"+nt]},xt.prototype.eachNode=function(nt,Z){for(var tt=this.nodes,ot=tt.length,W=0;W<ot;W++)tt[W].dataIndex>=0&&nt.call(Z,tt[W],W)},xt.prototype.eachEdge=function(nt,Z){for(var tt=this.edges,ot=tt.length,W=0;W<ot;W++)tt[W].dataIndex>=0&&tt[W].node1.dataIndex>=0&&tt[W].node2.dataIndex>=0&&nt.call(Z,tt[W],W)},xt.prototype.breadthFirstTraverse=function(nt,Z,tt,ot){if(Z instanceof vt||(Z=this._nodesMap[dt(Z)]),!!Z){for(var W=tt==="out"?"outEdges":tt==="in"?"inEdges":"edges",Y=0;Y<this.nodes.length;Y++)this.nodes[Y].__visited=!1;if(!nt.call(ot,Z,null))for(var H=[Z];H.length;)for(var st=H.shift(),J=st[W],Y=0;Y<J.length;Y++){var g=J[Y],Q=g.node1===st?g.node2:g.node1;if(!Q.__visited){if(nt.call(ot,Q,st))return;H.push(Q),Q.__visited=!0}}}},xt.prototype.update=function(){for(var nt=this.data,Z=this.edgeData,tt=this.nodes,ot=this.edges,W=0,Y=tt.length;W<Y;W++)tt[W].dataIndex=-1;for(var W=0,Y=nt.count();W<Y;W++)tt[nt.getRawIndex(W)].dataIndex=W;Z.filterSelf(function(H){var st=ot[Z.getRawIndex(H)];return st.node1.dataIndex>=0&&st.node2.dataIndex>=0});for(var W=0,Y=ot.length;W<Y;W++)ot[W].dataIndex=-1;for(var W=0,Y=Z.count();W<Y;W++)ot[Z.getRawIndex(W)].dataIndex=W},xt.prototype.clone=function(){for(var nt=new xt(this._directed),Z=this.nodes,tt=this.edges,ot=0;ot<Z.length;ot++)nt.addNode(Z[ot].id,Z[ot].dataIndex);for(var ot=0;ot<tt.length;ot++){var W=tt[ot];nt.addEdge(W.node1.id,W.node2.id,W.dataIndex)}return nt},xt}(),vt=function(){function xt(nt,Z){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=nt==null?"":nt,this.dataIndex=Z==null?-1:Z}return xt.prototype.degree=function(){return this.edges.length},xt.prototype.inDegree=function(){return this.inEdges.length},xt.prototype.outDegree=function(){return this.outEdges.length},xt.prototype.getModel=function(nt){if(!(this.dataIndex<0)){var Z=this.hostGraph,tt=Z.data.getItemModel(this.dataIndex);return tt.getModel(nt)}},xt.prototype.getAdjacentDataIndices=function(){for(var nt={edge:[],node:[]},Z=0;Z<this.edges.length;Z++){var tt=this.edges[Z];tt.dataIndex<0||(nt.edge.push(tt.dataIndex),nt.node.push(tt.node1.dataIndex,tt.node2.dataIndex))}return nt},xt}(),yt=function(){function xt(nt,Z,tt){this.dataIndex=-1,this.node1=nt,this.node2=Z,this.dataIndex=tt==null?-1:tt}return xt.prototype.getModel=function(nt){if(!(this.dataIndex<0)){var Z=this.hostGraph,tt=Z.edgeData.getItemModel(this.dataIndex);return tt.getModel(nt)}},xt.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},xt}();function gt(xt,nt){return{getValue:function(Z){var tt=this[xt][nt];return tt.getStore().get(tt.getDimensionIndex(Z||"value"),this.dataIndex)},setVisual:function(Z,tt){this.dataIndex>=0&&this[xt][nt].setItemVisual(this.dataIndex,Z,tt)},getVisual:function(Z){return this[xt][nt].getItemVisual(this.dataIndex,Z)},setLayout:function(Z,tt){this.dataIndex>=0&&this[xt][nt].setItemLayout(this.dataIndex,Z,tt)},getLayout:function(){return this[xt][nt].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[xt][nt].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[xt][nt].getRawIndex(this.dataIndex)}}}F.jB(vt,gt("hostGraph","data")),F.jB(yt,gt("hostGraph","edgeData")),ee.ZP=q},35867:function(Pe,ee,z){var F=z(70324),dt=0,q=function(){function yt(gt){this.categories=gt.categories||[],this._needCollect=gt.needCollect,this._deduplication=gt.deduplication,this.uid=++dt}return yt.createByAxisModel=function(gt){var xt=gt.option,nt=xt.data,Z=nt&&(0,F.UI)(nt,vt);return new yt({categories:Z,needCollect:!Z,deduplication:xt.dedplication!==!1})},yt.prototype.getOrdinal=function(gt){return this._getOrCreateMap().get(gt)},yt.prototype.parseAndCollect=function(gt){var xt,nt=this._needCollect;if(!(0,F.HD)(gt)&&!nt)return gt;if(nt&&!this._deduplication)return xt=this.categories.length,this.categories[xt]=gt,xt;var Z=this._getOrCreateMap();return xt=Z.get(gt),xt==null&&(nt?(xt=this.categories.length,this.categories[xt]=gt,Z.set(gt,xt)):xt=NaN),xt},yt.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,F.kW)(this.categories))},yt}();function vt(yt){return(0,F.Kn)(yt)&&yt.value!=null?yt.value:yt+""}ee.Z=q},56152:function(Pe,ee,z){var F=z(70324),dt=z(97853),q=z(86273),vt=z(92502),yt=z(51535),gt=z(43418),xt=z(27674),nt=z(21611),Z=z(98845),tt=z(79518),ot=z(2343),W=z(56187),Y=F.Kn,H=F.UI,st=typeof Int32Array=="undefined"?Array:Int32Array,J="e\0\0",g=-1,Q=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],j=["_approximateExtent"],O,X,K,G,k,R,T,P=function(){function M(b,w){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var C,V=!1;(0,W.bB)(b)?(C=b.dimensions,this._dimOmitted=b.isDimensionOmitted(),this._schema=b):(V=!0,C=b),C=C||["x","y"];for(var B={},ut=[],it={},lt=!1,rt={},ct=0;ct<C.length;ct++){var St=C[ct],at=F.HD(St)?new gt.Z({name:St}):St instanceof gt.Z?St:new gt.Z(St),mt=at.name;at.type=at.type||"float",at.coordDim||(at.coordDim=mt,at.coordDimIndex=0);var Dt=at.otherDims=at.otherDims||{};ut.push(mt),B[mt]=at,rt[mt]!=null&&(lt=!0),at.createInvertedIndices&&(it[mt]=[]),Dt.itemName===0&&(this._nameDimIdx=ct),Dt.itemId===0&&(this._idDimIdx=ct),V&&(at.storeDimIndex=ct)}if(this.dimensions=ut,this._dimInfos=B,this._initGetDimensionInfo(lt),this.hostModel=w,this._invertedIndicesMap=it,this._dimOmitted){var wt=this._dimIdxToName=F.kW();F.S6(ut,function(Pt){wt.set(B[Pt].storeDimIndex,Pt)})}}return M.prototype.getDimension=function(b){var w=this._recognizeDimIndex(b);if(w==null)return b;if(w=b,!this._dimOmitted)return this.dimensions[w];var C=this._dimIdxToName.get(w);if(C!=null)return C;var V=this._schema.getSourceDimension(w);if(V)return V.name},M.prototype.getDimensionIndex=function(b){var w=this._recognizeDimIndex(b);if(w!=null)return w;if(b==null)return-1;var C=this._getDimInfo(b);return C?C.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(b):-1},M.prototype._recognizeDimIndex=function(b){if(F.hj(b)||b!=null&&!isNaN(b)&&!this._getDimInfo(b)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(b)<0))return+b},M.prototype._getStoreDimIndex=function(b){var w=this.getDimensionIndex(b);return w},M.prototype.getDimensionInfo=function(b){return this._getDimInfo(this.getDimension(b))},M.prototype._initGetDimensionInfo=function(b){var w=this._dimInfos;this._getDimInfo=b?function(C){return w.hasOwnProperty(C)?w[C]:void 0}:function(C){return w[C]}},M.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},M.prototype.mapDimension=function(b,w){var C=this._dimSummary;if(w==null)return C.encodeFirstDimNotExtra[b];var V=C.encode[b];return V?V[w]:null},M.prototype.mapDimensionsAll=function(b){var w=this._dimSummary,C=w.encode[b];return(C||[]).slice()},M.prototype.getStore=function(){return this._store},M.prototype.initData=function(b,w,C){var V=this,B;if(b instanceof ot.ZP&&(B=b),!B){var ut=this.dimensions,it=(0,tt.Ld)(b)||F.zG(b)?new vt.Pl(b,ut.length):b;B=new ot.ZP;var lt=H(ut,function(rt){return{type:V._dimInfos[rt].type,property:rt}});B.initData(it,lt,C)}this._store=B,this._nameList=(w||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,B.count()),this._dimSummary=(0,yt.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},M.prototype.appendData=function(b){var w=this._store.appendData(b);this._doInit(w[0],w[1])},M.prototype.appendValues=function(b,w){var C=this._store.appendValues(b,w.length),V=C.start,B=C.end,ut=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),w)for(var it=V;it<B;it++){var lt=it-V;this._nameList[it]=w[lt],ut&&T(this,it)}},M.prototype._updateOrdinalMeta=function(){for(var b=this._store,w=this.dimensions,C=0;C<w.length;C++){var V=this._dimInfos[w[C]];V.ordinalMeta&&b.collectOrdinalMeta(V.storeDimIndex,V.ordinalMeta)}},M.prototype._shouldMakeIdFromName=function(){var b=this._store.getProvider();return this._idDimIdx==null&&b.getSource().sourceFormat!==xt.J5&&!b.fillStorage},M.prototype._doInit=function(b,w){if(!(b>=w)){var C=this._store,V=C.getProvider();this._updateOrdinalMeta();var B=this._nameList,ut=this._idList,it=V.getSource().sourceFormat,lt=it===xt.cy;if(lt&&!V.pure)for(var rt=[],ct=b;ct<w;ct++){var St=V.getItem(ct,rt);if(!this.hasItemOption&&(0,nt.Co)(St)&&(this.hasItemOption=!0),St){var at=St.name;B[ct]==null&&at!=null&&(B[ct]=(0,nt.U5)(at,null));var mt=St.id;ut[ct]==null&&mt!=null&&(ut[ct]=(0,nt.U5)(mt,null))}}if(this._shouldMakeIdFromName())for(var ct=b;ct<w;ct++)T(this,ct);O(this)}},M.prototype.getApproximateExtent=function(b){return this._approximateExtent[b]||this._store.getDataExtent(this._getStoreDimIndex(b))},M.prototype.setApproximateExtent=function(b,w){w=this.getDimension(w),this._approximateExtent[w]=b.slice()},M.prototype.getCalculationInfo=function(b){return this._calculationInfo[b]},M.prototype.setCalculationInfo=function(b,w){Y(b)?F.l7(this._calculationInfo,b):this._calculationInfo[b]=w},M.prototype.getName=function(b){var w=this.getRawIndex(b),C=this._nameList[w];return C==null&&this._nameDimIdx!=null&&(C=K(this,this._nameDimIdx,w)),C==null&&(C=""),C},M.prototype._getCategory=function(b,w){var C=this._store.get(b,w),V=this._store.getOrdinalMeta(b);return V?V.categories[C]:C},M.prototype.getId=function(b){return X(this,this.getRawIndex(b))},M.prototype.count=function(){return this._store.count()},M.prototype.get=function(b,w){var C=this._store,V=this._dimInfos[b];if(V)return C.get(V.storeDimIndex,w)},M.prototype.getByRawIndex=function(b,w){var C=this._store,V=this._dimInfos[b];if(V)return C.getByRawIndex(V.storeDimIndex,w)},M.prototype.getIndices=function(){return this._store.getIndices()},M.prototype.getDataExtent=function(b){return this._store.getDataExtent(this._getStoreDimIndex(b))},M.prototype.getSum=function(b){return this._store.getSum(this._getStoreDimIndex(b))},M.prototype.getMedian=function(b){return this._store.getMedian(this._getStoreDimIndex(b))},M.prototype.getValues=function(b,w){var C=this,V=this._store;return F.kJ(b)?V.getValues(H(b,function(B){return C._getStoreDimIndex(B)}),w):V.getValues(b)},M.prototype.hasValue=function(b){for(var w=this._dimSummary.dataDimIndicesOnCoord,C=0,V=w.length;C<V;C++)if(isNaN(this._store.get(w[C],b)))return!1;return!0},M.prototype.indexOfName=function(b){for(var w=0,C=this._store.count();w<C;w++)if(this.getName(w)===b)return w;return-1},M.prototype.getRawIndex=function(b){return this._store.getRawIndex(b)},M.prototype.indexOfRawIndex=function(b){return this._store.indexOfRawIndex(b)},M.prototype.rawIndexOf=function(b,w){var C=b&&this._invertedIndicesMap[b],V=C[w];return V==null||isNaN(V)?g:V},M.prototype.indicesOfNearest=function(b,w,C){return this._store.indicesOfNearest(this._getStoreDimIndex(b),w,C)},M.prototype.each=function(b,w,C){"use strict";F.mf(b)&&(C=w,w=b,b=[]);var V=C||this,B=H(G(b),this._getStoreDimIndex,this);this._store.each(B,V?F.ak(w,V):w)},M.prototype.filterSelf=function(b,w,C){"use strict";F.mf(b)&&(C=w,w=b,b=[]);var V=C||this,B=H(G(b),this._getStoreDimIndex,this);return this._store=this._store.filter(B,V?F.ak(w,V):w),this},M.prototype.selectRange=function(b){"use strict";var w=this,C={},V=F.XP(b),B=[];return F.S6(V,function(ut){var it=w._getStoreDimIndex(ut);C[it]=b[ut],B.push(it)}),this._store=this._store.selectRange(C),this},M.prototype.mapArray=function(b,w,C){"use strict";F.mf(b)&&(C=w,w=b,b=[]),C=C||this;var V=[];return this.each(b,function(){V.push(w&&w.apply(this,arguments))},C),V},M.prototype.map=function(b,w,C,V){"use strict";var B=C||V||this,ut=H(G(b),this._getStoreDimIndex,this),it=R(this);return it._store=this._store.map(ut,B?F.ak(w,B):w),it},M.prototype.modify=function(b,w,C,V){var B=this,ut=C||V||this,it=H(G(b),this._getStoreDimIndex,this);this._store.modify(it,ut?F.ak(w,ut):w)},M.prototype.downSample=function(b,w,C,V){var B=R(this);return B._store=this._store.downSample(this._getStoreDimIndex(b),w,C,V),B},M.prototype.lttbDownSample=function(b,w){var C=R(this);return C._store=this._store.lttbDownSample(this._getStoreDimIndex(b),w),C},M.prototype.getRawDataItem=function(b){return this._store.getRawDataItem(b)},M.prototype.getItemModel=function(b){var w=this.hostModel,C=this.getRawDataItem(b);return new dt.Z(C,w,w&&w.ecModel)},M.prototype.diff=function(b){var w=this;return new q.Z(b?b.getStore().getIndices():[],this.getStore().getIndices(),function(C){return X(b,C)},function(C){return X(w,C)})},M.prototype.getVisual=function(b){var w=this._visual;return w&&w[b]},M.prototype.setVisual=function(b,w){this._visual=this._visual||{},Y(b)?F.l7(this._visual,b):this._visual[b]=w},M.prototype.getItemVisual=function(b,w){var C=this._itemVisuals[b],V=C&&C[w];return V==null?this.getVisual(w):V},M.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},M.prototype.ensureUniqueItemVisual=function(b,w){var C=this._itemVisuals,V=C[b];V||(V=C[b]={});var B=V[w];return B==null&&(B=this.getVisual(w),F.kJ(B)?B=B.slice():Y(B)&&(B=F.l7({},B)),V[w]=B),B},M.prototype.setItemVisual=function(b,w,C){var V=this._itemVisuals[b]||{};this._itemVisuals[b]=V,Y(w)?F.l7(V,w):V[w]=C},M.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},M.prototype.setLayout=function(b,w){Y(b)?F.l7(this._layout,b):this._layout[b]=w},M.prototype.getLayout=function(b){return this._layout[b]},M.prototype.getItemLayout=function(b){return this._itemLayouts[b]},M.prototype.setItemLayout=function(b,w,C){this._itemLayouts[b]=C?F.l7(this._itemLayouts[b]||{},w):w},M.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},M.prototype.setItemGraphicEl=function(b,w){var C=this.hostModel&&this.hostModel.seriesIndex;(0,Z.Q)(C,this.dataType,b,w),this._graphicEls[b]=w},M.prototype.getItemGraphicEl=function(b){return this._graphicEls[b]},M.prototype.eachItemGraphicEl=function(b,w){F.S6(this._graphicEls,function(C,V){C&&b&&b.call(w,C,V)})},M.prototype.cloneShallow=function(b){return b||(b=new M(this._schema?this._schema:H(this.dimensions,this._getDimInfo,this),this.hostModel)),k(b,this),b._store=this._store,b},M.prototype.wrapMethod=function(b,w){var C=this[b];F.mf(C)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(b),this[b]=function(){var V=C.apply(this,arguments);return w.apply(this,[V].concat(F.tP(arguments)))})},M.internalField=function(){O=function(b){var w=b._invertedIndicesMap;F.S6(w,function(C,V){var B=b._dimInfos[V],ut=B.ordinalMeta,it=b._store;if(ut){C=w[V]=new st(ut.categories.length);for(var lt=0;lt<C.length;lt++)C[lt]=g;for(var lt=0;lt<it.count();lt++)C[it.get(B.storeDimIndex,lt)]=lt}})},K=function(b,w,C){return(0,nt.U5)(b._getCategory(w,C),null)},X=function(b,w){var C=b._idList[w];return C==null&&b._idDimIdx!=null&&(C=K(b,b._idDimIdx,w)),C==null&&(C=J+w),C},G=function(b){return F.kJ(b)||(b=b!=null?[b]:[]),b},R=function(b){var w=new M(b._schema?b._schema:H(b.dimensions,b._getDimInfo,b),b.hostModel);return k(w,b),w},k=function(b,w){F.S6(Q.concat(w.__wrappedMethods||[]),function(C){w.hasOwnProperty(C)&&(b[C]=w[C])}),b.__wrappedMethods=w.__wrappedMethods,F.S6(j,function(C){b[C]=F.d9(w[C])}),b._calculationInfo=F.l7({},w._calculationInfo)},T=function(b,w){var C=b._nameList,V=b._idList,B=b._nameDimIdx,ut=b._idDimIdx,it=C[w],lt=V[w];if(it==null&&B!=null&&(C[w]=it=K(b,B,w)),lt==null&&ut!=null&&(V[w]=lt=K(b,ut,w)),lt==null&&it!=null){var rt=b._nameRepeatCount,ct=rt[it]=(rt[it]||0)+1;lt=it,ct>1&&(lt+="__ec__"+ct),V[w]=lt}}}(),M}();ee.Z=P},43418:function(Pe,ee,z){var F=z(70324),dt=function(){function q(vt){this.otherDims={},vt!=null&&F.l7(this,vt)}return q}();ee.Z=dt},79518:function(Pe,ee,z){z.d(ee,{Kp:function(){return tt},Ld:function(){return gt},ML:function(){return Z},QY:function(){return st},_P:function(){return xt},nx:function(){return nt}});var F=z(70324),dt=z(27674),q=z(21611),vt=z(459),yt=function(){function J(g){this.data=g.data||(g.sourceFormat===dt.hL?{}:[]),this.sourceFormat=g.sourceFormat||dt.RA,this.seriesLayoutBy=g.seriesLayoutBy||dt.fY,this.startIndex=g.startIndex||0,this.dimensionsDetectedCount=g.dimensionsDetectedCount,this.metaRawOption=g.metaRawOption;var Q=this.dimensionsDefine=g.dimensionsDefine;if(Q)for(var j=0;j<Q.length;j++){var O=Q[j];O.type==null&&(0,vt.u7)(this,j)===vt.Dq.Must&&(O.type="ordinal")}}return J}();function gt(J){return J instanceof yt}function xt(J,g,Q){Q=Q||tt(J);var j=g.seriesLayoutBy,O=ot(J,Q,j,g.sourceHeader,g.dimensions),X=new yt({data:J,sourceFormat:Q,seriesLayoutBy:j,dimensionsDefine:O.dimensionsDefine,startIndex:O.startIndex,dimensionsDetectedCount:O.dimensionsDetectedCount,metaRawOption:(0,F.d9)(g)});return X}function nt(J){return new yt({data:J,sourceFormat:(0,F.fU)(J)?dt.J5:dt.cy})}function Z(J){return new yt({data:J.data,sourceFormat:J.sourceFormat,seriesLayoutBy:J.seriesLayoutBy,dimensionsDefine:(0,F.d9)(J.dimensionsDefine),startIndex:J.startIndex,dimensionsDetectedCount:J.dimensionsDetectedCount})}function tt(J){var g=dt.RA;if((0,F.fU)(J))g=dt.J5;else if((0,F.kJ)(J)){J.length===0&&(g=dt.XD);for(var Q=0,j=J.length;Q<j;Q++){var O=J[Q];if(O!=null){if((0,F.kJ)(O)){g=dt.XD;break}else if((0,F.Kn)(O)){g=dt.qb;break}}}}else if((0,F.Kn)(J)){for(var X in J)if((0,F.RI)(J,X)&&(0,F.zG)(J[X])){g=dt.hL;break}}return g}function ot(J,g,Q,j,O){var X,K;if(!J)return{dimensionsDefine:Y(O),startIndex:K,dimensionsDetectedCount:X};if(g===dt.XD){var G=J;j==="auto"||j==null?H(function(R){R!=null&&R!=="-"&&((0,F.HD)(R)?K==null&&(K=1):K=0)},Q,G,10):K=(0,F.hj)(j)?j:j?1:0,!O&&K===1&&(O=[],H(function(R,T){O[T]=R!=null?R+"":""},Q,G,1/0)),X=O?O.length:Q===dt.Wc?G.length:G[0]?G[0].length:null}else if(g===dt.qb)O||(O=W(J));else if(g===dt.hL)O||(O=[],(0,F.S6)(J,function(R,T){O.push(T)}));else if(g===dt.cy){var k=(0,q.C4)(J[0]);X=(0,F.kJ)(k)&&k.length||1}else dt.J5;return{startIndex:K,dimensionsDefine:Y(O),dimensionsDetectedCount:X}}function W(J){for(var g=0,Q;g<J.length&&!(Q=J[g++]););if(Q)return(0,F.XP)(Q)}function Y(J){if(J){var g=(0,F.kW)();return(0,F.UI)(J,function(Q,j){Q=(0,F.Kn)(Q)?Q:{name:Q};var O={name:Q.name,displayName:Q.displayName,type:Q.type};if(O.name==null)return O;O.name+="",O.displayName==null&&(O.displayName=O.name);var X=g.get(O.name);return X?O.name+="-"+X.count++:g.set(O.name,{count:1}),O})}}function H(J,g,Q,j){if(g===dt.Wc)for(var O=0;O<Q.length&&O<j;O++)J(Q[O]?Q[O][0]:null,O);else for(var X=Q[0]||[],O=0;O<X.length&&O<j;O++)J(X[O],O)}function st(J){var g=J.sourceFormat;return g===dt.qb||g===dt.hL}},56187:function(Pe,ee,z){z.d(ee,{Eo:function(){return gt},Jj:function(){return Z},Jl:function(){return tt},bB:function(){return xt},v5:function(){return nt}});var F=z(70324),dt=z(21611),q=z(79518),vt=(0,dt.Yf)(),yt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},gt=function(){function ot(W){this.dimensions=W.dimensions,this._dimOmitted=W.dimensionOmitted,this.source=W.source,this._fullDimCount=W.fullDimensionCount,this._updateDimOmitted(W.dimensionOmitted)}return ot.prototype.isDimensionOmitted=function(){return this._dimOmitted},ot.prototype._updateDimOmitted=function(W){this._dimOmitted=W,W&&(this._dimNameMap||(this._dimNameMap=Z(this.source)))},ot.prototype.getSourceDimensionIndex=function(W){return(0,F.pD)(this._dimNameMap.get(W),-1)},ot.prototype.getSourceDimension=function(W){var Y=this.source.dimensionsDefine;if(Y)return Y[W]},ot.prototype.makeStoreSchema=function(){for(var W=this._fullDimCount,Y=(0,q.QY)(this.source),H=!tt(W),st="",J=[],g=0,Q=0;g<W;g++){var j=void 0,O=void 0,X=void 0,K=this.dimensions[Q];if(K&&K.storeDimIndex===g)j=Y?K.name:null,O=K.type,X=K.ordinalMeta,Q++;else{var G=this.getSourceDimension(g);G&&(j=Y?G.name:null,O=G.type)}J.push({property:j,type:O,ordinalMeta:X}),Y&&j!=null&&(!K||!K.isCalculationCoord)&&(st+=H?j.replace(/\`/g,"`1").replace(/\$/g,"`2"):j),st+="$",st+=yt[O]||"f",X&&(st+=X.uid),st+="$"}var k=this.source,R=[k.seriesLayoutBy,k.startIndex,st].join("$$");return{dimensions:J,hash:R}},ot.prototype.makeOutputDimensionNames=function(){for(var W=[],Y=0,H=0;Y<this._fullDimCount;Y++){var st=void 0,J=this.dimensions[H];if(J&&J.storeDimIndex===Y)J.isCalculationCoord||(st=J.name),H++;else{var g=this.getSourceDimension(Y);g&&(st=g.name)}W.push(st)}return W},ot.prototype.appendCalculationDimension=function(W){this.dimensions.push(W),W.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},ot}();function xt(ot){return ot instanceof gt}function nt(ot){for(var W=(0,F.kW)(),Y=0;Y<(ot||[]).length;Y++){var H=ot[Y],st=(0,F.Kn)(H)?H.name:H;st!=null&&W.get(st)==null&&W.set(st,Y)}return W}function Z(ot){var W=vt(ot);return W.dimNameMap||(W.dimNameMap=nt(ot.dimensionsDefine))}function tt(ot){return ot>30}},22253:function(Pe,ee,z){z.d(ee,{Z:function(){return tt},q:function(){return Z}});var F=z(27674),dt=z(43418),q=z(70324),vt=z(79518),yt=z(2343),gt=z(21611),xt=z(459),nt=z(56187);function Z(H,st){return tt(H,st).dimensions}function tt(H,st){(0,vt.Ld)(H)||(H=(0,vt.nx)(H)),st=st||{};var J=st.coordDimensions||[],g=st.dimensionsDefine||H.dimensionsDefine||[],Q=(0,q.kW)(),j=[],O=W(H,J,g,st.dimensionsCount),X=st.canOmitUnusedDimensions&&(0,nt.Jl)(O),K=g===H.dimensionsDefine,G=K?(0,nt.Jj)(H):(0,nt.v5)(g),k=st.encodeDefine;!k&&st.encodeDefaulter&&(k=st.encodeDefaulter(H,O));for(var R=(0,q.kW)(k),T=new yt.hG(O),P=0;P<T.length;P++)T[P]=-1;function M(St){var at=T[St];if(at<0){var mt=g[St],Dt=(0,q.Kn)(mt)?mt:{name:mt},wt=new dt.Z,Pt=Dt.name;Pt!=null&&G.get(Pt)!=null&&(wt.name=wt.displayName=Pt),Dt.type!=null&&(wt.type=Dt.type),Dt.displayName!=null&&(wt.displayName=Dt.displayName);var bt=j.length;return T[St]=bt,wt.storeDimIndex=St,j.push(wt),wt}return j[at]}if(!X)for(var P=0;P<O;P++)M(P);R.each(function(St,at){var mt=(0,gt.kF)(St).slice();if(mt.length===1&&!(0,q.HD)(mt[0])&&mt[0]<0){R.set(at,!1);return}var Dt=R.set(at,[]);(0,q.S6)(mt,function(wt,Pt){var bt=(0,q.HD)(wt)?G.get(wt):wt;bt!=null&&bt<O&&(Dt[Pt]=bt,w(M(bt),at,Pt))})});var b=0;(0,q.S6)(J,function(St){var at,mt,Dt,wt;if((0,q.HD)(St))at=St,wt={};else{wt=St,at=wt.name;var Pt=wt.ordinalMeta;wt.ordinalMeta=null,wt=(0,q.l7)({},wt),wt.ordinalMeta=Pt,mt=wt.dimsDef,Dt=wt.otherDims,wt.name=wt.coordDim=wt.coordDimIndex=wt.dimsDef=wt.otherDims=null}var bt=R.get(at);if(bt!==!1){if(bt=(0,gt.kF)(bt),!bt.length)for(var Ot=0;Ot<(mt&&mt.length||1);Ot++){for(;b<O&&M(b).coordDim!=null;)b++;b<O&&bt.push(b++)}(0,q.S6)(bt,function(Bt,Ht){var Qt=M(Bt);if(K&&wt.type!=null&&(Qt.type=wt.type),w((0,q.ce)(Qt,wt),at,Ht),Qt.name==null&&mt){var re=mt[Ht];!(0,q.Kn)(re)&&(re={name:re}),Qt.name=Qt.displayName=re.name,Qt.defaultTooltip=re.defaultTooltip}Dt&&(0,q.ce)(Qt.otherDims,Dt)})}});function w(St,at,mt){F.f7.get(at)!=null?St.otherDims[at]=mt:(St.coordDim=at,St.coordDimIndex=mt,Q.set(at,!0))}var C=st.generateCoord,V=st.generateCoordCount,B=V!=null;V=C?V||1:0;var ut=C||"value";function it(St){St.name==null&&(St.name=St.coordDim)}if(X)(0,q.S6)(j,function(St){it(St)}),j.sort(function(St,at){return St.storeDimIndex-at.storeDimIndex});else for(var lt=0;lt<O;lt++){var rt=M(lt),ct=rt.coordDim;ct==null&&(rt.coordDim=Y(ut,Q,B),rt.coordDimIndex=0,(!C||V<=0)&&(rt.isExtraCoord=!0),V--),it(rt),rt.type==null&&((0,xt.u7)(H,lt)===xt.Dq.Must||rt.isExtraCoord&&(rt.otherDims.itemName!=null||rt.otherDims.seriesName!=null))&&(rt.type="ordinal")}return ot(j),new nt.Eo({source:H,dimensions:j,fullDimensionCount:O,dimensionOmitted:X})}function ot(H){for(var st=(0,q.kW)(),J=0;J<H.length;J++){var g=H[J],Q=g.name,j=st.get(Q)||0;j>0&&(g.name=Q+(j-1)),j++,st.set(Q,j)}}function W(H,st,J,g){var Q=Math.max(H.dimensionsDetectedCount||1,st.length,J.length,g||0);return(0,q.S6)(st,function(j){var O;(0,q.Kn)(j)&&(O=j.dimsDef)&&(Q=Math.max(Q,O.length))}),Q}function Y(H,st,J){if(J||st.hasKey(H)){for(var g=0;st.hasKey(H+g);)g++;H+=g}return st.set(H,!0),H}},92502:function(Pe,ee,z){z.d(ee,{Pl:function(){return tt},_j:function(){return Y},a:function(){return J},hk:function(){return X},tB:function(){return j}});var F=z(70324),dt=z(21611),q=z(79518),vt=z(27674),yt,gt,xt,nt,Z,tt=function(){function G(k,R){var T=(0,q.Ld)(k)?k:(0,q.nx)(k);this._source=T;var P=this._data=T.data;T.sourceFormat===vt.J5&&(this._offset=0,this._dimSize=R,this._data=P),Z(this,P,T)}return G.prototype.getSource=function(){return this._source},G.prototype.count=function(){return 0},G.prototype.getItem=function(k,R){},G.prototype.appendData=function(k){},G.prototype.clean=function(){},G.protoInitialize=function(){var k=G.prototype;k.pure=!1,k.persistent=!0}(),G.internalField=function(){var k;Z=function(b,w,C){var V=C.sourceFormat,B=C.seriesLayoutBy,ut=C.startIndex,it=C.dimensionsDefine,lt=nt[O(V,B)];if((0,F.l7)(b,lt),V===vt.J5)b.getItem=R,b.count=P,b.fillStorage=T;else{var rt=Y(V,B);b.getItem=(0,F.ak)(rt,null,w,ut,it);var ct=J(V,B);b.count=(0,F.ak)(ct,null,w,ut,it)}};var R=function(b,w){b=b-this._offset,w=w||[];for(var C=this._data,V=this._dimSize,B=V*b,ut=0;ut<V;ut++)w[ut]=C[B+ut];return w},T=function(b,w,C,V){for(var B=this._data,ut=this._dimSize,it=0;it<ut;it++){for(var lt=V[it],rt=lt[0]==null?1/0:lt[0],ct=lt[1]==null?-1/0:lt[1],St=w-b,at=C[it],mt=0;mt<St;mt++){var Dt=B[mt*ut+it];at[b+mt]=Dt,Dt<rt&&(rt=Dt),Dt>ct&&(ct=Dt)}lt[0]=rt,lt[1]=ct}},P=function(){return this._data?this._data.length/this._dimSize:0};nt=(k={},k[vt.XD+"_"+vt.fY]={pure:!0,appendData:M},k[vt.XD+"_"+vt.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},k[vt.qb]={pure:!0,appendData:M},k[vt.hL]={pure:!0,appendData:function(b){var w=this._data;(0,F.S6)(b,function(C,V){for(var B=w[V]||(w[V]=[]),ut=0;ut<(C||[]).length;ut++)B.push(C[ut])})}},k[vt.cy]={appendData:M},k[vt.J5]={persistent:!1,pure:!0,appendData:function(b){this._data=b},clean:function(){this._offset+=this.count(),this._data=null}},k);function M(b){for(var w=0;w<b.length;w++)this._data.push(b[w])}}(),G}(),ot=function(G,k,R,T){return G[T]},W=(yt={},yt[vt.XD+"_"+vt.fY]=function(G,k,R,T){return G[T+k]},yt[vt.XD+"_"+vt.Wc]=function(G,k,R,T,P){T+=k;for(var M=P||[],b=G,w=0;w<b.length;w++){var C=b[w];M[w]=C?C[T]:null}return M},yt[vt.qb]=ot,yt[vt.hL]=function(G,k,R,T,P){for(var M=P||[],b=0;b<R.length;b++){var w=R[b].name,C=G[w];M[b]=C?C[T]:null}return M},yt[vt.cy]=ot,yt);function Y(G,k){var R=W[O(G,k)];return R}var H=function(G,k,R){return G.length},st=(gt={},gt[vt.XD+"_"+vt.fY]=function(G,k,R){return Math.max(0,G.length-k)},gt[vt.XD+"_"+vt.Wc]=function(G,k,R){var T=G[0];return T?Math.max(0,T.length-k):0},gt[vt.qb]=H,gt[vt.hL]=function(G,k,R){var T=R[0].name,P=G[T];return P?P.length:0},gt[vt.cy]=H,gt);function J(G,k){var R=st[O(G,k)];return R}var g=function(G,k,R){return G[k]},Q=(xt={},xt[vt.XD]=g,xt[vt.qb]=function(G,k,R){return G[R]},xt[vt.hL]=g,xt[vt.cy]=function(G,k,R){var T=(0,dt.C4)(G);return T instanceof Array?T[k]:T},xt[vt.J5]=g,xt);function j(G){var k=Q[G];return k}function O(G,k){return G===vt.XD?G+"_"+k:G}function X(G,k,R){if(G){var T=G.getRawDataItem(k);if(T!=null){var P=G.getStore(),M=P.getSource().sourceFormat;if(R!=null){var b=G.getDimensionIndex(R),w=P.getDimensionProperty(b);return j(M)(T,b,w)}else{var C=T;return M===vt.cy&&(C=(0,dt.C4)(T)),C}}}}function K(G,k,R){if(G){var T=G.getStore().getSource().sourceFormat;if(!(T!==SOURCE_FORMAT_ORIGINAL&&T!==SOURCE_FORMAT_OBJECT_ROWS)){var P=G.getRawDataItem(k);if(T===SOURCE_FORMAT_ORIGINAL&&!isObject(P)&&(P=null),P)return P[R]}}}},28391:function(Pe,ee,z){z.d(ee,{BM:function(){return q},IR:function(){return gt},M:function(){return yt}});var F=z(70324),dt=z(56187);function q(xt,nt,Z){Z=Z||{};var tt=Z.byIndex,ot=Z.stackedCoordDimension,W,Y,H;vt(nt)?W=nt:(Y=nt.schema,W=Y.dimensions,H=nt.store);var st=!!(xt&&xt.get("stack")),J,g,Q,j;if((0,F.S6)(W,function(R,T){(0,F.HD)(R)&&(W[T]=R={name:R}),st&&!R.isExtraCoord&&(!tt&&!J&&R.ordinalMeta&&(J=R),!g&&R.type!=="ordinal"&&R.type!=="time"&&(!ot||ot===R.coordDim)&&(g=R))}),g&&!tt&&!J&&(tt=!0),g){Q="__\0ecstackresult_"+xt.id,j="__\0ecstackedover_"+xt.id,J&&(J.createInvertedIndices=!0);var O=g.coordDim,X=g.type,K=0;(0,F.S6)(W,function(R){R.coordDim===O&&K++});var G={name:Q,coordDim:O,coordDimIndex:K,type:X,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:W.length},k={name:j,coordDim:j,coordDimIndex:K+1,type:X,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:W.length+1};Y?(H&&(G.storeDimIndex=H.ensureCalculationDimension(j,X),k.storeDimIndex=H.ensureCalculationDimension(Q,X)),Y.appendCalculationDimension(G),Y.appendCalculationDimension(k)):(W.push(G),W.push(k))}return{stackedDimension:g&&g.name,stackedByDimension:J&&J.name,isStackedByIndex:tt,stackedOverDimension:j,stackResultDimension:Q}}function vt(xt){return!(0,dt.bB)(xt.schema)}function yt(xt,nt){return!!nt&&nt===xt.getCalculationInfo("stackedDimension")}function gt(xt,nt){return yt(xt,nt)?xt.getCalculationInfo("stackResultDimension"):nt}},43422:function(Pe,ee,z){z.d(ee,{ID:function(){return Z},o2:function(){return gt},tR:function(){return ot},yQ:function(){return vt}});var F=z(97414),dt=z(70324),q=z(13259);function vt(W,Y){var H=Y&&Y.type;return H==="ordinal"?W:(H==="time"&&!(0,dt.hj)(W)&&W!=null&&W!=="-"&&(W=+(0,F.sG)(W)),W==null||W===""?NaN:+W)}var yt=(0,dt.kW)({number:function(W){return parseFloat(W)},time:function(W){return+(0,F.sG)(W)},trim:function(W){return(0,dt.HD)(W)?(0,dt.fy)(W):W}});function gt(W){return yt.get(W)}var xt={lt:function(W,Y){return W<Y},lte:function(W,Y){return W<=Y},gt:function(W,Y){return W>Y},gte:function(W,Y){return W>=Y}},nt=function(){function W(Y,H){if(!(0,dt.hj)(H)){var st="";(0,q._y)(st)}this._opFn=xt[Y],this._rvalFloat=(0,F.FK)(H)}return W.prototype.evaluate=function(Y){return(0,dt.hj)(Y)?this._opFn(Y,this._rvalFloat):this._opFn((0,F.FK)(Y),this._rvalFloat)},W}(),Z=function(){function W(Y,H){var st=Y==="desc";this._resultLT=st?1:-1,H==null&&(H=st?"min":"max"),this._incomparable=H==="min"?-1/0:1/0}return W.prototype.evaluate=function(Y,H){var st=(0,dt.hj)(Y)?Y:(0,F.FK)(Y),J=(0,dt.hj)(H)?H:(0,F.FK)(H),g=isNaN(st),Q=isNaN(J);if(g&&(st=this._incomparable),Q&&(J=this._incomparable),g&&Q){var j=(0,dt.HD)(Y),O=(0,dt.HD)(H);j&&(st=O?Y:0),O&&(J=j?H:0)}return st<J?this._resultLT:st>J?-this._resultLT:0},W}(),tt=function(){function W(Y,H){this._rval=H,this._isEQ=Y,this._rvalTypeof=typeof H,this._rvalFloat=(0,F.FK)(H)}return W.prototype.evaluate=function(Y){var H=Y===this._rval;if(!H){var st=typeof Y;st!==this._rvalTypeof&&(st==="number"||this._rvalTypeof==="number")&&(H=(0,F.FK)(Y)===this._rvalFloat)}return this._isEQ?H:!H},W}();function ot(W,Y){return W==="eq"||W==="ne"?new tt(W==="eq",Y):(0,dt.RI)(xt,W)?new nt(W,Y):null}},51535:function(Pe,ee,z){z.d(ee,{T:function(){return gt},y:function(){return vt}});var F=z(70324),dt=z(27674),q=function(){function nt(Z,tt){this._encode=Z,this._schema=tt}return nt.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},nt.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},nt}();function vt(nt,Z){var tt={},ot=tt.encode={},W=(0,F.kW)(),Y=[],H=[],st={};(0,F.S6)(nt.dimensions,function(O){var X=nt.getDimensionInfo(O),K=X.coordDim;if(K){var G=X.coordDimIndex;yt(ot,K)[G]=O,X.isExtraCoord||(W.set(K,1),xt(X.type)&&(Y[0]=O),yt(st,K)[G]=nt.getDimensionIndex(X.name)),X.defaultTooltip&&H.push(O)}dt.f7.each(function(k,R){var T=yt(ot,R),P=X.otherDims[R];P!=null&&P!==!1&&(T[P]=X.name)})});var J=[],g={};W.each(function(O,X){var K=ot[X];g[X]=K[0],J=J.concat(K)}),tt.dataDimsOnCoord=J,tt.dataDimIndicesOnCoord=(0,F.UI)(J,function(O){return nt.getDimensionInfo(O).storeDimIndex}),tt.encodeFirstDimNotExtra=g;var Q=ot.label;Q&&Q.length&&(Y=Q.slice());var j=ot.tooltip;return j&&j.length?H=j.slice():H.length||(H=Y.slice()),ot.defaultedLabel=Y,ot.defaultedTooltip=H,tt.userOutput=new q(st,Z),tt}function yt(nt,Z){return nt.hasOwnProperty(Z)||(nt[Z]=[]),nt[Z]}function gt(nt){return nt==="category"?"ordinal":nt==="time"?"time":"float"}function xt(nt){return!(nt==="ordinal"||nt==="time")}},89130:function(Pe,ee,z){var F=z(70324),dt=z(21611),q=(0,dt.Yf)();function vt(Y){var H=Y.mainData,st=Y.datas;st||(st={main:H},Y.datasAttr={main:"data"}),Y.datas=Y.mainData=null,ot(H,st,Y),(0,F.S6)(st,function(J){(0,F.S6)(H.TRANSFERABLE_METHODS,function(g){J.wrapMethod(g,(0,F.WA)(yt,Y))})}),H.wrapMethod("cloneShallow",(0,F.WA)(xt,Y)),(0,F.S6)(H.CHANGABLE_METHODS,function(J){H.wrapMethod(J,(0,F.WA)(gt,Y))}),(0,F.hu)(st[H.dataType]===H)}function yt(Y,H){if(tt(this)){var st=(0,F.l7)({},q(this).datas);st[this.dataType]=H,ot(H,st,Y)}else W(H,this.dataType,q(this).mainData,Y);return H}function gt(Y,H){return Y.struct&&Y.struct.update(),H}function xt(Y,H){return(0,F.S6)(q(H).datas,function(st,J){st!==H&&W(st.cloneShallow(),J,H,Y)}),H}function nt(Y){var H=q(this).mainData;return Y==null||H==null?H:q(H).datas[Y]}function Z(){var Y=q(this).mainData;return Y==null?[{data:Y}]:(0,F.UI)((0,F.XP)(q(Y).datas),function(H){return{type:H,data:q(Y).datas[H]}})}function tt(Y){return q(Y).mainData===Y}function ot(Y,H,st){q(Y).datas={},(0,F.S6)(H,function(J,g){W(J,g,Y,st)})}function W(Y,H,st,J){q(st).datas[H]=Y,q(Y).mainData=st,Y.dataType=H,J.struct&&(Y[J.structAttr]=J.struct,J.struct[J.datasAttr[H]]=Y),Y.getLinkedData=nt,Y.getLinkedDataAll=Z}ee.Z=vt},459:function(Pe,ee,z){z.d(ee,{Dq:function(){return vt},JT:function(){return tt},Ss:function(){return nt},Wd:function(){return Z},md:function(){return gt},pY:function(){return xt},u7:function(){return ot}});var F=z(21611),dt=z(70324),q=z(27674),vt={Must:1,Might:2,Not:3},yt=(0,F.Yf)();function gt(Y){yt(Y).datasetMap=(0,dt.kW)()}function xt(Y,H,st){var J={},g=Z(H);if(!g||!Y)return J;var Q=[],j=[],O=H.ecModel,X=yt(O).datasetMap,K=g.uid+"_"+st.seriesLayoutBy,G,k;Y=Y.slice(),(0,dt.S6)(Y,function(M,b){var w=(0,dt.Kn)(M)?M:Y[b]={name:M};w.type==="ordinal"&&G==null&&(G=b,k=P(w)),J[w.name]=[]});var R=X.get(K)||X.set(K,{categoryWayDim:k,valueWayDim:0});(0,dt.S6)(Y,function(M,b){var w=M.name,C=P(M);if(G==null){var V=R.valueWayDim;T(J[w],V,C),T(j,V,C),R.valueWayDim+=C}else if(G===b)T(J[w],0,C),T(Q,0,C);else{var V=R.categoryWayDim;T(J[w],V,C),T(j,V,C),R.categoryWayDim+=C}});function T(M,b,w){for(var C=0;C<w;C++)M.push(b+C)}function P(M){var b=M.dimsDef;return b?b.length:1}return Q.length&&(J.itemName=Q),j.length&&(J.seriesName=j),J}function nt(Y,H,st){var J={},g=Z(Y);if(!g)return J;var Q=H.sourceFormat,j=H.dimensionsDefine,O;(Q===q.qb||Q===q.hL)&&(0,dt.S6)(j,function(G,k){((0,dt.Kn)(G)?G.name:G)==="name"&&(O=k)});var X=function(){for(var G={},k={},R=[],T=0,P=Math.min(5,st);T<P;T++){var M=W(H.data,Q,H.seriesLayoutBy,j,H.startIndex,T);R.push(M);var b=M===vt.Not;if(b&&G.v==null&&T!==O&&(G.v=T),(G.n==null||G.n===G.v||!b&&R[G.n]===vt.Not)&&(G.n=T),w(G)&&R[G.n]!==vt.Not)return G;b||(M===vt.Might&&k.v==null&&T!==O&&(k.v=T),(k.n==null||k.n===k.v)&&(k.n=T))}function w(C){return C.v!=null&&C.n!=null}return w(G)?G:w(k)?k:null}();if(X){J.value=[X.v];var K=O!=null?O:X.n;J.itemName=[K],J.seriesName=[K]}return J}function Z(Y){var H=Y.get("data",!0);if(!H)return(0,F.HZ)(Y.ecModel,"dataset",{index:Y.get("datasetIndex",!0),id:Y.get("datasetId",!0)},F.C6).models[0]}function tt(Y){return!Y.get("transform",!0)&&!Y.get("fromTransformResult",!0)?[]:(0,F.HZ)(Y.ecModel,"dataset",{index:Y.get("fromDatasetIndex",!0),id:Y.get("fromDatasetId",!0)},F.C6).models}function ot(Y,H){return W(Y.data,Y.sourceFormat,Y.seriesLayoutBy,Y.dimensionsDefine,Y.startIndex,H)}function W(Y,H,st,J,g,Q){var j,O=5;if((0,dt.fU)(Y))return vt.Not;var X,K;if(J){var G=J[Q];(0,dt.Kn)(G)?(X=G.name,K=G.type):(0,dt.HD)(G)&&(X=G)}if(K!=null)return K==="ordinal"?vt.Must:vt.Not;if(H===q.XD){var k=Y;if(st===q.Wc){for(var R=k[Q],T=0;T<(R||[]).length&&T<O;T++)if((j=B(R[g+T]))!=null)return j}else for(var T=0;T<k.length&&T<O;T++){var P=k[g+T];if(P&&(j=B(P[Q]))!=null)return j}}else if(H===q.qb){var M=Y;if(!X)return vt.Not;for(var T=0;T<M.length&&T<O;T++){var b=M[T];if(b&&(j=B(b[X]))!=null)return j}}else if(H===q.hL){var w=Y;if(!X)return vt.Not;var R=w[X];if(!R||(0,dt.fU)(R))return vt.Not;for(var T=0;T<R.length&&T<O;T++)if((j=B(R[T]))!=null)return j}else if(H===q.cy)for(var C=Y,T=0;T<C.length&&T<O;T++){var b=C[T],V=(0,F.C4)(b);if(!(0,dt.kJ)(V))return vt.Not;if((j=B(V[Q]))!=null)return j}function B(ut){var it=(0,dt.HD)(ut);if(ut!=null&&isFinite(ut)&&ut!=="")return it?vt.Might:vt.Not;if(it&&ut!=="-")return vt.Must}return vt.Not}},75818:function(Pe,ee,z){z.d(ee,{U:function(){return nt},t:function(){return Z}});var F=z(70324),dt=z(79518),q=z(27674),vt=z(459),yt=z(57335),gt=z(2343),xt=z(92502),nt=function(){function W(Y){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=Y}return W.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},W.prototype._setLocalSource=function(Y,H){this._sourceList=Y,this._upstreamSignList=H,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},W.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},W.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},W.prototype._createSource=function(){this._setLocalSource([],[]);var Y=this._sourceHost,H=this._getUpstreamSourceManagers(),st=!!H.length,J,g;if(tt(Y)){var Q=Y,j=void 0,O=void 0,X=void 0;if(st){var K=H[0];K.prepareSource(),X=K.getSource(),j=X.data,O=X.sourceFormat,g=[K._getVersionSign()]}else j=Q.get("data",!0),O=(0,F.fU)(j)?q.J5:q.cy,g=[];var G=this._getSourceMetaRawOption()||{},k=X&&X.metaRawOption||{},R=(0,F.pD)(G.seriesLayoutBy,k.seriesLayoutBy)||null,T=(0,F.pD)(G.sourceHeader,k.sourceHeader),P=(0,F.pD)(G.dimensions,k.dimensions),M=R!==k.seriesLayoutBy||!!T!=!!k.sourceHeader||P;J=M?[(0,dt._P)(j,{seriesLayoutBy:R,sourceHeader:T,dimensions:P},O)]:[]}else{var b=Y;if(st){var w=this._applyTransform(H);J=w.sourceList,g=w.upstreamSignList}else{var C=b.get("source",!0);J=[(0,dt._P)(C,this._getSourceMetaRawOption(),null)],g=[]}}this._setLocalSource(J,g)},W.prototype._applyTransform=function(Y){var H=this._sourceHost,st=H.get("transform",!0),J=H.get("fromTransformResult",!0);if(J!=null){var g="";Y.length!==1&&ot(g)}var Q,j=[],O=[];return(0,F.S6)(Y,function(X){X.prepareSource();var K=X.getSource(J||0),G="";J!=null&&!K&&ot(G),j.push(K),O.push(X._getVersionSign())}),st?Q=(0,yt.vK)(st,j,{datasetIndex:H.componentIndex}):J!=null&&(Q=[(0,dt.ML)(j[0])]),{sourceList:Q,upstreamSignList:O}},W.prototype._isDirty=function(){if(this._dirty)return!0;for(var Y=this._getUpstreamSourceManagers(),H=0;H<Y.length;H++){var st=Y[H];if(st._isDirty()||this._upstreamSignList[H]!==st._getVersionSign())return!0}},W.prototype.getSource=function(Y){Y=Y||0;var H=this._sourceList[Y];if(!H){var st=this._getUpstreamSourceManagers();return st[0]&&st[0].getSource(Y)}return H},W.prototype.getSharedDataStore=function(Y){var H=Y.makeStoreSchema();return this._innerGetDataStore(H.dimensions,Y.source,H.hash)},W.prototype._innerGetDataStore=function(Y,H,st){var J=0,g=this._storeList,Q=g[J];Q||(Q=g[J]={});var j=Q[st];if(!j){var O=this._getUpstreamSourceManagers()[0];tt(this._sourceHost)&&O?j=O._innerGetDataStore(Y,H,st):(j=new gt.ZP,j.initData(new xt.Pl(H,Y.length),Y)),Q[st]=j}return j},W.prototype._getUpstreamSourceManagers=function(){var Y=this._sourceHost;if(tt(Y)){var H=(0,vt.Wd)(Y);return H?[H.getSourceManager()]:[]}else return(0,F.UI)((0,vt.JT)(Y),function(st){return st.getSourceManager()})},W.prototype._getSourceMetaRawOption=function(){var Y=this._sourceHost,H,st,J;if(tt(Y))H=Y.get("seriesLayoutBy",!0),st=Y.get("sourceHeader",!0),J=Y.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var g=Y;H=g.get("seriesLayoutBy",!0),st=g.get("sourceHeader",!0),J=g.get("dimensions",!0)}return{seriesLayoutBy:H,sourceHeader:st,dimensions:J}},W}();function Z(W){var Y=W.option.transform;Y&&(0,F.s7)(W.option.transform)}function tt(W){return W.mainType==="series"}function ot(W){throw new Error(W)}},57335:function(Pe,ee,z){z.d(ee,{DA:function(){return st},vK:function(){return J}});var F=z(27674),dt=z(21611),q=z(70324),vt=z(92502),yt=z(43422),gt=z(13259),xt=z(79518),nt=function(){function j(){}return j.prototype.getRawData=function(){throw new Error("not supported")},j.prototype.getRawDataItem=function(O){throw new Error("not supported")},j.prototype.cloneRawData=function(){},j.prototype.getDimensionInfo=function(O){},j.prototype.cloneAllDimensionInfo=function(){},j.prototype.count=function(){},j.prototype.retrieveValue=function(O,X){},j.prototype.retrieveValueFromItem=function(O,X){},j.prototype.convertValue=function(O,X){return(0,yt.yQ)(O,X)},j}();function Z(j,O){var X=new nt,K=j.data,G=X.sourceFormat=j.sourceFormat,k=j.startIndex,R="";j.seriesLayoutBy!==F.fY&&(0,gt._y)(R);var T=[],P={},M=j.dimensionsDefine;if(M)(0,q.S6)(M,function(ut,it){var lt=ut.name,rt={index:it,name:lt,displayName:ut.displayName};if(T.push(rt),lt!=null){var ct="";(0,q.RI)(P,lt)&&(0,gt._y)(ct),P[lt]=rt}});else for(var b=0;b<j.dimensionsDetectedCount;b++)T.push({index:b});var w=(0,vt._j)(G,F.fY);O.__isBuiltIn&&(X.getRawDataItem=function(ut){return w(K,k,T,ut)},X.getRawData=(0,q.ak)(tt,null,j)),X.cloneRawData=(0,q.ak)(ot,null,j);var C=(0,vt.a)(G,F.fY);X.count=(0,q.ak)(C,null,K,k,T);var V=(0,vt.tB)(G);X.retrieveValue=function(ut,it){var lt=w(K,k,T,ut);return B(lt,it)};var B=X.retrieveValueFromItem=function(ut,it){if(ut!=null){var lt=T[it];if(lt)return V(ut,it,lt.name)}};return X.getDimensionInfo=(0,q.ak)(W,null,T,P),X.cloneAllDimensionInfo=(0,q.ak)(Y,null,T),X}function tt(j){var O=j.sourceFormat;if(!Q(O)){var X="";(0,gt._y)(X)}return j.data}function ot(j){var O=j.sourceFormat,X=j.data;if(!Q(O)){var K="";(0,gt._y)(K)}if(O===F.XD){for(var G=[],k=0,R=X.length;k<R;k++)G.push(X[k].slice());return G}else if(O===F.qb){for(var G=[],k=0,R=X.length;k<R;k++)G.push((0,q.l7)({},X[k]));return G}}function W(j,O,X){if(X!=null){if((0,q.hj)(X)||!isNaN(X)&&!(0,q.RI)(O,X))return j[X];if((0,q.RI)(O,X))return O[X]}}function Y(j){return(0,q.d9)(j)}var H=(0,q.kW)();function st(j){j=(0,q.d9)(j);var O=j.type,X="";O||(0,gt._y)(X);var K=O.split(":");K.length!==2&&(0,gt._y)(X);var G=!1;K[0]==="echarts"&&(O=K[1],G=!0),j.__isBuiltIn=G,H.set(O,j)}function J(j,O,X){var K=(0,dt.kF)(j),G=K.length,k="";G||(0,gt._y)(k);for(var R=0,T=G;R<T;R++){var P=K[R];O=g(P,O,X,G===1?null:R),R!==T-1&&(O.length=Math.max(O.length,1))}return O}function g(j,O,X,K){var G="";O.length||(0,gt._y)(G),(0,q.Kn)(j)||(0,gt._y)(G);var k=j.type,R=H.get(k);R||(0,gt._y)(G);var T=(0,q.UI)(O,function(b){return Z(b,R)}),P=(0,dt.kF)(R.transform({upstream:T[0],upstreamList:T,config:(0,q.d9)(j.config)}));if(!1)var M;return(0,q.UI)(P,function(b,w){var C="";(0,q.Kn)(b)||(0,gt._y)(C),b.data||(0,gt._y)(C);var V=(0,xt.Kp)(b.data);Q(V)||(0,gt._y)(C);var B,ut=O[0];if(ut&&w===0&&!b.dimensions){var it=ut.startIndex;it&&(b.data=ut.data.slice(0,it).concat(b.data)),B={seriesLayoutBy:F.fY,sourceHeader:it,dimensions:ut.metaRawOption.dimensions}}else B={seriesLayoutBy:F.fY,sourceHeader:0,dimensions:b.dimensions};return(0,xt._P)(b.data,B,null)})}function Q(j){return j===F.XD||j===F.qb}},41117:function(Pe,ee,z){z.d(ee,{RD:function(){return Dt.Z},TA:function(){return tt.Z},tF:function(){return xt.Z},Ir:function(){return nt.Z},aV:function(){return ot.Z},Hn:function(){return Q.Z},wJ:function(){return Z.Z},$_:function(){return Y},WU:function(){return vt},wL:function(){return gt.wL},FU:function(){return gt.FU},Q:function(){return q},_y:function(){return F},S1:function(){return gt.S1},z$:function(){return wt.RV},Rx:function(){return dt},Nu:function(){return V.Z},pQ:function(){return V.Z},sq:function(){return gt.sq},Br:function(){return gt.Br},ds:function(){return gt.ds},D$:function(){return C.D},D5:function(){return yt},x_:function(){return W}});var F={};z.r(F),z.d(F,{createDimensions:function(){return G.q},createList:function(){return T},createScale:function(){return M},createSymbol:function(){return k.th},createTextStyle:function(){return w},dataStack:function(){return P},enableHoverEmphasis:function(){return R.vF},getECData:function(){return X.A},getLayoutRect:function(){return j.ME},mixinAxisModelCommonMethods:function(){return b}});var dt={};z.r(dt),z.d(dt,{MAX_SAFE_INTEGER:function(){return B.YM},asc:function(){return B.dt},getPercentWithPrecision:function(){return B.eJ},getPixelPrecision:function(){return B.M9},getPrecision:function(){return B.p8},getPrecisionSafe:function(){return B.ZB},isNumeric:function(){return B.kE},isRadianAroundZero:function(){return B.mW},linearMap:function(){return B.NU},nice:function(){return B.kx},numericToNumber:function(){return B.FK},parseDate:function(){return B.sG},quantile:function(){return B.VR},quantity:function(){return B.Xd},quantityExponent:function(){return B.xW},reformIntervals:function(){return B.nR},remRadian:function(){return B.wW},round:function(){return B.NM}});var q={};z.r(q),z.d(q,{KC:function(){return rt.Z},Ee:function(){return ut.ZP},UL:function(){return lt.Z},xv:function(){return it.ZP}});var vt={};z.r(vt),z.d(vt,{addCommas:function(){return ct.OD},capitalFirst:function(){return ct.ew},encodeHTML:function(){return St.F1},formatTime:function(){return ct.mr},formatTpl:function(){return ct.kF},getTextRect:function(){return mt},getTooltipMarker:function(){return ct.A0},normalizeCssArray:function(){return ct.MY},toCamelCase:function(){return ct.zW},truncateText:function(){return at.aF}});var yt={};z.r(yt),z.d(yt,{bind:function(){return H.ak},clone:function(){return H.d9},curry:function(){return H.WA},defaults:function(){return H.ce},each:function(){return H.S6},extend:function(){return H.l7},filter:function(){return H.hX},indexOf:function(){return H.cq},inherits:function(){return H.XW},isArray:function(){return H.kJ},isFunction:function(){return H.mf},isObject:function(){return H.Kn},isString:function(){return H.HD},map:function(){return H.UI},merge:function(){return H.TS},reduce:function(){return H.u4}});var gt=z(78358),xt=z(47497),nt=z(70296),Z=z(88242),tt=z(57839),ot=z(56152),W=z(32389),Y=z(96170),H=z(70324),st=z(12526),J=z(33871),g=z(68935),Q=z(97853),j=z(28734),O=z(28391),X=z(98845),K=z(65261),G=z(22253),k=z(54373),R=z(58833);function T(Qt){return(0,st.Z)(null,Qt)}var P={isDimensionStacked:O.M,enableDataStack:O.BM,getStackedDimension:O.IR};function M(Qt,re){var ye=re;re instanceof Q.Z||(ye=new Q.Z(re));var he=J.aG(ye);return he.setExtent(Qt[0],Qt[1]),J.Jk(he,ye),he}function b(Qt){H.jB(Qt,g.W)}function w(Qt,re){return re=re||{},(0,K.Lr)(Qt,null,null,re.state!=="normal")}var C=z(11454),V=z(97271),B=z(97414),ut=z(13806),it=z(95169),lt=z(73909),rt=z(16128),ct=z(20283),St=z(80400),at=z(28185);function mt(Qt,re,ye,he,be,Be,Ze,qe){var pr=new it.ZP({style:{text:Qt,font:re,align:ye,verticalAlign:he,padding:be,rich:Be,overflow:Ze?"truncate":null,lineHeight:qe}});return pr.getBoundingRect()}var Dt=z(26992),wt=z(87368);function Pt(Qt){var re=ComponentModel.extend(Qt);return ComponentModel.registerClass(re),re}function bt(Qt){var re=ComponentView.extend(Qt);return ComponentView.registerClass(re),re}function Ot(Qt){var re=SeriesModel.extend(Qt);return SeriesModel.registerClass(re),re}function Bt(Qt){var re=ChartView.extend(Qt);return ChartView.registerClass(re),re}var Ht=z(31840);(0,C.D)(Ht.T)},11454:function(Pe,ee,z){z.d(ee,{D:function(){return ot}});var F=z(78358),dt=z(70296),q=z(57839),vt=z(47497),yt=z(88242),gt=z(70324),xt=z(5536),nt=z(32389),Z=[],tt={registerPreprocessor:F.ds,registerProcessor:F.Pu,registerPostInit:F.sq,registerPostUpdate:F.Br,registerUpdateLifecycle:F.YK,registerAction:F.zl,registerCoordinateSystem:F.RS,registerLayout:F.qR,registerVisual:F.Og,registerTransform:F.OB,registerLoading:F.yn,registerMap:F.je,registerImpl:xt.M,PRIORITY:F.Hr,ComponentModel:vt.Z,ComponentView:dt.Z,SeriesModel:yt.Z,ChartView:q.Z,registerComponentModel:function(W){vt.Z.registerClass(W)},registerComponentView:function(W){dt.Z.registerClass(W)},registerSeriesModel:function(W){yt.Z.registerClass(W)},registerChartView:function(W){q.Z.registerClass(W)},registerSubTypeDefaulter:function(W,Y){vt.Z.registerSubTypeDefaulter(W,Y)},registerPainter:function(W,Y){(0,nt.registerPainter)(W,Y)}};function ot(W){if((0,gt.kJ)(W)){(0,gt.S6)(W,function(Y){ot(Y)});return}(0,gt.cq)(Z,W)>=0||(Z.push(W),(0,gt.mf)(W)&&(W={install:W}),W.install(tt))}},31840:function(Pe,ee,z){z.d(ee,{T:function(){return K}});var F=z(21611),dt=z(16128),q=z(25400),vt=z(98845),yt=z(97414),gt=z(23463),xt=z(48138),nt=z(70324),Z=z(22804),tt=z(65261);function ot(G){if(G){for(var k=[],R=0;R<G.length;R++)k.push(G[R].slice());return k}}function W(G,k){var R=G.label,T=k&&k.getTextGuideLine();return{dataIndex:G.dataIndex,dataType:G.dataType,seriesIndex:G.seriesModel.seriesIndex,text:G.label.style.text,rect:G.hostRect,labelRect:G.rect,align:R.style.align,verticalAlign:R.style.verticalAlign,labelLinePoints:ot(T&&T.shape.points)}}var Y=["align","verticalAlign","width","height","fontSize"],H=new gt.ZP,st=(0,F.Yf)(),J=(0,F.Yf)();function g(G,k,R){for(var T=0;T<R.length;T++){var P=R[T];k[P]!=null&&(G[P]=k[P])}}var Q=["x","y","rotation"],j=function(){function G(){this._labelList=[],this._chartViewList=[]}return G.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},G.prototype._addLabel=function(k,R,T,P,M){var b=P.style,w=P.__hostTarget,C=w.textConfig||{},V=P.getComputedTransform(),B=P.getBoundingRect().plain();dt.Z.applyTransform(B,B,V),V?H.setLocalTransform(V):(H.x=H.y=H.rotation=H.originX=H.originY=0,H.scaleX=H.scaleY=1);var ut=P.__hostTarget,it;if(ut){it=ut.getBoundingRect().plain();var lt=ut.getComputedTransform();dt.Z.applyTransform(it,it,lt)}var rt=it&&ut.getTextGuideLine();this._labelList.push({label:P,labelLine:rt,seriesModel:T,dataIndex:k,dataType:R,layoutOption:M,computedLayoutOption:null,rect:B,hostRect:it,priority:it?it.width*it.height:0,defaultAttr:{ignore:P.ignore,labelGuideIgnore:rt&&rt.ignore,x:H.x,y:H.y,scaleX:H.scaleX,scaleY:H.scaleY,rotation:H.rotation,style:{x:b.x,y:b.y,align:b.align,verticalAlign:b.verticalAlign,width:b.width,height:b.height,fontSize:b.fontSize},cursor:P.cursor,attachedPos:C.position,attachedRot:C.rotation}})},G.prototype.addLabelsOfSeries=function(k){var R=this;this._chartViewList.push(k);var T=k.__model,P=T.get("labelLayout");((0,nt.mf)(P)||(0,nt.XP)(P).length)&&k.group.traverse(function(M){if(M.ignore)return!0;var b=M.getTextContent(),w=(0,vt.A)(M);b&&!b.disableLabelLayout&&R._addLabel(w.dataIndex,w.dataType,T,b,P)})},G.prototype.updateLayoutConfig=function(k){var R=k.getWidth(),T=k.getHeight();function P(Dt,wt){return function(){(0,xt.d)(Dt,wt)}}for(var M=0;M<this._labelList.length;M++){var b=this._labelList[M],w=b.label,C=w.__hostTarget,V=b.defaultAttr,B=void 0;(0,nt.mf)(b.layoutOption)?B=b.layoutOption(W(b,C)):B=b.layoutOption,B=B||{},b.computedLayoutOption=B;var ut=Math.PI/180;C&&C.setTextConfig({local:!1,position:B.x!=null||B.y!=null?null:V.attachedPos,rotation:B.rotate!=null?B.rotate*ut:V.attachedRot,offset:[B.dx||0,B.dy||0]});var it=!1;if(B.x!=null?(w.x=(0,yt.GM)(B.x,R),w.setStyle("x",0),it=!0):(w.x=V.x,w.setStyle("x",V.style.x)),B.y!=null?(w.y=(0,yt.GM)(B.y,T),w.setStyle("y",0),it=!0):(w.y=V.y,w.setStyle("y",V.style.y)),B.labelLinePoints){var lt=C.getTextGuideLine();lt&&(lt.setShape({points:B.labelLinePoints}),it=!1)}var rt=st(w);rt.needsUpdateLabelLine=it,w.rotation=B.rotate!=null?B.rotate*ut:V.rotation,w.scaleX=V.scaleX,w.scaleY=V.scaleY;for(var ct=0;ct<Y.length;ct++){var St=Y[ct];w.setStyle(St,B[St]!=null?B[St]:V.style[St])}if(B.draggable){if(w.draggable=!0,w.cursor="move",C){var at=b.seriesModel;if(b.dataIndex!=null){var mt=b.seriesModel.getData(b.dataType);at=mt.getItemModel(b.dataIndex)}w.on("drag",P(C,at.getModel("labelLine")))}}else w.off("drag"),w.cursor=V.cursor}},G.prototype.layout=function(k){var R=k.getWidth(),T=k.getHeight(),P=(0,Z.VT)(this._labelList),M=(0,nt.hX)(P,function(C){return C.layoutOption.moveOverlap==="shiftX"}),b=(0,nt.hX)(P,function(C){return C.layoutOption.moveOverlap==="shiftY"});(0,Z.WE)(M,0,R),(0,Z.GI)(b,0,T);var w=(0,nt.hX)(P,function(C){return C.layoutOption.hideOverlap});(0,Z.yl)(w)},G.prototype.processLabelsOverall=function(){var k=this;(0,nt.S6)(this._chartViewList,function(R){var T=R.__model,P=R.ignoreLabelLineUpdate,M=T.isAnimationEnabled();R.group.traverse(function(b){if(b.ignore&&!b.forceLabelAnimation)return!0;var w=!P,C=b.getTextContent();!w&&C&&(w=st(C).needsUpdateLabelLine),w&&k._updateLabelLine(b,T),M&&k._animateLabels(b,T)})})},G.prototype._updateLabelLine=function(k,R){var T=k.getTextContent(),P=(0,vt.A)(k),M=P.dataIndex;if(T&&M!=null){var b=R.getData(P.dataType),w=b.getItemModel(M),C={},V=b.getItemVisual(M,"style"),B=b.getVisual("drawType");C.stroke=V[B];var ut=w.getModel("labelLine");(0,xt.Iu)(k,(0,xt.$x)(w),C),(0,xt.d)(k,ut)}},G.prototype._animateLabels=function(k,R){var T=k.getTextContent(),P=k.getTextGuideLine();if(T&&(k.forceLabelAnimation||!T.ignore&&!T.invisible&&!k.disableLabelAnimation&&!(0,q.eq)(k))){var M=st(T),b=M.oldLayout,w=(0,vt.A)(k),C=w.dataIndex,V={x:T.x,y:T.y,rotation:T.rotation},B=R.getData(w.dataType);if(b){T.attr(b);var it=k.prevStates;it&&((0,nt.cq)(it,"select")>=0&&T.attr(M.oldLayoutSelect),(0,nt.cq)(it,"emphasis")>=0&&T.attr(M.oldLayoutEmphasis)),(0,q.D)(T,V,R,C)}else if(T.attr(V),!(0,tt.qA)(T).valueAnimation){var ut=(0,nt.pD)(T.style.opacity,1);T.style.opacity=0,(0,q.KZ)(T,{style:{opacity:ut}},R,C)}if(M.oldLayout=V,T.states.select){var lt=M.oldLayoutSelect={};g(lt,V,Q),g(lt,T.states.select,Q)}if(T.states.emphasis){var rt=M.oldLayoutEmphasis={};g(rt,V,Q),g(rt,T.states.emphasis,Q)}(0,tt.tD)(T,C,B,R,R)}if(P&&!P.ignore&&!P.invisible){var M=J(P),b=M.oldLayout,ct={points:P.shape.points};b?(P.attr({shape:b}),(0,q.D)(P,{shape:ct},R)):(P.setShape(ct),P.style.strokePercent=0,(0,q.KZ)(P,{style:{strokePercent:1}},R)),M.oldLayout=ct}},G}(),O=j,X=(0,F.Yf)();function K(G){G.registerUpdateLifecycle("series:beforeupdate",function(k,R,T){var P=X(R).labelManager;P||(P=X(R).labelManager=new O),P.clearLabels()}),G.registerUpdateLifecycle("series:layoutlabels",function(k,R,T){var P=X(R).labelManager;T.updatedSeries.forEach(function(M){P.addLabelsOfSeries(R.getViewOfSeriesModel(M))}),P.updateLayoutConfig(R),P.layout(R),P.processLabelsOverall()})}},48138:function(Pe,ee,z){z.d(ee,{$x:function(){return ut},Iu:function(){return B},_A:function(){return w},d:function(){return T},qK:function(){return b}});var F=z(73913),dt=z(66210),q=z(6224),vt=z(29436),yt=z(47833),gt=z(14296),xt=z(70324),nt=z(58427),Z=z(85755),tt=z(58833),ot=Math.PI*2,W=vt.Z.CMD,Y=["top","right","bottom","left"];function H(it,lt,rt,ct,St){var at=rt.width,mt=rt.height;switch(it){case"top":ct.set(rt.x+at/2,rt.y-lt),St.set(0,-1);break;case"bottom":ct.set(rt.x+at/2,rt.y+mt+lt),St.set(0,1);break;case"left":ct.set(rt.x-lt,rt.y+mt/2),St.set(-1,0);break;case"right":ct.set(rt.x+at+lt,rt.y+mt/2),St.set(1,0);break}}function st(it,lt,rt,ct,St,at,mt,Dt,wt){mt-=it,Dt-=lt;var Pt=Math.sqrt(mt*mt+Dt*Dt);mt/=Pt,Dt/=Pt;var bt=mt*rt+it,Ot=Dt*rt+lt;if(Math.abs(ct-St)%ot<1e-4)return wt[0]=bt,wt[1]=Ot,Pt-rt;if(at){var Bt=ct;ct=(0,yt.m)(St),St=(0,yt.m)(Bt)}else ct=(0,yt.m)(ct),St=(0,yt.m)(St);ct>St&&(St+=ot);var Ht=Math.atan2(Dt,mt);if(Ht<0&&(Ht+=ot),Ht>=ct&&Ht<=St||Ht+ot>=ct&&Ht+ot<=St)return wt[0]=bt,wt[1]=Ot,Pt-rt;var Qt=rt*Math.cos(ct)+it,re=rt*Math.sin(ct)+lt,ye=rt*Math.cos(St)+it,he=rt*Math.sin(St)+lt,be=(Qt-mt)*(Qt-mt)+(re-Dt)*(re-Dt),Be=(ye-mt)*(ye-mt)+(he-Dt)*(he-Dt);return be<Be?(wt[0]=Qt,wt[1]=re,Math.sqrt(be)):(wt[0]=ye,wt[1]=he,Math.sqrt(Be))}function J(it,lt,rt,ct,St,at,mt,Dt){var wt=St-it,Pt=at-lt,bt=rt-it,Ot=ct-lt,Bt=Math.sqrt(bt*bt+Ot*Ot);bt/=Bt,Ot/=Bt;var Ht=wt*bt+Pt*Ot,Qt=Ht/Bt;Dt&&(Qt=Math.min(Math.max(Qt,0),1)),Qt*=Bt;var re=mt[0]=it+Qt*bt,ye=mt[1]=lt+Qt*Ot;return Math.sqrt((re-St)*(re-St)+(ye-at)*(ye-at))}function g(it,lt,rt,ct,St,at,mt){rt<0&&(it=it+rt,rt=-rt),ct<0&&(lt=lt+ct,ct=-ct);var Dt=it+rt,wt=lt+ct,Pt=mt[0]=Math.min(Math.max(St,it),Dt),bt=mt[1]=Math.min(Math.max(at,lt),wt);return Math.sqrt((Pt-St)*(Pt-St)+(bt-at)*(bt-at))}var Q=[];function j(it,lt,rt){var ct=g(lt.x,lt.y,lt.width,lt.height,it.x,it.y,Q);return rt.set(Q[0],Q[1]),ct}function O(it,lt,rt){for(var ct=0,St=0,at=0,mt=0,Dt,wt,Pt=1/0,bt=lt.data,Ot=it.x,Bt=it.y,Ht=0;Ht<bt.length;){var Qt=bt[Ht++];Ht===1&&(ct=bt[Ht],St=bt[Ht+1],at=ct,mt=St);var re=Pt;switch(Qt){case W.M:at=bt[Ht++],mt=bt[Ht++],ct=at,St=mt;break;case W.L:re=J(ct,St,bt[Ht],bt[Ht+1],Ot,Bt,Q,!0),ct=bt[Ht++],St=bt[Ht++];break;case W.C:re=(0,gt.t1)(ct,St,bt[Ht++],bt[Ht++],bt[Ht++],bt[Ht++],bt[Ht],bt[Ht+1],Ot,Bt,Q),ct=bt[Ht++],St=bt[Ht++];break;case W.Q:re=(0,gt.Wr)(ct,St,bt[Ht++],bt[Ht++],bt[Ht],bt[Ht+1],Ot,Bt,Q),ct=bt[Ht++],St=bt[Ht++];break;case W.A:var ye=bt[Ht++],he=bt[Ht++],be=bt[Ht++],Be=bt[Ht++],Ze=bt[Ht++],qe=bt[Ht++];Ht+=1;var pr=!!(1-bt[Ht++]);Dt=Math.cos(Ze)*be+ye,wt=Math.sin(Ze)*Be+he,Ht<=1&&(at=Dt,mt=wt);var wr=(Ot-ye)*Be/be+ye;re=st(ye,he,Be,Ze,Ze+qe,pr,wr,Bt,Q),ct=Math.cos(Ze+qe)*be+ye,St=Math.sin(Ze+qe)*Be+he;break;case W.R:at=ct=bt[Ht++],mt=St=bt[Ht++];var Or=bt[Ht++],Sr=bt[Ht++];re=g(at,mt,Or,Sr,Ot,Bt,Q);break;case W.Z:re=J(ct,St,at,mt,Ot,Bt,Q,!0),ct=at,St=mt;break}re<Pt&&(Pt=re,rt.set(Q[0],Q[1]))}return Pt}var X=new F.Z,K=new F.Z,G=new F.Z,k=new F.Z,R=new F.Z;function T(it,lt){if(it){var rt=it.getTextGuideLine(),ct=it.getTextContent();if(ct&&rt){var St=it.textGuideLineConfig||{},at=[[0,0],[0,0],[0,0]],mt=St.candidates||Y,Dt=ct.getBoundingRect().clone();Dt.applyTransform(ct.getComputedTransform());var wt=1/0,Pt=St.anchor,bt=it.getComputedTransform(),Ot=bt&&(0,nt.U_)([],bt),Bt=lt.get("length2")||0;Pt&&G.copy(Pt);for(var Ht=0;Ht<mt.length;Ht++){var Qt=mt[Ht];H(Qt,0,Dt,X,k),F.Z.scaleAndAdd(K,X,k,Bt),K.transform(Ot);var re=it.getBoundingRect(),ye=Pt?Pt.distance(K):it instanceof dt.ZP?O(K,it.path,G):j(K,re,G);ye<wt&&(wt=ye,K.transform(bt),G.transform(bt),G.toArray(at[0]),K.toArray(at[1]),X.toArray(at[2]))}b(at,lt.get("minTurnAngle")),rt.setShape({points:at})}}}var P=[],M=new F.Z;function b(it,lt){if(lt<=180&&lt>0){lt=lt/180*Math.PI,X.fromArray(it[0]),K.fromArray(it[1]),G.fromArray(it[2]),F.Z.sub(k,X,K),F.Z.sub(R,G,K);var rt=k.len(),ct=R.len();if(!(rt<.001||ct<.001)){k.scale(1/rt),R.scale(1/ct);var St=k.dot(R),at=Math.cos(lt);if(at<St){var mt=J(K.x,K.y,G.x,G.y,X.x,X.y,P,!1);M.fromArray(P),M.scaleAndAdd(R,mt/Math.tan(Math.PI-lt));var Dt=G.x!==K.x?(M.x-K.x)/(G.x-K.x):(M.y-K.y)/(G.y-K.y);if(isNaN(Dt))return;Dt<0?F.Z.copy(M,K):Dt>1&&F.Z.copy(M,G),M.toArray(it[1])}}}}function w(it,lt,rt){if(rt<=180&&rt>0){rt=rt/180*Math.PI,X.fromArray(it[0]),K.fromArray(it[1]),G.fromArray(it[2]),F.Z.sub(k,K,X),F.Z.sub(R,G,K);var ct=k.len(),St=R.len();if(!(ct<.001||St<.001)){k.scale(1/ct),R.scale(1/St);var at=k.dot(lt),mt=Math.cos(rt);if(at<mt){var Dt=J(K.x,K.y,G.x,G.y,X.x,X.y,P,!1);M.fromArray(P);var wt=Math.PI/2,Pt=Math.acos(R.dot(lt)),bt=wt+Pt-rt;if(bt>=wt)F.Z.copy(M,G);else{M.scaleAndAdd(R,Dt/Math.tan(Math.PI/2-bt));var Ot=G.x!==K.x?(M.x-K.x)/(G.x-K.x):(M.y-K.y)/(G.y-K.y);if(isNaN(Ot))return;Ot<0?F.Z.copy(M,K):Ot>1&&F.Z.copy(M,G)}M.toArray(it[1])}}}}function C(it,lt,rt,ct){var St=rt==="normal",at=St?it:it.ensureState(rt);at.ignore=lt;var mt=ct.get("smooth");mt&&mt===!0&&(mt=.3),at.shape=at.shape||{},mt>0&&(at.shape.smooth=mt);var Dt=ct.getModel("lineStyle").getLineStyle();St?it.useStyle(Dt):at.style=Dt}function V(it,lt){var rt=lt.smooth,ct=lt.points;if(ct)if(it.moveTo(ct[0][0],ct[0][1]),rt>0&&ct.length>=3){var St=Z.TK(ct[0],ct[1]),at=Z.TK(ct[1],ct[2]);if(!St||!at){it.lineTo(ct[1][0],ct[1][1]),it.lineTo(ct[2][0],ct[2][1]);return}var mt=Math.min(St,at)*rt,Dt=Z.t7([],ct[1],ct[0],mt/St),wt=Z.t7([],ct[1],ct[2],mt/at),Pt=Z.t7([],Dt,wt,.5);it.bezierCurveTo(Dt[0],Dt[1],Dt[0],Dt[1],Pt[0],Pt[1]),it.bezierCurveTo(wt[0],wt[1],wt[0],wt[1],ct[2][0],ct[2][1])}else for(var bt=1;bt<ct.length;bt++)it.lineTo(ct[bt][0],ct[bt][1])}function B(it,lt,rt){var ct=it.getTextGuideLine(),St=it.getTextContent();if(!St){ct&&it.removeTextGuideLine();return}for(var at=lt.normal,mt=at.get("show"),Dt=St.ignore,wt=0;wt<tt.qc.length;wt++){var Pt=tt.qc[wt],bt=lt[Pt],Ot=Pt==="normal";if(bt){var Bt=bt.get("show"),Ht=Ot?Dt:(0,xt.pD)(St.states[Pt]&&St.states[Pt].ignore,Dt);if(Ht||!(0,xt.pD)(Bt,mt)){var Qt=Ot?ct:ct&&ct.states[Pt];Qt&&(Qt.ignore=!0);continue}ct||(ct=new q.Z,it.setTextGuideLine(ct),!Ot&&(Dt||!mt)&&C(ct,!0,"normal",lt.normal),it.stateProxy&&(ct.stateProxy=it.stateProxy)),C(ct,!1,Pt,bt)}}if(ct){(0,xt.ce)(ct.style,rt),ct.style.fill=null;var re=at.get("showAbove"),ye=it.textGuideLineConfig=it.textGuideLineConfig||{};ye.showAbove=re||!1,ct.buildPath=V}}function ut(it,lt){lt=lt||"labelLine";for(var rt={normal:it.getModel(lt)},ct=0;ct<tt.L1.length;ct++){var St=tt.L1[ct];rt[St]=it.getModel([St,lt])}return rt}},22804:function(Pe,ee,z){z.d(ee,{GI:function(){return gt},VT:function(){return q},WE:function(){return yt},yl:function(){return xt}});var F=z(23736),dt=z(16128);function q(nt){for(var Z=[],tt=0;tt<nt.length;tt++){var ot=nt[tt];if(!ot.defaultAttr.ignore){var W=ot.label,Y=W.getComputedTransform(),H=W.getBoundingRect(),st=!Y||Y[1]<1e-5&&Y[2]<1e-5,J=W.style.margin||0,g=H.clone();g.applyTransform(Y),g.x-=J/2,g.y-=J/2,g.width+=J,g.height+=J;var Q=st?new F.Z(H,Y):null;Z.push({label:W,labelLine:ot.labelLine,rect:g,localRect:H,obb:Q,priority:ot.priority,defaultAttr:ot.defaultAttr,layoutOption:ot.computedLayoutOption,axisAligned:st,transform:Y})}}return Z}function vt(nt,Z,tt,ot,W,Y){var H=nt.length;if(H<2)return;nt.sort(function(B,ut){return B.rect[Z]-ut.rect[Z]});for(var st=0,J,g=!1,Q=[],j=0,O=0;O<H;O++){var X=nt[O],K=X.rect;J=K[Z]-st,J<0&&(K[Z]-=J,X.label[Z]-=J,g=!0);var G=Math.max(-J,0);Q.push(G),j+=G,st=K[Z]+K[tt]}j>0&&Y&&w(-j/H,0,H);var k=nt[0],R=nt[H-1],T,P;M(),T<0&&C(-T,.8),P<0&&C(P,.8),M(),b(T,P,1),b(P,T,-1),M(),T<0&&V(-T),P<0&&V(P);function M(){T=k.rect[Z]-ot,P=W-R.rect[Z]-R.rect[tt]}function b(B,ut,it){if(B<0){var lt=Math.min(ut,-B);if(lt>0){w(lt*it,0,H);var rt=lt+B;rt<0&&C(-rt*it,1)}else C(-B*it,1)}}function w(B,ut,it){B!==0&&(g=!0);for(var lt=ut;lt<it;lt++){var rt=nt[lt],ct=rt.rect;ct[Z]+=B,rt.label[Z]+=B}}function C(B,ut){for(var it=[],lt=0,rt=1;rt<H;rt++){var ct=nt[rt-1].rect,St=Math.max(nt[rt].rect[Z]-ct[Z]-ct[tt],0);it.push(St),lt+=St}if(lt){var at=Math.min(Math.abs(B)/lt,ut);if(B>0)for(var rt=0;rt<H-1;rt++){var mt=it[rt]*at;w(mt,0,rt+1)}else for(var rt=H-1;rt>0;rt--){var mt=it[rt-1]*at;w(-mt,rt,H)}}}function V(B){var ut=B<0?-1:1;B=Math.abs(B);for(var it=Math.ceil(B/(H-1)),lt=0;lt<H-1;lt++)if(ut>0?w(it,0,lt+1):w(-it,H-lt-1,H),B-=it,B<=0)return}return g}function yt(nt,Z,tt,ot){return vt(nt,"x","width",Z,tt,ot)}function gt(nt,Z,tt,ot){return vt(nt,"y","height",Z,tt,ot)}function xt(nt){var Z=[];nt.sort(function(G,k){return k.priority-G.priority});var tt=new dt.Z(0,0,0,0);function ot(G){if(!G.ignore){var k=G.ensureState("emphasis");k.ignore==null&&(k.ignore=!1)}G.ignore=!0}for(var W=0;W<nt.length;W++){var Y=nt[W],H=Y.axisAligned,st=Y.localRect,J=Y.transform,g=Y.label,Q=Y.labelLine;tt.copy(Y.rect),tt.width-=.1,tt.height-=.1,tt.x+=.05,tt.y+=.05;for(var j=Y.obb,O=!1,X=0;X<Z.length;X++){var K=Z[X];if(tt.intersect(K.rect)){if(H&&K.axisAligned){O=!0;break}if(K.obb||(K.obb=new F.Z(K.localRect,K.transform)),j||(j=new F.Z(st,J)),j.intersect(K.obb)){O=!0;break}}}O?(ot(g),Q&&ot(Q)):(g.attr("ignore",Y.defaultAttr.ignore),Q&&Q.attr("ignore",Y.defaultAttr.labelGuideIgnore),Z.push(Y))}}},65261:function(Pe,ee,z){z.d(ee,{Lr:function(){return ot},k3:function(){return tt},nC:function(){return W},ni:function(){return Z},pe:function(){return X},qA:function(){return O},qT:function(){return j},tD:function(){return K}});var F=z(95169),dt=z(70324),q=z(58833),vt=z(21611),yt=z(25400),gt={};function xt(G,k){for(var R=0;R<q.L1.length;R++){var T=q.L1[R],P=k[T],M=G.ensureState(T);M.style=M.style||{},M.style.text=P}var b=G.currentStates.slice();G.clearStates(!0),G.setStyle({text:k.normal}),G.useStates(b,!0)}function nt(G,k,R){var T=G.labelFetcher,P=G.labelDataIndex,M=G.labelDimIndex,b=k.normal,w;T&&(w=T.getFormattedLabel(P,"normal",null,M,b&&b.get("formatter"),R!=null?{interpolatedValue:R}:null)),w==null&&(w=(0,dt.mf)(G.defaultText)?G.defaultText(P,G,R):G.defaultText);for(var C={normal:w},V=0;V<q.L1.length;V++){var B=q.L1[V],ut=k[B];C[B]=(0,dt.pD)(T?T.getFormattedLabel(P,B,null,M,ut&&ut.get("formatter")):null,w)}return C}function Z(G,k,R,T){R=R||gt;for(var P=G instanceof F.ZP,M=!1,b=0;b<q.qc.length;b++){var w=k[q.qc[b]];if(w&&w.getShallow("show")){M=!0;break}}var C=P?G:G.getTextContent();if(M){P||(C||(C=new F.ZP,G.setTextContent(C)),G.stateProxy&&(C.stateProxy=G.stateProxy));var V=nt(R,k),B=k.normal,ut=!!B.getShallow("show"),it=ot(B,T&&T.normal,R,!1,!P);it.text=V.normal,P||G.setTextConfig(W(B,R,!1));for(var b=0;b<q.L1.length;b++){var lt=q.L1[b],w=k[lt];if(w){var rt=C.ensureState(lt),ct=!!(0,dt.pD)(w.getShallow("show"),ut);if(ct!==ut&&(rt.ignore=!ct),rt.style=ot(w,T&&T[lt],R,!0,!P),rt.style.text=V[lt],!P){var St=G.ensureState(lt);St.textConfig=W(w,R,!0)}}}C.silent=!!B.getShallow("silent"),C.style.x!=null&&(it.x=C.style.x),C.style.y!=null&&(it.y=C.style.y),C.ignore=!ut,C.useStyle(it),C.dirty(),R.enableTextSetter&&(O(C).setLabelText=function(at){var mt=nt(R,k,at);xt(C,mt)})}else C&&(C.ignore=!0);G.dirty()}function tt(G,k){k=k||"label";for(var R={normal:G.getModel(k)},T=0;T<q.L1.length;T++){var P=q.L1[T];R[P]=G.getModel([P,k])}return R}function ot(G,k,R,T,P){var M={};return Y(M,G,R,T,P),k&&(0,dt.l7)(M,k),M}function W(G,k,R){k=k||{};var T={},P,M=G.getShallow("rotate"),b=(0,dt.pD)(G.getShallow("distance"),R?null:5),w=G.getShallow("offset");return P=G.getShallow("position")||(R?null:"inside"),P==="outside"&&(P=k.defaultOutsidePosition||"top"),P!=null&&(T.position=P),w!=null&&(T.offset=w),M!=null&&(M*=Math.PI/180,T.rotation=M),b!=null&&(T.distance=b),T.outsideFill=G.get("color")==="inherit"?k.inheritColor||null:"auto",T}function Y(G,k,R,T,P){R=R||gt;var M=k.ecModel,b=M&&M.option.textStyle,w=H(k),C;if(w){C={};for(var V in w)if(w.hasOwnProperty(V)){var B=k.getModel(["rich",V]);Q(C[V]={},B,b,R,T,P,!1,!0)}}C&&(G.rich=C);var ut=k.get("overflow");ut&&(G.overflow=ut);var it=k.get("minMargin");it!=null&&(G.margin=it),Q(G,k,b,R,T,P,!0,!1)}function H(G){for(var k;G&&G!==G.ecModel;){var R=(G.option||gt).rich;if(R){k=k||{};for(var T=(0,dt.XP)(R),P=0;P<T.length;P++){var M=T[P];k[M]=1}}G=G.parentModel}return k}var st=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],J=["align","lineHeight","width","height","tag","verticalAlign"],g=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Q(G,k,R,T,P,M,b,w){R=!P&&R||gt;var C=T&&T.inheritColor,V=k.getShallow("color"),B=k.getShallow("textBorderColor"),ut=(0,dt.pD)(k.getShallow("opacity"),R.opacity);(V==="inherit"||V==="auto")&&(C?V=C:V=null),(B==="inherit"||B==="auto")&&(C?B=C:B=null),M||(V=V||R.color,B=B||R.textBorderColor),V!=null&&(G.fill=V),B!=null&&(G.stroke=B);var it=(0,dt.pD)(k.getShallow("textBorderWidth"),R.textBorderWidth);it!=null&&(G.lineWidth=it);var lt=(0,dt.pD)(k.getShallow("textBorderType"),R.textBorderType);lt!=null&&(G.lineDash=lt);var rt=(0,dt.pD)(k.getShallow("textBorderDashOffset"),R.textBorderDashOffset);rt!=null&&(G.lineDashOffset=rt),!P&&ut==null&&!w&&(ut=T&&T.defaultOpacity),ut!=null&&(G.opacity=ut),!P&&!M&&G.fill==null&&T.inheritColor&&(G.fill=T.inheritColor);for(var ct=0;ct<st.length;ct++){var St=st[ct],at=(0,dt.pD)(k.getShallow(St),R[St]);at!=null&&(G[St]=at)}for(var ct=0;ct<J.length;ct++){var St=J[ct],at=k.getShallow(St);at!=null&&(G[St]=at)}if(G.verticalAlign==null){var mt=k.getShallow("baseline");mt!=null&&(G.verticalAlign=mt)}if(!b||!T.disableBox){for(var ct=0;ct<g.length;ct++){var St=g[ct],at=k.getShallow(St);at!=null&&(G[St]=at)}var Dt=k.getShallow("borderType");Dt!=null&&(G.borderDash=Dt),(G.backgroundColor==="auto"||G.backgroundColor==="inherit")&&C&&(G.backgroundColor=C),(G.borderColor==="auto"||G.borderColor==="inherit")&&C&&(G.borderColor=C)}}function j(G,k){var R=k&&k.getModel("textStyle");return(0,dt.fy)([G.fontStyle||R&&R.getShallow("fontStyle")||"",G.fontWeight||R&&R.getShallow("fontWeight")||"",(G.fontSize||R&&R.getShallow("fontSize")||12)+"px",G.fontFamily||R&&R.getShallow("fontFamily")||"sans-serif"].join(" "))}var O=(0,vt.Yf)();function X(G,k,R,T){if(G){var P=O(G);P.prevValue=P.value,P.value=R;var M=k.normal;P.valueAnimation=M.get("valueAnimation"),P.valueAnimation&&(P.precision=M.get("precision"),P.defaultInterpolatedText=T,P.statesModels=k)}}function K(G,k,R,T,P){var M=O(G);if(!M.valueAnimation||M.prevValue===M.value)return;var b=M.defaultInterpolatedText,w=(0,dt.pD)(M.interpolatedValue,M.prevValue),C=M.value;function V(B){var ut=(0,vt.pk)(R,M.precision,w,C,B);M.interpolatedValue=B===1?null:ut;var it=nt({labelDataIndex:k,labelFetcher:P,defaultText:b?b(ut):ut+""},M.statesModels,ut);xt(G,it)}G.percent=0,(M.prevValue==null?yt.KZ:yt.D)(G,{percent:1},T,k,null,V)}},93784:function(Pe,ee,z){z.d(ee,{Bk:function(){return J},G_:function(){return H},Ge:function(){return tt},Gk:function(){return Z},My:function(){return W},bK:function(){return st}});var F=z(70324),dt=z(97414),q=z(28391),vt=z(22004),yt=z(35131),gt="__ec_stack_";function xt(O){return O.get("stack")||gt+O.seriesIndex}function nt(O){return O.dim+O.index}function Z(O){var X=[],K=O.axis,G="axis0";if(K.type==="category"){for(var k=K.getBandWidth(),R=0;R<O.count;R++)X.push((0,F.ce)({bandWidth:k,axisKey:G,stackId:gt+R},O));for(var T=Y(X),P=[],R=0;R<O.count;R++){var M=T[G][gt+R];M.offsetCenter=M.offset+M.width/2,P.push(M)}return P}}function tt(O,X){var K=[];return X.eachSeriesByType(O,function(G){g(G)&&K.push(G)}),K}function ot(O){var X={};(0,F.S6)(O,function(M){var b=M.coordinateSystem,w=b.getBaseAxis();if(!(w.type!=="time"&&w.type!=="value"))for(var C=M.getData(),V=w.dim+"_"+w.index,B=C.getDimensionIndex(C.mapDimension(w.dim)),ut=C.getStore(),it=0,lt=ut.count();it<lt;++it){var rt=ut.get(B,it);X[V]?X[V].push(rt):X[V]=[rt]}});var K={};for(var G in X)if(X.hasOwnProperty(G)){var k=X[G];if(k){k.sort(function(M,b){return M-b});for(var R=null,T=1;T<k.length;++T){var P=k[T]-k[T-1];P>0&&(R=R===null?P:Math.min(R,P))}K[G]=R}}return K}function W(O){var X=ot(O),K=[];return(0,F.S6)(O,function(G){var k=G.coordinateSystem,R=k.getBaseAxis(),T=R.getExtent(),P;if(R.type==="category")P=R.getBandWidth();else if(R.type==="value"||R.type==="time"){var M=R.dim+"_"+R.index,b=X[M],w=Math.abs(T[1]-T[0]),C=R.scale.getExtent(),V=Math.abs(C[1]-C[0]);P=b?w/V*b:w}else{var B=G.getData();P=Math.abs(T[1]-T[0])/B.count()}var ut=(0,dt.GM)(G.get("barWidth"),P),it=(0,dt.GM)(G.get("barMaxWidth"),P),lt=(0,dt.GM)(G.get("barMinWidth")||(Q(G)?.5:1),P),rt=G.get("barGap"),ct=G.get("barCategoryGap");K.push({bandWidth:P,barWidth:ut,barMaxWidth:it,barMinWidth:lt,barGap:rt,barCategoryGap:ct,axisKey:nt(R),stackId:xt(G)})}),Y(K)}function Y(O){var X={};(0,F.S6)(O,function(G,k){var R=G.axisKey,T=G.bandWidth,P=X[R]||{bandWidth:T,remainedWidth:T,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},M=P.stacks;X[R]=P;var b=G.stackId;M[b]||P.autoWidthCount++,M[b]=M[b]||{width:0,maxWidth:0};var w=G.barWidth;w&&!M[b].width&&(M[b].width=w,w=Math.min(P.remainedWidth,w),P.remainedWidth-=w);var C=G.barMaxWidth;C&&(M[b].maxWidth=C);var V=G.barMinWidth;V&&(M[b].minWidth=V);var B=G.barGap;B!=null&&(P.gap=B);var ut=G.barCategoryGap;ut!=null&&(P.categoryGap=ut)});var K={};return(0,F.S6)(X,function(G,k){K[k]={};var R=G.stacks,T=G.bandWidth,P=G.categoryGap;if(P==null){var M=(0,F.XP)(R).length;P=Math.max(35-M*4,15)+"%"}var b=(0,dt.GM)(P,T),w=(0,dt.GM)(G.gap,1),C=G.remainedWidth,V=G.autoWidthCount,B=(C-b)/(V+(V-1)*w);B=Math.max(B,0),(0,F.S6)(R,function(rt){var ct=rt.maxWidth,St=rt.minWidth;if(rt.width){var at=rt.width;ct&&(at=Math.min(at,ct)),St&&(at=Math.max(at,St)),rt.width=at,C-=at+w*at,V--}else{var at=B;ct&&ct<at&&(at=Math.min(ct,C)),St&&St>at&&(at=St),at!==B&&(rt.width=at,C-=at+w*at,V--)}}),B=(C-b)/(V+(V-1)*w),B=Math.max(B,0);var ut=0,it;(0,F.S6)(R,function(rt,ct){rt.width||(rt.width=B),it=rt,ut+=rt.width*(1+w)}),it&&(ut-=it.width*w);var lt=-ut/2;(0,F.S6)(R,function(rt,ct){K[k][ct]=K[k][ct]||{bandWidth:T,offset:lt,width:rt.width},lt+=rt.width*(1+w)})}),K}function H(O,X,K){if(O&&X){var G=O[nt(X)];return G!=null&&K!=null?G[xt(K)]:G}}function st(O,X){var K=tt(O,X),G=W(K);(0,F.S6)(K,function(k){var R=k.getData(),T=k.coordinateSystem,P=T.getBaseAxis(),M=xt(k),b=G[nt(P)][M],w=b.offset,C=b.width;R.setLayout({bandWidth:b.bandWidth,offset:w,size:C})})}function J(O){return{seriesType:O,plan:(0,vt.Z)(),reset:function(X){if(g(X)){var K=X.getData(),G=X.coordinateSystem,k=G.getBaseAxis(),R=G.getOtherAxis(k),T=K.getDimensionIndex(K.mapDimension(R.dim)),P=K.getDimensionIndex(K.mapDimension(k.dim)),M=X.get("showBackground",!0),b=K.mapDimension(R.dim),w=K.getCalculationInfo("stackResultDimension"),C=(0,q.M)(K,b)&&!!K.getCalculationInfo("stackedOnSeries"),V=R.isHorizontal(),B=j(k,R),ut=Q(X),it=X.get("barMinHeight")||0,lt=w&&K.getDimensionIndex(w),rt=K.getLayout("size"),ct=K.getLayout("offset");return{progress:function(St,at){for(var mt=St.count,Dt=ut&&(0,yt.o)(mt*3),wt=ut&&M&&(0,yt.o)(mt*3),Pt=ut&&(0,yt.o)(mt),bt=G.master.getRect(),Ot=V?bt.width:bt.height,Bt,Ht=at.getStore(),Qt=0;(Bt=St.next())!=null;){var re=Ht.get(C?lt:T,Bt),ye=Ht.get(P,Bt),he=B,be=void 0;C&&(be=+re-Ht.get(T,Bt));var Be=void 0,Ze=void 0,qe=void 0,pr=void 0;if(V){var wr=G.dataToPoint([re,ye]);if(C){var Or=G.dataToPoint([be,ye]);he=Or[0]}Be=he,Ze=wr[1]+ct,qe=wr[0]-he,pr=rt,Math.abs(qe)<it&&(qe=(qe<0?-1:1)*it)}else{var wr=G.dataToPoint([ye,re]);if(C){var Or=G.dataToPoint([ye,be]);he=Or[1]}Be=wr[0]+ct,Ze=he,qe=rt,pr=wr[1]-he,Math.abs(pr)<it&&(pr=(pr<=0?-1:1)*it)}ut?(Dt[Qt]=Be,Dt[Qt+1]=Ze,Dt[Qt+2]=V?qe:pr,wt&&(wt[Qt]=V?bt.x:Be,wt[Qt+1]=V?Ze:bt.y,wt[Qt+2]=Ot),Pt[Bt]=Bt):at.setItemLayout(Bt,{x:Be,y:Ze,width:qe,height:pr}),Qt+=3}ut&&at.setLayout({largePoints:Dt,largeDataIndices:Pt,largeBackgroundPoints:wt,valueAxisHorizontal:V})}}}}}}function g(O){return O.coordinateSystem&&O.coordinateSystem.type==="cartesian2d"}function Q(O){return O.pipelineContext&&O.pipelineContext.large}function j(O,X){return X.toGlobalCoord(X.dataToCoord(X.type==="log"?1:0))}},67849:function(Pe,ee,z){z.d(ee,{s:function(){return yt},y:function(){return q}});var F=z(70324),dt=z(21611);function q(gt,xt){function nt(Z,tt){var ot=[];return Z.eachComponent({mainType:"series",subType:gt,query:tt},function(W){ot.push(W.seriesIndex)}),ot}(0,F.S6)([[gt+"ToggleSelect","toggleSelect"],[gt+"Select","select"],[gt+"UnSelect","unselect"]],function(Z){xt(Z[0],function(tt,ot,W){tt=(0,F.l7)({},tt),W.dispatchAction((0,F.l7)(tt,{type:Z[1],seriesIndex:nt(ot,tt)}))})})}function vt(gt,xt,nt,Z,tt){var ot=gt+xt;nt.isSilent(ot)||Z.eachComponent({mainType:"series",subType:"pie"},function(W){for(var Y=W.seriesIndex,H=W.option.selectedMap,st=tt.selected,J=0;J<st.length;J++)if(st[J].seriesIndex===Y){var g=W.getData(),Q=(0,dt.gO)(g,tt.fromActionPayload);nt.trigger(ot,{type:ot,seriesId:W.id,name:(0,F.kJ)(Q)?g.getName(Q[0]):g.getName(Q),selected:(0,F.HD)(H)?H:(0,F.l7)({},H)})}})}function yt(gt,xt,nt){gt.on("selectchanged",function(Z){var tt=nt.getModel();Z.isFromClick?(vt("map","selectchanged",xt,tt,Z),vt("pie","selectchanged",xt,tt,Z)):Z.fromAction==="select"?(vt("map","selected",xt,tt,Z),vt("pie","selected",xt,tt,Z)):Z.fromAction==="unselect"&&(vt("map","unselected",xt,tt,Z),vt("pie","unselected",xt,tt,Z))})}},47497:function(Pe,ee,z){var F=z(12012),dt=z(70324),q=z(97853),vt=z(95827),yt=z(71619),gt=z(21611),xt=z(28734),nt=(0,gt.Yf)(),Z=function(ot){(0,F.ZT)(W,ot);function W(Y,H,st){var J=ot.call(this,Y,H,st)||this;return J.uid=vt.Kr("ec_cpt_model"),J}return W.prototype.init=function(Y,H,st){this.mergeDefaultAndTheme(Y,st)},W.prototype.mergeDefaultAndTheme=function(Y,H){var st=xt.YD(this),J=st?xt.tE(Y):{},g=H.getTheme();dt.TS(Y,g.get(this.mainType)),dt.TS(Y,this.getDefaultOption()),st&&xt.dt(Y,J,st)},W.prototype.mergeOption=function(Y,H){dt.TS(this.option,Y,!0);var st=xt.YD(this);st&&xt.dt(this.option,Y,st)},W.prototype.optionUpdated=function(Y,H){},W.prototype.getDefaultOption=function(){var Y=this.constructor;if(!(0,yt.PT)(Y))return Y.defaultOption;var H=nt(this);if(!H.defaultOption){for(var st=[],J=Y;J;){var g=J.prototype.defaultOption;g&&st.push(g),J=J.superClass}for(var Q={},j=st.length-1;j>=0;j--)Q=dt.TS(Q,st[j],!0);H.defaultOption=Q}return H.defaultOption},W.prototype.getReferringComponents=function(Y,H){var st=Y+"Index",J=Y+"Id";return(0,gt.HZ)(this.ecModel,Y,{index:this.get(st,!0),id:this.get(J,!0)},H)},W.prototype.getBoxLayoutParams=function(){var Y=this;return{left:Y.get("left"),top:Y.get("top"),right:Y.get("right"),bottom:Y.get("bottom"),width:Y.get("width"),height:Y.get("height")}},W.prototype.getZLevelKey=function(){return""},W.prototype.setZLevel=function(Y){this.option.zlevel=Y},W.protoInitialize=function(){var Y=W.prototype;Y.type="component",Y.id="",Y.name="",Y.mainType="",Y.subType="",Y.componentIndex=0}(),W}(q.Z);(0,yt.pw)(Z,q.Z),(0,yt.au)(Z),vt.cj(Z),vt.jS(Z,tt);function tt(ot){var W=[];return dt.S6(Z.getClassesByMainType(ot),function(Y){W=W.concat(Y.dependencies||Y.prototype.dependencies||[])}),W=dt.UI(W,function(Y){return(0,yt.u9)(Y).main}),ot!=="dataset"&&dt.cq(W,"dataset")<=0&&W.unshift("dataset"),W}ee.Z=Z},97853:function(Pe,ee,z){z.d(ee,{Z:function(){return Q}});var F=z(54490),dt=z(71619),q=z(59036),vt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],yt=(0,q.Z)(vt),gt=function(){function j(){}return j.prototype.getAreaStyle=function(O,X){return yt(this,O,X)},j}(),xt=z(65261),nt=z(95169),Z=["textStyle","color"],tt=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],ot=new nt.ZP,W=function(){function j(){}return j.prototype.getTextColor=function(O){var X=this.ecModel;return this.getShallow("color")||(!O&&X?X.get(Z):null)},j.prototype.getFont=function(){return(0,xt.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},j.prototype.getTextRect=function(O){for(var X={text:O,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},K=0;K<tt.length;K++)X[tt[K]]=this.getShallow(tt[K]);return ot.useStyle(X),ot.update(),ot.getBoundingRect()},j}(),Y=W,H=z(16121),st=z(3382),J=z(70324),g=function(){function j(O,X,K){this.parentModel=X,this.ecModel=K,this.option=O}return j.prototype.init=function(O,X,K){for(var G=[],k=3;k<arguments.length;k++)G[k-3]=arguments[k]},j.prototype.mergeOption=function(O,X){(0,J.TS)(this.option,O,!0)},j.prototype.get=function(O,X){return O==null?this.option:this._doGet(this.parsePath(O),!X&&this.parentModel)},j.prototype.getShallow=function(O,X){var K=this.option,G=K==null?K:K[O];if(G==null&&!X){var k=this.parentModel;k&&(G=k.getShallow(O))}return G},j.prototype.getModel=function(O,X){var K=O!=null,G=K?this.parsePath(O):null,k=K?this._doGet(G):this.option;return X=X||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(G)),new j(k,X,this.ecModel)},j.prototype.isEmpty=function(){return this.option==null},j.prototype.restoreData=function(){},j.prototype.clone=function(){var O=this.constructor;return new O((0,J.d9)(this.option))},j.prototype.parsePath=function(O){return typeof O=="string"?O.split("."):O},j.prototype.resolveParentPath=function(O){return O},j.prototype.isAnimationEnabled=function(){if(!F.Z.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},j.prototype._doGet=function(O,X){var K=this.option;if(!O)return K;for(var G=0;G<O.length&&!(O[G]&&(K=K&&typeof K=="object"?K[O[G]]:null,K==null));G++);return K==null&&X&&(K=X._doGet(this.resolveParentPath(O),X.parentModel)),K},j}();(0,dt.dm)(g),(0,dt.Qj)(g),(0,J.jB)(g,H.K),(0,J.jB)(g,st.D),(0,J.jB)(g,gt),(0,J.jB)(g,Y);var Q=g},88242:function(Pe,ee,z){z.d(ee,{V:function(){return st}});var F=z(12012),dt=z(70324),q=z(54490),vt=z(21611),yt=z(47497),gt=z(35247),xt=z(53743),nt=z(28734),Z=z(85966),tt=z(71619),ot=z(75818),W=z(88990),Y=vt.Yf();function H(R,T){return R.getName(T)||R.getId(T)}var st="__universalTransitionEnabled",J=function(R){(0,F.ZT)(T,R);function T(){var P=R!==null&&R.apply(this,arguments)||this;return P._selectedDataIndicesMap={},P}return T.prototype.init=function(P,M,b){this.seriesIndex=this.componentIndex,this.dataTask=(0,Z.v)({count:j,reset:O}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(P,b);var w=Y(this).sourceManager=new ot.U(this);w.prepareSource();var C=this.getInitialData(P,b);K(C,this),this.dataTask.context.data=C,Y(this).dataBeforeProcessed=C,g(this),this._initSelectedMapFromData(C)},T.prototype.mergeDefaultAndTheme=function(P,M){var b=(0,nt.YD)(this),w=b?(0,nt.tE)(P):{},C=this.subType;yt.Z.hasClass(C)&&(C+="Series"),dt.TS(P,M.getTheme().get(this.subType)),dt.TS(P,this.getDefaultOption()),vt.Cc(P,"label",["show"]),this.fillDataTextStyle(P.data),b&&(0,nt.dt)(P,w,b)},T.prototype.mergeOption=function(P,M){P=dt.TS(this.option,P,!0),this.fillDataTextStyle(P.data);var b=(0,nt.YD)(this);b&&(0,nt.dt)(this.option,P,b);var w=Y(this).sourceManager;w.dirty(),w.prepareSource();var C=this.getInitialData(P,M);K(C,this),this.dataTask.dirty(),this.dataTask.context.data=C,Y(this).dataBeforeProcessed=C,g(this),this._initSelectedMapFromData(C)},T.prototype.fillDataTextStyle=function(P){if(P&&!dt.fU(P))for(var M=["show"],b=0;b<P.length;b++)P[b]&&P[b].label&&vt.Cc(P[b],"label",M)},T.prototype.getInitialData=function(P,M){},T.prototype.appendData=function(P){var M=this.getRawData();M.appendData(P.data)},T.prototype.getData=function(P){var M=k(this);if(M){var b=M.context.data;return P==null?b:b.getLinkedData(P)}else return Y(this).data},T.prototype.getAllData=function(){var P=this.getData();return P&&P.getLinkedDataAll?P.getLinkedDataAll():[{data:P}]},T.prototype.setData=function(P){var M=k(this);if(M){var b=M.context;b.outputData=P,M!==this.dataTask&&(b.data=P)}Y(this).data=P},T.prototype.getEncode=function(){var P=this.get("encode",!0);if(P)return dt.kW(P)},T.prototype.getSourceManager=function(){return Y(this).sourceManager},T.prototype.getSource=function(){return this.getSourceManager().getSource()},T.prototype.getRawData=function(){return Y(this).dataBeforeProcessed},T.prototype.getColorBy=function(){var P=this.get("colorBy");return P||"series"},T.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},T.prototype.getBaseAxis=function(){var P=this.coordinateSystem;return P&&P.getBaseAxis&&P.getBaseAxis()},T.prototype.formatTooltip=function(P,M,b){return(0,W.w)({series:this,dataIndex:P,multipleSeries:M})},T.prototype.isAnimationEnabled=function(){var P=this.ecModel;if(q.Z.node&&!(P&&P.ssr))return!1;var M=this.getShallow("animation");return M&&this.getData().count()>this.getShallow("animationThreshold")&&(M=!1),!!M},T.prototype.restoreData=function(){this.dataTask.dirty()},T.prototype.getColorFromPalette=function(P,M,b){var w=this.ecModel,C=gt._.prototype.getColorFromPalette.call(this,P,M,b);return C||(C=w.getColorFromPalette(P,M,b)),C},T.prototype.coordDimToDataDim=function(P){return this.getRawData().mapDimensionsAll(P)},T.prototype.getProgressive=function(){return this.get("progressive")},T.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},T.prototype.select=function(P,M){this._innerSelect(this.getData(M),P)},T.prototype.unselect=function(P,M){var b=this.option.selectedMap;if(b){var w=this.option.selectedMode,C=this.getData(M);if(w==="series"||b==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var V=0;V<P.length;V++){var B=P[V],ut=H(C,B);b[ut]=!1,this._selectedDataIndicesMap[ut]=-1}}},T.prototype.toggleSelect=function(P,M){for(var b=[],w=0;w<P.length;w++)b[0]=P[w],this.isSelected(P[w],M)?this.unselect(b,M):this.select(b,M)},T.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var P=this._selectedDataIndicesMap,M=dt.XP(P),b=[],w=0;w<M.length;w++){var C=P[M[w]];C>=0&&b.push(C)}return b},T.prototype.isSelected=function(P,M){var b=this.option.selectedMap;if(!b)return!1;var w=this.getData(M);return(b==="all"||b[H(w,P)])&&!w.getItemModel(P).get(["select","disabled"])},T.prototype.isUniversalTransitionEnabled=function(){if(this[st])return!0;var P=this.option.universalTransition;return P?P===!0?!0:P&&P.enabled:!1},T.prototype._innerSelect=function(P,M){var b,w,C=this.option,V=C.selectedMode,B=M.length;if(!(!V||!B)){if(V==="series")C.selectedMap="all";else if(V==="multiple"){dt.Kn(C.selectedMap)||(C.selectedMap={});for(var ut=C.selectedMap,it=0;it<B;it++){var lt=M[it],rt=H(P,lt);ut[rt]=!0,this._selectedDataIndicesMap[rt]=P.getRawIndex(lt)}}else if(V==="single"||V===!0){var ct=M[B-1],rt=H(P,ct);C.selectedMap=(b={},b[rt]=!0,b),this._selectedDataIndicesMap=(w={},w[rt]=P.getRawIndex(ct),w)}}},T.prototype._initSelectedMapFromData=function(P){if(!this.option.selectedMap){var M=[];P.hasItemOption&&P.each(function(b){var w=P.getRawDataItem(b);w&&w.selected&&M.push(b)}),M.length>0&&this._innerSelect(P,M)}},T.registerClass=function(P){return yt.Z.registerClass(P)},T.protoInitialize=function(){var P=T.prototype;P.type="series.__base__",P.seriesIndex=0,P.ignoreStyleOnData=!1,P.hasSymbolVisual=!1,P.defaultSymbol="circle",P.visualStyleAccessPath="itemStyle",P.visualDrawType="fill"}(),T}(yt.Z);dt.jB(J,xt.X),dt.jB(J,gt._),(0,tt.pw)(J,yt.Z);function g(R){var T=R.name;vt.yu(R)||(R.name=Q(R)||T)}function Q(R){var T=R.getRawData(),P=T.mapDimensionsAll("seriesName"),M=[];return dt.S6(P,function(b){var w=T.getDimensionInfo(b);w.displayName&&M.push(w.displayName)}),M.join(" ")}function j(R){return R.model.getRawData().count()}function O(R){var T=R.model;return T.setData(T.getRawData().cloneShallow()),X}function X(R,T){T.outputData&&R.end>T.outputData.count()&&T.model.getRawData().cloneShallow(T.outputData)}function K(R,T){dt.S6(dt.WW(R.CHANGABLE_METHODS,R.DOWNSAMPLE_METHODS),function(P){R.wrapMethod(P,dt.WA(G,T))})}function G(R,T){var P=k(R);return P&&P.setOutputEnd((T||this).count()),T}function k(R){var T=(R.ecModel||{}).scheduler,P=T&&T.getPipeline(R.uid);if(P){var M=P.currentTask;if(M){var b=M.agentStubMap;b&&(M=b.get(R.uid))}return M}}ee.Z=J},89166:function(Pe,ee,z){z.d(ee,{R:function(){return vt},f:function(){return q}});var F=z(70324),dt=(0,F.kW)();function q(yt,gt){(0,F.hu)(dt.get(yt)==null&&gt),dt.set(yt,gt)}function vt(yt,gt,xt){var nt=dt.get(gt);if(!nt)return xt;var Z=nt(yt);if(!Z)return xt;if(!1)var tt;return xt.concat(Z)}},53743:function(Pe,ee,z){z.d(ee,{X:function(){return yt},f:function(){return gt}});var F=z(70324),dt=z(92502),q=z(20283),vt=/\{@(.+?)\}/g,yt=function(){function xt(){}return xt.prototype.getDataParams=function(nt,Z){var tt=this.getData(Z),ot=this.getRawValue(nt,Z),W=tt.getRawIndex(nt),Y=tt.getName(nt),H=tt.getRawDataItem(nt),st=tt.getItemVisual(nt,"style"),J=st&&st[tt.getItemVisual(nt,"drawType")||"fill"],g=st&&st.stroke,Q=this.mainType,j=Q==="series",O=tt.userOutput&&tt.userOutput.get();return{componentType:Q,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:j?this.subType:null,seriesIndex:this.seriesIndex,seriesId:j?this.id:null,seriesName:j?this.name:null,name:Y,dataIndex:W,data:H,dataType:Z,value:ot,color:J,borderColor:g,dimensionNames:O?O.fullDimensions:null,encode:O?O.encode:null,$vars:["seriesName","name","value"]}},xt.prototype.getFormattedLabel=function(nt,Z,tt,ot,W,Y){Z=Z||"normal";var H=this.getData(tt),st=this.getDataParams(nt,tt);if(Y&&(st.value=Y.interpolatedValue),ot!=null&&F.kJ(st.value)&&(st.value=st.value[ot]),!W){var J=H.getItemModel(nt);W=J.get(Z==="normal"?["label","formatter"]:[Z,"label","formatter"])}if(F.mf(W))return st.status=Z,st.dimensionIndex=ot,W(st);if(F.HD(W)){var g=(0,q.kF)(W,st);return g.replace(vt,function(Q,j){var O=j.length,X=j;X.charAt(0)==="["&&X.charAt(O-1)==="]"&&(X=+X.slice(1,O-1));var K=(0,dt.hk)(H,nt,X);if(Y&&F.kJ(Y.interpolatedValue)){var G=H.getDimensionIndex(X);G>=0&&(K=Y.interpolatedValue[G])}return K!=null?K+"":""})}},xt.prototype.getRawValue=function(nt,Z){return(0,dt.hk)(this.getData(Z),nt)},xt.prototype.formatTooltip=function(nt,Z,tt){},xt}();function gt(xt){var nt,Z;return F.Kn(xt)?xt.type&&(Z=xt):nt=xt,{text:nt,frag:Z}}},3382:function(Pe,ee,z){z.d(ee,{D:function(){return vt},t:function(){return dt}});var F=z(59036),dt=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],q=(0,F.Z)(dt),vt=function(){function yt(){}return yt.prototype.getItemStyle=function(gt,xt){return q(this,gt,xt)},yt}()},16121:function(Pe,ee,z){z.d(ee,{K:function(){return vt},v:function(){return dt}});var F=z(59036),dt=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],q=(0,F.Z)(dt),vt=function(){function yt(){}return yt.prototype.getLineStyle=function(gt){return q(this,gt)},yt}()},59036:function(Pe,ee,z){z.d(ee,{Z:function(){return dt}});var F=z(70324);function dt(q,vt){for(var yt=0;yt<q.length;yt++)q[yt][1]||(q[yt][1]=q[yt][0]);return vt=vt||!1,function(gt,xt,nt){for(var Z={},tt=0;tt<q.length;tt++){var ot=q[tt][1];if(!(xt&&F.cq(xt,ot)>=0||nt&&F.cq(nt,ot)<0)){var W=gt.getShallow(ot,vt);W!=null&&(Z[q[tt][0]]=W)}}return Z}}},35247:function(Pe,ee,z){z.d(ee,{_:function(){return vt},i:function(){return yt}});var F=z(21611),dt=(0,F.Yf)(),q=(0,F.Yf)(),vt=function(){function Z(){}return Z.prototype.getColorFromPalette=function(tt,ot,W){var Y=(0,F.kF)(this.get("color",!0)),H=this.get("colorLayer",!0);return xt(this,dt,Y,H,tt,ot,W)},Z.prototype.clearColorPalette=function(){nt(this,dt)},Z}();function yt(Z,tt,ot,W){var Y=(0,F.kF)(Z.get(["aria","decal","decals"]));return xt(Z,q,Y,null,tt,ot,W)}function gt(Z,tt){for(var ot=Z.length,W=0;W<ot;W++)if(Z[W].length>tt)return Z[W];return Z[ot-1]}function xt(Z,tt,ot,W,Y,H,st){H=H||Z;var J=tt(H),g=J.paletteIdx||0,Q=J.paletteNameMap=J.paletteNameMap||{};if(Q.hasOwnProperty(Y))return Q[Y];var j=st==null||!W?ot:gt(W,st);if(j=j||ot,!(!j||!j.length)){var O=j[g];return Y&&(Q[Y]=O),J.paletteIdx=(g+1)%j.length,O}}function nt(Z,tt){tt(Z).paletteIdx=0,tt(Z).paletteNameMap={}}},72643:function(Pe,ee,z){z.d(ee,{N:function(){return G}});var F=z(62623),dt=z(70324),q=z(12012),vt=z(10563),yt=z(89625),gt=z(87368),xt=z(16128),nt=z(53197),Z=z(47297);function tt(k,R,T){var P=Z.qW.createCanvas(),M=R.getWidth(),b=R.getHeight(),w=P.style;return w&&(w.position="absolute",w.left="0",w.top="0",w.width=M+"px",w.height=b+"px",P.setAttribute("data-zr-dom-id",k)),P.width=M*T,P.height=b*T,P}var ot=function(k){(0,q.ZT)(R,k);function R(T,P,M){var b=k.call(this)||this;b.motionBlur=!1,b.lastFrameAlpha=.7,b.dpr=1,b.virtual=!1,b.config={},b.incremental=!1,b.zlevel=0,b.maxRepaintRectCount=5,b.__dirty=!0,b.__firstTimePaint=!0,b.__used=!1,b.__drawIndex=0,b.__startIndex=0,b.__endIndex=0,b.__prevStartIndex=null,b.__prevEndIndex=null;var w;M=M||F.KL,typeof T=="string"?w=tt(T,P,M):dt.Kn(T)&&(w=T,T=w.id),b.id=T,b.dom=w;var C=w.style;return C&&(dt.$j(w),w.onselectstart=function(){return!1},C.padding="0",C.margin="0",C.borderWidth="0"),b.painter=P,b.dpr=M,b}return R.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},R.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},R.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},R.prototype.setUnpainted=function(){this.__firstTimePaint=!0},R.prototype.createBackBuffer=function(){var T=this.dpr;this.domBack=tt("back-"+this.id,this.painter,T),this.ctxBack=this.domBack.getContext("2d"),T!==1&&this.ctxBack.scale(T,T)},R.prototype.createRepaintRects=function(T,P,M,b){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var w=[],C=this.maxRepaintRectCount,V=!1,B=new xt.Z(0,0,0,0);function ut(Dt){if(!(!Dt.isFinite()||Dt.isZero()))if(w.length===0){var wt=new xt.Z(0,0,0,0);wt.copy(Dt),w.push(wt)}else{for(var Pt=!1,bt=1/0,Ot=0,Bt=0;Bt<w.length;++Bt){var Ht=w[Bt];if(Ht.intersect(Dt)){var Qt=new xt.Z(0,0,0,0);Qt.copy(Ht),Qt.union(Dt),w[Bt]=Qt,Pt=!0;break}else if(V){B.copy(Dt),B.union(Ht);var re=Dt.width*Dt.height,ye=Ht.width*Ht.height,he=B.width*B.height,be=he-re-ye;be<bt&&(bt=be,Ot=Bt)}}if(V&&(w[Ot].union(Dt),Pt=!0),!Pt){var wt=new xt.Z(0,0,0,0);wt.copy(Dt),w.push(wt)}V||(V=w.length>=C)}}for(var it=this.__startIndex;it<this.__endIndex;++it){var lt=T[it];if(lt){var rt=lt.shouldBePainted(M,b,!0,!0),ct=lt.__isRendered&&(lt.__dirty&nt.YV||!rt)?lt.getPrevPaintRect():null;ct&&ut(ct);var St=rt&&(lt.__dirty&nt.YV||!lt.__isRendered)?lt.getPaintRect():null;St&&ut(St)}}for(var it=this.__prevStartIndex;it<this.__prevEndIndex;++it){var lt=P[it],rt=lt.shouldBePainted(M,b,!0,!0);if(lt&&(!rt||!lt.__zr)&&lt.__isRendered){var ct=lt.getPrevPaintRect();ct&&ut(ct)}}var at;do{at=!1;for(var it=0;it<w.length;){if(w[it].isZero()){w.splice(it,1);continue}for(var mt=it+1;mt<w.length;)w[it].intersect(w[mt])?(at=!0,w[it].union(w[mt]),w.splice(mt,1)):mt++;it++}}while(at);return this._paintRects=w,w},R.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},R.prototype.resize=function(T,P){var M=this.dpr,b=this.dom,w=b.style,C=this.domBack;w&&(w.width=T+"px",w.height=P+"px"),b.width=T*M,b.height=P*M,C&&(C.width=T*M,C.height=P*M,M!==1&&this.ctxBack.scale(M,M))},R.prototype.clear=function(T,P,M){var b=this.dom,w=this.ctx,C=b.width,V=b.height;P=P||this.clearColor;var B=this.motionBlur&&!T,ut=this.lastFrameAlpha,it=this.dpr,lt=this;B&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(b,0,0,C/it,V/it));var rt=this.domBack;function ct(St,at,mt,Dt){if(w.clearRect(St,at,mt,Dt),P&&P!=="transparent"){var wt=void 0;if(dt.Qq(P)){var Pt=P.global||P.__width===mt&&P.__height===Dt;wt=Pt&&P.__canvasGradient||(0,yt.ZF)(w,P,{x:0,y:0,width:mt,height:Dt}),P.__canvasGradient=wt,P.__width=mt,P.__height=Dt}else dt.dL(P)&&(P.scaleX=P.scaleX||it,P.scaleY=P.scaleY||it,wt=(0,gt.RZ)(w,P,{dirty:function(){lt.setUnpainted(),lt.__painter.refresh()}}));w.save(),w.fillStyle=wt||P,w.fillRect(St,at,mt,Dt),w.restore()}B&&(w.save(),w.globalAlpha=ut,w.drawImage(rt,St,at,mt,Dt),w.restore())}!M||B?ct(0,0,C,V):M.length&&dt.S6(M,function(St){ct(St.x*it,St.y*it,St.width*it,St.height*it)})},R}(vt.Z),W=ot,Y=z(75820),H=z(54490),st=1e5,J=314159,g=.01,Q=.001;function j(k){return k?k.__builtin__?!0:!(typeof k.resize!="function"||typeof k.refresh!="function"):!1}function O(k,R){var T=document.createElement("div");return T.style.cssText=["position:relative","width:"+k+"px","height:"+R+"px","padding:0","margin:0","border-width:0"].join(";")+";",T}var X=function(){function k(R,T,P,M){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var b=!R.nodeName||R.nodeName.toUpperCase()==="CANVAS";this._opts=P=dt.l7({},P||{}),this.dpr=P.devicePixelRatio||F.KL,this._singleCanvas=b,this.root=R;var w=R.style;w&&(dt.$j(R),R.innerHTML=""),this.storage=T;var C=this._zlevelList;this._prevDisplayList=[];var V=this._layers;if(b){var ut=R,it=ut.width,lt=ut.height;P.width!=null&&(it=P.width),P.height!=null&&(lt=P.height),this.dpr=P.devicePixelRatio||1,ut.width=it*this.dpr,ut.height=lt*this.dpr,this._width=it,this._height=lt;var rt=new W(ut,this,this.dpr);rt.__builtin__=!0,rt.initContext(),V[J]=rt,rt.zlevel=J,C.push(J),this._domRoot=R}else{this._width=(0,yt.ap)(R,0,P),this._height=(0,yt.ap)(R,1,P);var B=this._domRoot=O(this._width,this._height);R.appendChild(B)}}return k.prototype.getType=function(){return"canvas"},k.prototype.isSingleCanvas=function(){return this._singleCanvas},k.prototype.getViewportRoot=function(){return this._domRoot},k.prototype.getViewportRootOffset=function(){var R=this.getViewportRoot();if(R)return{offsetLeft:R.offsetLeft||0,offsetTop:R.offsetTop||0}},k.prototype.refresh=function(R){var T=this.storage.getDisplayList(!0),P=this._prevDisplayList,M=this._zlevelList;this._redrawId=Math.random(),this._paintList(T,P,R,this._redrawId);for(var b=0;b<M.length;b++){var w=M[b],C=this._layers[w];if(!C.__builtin__&&C.refresh){var V=b===0?this._backgroundColor:null;C.refresh(V)}}return this._opts.useDirtyRect&&(this._prevDisplayList=T.slice()),this},k.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},k.prototype._paintHoverList=function(R){var T=R.length,P=this._hoverlayer;if(P&&P.clear(),!!T){for(var M={inHover:!0,viewWidth:this._width,viewHeight:this._height},b,w=0;w<T;w++){var C=R[w];C.__inHover&&(P||(P=this._hoverlayer=this.getLayer(st)),b||(b=P.ctx,b.save()),(0,gt.Dm)(b,C,M,w===T-1))}b&&b.restore()}},k.prototype.getHoverLayer=function(){return this.getLayer(st)},k.prototype.paintOne=function(R,T){(0,gt.RV)(R,T)},k.prototype._paintList=function(R,T,P,M){if(this._redrawId===M){P=P||!1,this._updateLayerStatus(R);var b=this._doPaintList(R,T,P),w=b.finished,C=b.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),C&&this._paintHoverList(R),w)this.eachLayer(function(B){B.afterBrush&&B.afterBrush()});else{var V=this;(0,Y.Z)(function(){V._paintList(R,T,P,M)})}}},k.prototype._compositeManually=function(){var R=this.getLayer(J).ctx,T=this._domRoot.width,P=this._domRoot.height;R.clearRect(0,0,T,P),this.eachBuiltinLayer(function(M){M.virtual&&R.drawImage(M.dom,0,0,T,P)})},k.prototype._doPaintList=function(R,T,P){for(var M=this,b=[],w=this._opts.useDirtyRect,C=0;C<this._zlevelList.length;C++){var V=this._zlevelList[C],B=this._layers[V];B.__builtin__&&B!==this._hoverlayer&&(B.__dirty||P)&&b.push(B)}for(var ut=!0,it=!1,lt=function(St){var at=b[St],mt=at.ctx,Dt=w&&at.createRepaintRects(R,T,rt._width,rt._height),wt=P?at.__startIndex:at.__drawIndex,Pt=!P&&at.incremental&&Date.now,bt=Pt&&Date.now(),Ot=at.zlevel===rt._zlevelList[0]?rt._backgroundColor:null;if(at.__startIndex===at.__endIndex)at.clear(!1,Ot,Dt);else if(wt===at.__startIndex){var Bt=R[wt];(!Bt.incremental||!Bt.notClear||P)&&at.clear(!1,Ot,Dt)}wt===-1&&(console.error("For some unknown reason. drawIndex is -1"),wt=at.__startIndex);var Ht,Qt=function(be){var Be={inHover:!1,allClipped:!1,prevEl:null,viewWidth:M._width,viewHeight:M._height};for(Ht=wt;Ht<at.__endIndex;Ht++){var Ze=R[Ht];if(Ze.__inHover&&(it=!0),M._doPaintEl(Ze,at,w,be,Be,Ht===at.__endIndex-1),Pt){var qe=Date.now()-bt;if(qe>15)break}}Be.prevElClipPaths&&mt.restore()};if(Dt)if(Dt.length===0)Ht=at.__endIndex;else for(var re=rt.dpr,ye=0;ye<Dt.length;++ye){var he=Dt[ye];mt.save(),mt.beginPath(),mt.rect(he.x*re,he.y*re,he.width*re,he.height*re),mt.clip(),Qt(he),mt.restore()}else mt.save(),Qt(),mt.restore();at.__drawIndex=Ht,at.__drawIndex<at.__endIndex&&(ut=!1)},rt=this,ct=0;ct<b.length;ct++)lt(ct);return H.Z.wxa&&dt.S6(this._layers,function(St){St&&St.ctx&&St.ctx.draw&&St.ctx.draw()}),{finished:ut,needsRefreshHover:it}},k.prototype._doPaintEl=function(R,T,P,M,b,w){var C=T.ctx;if(P){var V=R.getPaintRect();(!M||V&&V.intersect(M))&&((0,gt.Dm)(C,R,b,w),R.setPrevPaintRect(V))}else(0,gt.Dm)(C,R,b,w)},k.prototype.getLayer=function(R,T){this._singleCanvas&&!this._needsManuallyCompositing&&(R=J);var P=this._layers[R];return P||(P=new W("zr_"+R,this,this.dpr),P.zlevel=R,P.__builtin__=!0,this._layerConfig[R]?dt.TS(P,this._layerConfig[R],!0):this._layerConfig[R-g]&&dt.TS(P,this._layerConfig[R-g],!0),T&&(P.virtual=T),this.insertLayer(R,P),P.initContext()),P},k.prototype.insertLayer=function(R,T){var P=this._layers,M=this._zlevelList,b=M.length,w=this._domRoot,C=null,V=-1;if(!P[R]&&j(T)){if(b>0&&R>M[0]){for(V=0;V<b-1&&!(M[V]<R&&M[V+1]>R);V++);C=P[M[V]]}if(M.splice(V+1,0,R),P[R]=T,!T.virtual)if(C){var B=C.dom;B.nextSibling?w.insertBefore(T.dom,B.nextSibling):w.appendChild(T.dom)}else w.firstChild?w.insertBefore(T.dom,w.firstChild):w.appendChild(T.dom);T.__painter=this}},k.prototype.eachLayer=function(R,T){for(var P=this._zlevelList,M=0;M<P.length;M++){var b=P[M];R.call(T,this._layers[b],b)}},k.prototype.eachBuiltinLayer=function(R,T){for(var P=this._zlevelList,M=0;M<P.length;M++){var b=P[M],w=this._layers[b];w.__builtin__&&R.call(T,w,b)}},k.prototype.eachOtherLayer=function(R,T){for(var P=this._zlevelList,M=0;M<P.length;M++){var b=P[M],w=this._layers[b];w.__builtin__||R.call(T,w,b)}},k.prototype.getLayers=function(){return this._layers},k.prototype._updateLayerStatus=function(R){this.eachBuiltinLayer(function(it,lt){it.__dirty=it.__used=!1});function T(it){b&&(b.__endIndex!==it&&(b.__dirty=!0),b.__endIndex=it)}if(this._singleCanvas)for(var P=1;P<R.length;P++){var M=R[P];if(M.zlevel!==R[P-1].zlevel||M.incremental){this._needsManuallyCompositing=!0;break}}var b=null,w=0,C,V;for(V=0;V<R.length;V++){var M=R[V],B=M.zlevel,ut=void 0;C!==B&&(C=B,w=0),M.incremental?(ut=this.getLayer(B+Q,this._needsManuallyCompositing),ut.incremental=!0,w=1):ut=this.getLayer(B+(w>0?g:0),this._needsManuallyCompositing),ut.__builtin__||dt.H("ZLevel "+B+" has been used by unkown layer "+ut.id),ut!==b&&(ut.__used=!0,ut.__startIndex!==V&&(ut.__dirty=!0),ut.__startIndex=V,ut.incremental?ut.__drawIndex=-1:ut.__drawIndex=V,T(V),b=ut),M.__dirty&nt.YV&&!M.__inHover&&(ut.__dirty=!0,ut.incremental&&ut.__drawIndex<0&&(ut.__drawIndex=V))}T(V),this.eachBuiltinLayer(function(it,lt){!it.__used&&it.getElementCount()>0&&(it.__dirty=!0,it.__startIndex=it.__endIndex=it.__drawIndex=0),it.__dirty&&it.__drawIndex<0&&(it.__drawIndex=it.__startIndex)})},k.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},k.prototype._clearLayer=function(R){R.clear()},k.prototype.setBackgroundColor=function(R){this._backgroundColor=R,dt.S6(this._layers,function(T){T.setUnpainted()})},k.prototype.configLayer=function(R,T){if(T){var P=this._layerConfig;P[R]?dt.TS(P[R],T,!0):P[R]=T;for(var M=0;M<this._zlevelList.length;M++){var b=this._zlevelList[M];if(b===R||b===R+g){var w=this._layers[b];dt.TS(w,P[R],!0)}}}},k.prototype.delLayer=function(R){var T=this._layers,P=this._zlevelList,M=T[R];M&&(M.dom.parentNode.removeChild(M.dom),delete T[R],P.splice(dt.cq(P,R),1))},k.prototype.resize=function(R,T){if(this._domRoot.style){var P=this._domRoot;P.style.display="none";var M=this._opts,b=this.root;if(R!=null&&(M.width=R),T!=null&&(M.height=T),R=(0,yt.ap)(b,0,M),T=(0,yt.ap)(b,1,M),P.style.display="",this._width!==R||T!==this._height){P.style.width=R+"px",P.style.height=T+"px";for(var w in this._layers)this._layers.hasOwnProperty(w)&&this._layers[w].resize(R,T);this.refresh(!0)}this._width=R,this._height=T}else{if(R==null||T==null)return;this._width=R,this._height=T,this.getLayer(J).resize(R,T)}return this},k.prototype.clearLayer=function(R){var T=this._layers[R];T&&T.clear()},k.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},k.prototype.getRenderedCanvas=function(R){if(R=R||{},this._singleCanvas&&!this._compositeManually)return this._layers[J].dom;var T=new W("image",this,R.pixelRatio||this.dpr);T.initContext(),T.clear(!1,R.backgroundColor||this._backgroundColor);var P=T.ctx;if(R.pixelRatio<=this.dpr){this.refresh();var M=T.dom.width,b=T.dom.height;this.eachLayer(function(it){it.__builtin__?P.drawImage(it.dom,0,0,M,b):it.renderToCanvas&&(P.save(),it.renderToCanvas(P),P.restore())})}else for(var w={inHover:!1,viewWidth:this._width,viewHeight:this._height},C=this.storage.getDisplayList(!0),V=0,B=C.length;V<B;V++){var ut=C[V];(0,gt.Dm)(P,ut,w,V===B-1)}return T.dom},k.prototype.getWidth=function(){return this._width},k.prototype.getHeight=function(){return this._height},k}(),K=X;function G(k){k.registerPainter("canvas",K)}},8835:function(Pe,ee,z){var F=z(12012),dt=z(97414),q=z(20283),vt=z(12763),yt=z(46726),gt=dt.NM,xt=function(nt){(0,F.ZT)(Z,nt);function Z(){var tt=nt!==null&&nt.apply(this,arguments)||this;return tt.type="interval",tt._interval=0,tt._intervalPrecision=2,tt}return Z.prototype.parse=function(tt){return tt},Z.prototype.contain=function(tt){return yt.XS(tt,this._extent)},Z.prototype.normalize=function(tt){return yt.Fv(tt,this._extent)},Z.prototype.scale=function(tt){return yt.bA(tt,this._extent)},Z.prototype.setExtent=function(tt,ot){var W=this._extent;isNaN(tt)||(W[0]=parseFloat(tt)),isNaN(ot)||(W[1]=parseFloat(ot))},Z.prototype.unionExtent=function(tt){var ot=this._extent;tt[0]<ot[0]&&(ot[0]=tt[0]),tt[1]>ot[1]&&(ot[1]=tt[1]),this.setExtent(ot[0],ot[1])},Z.prototype.getInterval=function(){return this._interval},Z.prototype.setInterval=function(tt){this._interval=tt,this._niceExtent=this._extent.slice(),this._intervalPrecision=yt.lb(tt)},Z.prototype.getTicks=function(tt){var ot=this._interval,W=this._extent,Y=this._niceExtent,H=this._intervalPrecision,st=[];if(!ot)return st;var J=1e4;W[0]<Y[0]&&(tt?st.push({value:gt(Y[0]-ot,H)}):st.push({value:W[0]}));for(var g=Y[0];g<=Y[1]&&(st.push({value:g}),g=gt(g+ot,H),g!==st[st.length-1].value);)if(st.length>J)return[];var Q=st.length?st[st.length-1].value:Y[1];return W[1]>Q&&(tt?st.push({value:gt(Q+ot,H)}):st.push({value:W[1]})),st},Z.prototype.getMinorTicks=function(tt){for(var ot=this.getTicks(!0),W=[],Y=this.getExtent(),H=1;H<ot.length;H++){for(var st=ot[H],J=ot[H-1],g=0,Q=[],j=st.value-J.value,O=j/tt;g<tt-1;){var X=gt(J.value+(g+1)*O);X>Y[0]&&X<Y[1]&&Q.push(X),g++}W.push(Q)}return W},Z.prototype.getLabel=function(tt,ot){if(tt==null)return"";var W=ot&&ot.precision;W==null?W=dt.p8(tt.value)||0:W==="auto"&&(W=this._intervalPrecision);var Y=gt(tt.value,W,!0);return q.OD(Y)},Z.prototype.calcNiceTicks=function(tt,ot,W){tt=tt||5;var Y=this._extent,H=Y[1]-Y[0];if(isFinite(H)){H<0&&(H=-H,Y.reverse());var st=yt.Qf(Y,tt,ot,W);this._intervalPrecision=st.intervalPrecision,this._interval=st.interval,this._niceExtent=st.niceTickExtent}},Z.prototype.calcNiceExtent=function(tt){var ot=this._extent;if(ot[0]===ot[1])if(ot[0]!==0){var W=Math.abs(ot[0]);tt.fixMax||(ot[1]+=W/2),ot[0]-=W/2}else ot[1]=1;var Y=ot[1]-ot[0];isFinite(Y)||(ot[0]=0,ot[1]=1),this.calcNiceTicks(tt.splitNumber,tt.minInterval,tt.maxInterval);var H=this._interval;tt.fixMin||(ot[0]=gt(Math.floor(ot[0]/H)*H)),tt.fixMax||(ot[1]=gt(Math.ceil(ot[1]/H)*H))},Z.prototype.setNiceExtent=function(tt,ot){this._niceExtent=[tt,ot]},Z.type="interval",Z}(vt.Z);vt.Z.registerClass(xt),ee.Z=xt},64907:function(Pe,ee,z){var F=z(12012),dt=z(12763),q=z(35867),vt=z(46726),yt=z(70324),gt=function(xt){(0,F.ZT)(nt,xt);function nt(Z){var tt=xt.call(this,Z)||this;tt.type="ordinal";var ot=tt.getSetting("ordinalMeta");return ot||(ot=new q.Z({})),(0,yt.kJ)(ot)&&(ot=new q.Z({categories:(0,yt.UI)(ot,function(W){return(0,yt.Kn)(W)?W.value:W})})),tt._ordinalMeta=ot,tt._extent=tt.getSetting("extent")||[0,ot.categories.length-1],tt}return nt.prototype.parse=function(Z){return Z==null?NaN:(0,yt.HD)(Z)?this._ordinalMeta.getOrdinal(Z):Math.round(Z)},nt.prototype.contain=function(Z){return Z=this.parse(Z),vt.XS(Z,this._extent)&&this._ordinalMeta.categories[Z]!=null},nt.prototype.normalize=function(Z){return Z=this._getTickNumber(this.parse(Z)),vt.Fv(Z,this._extent)},nt.prototype.scale=function(Z){return Z=Math.round(vt.bA(Z,this._extent)),this.getRawOrdinalNumber(Z)},nt.prototype.getTicks=function(){for(var Z=[],tt=this._extent,ot=tt[0];ot<=tt[1];)Z.push({value:ot}),ot++;return Z},nt.prototype.getMinorTicks=function(Z){},nt.prototype.setSortInfo=function(Z){if(Z==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var tt=Z.ordinalNumbers,ot=this._ordinalNumbersByTick=[],W=this._ticksByOrdinalNumber=[],Y=0,H=this._ordinalMeta.categories.length,st=Math.min(H,tt.length);Y<st;++Y){var J=tt[Y];ot[Y]=J,W[J]=Y}for(var g=0;Y<H;++Y){for(;W[g]!=null;)g++;ot.push(g),W[g]=Y}},nt.prototype._getTickNumber=function(Z){var tt=this._ticksByOrdinalNumber;return tt&&Z>=0&&Z<tt.length?tt[Z]:Z},nt.prototype.getRawOrdinalNumber=function(Z){var tt=this._ordinalNumbersByTick;return tt&&Z>=0&&Z<tt.length?tt[Z]:Z},nt.prototype.getLabel=function(Z){if(!this.isBlank()){var tt=this.getRawOrdinalNumber(Z.value),ot=this._ordinalMeta.categories[tt];return ot==null?"":ot+""}},nt.prototype.count=function(){return this._extent[1]-this._extent[0]+1},nt.prototype.unionExtentFromData=function(Z,tt){this.unionExtent(Z.getApproximateExtent(tt))},nt.prototype.isInExtentRange=function(Z){return Z=this._getTickNumber(Z),this._extent[0]<=Z&&this._extent[1]>=Z},nt.prototype.getOrdinalMeta=function(){return this._ordinalMeta},nt.prototype.calcNiceTicks=function(){},nt.prototype.calcNiceExtent=function(){},nt.type="ordinal",nt}(dt.Z);dt.Z.registerClass(gt),ee.Z=gt},12763:function(Pe,ee,z){var F=z(71619),dt=function(){function q(vt){this._setting=vt||{},this._extent=[1/0,-1/0]}return q.prototype.getSetting=function(vt){return this._setting[vt]},q.prototype.unionExtent=function(vt){var yt=this._extent;vt[0]<yt[0]&&(yt[0]=vt[0]),vt[1]>yt[1]&&(yt[1]=vt[1])},q.prototype.unionExtentFromData=function(vt,yt){this.unionExtent(vt.getApproximateExtent(yt))},q.prototype.getExtent=function(){return this._extent.slice()},q.prototype.setExtent=function(vt,yt){var gt=this._extent;isNaN(vt)||(gt[0]=vt),isNaN(yt)||(gt[1]=yt)},q.prototype.isInExtentRange=function(vt){return this._extent[0]<=vt&&this._extent[1]>=vt},q.prototype.isBlank=function(){return this._isBlank},q.prototype.setBlank=function(vt){this._isBlank=vt},q}();F.au(dt),ee.Z=dt},29154:function(Pe,ee,z){var F=z(12012),dt=z(97414),q=z(48295),vt=z(46726),yt=z(8835),gt=z(12763),xt=z(70324),nt=function(j,O,X,K){for(;X<K;){var G=X+K>>>1;j[G][1]<O?X=G+1:K=G}return X},Z=function(j){(0,F.ZT)(O,j);function O(X){var K=j.call(this,X)||this;return K.type="time",K}return O.prototype.getLabel=function(X){var K=this.getSetting("useUTC");return(0,q.WU)(X.value,q.V8[(0,q.xC)((0,q.Tj)(this._minLevelUnit))]||q.V8.second,K,this.getSetting("locale"))},O.prototype.getFormattedLabel=function(X,K,G){var k=this.getSetting("useUTC"),R=this.getSetting("locale");return(0,q.k7)(X,K,G,R,k)},O.prototype.getTicks=function(){var X=this._interval,K=this._extent,G=[];if(!X)return G;G.push({value:K[0],level:0});var k=this.getSetting("useUTC"),R=Q(this._minLevelUnit,this._approxInterval,k,K);return G=G.concat(R),G.push({value:K[1],level:0}),G},O.prototype.calcNiceExtent=function(X){var K=this._extent;if(K[0]===K[1]&&(K[0]-=q.s2,K[1]+=q.s2),K[1]===-1/0&&K[0]===1/0){var G=new Date;K[1]=+new Date(G.getFullYear(),G.getMonth(),G.getDate()),K[0]=K[1]-q.s2}this.calcNiceTicks(X.splitNumber,X.minInterval,X.maxInterval)},O.prototype.calcNiceTicks=function(X,K,G){X=X||10;var k=this._extent,R=k[1]-k[0];this._approxInterval=R/X,K!=null&&this._approxInterval<K&&(this._approxInterval=K),G!=null&&this._approxInterval>G&&(this._approxInterval=G);var T=tt.length,P=Math.min(nt(tt,this._approxInterval,0,T),T-1);this._interval=tt[P][1],this._minLevelUnit=tt[Math.max(P-1,0)][0]},O.prototype.parse=function(X){return(0,xt.hj)(X)?X:+dt.sG(X)},O.prototype.contain=function(X){return vt.XS(this.parse(X),this._extent)},O.prototype.normalize=function(X){return vt.Fv(this.parse(X),this._extent)},O.prototype.scale=function(X){return vt.bA(X,this._extent)},O.type="time",O}(yt.Z),tt=[["second",q.WT],["minute",q.yR],["hour",q.dV],["quarter-day",q.dV*6],["half-day",q.dV*12],["day",q.s2*1.2],["half-week",q.s2*3.5],["week",q.s2*7],["month",q.s2*31],["quarter",q.s2*95],["half-year",q.P5/2],["year",q.P5]];function ot(j,O,X,K){var G=dt.sG(O),k=dt.sG(X),R=function(B){return(0,q.q5)(G,B,K)===(0,q.q5)(k,B,K)},T=function(){return R("year")},P=function(){return T()&&R("month")},M=function(){return P()&&R("day")},b=function(){return M()&&R("hour")},w=function(){return b()&&R("minute")},C=function(){return w()&&R("second")},V=function(){return C()&&R("millisecond")};switch(j){case"year":return T();case"month":return P();case"day":return M();case"hour":return b();case"minute":return w();case"second":return C();case"millisecond":return V()}}function W(j,O){return j/=q.s2,j>16?16:j>7.5?7:j>3.5?4:j>1.5?2:1}function Y(j){var O=30*q.s2;return j/=O,j>6?6:j>3?3:j>2?2:1}function H(j){return j/=q.dV,j>12?12:j>6?6:j>3.5?4:j>2?2:1}function st(j,O){return j/=O?q.yR:q.WT,j>30?30:j>20?20:j>15?15:j>10?10:j>5?5:j>2?2:1}function J(j){return dt.kx(j,!0)}function g(j,O,X){var K=new Date(j);switch((0,q.Tj)(O)){case"year":case"month":K[(0,q.vh)(X)](0);case"day":K[(0,q.f5)(X)](1);case"hour":K[(0,q.En)(X)](0);case"minute":K[(0,q.eN)(X)](0);case"second":K[(0,q.rM)(X)](0),K[(0,q.cb)(X)](0)}return K.getTime()}function Q(j,O,X,K){var G=1e4,k=q.FW,R=0;function T(bt,Ot,Bt,Ht,Qt,re,ye){for(var he=new Date(Ot),be=Ot,Be=he[Ht]();be<Bt&&be<=K[1];)ye.push({value:be}),Be+=bt,he[Qt](Be),be=he.getTime();ye.push({value:be,notAdd:!0})}function P(bt,Ot,Bt){var Ht=[],Qt=!Ot.length;if(!ot((0,q.Tj)(bt),K[0],K[1],X)){Qt&&(Ot=[{value:g(new Date(K[0]),bt,X)},{value:K[1]}]);for(var re=0;re<Ot.length-1;re++){var ye=Ot[re].value,he=Ot[re+1].value;if(ye!==he){var be=void 0,Be=void 0,Ze=void 0,qe=!1;switch(bt){case"year":be=Math.max(1,Math.round(O/q.s2/365)),Be=(0,q.sx)(X),Ze=(0,q.xL)(X);break;case"half-year":case"quarter":case"month":be=Y(O),Be=(0,q.CW)(X),Ze=(0,q.vh)(X);break;case"week":case"half-week":case"day":be=W(O,31),Be=(0,q.xz)(X),Ze=(0,q.f5)(X),qe=!0;break;case"half-day":case"quarter-day":case"hour":be=H(O),Be=(0,q.Wp)(X),Ze=(0,q.En)(X);break;case"minute":be=st(O,!0),Be=(0,q.fn)(X),Ze=(0,q.eN)(X);break;case"second":be=st(O,!1),Be=(0,q.MV)(X),Ze=(0,q.rM)(X);break;case"millisecond":be=J(O),Be=(0,q.RZ)(X),Ze=(0,q.cb)(X);break}T(be,ye,he,Be,Ze,qe,Ht),bt==="year"&&Bt.length>1&&re===0&&Bt.unshift({value:Bt[0].value-be})}}for(var re=0;re<Ht.length;re++)Bt.push(Ht[re]);return Ht}}for(var M=[],b=[],w=0,C=0,V=0;V<k.length&&R++<G;++V){var B=(0,q.Tj)(k[V]);if((0,q.$K)(k[V])){P(k[V],M[M.length-1]||[],b);var ut=k[V+1]?(0,q.Tj)(k[V+1]):null;if(B!==ut){if(b.length){C=w,b.sort(function(bt,Ot){return bt.value-Ot.value});for(var it=[],lt=0;lt<b.length;++lt){var rt=b[lt].value;(lt===0||b[lt-1].value!==rt)&&(it.push(b[lt]),rt>=K[0]&&rt<=K[1]&&w++)}var ct=(K[1]-K[0])/O;if(w>ct*1.5&&C>ct/1.5||(M.push(it),w>ct||j===k[V]))break}b=[]}}}for(var St=(0,xt.hX)((0,xt.UI)(M,function(bt){return(0,xt.hX)(bt,function(Ot){return Ot.value>=K[0]&&Ot.value<=K[1]&&!Ot.notAdd})}),function(bt){return bt.length>0}),at=[],mt=St.length-1,V=0;V<St.length;++V)for(var Dt=St[V],wt=0;wt<Dt.length;++wt)at.push({value:Dt[wt].value,level:mt-V});at.sort(function(bt,Ot){return bt.value-Ot.value});for(var Pt=[],V=0;V<at.length;++V)(V===0||at[V].value!==at[V-1].value)&&Pt.push(at[V]);return Pt}gt.Z.registerClass(Z),ee.Z=Z},46726:function(Pe,ee,z){z.d(ee,{Fv:function(){return tt},Qf:function(){return vt},XS:function(){return Z},bA:function(){return ot},lM:function(){return q},lb:function(){return gt},r1:function(){return yt}});var F=z(97414);function dt(W){var Y=Math.pow(10,quantityExponent(Math.abs(W))),H=Math.abs(W/Y);return H===0||H===1||H===2||H===3||H===5}function q(W){return W.type==="interval"||W.type==="log"}function vt(W,Y,H,st){var J={},g=W[1]-W[0],Q=J.interval=(0,F.kx)(g/Y,!0);H!=null&&Q<H&&(Q=J.interval=H),st!=null&&Q>st&&(Q=J.interval=st);var j=J.intervalPrecision=gt(Q),O=J.niceTickExtent=[(0,F.NM)(Math.ceil(W[0]/Q)*Q,j),(0,F.NM)(Math.floor(W[1]/Q)*Q,j)];return nt(O,W),J}function yt(W){var Y=Math.pow(10,(0,F.xW)(W)),H=W/Y;return H?H===2?H=3:H===3?H=5:H*=2:H=1,(0,F.NM)(H*Y)}function gt(W){return(0,F.p8)(W)+2}function xt(W,Y,H){W[Y]=Math.max(Math.min(W[Y],H[1]),H[0])}function nt(W,Y){!isFinite(W[0])&&(W[0]=Y[0]),!isFinite(W[1])&&(W[1]=Y[1]),xt(W,0,Y),xt(W,1,Y),W[0]>W[1]&&(W[0]=W[1])}function Z(W,Y){return W>=Y[0]&&W<=Y[1]}function tt(W,Y){return Y[1]===Y[0]?.5:(W-Y[0])/(Y[1]-Y[0])}function ot(W,Y){return W*(Y[1]-Y[0])+Y[0]}},71619:function(Pe,ee,z){z.d(ee,{PT:function(){return nt},Qj:function(){return Y},au:function(){return J},dm:function(){return Z},pw:function(){return ot},u9:function(){return gt}});var F=z(12012),dt=z(70324),q=".",vt="___EC__COMPONENT__CONTAINER___",yt="___EC__EXTENDED_CLASS___";function gt(g){var Q={main:"",sub:""};if(g){var j=g.split(q);Q.main=j[0]||"",Q.sub=j[1]||""}return Q}function xt(g){dt.hu(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(g),'componentType "'+g+'" illegal')}function nt(g){return!!(g&&g[yt])}function Z(g,Q){g.$constructor=g,g.extend=function(j){var O=this,X;return tt(O)?X=function(K){(0,F.ZT)(G,K);function G(){return K.apply(this,arguments)||this}return G}(O):(X=function(){(j.$constructor||O).apply(this,arguments)},dt.XW(X,this)),dt.l7(X.prototype,j),X[yt]=!0,X.extend=this.extend,X.superCall=H,X.superApply=st,X.superClass=O,X}}function tt(g){return dt.mf(g)&&/^class\s/.test(Function.prototype.toString.call(g))}function ot(g,Q){g.extend=Q.extend}var W=Math.round(Math.random()*10);function Y(g){var Q=["__\0is_clz",W++].join("_");g.prototype[Q]=!0,g.isInstance=function(j){return!!(j&&j[Q])}}function H(g,Q){for(var j=[],O=2;O<arguments.length;O++)j[O-2]=arguments[O];return this.superClass.prototype[Q].apply(g,j)}function st(g,Q,j){return this.superClass.prototype[Q].apply(g,j)}function J(g){var Q={};g.registerClass=function(O){var X=O.type||O.prototype.type;if(X){xt(X),O.prototype.type=X;var K=gt(X);if(!K.sub)Q[K.main]=O;else if(K.sub!==vt){var G=j(K);G[K.sub]=O}}return O},g.getClass=function(O,X,K){var G=Q[O];if(G&&G[vt]&&(G=X?G[X]:null),K&&!G)throw new Error(X?"Component "+O+"."+(X||"")+" is used but not imported.":O+".type should be specified.");return G},g.getClassesByMainType=function(O){var X=gt(O),K=[],G=Q[X.main];return G&&G[vt]?dt.S6(G,function(k,R){R!==vt&&K.push(k)}):K.push(G),K},g.hasClass=function(O){var X=gt(O);return!!Q[X.main]},g.getAllClassMainTypes=function(){var O=[];return dt.S6(Q,function(X,K){O.push(K)}),O},g.hasSubTypes=function(O){var X=gt(O),K=Q[X.main];return K&&K[vt]};function j(O){var X=Q[O.main];return(!X||!X[vt])&&(X=Q[O.main]={},X[vt]=!0),X}}},95827:function(Pe,ee,z){z.d(ee,{Kr:function(){return vt},ZL:function(){return xt},cj:function(){return yt},jS:function(){return gt}});var F=z(70324),dt=z(71619),q=Math.round(Math.random()*10);function vt(nt){return[nt||"",q++].join("_")}function yt(nt){var Z={};nt.registerSubTypeDefaulter=function(tt,ot){var W=(0,dt.u9)(tt);Z[W.main]=ot},nt.determineSubType=function(tt,ot){var W=ot.type;if(!W){var Y=(0,dt.u9)(tt).main;nt.hasSubTypes(tt)&&Z[Y]&&(W=Z[Y](ot))}return W}}function gt(nt,Z){nt.topologicalTravel=function(Y,H,st,J){if(!Y.length)return;var g=tt(H),Q=g.graph,j=g.noEntryList,O={};for(F.S6(Y,function(T){O[T]=!0});j.length;){var X=j.pop(),K=Q[X],G=!!O[X];G&&(st.call(J,X,K.originalDeps.slice()),delete O[X]),F.S6(K.successor,G?R:k)}F.S6(O,function(){var T="";throw new Error(T)});function k(T){Q[T].entryCount--,Q[T].entryCount===0&&j.push(T)}function R(T){O[T]=!0,k(T)}};function tt(Y){var H={},st=[];return F.S6(Y,function(J){var g=ot(H,J),Q=g.originalDeps=Z(J),j=W(Q,Y);g.entryCount=j.length,g.entryCount===0&&st.push(J),F.S6(j,function(O){F.cq(g.predecessor,O)<0&&g.predecessor.push(O);var X=ot(H,O);F.cq(X.successor,O)<0&&X.successor.push(J)})}),{graph:H,noEntryList:st}}function ot(Y,H){return Y[H]||(Y[H]={predecessor:[],successor:[]}),Y[H]}function W(Y,H){var st=[];return F.S6(Y,function(J){F.cq(H,J)>=0&&st.push(J)}),st}}function xt(nt,Z){return F.TS(F.TS({},nt,!0),Z,!0)}},83617:function(Pe,ee,z){z.d(ee,{I:function(){return H}});var F=Math.round(Math.random()*9),dt=typeof Object.defineProperty=="function",q=function(){function O(){this._id="__ec_inner_"+F++}return O.prototype.get=function(X){return this._guard(X)[this._id]},O.prototype.set=function(X,K){var G=this._guard(X);return dt?Object.defineProperty(G,this._id,{value:K,enumerable:!1,configurable:!0}):G[this._id]=K,this},O.prototype.delete=function(X){return this.has(X)?(delete this._guard(X)[this._id],!0):!1},O.prototype.has=function(X){return!!this._guard(X)[this._id]},O.prototype._guard=function(X){if(X!==Object(X))throw TypeError("Value of WeakMap is not a non-null object.");return X},O}(),vt=q,yt=z(86280),gt=z(70324),xt=z(97414),nt=z(54373),Z=z(87368),tt=z(47297),ot=new vt,W=new yt.ZP(100),Y=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function H(O,X){if(O==="none")return null;var K=X.getDevicePixelRatio(),G=X.getZr(),k=G.painter.type==="svg";O.dirty&&ot.delete(O);var R=ot.get(O);if(R)return R;var T=(0,gt.ce)(O,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});T.backgroundColor==="none"&&(T.backgroundColor=null);var P={repeat:"repeat"};return M(P),P.rotation=T.rotation,P.scaleX=P.scaleY=k?1:1/K,ot.set(O,P),O.dirty=!1,P;function M(b){for(var w=[K],C=!0,V=0;V<Y.length;++V){var B=T[Y[V]];if(B!=null&&!(0,gt.kJ)(B)&&!(0,gt.HD)(B)&&!(0,gt.hj)(B)&&typeof B!="boolean"){C=!1;break}w.push(B)}var ut;if(C){ut=w.join(",")+(k?"-svg":"");var it=W.get(ut);it&&(k?b.svgElement=it:b.image=it)}var lt=J(T.dashArrayX),rt=g(T.dashArrayY),ct=st(T.symbol),St=Q(lt),at=j(rt),mt=!k&&tt.qW.createCanvas(),Dt=k&&{tag:"g",attrs:{},key:"dcl",children:[]},wt=bt(),Pt;mt&&(mt.width=wt.width*K,mt.height=wt.height*K,Pt=mt.getContext("2d")),Ot(),C&&W.put(ut,mt||Dt),b.image=mt,b.svgElement=Dt,b.svgWidth=wt.width,b.svgHeight=wt.height;function bt(){for(var Bt=1,Ht=0,Qt=St.length;Ht<Qt;++Ht)Bt=(0,xt.nl)(Bt,St[Ht]);for(var re=1,Ht=0,Qt=ct.length;Ht<Qt;++Ht)re=(0,xt.nl)(re,ct[Ht].length);Bt*=re;var ye=at*St.length*ct.length;if(!1)var he;return{width:Math.max(1,Math.min(Bt,T.maxTileWidth)),height:Math.max(1,Math.min(ye,T.maxTileHeight))}}function Ot(){Pt&&(Pt.clearRect(0,0,mt.width,mt.height),T.backgroundColor&&(Pt.fillStyle=T.backgroundColor,Pt.fillRect(0,0,mt.width,mt.height)));for(var Bt=0,Ht=0;Ht<rt.length;++Ht)Bt+=rt[Ht];if(Bt<=0)return;for(var Qt=-at,re=0,ye=0,he=0;Qt<wt.height;){if(re%2===0){for(var be=ye/2%ct.length,Be=0,Ze=0,qe=0;Be<wt.width*2;){for(var pr=0,Ht=0;Ht<lt[he].length;++Ht)pr+=lt[he][Ht];if(pr<=0)break;if(Ze%2===0){var wr=(1-T.symbolSize)*.5,Or=Be+lt[he][Ze]*wr,Sr=Qt+rt[re]*wr,Vr=lt[he][Ze]*T.symbolSize,sn=rt[re]*T.symbolSize,cr=qe/2%ct[be].length;or(Or,Sr,Vr,sn,ct[be][cr])}Be+=lt[he][Ze],++qe,++Ze,Ze===lt[he].length&&(Ze=0)}++he,he===lt.length&&(he=0)}Qt+=rt[re],++ye,++re,re===rt.length&&(re=0)}function or(Dr,ze,Ne,He,Vt){var le=k?1:K,Ee=(0,nt.th)(Vt,Dr*le,ze*le,Ne*le,He*le,T.color,T.symbolKeepAspect);if(k){var Fe=G.painter.renderOneToVNode(Ee);Fe&&Dt.children.push(Fe)}else(0,Z.RV)(Pt,Ee)}}}}function st(O){if(!O||O.length===0)return[["rect"]];if((0,gt.HD)(O))return[[O]];for(var X=!0,K=0;K<O.length;++K)if(!(0,gt.HD)(O[K])){X=!1;break}if(X)return st([O]);for(var G=[],K=0;K<O.length;++K)(0,gt.HD)(O[K])?G.push([O[K]]):G.push(O[K]);return G}function J(O){if(!O||O.length===0)return[[0,0]];if((0,gt.hj)(O)){var X=Math.ceil(O);return[[X,X]]}for(var K=!0,G=0;G<O.length;++G)if(!(0,gt.hj)(O[G])){K=!1;break}if(K)return J([O]);for(var k=[],G=0;G<O.length;++G)if((0,gt.hj)(O[G])){var X=Math.ceil(O[G]);k.push([X,X])}else{var X=(0,gt.UI)(O[G],function(P){return Math.ceil(P)});X.length%2===1?k.push(X.concat(X)):k.push(X)}return k}function g(O){if(!O||typeof O=="object"&&O.length===0)return[0,0];if((0,gt.hj)(O)){var X=Math.ceil(O);return[X,X]}var K=(0,gt.UI)(O,function(G){return Math.ceil(G)});return O.length%2?K.concat(K):K}function Q(O){return(0,gt.UI)(O,function(X){return j(X)})}function j(O){for(var X=0,K=0;K<O.length;++K)X+=O[K];return O.length%2===1?X*2:X}},84515:function(Pe,ee,z){z.d(ee,{o:function(){return F}});function F(dt,q,vt){for(var yt;dt&&!(q(dt)&&(yt=dt,vt));)dt=dt.__hostTarget||dt.parent;return yt}},20283:function(Pe,ee,z){z.d(ee,{A0:function(){return Y},Lz:function(){return J},MI:function(){return g},MY:function(){return xt},OD:function(){return yt},ew:function(){return st},kF:function(){return ot},mr:function(){return H},uX:function(){return nt},wx:function(){return W},zW:function(){return gt}});var F=z(70324),dt=z(80400),q=z(97414),vt=z(48295);function yt(Q){if(!(0,q.kE)(Q))return F.HD(Q)?Q:"-";var j=(Q+"").split(".");return j[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(j.length>1?"."+j[1]:"")}function gt(Q,j){return Q=(Q||"").toLowerCase().replace(/-(.)/g,function(O,X){return X.toUpperCase()}),j&&Q&&(Q=Q.charAt(0).toUpperCase()+Q.slice(1)),Q}var xt=F.MY;function nt(Q,j,O){var X="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function K(M){return M&&F.fy(M)?M:"-"}function G(M){return!!(M!=null&&!isNaN(M)&&isFinite(M))}var k=j==="time",R=Q instanceof Date;if(k||R){var T=k?(0,q.sG)(Q):Q;if(isNaN(+T)){if(R)return"-"}else return(0,vt.WU)(T,X,O)}if(j==="ordinal")return F.cd(Q)?K(Q):F.hj(Q)&&G(Q)?Q+"":"-";var P=(0,q.FK)(Q);return G(P)?yt(P):F.cd(Q)?K(Q):typeof Q=="boolean"?Q+"":"-"}var Z=["a","b","c","d","e","f","g"],tt=function(Q,j){return"{"+Q+(j==null?"":j)+"}"};function ot(Q,j,O){F.kJ(j)||(j=[j]);var X=j.length;if(!X)return"";for(var K=j[0].$vars||[],G=0;G<K.length;G++){var k=Z[G];Q=Q.replace(tt(k),tt(k,0))}for(var R=0;R<X;R++)for(var T=0;T<K.length;T++){var P=j[R][K[T]];Q=Q.replace(tt(Z[T],R),O?(0,dt.F1)(P):P)}return Q}function W(Q,j,O){return F.S6(j,function(X,K){Q=Q.replace("{"+K+"}",O?(0,dt.F1)(X):X)}),Q}function Y(Q,j){var O=F.HD(Q)?{color:Q,extraCssText:j}:Q||{},X=O.color,K=O.type;j=O.extraCssText;var G=O.renderMode||"html";if(!X)return"";if(G==="html")return K==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+(0,dt.F1)(X)+";"+(j||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+(0,dt.F1)(X)+";"+(j||"")+'"></span>';var k=O.markerId||"markerX";return{renderMode:G,content:"{"+k+"|}  ",style:K==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:X}:{width:10,height:10,borderRadius:5,backgroundColor:X}}}function H(Q,j,O){(Q==="week"||Q==="month"||Q==="quarter"||Q==="half-year"||Q==="year")&&(Q=`MM-dd
yyyy`);var X=(0,q.sG)(j),K=O?"getUTC":"get",G=X[K+"FullYear"](),k=X[K+"Month"]()+1,R=X[K+"Date"](),T=X[K+"Hours"](),P=X[K+"Minutes"](),M=X[K+"Seconds"](),b=X[K+"Milliseconds"]();return Q=Q.replace("MM",(0,vt.vk)(k,2)).replace("M",k).replace("yyyy",G).replace("yy",(0,vt.vk)(G%100+"",2)).replace("dd",(0,vt.vk)(R,2)).replace("d",R).replace("hh",(0,vt.vk)(T,2)).replace("h",T).replace("mm",(0,vt.vk)(P,2)).replace("m",P).replace("ss",(0,vt.vk)(M,2)).replace("s",M).replace("SSS",(0,vt.vk)(b,3)),Q}function st(Q){return Q&&Q.charAt(0).toUpperCase()+Q.substr(1)}function J(Q,j){return j=j||"transparent",F.HD(Q)?Q:F.Kn(Q)&&Q.colorStops&&(Q.colorStops[0]||{}).color||j}function g(Q,j){if(j==="_blank"||j==="blank"){var O=window.open();O.opener=null,O.location.href=Q}else window.open(Q,j)}},74071:function(Pe,ee,z){z.r(ee),z.d(ee,{Arc:function(){return Q.Z},BezierCurve:function(){return g.Z},BoundingRect:function(){return K.Z},Circle:function(){return Z.Z},CompoundPath:function(){return j.Z},Ellipse:function(){return tt.Z},Group:function(){return xt.Z},Image:function(){return gt.ZP},IncrementalDisplayable:function(){return b},Line:function(){return J.Z},LinearGradient:function(){return O.Z},OrientedBoundingRect:function(){return G.Z},Path:function(){return vt.ZP},Point:function(){return k.Z},Polygon:function(){return Y.Z},Polyline:function(){return H.Z},RadialGradient:function(){return X.Z},Rect:function(){return st.Z},Ring:function(){return W.Z},Sector:function(){return ot.C},Text:function(){return nt.ZP},applyTransform:function(){return ye},clipPointsByRect:function(){return qe},clipRectByRect:function(){return pr},createIcon:function(){return wr},extendPath:function(){return St},extendShape:function(){return rt},getShapeClass:function(){return mt},getTransform:function(){return re},groupTransition:function(){return Ze},initProps:function(){return B.KZ},isElementRemoved:function(){return B.eq},lineLineIntersect:function(){return Sr},linePolygonIntersect:function(){return Or},makeImage:function(){return wt},makePath:function(){return Dt},mergePath:function(){return bt},registerShape:function(){return at},removeElement:function(){return B.bX},removeElementWithFadeOut:function(){return B.XD},resizePath:function(){return Ot},setTooltipConfig:function(){return cr},subPixelOptimize:function(){return Qt},subPixelOptimizeLine:function(){return Bt},subPixelOptimizeRect:function(){return Ht},transformDirection:function(){return he},traverseElements:function(){return Dr},updateProps:function(){return B.D}});var F=z(1205),dt=z(58427),q=z(85755),vt=z(66210),yt=z(23463),gt=z(13806),xt=z(2574),nt=z(95169),Z=z(16513),tt=z(15904),ot=z(29902),W=z(96449),Y=z(7228),H=z(6224),st=z(73909),J=z(40596),g=z(32799),Q=z(5485),j=z(99464),O=z(55602),X=z(43606),K=z(16128),G=z(23736),k=z(73913),R=z(12012),T=z(11635),P=[],M=function(ze){(0,R.ZT)(Ne,ze);function Ne(){var He=ze!==null&&ze.apply(this,arguments)||this;return He.notClear=!0,He.incremental=!0,He._displayables=[],He._temporaryDisplayables=[],He._cursor=0,He}return Ne.prototype.traverse=function(He,Vt){He.call(Vt,this)},Ne.prototype.useStyle=function(){this.style={}},Ne.prototype.getCursor=function(){return this._cursor},Ne.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},Ne.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},Ne.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},Ne.prototype.addDisplayable=function(He,Vt){Vt?this._temporaryDisplayables.push(He):this._displayables.push(He),this.markRedraw()},Ne.prototype.addDisplayables=function(He,Vt){Vt=Vt||!1;for(var le=0;le<He.length;le++)this.addDisplayable(He[le],Vt)},Ne.prototype.getDisplayables=function(){return this._displayables},Ne.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},Ne.prototype.eachPendingDisplayable=function(He){for(var Vt=this._cursor;Vt<this._displayables.length;Vt++)He&&He(this._displayables[Vt]);for(var Vt=0;Vt<this._temporaryDisplayables.length;Vt++)He&&He(this._temporaryDisplayables[Vt])},Ne.prototype.update=function(){this.updateTransform();for(var He=this._cursor;He<this._displayables.length;He++){var Vt=this._displayables[He];Vt.parent=this,Vt.update(),Vt.parent=null}for(var He=0;He<this._temporaryDisplayables.length;He++){var Vt=this._temporaryDisplayables[He];Vt.parent=this,Vt.update(),Vt.parent=null}},Ne.prototype.getBoundingRect=function(){if(!this._rect){for(var He=new K.Z(1/0,1/0,-1/0,-1/0),Vt=0;Vt<this._displayables.length;Vt++){var le=this._displayables[Vt],Ee=le.getBoundingRect().clone();le.needLocalTransform()&&Ee.applyTransform(le.getLocalTransform(P)),He.union(Ee)}this._rect=He}return this._rect},Ne.prototype.contain=function(He,Vt){var le=this.transformCoordToLocal(He,Vt),Ee=this.getBoundingRect();if(Ee.contain(le[0],le[1]))for(var Fe=0;Fe<this._displayables.length;Fe++){var Xt=this._displayables[Fe];if(Xt.contain(He,Vt))return!0}return!1},Ne}(T.ZP),b=M,w=z(51372),C=z(70324),V=z(98845),B=z(25400),ut=Math.max,it=Math.min,lt={};function rt(ze){return vt.ZP.extend(ze)}var ct=F.Pc;function St(ze,Ne){return ct(ze,Ne)}function at(ze,Ne){lt[ze]=Ne}function mt(ze){if(lt.hasOwnProperty(ze))return lt[ze]}function Dt(ze,Ne,He,Vt){var le=F.iR(ze,Ne);return He&&(Vt==="center"&&(He=Pt(He,le.getBoundingRect())),Ot(le,He)),le}function wt(ze,Ne,He){var Vt=new gt.ZP({style:{image:ze,x:Ne.x,y:Ne.y,width:Ne.width,height:Ne.height},onload:function(le){if(He==="center"){var Ee={width:le.width,height:le.height};Vt.setStyle(Pt(Ne,Ee))}}});return Vt}function Pt(ze,Ne){var He=Ne.width/Ne.height,Vt=ze.height*He,le;Vt<=ze.width?le=ze.height:(Vt=ze.width,le=Vt/He);var Ee=ze.x+ze.width/2,Fe=ze.y+ze.height/2;return{x:Ee-Vt/2,y:Fe-le/2,width:Vt,height:le}}var bt=F.AA;function Ot(ze,Ne){if(ze.applyTransform){var He=ze.getBoundingRect(),Vt=He.calculateTransform(Ne);ze.applyTransform(Vt)}}function Bt(ze,Ne){return w._3(ze,ze,{lineWidth:Ne}),ze}function Ht(ze){return w.Pw(ze.shape,ze.shape,ze.style),ze}var Qt=w.vu;function re(ze,Ne){for(var He=dt.yR([]);ze&&ze!==Ne;)dt.dC(He,ze.getLocalTransform(),He),ze=ze.parent;return He}function ye(ze,Ne,He){return Ne&&!(0,C.zG)(Ne)&&(Ne=yt.ZP.getLocalTransform(Ne)),He&&(Ne=dt.U_([],Ne)),q.Ne([],ze,Ne)}function he(ze,Ne,He){var Vt=Ne[4]===0||Ne[5]===0||Ne[0]===0?1:Math.abs(2*Ne[4]/Ne[0]),le=Ne[4]===0||Ne[5]===0||Ne[2]===0?1:Math.abs(2*Ne[4]/Ne[2]),Ee=[ze==="left"?-Vt:ze==="right"?Vt:0,ze==="top"?-le:ze==="bottom"?le:0];return Ee=ye(Ee,Ne,He),Math.abs(Ee[0])>Math.abs(Ee[1])?Ee[0]>0?"right":"left":Ee[1]>0?"bottom":"top"}function be(ze){return!ze.isGroup}function Be(ze){return ze.shape!=null}function Ze(ze,Ne,He){if(!ze||!Ne)return;function Vt(Fe){var Xt={};return Fe.traverse(function($t){be($t)&&$t.anid&&(Xt[$t.anid]=$t)}),Xt}function le(Fe){var Xt={x:Fe.x,y:Fe.y,rotation:Fe.rotation};return Be(Fe)&&(Xt.shape=(0,C.l7)({},Fe.shape)),Xt}var Ee=Vt(ze);Ne.traverse(function(Fe){if(be(Fe)&&Fe.anid){var Xt=Ee[Fe.anid];if(Xt){var $t=le(Fe);Fe.attr(le(Xt)),(0,B.D)(Fe,$t,He,(0,V.A)(Fe).dataIndex)}}})}function qe(ze,Ne){return(0,C.UI)(ze,function(He){var Vt=He[0];Vt=ut(Vt,Ne.x),Vt=it(Vt,Ne.x+Ne.width);var le=He[1];return le=ut(le,Ne.y),le=it(le,Ne.y+Ne.height),[Vt,le]})}function pr(ze,Ne){var He=ut(ze.x,Ne.x),Vt=it(ze.x+ze.width,Ne.x+Ne.width),le=ut(ze.y,Ne.y),Ee=it(ze.y+ze.height,Ne.y+Ne.height);if(Vt>=He&&Ee>=le)return{x:He,y:le,width:Vt-He,height:Ee-le}}function wr(ze,Ne,He){var Vt=(0,C.l7)({rectHover:!0},Ne),le=Vt.style={strokeNoScale:!0};if(He=He||{x:-1,y:-1,width:2,height:2},ze)return ze.indexOf("image://")===0?(le.image=ze.slice(8),(0,C.ce)(le,He),new gt.ZP(Vt)):Dt(ze.replace("path://",""),Vt,He,"center")}function Or(ze,Ne,He,Vt,le){for(var Ee=0,Fe=le[le.length-1];Ee<le.length;Ee++){var Xt=le[Ee];if(Sr(ze,Ne,He,Vt,Xt[0],Xt[1],Fe[0],Fe[1]))return!0;Fe=Xt}}function Sr(ze,Ne,He,Vt,le,Ee,Fe,Xt){var $t=He-ze,ie=Vt-Ne,Zt=Fe-le,pe=Xt-Ee,ve=Vr(Zt,pe,$t,ie);if(sn(ve))return!1;var we=ze-le,Ue=Ne-Ee,ur=Vr(we,Ue,$t,ie)/ve;if(ur<0||ur>1)return!1;var gr=Vr(we,Ue,Zt,pe)/ve;return!(gr<0||gr>1)}function Vr(ze,Ne,He,Vt){return ze*Vt-He*Ne}function sn(ze){return ze<=1e-6&&ze>=-1e-6}function cr(ze){var Ne=ze.itemTooltipOption,He=ze.componentModel,Vt=ze.itemName,le=(0,C.HD)(Ne)?{formatter:Ne}:Ne,Ee=He.mainType,Fe=He.componentIndex,Xt={componentType:Ee,name:Vt,$vars:["name"]};Xt[Ee+"Index"]=Fe;var $t=ze.formatterParamsExtra;$t&&(0,C.S6)((0,C.XP)($t),function(Zt){(0,C.RI)(Xt,Zt)||(Xt[Zt]=$t[Zt],Xt.$vars.push(Zt))});var ie=(0,V.A)(ze.el);ie.componentMainType=Ee,ie.componentIndex=Fe,ie.tooltipConfig={name:Vt,option:(0,C.ce)({content:Vt,formatterParams:Xt},le)}}function or(ze,Ne){var He;ze.isGroup&&(He=Ne(ze)),He||ze.traverse(Ne)}function Dr(ze,Ne){if(ze)if((0,C.kJ)(ze))for(var He=0;He<ze.length;He++)or(ze[He],Ne);else or(ze,Ne)}at("circle",Z.Z),at("ellipse",tt.Z),at("sector",ot.C),at("ring",W.Z),at("polygon",Y.Z),at("polyline",H.Z),at("rect",st.Z),at("line",J.Z),at("bezierCurve",g.Z),at("arc",Q.Z)},98845:function(Pe,ee,z){z.d(ee,{A:function(){return dt},Q:function(){return q}});var F=z(21611),dt=(0,F.Yf)(),q=function(vt,yt,gt,xt){if(xt){var nt=dt(xt);nt.dataIndex=gt,nt.dataType=yt,nt.seriesIndex=vt,xt.type==="group"&&xt.traverse(function(Z){var tt=dt(Z);tt.seriesIndex=vt,tt.dataIndex=gt,tt.dataType=yt})}}},28734:function(Pe,ee,z){z.d(ee,{BZ:function(){return Z},ME:function(){return Y},QM:function(){return st},QT:function(){return j},YD:function(){return J},dt:function(){return g},gN:function(){return gt},lq:function(){return W},p$:function(){return H},tE:function(){return Q}});var F=z(70324),dt=z(16128),q=z(97414),vt=z(20283),yt=F.S6,gt=["left","right","top","bottom","width","height"],xt=[["width","left","right"],["height","top","bottom"]];function nt(O,X,K,G,k){var R=0,T=0;G==null&&(G=1/0),k==null&&(k=1/0);var P=0;X.eachChild(function(M,b){var w=M.getBoundingRect(),C=X.childAt(b+1),V=C&&C.getBoundingRect(),B,ut;if(O==="horizontal"){var it=w.width+(V?-V.x+w.x:0);B=R+it,B>G||M.newline?(R=0,B=it,T+=P+K,P=w.height):P=Math.max(P,w.height)}else{var lt=w.height+(V?-V.y+w.y:0);ut=T+lt,ut>k||M.newline?(R+=P+K,T=0,ut=lt,P=w.width):P=Math.max(P,w.width)}M.newline||(M.x=R,M.y=T,M.markRedraw(),O==="horizontal"?R=B+K:T=ut+K)})}var Z=nt,tt=F.WA(nt,"vertical"),ot=F.WA(nt,"horizontal");function W(O,X,K){var G=X.width,k=X.height,R=(0,q.GM)(O.left,G),T=(0,q.GM)(O.top,k),P=(0,q.GM)(O.right,G),M=(0,q.GM)(O.bottom,k);return(isNaN(R)||isNaN(parseFloat(O.left)))&&(R=0),(isNaN(P)||isNaN(parseFloat(O.right)))&&(P=G),(isNaN(T)||isNaN(parseFloat(O.top)))&&(T=0),(isNaN(M)||isNaN(parseFloat(O.bottom)))&&(M=k),K=vt.MY(K||0),{width:Math.max(P-R-K[1]-K[3],0),height:Math.max(M-T-K[0]-K[2],0)}}function Y(O,X,K){K=vt.MY(K||0);var G=X.width,k=X.height,R=(0,q.GM)(O.left,G),T=(0,q.GM)(O.top,k),P=(0,q.GM)(O.right,G),M=(0,q.GM)(O.bottom,k),b=(0,q.GM)(O.width,G),w=(0,q.GM)(O.height,k),C=K[2]+K[0],V=K[1]+K[3],B=O.aspect;switch(isNaN(b)&&(b=G-P-V-R),isNaN(w)&&(w=k-M-C-T),B!=null&&(isNaN(b)&&isNaN(w)&&(B>G/k?b=G*.8:w=k*.8),isNaN(b)&&(b=B*w),isNaN(w)&&(w=b/B)),isNaN(R)&&(R=G-P-b-V),isNaN(T)&&(T=k-M-w-C),O.left||O.right){case"center":R=G/2-b/2-K[3];break;case"right":R=G-b-V;break}switch(O.top||O.bottom){case"middle":case"center":T=k/2-w/2-K[0];break;case"bottom":T=k-w-C;break}R=R||0,T=T||0,isNaN(b)&&(b=G-V-R-(P||0)),isNaN(w)&&(w=k-C-T-(M||0));var ut=new dt.Z(R+K[3],T+K[0],b,w);return ut.margin=K,ut}function H(O,X,K,G,k,R){var T=!k||!k.hv||k.hv[0],P=!k||!k.hv||k.hv[1],M=k&&k.boundingMode||"all";if(R=R||O,R.x=O.x,R.y=O.y,!T&&!P)return!1;var b;if(M==="raw")b=O.type==="group"?new dt.Z(0,0,+X.width||0,+X.height||0):O.getBoundingRect();else if(b=O.getBoundingRect(),O.needLocalTransform()){var w=O.getLocalTransform();b=b.clone(),b.applyTransform(w)}var C=Y(F.ce({width:b.width,height:b.height},X),K,G),V=T?C.x-b.x:0,B=P?C.y-b.y:0;return M==="raw"?(R.x=V,R.y=B):(R.x+=V,R.y+=B),R===O&&O.markRedraw(),!0}function st(O,X){return O[xt[X][0]]!=null||O[xt[X][1]]!=null&&O[xt[X][2]]!=null}function J(O){var X=O.layoutMode||O.constructor.layoutMode;return F.Kn(X)?X:X?{type:X}:null}function g(O,X,K){var G=K&&K.ignoreSize;!F.kJ(G)&&(G=[G,G]);var k=T(xt[0],0),R=T(xt[1],1);b(xt[0],O,k),b(xt[1],O,R);function T(w,C){var V={},B=0,ut={},it=0,lt=2;if(yt(w,function(St){ut[St]=O[St]}),yt(w,function(St){P(X,St)&&(V[St]=ut[St]=X[St]),M(V,St)&&B++,M(ut,St)&&it++}),G[C])return M(X,w[1])?ut[w[2]]=null:M(X,w[2])&&(ut[w[1]]=null),ut;if(it===lt||!B)return ut;if(B>=lt)return V;for(var rt=0;rt<w.length;rt++){var ct=w[rt];if(!P(V,ct)&&P(O,ct)){V[ct]=O[ct];break}}return V}function P(w,C){return w.hasOwnProperty(C)}function M(w,C){return w[C]!=null&&w[C]!=="auto"}function b(w,C,V){yt(w,function(B){C[B]=V[B]})}}function Q(O){return j({},O)}function j(O,X){return X&&O&&yt(gt,function(K){X.hasOwnProperty(K)&&(O[K]=X[K])}),O}},13259:function(Pe,ee,z){z.d(ee,{Sh:function(){return nt},ZK:function(){return gt},_y:function(){return ot}});var F="[ECharts] ",dt={},q=typeof console!="undefined"&&console.warn&&console.log;function vt(W,Y,H){if(q){if(H){if(dt[Y])return;dt[Y]=!0}console[W](F+Y)}}function yt(W,Y){vt("log",W,Y)}function gt(W,Y){vt("warn",W,Y)}function xt(W,Y){vt("error",W,Y)}function nt(W){}function Z(W,Y,H){}function tt(){for(var W=[],Y=0;Y<arguments.length;Y++)W[Y]=arguments[Y];var H="";if(!1)var st;return H}function ot(W){throw new Error(W)}},21611:function(Pe,ee,z){z.d(ee,{C4:function(){return tt},C6:function(){return it},Cc:function(){return nt},Co:function(){return ot},HZ:function(){return rt},IL:function(){return St},O0:function(){return P},P$:function(){return ct},Td:function(){return Z},U5:function(){return X},U9:function(){return at},XI:function(){return b},Yf:function(){return C},ab:function(){return W},g0:function(){return T},gO:function(){return w},iP:function(){return lt},kF:function(){return xt},lY:function(){return R},pk:function(){return Dt},pm:function(){return B},pv:function(){return mt},yu:function(){return k},zH:function(){return ut}});var F=z(70324),dt=z(54490),q=z(97414);function vt(wt,Pt,bt){return(Pt-wt)*bt+wt}var yt="series\0",gt="\0_ec_\0";function xt(wt){return wt instanceof Array?wt:wt==null?[]:[wt]}function nt(wt,Pt,bt){if(wt){wt[Pt]=wt[Pt]||{},wt.emphasis=wt.emphasis||{},wt.emphasis[Pt]=wt.emphasis[Pt]||{};for(var Ot=0,Bt=bt.length;Ot<Bt;Ot++){var Ht=bt[Ot];!wt.emphasis[Pt].hasOwnProperty(Ht)&&wt[Pt].hasOwnProperty(Ht)&&(wt.emphasis[Pt][Ht]=wt[Pt][Ht])}}}var Z=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function tt(wt){return(0,F.Kn)(wt)&&!(0,F.kJ)(wt)&&!(wt instanceof Date)?wt.value:wt}function ot(wt){return(0,F.Kn)(wt)&&!(wt instanceof Array)}function W(wt,Pt,bt){var Ot=bt==="normalMerge",Bt=bt==="replaceMerge",Ht=bt==="replaceAll";wt=wt||[],Pt=(Pt||[]).slice();var Qt=(0,F.kW)();(0,F.S6)(Pt,function(ye,he){if(!(0,F.Kn)(ye)){Pt[he]=null;return}});var re=Y(wt,Qt,bt);return(Ot||Bt)&&H(re,wt,Qt,Pt),Ot&&st(re,Pt),Ot||Bt?J(re,Pt,Bt):Ht&&g(re,Pt),Q(re),re}function Y(wt,Pt,bt){var Ot=[];if(bt==="replaceAll")return Ot;for(var Bt=0;Bt<wt.length;Bt++){var Ht=wt[Bt];Ht&&Ht.id!=null&&Pt.set(Ht.id,Bt),Ot.push({existing:bt==="replaceMerge"||R(Ht)?null:Ht,newOption:null,keyInfo:null,brandNew:null})}return Ot}function H(wt,Pt,bt,Ot){(0,F.S6)(Ot,function(Bt,Ht){if(!(!Bt||Bt.id==null)){var Qt=O(Bt.id),re=bt.get(Qt);if(re!=null){var ye=wt[re];(0,F.hu)(!ye.newOption,'Duplicated option on id "'+Qt+'".'),ye.newOption=Bt,ye.existing=Pt[re],Ot[Ht]=null}}})}function st(wt,Pt){(0,F.S6)(Pt,function(bt,Ot){if(!(!bt||bt.name==null))for(var Bt=0;Bt<wt.length;Bt++){var Ht=wt[Bt].existing;if(!wt[Bt].newOption&&Ht&&(Ht.id==null||bt.id==null)&&!R(bt)&&!R(Ht)&&j("name",Ht,bt)){wt[Bt].newOption=bt,Pt[Ot]=null;return}}})}function J(wt,Pt,bt){(0,F.S6)(Pt,function(Ot){if(Ot){for(var Bt,Ht=0;(Bt=wt[Ht])&&(Bt.newOption||R(Bt.existing)||Bt.existing&&Ot.id!=null&&!j("id",Ot,Bt.existing));)Ht++;Bt?(Bt.newOption=Ot,Bt.brandNew=bt):wt.push({newOption:Ot,brandNew:bt,existing:null,keyInfo:null}),Ht++}})}function g(wt,Pt){(0,F.S6)(Pt,function(bt){wt.push({newOption:bt,brandNew:!0,existing:null,keyInfo:null})})}function Q(wt){var Pt=(0,F.kW)();(0,F.S6)(wt,function(bt){var Ot=bt.existing;Ot&&Pt.set(Ot.id,bt)}),(0,F.S6)(wt,function(bt){var Ot=bt.newOption;(0,F.hu)(!Ot||Ot.id==null||!Pt.get(Ot.id)||Pt.get(Ot.id)===bt,"id duplicates: "+(Ot&&Ot.id)),Ot&&Ot.id!=null&&Pt.set(Ot.id,bt),!bt.keyInfo&&(bt.keyInfo={})}),(0,F.S6)(wt,function(bt,Ot){var Bt=bt.existing,Ht=bt.newOption,Qt=bt.keyInfo;if((0,F.Kn)(Ht)){if(Qt.name=Ht.name!=null?O(Ht.name):Bt?Bt.name:yt+Ot,Bt)Qt.id=O(Bt.id);else if(Ht.id!=null)Qt.id=O(Ht.id);else{var re=0;do Qt.id="\0"+Qt.name+"\0"+re++;while(Pt.get(Qt.id))}Pt.set(Qt.id,bt)}})}function j(wt,Pt,bt){var Ot=X(Pt[wt],null),Bt=X(bt[wt],null);return Ot!=null&&Bt!=null&&Ot===Bt}function O(wt){return X(wt,"")}function X(wt,Pt){return wt==null?Pt:(0,F.HD)(wt)?wt:(0,F.hj)(wt)||(0,F.cd)(wt)?wt+"":Pt}function K(wt){}function G(wt){return isStringSafe(wt)||isNumeric(wt)}function k(wt){var Pt=wt.name;return!!(Pt&&Pt.indexOf(yt))}function R(wt){return wt&&wt.id!=null&&O(wt.id).indexOf(gt)===0}function T(wt){return gt+wt}function P(wt,Pt,bt){(0,F.S6)(wt,function(Ot){var Bt=Ot.newOption;(0,F.Kn)(Bt)&&(Ot.keyInfo.mainType=Pt,Ot.keyInfo.subType=M(Pt,Bt,Ot.existing,bt))})}function M(wt,Pt,bt,Ot){var Bt=Pt.type?Pt.type:bt?bt.subType:Ot.determineSubType(wt,Pt);return Bt}function b(wt,Pt){var bt={},Ot={};return Bt(wt||[],bt),Bt(Pt||[],Ot,bt),[Ht(bt),Ht(Ot)];function Bt(Qt,re,ye){for(var he=0,be=Qt.length;he<be;he++){var Be=X(Qt[he].seriesId,null);if(Be==null)return;for(var Ze=xt(Qt[he].dataIndex),qe=ye&&ye[Be],pr=0,wr=Ze.length;pr<wr;pr++){var Or=Ze[pr];qe&&qe[Or]?qe[Or]=null:(re[Be]||(re[Be]={}))[Or]=1}}}function Ht(Qt,re){var ye=[];for(var he in Qt)if(Qt.hasOwnProperty(he)&&Qt[he]!=null)if(re)ye.push(+he);else{var be=Ht(Qt[he],!0);be.length&&ye.push({seriesId:he,dataIndex:be})}return ye}}function w(wt,Pt){if(Pt.dataIndexInside!=null)return Pt.dataIndexInside;if(Pt.dataIndex!=null)return(0,F.kJ)(Pt.dataIndex)?(0,F.UI)(Pt.dataIndex,function(bt){return wt.indexOfRawIndex(bt)}):wt.indexOfRawIndex(Pt.dataIndex);if(Pt.name!=null)return(0,F.kJ)(Pt.name)?(0,F.UI)(Pt.name,function(bt){return wt.indexOfName(bt)}):wt.indexOfName(Pt.name)}function C(){var wt="__ec_inner_"+V++;return function(Pt){return Pt[wt]||(Pt[wt]={})}}var V=(0,q.jj)();function B(wt,Pt,bt){var Ot=ut(Pt,bt),Bt=Ot.mainTypeSpecified,Ht=Ot.queryOptionMap,Qt=Ot.others,re=Qt,ye=bt?bt.defaultMainType:null;return!Bt&&ye&&Ht.set(ye,{}),Ht.each(function(he,be){var Be=rt(wt,be,he,{useDefault:ye===be,enableAll:bt&&bt.enableAll!=null?bt.enableAll:!0,enableNone:bt&&bt.enableNone!=null?bt.enableNone:!0});re[be+"Models"]=Be.models,re[be+"Model"]=Be.models[0]}),re}function ut(wt,Pt){var bt;if((0,F.HD)(wt)){var Ot={};Ot[wt+"Index"]=0,bt=Ot}else bt=wt;var Bt=(0,F.kW)(),Ht={},Qt=!1;return(0,F.S6)(bt,function(re,ye){if(ye==="dataIndex"||ye==="dataIndexInside"){Ht[ye]=re;return}var he=ye.match(/^(\w+)(Index|Id|Name)$/)||[],be=he[1],Be=(he[2]||"").toLowerCase();if(!(!be||!Be||Pt&&Pt.includeMainTypes&&(0,F.cq)(Pt.includeMainTypes,be)<0)){Qt=Qt||!!be;var Ze=Bt.get(be)||Bt.set(be,{});Ze[Be]=re}}),{mainTypeSpecified:Qt,queryOptionMap:Bt,others:Ht}}var it={useDefault:!0,enableAll:!1,enableNone:!1},lt={useDefault:!1,enableAll:!0,enableNone:!0};function rt(wt,Pt,bt,Ot){Ot=Ot||it;var Bt=bt.index,Ht=bt.id,Qt=bt.name,re={models:null,specified:Bt!=null||Ht!=null||Qt!=null};if(!re.specified){var ye=void 0;return re.models=Ot.useDefault&&(ye=wt.getComponent(Pt))?[ye]:[],re}return Bt==="none"||Bt===!1?((0,F.hu)(Ot.enableNone,'`"none"` or `false` is not a valid value on index option.'),re.models=[],re):(Bt==="all"&&((0,F.hu)(Ot.enableAll,'`"all"` is not a valid value on index option.'),Bt=Ht=Qt=null),re.models=wt.queryComponents({mainType:Pt,index:Bt,id:Ht,name:Qt}),re)}function ct(wt,Pt,bt){wt.setAttribute?wt.setAttribute(Pt,bt):wt[Pt]=bt}function St(wt,Pt){return wt.getAttribute?wt.getAttribute(Pt):wt[Pt]}function at(wt){return wt==="auto"?dt.Z.domSupported?"html":"richText":wt||"html"}function mt(wt,Pt){var bt=(0,F.kW)(),Ot=[];return(0,F.S6)(wt,function(Bt){var Ht=Pt(Bt);(bt.get(Ht)||(Ot.push(Ht),bt.set(Ht,[]))).push(Bt)}),{keys:Ot,buckets:bt}}function Dt(wt,Pt,bt,Ot,Bt){var Ht=Pt==null||Pt==="auto";if(Ot==null)return Ot;if((0,F.hj)(Ot)){var Qt=vt(bt||0,Ot,Bt);return(0,q.NM)(Qt,Ht?Math.max((0,q.p8)(bt||0),(0,q.p8)(Ot)):Pt)}else{if((0,F.HD)(Ot))return Bt<1?bt:Ot;for(var re=[],ye=bt,he=Ot,be=Math.max(ye?ye.length:0,he.length),Be=0;Be<be;++Be){var Ze=wt.getDimensionInfo(Be);if(Ze&&Ze.type==="ordinal")re[Be]=(Bt<1&&ye?ye:he)[Be];else{var qe=ye&&ye[Be]?ye[Be]:0,pr=he[Be],Qt=vt(qe,pr,Bt);re[Be]=(0,q.NM)(Qt,Ht?Math.max((0,q.p8)(qe),(0,q.p8)(pr)):Pt)}}return re}}},97414:function(Pe,ee,z){z.d(ee,{FK:function(){return R},GM:function(){return gt},HD:function(){return Y},M9:function(){return ot},NM:function(){return xt},NU:function(){return yt},S$:function(){return H},VR:function(){return G},Xd:function(){return O},YM:function(){return st},ZB:function(){return tt},dt:function(){return nt},eJ:function(){return W},jj:function(){return P},kE:function(){return T},kx:function(){return K},mW:function(){return g},nR:function(){return k},nl:function(){return b},p8:function(){return Z},sG:function(){return j},wW:function(){return J},xW:function(){return X}});var F=z(70324),dt=1e-4,q=20;function vt(w){return w.replace(/^\s+|\s+$/g,"")}function yt(w,C,V,B){var ut=C[0],it=C[1],lt=V[0],rt=V[1],ct=it-ut,St=rt-lt;if(ct===0)return St===0?lt:(lt+rt)/2;if(B)if(ct>0){if(w<=ut)return lt;if(w>=it)return rt}else{if(w>=ut)return lt;if(w<=it)return rt}else{if(w===ut)return lt;if(w===it)return rt}return(w-ut)/ct*St+lt}function gt(w,C){switch(w){case"center":case"middle":w="50%";break;case"left":case"top":w="0%";break;case"right":case"bottom":w="100%";break}return F.HD(w)?vt(w).match(/%$/)?parseFloat(w)/100*C:parseFloat(w):w==null?NaN:+w}function xt(w,C,V){return C==null&&(C=10),C=Math.min(Math.max(0,C),q),w=(+w).toFixed(C),V?w:+w}function nt(w){return w.sort(function(C,V){return C-V}),w}function Z(w){if(w=+w,isNaN(w))return 0;if(w>1e-14){for(var C=1,V=0;V<15;V++,C*=10)if(Math.round(w*C)/C===w)return V}return tt(w)}function tt(w){var C=w.toString().toLowerCase(),V=C.indexOf("e"),B=V>0?+C.slice(V+1):0,ut=V>0?V:C.length,it=C.indexOf("."),lt=it<0?0:ut-1-it;return Math.max(0,lt-B)}function ot(w,C){var V=Math.log,B=Math.LN10,ut=Math.floor(V(w[1]-w[0])/B),it=Math.round(V(Math.abs(C[1]-C[0]))/B),lt=Math.min(Math.max(-ut+it,0),20);return isFinite(lt)?lt:20}function W(w,C,V){if(!w[C])return 0;var B=Y(w,V);return B[C]||0}function Y(w,C){var V=F.u4(w,function(wt,Pt){return wt+(isNaN(Pt)?0:Pt)},0);if(V===0)return[];for(var B=Math.pow(10,C),ut=F.UI(w,function(wt){return(isNaN(wt)?0:wt)/V*B*100}),it=B*100,lt=F.UI(ut,function(wt){return Math.floor(wt)}),rt=F.u4(lt,function(wt,Pt){return wt+Pt},0),ct=F.UI(ut,function(wt,Pt){return wt-lt[Pt]});rt<it;){for(var St=Number.NEGATIVE_INFINITY,at=null,mt=0,Dt=ct.length;mt<Dt;++mt)ct[mt]>St&&(St=ct[mt],at=mt);++lt[at],ct[at]=0,++rt}return F.UI(lt,function(wt){return wt/B})}function H(w,C){var V=Math.max(Z(w),Z(C)),B=w+C;return V>q?B:xt(B,V)}var st=9007199254740991;function J(w){var C=Math.PI*2;return(w%C+C)%C}function g(w){return w>-dt&&w<dt}var Q=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function j(w){if(w instanceof Date)return w;if(F.HD(w)){var C=Q.exec(w);if(!C)return new Date(NaN);if(C[8]){var V=+C[4]||0;return C[8].toUpperCase()!=="Z"&&(V-=+C[8].slice(0,3)),new Date(Date.UTC(+C[1],+(C[2]||1)-1,+C[3]||1,V,+(C[5]||0),+C[6]||0,C[7]?+C[7].substring(0,3):0))}else return new Date(+C[1],+(C[2]||1)-1,+C[3]||1,+C[4]||0,+(C[5]||0),+C[6]||0,C[7]?+C[7].substring(0,3):0)}else if(w==null)return new Date(NaN);return new Date(Math.round(w))}function O(w){return Math.pow(10,X(w))}function X(w){if(w===0)return 0;var C=Math.floor(Math.log(w)/Math.LN10);return w/Math.pow(10,C)>=10&&C++,C}function K(w,C){var V=X(w),B=Math.pow(10,V),ut=w/B,it;return C?ut<1.5?it=1:ut<2.5?it=2:ut<4?it=3:ut<7?it=5:it=10:ut<1?it=1:ut<2?it=2:ut<3?it=3:ut<5?it=5:it=10,w=it*B,V>=-20?+w.toFixed(V<0?-V:0):w}function G(w,C){var V=(w.length-1)*C+1,B=Math.floor(V),ut=+w[B-1],it=V-B;return it?ut+it*(w[B]-ut):ut}function k(w){w.sort(function(ct,St){return rt(ct,St,0)?-1:1});for(var C=-1/0,V=1,B=0;B<w.length;){for(var ut=w[B].interval,it=w[B].close,lt=0;lt<2;lt++)ut[lt]<=C&&(ut[lt]=C,it[lt]=lt?1:1-V),C=ut[lt],V=it[lt];ut[0]===ut[1]&&it[0]*it[1]!==1?w.splice(B,1):B++}return w;function rt(ct,St,at){return ct.interval[at]<St.interval[at]||ct.interval[at]===St.interval[at]&&(ct.close[at]-St.close[at]===(at?-1:1)||!at&&rt(ct,St,1))}}function R(w){var C=parseFloat(w);return C==w&&(C!==0||!F.HD(w)||w.indexOf("x")<=0)?C:NaN}function T(w){return!isNaN(R(w))}function P(){return Math.round(Math.random()*9)}function M(w,C){return C===0?w:M(C,w%C)}function b(w,C){return w==null?C:C==null?w:w*C/M(w,C)}},58833:function(Pe,ee,z){z.d(ee,{$l:function(){return pr},Av:function(){return le},C5:function(){return Vr},CX:function(){return W},Gl:function(){return it},Hg:function(){return O},Ib:function(){return Dr},JQ:function(){return X},Ki:function(){return Q},L1:function(){return H},MA:function(){return Dt},Mh:function(){return Ot},Nj:function(){return Vt},RW:function(){return Fe},SJ:function(){return re},SX:function(){return Bt},T5:function(){return he},UL:function(){return Ze},VP:function(){return Ht},WO:function(){return He},XX:function(){return Qt},aG:function(){return Xt},ci:function(){return Sr},e9:function(){return ie},fD:function(){return bt},iK:function(){return K},k5:function(){return or},oJ:function(){return qe},og:function(){return Or},qc:function(){return st},th:function(){return Ee},vF:function(){return sn},wU:function(){return Y},xp:function(){return $t},xr:function(){return wr},yx:function(){return j},zI:function(){return Be},zr:function(){return J}});var F=z(86280),dt=z(70324),q=z(98845),vt=z(96170),yt=z(21611),gt=z(66210),xt=1,nt={},Z=(0,yt.Yf)(),tt=(0,yt.Yf)(),ot=0,W=1,Y=2,H=["emphasis","blur","select"],st=["normal","emphasis","blur","select"],J=10,g=9,Q="highlight",j="downplay",O="select",X="unselect",K="toggleSelect";function G(Zt){return Zt!=null&&Zt!=="none"}var k=new F.ZP(100);function R(Zt){if((0,dt.HD)(Zt)){var pe=k.get(Zt);return pe||(pe=vt.lift(Zt,-.1),k.put(Zt,pe)),pe}else if((0,dt.Qq)(Zt)){var ve=(0,dt.l7)({},Zt);return ve.colorStops=(0,dt.UI)(Zt.colorStops,function(we){return{offset:we.offset,color:vt.lift(we.color,-.1)}}),ve}return Zt}function T(Zt,pe,ve){Zt.onHoverStateChange&&(Zt.hoverState||0)!==ve&&Zt.onHoverStateChange(pe),Zt.hoverState=ve}function P(Zt){T(Zt,"emphasis",Y)}function M(Zt){Zt.hoverState===Y&&T(Zt,"normal",ot)}function b(Zt){T(Zt,"blur",W)}function w(Zt){Zt.hoverState===W&&T(Zt,"normal",ot)}function C(Zt){Zt.selected=!0}function V(Zt){Zt.selected=!1}function B(Zt,pe,ve){pe(Zt,ve)}function ut(Zt,pe,ve){B(Zt,pe,ve),Zt.isGroup&&Zt.traverse(function(we){B(we,pe,ve)})}function it(Zt,pe){switch(pe){case"emphasis":Zt.hoverState=Y;break;case"normal":Zt.hoverState=ot;break;case"blur":Zt.hoverState=W;break;case"select":Zt.selected=!0}}function lt(Zt){Zt.isGroup?Zt.traverse(function(pe){pe.clearStates()}):Zt.clearStates()}function rt(Zt,pe,ve,we){for(var Ue=Zt.style,ur={},gr=0;gr<pe.length;gr++){var Ir=pe[gr],hn=Ue[Ir];ur[Ir]=hn==null?we&&we[Ir]:hn}for(var gr=0;gr<Zt.animators.length;gr++){var Rr=Zt.animators[gr];Rr.__fromStateTransition&&Rr.__fromStateTransition.indexOf(ve)<0&&Rr.targetName==="style"&&Rr.saveTo(ur,pe)}return ur}function ct(Zt,pe,ve,we){var Ue=ve&&(0,dt.cq)(ve,"select")>=0,ur=!1;if(Zt instanceof gt.ZP){var gr=Z(Zt),Ir=Ue&&gr.selectFill||gr.normalFill,hn=Ue&&gr.selectStroke||gr.normalStroke;if(G(Ir)||G(hn)){we=we||{};var Rr=we.style||{};Rr.fill==="inherit"?(ur=!0,we=(0,dt.l7)({},we),Rr=(0,dt.l7)({},Rr),Rr.fill=Ir):!G(Rr.fill)&&G(Ir)?(ur=!0,we=(0,dt.l7)({},we),Rr=(0,dt.l7)({},Rr),Rr.fill=R(Ir)):!G(Rr.stroke)&&G(hn)&&(ur||(we=(0,dt.l7)({},we),Rr=(0,dt.l7)({},Rr)),Rr.stroke=R(hn)),we.style=Rr}}if(we&&we.z2==null){ur||(we=(0,dt.l7)({},we));var Nn=Zt.z2EmphasisLift;we.z2=Zt.z2+(Nn!=null?Nn:J)}return we}function St(Zt,pe,ve){if(ve&&ve.z2==null){ve=(0,dt.l7)({},ve);var we=Zt.z2SelectLift;ve.z2=Zt.z2+(we!=null?we:g)}return ve}function at(Zt,pe,ve){var we=(0,dt.cq)(Zt.currentStates,pe)>=0,Ue=Zt.style.opacity,ur=we?null:rt(Zt,["opacity"],pe,{opacity:1});ve=ve||{};var gr=ve.style||{};return gr.opacity==null&&(ve=(0,dt.l7)({},ve),gr=(0,dt.l7)({opacity:we?Ue:ur.opacity*.1},gr),ve.style=gr),ve}function mt(Zt,pe){var ve=this.states[Zt];if(this.style){if(Zt==="emphasis")return ct(this,Zt,pe,ve);if(Zt==="blur")return at(this,Zt,ve);if(Zt==="select")return St(this,Zt,ve)}return ve}function Dt(Zt){Zt.stateProxy=mt;var pe=Zt.getTextContent(),ve=Zt.getTextGuideLine();pe&&(pe.stateProxy=mt),ve&&(ve.stateProxy=mt)}function wt(Zt,pe){!ye(Zt,pe)&&!Zt.__highByOuter&&ut(Zt,P)}function Pt(Zt,pe){!ye(Zt,pe)&&!Zt.__highByOuter&&ut(Zt,M)}function bt(Zt,pe){Zt.__highByOuter|=1<<(pe||0),ut(Zt,P)}function Ot(Zt,pe){!(Zt.__highByOuter&=~(1<<(pe||0)))&&ut(Zt,M)}function Bt(Zt){ut(Zt,b)}function Ht(Zt){ut(Zt,w)}function Qt(Zt){ut(Zt,C)}function re(Zt){ut(Zt,V)}function ye(Zt,pe){return Zt.__highDownSilentOnTouch&&pe.zrByTouch}function he(Zt){var pe=Zt.getModel(),ve=[],we=[];pe.eachComponent(function(Ue,ur){var gr=tt(ur),Ir=Ue==="series",hn=Ir?Zt.getViewOfSeriesModel(ur):Zt.getViewOfComponentModel(ur);!Ir&&we.push(hn),gr.isBlured&&(hn.group.traverse(function(Rr){w(Rr)}),Ir&&ve.push(ur)),gr.isBlured=!1}),(0,dt.S6)(we,function(Ue){Ue&&Ue.toggleBlurSeries&&Ue.toggleBlurSeries(ve,!1,pe)})}function be(Zt,pe,ve,we){var Ue=we.getModel();ve=ve||"coordinateSystem";function ur(Rr,Nn){for(var Vn=0;Vn<Nn.length;Vn++){var yi=Rr.getItemGraphicEl(Nn[Vn]);yi&&Ht(yi)}}if(Zt!=null&&!(!pe||pe==="none")){var gr=Ue.getSeriesByIndex(Zt),Ir=gr.coordinateSystem;Ir&&Ir.master&&(Ir=Ir.master);var hn=[];Ue.eachSeries(function(Rr){var Nn=gr===Rr,Vn=Rr.coordinateSystem;Vn&&Vn.master&&(Vn=Vn.master);var yi=Vn&&Ir?Vn===Ir:Nn;if(!(ve==="series"&&!Nn||ve==="coordinateSystem"&&!yi||pe==="series"&&Nn)){var Fi=we.getViewOfSeriesModel(Rr);if(Fi.group.traverse(function(eo){b(eo)}),(0,dt.zG)(pe))ur(Rr.getData(),pe);else if((0,dt.Kn)(pe))for(var Ci=(0,dt.XP)(pe),ri=0;ri<Ci.length;ri++)ur(Rr.getData(Ci[ri]),pe[Ci[ri]]);hn.push(Rr),tt(Rr).isBlured=!0}}),Ue.eachComponent(function(Rr,Nn){if(Rr!=="series"){var Vn=we.getViewOfComponentModel(Nn);Vn&&Vn.toggleBlurSeries&&Vn.toggleBlurSeries(hn,!0,Ue)}})}}function Be(Zt,pe,ve){if(!(Zt==null||pe==null)){var we=ve.getModel().getComponent(Zt,pe);if(we){tt(we).isBlured=!0;var Ue=ve.getViewOfComponentModel(we);!Ue||!Ue.focusBlurEnabled||Ue.group.traverse(function(ur){b(ur)})}}}function Ze(Zt,pe,ve){var we=Zt.seriesIndex,Ue=Zt.getData(pe.dataType);if(Ue){var ur=(0,yt.gO)(Ue,pe);ur=((0,dt.kJ)(ur)?ur[0]:ur)||0;var gr=Ue.getItemGraphicEl(ur);if(!gr)for(var Ir=Ue.count(),hn=0;!gr&&hn<Ir;)gr=Ue.getItemGraphicEl(hn++);if(gr){var Rr=(0,q.A)(gr);be(we,Rr.focus,Rr.blurScope,ve)}else{var Nn=Zt.get(["emphasis","focus"]),Vn=Zt.get(["emphasis","blurScope"]);Nn!=null&&be(we,Nn,Vn,ve)}}}function qe(Zt,pe,ve,we){var Ue={focusSelf:!1,dispatchers:null};if(Zt==null||Zt==="series"||pe==null||ve==null)return Ue;var ur=we.getModel().getComponent(Zt,pe);if(!ur)return Ue;var gr=we.getViewOfComponentModel(ur);if(!gr||!gr.findHighDownDispatchers)return Ue;for(var Ir=gr.findHighDownDispatchers(ve),hn,Rr=0;Rr<Ir.length;Rr++)if((0,q.A)(Ir[Rr]).focus==="self"){hn=!0;break}return{focusSelf:hn,dispatchers:Ir}}function pr(Zt,pe,ve){var we=(0,q.A)(Zt),Ue=qe(we.componentMainType,we.componentIndex,we.componentHighDownName,ve),ur=Ue.dispatchers,gr=Ue.focusSelf;ur?(gr&&Be(we.componentMainType,we.componentIndex,ve),(0,dt.S6)(ur,function(Ir){return wt(Ir,pe)})):(be(we.seriesIndex,we.focus,we.blurScope,ve),we.focus==="self"&&Be(we.componentMainType,we.componentIndex,ve),wt(Zt,pe))}function wr(Zt,pe,ve){he(ve);var we=(0,q.A)(Zt),Ue=qe(we.componentMainType,we.componentIndex,we.componentHighDownName,ve).dispatchers;Ue?(0,dt.S6)(Ue,function(ur){return Pt(ur,pe)}):Pt(Zt,pe)}function Or(Zt,pe,ve){if(Xt(pe)){var we=pe.dataType,Ue=Zt.getData(we),ur=(0,yt.gO)(Ue,pe);(0,dt.kJ)(ur)||(ur=[ur]),Zt[pe.type===K?"toggleSelect":pe.type===O?"select":"unselect"](ur,we)}}function Sr(Zt){var pe=Zt.getAllData();(0,dt.S6)(pe,function(ve){var we=ve.data,Ue=ve.type;we.eachItemGraphicEl(function(ur,gr){Zt.isSelected(gr,Ue)?Qt(ur):re(ur)})})}function Vr(Zt){var pe=[];return Zt.eachSeries(function(ve){var we=ve.getAllData();(0,dt.S6)(we,function(Ue){var ur=Ue.data,gr=Ue.type,Ir=ve.getSelectedDataIndices();if(Ir.length>0){var hn={dataIndex:Ir,seriesIndex:ve.seriesIndex};gr!=null&&(hn.dataType=gr),pe.push(hn)}})}),pe}function sn(Zt,pe,ve){Vt(Zt,!0),ut(Zt,Dt),Dr(Zt,pe,ve)}function cr(Zt){Vt(Zt,!1)}function or(Zt,pe,ve,we){we?cr(Zt):sn(Zt,pe,ve)}function Dr(Zt,pe,ve){var we=(0,q.A)(Zt);pe!=null?(we.focus=pe,we.blurScope=ve):we.focus&&(we.focus=null)}var ze=["emphasis","blur","select"],Ne={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function He(Zt,pe,ve,we){ve=ve||"itemStyle";for(var Ue=0;Ue<ze.length;Ue++){var ur=ze[Ue],gr=pe.getModel([ur,ve]),Ir=Zt.ensureState(ur);Ir.style=we?we(gr):gr[Ne[ve]]()}}function Vt(Zt,pe){var ve=pe===!1,we=Zt;Zt.highDownSilentOnTouch&&(we.__highDownSilentOnTouch=Zt.highDownSilentOnTouch),(!ve||we.__highDownDispatcher)&&(we.__highByOuter=we.__highByOuter||0,we.__highDownDispatcher=!ve)}function le(Zt){return!!(Zt&&Zt.__highDownDispatcher)}function Ee(Zt,pe,ve){var we=(0,q.A)(Zt);we.componentMainType=pe.mainType,we.componentIndex=pe.componentIndex,we.componentHighDownName=ve}function Fe(Zt){var pe=nt[Zt];return pe==null&&xt<=32&&(pe=nt[Zt]=xt++),pe}function Xt(Zt){var pe=Zt.type;return pe===O||pe===X||pe===K}function $t(Zt){var pe=Zt.type;return pe===Q||pe===j}function ie(Zt){var pe=Z(Zt);pe.normalFill=Zt.style.fill,pe.normalStroke=Zt.style.stroke;var ve=Zt.states.select||{};pe.selectFill=ve.style&&ve.style.fill||null,pe.selectStroke=ve.style&&ve.style.stroke||null}},54373:function(Pe,ee,z){z.d(ee,{Cq:function(){return X},Pw:function(){return J},th:function(){return j},zp:function(){return O}});var F=z(70324),dt=z(66210),q=z(40596),vt=z(73909),yt=z(16513),gt=z(74071),xt=z(16128),nt=z(98733),Z=z(97414),tt=dt.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(K,G){var k=G.cx,R=G.cy,T=G.width/2,P=G.height/2;K.moveTo(k,R-P),K.lineTo(k+T,R+P),K.lineTo(k-T,R+P),K.closePath()}}),ot=dt.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(K,G){var k=G.cx,R=G.cy,T=G.width/2,P=G.height/2;K.moveTo(k,R-P),K.lineTo(k+T,R),K.lineTo(k,R+P),K.lineTo(k-T,R),K.closePath()}}),W=dt.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(K,G){var k=G.x,R=G.y,T=G.width/5*3,P=Math.max(T,G.height),M=T/2,b=M*M/(P-M),w=R-P+M+b,C=Math.asin(b/M),V=Math.cos(C)*M,B=Math.sin(C),ut=Math.cos(C),it=M*.6,lt=M*.7;K.moveTo(k-V,w+b),K.arc(k,w,M,Math.PI-C,Math.PI*2+C),K.bezierCurveTo(k+V-B*it,w+b+ut*it,k,R-lt,k,R),K.bezierCurveTo(k,R-lt,k-V+B*it,w+b+ut*it,k-V,w+b),K.closePath()}}),Y=dt.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(K,G){var k=G.height,R=G.width,T=G.x,P=G.y,M=R/3*2;K.moveTo(T,P),K.lineTo(T+M,P+k),K.lineTo(T,P+k/4*3),K.lineTo(T-M,P+k),K.lineTo(T,P),K.closePath()}}),H={line:q.Z,rect:vt.Z,roundRect:vt.Z,square:vt.Z,circle:yt.Z,diamond:ot,pin:W,arrow:Y,triangle:tt},st={line:function(K,G,k,R,T){T.x1=K,T.y1=G+R/2,T.x2=K+k,T.y2=G+R/2},rect:function(K,G,k,R,T){T.x=K,T.y=G,T.width=k,T.height=R},roundRect:function(K,G,k,R,T){T.x=K,T.y=G,T.width=k,T.height=R,T.r=Math.min(k,R)/4},square:function(K,G,k,R,T){var P=Math.min(k,R);T.x=K,T.y=G,T.width=P,T.height=P},circle:function(K,G,k,R,T){T.cx=K+k/2,T.cy=G+R/2,T.r=Math.min(k,R)/2},diamond:function(K,G,k,R,T){T.cx=K+k/2,T.cy=G+R/2,T.width=k,T.height=R},pin:function(K,G,k,R,T){T.x=K+k/2,T.y=G+R/2,T.width=k,T.height=R},arrow:function(K,G,k,R,T){T.x=K+k/2,T.y=G+R/2,T.width=k,T.height=R},triangle:function(K,G,k,R,T){T.cx=K+k/2,T.cy=G+R/2,T.width=k,T.height=R}},J={};(0,F.S6)(H,function(K,G){J[G]=new K});var g=dt.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(K,G,k){var R=(0,nt.wI)(K,G,k),T=this.shape;return T&&T.symbolType==="pin"&&G.position==="inside"&&(R.y=k.y+k.height*.4),R},buildPath:function(K,G,k){var R=G.symbolType;if(R!=="none"){var T=J[R];T||(R="rect",T=J[R]),st[R](G.x,G.y,G.width,G.height,T.shape),T.buildPath(K,T.shape,k)}}});function Q(K,G){if(this.type!=="image"){var k=this.style;this.__isEmptyBrush?(k.stroke=K,k.fill=G||"#fff",k.lineWidth=2):this.shape.symbolType==="line"?k.stroke=K:k.fill=K,this.markRedraw()}}function j(K,G,k,R,T,P,M){var b=K.indexOf("empty")===0;b&&(K=K.substr(5,1).toLowerCase()+K.substr(6));var w;return K.indexOf("image://")===0?w=gt.makeImage(K.slice(8),new xt.Z(G,k,R,T),M?"center":"cover"):K.indexOf("path://")===0?w=gt.makePath(K.slice(7),{},new xt.Z(G,k,R,T),M?"center":"cover"):w=new g({shape:{symbolType:K,x:G,y:k,width:R,height:T}}),w.__isEmptyBrush=b,w.setColor=Q,P&&w.setColor(P),w}function O(K){return(0,F.kJ)(K)||(K=[+K,+K]),[K[0]||0,K[1]||0]}function X(K,G){if(K!=null)return(0,F.kJ)(K)||(K=[K,K]),[(0,Z.GM)(K[0],G[0])||0,(0,Z.GM)((0,F.pD)(K[1],K[0]),G[1])||0]}},39783:function(Pe,ee,z){z.d(ee,{P2:function(){return vt},T9:function(){return yt},ZH:function(){return gt}});var F="\0__throttleOriginMethod",dt="\0__throttleRate",q="\0__throttleType";function vt(xt,nt,Z){var tt,ot=0,W=0,Y=null,H,st,J,g;nt=nt||0;function Q(){W=new Date().getTime(),Y=null,xt.apply(st,J||[])}var j=function(){for(var O=[],X=0;X<arguments.length;X++)O[X]=arguments[X];tt=new Date().getTime(),st=this,J=O;var K=g||nt,G=g||Z;g=null,H=tt-(G?ot:W)-K,clearTimeout(Y),G?Y=setTimeout(Q,K):H>=0?Q():Y=setTimeout(Q,-H),ot=tt};return j.clear=function(){Y&&(clearTimeout(Y),Y=null)},j.debounceNextCall=function(O){g=O},j}function yt(xt,nt,Z,tt){var ot=xt[nt];if(ot){var W=ot[F]||ot,Y=ot[q],H=ot[dt];if(H!==Z||Y!==tt){if(Z==null||!tt)return xt[nt]=W;ot=xt[nt]=vt(W,Z,tt==="debounce"),ot[F]=W,ot[q]=tt,ot[dt]=Z}return ot}}function gt(xt,nt){var Z=xt[nt];Z&&Z[F]&&(Z.clear&&Z.clear(),xt[nt]=Z[F])}},48295:function(Pe,ee,z){z.d(ee,{$K:function(){return g},CW:function(){return k},En:function(){return B},FW:function(){return H},MV:function(){return M},P5:function(){return Z},RZ:function(){return b},Tj:function(){return J},V8:function(){return W},WT:function(){return yt},WU:function(){return j},Wp:function(){return T},cb:function(){return lt},dV:function(){return xt},eN:function(){return ut},f5:function(){return V},fn:function(){return P},k7:function(){return O},q5:function(){return K},rM:function(){return it},s2:function(){return nt},sx:function(){return G},vh:function(){return C},vk:function(){return st},xC:function(){return Q},xL:function(){return w},xz:function(){return R},yR:function(){return gt}});var F=z(70324),dt=z(97414),q=z(57338),vt=z(97853),yt=1e3,gt=yt*60,xt=gt*60,nt=xt*24,Z=nt*365,tt={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},ot="{yyyy}-{MM}-{dd}",W={year:"{yyyy}",month:"{yyyy}-{MM}",day:ot,hour:ot+" "+tt.hour,minute:ot+" "+tt.minute,second:ot+" "+tt.second,millisecond:tt.none},Y=["year","month","day","hour","minute","second","millisecond"],H=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function st(rt,ct){return rt+="","0000".substr(0,ct-rt.length)+rt}function J(rt){switch(rt){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return rt}}function g(rt){return rt===J(rt)}function Q(rt){switch(rt){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function j(rt,ct,St,at){var mt=dt.sG(rt),Dt=mt[G(St)](),wt=mt[k(St)]()+1,Pt=Math.floor((wt-1)/3)+1,bt=mt[R(St)](),Ot=mt["get"+(St?"UTC":"")+"Day"](),Bt=mt[T(St)](),Ht=(Bt-1)%12+1,Qt=mt[P(St)](),re=mt[M(St)](),ye=mt[b(St)](),he=at instanceof vt.Z?at:(0,q.G8)(at||q.sO)||(0,q.Li)(),be=he.getModel("time"),Be=be.get("month"),Ze=be.get("monthAbbr"),qe=be.get("dayOfWeek"),pr=be.get("dayOfWeekAbbr");return(ct||"").replace(/{yyyy}/g,Dt+"").replace(/{yy}/g,Dt%100+"").replace(/{Q}/g,Pt+"").replace(/{MMMM}/g,Be[wt-1]).replace(/{MMM}/g,Ze[wt-1]).replace(/{MM}/g,st(wt,2)).replace(/{M}/g,wt+"").replace(/{dd}/g,st(bt,2)).replace(/{d}/g,bt+"").replace(/{eeee}/g,qe[Ot]).replace(/{ee}/g,pr[Ot]).replace(/{e}/g,Ot+"").replace(/{HH}/g,st(Bt,2)).replace(/{H}/g,Bt+"").replace(/{hh}/g,st(Ht+"",2)).replace(/{h}/g,Ht+"").replace(/{mm}/g,st(Qt,2)).replace(/{m}/g,Qt+"").replace(/{ss}/g,st(re,2)).replace(/{s}/g,re+"").replace(/{SSS}/g,st(ye,3)).replace(/{S}/g,ye+"")}function O(rt,ct,St,at,mt){var Dt=null;if(F.HD(St))Dt=St;else if(F.mf(St))Dt=St(rt.value,ct,{level:rt.level});else{var wt=F.l7({},tt);if(rt.level>0)for(var Pt=0;Pt<Y.length;++Pt)wt[Y[Pt]]="{primary|"+wt[Y[Pt]]+"}";var bt=St?St.inherit===!1?St:F.ce(St,wt):wt,Ot=X(rt.value,mt);if(bt[Ot])Dt=bt[Ot];else if(bt.inherit){for(var Bt=H.indexOf(Ot),Pt=Bt-1;Pt>=0;--Pt)if(bt[Ot]){Dt=bt[Ot];break}Dt=Dt||wt.none}if(F.kJ(Dt)){var Ht=rt.level==null?0:rt.level>=0?rt.level:Dt.length+rt.level;Ht=Math.min(Ht,Dt.length-1),Dt=Dt[Ht]}}return j(new Date(rt.value),Dt,mt,at)}function X(rt,ct){var St=dt.sG(rt),at=St[k(ct)]()+1,mt=St[R(ct)](),Dt=St[T(ct)](),wt=St[P(ct)](),Pt=St[M(ct)](),bt=St[b(ct)](),Ot=bt===0,Bt=Ot&&Pt===0,Ht=Bt&&wt===0,Qt=Ht&&Dt===0,re=Qt&&mt===1,ye=re&&at===1;return ye?"year":re?"month":Qt?"day":Ht?"hour":Bt?"minute":Ot?"second":"millisecond"}function K(rt,ct,St){var at=F.hj(rt)?dt.sG(rt):rt;switch(ct=ct||X(rt,St),ct){case"year":return at[G(St)]();case"half-year":return at[k(St)]()>=6?1:0;case"quarter":return Math.floor((at[k(St)]()+1)/4);case"month":return at[k(St)]();case"day":return at[R(St)]();case"half-day":return at[T(St)]()/24;case"hour":return at[T(St)]();case"minute":return at[P(St)]();case"second":return at[M(St)]();case"millisecond":return at[b(St)]()}}function G(rt){return rt?"getUTCFullYear":"getFullYear"}function k(rt){return rt?"getUTCMonth":"getMonth"}function R(rt){return rt?"getUTCDate":"getDate"}function T(rt){return rt?"getUTCHours":"getHours"}function P(rt){return rt?"getUTCMinutes":"getMinutes"}function M(rt){return rt?"getUTCSeconds":"getSeconds"}function b(rt){return rt?"getUTCMilliseconds":"getMilliseconds"}function w(rt){return rt?"setUTCFullYear":"setFullYear"}function C(rt){return rt?"setUTCMonth":"setMonth"}function V(rt){return rt?"setUTCDate":"setDate"}function B(rt){return rt?"setUTCHours":"setHours"}function ut(rt){return rt?"setUTCMinutes":"setMinutes"}function it(rt){return rt?"setUTCSeconds":"setSeconds"}function lt(rt){return rt?"setUTCMilliseconds":"setMilliseconds"}},27674:function(Pe,ee,z){z.d(ee,{J5:function(){return xt},RA:function(){return nt},Wc:function(){return tt},XD:function(){return vt},cy:function(){return q},f7:function(){return dt},fY:function(){return Z},hL:function(){return gt},qb:function(){return yt}});var F=z(70324),dt=(0,F.kW)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),q="original",vt="arrayRows",yt="objectRows",gt="keyedColumns",xt="typedArray",nt="unknown",Z="column",tt="row"},35131:function(Pe,ee,z){z.d(ee,{o:function(){return vt}});var F=z(70324),dt=typeof Float32Array!="undefined",q=dt?Float32Array:Array;function vt(yt){return(0,F.kJ)(yt)?dt?new Float32Array(yt):yt:new q(yt)}},57839:function(Pe,ee,z){var F=z(70324),dt=z(2574),q=z(95827),vt=z(71619),yt=z(21611),gt=z(58833),xt=z(85966),nt=z(22004),Z=z(74071),tt=yt.Yf(),ot=(0,nt.Z)(),W=function(){function Q(){this.group=new dt.Z,this.uid=q.Kr("viewChart"),this.renderTask=(0,xt.v)({plan:st,reset:J}),this.renderTask.context={view:this}}return Q.prototype.init=function(j,O){},Q.prototype.render=function(j,O,X,K){},Q.prototype.highlight=function(j,O,X,K){var G=j.getData(K&&K.dataType);G&&H(G,K,"emphasis")},Q.prototype.downplay=function(j,O,X,K){var G=j.getData(K&&K.dataType);G&&H(G,K,"normal")},Q.prototype.remove=function(j,O){this.group.removeAll()},Q.prototype.dispose=function(j,O){},Q.prototype.updateView=function(j,O,X,K){this.render(j,O,X,K)},Q.prototype.updateLayout=function(j,O,X,K){this.render(j,O,X,K)},Q.prototype.updateVisual=function(j,O,X,K){this.render(j,O,X,K)},Q.prototype.eachRendered=function(j){(0,Z.traverseElements)(this.group,j)},Q.markUpdateMethod=function(j,O){tt(j).updateMethod=O},Q.protoInitialize=function(){var j=Q.prototype;j.type="chart"}(),Q}();function Y(Q,j,O){Q&&(0,gt.Av)(Q)&&(j==="emphasis"?gt.fD:gt.Mh)(Q,O)}function H(Q,j,O){var X=yt.gO(Q,j),K=j&&j.highlightKey!=null?(0,gt.RW)(j.highlightKey):null;X!=null?(0,F.S6)(yt.kF(X),function(G){Y(Q.getItemGraphicEl(G),O,K)}):Q.eachItemGraphicEl(function(G){Y(G,O,K)})}vt.dm(W,["dispose"]),vt.au(W);function st(Q){return ot(Q.model)}function J(Q){var j=Q.model,O=Q.ecModel,X=Q.api,K=Q.payload,G=j.pipelineContext.progressiveRender,k=Q.view,R=K&&tt(K).updateMethod,T=G?"incrementalPrepareRender":R&&k[R]?R:"render";return T!=="render"&&k[T](j,O,X,K),g[T]}var g={incrementalPrepareRender:{progress:function(Q,j){j.view.incrementalRender(Q,j.model,j.ecModel,j.api,j.payload)}},render:{forceFirstProgress:!0,progress:function(Q,j){j.view.render(j.model,j.ecModel,j.api,j.payload)}}};ee.Z=W},70296:function(Pe,ee,z){var F=z(2574),dt=z(95827),q=z(71619),vt=function(){function yt(){this.group=new F.Z,this.uid=dt.Kr("viewComponent")}return yt.prototype.init=function(gt,xt){},yt.prototype.render=function(gt,xt,nt,Z){},yt.prototype.dispose=function(gt,xt){},yt.prototype.updateView=function(gt,xt,nt,Z){},yt.prototype.updateLayout=function(gt,xt,nt,Z){},yt.prototype.updateVisual=function(gt,xt,nt,Z){},yt.prototype.toggleBlurSeries=function(gt,xt,nt){},yt.prototype.eachRendered=function(gt){var xt=this.group;xt&&xt.traverse(gt)},yt}();q.dm(vt),q.au(vt),ee.Z=vt},53331:function(Pe,ee,z){z.d(ee,{LZ:function(){return q},Or:function(){return F},UL:function(){return dt}});function F(vt,yt,gt){switch(gt){case"color":var xt=vt.getItemVisual(yt,"style");return xt[vt.getVisual("drawType")];case"opacity":return vt.getItemVisual(yt,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return vt.getItemVisual(yt,gt);default:}}function dt(vt,yt){switch(yt){case"color":var gt=vt.getVisual("style");return gt[vt.getVisual("drawType")];case"opacity":return vt.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return vt.getVisual(yt);default:}}function q(vt,yt,gt,xt){switch(gt){case"color":var nt=vt.ensureUniqueItemVisual(yt,"style");nt[vt.getVisual("drawType")]=xt,vt.setItemVisual(yt,"colorFromPalette",!1);break;case"opacity":vt.ensureUniqueItemVisual(yt,"style").opacity=xt;break;case"symbol":case"symbolSize":case"liftZ":vt.setItemVisual(yt,gt,xt);break;default:}}},12012:function(Pe,ee,z){z.d(ee,{ZT:function(){return dt}});var F=function(P,M){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(b[C]=w[C])},F(P,M)};function dt(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");F(P,M);function b(){this.constructor=P}P.prototype=M===null?Object.create(M):(b.prototype=M.prototype,new b)}var q=function(){return q=Object.assign||function(M){for(var b,w=1,C=arguments.length;w<C;w++){b=arguments[w];for(var V in b)Object.prototype.hasOwnProperty.call(b,V)&&(M[V]=b[V])}return M},q.apply(this,arguments)};function vt(P,M){var b={};for(var w in P)Object.prototype.hasOwnProperty.call(P,w)&&M.indexOf(w)<0&&(b[w]=P[w]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,w=Object.getOwnPropertySymbols(P);C<w.length;C++)M.indexOf(w[C])<0&&Object.prototype.propertyIsEnumerable.call(P,w[C])&&(b[w[C]]=P[w[C]]);return b}function yt(P,M,b,w){var C=arguments.length,V=C<3?M:w===null?w=Object.getOwnPropertyDescriptor(M,b):w,B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(P,M,b,w);else for(var ut=P.length-1;ut>=0;ut--)(B=P[ut])&&(V=(C<3?B(V):C>3?B(M,b,V):B(M,b))||V);return C>3&&V&&Object.defineProperty(M,b,V),V}function gt(P,M){return function(b,w){M(b,w,P)}}function xt(P,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(P,M)}function nt(P,M,b,w){function C(V){return V instanceof b?V:new b(function(B){B(V)})}return new(b||(b=Promise))(function(V,B){function ut(rt){try{lt(w.next(rt))}catch(ct){B(ct)}}function it(rt){try{lt(w.throw(rt))}catch(ct){B(ct)}}function lt(rt){rt.done?V(rt.value):C(rt.value).then(ut,it)}lt((w=w.apply(P,M||[])).next())})}function Z(P,M){var b={label:0,sent:function(){if(V[0]&1)throw V[1];return V[1]},trys:[],ops:[]},w,C,V,B;return B={next:ut(0),throw:ut(1),return:ut(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function ut(lt){return function(rt){return it([lt,rt])}}function it(lt){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,C&&(V=lt[0]&2?C.return:lt[0]?C.throw||((V=C.return)&&V.call(C),0):C.next)&&!(V=V.call(C,lt[1])).done)return V;switch(C=0,V&&(lt=[lt[0]&2,V.value]),lt[0]){case 0:case 1:V=lt;break;case 4:return b.label++,{value:lt[1],done:!1};case 5:b.label++,C=lt[1],lt=[0];continue;case 7:lt=b.ops.pop(),b.trys.pop();continue;default:if(V=b.trys,!(V=V.length>0&&V[V.length-1])&&(lt[0]===6||lt[0]===2)){b=0;continue}if(lt[0]===3&&(!V||lt[1]>V[0]&&lt[1]<V[3])){b.label=lt[1];break}if(lt[0]===6&&b.label<V[1]){b.label=V[1],V=lt;break}if(V&&b.label<V[2]){b.label=V[2],b.ops.push(lt);break}V[2]&&b.ops.pop(),b.trys.pop();continue}lt=M.call(P,b)}catch(rt){lt=[6,rt],C=0}finally{w=V=0}if(lt[0]&5)throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}}var tt=Object.create?function(P,M,b,w){w===void 0&&(w=b),Object.defineProperty(P,w,{enumerable:!0,get:function(){return M[b]}})}:function(P,M,b,w){w===void 0&&(w=b),P[w]=M[b]};function ot(P,M){for(var b in P)b!=="default"&&!Object.prototype.hasOwnProperty.call(M,b)&&tt(M,P,b)}function W(P){var M=typeof Symbol=="function"&&Symbol.iterator,b=M&&P[M],w=0;if(b)return b.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&w>=P.length&&(P=void 0),{value:P&&P[w++],done:!P}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(P,M){var b=typeof Symbol=="function"&&P[Symbol.iterator];if(!b)return P;var w=b.call(P),C,V=[],B;try{for(;(M===void 0||M-- >0)&&!(C=w.next()).done;)V.push(C.value)}catch(ut){B={error:ut}}finally{try{C&&!C.done&&(b=w.return)&&b.call(w)}finally{if(B)throw B.error}}return V}function H(){for(var P=[],M=0;M<arguments.length;M++)P=P.concat(Y(arguments[M]));return P}function st(){for(var P=0,M=0,b=arguments.length;M<b;M++)P+=arguments[M].length;for(var w=Array(P),C=0,M=0;M<b;M++)for(var V=arguments[M],B=0,ut=V.length;B<ut;B++,C++)w[C]=V[B];return w}function J(P,M,b){if(b||arguments.length===2)for(var w=0,C=M.length,V;w<C;w++)(V||!(w in M))&&(V||(V=Array.prototype.slice.call(M,0,w)),V[w]=M[w]);return P.concat(V||M)}function g(P){return this instanceof g?(this.v=P,this):new g(P)}function Q(P,M,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=b.apply(P,M||[]),C,V=[];return C={},B("next"),B("throw"),B("return"),C[Symbol.asyncIterator]=function(){return this},C;function B(St){w[St]&&(C[St]=function(at){return new Promise(function(mt,Dt){V.push([St,at,mt,Dt])>1||ut(St,at)})})}function ut(St,at){try{it(w[St](at))}catch(mt){ct(V[0][3],mt)}}function it(St){St.value instanceof g?Promise.resolve(St.value.v).then(lt,rt):ct(V[0][2],St)}function lt(St){ut("next",St)}function rt(St){ut("throw",St)}function ct(St,at){St(at),V.shift(),V.length&&ut(V[0][0],V[0][1])}}function j(P){var M,b;return M={},w("next"),w("throw",function(C){throw C}),w("return"),M[Symbol.iterator]=function(){return this},M;function w(C,V){M[C]=P[C]?function(B){return(b=!b)?{value:g(P[C](B)),done:C==="return"}:V?V(B):B}:V}}function O(P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=P[Symbol.asyncIterator],b;return M?M.call(P):(P=typeof W=="function"?W(P):P[Symbol.iterator](),b={},w("next"),w("throw"),w("return"),b[Symbol.asyncIterator]=function(){return this},b);function w(V){b[V]=P[V]&&function(B){return new Promise(function(ut,it){B=P[V](B),C(ut,it,B.done,B.value)})}}function C(V,B,ut,it){Promise.resolve(it).then(function(lt){V({value:lt,done:ut})},B)}}function X(P,M){return Object.defineProperty?Object.defineProperty(P,"raw",{value:M}):P.raw=M,P}var K=Object.create?function(P,M){Object.defineProperty(P,"default",{enumerable:!0,value:M})}:function(P,M){P.default=M};function G(P){if(P&&P.__esModule)return P;var M={};if(P!=null)for(var b in P)b!=="default"&&Object.prototype.hasOwnProperty.call(P,b)&&tt(M,P,b);return K(M,P),M}function k(P){return P&&P.__esModule?P:{default:P}}function R(P,M,b,w){if(b==="a"&&!w)throw new TypeError("Private accessor was defined without a getter");if(typeof M=="function"?P!==M||!w:!M.has(P))throw new TypeError("Cannot read private member from an object whose class did not declare it");return b==="m"?w:b==="a"?w.call(P):w?w.value:M.get(P)}function T(P,M,b,w,C){if(w==="m")throw new TypeError("Private method is not writable");if(w==="a"&&!C)throw new TypeError("Private accessor was defined without a setter");if(typeof M=="function"?P!==M||!C:!M.has(P))throw new TypeError("Cannot write private member to an object whose class did not declare it");return w==="a"?C.call(P,b):C?C.value=b:M.set(P,b),b}},12434:function(Pe,ee,z){var F=z(23463),dt=z(70295),q=z(16128),vt=z(10563),yt=z(98733),gt=z(70324),xt=z(62623),nt=z(96170),Z=z(53197),tt="__zr_normal__",ot=F.dN.concat(["ignore"]),W=(0,gt.u4)(F.dN,function(G,k){return G[k]=!0,G},{ignore:!1}),Y={},H=new q.Z(0,0,0,0),st=function(){function G(k){this.id=(0,gt.M8)(),this.animators=[],this.currentStates=[],this.states={},this._init(k)}return G.prototype._init=function(k){this.attr(k)},G.prototype.drift=function(k,R,T){switch(this.draggable){case"horizontal":R=0;break;case"vertical":k=0;break}var P=this.transform;P||(P=this.transform=[1,0,0,1,0,0]),P[4]+=k,P[5]+=R,this.decomposeTransform(),this.markRedraw()},G.prototype.beforeUpdate=function(){},G.prototype.afterUpdate=function(){},G.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},G.prototype.updateInnerText=function(k){var R=this._textContent;if(R&&(!R.ignore||k)){this.textConfig||(this.textConfig={});var T=this.textConfig,P=T.local,M=R.innerTransformable,b=void 0,w=void 0,C=!1;M.parent=P?this:null;var V=!1;if(M.copyTransform(R),T.position!=null){var B=H;T.layoutRect?B.copy(T.layoutRect):B.copy(this.getBoundingRect()),P||B.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Y,T,B):(0,yt.wI)(Y,T,B),M.x=Y.x,M.y=Y.y,b=Y.align,w=Y.verticalAlign;var ut=T.origin;if(ut&&T.rotation!=null){var it=void 0,lt=void 0;ut==="center"?(it=B.width*.5,lt=B.height*.5):(it=(0,yt.GM)(ut[0],B.width),lt=(0,yt.GM)(ut[1],B.height)),V=!0,M.originX=-M.x+it+(P?0:B.x),M.originY=-M.y+lt+(P?0:B.y)}}T.rotation!=null&&(M.rotation=T.rotation);var rt=T.offset;rt&&(M.x+=rt[0],M.y+=rt[1],V||(M.originX=-rt[0],M.originY=-rt[1]));var ct=T.inside==null?typeof T.position=="string"&&T.position.indexOf("inside")>=0:T.inside,St=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),at=void 0,mt=void 0,Dt=void 0;ct&&this.canBeInsideText()?(at=T.insideFill,mt=T.insideStroke,(at==null||at==="auto")&&(at=this.getInsideTextFill()),(mt==null||mt==="auto")&&(mt=this.getInsideTextStroke(at),Dt=!0)):(at=T.outsideFill,mt=T.outsideStroke,(at==null||at==="auto")&&(at=this.getOutsideFill()),(mt==null||mt==="auto")&&(mt=this.getOutsideStroke(at),Dt=!0)),at=at||"#000",(at!==St.fill||mt!==St.stroke||Dt!==St.autoStroke||b!==St.align||w!==St.verticalAlign)&&(C=!0,St.fill=at,St.stroke=mt,St.autoStroke=Dt,St.align=b,St.verticalAlign=w,R.setDefaultTextStyle(St)),R.__dirty|=Z.YV,C&&R.dirtyStyle(!0)}},G.prototype.canBeInsideText=function(){return!0},G.prototype.getInsideTextFill=function(){return"#fff"},G.prototype.getInsideTextStroke=function(k){return"#000"},G.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?xt.GD:xt.vU},G.prototype.getOutsideStroke=function(k){var R=this.__zr&&this.__zr.getBackgroundColor(),T=typeof R=="string"&&(0,nt.parse)(R);T||(T=[255,255,255,1]);for(var P=T[3],M=this.__zr.isDarkMode(),b=0;b<3;b++)T[b]=T[b]*P+(M?0:255)*(1-P);return T[3]=1,(0,nt.stringify)(T,"rgba")},G.prototype.traverse=function(k,R){},G.prototype.attrKV=function(k,R){k==="textConfig"?this.setTextConfig(R):k==="textContent"?this.setTextContent(R):k==="clipPath"?this.setClipPath(R):k==="extra"?(this.extra=this.extra||{},(0,gt.l7)(this.extra,R)):this[k]=R},G.prototype.hide=function(){this.ignore=!0,this.markRedraw()},G.prototype.show=function(){this.ignore=!1,this.markRedraw()},G.prototype.attr=function(k,R){if(typeof k=="string")this.attrKV(k,R);else if((0,gt.Kn)(k))for(var T=k,P=(0,gt.XP)(T),M=0;M<P.length;M++){var b=P[M];this.attrKV(b,k[b])}return this.markRedraw(),this},G.prototype.saveCurrentToNormalState=function(k){this._innerSaveToNormal(k);for(var R=this._normalState,T=0;T<this.animators.length;T++){var P=this.animators[T],M=P.__fromStateTransition;if(!(P.getLoop()||M&&M!==tt)){var b=P.targetName,w=b?R[b]:R;P.saveTo(w)}}},G.prototype._innerSaveToNormal=function(k){var R=this._normalState;R||(R=this._normalState={}),k.textConfig&&!R.textConfig&&(R.textConfig=this.textConfig),this._savePrimaryToNormal(k,R,ot)},G.prototype._savePrimaryToNormal=function(k,R,T){for(var P=0;P<T.length;P++){var M=T[P];k[M]!=null&&!(M in R)&&(R[M]=this[M])}},G.prototype.hasState=function(){return this.currentStates.length>0},G.prototype.getState=function(k){return this.states[k]},G.prototype.ensureState=function(k){var R=this.states;return R[k]||(R[k]={}),R[k]},G.prototype.clearStates=function(k){this.useState(tt,!1,k)},G.prototype.useState=function(k,R,T,P){var M=k===tt,b=this.hasState();if(!(!b&&M)){var w=this.currentStates,C=this.stateTransition;if(!((0,gt.cq)(w,k)>=0&&(R||w.length===1))){var V;if(this.stateProxy&&!M&&(V=this.stateProxy(k)),V||(V=this.states&&this.states[k]),!V&&!M){(0,gt.H)("State "+k+" not exists.");return}M||this.saveCurrentToNormalState(V);var B=!!(V&&V.hoverLayer||P);B&&this._toggleHoverLayerFlag(!0),this._applyStateObj(k,V,this._normalState,R,!T&&!this.__inHover&&C&&C.duration>0,C);var ut=this._textContent,it=this._textGuide;return ut&&ut.useState(k,R,T,B),it&&it.useState(k,R,T,B),M?(this.currentStates=[],this._normalState={}):R?this.currentStates.push(k):this.currentStates=[k],this._updateAnimationTargets(),this.markRedraw(),!B&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Z.YV),V}}},G.prototype.useStates=function(k,R,T){if(!k.length)this.clearStates();else{var P=[],M=this.currentStates,b=k.length,w=b===M.length;if(w){for(var C=0;C<b;C++)if(k[C]!==M[C]){w=!1;break}}if(w)return;for(var C=0;C<b;C++){var V=k[C],B=void 0;this.stateProxy&&(B=this.stateProxy(V,k)),B||(B=this.states[V]),B&&P.push(B)}var ut=P[b-1],it=!!(ut&&ut.hoverLayer||T);it&&this._toggleHoverLayerFlag(!0);var lt=this._mergeStates(P),rt=this.stateTransition;this.saveCurrentToNormalState(lt),this._applyStateObj(k.join(","),lt,this._normalState,!1,!R&&!this.__inHover&&rt&&rt.duration>0,rt);var ct=this._textContent,St=this._textGuide;ct&&ct.useStates(k,R,it),St&&St.useStates(k,R,it),this._updateAnimationTargets(),this.currentStates=k.slice(),this.markRedraw(),!it&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Z.YV)}},G.prototype._updateAnimationTargets=function(){for(var k=0;k<this.animators.length;k++){var R=this.animators[k];R.targetName&&R.changeTarget(this[R.targetName])}},G.prototype.removeState=function(k){var R=(0,gt.cq)(this.currentStates,k);if(R>=0){var T=this.currentStates.slice();T.splice(R,1),this.useStates(T)}},G.prototype.replaceState=function(k,R,T){var P=this.currentStates.slice(),M=(0,gt.cq)(P,k),b=(0,gt.cq)(P,R)>=0;M>=0?b?P.splice(M,1):P[M]=R:T&&!b&&P.push(R),this.useStates(P)},G.prototype.toggleState=function(k,R){R?this.useState(k,!0):this.removeState(k)},G.prototype._mergeStates=function(k){for(var R={},T,P=0;P<k.length;P++){var M=k[P];(0,gt.l7)(R,M),M.textConfig&&(T=T||{},(0,gt.l7)(T,M.textConfig))}return T&&(R.textConfig=T),R},G.prototype._applyStateObj=function(k,R,T,P,M,b){var w=!(R&&P);R&&R.textConfig?(this.textConfig=(0,gt.l7)({},P?this.textConfig:T.textConfig),(0,gt.l7)(this.textConfig,R.textConfig)):w&&T.textConfig&&(this.textConfig=T.textConfig);for(var C={},V=!1,B=0;B<ot.length;B++){var ut=ot[B],it=M&&W[ut];R&&R[ut]!=null?it?(V=!0,C[ut]=R[ut]):this[ut]=R[ut]:w&&T[ut]!=null&&(it?(V=!0,C[ut]=T[ut]):this[ut]=T[ut])}if(!M)for(var B=0;B<this.animators.length;B++){var lt=this.animators[B],rt=lt.targetName;lt.getLoop()||lt.__changeFinalValue(rt?(R||T)[rt]:R||T)}V&&this._transitionState(k,C,b)},G.prototype._attachComponent=function(k){if(!(k.__zr&&!k.__hostTarget)&&k!==this){var R=this.__zr;R&&k.addSelfToZr(R),k.__zr=R,k.__hostTarget=this}},G.prototype._detachComponent=function(k){k.__zr&&k.removeSelfFromZr(k.__zr),k.__zr=null,k.__hostTarget=null},G.prototype.getClipPath=function(){return this._clipPath},G.prototype.setClipPath=function(k){this._clipPath&&this._clipPath!==k&&this.removeClipPath(),this._attachComponent(k),this._clipPath=k,this.markRedraw()},G.prototype.removeClipPath=function(){var k=this._clipPath;k&&(this._detachComponent(k),this._clipPath=null,this.markRedraw())},G.prototype.getTextContent=function(){return this._textContent},G.prototype.setTextContent=function(k){var R=this._textContent;R!==k&&(R&&R!==k&&this.removeTextContent(),k.innerTransformable=new F.ZP,this._attachComponent(k),this._textContent=k,this.markRedraw())},G.prototype.setTextConfig=function(k){this.textConfig||(this.textConfig={}),(0,gt.l7)(this.textConfig,k),this.markRedraw()},G.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},G.prototype.removeTextContent=function(){var k=this._textContent;k&&(k.innerTransformable=null,this._detachComponent(k),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},G.prototype.getTextGuideLine=function(){return this._textGuide},G.prototype.setTextGuideLine=function(k){this._textGuide&&this._textGuide!==k&&this.removeTextGuideLine(),this._attachComponent(k),this._textGuide=k,this.markRedraw()},G.prototype.removeTextGuideLine=function(){var k=this._textGuide;k&&(this._detachComponent(k),this._textGuide=null,this.markRedraw())},G.prototype.markRedraw=function(){this.__dirty|=Z.YV;var k=this.__zr;k&&(this.__inHover?k.refreshHover():k.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},G.prototype.dirty=function(){this.markRedraw()},G.prototype._toggleHoverLayerFlag=function(k){this.__inHover=k;var R=this._textContent,T=this._textGuide;R&&(R.__inHover=k),T&&(T.__inHover=k)},G.prototype.addSelfToZr=function(k){if(this.__zr!==k){this.__zr=k;var R=this.animators;if(R)for(var T=0;T<R.length;T++)k.animation.addAnimator(R[T]);this._clipPath&&this._clipPath.addSelfToZr(k),this._textContent&&this._textContent.addSelfToZr(k),this._textGuide&&this._textGuide.addSelfToZr(k)}},G.prototype.removeSelfFromZr=function(k){if(this.__zr){this.__zr=null;var R=this.animators;if(R)for(var T=0;T<R.length;T++)k.animation.removeAnimator(R[T]);this._clipPath&&this._clipPath.removeSelfFromZr(k),this._textContent&&this._textContent.removeSelfFromZr(k),this._textGuide&&this._textGuide.removeSelfFromZr(k)}},G.prototype.animate=function(k,R,T){var P=k?this[k]:this,M=new dt.Z(P,R,T);return k&&(M.targetName=k),this.addAnimator(M,k),M},G.prototype.addAnimator=function(k,R){var T=this.__zr,P=this;k.during(function(){P.updateDuringAnimation(R)}).done(function(){var M=P.animators,b=(0,gt.cq)(M,k);b>=0&&M.splice(b,1)}),this.animators.push(k),T&&T.animation.addAnimator(k),T&&T.wakeUp()},G.prototype.updateDuringAnimation=function(k){this.markRedraw()},G.prototype.stopAnimation=function(k,R){for(var T=this.animators,P=T.length,M=[],b=0;b<P;b++){var w=T[b];!k||k===w.scope?w.stop(R):M.push(w)}return this.animators=M,this},G.prototype.animateTo=function(k,R,T){J(this,k,R,T)},G.prototype.animateFrom=function(k,R,T){J(this,k,R,T,!0)},G.prototype._transitionState=function(k,R,T,P){for(var M=J(this,R,T,P),b=0;b<M.length;b++)M[b].__fromStateTransition=k},G.prototype.getBoundingRect=function(){return null},G.prototype.getPaintRect=function(){return null},G.initDefaultProps=function(){var k=G.prototype;k.type="element",k.name="",k.ignore=k.silent=k.isGroup=k.draggable=k.dragging=k.ignoreClip=k.__inHover=!1,k.__dirty=Z.YV;var R={};function T(M,b,w){R[M+b+w]||(console.warn("DEPRECATED: '"+M+"' has been deprecated. use '"+b+"', '"+w+"' instead"),R[M+b+w]=!0)}function P(M,b,w,C){Object.defineProperty(k,M,{get:function(){if(!this[b]){var B=this[b]=[];V(this,B)}return this[b]},set:function(B){this[w]=B[0],this[C]=B[1],this[b]=B,V(this,B)}});function V(B,ut){Object.defineProperty(ut,0,{get:function(){return B[w]},set:function(it){B[w]=it}}),Object.defineProperty(ut,1,{get:function(){return B[C]},set:function(it){B[C]=it}})}}Object.defineProperty&&(P("position","_legacyPos","x","y"),P("scale","_legacyScale","scaleX","scaleY"),P("origin","_legacyOrigin","originX","originY"))}(),G}();(0,gt.jB)(st,vt.Z),(0,gt.jB)(st,F.ZP);function J(G,k,R,T,P){R=R||{};var M=[];K(G,"",G,k,R,T,M,P);var b=M.length,w=!1,C=R.done,V=R.aborted,B=function(){w=!0,b--,b<=0&&(w?C&&C():V&&V())},ut=function(){b--,b<=0&&(w?C&&C():V&&V())};b||C&&C(),M.length>0&&R.during&&M[0].during(function(rt,ct){R.during(ct)});for(var it=0;it<M.length;it++){var lt=M[it];B&&lt.done(B),ut&&lt.aborted(ut),R.force&&lt.duration(R.duration),lt.start(R.easing)}return M}function g(G,k,R){for(var T=0;T<R;T++)G[T]=k[T]}function Q(G){return(0,gt.zG)(G[0])}function j(G,k,R){if((0,gt.zG)(k[R]))if((0,gt.zG)(G[R])||(G[R]=[]),(0,gt.fU)(k[R])){var T=k[R].length;G[R].length!==T&&(G[R]=new k[R].constructor(T),g(G[R],k[R],T))}else{var P=k[R],M=G[R],b=P.length;if(Q(P))for(var w=P[0].length,C=0;C<b;C++)M[C]?g(M[C],P[C],w):M[C]=Array.prototype.slice.call(P[C]);else g(M,P,b);M.length=P.length}else G[R]=k[R]}function O(G,k){return G===k||(0,gt.zG)(G)&&(0,gt.zG)(k)&&X(G,k)}function X(G,k){var R=G.length;if(R!==k.length)return!1;for(var T=0;T<R;T++)if(G[T]!==k[T])return!1;return!0}function K(G,k,R,T,P,M,b,w){for(var C=(0,gt.XP)(T),V=P.duration,B=P.delay,ut=P.additive,it=P.setToFinal,lt=!(0,gt.Kn)(M),rt=G.animators,ct=[],St=0;St<C.length;St++){var at=C[St],mt=T[at];if(mt!=null&&R[at]!=null&&(lt||M[at]))if((0,gt.Kn)(mt)&&!(0,gt.zG)(mt)&&!(0,gt.Qq)(mt)){if(k){w||(R[at]=mt,G.updateDuringAnimation(k));continue}K(G,at,R[at],mt,P,M&&M[at],b,w)}else ct.push(at);else w||(R[at]=mt,G.updateDuringAnimation(k),ct.push(at))}var Dt=ct.length;if(!ut&&Dt)for(var wt=0;wt<rt.length;wt++){var Pt=rt[wt];if(Pt.targetName===k){var bt=Pt.stopTracks(ct);if(bt){var Ot=(0,gt.cq)(rt,Pt);rt.splice(Ot,1)}}}if(P.force||(ct=(0,gt.hX)(ct,function(re){return!O(T[re],R[re])}),Dt=ct.length),Dt>0||P.force&&!b.length){var Bt=void 0,Ht=void 0,Qt=void 0;if(w){Ht={},it&&(Bt={});for(var wt=0;wt<Dt;wt++){var at=ct[wt];Ht[at]=R[at],it?Bt[at]=T[at]:R[at]=T[at]}}else if(it){Qt={};for(var wt=0;wt<Dt;wt++){var at=ct[wt];Qt[at]=(0,dt.V)(R[at]),j(R,T,at)}}var Pt=new dt.Z(R,!1,!1,ut?(0,gt.hX)(rt,function(ye){return ye.targetName===k}):null);Pt.targetName=k,P.scope&&(Pt.scope=P.scope),it&&Bt&&Pt.whenWithKeys(0,Bt,ct),Qt&&Pt.whenWithKeys(0,Qt,ct),Pt.whenWithKeys(V==null?500:V,w?Ht:T,ct).delay(B||0),G.addAnimator(Pt,k),b.push(Pt)}}ee.Z=st},70295:function(Pe,ee,z){z.d(ee,{V:function(){return g},Z:function(){return V}});var F={linear:function(B){return B},quadraticIn:function(B){return B*B},quadraticOut:function(B){return B*(2-B)},quadraticInOut:function(B){return(B*=2)<1?.5*B*B:-.5*(--B*(B-2)-1)},cubicIn:function(B){return B*B*B},cubicOut:function(B){return--B*B*B+1},cubicInOut:function(B){return(B*=2)<1?.5*B*B*B:.5*((B-=2)*B*B+2)},quarticIn:function(B){return B*B*B*B},quarticOut:function(B){return 1- --B*B*B*B},quarticInOut:function(B){return(B*=2)<1?.5*B*B*B*B:-.5*((B-=2)*B*B*B-2)},quinticIn:function(B){return B*B*B*B*B},quinticOut:function(B){return--B*B*B*B*B+1},quinticInOut:function(B){return(B*=2)<1?.5*B*B*B*B*B:.5*((B-=2)*B*B*B*B+2)},sinusoidalIn:function(B){return 1-Math.cos(B*Math.PI/2)},sinusoidalOut:function(B){return Math.sin(B*Math.PI/2)},sinusoidalInOut:function(B){return .5*(1-Math.cos(Math.PI*B))},exponentialIn:function(B){return B===0?0:Math.pow(1024,B-1)},exponentialOut:function(B){return B===1?1:1-Math.pow(2,-10*B)},exponentialInOut:function(B){return B===0?0:B===1?1:(B*=2)<1?.5*Math.pow(1024,B-1):.5*(-Math.pow(2,-10*(B-1))+2)},circularIn:function(B){return 1-Math.sqrt(1-B*B)},circularOut:function(B){return Math.sqrt(1- --B*B)},circularInOut:function(B){return(B*=2)<1?-.5*(Math.sqrt(1-B*B)-1):.5*(Math.sqrt(1-(B-=2)*B)+1)},elasticIn:function(B){var ut,it=.1,lt=.4;return B===0?0:B===1?1:(!it||it<1?(it=1,ut=lt/4):ut=lt*Math.asin(1/it)/(2*Math.PI),-(it*Math.pow(2,10*(B-=1))*Math.sin((B-ut)*(2*Math.PI)/lt)))},elasticOut:function(B){var ut,it=.1,lt=.4;return B===0?0:B===1?1:(!it||it<1?(it=1,ut=lt/4):ut=lt*Math.asin(1/it)/(2*Math.PI),it*Math.pow(2,-10*B)*Math.sin((B-ut)*(2*Math.PI)/lt)+1)},elasticInOut:function(B){var ut,it=.1,lt=.4;return B===0?0:B===1?1:(!it||it<1?(it=1,ut=lt/4):ut=lt*Math.asin(1/it)/(2*Math.PI),(B*=2)<1?-.5*(it*Math.pow(2,10*(B-=1))*Math.sin((B-ut)*(2*Math.PI)/lt)):it*Math.pow(2,-10*(B-=1))*Math.sin((B-ut)*(2*Math.PI)/lt)*.5+1)},backIn:function(B){var ut=1.70158;return B*B*((ut+1)*B-ut)},backOut:function(B){var ut=1.70158;return--B*B*((ut+1)*B+ut)+1},backInOut:function(B){var ut=2.5949095;return(B*=2)<1?.5*(B*B*((ut+1)*B-ut)):.5*((B-=2)*B*((ut+1)*B+ut)+2)},bounceIn:function(B){return 1-F.bounceOut(1-B)},bounceOut:function(B){return B<1/2.75?7.5625*B*B:B<2/2.75?7.5625*(B-=1.5/2.75)*B+.75:B<2.5/2.75?7.5625*(B-=2.25/2.75)*B+.9375:7.5625*(B-=2.625/2.75)*B+.984375},bounceInOut:function(B){return B<.5?F.bounceIn(B*2)*.5:F.bounceOut(B*2-1)*.5+.5}},dt=F,q=z(70324),vt=z(74720),yt=function(){function B(ut){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ut.life||1e3,this._delay=ut.delay||0,this.loop=ut.loop||!1,this.onframe=ut.onframe||q.ZT,this.ondestroy=ut.ondestroy||q.ZT,this.onrestart=ut.onrestart||q.ZT,ut.easing&&this.setEasing(ut.easing)}return B.prototype.step=function(ut,it){if(this._inited||(this._startTime=ut+this._delay,this._inited=!0),this._paused){this._pausedTime+=it;return}var lt=this._life,rt=ut-this._startTime-this._pausedTime,ct=rt/lt;ct<0&&(ct=0),ct=Math.min(ct,1);var St=this.easingFunc,at=St?St(ct):ct;if(this.onframe(at),ct===1)if(this.loop){var mt=rt%lt;this._startTime=ut-mt,this._pausedTime=0,this.onrestart()}else return!0;return!1},B.prototype.pause=function(){this._paused=!0},B.prototype.resume=function(){this._paused=!1},B.prototype.setEasing=function(ut){this.easing=ut,this.easingFunc=(0,q.mf)(ut)?ut:dt[ut]||(0,vt.H)(ut)},B}(),gt=yt,xt=z(96170),nt=z(72352),Z=Array.prototype.slice;function tt(B,ut,it){return(ut-B)*it+B}function ot(B,ut,it,lt){for(var rt=ut.length,ct=0;ct<rt;ct++)B[ct]=tt(ut[ct],it[ct],lt);return B}function W(B,ut,it,lt){for(var rt=ut.length,ct=rt&&ut[0].length,St=0;St<rt;St++){B[St]||(B[St]=[]);for(var at=0;at<ct;at++)B[St][at]=tt(ut[St][at],it[St][at],lt)}return B}function Y(B,ut,it,lt){for(var rt=ut.length,ct=0;ct<rt;ct++)B[ct]=ut[ct]+it[ct]*lt;return B}function H(B,ut,it,lt){for(var rt=ut.length,ct=rt&&ut[0].length,St=0;St<rt;St++){B[St]||(B[St]=[]);for(var at=0;at<ct;at++)B[St][at]=ut[St][at]+it[St][at]*lt}return B}function st(B,ut){for(var it=B.length,lt=ut.length,rt=it>lt?ut:B,ct=Math.min(it,lt),St=rt[ct-1]||{color:[0,0,0,0],offset:0},at=ct;at<Math.max(it,lt);at++)rt.push({offset:St.offset,color:St.color.slice()})}function J(B,ut,it){var lt=B,rt=ut;if(!(!lt.push||!rt.push)){var ct=lt.length,St=rt.length;if(ct!==St){var at=ct>St;if(at)lt.length=St;else for(var mt=ct;mt<St;mt++)lt.push(it===1?rt[mt]:Z.call(rt[mt]))}for(var Dt=lt[0]&&lt[0].length,mt=0;mt<lt.length;mt++)if(it===1)isNaN(lt[mt])&&(lt[mt]=rt[mt]);else for(var wt=0;wt<Dt;wt++)isNaN(lt[mt][wt])&&(lt[mt][wt]=rt[mt][wt])}}function g(B){if((0,q.zG)(B)){var ut=B.length;if((0,q.zG)(B[0])){for(var it=[],lt=0;lt<ut;lt++)it.push(Z.call(B[lt]));return it}return Z.call(B)}return B}function Q(B){return B[0]=Math.floor(B[0])||0,B[1]=Math.floor(B[1])||0,B[2]=Math.floor(B[2])||0,B[3]=B[3]==null?1:B[3],"rgba("+B.join(",")+")"}function j(B){return(0,q.zG)(B&&B[0])?2:1}var O=0,X=1,K=2,G=3,k=4,R=5,T=6;function P(B){return B===k||B===R}function M(B){return B===X||B===K}var b=[0,0,0,0],w=function(){function B(ut){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ut}return B.prototype.isFinished=function(){return this._finished},B.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},B.prototype.needsAnimate=function(){return this.keyframes.length>=1},B.prototype.getAdditiveTrack=function(){return this._additiveTrack},B.prototype.addKeyframe=function(ut,it,lt){this._needsSort=!0;var rt=this.keyframes,ct=rt.length,St=!1,at=T,mt=it;if((0,q.zG)(it)){var Dt=j(it);at=Dt,(Dt===1&&!(0,q.hj)(it[0])||Dt===2&&!(0,q.hj)(it[0][0]))&&(St=!0)}else if((0,q.hj)(it)&&!(0,q.Bu)(it))at=O;else if((0,q.HD)(it))if(!isNaN(+it))at=O;else{var wt=xt.parse(it);wt&&(mt=wt,at=G)}else if((0,q.Qq)(it)){var Pt=(0,q.l7)({},mt);Pt.colorStops=(0,q.UI)(it.colorStops,function(Ot){return{offset:Ot.offset,color:xt.parse(Ot.color)}}),(0,nt.I1)(it)?at=k:(0,nt.gO)(it)&&(at=R),mt=Pt}ct===0?this.valType=at:(at!==this.valType||at===T)&&(St=!0),this.discrete=this.discrete||St;var bt={time:ut,value:mt,rawValue:it,percent:0};return lt&&(bt.easing=lt,bt.easingFunc=(0,q.mf)(lt)?lt:dt[lt]||(0,vt.H)(lt)),rt.push(bt),bt},B.prototype.prepare=function(ut,it){var lt=this.keyframes;this._needsSort&&lt.sort(function(Ht,Qt){return Ht.time-Qt.time});for(var rt=this.valType,ct=lt.length,St=lt[ct-1],at=this.discrete,mt=M(rt),Dt=P(rt),wt=0;wt<ct;wt++){var Pt=lt[wt],bt=Pt.value,Ot=St.value;Pt.percent=Pt.time/ut,at||(mt&&wt!==ct-1?J(bt,Ot,rt):Dt&&st(bt.colorStops,Ot.colorStops))}if(!at&&rt!==R&&it&&this.needsAnimate()&&it.needsAnimate()&&rt===it.valType&&!it._finished){this._additiveTrack=it;for(var Bt=lt[0].value,wt=0;wt<ct;wt++)rt===O?lt[wt].additiveValue=lt[wt].value-Bt:rt===G?lt[wt].additiveValue=Y([],lt[wt].value,Bt,-1):M(rt)&&(lt[wt].additiveValue=rt===X?Y([],lt[wt].value,Bt,-1):H([],lt[wt].value,Bt,-1))}},B.prototype.step=function(ut,it){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var lt=this._additiveTrack!=null,rt=lt?"additiveValue":"value",ct=this.valType,St=this.keyframes,at=St.length,mt=this.propName,Dt=ct===G,wt,Pt=this._lastFr,bt=Math.min,Ot,Bt;if(at===1)Ot=Bt=St[0];else{if(it<0)wt=0;else if(it<this._lastFrP){var Ht=bt(Pt+1,at-1);for(wt=Ht;wt>=0&&!(St[wt].percent<=it);wt--);wt=bt(wt,at-2)}else{for(wt=Pt;wt<at&&!(St[wt].percent>it);wt++);wt=bt(wt-1,at-2)}Bt=St[wt+1],Ot=St[wt]}if(Ot&&Bt){this._lastFr=wt,this._lastFrP=it;var Qt=Bt.percent-Ot.percent,re=Qt===0?1:bt((it-Ot.percent)/Qt,1);Bt.easingFunc&&(re=Bt.easingFunc(re));var ye=lt?this._additiveValue:Dt?b:ut[mt];if((M(ct)||Dt)&&!ye&&(ye=this._additiveValue=[]),this.discrete)ut[mt]=re<1?Ot.rawValue:Bt.rawValue;else if(M(ct))ct===X?ot(ye,Ot[rt],Bt[rt],re):W(ye,Ot[rt],Bt[rt],re);else if(P(ct)){var he=Ot[rt],be=Bt[rt],Be=ct===k;ut[mt]={type:Be?"linear":"radial",x:tt(he.x,be.x,re),y:tt(he.y,be.y,re),colorStops:(0,q.UI)(he.colorStops,function(qe,pr){var wr=be.colorStops[pr];return{offset:tt(qe.offset,wr.offset,re),color:Q(ot([],qe.color,wr.color,re))}}),global:be.global},Be?(ut[mt].x2=tt(he.x2,be.x2,re),ut[mt].y2=tt(he.y2,be.y2,re)):ut[mt].r=tt(he.r,be.r,re)}else if(Dt)ot(ye,Ot[rt],Bt[rt],re),lt||(ut[mt]=Q(ye));else{var Ze=tt(Ot[rt],Bt[rt],re);lt?this._additiveValue=Ze:ut[mt]=Ze}lt&&this._addToTarget(ut)}}},B.prototype._addToTarget=function(ut){var it=this.valType,lt=this.propName,rt=this._additiveValue;it===O?ut[lt]=ut[lt]+rt:it===G?(xt.parse(ut[lt],b),Y(b,b,rt,1),ut[lt]=Q(b)):it===X?Y(ut[lt],ut[lt],rt,1):it===K&&H(ut[lt],ut[lt],rt,1)},B}(),C=function(){function B(ut,it,lt,rt){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ut,this._loop=it,it&&rt){(0,q.H)("Can' use additive animation on looped animation.");return}this._additiveAnimators=rt,this._allowDiscrete=lt}return B.prototype.getMaxTime=function(){return this._maxTime},B.prototype.getDelay=function(){return this._delay},B.prototype.getLoop=function(){return this._loop},B.prototype.getTarget=function(){return this._target},B.prototype.changeTarget=function(ut){this._target=ut},B.prototype.when=function(ut,it,lt){return this.whenWithKeys(ut,it,(0,q.XP)(it),lt)},B.prototype.whenWithKeys=function(ut,it,lt,rt){for(var ct=this._tracks,St=0;St<lt.length;St++){var at=lt[St],mt=ct[at];if(!mt){mt=ct[at]=new w(at);var Dt=void 0,wt=this._getAdditiveTrack(at);if(wt){var Pt=wt.keyframes,bt=Pt[Pt.length-1];Dt=bt&&bt.value,wt.valType===G&&Dt&&(Dt=Q(Dt))}else Dt=this._target[at];if(Dt==null)continue;ut>0&&mt.addKeyframe(0,g(Dt),rt),this._trackKeys.push(at)}mt.addKeyframe(ut,g(it[at]),rt)}return this._maxTime=Math.max(this._maxTime,ut),this},B.prototype.pause=function(){this._clip.pause(),this._paused=!0},B.prototype.resume=function(){this._clip.resume(),this._paused=!1},B.prototype.isPaused=function(){return!!this._paused},B.prototype.duration=function(ut){return this._maxTime=ut,this._force=!0,this},B.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ut=this._doneCbs;if(ut)for(var it=ut.length,lt=0;lt<it;lt++)ut[lt].call(this)},B.prototype._abortedCallback=function(){this._setTracksFinished();var ut=this.animation,it=this._abortedCbs;if(ut&&ut.removeClip(this._clip),this._clip=null,it)for(var lt=0;lt<it.length;lt++)it[lt].call(this)},B.prototype._setTracksFinished=function(){for(var ut=this._tracks,it=this._trackKeys,lt=0;lt<it.length;lt++)ut[it[lt]].setFinished()},B.prototype._getAdditiveTrack=function(ut){var it,lt=this._additiveAnimators;if(lt)for(var rt=0;rt<lt.length;rt++){var ct=lt[rt].getTrack(ut);ct&&(it=ct)}return it},B.prototype.start=function(ut){if(!(this._started>0)){this._started=1;for(var it=this,lt=[],rt=this._maxTime||0,ct=0;ct<this._trackKeys.length;ct++){var St=this._trackKeys[ct],at=this._tracks[St],mt=this._getAdditiveTrack(St),Dt=at.keyframes,wt=Dt.length;if(at.prepare(rt,mt),at.needsAnimate())if(!this._allowDiscrete&&at.discrete){var Pt=Dt[wt-1];Pt&&(it._target[at.propName]=Pt.rawValue),at.setFinished()}else lt.push(at)}if(lt.length||this._force){var bt=new gt({life:rt,loop:this._loop,delay:this._delay||0,onframe:function(Ot){it._started=2;var Bt=it._additiveAnimators;if(Bt){for(var Ht=!1,Qt=0;Qt<Bt.length;Qt++)if(Bt[Qt]._clip){Ht=!0;break}Ht||(it._additiveAnimators=null)}for(var Qt=0;Qt<lt.length;Qt++)lt[Qt].step(it._target,Ot);var re=it._onframeCbs;if(re)for(var Qt=0;Qt<re.length;Qt++)re[Qt](it._target,Ot)},ondestroy:function(){it._doneCallback()}});this._clip=bt,this.animation&&this.animation.addClip(bt),ut&&bt.setEasing(ut)}else this._doneCallback();return this}},B.prototype.stop=function(ut){if(this._clip){var it=this._clip;ut&&it.onframe(1),this._abortedCallback()}},B.prototype.delay=function(ut){return this._delay=ut,this},B.prototype.during=function(ut){return ut&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ut)),this},B.prototype.done=function(ut){return ut&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ut)),this},B.prototype.aborted=function(ut){return ut&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ut)),this},B.prototype.getClip=function(){return this._clip},B.prototype.getTrack=function(ut){return this._tracks[ut]},B.prototype.getTracks=function(){var ut=this;return(0,q.UI)(this._trackKeys,function(it){return ut._tracks[it]})},B.prototype.stopTracks=function(ut,it){if(!ut.length||!this._clip)return!0;for(var lt=this._tracks,rt=this._trackKeys,ct=0;ct<ut.length;ct++){var St=lt[ut[ct]];St&&!St.isFinished()&&(it?St.step(this._target,1):this._started===1&&St.step(this._target,0),St.setFinished())}for(var at=!0,ct=0;ct<rt.length;ct++)if(!lt[rt[ct]].isFinished()){at=!1;break}return at&&this._abortedCallback(),at},B.prototype.saveTo=function(ut,it,lt){if(ut){it=it||this._trackKeys;for(var rt=0;rt<it.length;rt++){var ct=it[rt],St=this._tracks[ct];if(!(!St||St.isFinished())){var at=St.keyframes,mt=at[lt?0:at.length-1];mt&&(ut[ct]=g(mt.rawValue))}}}},B.prototype.__changeFinalValue=function(ut,it){it=it||(0,q.XP)(ut);for(var lt=0;lt<it.length;lt++){var rt=it[lt],ct=this._tracks[rt];if(ct){var St=ct.keyframes;if(St.length>1){var at=St.pop();ct.addKeyframe(at.time,ut[rt]),ct.prepare(this._maxTime,ct.getAdditiveTrack())}}}},B}(),V=C},74720:function(Pe,ee,z){z.d(ee,{H:function(){return vt}});var F=z(14296),dt=z(70324),q=/cubic-bezier\(([0-9,\.e ]+)\)/;function vt(yt){var gt=yt&&q.exec(yt);if(gt){var xt=gt[1].split(","),nt=+(0,dt.fy)(xt[0]),Z=+(0,dt.fy)(xt[1]),tt=+(0,dt.fy)(xt[2]),ot=+(0,dt.fy)(xt[3]);if(isNaN(nt+Z+tt+ot))return;var W=[];return function(Y){return Y<=0?0:Y>=1?1:(0,F.kD)(0,nt,tt,1,Y,W)&&(0,F.af)(0,Z,ot,1,W[0])}}}},75820:function(Pe,ee,z){var F=z(54490),dt;dt=F.Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(q){return setTimeout(q,16)},ee.Z=dt},85342:function(Pe,ee,z){z.d(ee,{a:function(){return q}});var F=z(70324);function dt(vt,yt){return!vt||vt==="solid"||!(yt>0)?null:vt==="dashed"?[4*yt,2*yt]:vt==="dotted"?[yt]:(0,F.hj)(vt)?[vt]:(0,F.kJ)(vt)?vt:null}function q(vt){var yt=vt.style,gt=yt.lineDash&&yt.lineWidth>0&&dt(yt.lineDash,yt.lineWidth),xt=yt.lineDashOffset;if(gt){var nt=yt.strokeNoScale&&vt.getLineScale?vt.getLineScale():1;nt&&nt!==1&&(gt=(0,F.UI)(gt,function(Z){return Z/nt}),xt/=nt)}return[gt,xt]}},87368:function(Pe,ee,z){z.d(ee,{Dm:function(){return ct},RV:function(){return rt},RZ:function(){return Q}});var F=z(11635),dt=z(29436),q=z(6850),vt=z(89625),yt=z(66210),gt=z(13806),xt=z(83007),nt=z(70324),Z=z(85342),tt=z(53197),ot=z(47297),W=new dt.Z(!0);function Y(at){var mt=at.stroke;return!(mt==null||mt==="none"||!(at.lineWidth>0))}function H(at){return typeof at=="string"&&at!=="none"}function st(at){var mt=at.fill;return mt!=null&&mt!=="none"}function J(at,mt){if(mt.fillOpacity!=null&&mt.fillOpacity!==1){var Dt=at.globalAlpha;at.globalAlpha=mt.fillOpacity*mt.opacity,at.fill(),at.globalAlpha=Dt}else at.fill()}function g(at,mt){if(mt.strokeOpacity!=null&&mt.strokeOpacity!==1){var Dt=at.globalAlpha;at.globalAlpha=mt.strokeOpacity*mt.opacity,at.stroke(),at.globalAlpha=Dt}else at.stroke()}function Q(at,mt,Dt){var wt=(0,q.Gq)(mt.image,mt.__image,Dt);if((0,q.v5)(wt)){var Pt=at.createPattern(wt,mt.repeat||"repeat");if(typeof DOMMatrix=="function"&&Pt&&Pt.setTransform){var bt=new DOMMatrix;bt.translateSelf(mt.x||0,mt.y||0),bt.rotateSelf(0,0,(mt.rotation||0)*nt.I3),bt.scaleSelf(mt.scaleX||1,mt.scaleY||1),Pt.setTransform(bt)}return Pt}}function j(at,mt,Dt,wt){var Pt,bt=Y(Dt),Ot=st(Dt),Bt=Dt.strokePercent,Ht=Bt<1,Qt=!mt.path;(!mt.silent||Ht)&&Qt&&mt.createPathProxy();var re=mt.path||W,ye=mt.__dirty;if(!wt){var he=Dt.fill,be=Dt.stroke,Be=Ot&&!!he.colorStops,Ze=bt&&!!be.colorStops,qe=Ot&&!!he.image,pr=bt&&!!be.image,wr=void 0,Or=void 0,Sr=void 0,Vr=void 0,sn=void 0;(Be||Ze)&&(sn=mt.getBoundingRect()),Be&&(wr=ye?(0,vt.ZF)(at,he,sn):mt.__canvasFillGradient,mt.__canvasFillGradient=wr),Ze&&(Or=ye?(0,vt.ZF)(at,be,sn):mt.__canvasStrokeGradient,mt.__canvasStrokeGradient=Or),qe&&(Sr=ye||!mt.__canvasFillPattern?Q(at,he,mt):mt.__canvasFillPattern,mt.__canvasFillPattern=Sr),pr&&(Vr=ye||!mt.__canvasStrokePattern?Q(at,be,mt):mt.__canvasStrokePattern,mt.__canvasStrokePattern=Sr),Be?at.fillStyle=wr:qe&&(Sr?at.fillStyle=Sr:Ot=!1),Ze?at.strokeStyle=Or:pr&&(Vr?at.strokeStyle=Vr:bt=!1)}var cr=mt.getGlobalScale();re.setScale(cr[0],cr[1],mt.segmentIgnoreThreshold);var or,Dr;at.setLineDash&&Dt.lineDash&&(Pt=(0,Z.a)(mt),or=Pt[0],Dr=Pt[1]);var ze=!0;(Qt||ye&tt.RH)&&(re.setDPR(at.dpr),Ht?re.setContext(null):(re.setContext(at),ze=!1),re.reset(),mt.buildPath(re,mt.shape,wt),re.toStatic(),mt.pathUpdated()),ze&&re.rebuildPath(at,Ht?Bt:1),or&&(at.setLineDash(or),at.lineDashOffset=Dr),wt||(Dt.strokeFirst?(bt&&g(at,Dt),Ot&&J(at,Dt)):(Ot&&J(at,Dt),bt&&g(at,Dt))),or&&at.setLineDash([])}function O(at,mt,Dt){var wt=mt.__image=(0,q.Gq)(Dt.image,mt.__image,mt,mt.onload);if(!(!wt||!(0,q.v5)(wt))){var Pt=Dt.x||0,bt=Dt.y||0,Ot=mt.getWidth(),Bt=mt.getHeight(),Ht=wt.width/wt.height;if(Ot==null&&Bt!=null?Ot=Bt*Ht:Bt==null&&Ot!=null?Bt=Ot/Ht:Ot==null&&Bt==null&&(Ot=wt.width,Bt=wt.height),Dt.sWidth&&Dt.sHeight){var Qt=Dt.sx||0,re=Dt.sy||0;at.drawImage(wt,Qt,re,Dt.sWidth,Dt.sHeight,Pt,bt,Ot,Bt)}else if(Dt.sx&&Dt.sy){var Qt=Dt.sx,re=Dt.sy,ye=Ot-Qt,he=Bt-re;at.drawImage(wt,Qt,re,ye,he,Pt,bt,Ot,Bt)}else at.drawImage(wt,Pt,bt,Ot,Bt)}}function X(at,mt,Dt){var wt,Pt=Dt.text;if(Pt!=null&&(Pt+=""),Pt){at.font=Dt.font||ot.Uo,at.textAlign=Dt.textAlign,at.textBaseline=Dt.textBaseline;var bt=void 0,Ot=void 0;at.setLineDash&&Dt.lineDash&&(wt=(0,Z.a)(mt),bt=wt[0],Ot=wt[1]),bt&&(at.setLineDash(bt),at.lineDashOffset=Ot),Dt.strokeFirst?(Y(Dt)&&at.strokeText(Pt,Dt.x,Dt.y),st(Dt)&&at.fillText(Pt,Dt.x,Dt.y)):(st(Dt)&&at.fillText(Pt,Dt.x,Dt.y),Y(Dt)&&at.strokeText(Pt,Dt.x,Dt.y)),bt&&at.setLineDash([])}}var K=["shadowBlur","shadowOffsetX","shadowOffsetY"],G=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function k(at,mt,Dt,wt,Pt){var bt=!1;if(!wt&&(Dt=Dt||{},mt===Dt))return!1;if(wt||mt.opacity!==Dt.opacity){it(at,Pt),bt=!0;var Ot=Math.max(Math.min(mt.opacity,1),0);at.globalAlpha=isNaN(Ot)?F.tj.opacity:Ot}(wt||mt.blend!==Dt.blend)&&(bt||(it(at,Pt),bt=!0),at.globalCompositeOperation=mt.blend||F.tj.blend);for(var Bt=0;Bt<K.length;Bt++){var Ht=K[Bt];(wt||mt[Ht]!==Dt[Ht])&&(bt||(it(at,Pt),bt=!0),at[Ht]=at.dpr*(mt[Ht]||0))}return(wt||mt.shadowColor!==Dt.shadowColor)&&(bt||(it(at,Pt),bt=!0),at.shadowColor=mt.shadowColor||F.tj.shadowColor),bt}function R(at,mt,Dt,wt,Pt){var bt=lt(mt,Pt.inHover),Ot=wt?null:Dt&&lt(Dt,Pt.inHover)||{};if(bt===Ot)return!1;var Bt=k(at,bt,Ot,wt,Pt);if((wt||bt.fill!==Ot.fill)&&(Bt||(it(at,Pt),Bt=!0),H(bt.fill)&&(at.fillStyle=bt.fill)),(wt||bt.stroke!==Ot.stroke)&&(Bt||(it(at,Pt),Bt=!0),H(bt.stroke)&&(at.strokeStyle=bt.stroke)),(wt||bt.opacity!==Ot.opacity)&&(Bt||(it(at,Pt),Bt=!0),at.globalAlpha=bt.opacity==null?1:bt.opacity),mt.hasStroke()){var Ht=bt.lineWidth,Qt=Ht/(bt.strokeNoScale&&mt.getLineScale?mt.getLineScale():1);at.lineWidth!==Qt&&(Bt||(it(at,Pt),Bt=!0),at.lineWidth=Qt)}for(var re=0;re<G.length;re++){var ye=G[re],he=ye[0];(wt||bt[he]!==Ot[he])&&(Bt||(it(at,Pt),Bt=!0),at[he]=bt[he]||ye[1])}return Bt}function T(at,mt,Dt,wt,Pt){return k(at,lt(mt,Pt.inHover),Dt&&lt(Dt,Pt.inHover),wt,Pt)}function P(at,mt){var Dt=mt.transform,wt=at.dpr||1;Dt?at.setTransform(wt*Dt[0],wt*Dt[1],wt*Dt[2],wt*Dt[3],wt*Dt[4],wt*Dt[5]):at.setTransform(wt,0,0,wt,0,0)}function M(at,mt,Dt){for(var wt=!1,Pt=0;Pt<at.length;Pt++){var bt=at[Pt];wt=wt||bt.isZeroArea(),P(mt,bt),mt.beginPath(),bt.buildPath(mt,bt.shape),mt.clip()}Dt.allClipped=wt}function b(at,mt){return at&&mt?at[0]!==mt[0]||at[1]!==mt[1]||at[2]!==mt[2]||at[3]!==mt[3]||at[4]!==mt[4]||at[5]!==mt[5]:!(!at&&!mt)}var w=1,C=2,V=3,B=4;function ut(at){var mt=st(at),Dt=Y(at);return!(at.lineDash||!(+mt^+Dt)||mt&&typeof at.fill!="string"||Dt&&typeof at.stroke!="string"||at.strokePercent<1||at.strokeOpacity<1||at.fillOpacity<1)}function it(at,mt){mt.batchFill&&at.fill(),mt.batchStroke&&at.stroke(),mt.batchFill="",mt.batchStroke=""}function lt(at,mt){return mt&&at.__hoverStyle||at.style}function rt(at,mt){ct(at,mt,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ct(at,mt,Dt,wt){var Pt=mt.transform;if(!mt.shouldBePainted(Dt.viewWidth,Dt.viewHeight,!1,!1)){mt.__dirty&=~tt.YV,mt.__isRendered=!1;return}var bt=mt.__clipPaths,Ot=Dt.prevElClipPaths,Bt=!1,Ht=!1;if((!Ot||(0,vt.cF)(bt,Ot))&&(Ot&&Ot.length&&(it(at,Dt),at.restore(),Ht=Bt=!0,Dt.prevElClipPaths=null,Dt.allClipped=!1,Dt.prevEl=null),bt&&bt.length&&(it(at,Dt),at.save(),M(bt,at,Dt),Bt=!0),Dt.prevElClipPaths=bt),Dt.allClipped){mt.__isRendered=!1;return}mt.beforeBrush&&mt.beforeBrush(),mt.innerBeforeBrush();var Qt=Dt.prevEl;Qt||(Ht=Bt=!0);var re=mt instanceof yt.ZP&&mt.autoBatch&&ut(mt.style);Bt||b(Pt,Qt.transform)?(it(at,Dt),P(at,mt)):re||it(at,Dt);var ye=lt(mt,Dt.inHover);mt instanceof yt.ZP?(Dt.lastDrawType!==w&&(Ht=!0,Dt.lastDrawType=w),R(at,mt,Qt,Ht,Dt),(!re||!Dt.batchFill&&!Dt.batchStroke)&&at.beginPath(),j(at,mt,ye,re),re&&(Dt.batchFill=ye.fill||"",Dt.batchStroke=ye.stroke||"")):mt instanceof xt.Z?(Dt.lastDrawType!==V&&(Ht=!0,Dt.lastDrawType=V),R(at,mt,Qt,Ht,Dt),X(at,mt,ye)):mt instanceof gt.ZP?(Dt.lastDrawType!==C&&(Ht=!0,Dt.lastDrawType=C),T(at,mt,Qt,Ht,Dt),O(at,mt,ye)):mt.getTemporalDisplayables&&(Dt.lastDrawType!==B&&(Ht=!0,Dt.lastDrawType=B),St(at,mt,Dt)),re&&wt&&it(at,Dt),mt.innerAfterBrush(),mt.afterBrush&&mt.afterBrush(),Dt.prevEl=mt,mt.__dirty=0,mt.__isRendered=!0}function St(at,mt,Dt){var wt=mt.getDisplayables(),Pt=mt.getTemporalDisplayables();at.save();var bt={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:Dt.viewWidth,viewHeight:Dt.viewHeight,inHover:Dt.inHover},Ot,Bt;for(Ot=mt.getCursor(),Bt=wt.length;Ot<Bt;Ot++){var Ht=wt[Ot];Ht.beforeBrush&&Ht.beforeBrush(),Ht.innerBeforeBrush(),ct(at,Ht,bt,Ot===Bt-1),Ht.innerAfterBrush(),Ht.afterBrush&&Ht.afterBrush(),bt.prevEl=Ht}for(var Qt=0,re=Pt.length;Qt<re;Qt++){var Ht=Pt[Qt];Ht.beforeBrush&&Ht.beforeBrush(),Ht.innerBeforeBrush(),ct(at,Ht,bt,Qt===re-1),Ht.innerAfterBrush(),Ht.afterBrush&&Ht.afterBrush(),bt.prevEl=Ht}mt.clearTemporalDisplayables(),mt.notClear=!0,at.restore()}},89625:function(Pe,ee,z){z.d(ee,{ZF:function(){return vt},ap:function(){return xt},cF:function(){return yt}});function F(nt){return isFinite(nt)}function dt(nt,Z,tt){var ot=Z.x==null?0:Z.x,W=Z.x2==null?1:Z.x2,Y=Z.y==null?0:Z.y,H=Z.y2==null?0:Z.y2;Z.global||(ot=ot*tt.width+tt.x,W=W*tt.width+tt.x,Y=Y*tt.height+tt.y,H=H*tt.height+tt.y),ot=F(ot)?ot:0,W=F(W)?W:1,Y=F(Y)?Y:0,H=F(H)?H:0;var st=nt.createLinearGradient(ot,Y,W,H);return st}function q(nt,Z,tt){var ot=tt.width,W=tt.height,Y=Math.min(ot,W),H=Z.x==null?.5:Z.x,st=Z.y==null?.5:Z.y,J=Z.r==null?.5:Z.r;Z.global||(H=H*ot+tt.x,st=st*W+tt.y,J=J*Y),H=F(H)?H:.5,st=F(st)?st:.5,J=J>=0&&F(J)?J:.5;var g=nt.createRadialGradient(H,st,0,H,st,J);return g}function vt(nt,Z,tt){for(var ot=Z.type==="radial"?q(nt,Z,tt):dt(nt,Z,tt),W=Z.colorStops,Y=0;Y<W.length;Y++)ot.addColorStop(W[Y].offset,W[Y].color);return ot}function yt(nt,Z){if(nt===Z||!nt&&!Z)return!1;if(!nt||!Z||nt.length!==Z.length)return!0;for(var tt=0;tt<nt.length;tt++)if(nt[tt]!==Z[tt])return!0;return!1}function gt(nt){return parseInt(nt,10)}function xt(nt,Z,tt){var ot=["width","height"][Z],W=["clientWidth","clientHeight"][Z],Y=["paddingLeft","paddingTop"][Z],H=["paddingRight","paddingBottom"][Z];if(tt[ot]!=null&&tt[ot]!=="auto")return parseFloat(tt[ot]);var st=document.defaultView.getComputedStyle(nt);return(nt[W]||gt(st[ot])||gt(nt.style[ot]))-(gt(st[Y])||0)-(gt(st[H])||0)|0}},62623:function(Pe,ee,z){z.d(ee,{Ak:function(){return yt},GD:function(){return xt},KL:function(){return vt},iv:function(){return nt},vU:function(){return gt}});var F=z(54490),dt=1;F.Z.hasGlobalWindow&&(dt=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var q=0,vt=dt,yt=.4,gt="#333",xt="#ccc",nt="#eee"},55265:function(Pe,ee,z){z.d(ee,{m:function(){return F}});function F(dt,q,vt,yt,gt,xt,nt){if(gt===0)return!1;var Z=gt,tt=0,ot=dt;if(nt>q+Z&&nt>yt+Z||nt<q-Z&&nt<yt-Z||xt>dt+Z&&xt>vt+Z||xt<dt-Z&&xt<vt-Z)return!1;if(dt!==vt)tt=(q-yt)/(dt-vt),ot=(dt*yt-vt*q)/(dt-vt);else return Math.abs(xt-dt)<=Z/2;var W=tt*xt-nt+ot,Y=W*W/(tt*tt+1);return Y<=Z/2*Z/2}},48154:function(Pe,ee,z){z.d(ee,{X:function(){return vt}});var F=z(99271),dt=1e-8;function q(yt,gt){return Math.abs(yt-gt)<dt}function vt(yt,gt,xt){var nt=0,Z=yt[0];if(!Z)return!1;for(var tt=1;tt<yt.length;tt++){var ot=yt[tt];nt+=(0,F.Z)(Z[0],Z[1],ot[0],ot[1],gt,xt),Z=ot}var W=yt[0];return(!q(Z[0],W[0])||!q(Z[1],W[1]))&&(nt+=(0,F.Z)(Z[0],Z[1],W[0],W[1],gt,xt)),nt!==0}},48610:function(Pe,ee,z){z.d(ee,{m:function(){return dt}});var F=z(14296);function dt(q,vt,yt,gt,xt,nt,Z,tt,ot){if(Z===0)return!1;var W=Z;if(ot>vt+W&&ot>gt+W&&ot>nt+W||ot<vt-W&&ot<gt-W&&ot<nt-W||tt>q+W&&tt>yt+W&&tt>xt+W||tt<q-W&&tt<yt-W&&tt<xt-W)return!1;var Y=(0,F.Wr)(q,vt,yt,gt,xt,nt,tt,ot,null);return Y<=W/2}},98733:function(Pe,ee,z){z.d(ee,{Dp:function(){return tt},GM:function(){return W},M3:function(){return nt},dz:function(){return yt},lP:function(){return xt},mU:function(){return Z},wI:function(){return Y}});var F=z(16128),dt=z(86280),q=z(47297),vt={};function yt(H,st){st=st||q.Uo;var J=vt[st];J||(J=vt[st]=new dt.ZP(500));var g=J.get(H);return g==null&&(g=q.qW.measureText(H,st).width,J.put(H,g)),g}function gt(H,st,J,g){var Q=yt(H,st),j=tt(st),O=nt(0,Q,J),X=Z(0,j,g),K=new F.Z(O,X,Q,j);return K}function xt(H,st,J,g){var Q=((H||"")+"").split(`
`),j=Q.length;if(j===1)return gt(Q[0],st,J,g);for(var O=new F.Z(0,0,0,0),X=0;X<Q.length;X++){var K=gt(Q[X],st,J,g);X===0?O.copy(K):O.union(K)}return O}function nt(H,st,J){return J==="right"?H-=st:J==="center"&&(H-=st/2),H}function Z(H,st,J){return J==="middle"?H-=st/2:J==="bottom"&&(H-=st),H}function tt(H){return yt("\u56FD",H)}function ot(H,st){return platformApi.measureText(H,st)}function W(H,st){return typeof H=="string"?H.lastIndexOf("%")>=0?parseFloat(H)/100*st:parseFloat(H):H}function Y(H,st,J){var g=st.position||"inside",Q=st.distance!=null?st.distance:5,j=J.height,O=J.width,X=j/2,K=J.x,G=J.y,k="left",R="top";if(g instanceof Array)K+=W(g[0],J.width),G+=W(g[1],J.height),k=null,R=null;else switch(g){case"left":K-=Q,G+=X,k="right",R="middle";break;case"right":K+=Q+O,G+=X,R="middle";break;case"top":K+=O/2,G-=Q,k="center",R="bottom";break;case"bottom":K+=O/2,G+=j+Q,k="center";break;case"inside":K+=O/2,G+=X,k="center",R="middle";break;case"insideLeft":K+=Q,G+=X,R="middle";break;case"insideRight":K+=O-Q,G+=X,k="right",R="middle";break;case"insideTop":K+=O/2,G+=Q,k="center";break;case"insideBottom":K+=O/2,G+=j-Q,k="center",R="bottom";break;case"insideTopLeft":K+=Q,G+=Q;break;case"insideTopRight":K+=O-Q,G+=Q,k="right";break;case"insideBottomLeft":K+=Q,G+=j-Q,R="bottom";break;case"insideBottomRight":K+=O-Q,G+=j-Q,k="right",R="bottom";break}return H=H||{},H.x=K,H.y=G,H.align=k,H.verticalAlign=R,H}},47833:function(Pe,ee,z){z.d(ee,{m:function(){return dt}});var F=Math.PI*2;function dt(q){return q%=F,q<0&&(q+=F),q}},99271:function(Pe,ee,z){z.d(ee,{Z:function(){return F}});function F(dt,q,vt,yt,gt,xt){if(xt>q&&xt>yt||xt<q&&xt<yt||yt===q)return 0;var nt=(xt-q)/(yt-q),Z=yt<q?1:-1;(nt===1||nt===0)&&(Z=yt<q?.5:-.5);var tt=nt*(vt-dt)+dt;return tt===gt?1/0:tt>gt?Z:0}},16128:function(Pe,ee,z){var F=z(58427),dt=z(73913),q=Math.min,vt=Math.max,yt=new dt.Z,gt=new dt.Z,xt=new dt.Z,nt=new dt.Z,Z=new dt.Z,tt=new dt.Z,ot=function(){function W(Y,H,st,J){st<0&&(Y=Y+st,st=-st),J<0&&(H=H+J,J=-J),this.x=Y,this.y=H,this.width=st,this.height=J}return W.prototype.union=function(Y){var H=q(Y.x,this.x),st=q(Y.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=vt(Y.x+Y.width,this.x+this.width)-H:this.width=Y.width,isFinite(this.y)&&isFinite(this.height)?this.height=vt(Y.y+Y.height,this.y+this.height)-st:this.height=Y.height,this.x=H,this.y=st},W.prototype.applyTransform=function(Y){W.applyTransform(this,this,Y)},W.prototype.calculateTransform=function(Y){var H=this,st=Y.width/H.width,J=Y.height/H.height,g=F.Ue();return F.Iu(g,g,[-H.x,-H.y]),F.bA(g,g,[st,J]),F.Iu(g,g,[Y.x,Y.y]),g},W.prototype.intersect=function(Y,H){if(!Y)return!1;Y instanceof W||(Y=W.create(Y));var st=this,J=st.x,g=st.x+st.width,Q=st.y,j=st.y+st.height,O=Y.x,X=Y.x+Y.width,K=Y.y,G=Y.y+Y.height,k=!(g<O||X<J||j<K||G<Q);if(H){var R=1/0,T=0,P=Math.abs(g-O),M=Math.abs(X-J),b=Math.abs(j-K),w=Math.abs(G-Q),C=Math.min(P,M),V=Math.min(b,w);g<O||X<J?C>T&&(T=C,P<M?dt.Z.set(tt,-P,0):dt.Z.set(tt,M,0)):C<R&&(R=C,P<M?dt.Z.set(Z,P,0):dt.Z.set(Z,-M,0)),j<K||G<Q?V>T&&(T=V,b<w?dt.Z.set(tt,0,-b):dt.Z.set(tt,0,w)):C<R&&(R=C,b<w?dt.Z.set(Z,0,b):dt.Z.set(Z,0,-w))}return H&&dt.Z.copy(H,k?Z:tt),k},W.prototype.contain=function(Y,H){var st=this;return Y>=st.x&&Y<=st.x+st.width&&H>=st.y&&H<=st.y+st.height},W.prototype.clone=function(){return new W(this.x,this.y,this.width,this.height)},W.prototype.copy=function(Y){W.copy(this,Y)},W.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},W.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},W.prototype.isZero=function(){return this.width===0||this.height===0},W.create=function(Y){return new W(Y.x,Y.y,Y.width,Y.height)},W.copy=function(Y,H){Y.x=H.x,Y.y=H.y,Y.width=H.width,Y.height=H.height},W.applyTransform=function(Y,H,st){if(!st){Y!==H&&W.copy(Y,H);return}if(st[1]<1e-5&&st[1]>-1e-5&&st[2]<1e-5&&st[2]>-1e-5){var J=st[0],g=st[3],Q=st[4],j=st[5];Y.x=H.x*J+Q,Y.y=H.y*g+j,Y.width=H.width*J,Y.height=H.height*g,Y.width<0&&(Y.x+=Y.width,Y.width=-Y.width),Y.height<0&&(Y.y+=Y.height,Y.height=-Y.height);return}yt.x=xt.x=H.x,yt.y=nt.y=H.y,gt.x=nt.x=H.x+H.width,gt.y=xt.y=H.y+H.height,yt.transform(st),nt.transform(st),gt.transform(st),xt.transform(st),Y.x=q(yt.x,gt.x,xt.x,nt.x),Y.y=q(yt.y,gt.y,xt.y,nt.y);var O=vt(yt.x,gt.x,xt.x,nt.x),X=vt(yt.y,gt.y,xt.y,nt.y);Y.width=O-Y.x,Y.height=X-Y.y},W}();ee.Z=ot},10563:function(Pe,ee){var z=function(){function F(dt){dt&&(this._$eventProcessor=dt)}return F.prototype.on=function(dt,q,vt,yt){this._$handlers||(this._$handlers={});var gt=this._$handlers;if(typeof q=="function"&&(yt=vt,vt=q,q=null),!vt||!dt)return this;var xt=this._$eventProcessor;q!=null&&xt&&xt.normalizeQuery&&(q=xt.normalizeQuery(q)),gt[dt]||(gt[dt]=[]);for(var nt=0;nt<gt[dt].length;nt++)if(gt[dt][nt].h===vt)return this;var Z={h:vt,query:q,ctx:yt||this,callAtLast:vt.zrEventfulCallAtLast},tt=gt[dt].length-1,ot=gt[dt][tt];return ot&&ot.callAtLast?gt[dt].splice(tt,0,Z):gt[dt].push(Z),this},F.prototype.isSilent=function(dt){var q=this._$handlers;return!q||!q[dt]||!q[dt].length},F.prototype.off=function(dt,q){var vt=this._$handlers;if(!vt)return this;if(!dt)return this._$handlers={},this;if(q){if(vt[dt]){for(var yt=[],gt=0,xt=vt[dt].length;gt<xt;gt++)vt[dt][gt].h!==q&&yt.push(vt[dt][gt]);vt[dt]=yt}vt[dt]&&vt[dt].length===0&&delete vt[dt]}else delete vt[dt];return this},F.prototype.trigger=function(dt){for(var q=[],vt=1;vt<arguments.length;vt++)q[vt-1]=arguments[vt];if(!this._$handlers)return this;var yt=this._$handlers[dt],gt=this._$eventProcessor;if(yt)for(var xt=q.length,nt=yt.length,Z=0;Z<nt;Z++){var tt=yt[Z];if(!(gt&&gt.filter&&tt.query!=null&&!gt.filter(dt,tt.query)))switch(xt){case 0:tt.h.call(tt.ctx);break;case 1:tt.h.call(tt.ctx,q[0]);break;case 2:tt.h.call(tt.ctx,q[0],q[1]);break;default:tt.h.apply(tt.ctx,q);break}}return gt&&gt.afterTrigger&&gt.afterTrigger(dt),this},F.prototype.triggerWithContext=function(dt){for(var q=[],vt=1;vt<arguments.length;vt++)q[vt-1]=arguments[vt];if(!this._$handlers)return this;var yt=this._$handlers[dt],gt=this._$eventProcessor;if(yt)for(var xt=q.length,nt=q[xt-1],Z=yt.length,tt=0;tt<Z;tt++){var ot=yt[tt];if(!(gt&&gt.filter&&ot.query!=null&&!gt.filter(dt,ot.query)))switch(xt){case 0:ot.h.call(nt);break;case 1:ot.h.call(nt,q[0]);break;case 2:ot.h.call(nt,q[0],q[1]);break;default:ot.h.apply(nt,q.slice(1,xt-1));break}}return gt&&gt.afterTrigger&&gt.afterTrigger(dt),this},F}();ee.Z=z},86280:function(Pe,ee,z){var F=function(){function vt(yt){this.value=yt}return vt}(),dt=function(){function vt(){this._len=0}return vt.prototype.insert=function(yt){var gt=new F(yt);return this.insertEntry(gt),gt},vt.prototype.insertEntry=function(yt){this.head?(this.tail.next=yt,yt.prev=this.tail,yt.next=null,this.tail=yt):this.head=this.tail=yt,this._len++},vt.prototype.remove=function(yt){var gt=yt.prev,xt=yt.next;gt?gt.next=xt:this.head=xt,xt?xt.prev=gt:this.tail=gt,yt.next=yt.prev=null,this._len--},vt.prototype.len=function(){return this._len},vt.prototype.clear=function(){this.head=this.tail=null,this._len=0},vt}(),q=function(){function vt(yt){this._list=new dt,this._maxSize=10,this._map={},this._maxSize=yt}return vt.prototype.put=function(yt,gt){var xt=this._list,nt=this._map,Z=null;if(nt[yt]==null){var tt=xt.len(),ot=this._lastRemovedEntry;if(tt>=this._maxSize&&tt>0){var W=xt.head;xt.remove(W),delete nt[W.key],Z=W.value,this._lastRemovedEntry=W}ot?ot.value=gt:ot=new F(gt),ot.key=yt,xt.insertEntry(ot),nt[yt]=ot}return Z},vt.prototype.get=function(yt){var gt=this._map[yt],xt=this._list;if(gt!=null)return gt!==xt.tail&&(xt.remove(gt),xt.insertEntry(gt)),gt.value},vt.prototype.clear=function(){this._list.clear(),this._map={}},vt.prototype.len=function(){return this._list.len()},vt}();ee.ZP=q},23736:function(Pe,ee,z){var F=z(73913),dt=[0,0],q=[0,0],vt=new F.Z,yt=new F.Z,gt=function(){function xt(nt,Z){this._corners=[],this._axes=[],this._origin=[0,0];for(var tt=0;tt<4;tt++)this._corners[tt]=new F.Z;for(var tt=0;tt<2;tt++)this._axes[tt]=new F.Z;nt&&this.fromBoundingRect(nt,Z)}return xt.prototype.fromBoundingRect=function(nt,Z){var tt=this._corners,ot=this._axes,W=nt.x,Y=nt.y,H=W+nt.width,st=Y+nt.height;if(tt[0].set(W,Y),tt[1].set(H,Y),tt[2].set(H,st),tt[3].set(W,st),Z)for(var J=0;J<4;J++)tt[J].transform(Z);F.Z.sub(ot[0],tt[1],tt[0]),F.Z.sub(ot[1],tt[3],tt[0]),ot[0].normalize(),ot[1].normalize();for(var J=0;J<2;J++)this._origin[J]=ot[J].dot(tt[0])},xt.prototype.intersect=function(nt,Z){var tt=!0,ot=!Z;return vt.set(1/0,1/0),yt.set(0,0),!this._intersectCheckOneSide(this,nt,vt,yt,ot,1)&&(tt=!1,ot)||!this._intersectCheckOneSide(nt,this,vt,yt,ot,-1)&&(tt=!1,ot)||ot||F.Z.copy(Z,tt?vt:yt),tt},xt.prototype._intersectCheckOneSide=function(nt,Z,tt,ot,W,Y){for(var H=!0,st=0;st<2;st++){var J=this._axes[st];if(this._getProjMinMaxOnAxis(st,nt._corners,dt),this._getProjMinMaxOnAxis(st,Z._corners,q),dt[1]<q[0]||dt[0]>q[1]){if(H=!1,W)return H;var g=Math.abs(q[0]-dt[1]),Q=Math.abs(dt[0]-q[1]);Math.min(g,Q)>ot.len()&&(g<Q?F.Z.scale(ot,J,-g*Y):F.Z.scale(ot,J,Q*Y))}else if(tt){var g=Math.abs(q[0]-dt[1]),Q=Math.abs(dt[0]-q[1]);Math.min(g,Q)<tt.len()&&(g<Q?F.Z.scale(tt,J,g*Y):F.Z.scale(tt,J,-Q*Y))}}return H},xt.prototype._getProjMinMaxOnAxis=function(nt,Z,tt){for(var ot=this._axes[nt],W=this._origin,Y=Z[0].dot(ot)+W[nt],H=Y,st=Y,J=1;J<Z.length;J++){var g=Z[J].dot(ot)+W[nt];H=Math.min(g,H),st=Math.max(g,st)}tt[0]=H,tt[1]=st},xt}();ee.Z=gt},29436:function(Pe,ee,z){z.d(ee,{L:function(){return G}});var F=z(85755),dt=z(16128),q=z(62623),vt=z(19169),yt=z(14296),gt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},xt=[],nt=[],Z=[],tt=[],ot=[],W=[],Y=Math.min,H=Math.max,st=Math.cos,J=Math.sin,g=Math.abs,Q=Math.PI,j=Q*2,O=typeof Float32Array!="undefined",X=[];function K(R){var T=Math.round(R/Q*1e8)/1e8;return T%2*Q}function G(R,T){var P=K(R[0]);P<0&&(P+=j);var M=P-R[0],b=R[1];b+=M,!T&&b-P>=j?b=P+j:T&&P-b>=j?b=P-j:!T&&P>b?b=P+(j-K(P-b)):T&&P<b&&(b=P-(j-K(b-P))),R[0]=P,R[1]=b}var k=function(){function R(T){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,T&&(this._saveData=!1),this._saveData&&(this.data=[])}return R.prototype.increaseVersion=function(){this._version++},R.prototype.getVersion=function(){return this._version},R.prototype.setScale=function(T,P,M){M=M||0,M>0&&(this._ux=g(M/q.KL/T)||0,this._uy=g(M/q.KL/P)||0)},R.prototype.setDPR=function(T){this.dpr=T},R.prototype.setContext=function(T){this._ctx=T},R.prototype.getContext=function(){return this._ctx},R.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},R.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},R.prototype.moveTo=function(T,P){return this._drawPendingPt(),this.addData(gt.M,T,P),this._ctx&&this._ctx.moveTo(T,P),this._x0=T,this._y0=P,this._xi=T,this._yi=P,this},R.prototype.lineTo=function(T,P){var M=g(T-this._xi),b=g(P-this._yi),w=M>this._ux||b>this._uy;if(this.addData(gt.L,T,P),this._ctx&&w&&this._ctx.lineTo(T,P),w)this._xi=T,this._yi=P,this._pendingPtDist=0;else{var C=M*M+b*b;C>this._pendingPtDist&&(this._pendingPtX=T,this._pendingPtY=P,this._pendingPtDist=C)}return this},R.prototype.bezierCurveTo=function(T,P,M,b,w,C){return this._drawPendingPt(),this.addData(gt.C,T,P,M,b,w,C),this._ctx&&this._ctx.bezierCurveTo(T,P,M,b,w,C),this._xi=w,this._yi=C,this},R.prototype.quadraticCurveTo=function(T,P,M,b){return this._drawPendingPt(),this.addData(gt.Q,T,P,M,b),this._ctx&&this._ctx.quadraticCurveTo(T,P,M,b),this._xi=M,this._yi=b,this},R.prototype.arc=function(T,P,M,b,w,C){this._drawPendingPt(),X[0]=b,X[1]=w,G(X,C),b=X[0],w=X[1];var V=w-b;return this.addData(gt.A,T,P,M,M,b,V,0,C?0:1),this._ctx&&this._ctx.arc(T,P,M,b,w,C),this._xi=st(w)*M+T,this._yi=J(w)*M+P,this},R.prototype.arcTo=function(T,P,M,b,w){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(T,P,M,b,w),this},R.prototype.rect=function(T,P,M,b){return this._drawPendingPt(),this._ctx&&this._ctx.rect(T,P,M,b),this.addData(gt.R,T,P,M,b),this},R.prototype.closePath=function(){this._drawPendingPt(),this.addData(gt.Z);var T=this._ctx,P=this._x0,M=this._y0;return T&&T.closePath(),this._xi=P,this._yi=M,this},R.prototype.fill=function(T){T&&T.fill(),this.toStatic()},R.prototype.stroke=function(T){T&&T.stroke(),this.toStatic()},R.prototype.len=function(){return this._len},R.prototype.setData=function(T){var P=T.length;!(this.data&&this.data.length===P)&&O&&(this.data=new Float32Array(P));for(var M=0;M<P;M++)this.data[M]=T[M];this._len=P},R.prototype.appendPath=function(T){T instanceof Array||(T=[T]);for(var P=T.length,M=0,b=this._len,w=0;w<P;w++)M+=T[w].len();O&&this.data instanceof Float32Array&&(this.data=new Float32Array(b+M));for(var w=0;w<P;w++)for(var C=T[w].data,V=0;V<C.length;V++)this.data[b++]=C[V];this._len=b},R.prototype.addData=function(T,P,M,b,w,C,V,B,ut){if(this._saveData){var it=this.data;this._len+arguments.length>it.length&&(this._expandData(),it=this.data);for(var lt=0;lt<arguments.length;lt++)it[this._len++]=arguments[lt]}},R.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},R.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var T=[],P=0;P<this._len;P++)T[P]=this.data[P];this.data=T}},R.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var T=this.data;T instanceof Array&&(T.length=this._len,O&&this._len>11&&(this.data=new Float32Array(T)))}},R.prototype.getBoundingRect=function(){Z[0]=Z[1]=ot[0]=ot[1]=Number.MAX_VALUE,tt[0]=tt[1]=W[0]=W[1]=-Number.MAX_VALUE;var T=this.data,P=0,M=0,b=0,w=0,C;for(C=0;C<this._len;){var V=T[C++],B=C===1;switch(B&&(P=T[C],M=T[C+1],b=P,w=M),V){case gt.M:P=b=T[C++],M=w=T[C++],ot[0]=b,ot[1]=w,W[0]=b,W[1]=w;break;case gt.L:(0,vt.u4)(P,M,T[C],T[C+1],ot,W),P=T[C++],M=T[C++];break;case gt.C:(0,vt.H9)(P,M,T[C++],T[C++],T[C++],T[C++],T[C],T[C+1],ot,W),P=T[C++],M=T[C++];break;case gt.Q:(0,vt.mJ)(P,M,T[C++],T[C++],T[C],T[C+1],ot,W),P=T[C++],M=T[C++];break;case gt.A:var ut=T[C++],it=T[C++],lt=T[C++],rt=T[C++],ct=T[C++],St=T[C++]+ct;C+=1;var at=!T[C++];B&&(b=st(ct)*lt+ut,w=J(ct)*rt+it),(0,vt.qL)(ut,it,lt,rt,ct,St,at,ot,W),P=st(St)*lt+ut,M=J(St)*rt+it;break;case gt.R:b=P=T[C++],w=M=T[C++];var mt=T[C++],Dt=T[C++];(0,vt.u4)(b,w,b+mt,w+Dt,ot,W);break;case gt.Z:P=b,M=w;break}F.VV(Z,Z,ot),F.Fp(tt,tt,W)}return C===0&&(Z[0]=Z[1]=tt[0]=tt[1]=0),new dt.Z(Z[0],Z[1],tt[0]-Z[0],tt[1]-Z[1])},R.prototype._calculateLength=function(){var T=this.data,P=this._len,M=this._ux,b=this._uy,w=0,C=0,V=0,B=0;this._pathSegLen||(this._pathSegLen=[]);for(var ut=this._pathSegLen,it=0,lt=0,rt=0;rt<P;){var ct=T[rt++],St=rt===1;St&&(w=T[rt],C=T[rt+1],V=w,B=C);var at=-1;switch(ct){case gt.M:w=V=T[rt++],C=B=T[rt++];break;case gt.L:{var mt=T[rt++],Dt=T[rt++],wt=mt-w,Pt=Dt-C;(g(wt)>M||g(Pt)>b||rt===P-1)&&(at=Math.sqrt(wt*wt+Pt*Pt),w=mt,C=Dt);break}case gt.C:{var bt=T[rt++],Ot=T[rt++],mt=T[rt++],Dt=T[rt++],Bt=T[rt++],Ht=T[rt++];at=(0,yt.Ci)(w,C,bt,Ot,mt,Dt,Bt,Ht,10),w=Bt,C=Ht;break}case gt.Q:{var bt=T[rt++],Ot=T[rt++],mt=T[rt++],Dt=T[rt++];at=(0,yt.wQ)(w,C,bt,Ot,mt,Dt,10),w=mt,C=Dt;break}case gt.A:var Qt=T[rt++],re=T[rt++],ye=T[rt++],he=T[rt++],be=T[rt++],Be=T[rt++],Ze=Be+be;rt+=1;var qe=!T[rt++];St&&(V=st(be)*ye+Qt,B=J(be)*he+re),at=H(ye,he)*Y(j,Math.abs(Be)),w=st(Ze)*ye+Qt,C=J(Ze)*he+re;break;case gt.R:{V=w=T[rt++],B=C=T[rt++];var pr=T[rt++],wr=T[rt++];at=pr*2+wr*2;break}case gt.Z:{var wt=V-w,Pt=B-C;at=Math.sqrt(wt*wt+Pt*Pt),w=V,C=B;break}}at>=0&&(ut[lt++]=at,it+=at)}return this._pathLen=it,it},R.prototype.rebuildPath=function(T,P){var M=this.data,b=this._ux,w=this._uy,C=this._len,V,B,ut,it,lt,rt,ct=P<1,St,at,mt=0,Dt=0,wt,Pt=0,bt,Ot;if(!(ct&&(this._pathSegLen||this._calculateLength(),St=this._pathSegLen,at=this._pathLen,wt=P*at,!wt)))t:for(var Bt=0;Bt<C;){var Ht=M[Bt++],Qt=Bt===1;switch(Qt&&(ut=M[Bt],it=M[Bt+1],V=ut,B=it),Ht!==gt.L&&Pt>0&&(T.lineTo(bt,Ot),Pt=0),Ht){case gt.M:V=ut=M[Bt++],B=it=M[Bt++],T.moveTo(ut,it);break;case gt.L:{lt=M[Bt++],rt=M[Bt++];var re=g(lt-ut),ye=g(rt-it);if(re>b||ye>w){if(ct){var he=St[Dt++];if(mt+he>wt){var be=(wt-mt)/he;T.lineTo(ut*(1-be)+lt*be,it*(1-be)+rt*be);break t}mt+=he}T.lineTo(lt,rt),ut=lt,it=rt,Pt=0}else{var Be=re*re+ye*ye;Be>Pt&&(bt=lt,Ot=rt,Pt=Be)}break}case gt.C:{var Ze=M[Bt++],qe=M[Bt++],pr=M[Bt++],wr=M[Bt++],Or=M[Bt++],Sr=M[Bt++];if(ct){var he=St[Dt++];if(mt+he>wt){var be=(wt-mt)/he;(0,yt.Vz)(ut,Ze,pr,Or,be,xt),(0,yt.Vz)(it,qe,wr,Sr,be,nt),T.bezierCurveTo(xt[1],nt[1],xt[2],nt[2],xt[3],nt[3]);break t}mt+=he}T.bezierCurveTo(Ze,qe,pr,wr,Or,Sr),ut=Or,it=Sr;break}case gt.Q:{var Ze=M[Bt++],qe=M[Bt++],pr=M[Bt++],wr=M[Bt++];if(ct){var he=St[Dt++];if(mt+he>wt){var be=(wt-mt)/he;(0,yt.Lx)(ut,Ze,pr,be,xt),(0,yt.Lx)(it,qe,wr,be,nt),T.quadraticCurveTo(xt[1],nt[1],xt[2],nt[2]);break t}mt+=he}T.quadraticCurveTo(Ze,qe,pr,wr),ut=pr,it=wr;break}case gt.A:var Vr=M[Bt++],sn=M[Bt++],cr=M[Bt++],or=M[Bt++],Dr=M[Bt++],ze=M[Bt++],Ne=M[Bt++],He=!M[Bt++],Vt=cr>or?cr:or,le=g(cr-or)>.001,Ee=Dr+ze,Fe=!1;if(ct){var he=St[Dt++];mt+he>wt&&(Ee=Dr+ze*(wt-mt)/he,Fe=!0),mt+=he}if(le&&T.ellipse?T.ellipse(Vr,sn,cr,or,Ne,Dr,Ee,He):T.arc(Vr,sn,Vt,Dr,Ee,He),Fe)break t;Qt&&(V=st(Dr)*cr+Vr,B=J(Dr)*or+sn),ut=st(Ee)*cr+Vr,it=J(Ee)*or+sn;break;case gt.R:V=ut=M[Bt],B=it=M[Bt+1],lt=M[Bt++],rt=M[Bt++];var Xt=M[Bt++],$t=M[Bt++];if(ct){var he=St[Dt++];if(mt+he>wt){var ie=wt-mt;T.moveTo(lt,rt),T.lineTo(lt+Y(ie,Xt),rt),ie-=Xt,ie>0&&T.lineTo(lt+Xt,rt+Y(ie,$t)),ie-=$t,ie>0&&T.lineTo(lt+H(Xt-ie,0),rt+$t),ie-=Xt,ie>0&&T.lineTo(lt,rt+H($t-ie,0));break t}mt+=he}T.rect(lt,rt,Xt,$t);break;case gt.Z:if(ct){var he=St[Dt++];if(mt+he>wt){var be=(wt-mt)/he;T.lineTo(ut*(1-be)+V*be,it*(1-be)+B*be);break t}mt+=he}T.closePath(),ut=V,it=B}}},R.prototype.clone=function(){var T=new R,P=this.data;return T.data=P.slice?P.slice():Array.prototype.slice.call(P),T._len=this._len,T},R.CMD=gt,R.initDefaultProps=function(){var T=R.prototype;T._saveData=!0,T._ux=0,T._uy=0,T._pendingPtDist=0,T._version=0}(),R}();ee.Z=k},73913:function(Pe,ee){var z=function(){function F(dt,q){this.x=dt||0,this.y=q||0}return F.prototype.copy=function(dt){return this.x=dt.x,this.y=dt.y,this},F.prototype.clone=function(){return new F(this.x,this.y)},F.prototype.set=function(dt,q){return this.x=dt,this.y=q,this},F.prototype.equal=function(dt){return dt.x===this.x&&dt.y===this.y},F.prototype.add=function(dt){return this.x+=dt.x,this.y+=dt.y,this},F.prototype.scale=function(dt){this.x*=dt,this.y*=dt},F.prototype.scaleAndAdd=function(dt,q){this.x+=dt.x*q,this.y+=dt.y*q},F.prototype.sub=function(dt){return this.x-=dt.x,this.y-=dt.y,this},F.prototype.dot=function(dt){return this.x*dt.x+this.y*dt.y},F.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},F.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},F.prototype.normalize=function(){var dt=this.len();return this.x/=dt,this.y/=dt,this},F.prototype.distance=function(dt){var q=this.x-dt.x,vt=this.y-dt.y;return Math.sqrt(q*q+vt*vt)},F.prototype.distanceSquare=function(dt){var q=this.x-dt.x,vt=this.y-dt.y;return q*q+vt*vt},F.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},F.prototype.transform=function(dt){if(dt){var q=this.x,vt=this.y;return this.x=dt[0]*q+dt[2]*vt+dt[4],this.y=dt[1]*q+dt[3]*vt+dt[5],this}},F.prototype.toArray=function(dt){return dt[0]=this.x,dt[1]=this.y,dt},F.prototype.fromArray=function(dt){this.x=dt[0],this.y=dt[1]},F.set=function(dt,q,vt){dt.x=q,dt.y=vt},F.copy=function(dt,q){dt.x=q.x,dt.y=q.y},F.len=function(dt){return Math.sqrt(dt.x*dt.x+dt.y*dt.y)},F.lenSquare=function(dt){return dt.x*dt.x+dt.y*dt.y},F.dot=function(dt,q){return dt.x*q.x+dt.y*q.y},F.add=function(dt,q,vt){dt.x=q.x+vt.x,dt.y=q.y+vt.y},F.sub=function(dt,q,vt){dt.x=q.x-vt.x,dt.y=q.y-vt.y},F.scale=function(dt,q,vt){dt.x=q.x*vt,dt.y=q.y*vt},F.scaleAndAdd=function(dt,q,vt,yt){dt.x=q.x+vt.x*yt,dt.y=q.y+vt.y*yt},F.lerp=function(dt,q,vt,yt){var gt=1-yt;dt.x=gt*q.x+yt*vt.x,dt.y=gt*q.y+yt*vt.y},F}();ee.Z=z},23463:function(Pe,ee,z){z.d(ee,{dN:function(){return ot},kY:function(){return W}});var F=z(58427),dt=z(85755),q=F.yR,vt=5e-5;function yt(Y){return Y>vt||Y<-vt}var gt=[],xt=[],nt=F.Ue(),Z=Math.abs,tt=function(){function Y(){}return Y.prototype.getLocalTransform=function(H){return Y.getLocalTransform(this,H)},Y.prototype.setPosition=function(H){this.x=H[0],this.y=H[1]},Y.prototype.setScale=function(H){this.scaleX=H[0],this.scaleY=H[1]},Y.prototype.setSkew=function(H){this.skewX=H[0],this.skewY=H[1]},Y.prototype.setOrigin=function(H){this.originX=H[0],this.originY=H[1]},Y.prototype.needLocalTransform=function(){return yt(this.rotation)||yt(this.x)||yt(this.y)||yt(this.scaleX-1)||yt(this.scaleY-1)||yt(this.skewX)||yt(this.skewY)},Y.prototype.updateTransform=function(){var H=this.parent&&this.parent.transform,st=this.needLocalTransform(),J=this.transform;if(!(st||H)){J&&q(J);return}J=J||F.Ue(),st?this.getLocalTransform(J):q(J),H&&(st?F.dC(J,H,J):F.JG(J,H)),this.transform=J,this._resolveGlobalScaleRatio(J)},Y.prototype._resolveGlobalScaleRatio=function(H){var st=this.globalScaleRatio;if(st!=null&&st!==1){this.getGlobalScale(gt);var J=gt[0]<0?-1:1,g=gt[1]<0?-1:1,Q=((gt[0]-J)*st+J)/gt[0]||0,j=((gt[1]-g)*st+g)/gt[1]||0;H[0]*=Q,H[1]*=Q,H[2]*=j,H[3]*=j}this.invTransform=this.invTransform||F.Ue(),F.U_(this.invTransform,H)},Y.prototype.getComputedTransform=function(){for(var H=this,st=[];H;)st.push(H),H=H.parent;for(;H=st.pop();)H.updateTransform();return this.transform},Y.prototype.setLocalTransform=function(H){if(H){var st=H[0]*H[0]+H[1]*H[1],J=H[2]*H[2]+H[3]*H[3],g=Math.atan2(H[1],H[0]),Q=Math.PI/2+g-Math.atan2(H[3],H[2]);J=Math.sqrt(J)*Math.cos(Q),st=Math.sqrt(st),this.skewX=Q,this.skewY=0,this.rotation=-g,this.x=+H[4],this.y=+H[5],this.scaleX=st,this.scaleY=J,this.originX=0,this.originY=0}},Y.prototype.decomposeTransform=function(){if(this.transform){var H=this.parent,st=this.transform;H&&H.transform&&(F.dC(xt,H.invTransform,st),st=xt);var J=this.originX,g=this.originY;(J||g)&&(nt[4]=J,nt[5]=g,F.dC(xt,st,nt),xt[4]-=J,xt[5]-=g,st=xt),this.setLocalTransform(st)}},Y.prototype.getGlobalScale=function(H){var st=this.transform;return H=H||[],st?(H[0]=Math.sqrt(st[0]*st[0]+st[1]*st[1]),H[1]=Math.sqrt(st[2]*st[2]+st[3]*st[3]),st[0]<0&&(H[0]=-H[0]),st[3]<0&&(H[1]=-H[1]),H):(H[0]=1,H[1]=1,H)},Y.prototype.transformCoordToLocal=function(H,st){var J=[H,st],g=this.invTransform;return g&&dt.Ne(J,J,g),J},Y.prototype.transformCoordToGlobal=function(H,st){var J=[H,st],g=this.transform;return g&&dt.Ne(J,J,g),J},Y.prototype.getLineScale=function(){var H=this.transform;return H&&Z(H[0]-1)>1e-10&&Z(H[3]-1)>1e-10?Math.sqrt(Z(H[0]*H[3]-H[2]*H[1])):1},Y.prototype.copyTransform=function(H){W(this,H)},Y.getLocalTransform=function(H,st){st=st||[];var J=H.originX||0,g=H.originY||0,Q=H.scaleX,j=H.scaleY,O=H.anchorX,X=H.anchorY,K=H.rotation||0,G=H.x,k=H.y,R=H.skewX?Math.tan(H.skewX):0,T=H.skewY?Math.tan(-H.skewY):0;if(J||g||O||X){var P=J+O,M=g+X;st[4]=-P*Q-R*M*j,st[5]=-M*j-T*P*Q}else st[4]=st[5]=0;return st[0]=Q,st[3]=j,st[1]=T*Q,st[2]=R*j,K&&F.U1(st,st,K),st[4]+=J+G,st[5]+=g+k,st},Y.initDefaultProps=function(){var H=Y.prototype;H.scaleX=H.scaleY=H.globalScaleRatio=1,H.x=H.y=H.originX=H.originY=H.skewX=H.skewY=H.rotation=H.anchorX=H.anchorY=0}(),Y}(),ot=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function W(Y,H){for(var st=0;st<ot.length;st++){var J=ot[st];Y[J]=H[J]}}ee.ZP=tt},19169:function(Pe,ee,z){z.d(ee,{H9:function(){return st},mJ:function(){return J},qL:function(){return g},u4:function(){return W},zk:function(){return ot}});var F=z(85755),dt=z(14296),q=Math.min,vt=Math.max,yt=Math.sin,gt=Math.cos,xt=Math.PI*2,nt=F.Ue(),Z=F.Ue(),tt=F.Ue();function ot(Q,j,O){if(Q.length!==0){for(var X=Q[0],K=X[0],G=X[0],k=X[1],R=X[1],T=1;T<Q.length;T++)X=Q[T],K=q(K,X[0]),G=vt(G,X[0]),k=q(k,X[1]),R=vt(R,X[1]);j[0]=K,j[1]=k,O[0]=G,O[1]=R}}function W(Q,j,O,X,K,G){K[0]=q(Q,O),K[1]=q(j,X),G[0]=vt(Q,O),G[1]=vt(j,X)}var Y=[],H=[];function st(Q,j,O,X,K,G,k,R,T,P){var M=dt.pP,b=dt.af,w=M(Q,O,K,k,Y);T[0]=1/0,T[1]=1/0,P[0]=-1/0,P[1]=-1/0;for(var C=0;C<w;C++){var V=b(Q,O,K,k,Y[C]);T[0]=q(V,T[0]),P[0]=vt(V,P[0])}w=M(j,X,G,R,H);for(var C=0;C<w;C++){var B=b(j,X,G,R,H[C]);T[1]=q(B,T[1]),P[1]=vt(B,P[1])}T[0]=q(Q,T[0]),P[0]=vt(Q,P[0]),T[0]=q(k,T[0]),P[0]=vt(k,P[0]),T[1]=q(j,T[1]),P[1]=vt(j,P[1]),T[1]=q(R,T[1]),P[1]=vt(R,P[1])}function J(Q,j,O,X,K,G,k,R){var T=dt.QC,P=dt.Zm,M=vt(q(T(Q,O,K),1),0),b=vt(q(T(j,X,G),1),0),w=P(Q,O,K,M),C=P(j,X,G,b);k[0]=q(Q,K,w),k[1]=q(j,G,C),R[0]=vt(Q,K,w),R[1]=vt(j,G,C)}function g(Q,j,O,X,K,G,k,R,T){var P=F.VV,M=F.Fp,b=Math.abs(K-G);if(b%xt<1e-4&&b>1e-4){R[0]=Q-O,R[1]=j-X,T[0]=Q+O,T[1]=j+X;return}if(nt[0]=gt(K)*O+Q,nt[1]=yt(K)*X+j,Z[0]=gt(G)*O+Q,Z[1]=yt(G)*X+j,P(R,nt,Z),M(T,nt,Z),K=K%xt,K<0&&(K=K+xt),G=G%xt,G<0&&(G=G+xt),K>G&&!k?G+=xt:K<G&&k&&(K+=xt),k){var w=G;G=K,K=w}for(var C=0;C<G;C+=Math.PI/2)C>K&&(tt[0]=gt(C)*O+Q,tt[1]=yt(C)*X+j,P(R,tt,R),M(T,tt,T))}},14296:function(Pe,ee,z){z.d(ee,{AZ:function(){return X},Ci:function(){return j},Jz:function(){return K},Lx:function(){return k},QC:function(){return G},Vz:function(){return g},Wr:function(){return R},X_:function(){return H},Zm:function(){return O},af:function(){return Y},kD:function(){return st},pP:function(){return J},t1:function(){return Q},wQ:function(){return T}});var F=z(85755),dt=Math.pow,q=Math.sqrt,vt=1e-8,yt=1e-4,gt=q(3),xt=1/3,nt=(0,F.Ue)(),Z=(0,F.Ue)(),tt=(0,F.Ue)();function ot(P){return P>-vt&&P<vt}function W(P){return P>vt||P<-vt}function Y(P,M,b,w,C){var V=1-C;return V*V*(V*P+3*C*M)+C*C*(C*w+3*V*b)}function H(P,M,b,w,C){var V=1-C;return 3*(((M-P)*V+2*(b-M)*C)*V+(w-b)*C*C)}function st(P,M,b,w,C,V){var B=w+3*(M-b)-P,ut=3*(b-M*2+P),it=3*(M-P),lt=P-C,rt=ut*ut-3*B*it,ct=ut*it-9*B*lt,St=it*it-3*ut*lt,at=0;if(ot(rt)&&ot(ct))if(ot(ut))V[0]=0;else{var mt=-it/ut;mt>=0&&mt<=1&&(V[at++]=mt)}else{var Dt=ct*ct-4*rt*St;if(ot(Dt)){var wt=ct/rt,mt=-ut/B+wt,Pt=-wt/2;mt>=0&&mt<=1&&(V[at++]=mt),Pt>=0&&Pt<=1&&(V[at++]=Pt)}else if(Dt>0){var bt=q(Dt),Ot=rt*ut+1.5*B*(-ct+bt),Bt=rt*ut+1.5*B*(-ct-bt);Ot<0?Ot=-dt(-Ot,xt):Ot=dt(Ot,xt),Bt<0?Bt=-dt(-Bt,xt):Bt=dt(Bt,xt);var mt=(-ut-(Ot+Bt))/(3*B);mt>=0&&mt<=1&&(V[at++]=mt)}else{var Ht=(2*rt*ut-3*B*ct)/(2*q(rt*rt*rt)),Qt=Math.acos(Ht)/3,re=q(rt),ye=Math.cos(Qt),mt=(-ut-2*re*ye)/(3*B),Pt=(-ut+re*(ye+gt*Math.sin(Qt)))/(3*B),he=(-ut+re*(ye-gt*Math.sin(Qt)))/(3*B);mt>=0&&mt<=1&&(V[at++]=mt),Pt>=0&&Pt<=1&&(V[at++]=Pt),he>=0&&he<=1&&(V[at++]=he)}}return at}function J(P,M,b,w,C){var V=6*b-12*M+6*P,B=9*M+3*w-3*P-9*b,ut=3*M-3*P,it=0;if(ot(B)){if(W(V)){var lt=-ut/V;lt>=0&&lt<=1&&(C[it++]=lt)}}else{var rt=V*V-4*B*ut;if(ot(rt))C[0]=-V/(2*B);else if(rt>0){var ct=q(rt),lt=(-V+ct)/(2*B),St=(-V-ct)/(2*B);lt>=0&&lt<=1&&(C[it++]=lt),St>=0&&St<=1&&(C[it++]=St)}}return it}function g(P,M,b,w,C,V){var B=(M-P)*C+P,ut=(b-M)*C+M,it=(w-b)*C+b,lt=(ut-B)*C+B,rt=(it-ut)*C+ut,ct=(rt-lt)*C+lt;V[0]=P,V[1]=B,V[2]=lt,V[3]=ct,V[4]=ct,V[5]=rt,V[6]=it,V[7]=w}function Q(P,M,b,w,C,V,B,ut,it,lt,rt){var ct,St=.005,at=1/0,mt,Dt,wt,Pt;nt[0]=it,nt[1]=lt;for(var bt=0;bt<1;bt+=.05)Z[0]=Y(P,b,C,B,bt),Z[1]=Y(M,w,V,ut,bt),wt=(0,F.WU)(nt,Z),wt<at&&(ct=bt,at=wt);at=1/0;for(var Ot=0;Ot<32&&!(St<yt);Ot++)mt=ct-St,Dt=ct+St,Z[0]=Y(P,b,C,B,mt),Z[1]=Y(M,w,V,ut,mt),wt=(0,F.WU)(Z,nt),mt>=0&&wt<at?(ct=mt,at=wt):(tt[0]=Y(P,b,C,B,Dt),tt[1]=Y(M,w,V,ut,Dt),Pt=(0,F.WU)(tt,nt),Dt<=1&&Pt<at?(ct=Dt,at=Pt):St*=.5);return rt&&(rt[0]=Y(P,b,C,B,ct),rt[1]=Y(M,w,V,ut,ct)),q(at)}function j(P,M,b,w,C,V,B,ut,it){for(var lt=P,rt=M,ct=0,St=1/it,at=1;at<=it;at++){var mt=at*St,Dt=Y(P,b,C,B,mt),wt=Y(M,w,V,ut,mt),Pt=Dt-lt,bt=wt-rt;ct+=Math.sqrt(Pt*Pt+bt*bt),lt=Dt,rt=wt}return ct}function O(P,M,b,w){var C=1-w;return C*(C*P+2*w*M)+w*w*b}function X(P,M,b,w){return 2*((1-w)*(M-P)+w*(b-M))}function K(P,M,b,w,C){var V=P-2*M+b,B=2*(M-P),ut=P-w,it=0;if(ot(V)){if(W(B)){var lt=-ut/B;lt>=0&&lt<=1&&(C[it++]=lt)}}else{var rt=B*B-4*V*ut;if(ot(rt)){var lt=-B/(2*V);lt>=0&&lt<=1&&(C[it++]=lt)}else if(rt>0){var ct=q(rt),lt=(-B+ct)/(2*V),St=(-B-ct)/(2*V);lt>=0&&lt<=1&&(C[it++]=lt),St>=0&&St<=1&&(C[it++]=St)}}return it}function G(P,M,b){var w=P+b-2*M;return w===0?.5:(P-M)/w}function k(P,M,b,w,C){var V=(M-P)*w+P,B=(b-M)*w+M,ut=(B-V)*w+V;C[0]=P,C[1]=V,C[2]=ut,C[3]=ut,C[4]=B,C[5]=b}function R(P,M,b,w,C,V,B,ut,it){var lt,rt=.005,ct=1/0;nt[0]=B,nt[1]=ut;for(var St=0;St<1;St+=.05){Z[0]=O(P,b,C,St),Z[1]=O(M,w,V,St);var at=(0,F.WU)(nt,Z);at<ct&&(lt=St,ct=at)}ct=1/0;for(var mt=0;mt<32&&!(rt<yt);mt++){var Dt=lt-rt,wt=lt+rt;Z[0]=O(P,b,C,Dt),Z[1]=O(M,w,V,Dt);var at=(0,F.WU)(Z,nt);if(Dt>=0&&at<ct)lt=Dt,ct=at;else{tt[0]=O(P,b,C,wt),tt[1]=O(M,w,V,wt);var Pt=(0,F.WU)(tt,nt);wt<=1&&Pt<ct?(lt=wt,ct=Pt):rt*=.5}}return it&&(it[0]=O(P,b,C,lt),it[1]=O(M,w,V,lt)),q(ct)}function T(P,M,b,w,C,V,B){for(var ut=P,it=M,lt=0,rt=1/B,ct=1;ct<=B;ct++){var St=ct*rt,at=O(P,b,C,St),mt=O(M,w,V,St),Dt=at-ut,wt=mt-it;lt+=Math.sqrt(Dt*Dt+wt*wt),ut=at,it=mt}return lt}},80400:function(Pe,ee,z){z.d(ee,{F1:function(){return H},UK:function(){return ot},A4:function(){return nt},YB:function(){return xt}});var F=z(54490),dt=Math.log(2);function q(st,J,g,Q,j,O){var X=Q+"-"+j,K=st.length;if(O.hasOwnProperty(X))return O[X];if(J===1){var G=Math.round(Math.log((1<<K)-1&~j)/dt);return st[g][G]}for(var k=Q|1<<g,R=g+1;Q&1<<R;)R++;for(var T=0,P=0,M=0;P<K;P++){var b=1<<P;b&j||(T+=(M%2?-1:1)*st[g][P]*q(st,J-1,R,k,j|b,O),M++)}return O[X]=T,T}function vt(st,J){var g=[[st[0],st[1],1,0,0,0,-J[0]*st[0],-J[0]*st[1]],[0,0,0,st[0],st[1],1,-J[1]*st[0],-J[1]*st[1]],[st[2],st[3],1,0,0,0,-J[2]*st[2],-J[2]*st[3]],[0,0,0,st[2],st[3],1,-J[3]*st[2],-J[3]*st[3]],[st[4],st[5],1,0,0,0,-J[4]*st[4],-J[4]*st[5]],[0,0,0,st[4],st[5],1,-J[5]*st[4],-J[5]*st[5]],[st[6],st[7],1,0,0,0,-J[6]*st[6],-J[6]*st[7]],[0,0,0,st[6],st[7],1,-J[7]*st[6],-J[7]*st[7]]],Q={},j=q(g,8,0,0,0,Q);if(j!==0){for(var O=[],X=0;X<8;X++)for(var K=0;K<8;K++)O[K]==null&&(O[K]=0),O[K]+=((X+K)%2?-1:1)*q(g,7,X===0?1:0,1<<X,1<<K,Q)/j*J[X];return function(G,k,R){var T=k*O[6]+R*O[7]+1;G[0]=(k*O[0]+R*O[1]+O[2])/T,G[1]=(k*O[3]+R*O[4]+O[5])/T}}}var yt="___zrEVENTSAVED",gt=[];function xt(st,J,g,Q,j){return nt(gt,J,Q,j,!0)&&nt(st,g,gt[0],gt[1])}function nt(st,J,g,Q,j){if(J.getBoundingClientRect&&F.Z.domSupported&&!ot(J)){var O=J[yt]||(J[yt]={}),X=Z(J,O),K=tt(X,O,j);if(K)return K(st,g,Q),!0}return!1}function Z(st,J){var g=J.markers;if(g)return g;g=J.markers=[];for(var Q=["left","right"],j=["top","bottom"],O=0;O<4;O++){var X=document.createElement("div"),K=X.style,G=O%2,k=(O>>1)%2;K.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",Q[G]+":0",j[k]+":0",Q[1-G]+":auto",j[1-k]+":auto",""].join("!important;"),st.appendChild(X),g.push(X)}return g}function tt(st,J,g){for(var Q=g?"invTrans":"trans",j=J[Q],O=J.srcCoords,X=[],K=[],G=!0,k=0;k<4;k++){var R=st[k].getBoundingClientRect(),T=2*k,P=R.left,M=R.top;X.push(P,M),G=G&&O&&P===O[T]&&M===O[T+1],K.push(st[k].offsetLeft,st[k].offsetTop)}return G&&j?j:(J.srcCoords=X,J[Q]=g?vt(K,X):vt(X,K))}function ot(st){return st.nodeName.toUpperCase()==="CANVAS"}var W=/([&<>"'])/g,Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function H(st){return st==null?"":(st+"").replace(W,function(J,g){return Y[g]})}},54490:function(Pe,ee){var z=function(){function vt(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return vt}(),F=function(){function vt(){this.browser=new z,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return vt}(),dt=new F;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(dt.wxa=!0,dt.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?dt.worker=!0:typeof navigator=="undefined"?(dt.node=!0,dt.svgSupported=!0):q(navigator.userAgent,dt);function q(vt,yt){var gt=yt.browser,xt=vt.match(/Firefox\/([\d.]+)/),nt=vt.match(/MSIE\s([\d.]+)/)||vt.match(/Trident\/.+?rv:(([\d.]+))/),Z=vt.match(/Edge?\/([\d.]+)/),tt=/micromessenger/i.test(vt);xt&&(gt.firefox=!0,gt.version=xt[1]),nt&&(gt.ie=!0,gt.version=nt[1]),Z&&(gt.edge=!0,gt.version=Z[1],gt.newEdge=+Z[1].split(".")[0]>18),tt&&(gt.weChat=!0),yt.svgSupported=typeof SVGRect!="undefined",yt.touchEventsSupported="ontouchstart"in window&&!gt.ie&&!gt.edge,yt.pointerEventsSupported="onpointerdown"in window&&(gt.edge||gt.ie&&+gt.version>=11),yt.domSupported=typeof document!="undefined";var ot=document.documentElement.style;yt.transform3dSupported=(gt.ie&&"transition"in ot||gt.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in ot)&&!("OTransition"in ot),yt.transformSupported=yt.transform3dSupported||gt.ie&&+gt.version>=9}ee.Z=dt},11300:function(Pe,ee,z){z.d(ee,{OD:function(){return Z},Oo:function(){return ot},eV:function(){return gt},iP:function(){return nt},sT:function(){return Y},x1:function(){return H},xg:function(){return W}});var F=z(54490),dt=z(80400),q=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,vt=[],yt=F.Z.browser.firefox&&+F.Z.browser.version.split(".")[0]<39;function gt(st,J,g,Q){return g=g||{},Q?xt(st,J,g):yt&&J.layerX!=null&&J.layerX!==J.offsetX?(g.zrX=J.layerX,g.zrY=J.layerY):J.offsetX!=null?(g.zrX=J.offsetX,g.zrY=J.offsetY):xt(st,J,g),g}function xt(st,J,g){if(F.Z.domSupported&&st.getBoundingClientRect){var Q=J.clientX,j=J.clientY;if((0,dt.UK)(st)){var O=st.getBoundingClientRect();g.zrX=Q-O.left,g.zrY=j-O.top;return}else if((0,dt.A4)(vt,st,Q,j)){g.zrX=vt[0],g.zrY=vt[1];return}}g.zrX=g.zrY=0}function nt(st){return st||window.event}function Z(st,J,g){if(J=nt(J),J.zrX!=null)return J;var Q=J.type,j=Q&&Q.indexOf("touch")>=0;if(j){var X=Q!=="touchend"?J.targetTouches[0]:J.changedTouches[0];X&&gt(st,X,J,g)}else{gt(st,J,J,g);var O=tt(J);J.zrDelta=O?O/120:-(J.detail||0)/3}var K=J.button;return J.which==null&&K!==void 0&&q.test(J.type)&&(J.which=K&1?1:K&2?3:K&4?2:0),J}function tt(st){var J=st.wheelDelta;if(J)return J;var g=st.deltaX,Q=st.deltaY;if(g==null||Q==null)return J;var j=Math.abs(Q!==0?Q:g),O=Q>0?-1:Q<0?1:g>0?-1:1;return 3*j*O}function ot(st,J,g,Q){st.addEventListener(J,g,Q)}function W(st,J,g,Q){st.removeEventListener(J,g,Q)}var Y=function(st){st.preventDefault(),st.stopPropagation(),st.cancelBubble=!0};function H(st){return st.which===2||st.which===3}},58427:function(Pe,ee,z){z.d(ee,{Iu:function(){return yt},JG:function(){return q},U1:function(){return gt},U_:function(){return nt},Ue:function(){return F},bA:function(){return xt},d9:function(){return Z},dC:function(){return vt},yR:function(){return dt}});function F(){return[1,0,0,1,0,0]}function dt(tt){return tt[0]=1,tt[1]=0,tt[2]=0,tt[3]=1,tt[4]=0,tt[5]=0,tt}function q(tt,ot){return tt[0]=ot[0],tt[1]=ot[1],tt[2]=ot[2],tt[3]=ot[3],tt[4]=ot[4],tt[5]=ot[5],tt}function vt(tt,ot,W){var Y=ot[0]*W[0]+ot[2]*W[1],H=ot[1]*W[0]+ot[3]*W[1],st=ot[0]*W[2]+ot[2]*W[3],J=ot[1]*W[2]+ot[3]*W[3],g=ot[0]*W[4]+ot[2]*W[5]+ot[4],Q=ot[1]*W[4]+ot[3]*W[5]+ot[5];return tt[0]=Y,tt[1]=H,tt[2]=st,tt[3]=J,tt[4]=g,tt[5]=Q,tt}function yt(tt,ot,W){return tt[0]=ot[0],tt[1]=ot[1],tt[2]=ot[2],tt[3]=ot[3],tt[4]=ot[4]+W[0],tt[5]=ot[5]+W[1],tt}function gt(tt,ot,W){var Y=ot[0],H=ot[2],st=ot[4],J=ot[1],g=ot[3],Q=ot[5],j=Math.sin(W),O=Math.cos(W);return tt[0]=Y*O+J*j,tt[1]=-Y*j+J*O,tt[2]=H*O+g*j,tt[3]=-H*j+O*g,tt[4]=O*st+j*Q,tt[5]=O*Q-j*st,tt}function xt(tt,ot,W){var Y=W[0],H=W[1];return tt[0]=ot[0]*Y,tt[1]=ot[1]*H,tt[2]=ot[2]*Y,tt[3]=ot[3]*H,tt[4]=ot[4]*Y,tt[5]=ot[5]*H,tt}function nt(tt,ot){var W=ot[0],Y=ot[2],H=ot[4],st=ot[1],J=ot[3],g=ot[5],Q=W*J-st*Y;return Q?(Q=1/Q,tt[0]=J*Q,tt[1]=-st*Q,tt[2]=-Y*Q,tt[3]=W*Q,tt[4]=(Y*g-J*H)*Q,tt[5]=(st*H-W*g)*Q,tt):null}function Z(tt){var ot=F();return q(ot,tt),ot}},47297:function(Pe,ee,z){z.d(ee,{Uo:function(){return q},n5:function(){return F},qW:function(){return Z},rk:function(){return dt}});var F=12,dt="sans-serif",q=F+"px "+dt,vt=20,yt=100,gt="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function xt(ot){var W={};if(typeof JSON=="undefined")return W;for(var Y=0;Y<ot.length;Y++){var H=String.fromCharCode(Y+32),st=(ot.charCodeAt(Y)-vt)/yt;W[H]=st}return W}var nt=xt(gt),Z={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var ot,W;return function(Y,H){if(!ot){var st=Z.createCanvas();ot=st&&st.getContext("2d")}if(ot)return W!==H&&(W=ot.font=H||q),ot.measureText(Y);Y=Y||"",H=H||q;var J=/(\d+)px/.exec(H),g=J&&+J[1]||F,Q=0;if(H.indexOf("mono")>=0)Q=g*Y.length;else for(var j=0;j<Y.length;j++){var O=nt[Y[j]];Q+=O==null?g:O*g}return{width:Q}}}(),loadImage:function(ot,W,Y){var H=new Image;return H.onload=W,H.onerror=Y,H.src=ot,H}};function tt(ot){for(var W in Z)ot[W]&&(Z[W]=ot[W])}},59330:function(Pe,ee,z){z.d(ee,{Z:function(){return ot}});var F=32,dt=7,q=256;function vt(W){for(var Y=0;W>=F;)Y|=W&1,W>>=1;return W+Y}function yt(W,Y,H,st){var J=Y+1;if(J===H)return 1;if(st(W[J++],W[Y])<0){for(;J<H&&st(W[J],W[J-1])<0;)J++;gt(W,Y,J)}else for(;J<H&&st(W[J],W[J-1])>=0;)J++;return J-Y}function gt(W,Y,H){for(H--;Y<H;){var st=W[Y];W[Y++]=W[H],W[H--]=st}}function xt(W,Y,H,st,J){for(st===Y&&st++;st<H;st++){for(var g=W[st],Q=Y,j=st,O;Q<j;)O=Q+j>>>1,J(g,W[O])<0?j=O:Q=O+1;var X=st-Q;switch(X){case 3:W[Q+3]=W[Q+2];case 2:W[Q+2]=W[Q+1];case 1:W[Q+1]=W[Q];break;default:for(;X>0;)W[Q+X]=W[Q+X-1],X--}W[Q]=g}}function nt(W,Y,H,st,J,g){var Q=0,j=0,O=1;if(g(W,Y[H+J])>0){for(j=st-J;O<j&&g(W,Y[H+J+O])>0;)Q=O,O=(O<<1)+1,O<=0&&(O=j);O>j&&(O=j),Q+=J,O+=J}else{for(j=J+1;O<j&&g(W,Y[H+J-O])<=0;)Q=O,O=(O<<1)+1,O<=0&&(O=j);O>j&&(O=j);var X=Q;Q=J-O,O=J-X}for(Q++;Q<O;){var K=Q+(O-Q>>>1);g(W,Y[H+K])>0?Q=K+1:O=K}return O}function Z(W,Y,H,st,J,g){var Q=0,j=0,O=1;if(g(W,Y[H+J])<0){for(j=J+1;O<j&&g(W,Y[H+J-O])<0;)Q=O,O=(O<<1)+1,O<=0&&(O=j);O>j&&(O=j);var X=Q;Q=J-O,O=J-X}else{for(j=st-J;O<j&&g(W,Y[H+J+O])>=0;)Q=O,O=(O<<1)+1,O<=0&&(O=j);O>j&&(O=j),Q+=J,O+=J}for(Q++;Q<O;){var K=Q+(O-Q>>>1);g(W,Y[H+K])<0?O=K:Q=K+1}return O}function tt(W,Y){var H=dt,st=0,J=q,g=0,Q,j,O=0;st=W.length,st<2*q&&(J=st>>>1);var X=[];g=st<120?5:st<1542?10:st<119151?19:40,Q=[],j=[];function K(M,b){Q[O]=M,j[O]=b,O+=1}function G(){for(;O>1;){var M=O-2;if(M>=1&&j[M-1]<=j[M]+j[M+1]||M>=2&&j[M-2]<=j[M]+j[M-1])j[M-1]<j[M+1]&&M--;else if(j[M]>j[M+1])break;R(M)}}function k(){for(;O>1;){var M=O-2;M>0&&j[M-1]<j[M+1]&&M--,R(M)}}function R(M){var b=Q[M],w=j[M],C=Q[M+1],V=j[M+1];j[M]=w+V,M===O-3&&(Q[M+1]=Q[M+2],j[M+1]=j[M+2]),O--;var B=Z(W[C],W,b,w,0,Y);b+=B,w-=B,w!==0&&(V=nt(W[b+w-1],W,C,V,V-1,Y),V!==0&&(w<=V?T(b,w,C,V):P(b,w,C,V)))}function T(M,b,w,C){var V=0;for(V=0;V<b;V++)X[V]=W[M+V];var B=0,ut=w,it=M;if(W[it++]=W[ut++],--C===0){for(V=0;V<b;V++)W[it+V]=X[B+V];return}if(b===1){for(V=0;V<C;V++)W[it+V]=W[ut+V];W[it+C]=X[B];return}for(var lt=H,rt,ct,St;;){rt=0,ct=0,St=!1;do if(Y(W[ut],X[B])<0){if(W[it++]=W[ut++],ct++,rt=0,--C===0){St=!0;break}}else if(W[it++]=X[B++],rt++,ct=0,--b===1){St=!0;break}while((rt|ct)<lt);if(St)break;do{if(rt=Z(W[ut],X,B,b,0,Y),rt!==0){for(V=0;V<rt;V++)W[it+V]=X[B+V];if(it+=rt,B+=rt,b-=rt,b<=1){St=!0;break}}if(W[it++]=W[ut++],--C===0){St=!0;break}if(ct=nt(X[B],W,ut,C,0,Y),ct!==0){for(V=0;V<ct;V++)W[it+V]=W[ut+V];if(it+=ct,ut+=ct,C-=ct,C===0){St=!0;break}}if(W[it++]=X[B++],--b===1){St=!0;break}lt--}while(rt>=dt||ct>=dt);if(St)break;lt<0&&(lt=0),lt+=2}if(H=lt,H<1&&(H=1),b===1){for(V=0;V<C;V++)W[it+V]=W[ut+V];W[it+C]=X[B]}else{if(b===0)throw new Error;for(V=0;V<b;V++)W[it+V]=X[B+V]}}function P(M,b,w,C){var V=0;for(V=0;V<C;V++)X[V]=W[w+V];var B=M+b-1,ut=C-1,it=w+C-1,lt=0,rt=0;if(W[it--]=W[B--],--b===0){for(lt=it-(C-1),V=0;V<C;V++)W[lt+V]=X[V];return}if(C===1){for(it-=b,B-=b,rt=it+1,lt=B+1,V=b-1;V>=0;V--)W[rt+V]=W[lt+V];W[it]=X[ut];return}for(var ct=H;;){var St=0,at=0,mt=!1;do if(Y(X[ut],W[B])<0){if(W[it--]=W[B--],St++,at=0,--b===0){mt=!0;break}}else if(W[it--]=X[ut--],at++,St=0,--C===1){mt=!0;break}while((St|at)<ct);if(mt)break;do{if(St=b-Z(X[ut],W,M,b,b-1,Y),St!==0){for(it-=St,B-=St,b-=St,rt=it+1,lt=B+1,V=St-1;V>=0;V--)W[rt+V]=W[lt+V];if(b===0){mt=!0;break}}if(W[it--]=X[ut--],--C===1){mt=!0;break}if(at=C-nt(W[B],X,0,C,C-1,Y),at!==0){for(it-=at,ut-=at,C-=at,rt=it+1,lt=ut+1,V=0;V<at;V++)W[rt+V]=X[lt+V];if(C<=1){mt=!0;break}}if(W[it--]=W[B--],--b===0){mt=!0;break}ct--}while(St>=dt||at>=dt);if(mt)break;ct<0&&(ct=0),ct+=2}if(H=ct,H<1&&(H=1),C===1){for(it-=b,B-=b,rt=it+1,lt=B+1,V=b-1;V>=0;V--)W[rt+V]=W[lt+V];W[it]=X[ut]}else{if(C===0)throw new Error;for(lt=it-(C-1),V=0;V<C;V++)W[lt+V]=X[V]}}return{mergeRuns:G,forceMergeRuns:k,pushRun:K}}function ot(W,Y,H,st){H||(H=0),st||(st=W.length);var J=st-H;if(!(J<2)){var g=0;if(J<F){g=yt(W,H,st,Y),xt(W,H,st,H+g,Y);return}var Q=tt(W,Y),j=vt(J);do{if(g=yt(W,H,st,Y),g<j){var O=J;O>j&&(O=j),xt(W,H,H+O,H+g,Y),g=O}Q.pushRun(H,g),Q.mergeRuns(),J-=g,H+=g}while(J!==0);Q.forceMergeRuns()}}},70324:function(Pe,ee,z){z.d(ee,{$j:function(){return Dr},Bu:function(){return Bt},H:function(){return st},HD:function(){return rt},I3:function(){return He},Jn:function(){return Q},Jv:function(){return Ht},Kj:function(){return Ot},Kn:function(){return at},M8:function(){return H},MY:function(){return he},Mh:function(){return wt},Qq:function(){return Pt},R1:function(){return re},RI:function(){return ze},S6:function(){return T},TS:function(){return g},UI:function(){return P},WA:function(){return ut},WW:function(){return cr},XP:function(){return C},XW:function(){return G},ZT:function(){return Ne},ak:function(){return B},cd:function(){return ct},ce:function(){return O},cq:function(){return K},d9:function(){return J},dL:function(){return bt},fU:function(){return Dt},fy:function(){return Be},hX:function(){return b},hj:function(){return St},hu:function(){return be},jB:function(){return k},kJ:function(){return it},kW:function(){return sn},l7:function(){return j},mf:function(){return lt},nW:function(){return or},pD:function(){return Qt},s7:function(){return qe},sE:function(){return w},tP:function(){return ye},u4:function(){return M},zG:function(){return R}});var F=z(47297),dt=M(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(Vt,le){return Vt["[object "+le+"]"]=!0,Vt},{}),q=M(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(Vt,le){return Vt["[object "+le+"Array]"]=!0,Vt},{}),vt=Object.prototype.toString,yt=Array.prototype,gt=yt.forEach,xt=yt.filter,nt=yt.slice,Z=yt.map,tt=function(){}.constructor,ot=tt?tt.prototype:null,W="__proto__",Y=2311;function H(){return Y++}function st(){for(var Vt=[],le=0;le<arguments.length;le++)Vt[le]=arguments[le];typeof console!="undefined"&&console.error.apply(console,Vt)}function J(Vt){if(Vt==null||typeof Vt!="object")return Vt;var le=Vt,Ee=vt.call(Vt);if(Ee==="[object Array]"){if(!pr(Vt)){le=[];for(var Fe=0,Xt=Vt.length;Fe<Xt;Fe++)le[Fe]=J(Vt[Fe])}}else if(q[Ee]){if(!pr(Vt)){var $t=Vt.constructor;if($t.from)le=$t.from(Vt);else{le=new $t(Vt.length);for(var Fe=0,Xt=Vt.length;Fe<Xt;Fe++)le[Fe]=Vt[Fe]}}}else if(!dt[Ee]&&!pr(Vt)&&!wt(Vt)){le={};for(var ie in Vt)Vt.hasOwnProperty(ie)&&ie!==W&&(le[ie]=J(Vt[ie]))}return le}function g(Vt,le,Ee){if(!at(le)||!at(Vt))return Ee?J(le):Vt;for(var Fe in le)if(le.hasOwnProperty(Fe)&&Fe!==W){var Xt=Vt[Fe],$t=le[Fe];at($t)&&at(Xt)&&!it($t)&&!it(Xt)&&!wt($t)&&!wt(Xt)&&!mt($t)&&!mt(Xt)&&!pr($t)&&!pr(Xt)?g(Xt,$t,Ee):(Ee||!(Fe in Vt))&&(Vt[Fe]=J(le[Fe]))}return Vt}function Q(Vt,le){for(var Ee=Vt[0],Fe=1,Xt=Vt.length;Fe<Xt;Fe++)Ee=g(Ee,Vt[Fe],le);return Ee}function j(Vt,le){if(Object.assign)Object.assign(Vt,le);else for(var Ee in le)le.hasOwnProperty(Ee)&&Ee!==W&&(Vt[Ee]=le[Ee]);return Vt}function O(Vt,le,Ee){for(var Fe=C(le),Xt=0;Xt<Fe.length;Xt++){var $t=Fe[Xt];(Ee?le[$t]!=null:Vt[$t]==null)&&(Vt[$t]=le[$t])}return Vt}var X=F.qW.createCanvas;function K(Vt,le){if(Vt){if(Vt.indexOf)return Vt.indexOf(le);for(var Ee=0,Fe=Vt.length;Ee<Fe;Ee++)if(Vt[Ee]===le)return Ee}return-1}function G(Vt,le){var Ee=Vt.prototype;function Fe(){}Fe.prototype=le.prototype,Vt.prototype=new Fe;for(var Xt in Ee)Ee.hasOwnProperty(Xt)&&(Vt.prototype[Xt]=Ee[Xt]);Vt.prototype.constructor=Vt,Vt.superClass=le}function k(Vt,le,Ee){if(Vt="prototype"in Vt?Vt.prototype:Vt,le="prototype"in le?le.prototype:le,Object.getOwnPropertyNames)for(var Fe=Object.getOwnPropertyNames(le),Xt=0;Xt<Fe.length;Xt++){var $t=Fe[Xt];$t!=="constructor"&&(Ee?le[$t]!=null:Vt[$t]==null)&&(Vt[$t]=le[$t])}else O(Vt,le,Ee)}function R(Vt){return!Vt||typeof Vt=="string"?!1:typeof Vt.length=="number"}function T(Vt,le,Ee){if(Vt&&le)if(Vt.forEach&&Vt.forEach===gt)Vt.forEach(le,Ee);else if(Vt.length===+Vt.length)for(var Fe=0,Xt=Vt.length;Fe<Xt;Fe++)le.call(Ee,Vt[Fe],Fe,Vt);else for(var $t in Vt)Vt.hasOwnProperty($t)&&le.call(Ee,Vt[$t],$t,Vt)}function P(Vt,le,Ee){if(!Vt)return[];if(!le)return ye(Vt);if(Vt.map&&Vt.map===Z)return Vt.map(le,Ee);for(var Fe=[],Xt=0,$t=Vt.length;Xt<$t;Xt++)Fe.push(le.call(Ee,Vt[Xt],Xt,Vt));return Fe}function M(Vt,le,Ee,Fe){if(Vt&&le){for(var Xt=0,$t=Vt.length;Xt<$t;Xt++)Ee=le.call(Fe,Ee,Vt[Xt],Xt,Vt);return Ee}}function b(Vt,le,Ee){if(!Vt)return[];if(!le)return ye(Vt);if(Vt.filter&&Vt.filter===xt)return Vt.filter(le,Ee);for(var Fe=[],Xt=0,$t=Vt.length;Xt<$t;Xt++)le.call(Ee,Vt[Xt],Xt,Vt)&&Fe.push(Vt[Xt]);return Fe}function w(Vt,le,Ee){if(Vt&&le){for(var Fe=0,Xt=Vt.length;Fe<Xt;Fe++)if(le.call(Ee,Vt[Fe],Fe,Vt))return Vt[Fe]}}function C(Vt){if(!Vt)return[];if(Object.keys)return Object.keys(Vt);var le=[];for(var Ee in Vt)Vt.hasOwnProperty(Ee)&&le.push(Ee);return le}function V(Vt,le){for(var Ee=[],Fe=2;Fe<arguments.length;Fe++)Ee[Fe-2]=arguments[Fe];return function(){return Vt.apply(le,Ee.concat(nt.call(arguments)))}}var B=ot&&lt(ot.bind)?ot.call.bind(ot.bind):V;function ut(Vt){for(var le=[],Ee=1;Ee<arguments.length;Ee++)le[Ee-1]=arguments[Ee];return function(){return Vt.apply(this,le.concat(nt.call(arguments)))}}function it(Vt){return Array.isArray?Array.isArray(Vt):vt.call(Vt)==="[object Array]"}function lt(Vt){return typeof Vt=="function"}function rt(Vt){return typeof Vt=="string"}function ct(Vt){return vt.call(Vt)==="[object String]"}function St(Vt){return typeof Vt=="number"}function at(Vt){var le=typeof Vt;return le==="function"||!!Vt&&le==="object"}function mt(Vt){return!!dt[vt.call(Vt)]}function Dt(Vt){return!!q[vt.call(Vt)]}function wt(Vt){return typeof Vt=="object"&&typeof Vt.nodeType=="number"&&typeof Vt.ownerDocument=="object"}function Pt(Vt){return Vt.colorStops!=null}function bt(Vt){return Vt.image!=null}function Ot(Vt){return vt.call(Vt)==="[object RegExp]"}function Bt(Vt){return Vt!==Vt}function Ht(){for(var Vt=[],le=0;le<arguments.length;le++)Vt[le]=arguments[le];for(var Ee=0,Fe=Vt.length;Ee<Fe;Ee++)if(Vt[Ee]!=null)return Vt[Ee]}function Qt(Vt,le){return Vt!=null?Vt:le}function re(Vt,le,Ee){return Vt!=null?Vt:le!=null?le:Ee}function ye(Vt){for(var le=[],Ee=1;Ee<arguments.length;Ee++)le[Ee-1]=arguments[Ee];return nt.apply(Vt,le)}function he(Vt){if(typeof Vt=="number")return[Vt,Vt,Vt,Vt];var le=Vt.length;return le===2?[Vt[0],Vt[1],Vt[0],Vt[1]]:le===3?[Vt[0],Vt[1],Vt[2],Vt[1]]:Vt}function be(Vt,le){if(!Vt)throw new Error(le)}function Be(Vt){return Vt==null?null:typeof Vt.trim=="function"?Vt.trim():Vt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Ze="__ec_primitive__";function qe(Vt){Vt[Ze]=!0}function pr(Vt){return Vt[Ze]}var wr=function(){function Vt(){this.data={}}return Vt.prototype.delete=function(le){var Ee=this.has(le);return Ee&&delete this.data[le],Ee},Vt.prototype.has=function(le){return this.data.hasOwnProperty(le)},Vt.prototype.get=function(le){return this.data[le]},Vt.prototype.set=function(le,Ee){return this.data[le]=Ee,this},Vt.prototype.keys=function(){return C(this.data)},Vt.prototype.forEach=function(le){var Ee=this.data;for(var Fe in Ee)Ee.hasOwnProperty(Fe)&&le(Ee[Fe],Fe)},Vt}(),Or=typeof Map=="function";function Sr(){return Or?new Map:new wr}var Vr=function(){function Vt(le){var Ee=it(le);this.data=Sr();var Fe=this;le instanceof Vt?le.each(Xt):le&&T(le,Xt);function Xt($t,ie){Ee?Fe.set($t,ie):Fe.set(ie,$t)}}return Vt.prototype.hasKey=function(le){return this.data.has(le)},Vt.prototype.get=function(le){return this.data.get(le)},Vt.prototype.set=function(le,Ee){return this.data.set(le,Ee),Ee},Vt.prototype.each=function(le,Ee){this.data.forEach(function(Fe,Xt){le.call(Ee,Fe,Xt)})},Vt.prototype.keys=function(){var le=this.data.keys();return Or?Array.from(le):le},Vt.prototype.removeKey=function(le){this.data.delete(le)},Vt}();function sn(Vt){return new Vr(Vt)}function cr(Vt,le){for(var Ee=new Vt.constructor(Vt.length+le.length),Fe=0;Fe<Vt.length;Fe++)Ee[Fe]=Vt[Fe];for(var Xt=Vt.length,Fe=0;Fe<le.length;Fe++)Ee[Fe+Xt]=le[Fe];return Ee}function or(Vt,le){var Ee;if(Object.create)Ee=Object.create(Vt);else{var Fe=function(){};Fe.prototype=Vt,Ee=new Fe}return le&&j(Ee,le),Ee}function Dr(Vt){var le=Vt.style;le.webkitUserSelect="none",le.userSelect="none",le.webkitTapHighlightColor="rgba(0,0,0,0)",le["-webkit-touch-callout"]="none"}function ze(Vt,le){return Vt.hasOwnProperty(le)}function Ne(){}var He=180/Math.PI},85755:function(Pe,ee,z){z.d(ee,{Fp:function(){return R},Fv:function(){return J},IH:function(){return yt},JG:function(){return dt},Ne:function(){return G},TE:function(){return g},TK:function(){return Q},Ue:function(){return F},VV:function(){return k},WU:function(){return O},Zh:function(){return nt},bA:function(){return st},d9:function(){return q},lu:function(){return xt},od:function(){return gt},t7:function(){return K},t8:function(){return vt}});function F(T,P){return T==null&&(T=0),P==null&&(P=0),[T,P]}function dt(T,P){return T[0]=P[0],T[1]=P[1],T}function q(T){return[T[0],T[1]]}function vt(T,P,M){return T[0]=P,T[1]=M,T}function yt(T,P,M){return T[0]=P[0]+M[0],T[1]=P[1]+M[1],T}function gt(T,P,M,b){return T[0]=P[0]+M[0]*b,T[1]=P[1]+M[1]*b,T}function xt(T,P,M){return T[0]=P[0]-M[0],T[1]=P[1]-M[1],T}function nt(T){return Math.sqrt(tt(T))}var Z=null;function tt(T){return T[0]*T[0]+T[1]*T[1]}var ot=null;function W(T,P,M){return T[0]=P[0]*M[0],T[1]=P[1]*M[1],T}function Y(T,P,M){return T[0]=P[0]/M[0],T[1]=P[1]/M[1],T}function H(T,P){return T[0]*P[0]+T[1]*P[1]}function st(T,P,M){return T[0]=P[0]*M,T[1]=P[1]*M,T}function J(T,P){var M=nt(P);return M===0?(T[0]=0,T[1]=0):(T[0]=P[0]/M,T[1]=P[1]/M),T}function g(T,P){return Math.sqrt((T[0]-P[0])*(T[0]-P[0])+(T[1]-P[1])*(T[1]-P[1]))}var Q=g;function j(T,P){return(T[0]-P[0])*(T[0]-P[0])+(T[1]-P[1])*(T[1]-P[1])}var O=j;function X(T,P){return T[0]=-P[0],T[1]=-P[1],T}function K(T,P,M,b){return T[0]=P[0]+b*(M[0]-P[0]),T[1]=P[1]+b*(M[1]-P[1]),T}function G(T,P,M){var b=P[0],w=P[1];return T[0]=M[0]*b+M[2]*w+M[4],T[1]=M[1]*b+M[3]*w+M[5],T}function k(T,P,M){return T[0]=Math.min(P[0],M[0]),T[1]=Math.min(P[1],M[1]),T}function R(T,P,M){return T[0]=Math.max(P[0],M[0]),T[1]=Math.max(P[1],M[1]),T}},99464:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=function(vt){(0,F.ZT)(yt,vt);function yt(){var gt=vt!==null&&vt.apply(this,arguments)||this;return gt.type="compound",gt}return yt.prototype._updatePathDirty=function(){for(var gt=this.shape.paths,xt=this.shapeChanged(),nt=0;nt<gt.length;nt++)xt=xt||gt[nt].shapeChanged();xt&&this.dirtyShape()},yt.prototype.beforeBrush=function(){this._updatePathDirty();for(var gt=this.shape.paths||[],xt=this.getGlobalScale(),nt=0;nt<gt.length;nt++)gt[nt].path||gt[nt].createPathProxy(),gt[nt].path.setScale(xt[0],xt[1],gt[nt].segmentIgnoreThreshold)},yt.prototype.buildPath=function(gt,xt){for(var nt=xt.paths||[],Z=0;Z<nt.length;Z++)nt[Z].buildPath(gt,nt[Z].shape,!0)},yt.prototype.afterBrush=function(){for(var gt=this.shape.paths||[],xt=0;xt<gt.length;xt++)gt[xt].pathUpdated()},yt.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),dt.ZP.prototype.getBoundingRect.call(this)},yt}(dt.ZP);ee.Z=q},11635:function(Pe,ee,z){z.d(ee,{ik:function(){return nt},tj:function(){return xt}});var F=z(12012),dt=z(12434),q=z(16128),vt=z(70324),yt=z(53197),gt="__zr_style_"+Math.round(Math.random()*10),xt={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},nt={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};xt[gt]=!0;var Z=["z","z2","invisible"],tt=["invisible"],ot=function(st){(0,F.ZT)(J,st);function J(g){return st.call(this,g)||this}return J.prototype._init=function(g){for(var Q=(0,vt.XP)(g),j=0;j<Q.length;j++){var O=Q[j];O==="style"?this.useStyle(g[O]):st.prototype.attrKV.call(this,O,g[O])}this.style||this.useStyle({})},J.prototype.beforeBrush=function(){},J.prototype.afterBrush=function(){},J.prototype.innerBeforeBrush=function(){},J.prototype.innerAfterBrush=function(){},J.prototype.shouldBePainted=function(g,Q,j,O){var X=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&H(this,g,Q)||X&&!X[0]&&!X[3])return!1;if(j&&this.__clipPaths){for(var K=0;K<this.__clipPaths.length;++K)if(this.__clipPaths[K].isZeroArea())return!1}if(O&&this.parent)for(var G=this.parent;G;){if(G.ignore)return!1;G=G.parent}return!0},J.prototype.contain=function(g,Q){return this.rectContain(g,Q)},J.prototype.traverse=function(g,Q){g.call(Q,this)},J.prototype.rectContain=function(g,Q){var j=this.transformCoordToLocal(g,Q),O=this.getBoundingRect();return O.contain(j[0],j[1])},J.prototype.getPaintRect=function(){var g=this._paintRect;if(!this._paintRect||this.__dirty){var Q=this.transform,j=this.getBoundingRect(),O=this.style,X=O.shadowBlur||0,K=O.shadowOffsetX||0,G=O.shadowOffsetY||0;g=this._paintRect||(this._paintRect=new q.Z(0,0,0,0)),Q?q.Z.applyTransform(g,j,Q):g.copy(j),(X||K||G)&&(g.width+=X*2+Math.abs(K),g.height+=X*2+Math.abs(G),g.x=Math.min(g.x,g.x+K-X),g.y=Math.min(g.y,g.y+G-X));var k=this.dirtyRectTolerance;g.isZero()||(g.x=Math.floor(g.x-k),g.y=Math.floor(g.y-k),g.width=Math.ceil(g.width+1+k*2),g.height=Math.ceil(g.height+1+k*2))}return g},J.prototype.setPrevPaintRect=function(g){g?(this._prevPaintRect=this._prevPaintRect||new q.Z(0,0,0,0),this._prevPaintRect.copy(g)):this._prevPaintRect=null},J.prototype.getPrevPaintRect=function(){return this._prevPaintRect},J.prototype.animateStyle=function(g){return this.animate("style",g)},J.prototype.updateDuringAnimation=function(g){g==="style"?this.dirtyStyle():this.markRedraw()},J.prototype.attrKV=function(g,Q){g!=="style"?st.prototype.attrKV.call(this,g,Q):this.style?this.setStyle(Q):this.useStyle(Q)},J.prototype.setStyle=function(g,Q){return typeof g=="string"?this.style[g]=Q:(0,vt.l7)(this.style,g),this.dirtyStyle(),this},J.prototype.dirtyStyle=function(g){g||this.markRedraw(),this.__dirty|=yt.SE,this._rect&&(this._rect=null)},J.prototype.dirty=function(){this.dirtyStyle()},J.prototype.styleChanged=function(){return!!(this.__dirty&yt.SE)},J.prototype.styleUpdated=function(){this.__dirty&=~yt.SE},J.prototype.createStyle=function(g){return(0,vt.nW)(xt,g)},J.prototype.useStyle=function(g){g[gt]||(g=this.createStyle(g)),this.__inHover?this.__hoverStyle=g:this.style=g,this.dirtyStyle()},J.prototype.isStyleObject=function(g){return g[gt]},J.prototype._innerSaveToNormal=function(g){st.prototype._innerSaveToNormal.call(this,g);var Q=this._normalState;g.style&&!Q.style&&(Q.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(g,Q,Z)},J.prototype._applyStateObj=function(g,Q,j,O,X,K){st.prototype._applyStateObj.call(this,g,Q,j,O,X,K);var G=!(Q&&O),k;if(Q&&Q.style?X?O?k=Q.style:(k=this._mergeStyle(this.createStyle(),j.style),this._mergeStyle(k,Q.style)):(k=this._mergeStyle(this.createStyle(),O?this.style:j.style),this._mergeStyle(k,Q.style)):G&&(k=j.style),k)if(X){var R=this.style;if(this.style=this.createStyle(G?{}:R),G)for(var T=(0,vt.XP)(R),P=0;P<T.length;P++){var M=T[P];M in k&&(k[M]=k[M],this.style[M]=R[M])}for(var b=(0,vt.XP)(k),P=0;P<b.length;P++){var M=b[P];this.style[M]=this.style[M]}this._transitionState(g,{style:k},K,this.getAnimationStyleProps())}else this.useStyle(k);for(var w=this.__inHover?tt:Z,P=0;P<w.length;P++){var M=w[P];Q&&Q[M]!=null?this[M]=Q[M]:G&&j[M]!=null&&(this[M]=j[M])}},J.prototype._mergeStates=function(g){for(var Q=st.prototype._mergeStates.call(this,g),j,O=0;O<g.length;O++){var X=g[O];X.style&&(j=j||{},this._mergeStyle(j,X.style))}return j&&(Q.style=j),Q},J.prototype._mergeStyle=function(g,Q){return(0,vt.l7)(g,Q),g},J.prototype.getAnimationStyleProps=function(){return nt},J.initDefaultProps=function(){var g=J.prototype;g.type="displayable",g.invisible=!1,g.z=0,g.z2=0,g.zlevel=0,g.culling=!1,g.cursor="pointer",g.rectHover=!1,g.incremental=!1,g._rect=null,g.dirtyRectTolerance=0,g.__dirty=yt.YV|yt.SE}(),J}(dt.Z),W=new q.Z(0,0,0,0),Y=new q.Z(0,0,0,0);function H(st,J,g){return W.copy(st.getBoundingRect()),st.transform&&W.applyTransform(st.transform),Y.width=J,Y.height=g,!W.intersect(Y)}ee.ZP=ot},2413:function(Pe,ee){var z=function(){function F(dt){this.colorStops=dt||[]}return F.prototype.addColorStop=function(dt,q){this.colorStops.push({offset:dt,color:q})},F}();ee.Z=z},2574:function(Pe,ee,z){var F=z(12012),dt=z(70324),q=z(12434),vt=z(16128),yt=function(gt){(0,F.ZT)(xt,gt);function xt(nt){var Z=gt.call(this)||this;return Z.isGroup=!0,Z._children=[],Z.attr(nt),Z}return xt.prototype.childrenRef=function(){return this._children},xt.prototype.children=function(){return this._children.slice()},xt.prototype.childAt=function(nt){return this._children[nt]},xt.prototype.childOfName=function(nt){for(var Z=this._children,tt=0;tt<Z.length;tt++)if(Z[tt].name===nt)return Z[tt]},xt.prototype.childCount=function(){return this._children.length},xt.prototype.add=function(nt){return nt&&nt!==this&&nt.parent!==this&&(this._children.push(nt),this._doAdd(nt)),this},xt.prototype.addBefore=function(nt,Z){if(nt&&nt!==this&&nt.parent!==this&&Z&&Z.parent===this){var tt=this._children,ot=tt.indexOf(Z);ot>=0&&(tt.splice(ot,0,nt),this._doAdd(nt))}return this},xt.prototype.replace=function(nt,Z){var tt=dt.cq(this._children,nt);return tt>=0&&this.replaceAt(Z,tt),this},xt.prototype.replaceAt=function(nt,Z){var tt=this._children,ot=tt[Z];if(nt&&nt!==this&&nt.parent!==this&&nt!==ot){tt[Z]=nt,ot.parent=null;var W=this.__zr;W&&ot.removeSelfFromZr(W),this._doAdd(nt)}return this},xt.prototype._doAdd=function(nt){nt.parent&&nt.parent.remove(nt),nt.parent=this;var Z=this.__zr;Z&&Z!==nt.__zr&&nt.addSelfToZr(Z),Z&&Z.refresh()},xt.prototype.remove=function(nt){var Z=this.__zr,tt=this._children,ot=dt.cq(tt,nt);return ot<0?this:(tt.splice(ot,1),nt.parent=null,Z&&nt.removeSelfFromZr(Z),Z&&Z.refresh(),this)},xt.prototype.removeAll=function(){for(var nt=this._children,Z=this.__zr,tt=0;tt<nt.length;tt++){var ot=nt[tt];Z&&ot.removeSelfFromZr(Z),ot.parent=null}return nt.length=0,this},xt.prototype.eachChild=function(nt,Z){for(var tt=this._children,ot=0;ot<tt.length;ot++){var W=tt[ot];nt.call(Z,W,ot)}return this},xt.prototype.traverse=function(nt,Z){for(var tt=0;tt<this._children.length;tt++){var ot=this._children[tt],W=nt.call(Z,ot);ot.isGroup&&!W&&ot.traverse(nt,Z)}return this},xt.prototype.addSelfToZr=function(nt){gt.prototype.addSelfToZr.call(this,nt);for(var Z=0;Z<this._children.length;Z++){var tt=this._children[Z];tt.addSelfToZr(nt)}},xt.prototype.removeSelfFromZr=function(nt){gt.prototype.removeSelfFromZr.call(this,nt);for(var Z=0;Z<this._children.length;Z++){var tt=this._children[Z];tt.removeSelfFromZr(nt)}},xt.prototype.getBoundingRect=function(nt){for(var Z=new vt.Z(0,0,0,0),tt=nt||this._children,ot=[],W=null,Y=0;Y<tt.length;Y++){var H=tt[Y];if(!(H.ignore||H.invisible)){var st=H.getBoundingRect(),J=H.getLocalTransform(ot);J?(vt.Z.applyTransform(Z,st,J),W=W||Z.clone(),W.union(Z)):(W=W||st.clone(),W.union(st))}}return W||Z},xt}(q.Z);yt.prototype.type="group",ee.Z=yt},13806:function(Pe,ee,z){var F=z(12012),dt=z(11635),q=z(16128),vt=z(70324),yt=(0,vt.ce)({x:0,y:0},dt.tj),gt={style:(0,vt.ce)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},dt.ik.style)};function xt(Z){return!!(Z&&typeof Z!="string"&&Z.width&&Z.height)}var nt=function(Z){(0,F.ZT)(tt,Z);function tt(){return Z!==null&&Z.apply(this,arguments)||this}return tt.prototype.createStyle=function(ot){return(0,vt.nW)(yt,ot)},tt.prototype._getSize=function(ot){var W=this.style,Y=W[ot];if(Y!=null)return Y;var H=xt(W.image)?W.image:this.__image;if(!H)return 0;var st=ot==="width"?"height":"width",J=W[st];return J==null?H[ot]:H[ot]/H[st]*J},tt.prototype.getWidth=function(){return this._getSize("width")},tt.prototype.getHeight=function(){return this._getSize("height")},tt.prototype.getAnimationStyleProps=function(){return gt},tt.prototype.getBoundingRect=function(){var ot=this.style;return this._rect||(this._rect=new q.Z(ot.x||0,ot.y||0,this.getWidth(),this.getHeight())),this._rect},tt}(dt.ZP);nt.prototype.type="image",ee.ZP=nt},55602:function(Pe,ee,z){var F=z(12012),dt=z(2413),q=function(vt){(0,F.ZT)(yt,vt);function yt(gt,xt,nt,Z,tt,ot){var W=vt.call(this,tt)||this;return W.x=gt==null?0:gt,W.y=xt==null?0:xt,W.x2=nt==null?1:nt,W.y2=Z==null?0:Z,W.type="linear",W.global=ot||!1,W}return yt}(dt.Z);ee.Z=q},66210:function(Pe,ee,z){z.d(ee,{$t:function(){return w},ZP:function(){return ut}});var F=z(12012),dt=z(11635),q=z(29436),vt=z(55265),yt=z(14296);function gt(it,lt,rt,ct,St,at,mt,Dt,wt,Pt,bt){if(wt===0)return!1;var Ot=wt;if(bt>lt+Ot&&bt>ct+Ot&&bt>at+Ot&&bt>Dt+Ot||bt<lt-Ot&&bt<ct-Ot&&bt<at-Ot&&bt<Dt-Ot||Pt>it+Ot&&Pt>rt+Ot&&Pt>St+Ot&&Pt>mt+Ot||Pt<it-Ot&&Pt<rt-Ot&&Pt<St-Ot&&Pt<mt-Ot)return!1;var Bt=yt.t1(it,lt,rt,ct,St,at,mt,Dt,Pt,bt,null);return Bt<=Ot/2}var xt=z(48610),nt=z(47833),Z=Math.PI*2;function tt(it,lt,rt,ct,St,at,mt,Dt,wt){if(mt===0)return!1;var Pt=mt;Dt-=it,wt-=lt;var bt=Math.sqrt(Dt*Dt+wt*wt);if(bt-Pt>rt||bt+Pt<rt)return!1;if(Math.abs(ct-St)%Z<1e-4)return!0;if(at){var Ot=ct;ct=(0,nt.m)(St),St=(0,nt.m)(Ot)}else ct=(0,nt.m)(ct),St=(0,nt.m)(St);ct>St&&(St+=Z);var Bt=Math.atan2(wt,Dt);return Bt<0&&(Bt+=Z),Bt>=ct&&Bt<=St||Bt+Z>=ct&&Bt+Z<=St}var ot=z(99271),W=q.Z.CMD,Y=Math.PI*2,H=1e-4;function st(it,lt){return Math.abs(it-lt)<H}var J=[-1,-1,-1],g=[-1,-1];function Q(){var it=g[0];g[0]=g[1],g[1]=it}function j(it,lt,rt,ct,St,at,mt,Dt,wt,Pt){if(Pt>lt&&Pt>ct&&Pt>at&&Pt>Dt||Pt<lt&&Pt<ct&&Pt<at&&Pt<Dt)return 0;var bt=yt.kD(lt,ct,at,Dt,Pt,J);if(bt===0)return 0;for(var Ot=0,Bt=-1,Ht=void 0,Qt=void 0,re=0;re<bt;re++){var ye=J[re],he=ye===0||ye===1?.5:1,be=yt.af(it,rt,St,mt,ye);be<wt||(Bt<0&&(Bt=yt.pP(lt,ct,at,Dt,g),g[1]<g[0]&&Bt>1&&Q(),Ht=yt.af(lt,ct,at,Dt,g[0]),Bt>1&&(Qt=yt.af(lt,ct,at,Dt,g[1]))),Bt===2?ye<g[0]?Ot+=Ht<lt?he:-he:ye<g[1]?Ot+=Qt<Ht?he:-he:Ot+=Dt<Qt?he:-he:ye<g[0]?Ot+=Ht<lt?he:-he:Ot+=Dt<Ht?he:-he)}return Ot}function O(it,lt,rt,ct,St,at,mt,Dt){if(Dt>lt&&Dt>ct&&Dt>at||Dt<lt&&Dt<ct&&Dt<at)return 0;var wt=yt.Jz(lt,ct,at,Dt,J);if(wt===0)return 0;var Pt=yt.QC(lt,ct,at);if(Pt>=0&&Pt<=1){for(var bt=0,Ot=yt.Zm(lt,ct,at,Pt),Bt=0;Bt<wt;Bt++){var Ht=J[Bt]===0||J[Bt]===1?.5:1,Qt=yt.Zm(it,rt,St,J[Bt]);Qt<mt||(J[Bt]<Pt?bt+=Ot<lt?Ht:-Ht:bt+=at<Ot?Ht:-Ht)}return bt}else{var Ht=J[0]===0||J[0]===1?.5:1,Qt=yt.Zm(it,rt,St,J[0]);return Qt<mt?0:at<lt?Ht:-Ht}}function X(it,lt,rt,ct,St,at,mt,Dt){if(Dt-=lt,Dt>rt||Dt<-rt)return 0;var wt=Math.sqrt(rt*rt-Dt*Dt);J[0]=-wt,J[1]=wt;var Pt=Math.abs(ct-St);if(Pt<1e-4)return 0;if(Pt>=Y-1e-4){ct=0,St=Y;var bt=at?1:-1;return mt>=J[0]+it&&mt<=J[1]+it?bt:0}if(ct>St){var Ot=ct;ct=St,St=Ot}ct<0&&(ct+=Y,St+=Y);for(var Bt=0,Ht=0;Ht<2;Ht++){var Qt=J[Ht];if(Qt+it>mt){var re=Math.atan2(Dt,Qt),bt=at?1:-1;re<0&&(re=Y+re),(re>=ct&&re<=St||re+Y>=ct&&re+Y<=St)&&(re>Math.PI/2&&re<Math.PI*1.5&&(bt=-bt),Bt+=bt)}}return Bt}function K(it,lt,rt,ct,St){for(var at=it.data,mt=it.len(),Dt=0,wt=0,Pt=0,bt=0,Ot=0,Bt,Ht,Qt=0;Qt<mt;){var re=at[Qt++],ye=Qt===1;switch(re===W.M&&Qt>1&&(rt||(Dt+=(0,ot.Z)(wt,Pt,bt,Ot,ct,St))),ye&&(wt=at[Qt],Pt=at[Qt+1],bt=wt,Ot=Pt),re){case W.M:bt=at[Qt++],Ot=at[Qt++],wt=bt,Pt=Ot;break;case W.L:if(rt){if(vt.m(wt,Pt,at[Qt],at[Qt+1],lt,ct,St))return!0}else Dt+=(0,ot.Z)(wt,Pt,at[Qt],at[Qt+1],ct,St)||0;wt=at[Qt++],Pt=at[Qt++];break;case W.C:if(rt){if(gt(wt,Pt,at[Qt++],at[Qt++],at[Qt++],at[Qt++],at[Qt],at[Qt+1],lt,ct,St))return!0}else Dt+=j(wt,Pt,at[Qt++],at[Qt++],at[Qt++],at[Qt++],at[Qt],at[Qt+1],ct,St)||0;wt=at[Qt++],Pt=at[Qt++];break;case W.Q:if(rt){if(xt.m(wt,Pt,at[Qt++],at[Qt++],at[Qt],at[Qt+1],lt,ct,St))return!0}else Dt+=O(wt,Pt,at[Qt++],at[Qt++],at[Qt],at[Qt+1],ct,St)||0;wt=at[Qt++],Pt=at[Qt++];break;case W.A:var he=at[Qt++],be=at[Qt++],Be=at[Qt++],Ze=at[Qt++],qe=at[Qt++],pr=at[Qt++];Qt+=1;var wr=!!(1-at[Qt++]);Bt=Math.cos(qe)*Be+he,Ht=Math.sin(qe)*Ze+be,ye?(bt=Bt,Ot=Ht):Dt+=(0,ot.Z)(wt,Pt,Bt,Ht,ct,St);var Or=(ct-he)*Ze/Be+he;if(rt){if(tt(he,be,Ze,qe,qe+pr,wr,lt,Or,St))return!0}else Dt+=X(he,be,Ze,qe,qe+pr,wr,Or,St);wt=Math.cos(qe+pr)*Be+he,Pt=Math.sin(qe+pr)*Ze+be;break;case W.R:bt=wt=at[Qt++],Ot=Pt=at[Qt++];var Sr=at[Qt++],Vr=at[Qt++];if(Bt=bt+Sr,Ht=Ot+Vr,rt){if(vt.m(bt,Ot,Bt,Ot,lt,ct,St)||vt.m(Bt,Ot,Bt,Ht,lt,ct,St)||vt.m(Bt,Ht,bt,Ht,lt,ct,St)||vt.m(bt,Ht,bt,Ot,lt,ct,St))return!0}else Dt+=(0,ot.Z)(Bt,Ot,Bt,Ht,ct,St),Dt+=(0,ot.Z)(bt,Ht,bt,Ot,ct,St);break;case W.Z:if(rt){if(vt.m(wt,Pt,bt,Ot,lt,ct,St))return!0}else Dt+=(0,ot.Z)(wt,Pt,bt,Ot,ct,St);wt=bt,Pt=Ot;break}}return!rt&&!st(Pt,Ot)&&(Dt+=(0,ot.Z)(wt,Pt,bt,Ot,ct,St)||0),Dt!==0}function G(it,lt,rt){return K(it,0,!1,lt,rt)}function k(it,lt,rt,ct){return K(it,lt,!0,rt,ct)}var R=z(70324),T=z(96170),P=z(62623),M=z(53197),b=z(23463),w=(0,R.ce)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},dt.tj),C={style:(0,R.ce)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},dt.ik.style)},V=b.dN.concat(["invisible","culling","z","z2","zlevel","parent"]),B=function(it){(0,F.ZT)(lt,it);function lt(rt){return it.call(this,rt)||this}return lt.prototype.update=function(){var rt=this;it.prototype.update.call(this);var ct=this.style;if(ct.decal){var St=this._decalEl=this._decalEl||new lt;St.buildPath===lt.prototype.buildPath&&(St.buildPath=function(wt){rt.buildPath(wt,rt.shape)}),St.silent=!0;var at=St.style;for(var mt in ct)at[mt]!==ct[mt]&&(at[mt]=ct[mt]);at.fill=ct.fill?ct.decal:null,at.decal=null,at.shadowColor=null,ct.strokeFirst&&(at.stroke=null);for(var Dt=0;Dt<V.length;++Dt)St[V[Dt]]=this[V[Dt]];St.__dirty|=M.YV}else this._decalEl&&(this._decalEl=null)},lt.prototype.getDecalElement=function(){return this._decalEl},lt.prototype._init=function(rt){var ct=(0,R.XP)(rt);this.shape=this.getDefaultShape();var St=this.getDefaultStyle();St&&this.useStyle(St);for(var at=0;at<ct.length;at++){var mt=ct[at],Dt=rt[mt];mt==="style"?this.style?(0,R.l7)(this.style,Dt):this.useStyle(Dt):mt==="shape"?(0,R.l7)(this.shape,Dt):it.prototype.attrKV.call(this,mt,Dt)}this.style||this.useStyle({})},lt.prototype.getDefaultStyle=function(){return null},lt.prototype.getDefaultShape=function(){return{}},lt.prototype.canBeInsideText=function(){return this.hasFill()},lt.prototype.getInsideTextFill=function(){var rt=this.style.fill;if(rt!=="none"){if((0,R.HD)(rt)){var ct=(0,T.lum)(rt,0);return ct>.5?P.vU:ct>.2?P.iv:P.GD}else if(rt)return P.GD}return P.vU},lt.prototype.getInsideTextStroke=function(rt){var ct=this.style.fill;if((0,R.HD)(ct)){var St=this.__zr,at=!!(St&&St.isDarkMode()),mt=(0,T.lum)(rt,0)<P.Ak;if(at===mt)return ct}},lt.prototype.buildPath=function(rt,ct,St){},lt.prototype.pathUpdated=function(){this.__dirty&=~M.RH},lt.prototype.getUpdatedPathProxy=function(rt){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,rt),this.path},lt.prototype.createPathProxy=function(){this.path=new q.Z(!1)},lt.prototype.hasStroke=function(){var rt=this.style,ct=rt.stroke;return!(ct==null||ct==="none"||!(rt.lineWidth>0))},lt.prototype.hasFill=function(){var rt=this.style,ct=rt.fill;return ct!=null&&ct!=="none"},lt.prototype.getBoundingRect=function(){var rt=this._rect,ct=this.style,St=!rt;if(St){var at=!1;this.path||(at=!0,this.createPathProxy());var mt=this.path;(at||this.__dirty&M.RH)&&(mt.beginPath(),this.buildPath(mt,this.shape,!1),this.pathUpdated()),rt=mt.getBoundingRect()}if(this._rect=rt,this.hasStroke()&&this.path&&this.path.len()>0){var Dt=this._rectStroke||(this._rectStroke=rt.clone());if(this.__dirty||St){Dt.copy(rt);var wt=ct.strokeNoScale?this.getLineScale():1,Pt=ct.lineWidth;if(!this.hasFill()){var bt=this.strokeContainThreshold;Pt=Math.max(Pt,bt==null?4:bt)}wt>1e-10&&(Dt.width+=Pt/wt,Dt.height+=Pt/wt,Dt.x-=Pt/wt/2,Dt.y-=Pt/wt/2)}return Dt}return rt},lt.prototype.contain=function(rt,ct){var St=this.transformCoordToLocal(rt,ct),at=this.getBoundingRect(),mt=this.style;if(rt=St[0],ct=St[1],at.contain(rt,ct)){var Dt=this.path;if(this.hasStroke()){var wt=mt.lineWidth,Pt=mt.strokeNoScale?this.getLineScale():1;if(Pt>1e-10&&(this.hasFill()||(wt=Math.max(wt,this.strokeContainThreshold)),k(Dt,wt/Pt,rt,ct)))return!0}if(this.hasFill())return G(Dt,rt,ct)}return!1},lt.prototype.dirtyShape=function(){this.__dirty|=M.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},lt.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},lt.prototype.animateShape=function(rt){return this.animate("shape",rt)},lt.prototype.updateDuringAnimation=function(rt){rt==="style"?this.dirtyStyle():rt==="shape"?this.dirtyShape():this.markRedraw()},lt.prototype.attrKV=function(rt,ct){rt==="shape"?this.setShape(ct):it.prototype.attrKV.call(this,rt,ct)},lt.prototype.setShape=function(rt,ct){var St=this.shape;return St||(St=this.shape={}),typeof rt=="string"?St[rt]=ct:(0,R.l7)(St,rt),this.dirtyShape(),this},lt.prototype.shapeChanged=function(){return!!(this.__dirty&M.RH)},lt.prototype.createStyle=function(rt){return(0,R.nW)(w,rt)},lt.prototype._innerSaveToNormal=function(rt){it.prototype._innerSaveToNormal.call(this,rt);var ct=this._normalState;rt.shape&&!ct.shape&&(ct.shape=(0,R.l7)({},this.shape))},lt.prototype._applyStateObj=function(rt,ct,St,at,mt,Dt){it.prototype._applyStateObj.call(this,rt,ct,St,at,mt,Dt);var wt=!(ct&&at),Pt;if(ct&&ct.shape?mt?at?Pt=ct.shape:(Pt=(0,R.l7)({},St.shape),(0,R.l7)(Pt,ct.shape)):(Pt=(0,R.l7)({},at?this.shape:St.shape),(0,R.l7)(Pt,ct.shape)):wt&&(Pt=St.shape),Pt)if(mt){this.shape=(0,R.l7)({},this.shape);for(var bt={},Ot=(0,R.XP)(Pt),Bt=0;Bt<Ot.length;Bt++){var Ht=Ot[Bt];typeof Pt[Ht]=="object"?this.shape[Ht]=Pt[Ht]:bt[Ht]=Pt[Ht]}this._transitionState(rt,{shape:bt},Dt)}else this.shape=Pt,this.dirtyShape()},lt.prototype._mergeStates=function(rt){for(var ct=it.prototype._mergeStates.call(this,rt),St,at=0;at<rt.length;at++){var mt=rt[at];mt.shape&&(St=St||{},this._mergeStyle(St,mt.shape))}return St&&(ct.shape=St),ct},lt.prototype.getAnimationStyleProps=function(){return C},lt.prototype.isZeroArea=function(){return!1},lt.extend=function(rt){var ct=function(at){(0,F.ZT)(mt,at);function mt(Dt){var wt=at.call(this,Dt)||this;return rt.init&&rt.init.call(wt,Dt),wt}return mt.prototype.getDefaultStyle=function(){return(0,R.d9)(rt.style)},mt.prototype.getDefaultShape=function(){return(0,R.d9)(rt.shape)},mt}(lt);for(var St in rt)typeof rt[St]=="function"&&(ct.prototype[St]=rt[St]);return ct},lt.initDefaultProps=function(){var rt=lt.prototype;rt.type="path",rt.strokeContainThreshold=5,rt.segmentIgnoreThreshold=0,rt.subPixelOptimize=!1,rt.autoBatch=!1,rt.__dirty=M.YV|M.SE|M.RH}(),lt}(dt.ZP),ut=B},43606:function(Pe,ee,z){var F=z(12012),dt=z(2413),q=function(vt){(0,F.ZT)(yt,vt);function yt(gt,xt,nt,Z,tt){var ot=vt.call(this,Z)||this;return ot.x=gt==null?.5:gt,ot.y=xt==null?.5:xt,ot.r=nt==null?.5:nt,ot.type="radial",ot.global=tt||!1,ot}return yt}(dt.Z);ee.Z=q},83007:function(Pe,ee,z){var F=z(12012),dt=z(11635),q=z(98733),vt=z(66210),yt=z(70324),gt=z(47297),xt=(0,yt.ce)({strokeFirst:!0,font:gt.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},vt.$t),nt=function(Z){(0,F.ZT)(tt,Z);function tt(){return Z!==null&&Z.apply(this,arguments)||this}return tt.prototype.hasStroke=function(){var ot=this.style,W=ot.stroke;return W!=null&&W!=="none"&&ot.lineWidth>0},tt.prototype.hasFill=function(){var ot=this.style,W=ot.fill;return W!=null&&W!=="none"},tt.prototype.createStyle=function(ot){return(0,yt.nW)(xt,ot)},tt.prototype.setBoundingRect=function(ot){this._rect=ot},tt.prototype.getBoundingRect=function(){var ot=this.style;if(!this._rect){var W=ot.text;W!=null?W+="":W="";var Y=(0,q.lP)(W,ot.font,ot.textAlign,ot.textBaseline);if(Y.x+=ot.x||0,Y.y+=ot.y||0,this.hasStroke()){var H=ot.lineWidth;Y.x-=H/2,Y.y-=H/2,Y.width+=H,Y.height+=H}this._rect=Y}return this._rect},tt.initDefaultProps=function(){var ot=tt.prototype;ot.dirtyRectTolerance=10}(),tt}(dt.ZP);nt.prototype.type="tspan",ee.Z=nt},95169:function(Pe,ee,z){z.d(ee,{VG:function(){return Q},Y1:function(){return O}});var F=z(12012),dt=z(28185),q=z(83007),vt=z(70324),yt=z(98733),gt=z(13806),xt=z(73909),nt=z(16128),Z=z(11635),tt=z(47297),ot={fill:"#000"},W=2,Y={style:(0,vt.ce)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Z.ik.style)},H=function(M){(0,F.ZT)(b,M);function b(w){var C=M.call(this)||this;return C.type="text",C._children=[],C._defaultStyle=ot,C.attr(w),C}return b.prototype.childrenRef=function(){return this._children},b.prototype.update=function(){M.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var w=0;w<this._children.length;w++){var C=this._children[w];C.zlevel=this.zlevel,C.z=this.z,C.z2=this.z2,C.culling=this.culling,C.cursor=this.cursor,C.invisible=this.invisible}},b.prototype.updateTransform=function(){var w=this.innerTransformable;w?(w.updateTransform(),w.transform&&(this.transform=w.transform)):M.prototype.updateTransform.call(this)},b.prototype.getLocalTransform=function(w){var C=this.innerTransformable;return C?C.getLocalTransform(w):M.prototype.getLocalTransform.call(this,w)},b.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),M.prototype.getComputedTransform.call(this)},b.prototype._updateSubTexts=function(){this._childCursor=0,X(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},b.prototype.addSelfToZr=function(w){M.prototype.addSelfToZr.call(this,w);for(var C=0;C<this._children.length;C++)this._children[C].__zr=w},b.prototype.removeSelfFromZr=function(w){M.prototype.removeSelfFromZr.call(this,w);for(var C=0;C<this._children.length;C++)this._children[C].__zr=null},b.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var w=new nt.Z(0,0,0,0),C=this._children,V=[],B=null,ut=0;ut<C.length;ut++){var it=C[ut],lt=it.getBoundingRect(),rt=it.getLocalTransform(V);rt?(w.copy(lt),w.applyTransform(rt),B=B||w.clone(),B.union(w)):(B=B||lt.clone(),B.union(lt))}this._rect=B||w}return this._rect},b.prototype.setDefaultTextStyle=function(w){this._defaultStyle=w||ot},b.prototype.setTextContent=function(w){},b.prototype._mergeStyle=function(w,C){if(!C)return w;var V=C.rich,B=w.rich||V&&{};return(0,vt.l7)(w,C),V&&B?(this._mergeRich(B,V),w.rich=B):B&&(w.rich=B),w},b.prototype._mergeRich=function(w,C){for(var V=(0,vt.XP)(C),B=0;B<V.length;B++){var ut=V[B];w[ut]=w[ut]||{},(0,vt.l7)(w[ut],C[ut])}},b.prototype.getAnimationStyleProps=function(){return Y},b.prototype._getOrCreateChild=function(w){var C=this._children[this._childCursor];return(!C||!(C instanceof w))&&(C=new w),this._children[this._childCursor++]=C,C.__zr=this.__zr,C.parent=this,C},b.prototype._updatePlainTexts=function(){var w=this.style,C=w.font||tt.Uo,V=w.padding,B=T(w),ut=(0,dt.NY)(B,w),it=P(w),lt=!!w.backgroundColor,rt=ut.outerHeight,ct=ut.outerWidth,St=ut.contentWidth,at=ut.lines,mt=ut.lineHeight,Dt=this._defaultStyle,wt=w.x||0,Pt=w.y||0,bt=w.align||Dt.align||"left",Ot=w.verticalAlign||Dt.verticalAlign||"top",Bt=wt,Ht=(0,yt.mU)(Pt,ut.contentHeight,Ot);if(it||V){var Qt=(0,yt.M3)(wt,ct,bt),re=(0,yt.mU)(Pt,rt,Ot);it&&this._renderBackground(w,w,Qt,re,ct,rt)}Ht+=mt/2,V&&(Bt=R(wt,bt,V),Ot==="top"?Ht+=V[0]:Ot==="bottom"&&(Ht-=V[2]));for(var ye=0,he=!1,be=k("fill"in w?w.fill:(he=!0,Dt.fill)),Be=G("stroke"in w?w.stroke:!lt&&(!Dt.autoStroke||he)?(ye=W,Dt.stroke):null),Ze=w.textShadowBlur>0,qe=w.width!=null&&(w.overflow==="truncate"||w.overflow==="break"||w.overflow==="breakAll"),pr=ut.calculatedLineHeight,wr=0;wr<at.length;wr++){var Or=this._getOrCreateChild(q.Z),Sr=Or.createStyle();Or.useStyle(Sr),Sr.text=at[wr],Sr.x=Bt,Sr.y=Ht,bt&&(Sr.textAlign=bt),Sr.textBaseline="middle",Sr.opacity=w.opacity,Sr.strokeFirst=!0,Ze&&(Sr.shadowBlur=w.textShadowBlur||0,Sr.shadowColor=w.textShadowColor||"transparent",Sr.shadowOffsetX=w.textShadowOffsetX||0,Sr.shadowOffsetY=w.textShadowOffsetY||0),Sr.stroke=Be,Sr.fill=be,Be&&(Sr.lineWidth=w.lineWidth||ye,Sr.lineDash=w.lineDash,Sr.lineDashOffset=w.lineDashOffset||0),Sr.font=C,j(Sr,w),Ht+=mt,qe&&Or.setBoundingRect(new nt.Z((0,yt.M3)(Sr.x,w.width,Sr.textAlign),(0,yt.mU)(Sr.y,pr,Sr.textBaseline),St,pr))}},b.prototype._updateRichTexts=function(){var w=this.style,C=T(w),V=(0,dt.$F)(C,w),B=V.width,ut=V.outerWidth,it=V.outerHeight,lt=w.padding,rt=w.x||0,ct=w.y||0,St=this._defaultStyle,at=w.align||St.align,mt=w.verticalAlign||St.verticalAlign,Dt=(0,yt.M3)(rt,ut,at),wt=(0,yt.mU)(ct,it,mt),Pt=Dt,bt=wt;lt&&(Pt+=lt[3],bt+=lt[0]);var Ot=Pt+B;P(w)&&this._renderBackground(w,w,Dt,wt,ut,it);for(var Bt=!!w.backgroundColor,Ht=0;Ht<V.lines.length;Ht++){for(var Qt=V.lines[Ht],re=Qt.tokens,ye=re.length,he=Qt.lineHeight,be=Qt.width,Be=0,Ze=Pt,qe=Ot,pr=ye-1,wr=void 0;Be<ye&&(wr=re[Be],!wr.align||wr.align==="left");)this._placeToken(wr,w,he,bt,Ze,"left",Bt),be-=wr.width,Ze+=wr.width,Be++;for(;pr>=0&&(wr=re[pr],wr.align==="right");)this._placeToken(wr,w,he,bt,qe,"right",Bt),be-=wr.width,qe-=wr.width,pr--;for(Ze+=(B-(Ze-Pt)-(Ot-qe)-be)/2;Be<=pr;)wr=re[Be],this._placeToken(wr,w,he,bt,Ze+wr.width/2,"center",Bt),Ze+=wr.width,Be++;bt+=he}},b.prototype._placeToken=function(w,C,V,B,ut,it,lt){var rt=C.rich[w.styleName]||{};rt.text=w.text;var ct=w.verticalAlign,St=B+V/2;ct==="top"?St=B+w.height/2:ct==="bottom"&&(St=B+V-w.height/2);var at=!w.isLineHolder&&P(rt);at&&this._renderBackground(rt,C,it==="right"?ut-w.width:it==="center"?ut-w.width/2:ut,St-w.height/2,w.width,w.height);var mt=!!rt.backgroundColor,Dt=w.textPadding;Dt&&(ut=R(ut,it,Dt),St-=w.height/2-Dt[0]-w.innerHeight/2);var wt=this._getOrCreateChild(q.Z),Pt=wt.createStyle();wt.useStyle(Pt);var bt=this._defaultStyle,Ot=!1,Bt=0,Ht=k("fill"in rt?rt.fill:"fill"in C?C.fill:(Ot=!0,bt.fill)),Qt=G("stroke"in rt?rt.stroke:"stroke"in C?C.stroke:!mt&&!lt&&(!bt.autoStroke||Ot)?(Bt=W,bt.stroke):null),re=rt.textShadowBlur>0||C.textShadowBlur>0;Pt.text=w.text,Pt.x=ut,Pt.y=St,re&&(Pt.shadowBlur=rt.textShadowBlur||C.textShadowBlur||0,Pt.shadowColor=rt.textShadowColor||C.textShadowColor||"transparent",Pt.shadowOffsetX=rt.textShadowOffsetX||C.textShadowOffsetX||0,Pt.shadowOffsetY=rt.textShadowOffsetY||C.textShadowOffsetY||0),Pt.textAlign=it,Pt.textBaseline="middle",Pt.font=w.font||tt.Uo,Pt.opacity=(0,vt.R1)(rt.opacity,C.opacity,1),j(Pt,rt),Qt&&(Pt.lineWidth=(0,vt.R1)(rt.lineWidth,C.lineWidth,Bt),Pt.lineDash=(0,vt.pD)(rt.lineDash,C.lineDash),Pt.lineDashOffset=C.lineDashOffset||0,Pt.stroke=Qt),Ht&&(Pt.fill=Ht);var ye=w.contentWidth,he=w.contentHeight;wt.setBoundingRect(new nt.Z((0,yt.M3)(Pt.x,ye,Pt.textAlign),(0,yt.mU)(Pt.y,he,Pt.textBaseline),ye,he))},b.prototype._renderBackground=function(w,C,V,B,ut,it){var lt=w.backgroundColor,rt=w.borderWidth,ct=w.borderColor,St=lt&&lt.image,at=lt&&!St,mt=w.borderRadius,Dt=this,wt,Pt;if(at||w.lineHeight||rt&&ct){wt=this._getOrCreateChild(xt.Z),wt.useStyle(wt.createStyle()),wt.style.fill=null;var bt=wt.shape;bt.x=V,bt.y=B,bt.width=ut,bt.height=it,bt.r=mt,wt.dirtyShape()}if(at){var Ot=wt.style;Ot.fill=lt||null,Ot.fillOpacity=(0,vt.pD)(w.fillOpacity,1)}else if(St){Pt=this._getOrCreateChild(gt.ZP),Pt.onload=function(){Dt.dirtyStyle()};var Bt=Pt.style;Bt.image=lt.image,Bt.x=V,Bt.y=B,Bt.width=ut,Bt.height=it}if(rt&&ct){var Ot=wt.style;Ot.lineWidth=rt,Ot.stroke=ct,Ot.strokeOpacity=(0,vt.pD)(w.strokeOpacity,1),Ot.lineDash=w.borderDash,Ot.lineDashOffset=w.borderDashOffset||0,wt.strokeContainThreshold=0,wt.hasFill()&&wt.hasStroke()&&(Ot.strokeFirst=!0,Ot.lineWidth*=2)}var Ht=(wt||Pt).style;Ht.shadowBlur=w.shadowBlur||0,Ht.shadowColor=w.shadowColor||"transparent",Ht.shadowOffsetX=w.shadowOffsetX||0,Ht.shadowOffsetY=w.shadowOffsetY||0,Ht.opacity=(0,vt.R1)(w.opacity,C.opacity,1)},b.makeFont=function(w){var C="";return O(w)&&(C=[w.fontStyle,w.fontWeight,Q(w.fontSize),w.fontFamily||"sans-serif"].join(" ")),C&&(0,vt.fy)(C)||w.textFont||w.font},b}(Z.ZP),st={left:!0,right:1,center:1},J={top:1,bottom:1,middle:1},g=["fontStyle","fontWeight","fontSize","fontFamily"];function Q(M){return typeof M=="string"&&(M.indexOf("px")!==-1||M.indexOf("rem")!==-1||M.indexOf("em")!==-1)?M:isNaN(+M)?tt.n5+"px":M+"px"}function j(M,b){for(var w=0;w<g.length;w++){var C=g[w],V=b[C];V!=null&&(M[C]=V)}}function O(M){return M.fontSize!=null||M.fontFamily||M.fontWeight}function X(M){return K(M),(0,vt.S6)(M.rich,K),M}function K(M){if(M){M.font=H.makeFont(M);var b=M.align;b==="middle"&&(b="center"),M.align=b==null||st[b]?b:"left";var w=M.verticalAlign;w==="center"&&(w="middle"),M.verticalAlign=w==null||J[w]?w:"top";var C=M.padding;C&&(M.padding=(0,vt.MY)(M.padding))}}function G(M,b){return M==null||b<=0||M==="transparent"||M==="none"?null:M.image||M.colorStops?"#000":M}function k(M){return M==null||M==="none"?null:M.image||M.colorStops?"#000":M}function R(M,b,w){return b==="right"?M-w[1]:b==="center"?M+w[3]/2-w[1]/2:M+w[3]}function T(M){var b=M.text;return b!=null&&(b+=""),b}function P(M){return!!(M.backgroundColor||M.lineHeight||M.borderWidth&&M.borderColor)}ee.ZP=H},53197:function(Pe,ee,z){z.d(ee,{RH:function(){return q},SE:function(){return dt},YV:function(){return F}});var F=1,dt=2,q=4},6850:function(Pe,ee,z){z.d(ee,{Gq:function(){return yt},ko:function(){return vt},v5:function(){return xt}});var F=z(86280),dt=z(47297),q=new F.ZP(50);function vt(nt){if(typeof nt=="string"){var Z=q.get(nt);return Z&&Z.image}else return nt}function yt(nt,Z,tt,ot,W){if(nt)if(typeof nt=="string"){if(Z&&Z.__zrImageSrc===nt||!tt)return Z;var Y=q.get(nt),H={hostEl:tt,cb:ot,cbPayload:W};return Y?(Z=Y.image,!xt(Z)&&Y.pending.push(H)):(Z=dt.qW.loadImage(nt,gt,gt),Z.__zrImageSrc=nt,q.put(nt,Z.__cachedImgObj={image:Z,pending:[H]})),Z}else return nt;else return Z}function gt(){var nt=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var Z=0;Z<nt.pending.length;Z++){var tt=nt.pending[Z],ot=tt.cb;ot&&ot(this,tt.cbPayload),tt.hostEl.dirty()}nt.pending.length=0}function xt(nt){return nt&&nt.width&&nt.height}},28185:function(Pe,ee,z){z.d(ee,{$F:function(){return Y},NY:function(){return Z},aF:function(){return yt}});var F=z(6850),dt=z(70324),q=z(98733),vt=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function yt(j,O,X,K,G){if(!O)return"";var k=(j+"").split(`
`);G=gt(O,X,K,G);for(var R=0,T=k.length;R<T;R++)k[R]=xt(k[R],G);return k.join(`
`)}function gt(j,O,X,K){K=K||{};var G=(0,dt.l7)({},K);G.font=O,X=(0,dt.pD)(X,"..."),G.maxIterations=(0,dt.pD)(K.maxIterations,2);var k=G.minChar=(0,dt.pD)(K.minChar,0);G.cnCharWidth=(0,q.dz)("\u56FD",O);var R=G.ascCharWidth=(0,q.dz)("a",O);G.placeholder=(0,dt.pD)(K.placeholder,"");for(var T=j=Math.max(0,j-1),P=0;P<k&&T>=R;P++)T-=R;var M=(0,q.dz)(X,O);return M>T&&(X="",M=0),T=j-M,G.ellipsis=X,G.ellipsisWidth=M,G.contentWidth=T,G.containerWidth=j,G}function xt(j,O){var X=O.containerWidth,K=O.font,G=O.contentWidth;if(!X)return"";var k=(0,q.dz)(j,K);if(k<=X)return j;for(var R=0;;R++){if(k<=G||R>=O.maxIterations){j+=O.ellipsis;break}var T=R===0?nt(j,G,O.ascCharWidth,O.cnCharWidth):k>0?Math.floor(j.length*G/k):0;j=j.substr(0,T),k=(0,q.dz)(j,K)}return j===""&&(j=O.placeholder),j}function nt(j,O,X,K){for(var G=0,k=0,R=j.length;k<R&&G<O;k++){var T=j.charCodeAt(k);G+=0<=T&&T<=127?X:K}return k}function Z(j,O){j!=null&&(j+="");var X=O.overflow,K=O.padding,G=O.font,k=X==="truncate",R=(0,q.Dp)(G),T=(0,dt.pD)(O.lineHeight,R),P=!!O.backgroundColor,M=O.lineOverflow==="truncate",b=O.width,w;b!=null&&(X==="break"||X==="breakAll")?w=j?Q(j,O.font,b,X==="breakAll",0).lines:[]:w=j?j.split(`
`):[];var C=w.length*T,V=(0,dt.pD)(O.height,C);if(C>V&&M){var B=Math.floor(V/T);w=w.slice(0,B)}if(j&&k&&b!=null)for(var ut=gt(b,G,O.ellipsis,{minChar:O.truncateMinChar,placeholder:O.placeholder}),it=0;it<w.length;it++)w[it]=xt(w[it],ut);for(var lt=V,rt=0,it=0;it<w.length;it++)rt=Math.max((0,q.dz)(w[it],G),rt);b==null&&(b=rt);var ct=rt;return K&&(lt+=K[0]+K[2],ct+=K[1]+K[3],b+=K[1]+K[3]),P&&(ct=b),{lines:w,height:V,outerWidth:ct,outerHeight:lt,lineHeight:T,calculatedLineHeight:R,contentWidth:rt,contentHeight:C,width:b}}var tt=function(){function j(){}return j}(),ot=function(){function j(O){this.tokens=[],O&&(this.tokens=O)}return j}(),W=function(){function j(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return j}();function Y(j,O){var X=new W;if(j!=null&&(j+=""),!j)return X;for(var K=O.width,G=O.height,k=O.overflow,R=(k==="break"||k==="breakAll")&&K!=null?{width:K,accumWidth:0,breakAll:k==="breakAll"}:null,T=vt.lastIndex=0,P;(P=vt.exec(j))!=null;){var M=P.index;M>T&&H(X,j.substring(T,M),O,R),H(X,P[2],O,R,P[1]),T=vt.lastIndex}T<j.length&&H(X,j.substring(T,j.length),O,R);var b=[],w=0,C=0,V=O.padding,B=k==="truncate",ut=O.lineOverflow==="truncate";function it(be,Be,Ze){be.width=Be,be.lineHeight=Ze,w+=Ze,C=Math.max(C,Be)}t:for(var lt=0;lt<X.lines.length;lt++){for(var rt=X.lines[lt],ct=0,St=0,at=0;at<rt.tokens.length;at++){var mt=rt.tokens[at],Dt=mt.styleName&&O.rich[mt.styleName]||{},wt=mt.textPadding=Dt.padding,Pt=wt?wt[1]+wt[3]:0,bt=mt.font=Dt.font||O.font;mt.contentHeight=(0,q.Dp)(bt);var Ot=(0,dt.pD)(Dt.height,mt.contentHeight);if(mt.innerHeight=Ot,wt&&(Ot+=wt[0]+wt[2]),mt.height=Ot,mt.lineHeight=(0,dt.R1)(Dt.lineHeight,O.lineHeight,Ot),mt.align=Dt&&Dt.align||O.align,mt.verticalAlign=Dt&&Dt.verticalAlign||"middle",ut&&G!=null&&w+mt.lineHeight>G){at>0?(rt.tokens=rt.tokens.slice(0,at),it(rt,St,ct),X.lines=X.lines.slice(0,lt+1)):X.lines=X.lines.slice(0,lt);break t}var Bt=Dt.width,Ht=Bt==null||Bt==="auto";if(typeof Bt=="string"&&Bt.charAt(Bt.length-1)==="%")mt.percentWidth=Bt,b.push(mt),mt.contentWidth=(0,q.dz)(mt.text,bt);else{if(Ht){var Qt=Dt.backgroundColor,re=Qt&&Qt.image;re&&(re=F.ko(re),F.v5(re)&&(mt.width=Math.max(mt.width,re.width*Ot/re.height)))}var ye=B&&K!=null?K-St:null;ye!=null&&ye<mt.width?!Ht||ye<Pt?(mt.text="",mt.width=mt.contentWidth=0):(mt.text=yt(mt.text,ye-Pt,bt,O.ellipsis,{minChar:O.truncateMinChar}),mt.width=mt.contentWidth=(0,q.dz)(mt.text,bt)):mt.contentWidth=(0,q.dz)(mt.text,bt)}mt.width+=Pt,St+=mt.width,Dt&&(ct=Math.max(ct,mt.lineHeight))}it(rt,St,ct)}X.outerWidth=X.width=(0,dt.pD)(K,C),X.outerHeight=X.height=(0,dt.pD)(G,w),X.contentHeight=w,X.contentWidth=C,V&&(X.outerWidth+=V[1]+V[3],X.outerHeight+=V[0]+V[2]);for(var lt=0;lt<b.length;lt++){var mt=b[lt],he=mt.percentWidth;mt.width=parseInt(he,10)/100*X.width}return X}function H(j,O,X,K,G){var k=O==="",R=G&&X.rich[G]||{},T=j.lines,P=R.font||X.font,M=!1,b,w;if(K){var C=R.padding,V=C?C[1]+C[3]:0;if(R.width!=null&&R.width!=="auto"){var B=(0,q.GM)(R.width,K.width)+V;T.length>0&&B+K.accumWidth>K.width&&(b=O.split(`
`),M=!0),K.accumWidth=B}else{var ut=Q(O,P,K.width,K.breakAll,K.accumWidth);K.accumWidth=ut.accumWidth+V,w=ut.linesWidths,b=ut.lines}}else b=O.split(`
`);for(var it=0;it<b.length;it++){var lt=b[it],rt=new tt;if(rt.styleName=G,rt.text=lt,rt.isLineHolder=!lt&&!k,typeof R.width=="number"?rt.width=R.width:rt.width=w?w[it]:(0,q.dz)(lt,P),!it&&!M){var ct=(T[T.length-1]||(T[0]=new ot)).tokens,St=ct.length;St===1&&ct[0].isLineHolder?ct[0]=rt:(lt||!St||k)&&ct.push(rt)}else T.push(new ot([rt]))}}function st(j){var O=j.charCodeAt(0);return O>=32&&O<=591||O>=880&&O<=4351||O>=4608&&O<=5119||O>=7680&&O<=8303}var J=(0,dt.u4)(",&?/;] ".split(""),function(j,O){return j[O]=!0,j},{});function g(j){return st(j)?!!J[j]:!0}function Q(j,O,X,K,G){for(var k=[],R=[],T="",P="",M=0,b=0,w=0;w<j.length;w++){var C=j.charAt(w);if(C===`
`){P&&(T+=P,b+=M),k.push(T),R.push(b),T="",P="",M=0,b=0;continue}var V=(0,q.dz)(C,O),B=K?!1:!g(C);if(k.length?b+V>X:G+b+V>X){b?(T||P)&&(B?(T||(T=P,P="",M=0,b=M),k.push(T),R.push(b-M),P+=C,M+=V,T="",b=M):(P&&(T+=P,P="",M=0),k.push(T),R.push(b),T=C,b=V)):B?(k.push(P),R.push(M),P=C,M=V):(k.push(C),R.push(V));continue}b+=V,B?(P+=C,M+=V):(P&&(T+=P,P="",M=0),T+=C)}return!k.length&&!T&&(T=j,P="",M=0),P&&(T+=P),T&&(k.push(T),R.push(b)),k.length===1&&(b+=G),{accumWidth:b,lines:k,linesWidths:R}}},65155:function(Pe,ee,z){z.d(ee,{L:function(){return q}});var F=z(85755);function dt(vt,yt,gt,xt){var nt=[],Z=[],tt=[],ot=[],W,Y,H,st;if(xt){H=[1/0,1/0],st=[-1/0,-1/0];for(var J=0,g=vt.length;J<g;J++)(0,F.VV)(H,H,vt[J]),(0,F.Fp)(st,st,vt[J]);(0,F.VV)(H,H,xt[0]),(0,F.Fp)(st,st,xt[1])}for(var J=0,g=vt.length;J<g;J++){var Q=vt[J];if(gt)W=vt[J?J-1:g-1],Y=vt[(J+1)%g];else if(J===0||J===g-1){nt.push((0,F.d9)(vt[J]));continue}else W=vt[J-1],Y=vt[J+1];(0,F.lu)(Z,Y,W),(0,F.bA)(Z,Z,yt);var j=(0,F.TE)(Q,W),O=(0,F.TE)(Q,Y),X=j+O;X!==0&&(j/=X,O/=X),(0,F.bA)(tt,Z,-j),(0,F.bA)(ot,Z,O);var K=(0,F.IH)([],Q,tt),G=(0,F.IH)([],Q,ot);xt&&((0,F.Fp)(K,K,H),(0,F.VV)(K,K,st),(0,F.Fp)(G,G,H),(0,F.VV)(G,G,st)),nt.push(K),nt.push(G)}return gt&&nt.push(nt.shift()),nt}function q(vt,yt,gt){var xt=yt.smooth,nt=yt.points;if(nt&&nt.length>=2){if(xt){var Z=dt(nt,xt,gt,yt.smoothConstraint);vt.moveTo(nt[0][0],nt[0][1]);for(var tt=nt.length,ot=0;ot<(gt?tt:tt-1);ot++){var W=Z[ot*2],Y=Z[ot*2+1],H=nt[(ot+1)%tt];vt.bezierCurveTo(W[0],W[1],Y[0],Y[1],H[0],H[1])}}else{vt.moveTo(nt[0][0],nt[0][1]);for(var ot=1,st=nt.length;ot<st;ot++)vt.lineTo(nt[ot][0],nt[ot][1])}gt&&vt.closePath()}}},51372:function(Pe,ee,z){z.d(ee,{Pw:function(){return q},_3:function(){return dt},vu:function(){return vt}});var F=Math.round;function dt(yt,gt,xt){if(gt){var nt=gt.x1,Z=gt.x2,tt=gt.y1,ot=gt.y2;yt.x1=nt,yt.x2=Z,yt.y1=tt,yt.y2=ot;var W=xt&&xt.lineWidth;return W&&(F(nt*2)===F(Z*2)&&(yt.x1=yt.x2=vt(nt,W,!0)),F(tt*2)===F(ot*2)&&(yt.y1=yt.y2=vt(tt,W,!0))),yt}}function q(yt,gt,xt){if(gt){var nt=gt.x,Z=gt.y,tt=gt.width,ot=gt.height;yt.x=nt,yt.y=Z,yt.width=tt,yt.height=ot;var W=xt&&xt.lineWidth;return W&&(yt.x=vt(nt,W,!0),yt.y=vt(Z,W,!0),yt.width=Math.max(vt(nt+tt,W,!1)-yt.x,tt===0?0:1),yt.height=Math.max(vt(Z+ot,W,!1)-yt.y,ot===0?0:1)),yt}}function vt(yt,gt,xt){if(!gt)return yt;var nt=F(yt*2);return(nt+F(gt))%2===0?nt/2:(nt+(xt?1:-1))/2}},5485:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=function(){function yt(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return yt}(),vt=function(yt){(0,F.ZT)(gt,yt);function gt(xt){return yt.call(this,xt)||this}return gt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},gt.prototype.getDefaultShape=function(){return new q},gt.prototype.buildPath=function(xt,nt){var Z=nt.cx,tt=nt.cy,ot=Math.max(nt.r,0),W=nt.startAngle,Y=nt.endAngle,H=nt.clockwise,st=Math.cos(W),J=Math.sin(W);xt.moveTo(st*ot+Z,J*ot+tt),xt.arc(Z,tt,ot,W,Y,!H)},gt}(dt.ZP);vt.prototype.type="arc",ee.Z=vt},32799:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=z(85755),vt=z(14296),yt=[],gt=function(){function Z(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return Z}();function xt(Z,tt,ot){var W=Z.cpx2,Y=Z.cpy2;return W!=null||Y!=null?[(ot?vt.X_:vt.af)(Z.x1,Z.cpx1,Z.cpx2,Z.x2,tt),(ot?vt.X_:vt.af)(Z.y1,Z.cpy1,Z.cpy2,Z.y2,tt)]:[(ot?vt.AZ:vt.Zm)(Z.x1,Z.cpx1,Z.x2,tt),(ot?vt.AZ:vt.Zm)(Z.y1,Z.cpy1,Z.y2,tt)]}var nt=function(Z){(0,F.ZT)(tt,Z);function tt(ot){return Z.call(this,ot)||this}return tt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},tt.prototype.getDefaultShape=function(){return new gt},tt.prototype.buildPath=function(ot,W){var Y=W.x1,H=W.y1,st=W.x2,J=W.y2,g=W.cpx1,Q=W.cpy1,j=W.cpx2,O=W.cpy2,X=W.percent;X!==0&&(ot.moveTo(Y,H),j==null||O==null?(X<1&&((0,vt.Lx)(Y,g,st,X,yt),g=yt[1],st=yt[2],(0,vt.Lx)(H,Q,J,X,yt),Q=yt[1],J=yt[2]),ot.quadraticCurveTo(g,Q,st,J)):(X<1&&((0,vt.Vz)(Y,g,j,st,X,yt),g=yt[1],j=yt[2],st=yt[3],(0,vt.Vz)(H,Q,O,J,X,yt),Q=yt[1],O=yt[2],J=yt[3]),ot.bezierCurveTo(g,Q,j,O,st,J)))},tt.prototype.pointAt=function(ot){return xt(this.shape,ot,!1)},tt.prototype.tangentAt=function(ot){var W=xt(this.shape,ot,!0);return q.Fv(W,W)},tt}(dt.ZP);nt.prototype.type="bezier-curve",ee.Z=nt},16513:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=function(){function yt(){this.cx=0,this.cy=0,this.r=0}return yt}(),vt=function(yt){(0,F.ZT)(gt,yt);function gt(xt){return yt.call(this,xt)||this}return gt.prototype.getDefaultShape=function(){return new q},gt.prototype.buildPath=function(xt,nt){xt.moveTo(nt.cx+nt.r,nt.cy),xt.arc(nt.cx,nt.cy,nt.r,0,Math.PI*2)},gt}(dt.ZP);vt.prototype.type="circle",ee.Z=vt},15904:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=function(){function yt(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return yt}(),vt=function(yt){(0,F.ZT)(gt,yt);function gt(xt){return yt.call(this,xt)||this}return gt.prototype.getDefaultShape=function(){return new q},gt.prototype.buildPath=function(xt,nt){var Z=.5522848,tt=nt.cx,ot=nt.cy,W=nt.rx,Y=nt.ry,H=W*Z,st=Y*Z;xt.moveTo(tt-W,ot),xt.bezierCurveTo(tt-W,ot-st,tt-H,ot-Y,tt,ot-Y),xt.bezierCurveTo(tt+H,ot-Y,tt+W,ot-st,tt+W,ot),xt.bezierCurveTo(tt+W,ot+st,tt+H,ot+Y,tt,ot+Y),xt.bezierCurveTo(tt-H,ot+Y,tt-W,ot+st,tt-W,ot),xt.closePath()},gt}(dt.ZP);vt.prototype.type="ellipse",ee.Z=vt},40596:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=z(51372),vt={},yt=function(){function xt(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return xt}(),gt=function(xt){(0,F.ZT)(nt,xt);function nt(Z){return xt.call(this,Z)||this}return nt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},nt.prototype.getDefaultShape=function(){return new yt},nt.prototype.buildPath=function(Z,tt){var ot,W,Y,H;if(this.subPixelOptimize){var st=(0,q._3)(vt,tt,this.style);ot=st.x1,W=st.y1,Y=st.x2,H=st.y2}else ot=tt.x1,W=tt.y1,Y=tt.x2,H=tt.y2;var J=tt.percent;J!==0&&(Z.moveTo(ot,W),J<1&&(Y=ot*(1-J)+Y*J,H=W*(1-J)+H*J),Z.lineTo(Y,H))},nt.prototype.pointAt=function(Z){var tt=this.shape;return[tt.x1*(1-Z)+tt.x2*Z,tt.y1*(1-Z)+tt.y2*Z]},nt}(dt.ZP);gt.prototype.type="line",ee.Z=gt},7228:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=z(65155),vt=function(){function gt(){this.points=null,this.smooth=0,this.smoothConstraint=null}return gt}(),yt=function(gt){(0,F.ZT)(xt,gt);function xt(nt){return gt.call(this,nt)||this}return xt.prototype.getDefaultShape=function(){return new vt},xt.prototype.buildPath=function(nt,Z){q.L(nt,Z,!0)},xt}(dt.ZP);yt.prototype.type="polygon",ee.Z=yt},6224:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=z(65155),vt=function(){function gt(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return gt}(),yt=function(gt){(0,F.ZT)(xt,gt);function xt(nt){return gt.call(this,nt)||this}return xt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},xt.prototype.getDefaultShape=function(){return new vt},xt.prototype.buildPath=function(nt,Z){q.L(nt,Z,!1)},xt}(dt.ZP);yt.prototype.type="polyline",ee.Z=yt},73909:function(Pe,ee,z){z.d(ee,{Z:function(){return nt}});var F=z(12012),dt=z(66210);function q(Z,tt){var ot=tt.x,W=tt.y,Y=tt.width,H=tt.height,st=tt.r,J,g,Q,j;Y<0&&(ot=ot+Y,Y=-Y),H<0&&(W=W+H,H=-H),typeof st=="number"?J=g=Q=j=st:st instanceof Array?st.length===1?J=g=Q=j=st[0]:st.length===2?(J=Q=st[0],g=j=st[1]):st.length===3?(J=st[0],g=j=st[1],Q=st[2]):(J=st[0],g=st[1],Q=st[2],j=st[3]):J=g=Q=j=0;var O;J+g>Y&&(O=J+g,J*=Y/O,g*=Y/O),Q+j>Y&&(O=Q+j,Q*=Y/O,j*=Y/O),g+Q>H&&(O=g+Q,g*=H/O,Q*=H/O),J+j>H&&(O=J+j,J*=H/O,j*=H/O),Z.moveTo(ot+J,W),Z.lineTo(ot+Y-g,W),g!==0&&Z.arc(ot+Y-g,W+g,g,-Math.PI/2,0),Z.lineTo(ot+Y,W+H-Q),Q!==0&&Z.arc(ot+Y-Q,W+H-Q,Q,0,Math.PI/2),Z.lineTo(ot+j,W+H),j!==0&&Z.arc(ot+j,W+H-j,j,Math.PI/2,Math.PI),Z.lineTo(ot,W+J),J!==0&&Z.arc(ot+J,W+J,J,Math.PI,Math.PI*1.5)}var vt=z(51372),yt=function(){function Z(){this.x=0,this.y=0,this.width=0,this.height=0}return Z}(),gt={},xt=function(Z){(0,F.ZT)(tt,Z);function tt(ot){return Z.call(this,ot)||this}return tt.prototype.getDefaultShape=function(){return new yt},tt.prototype.buildPath=function(ot,W){var Y,H,st,J;if(this.subPixelOptimize){var g=(0,vt.Pw)(gt,W,this.style);Y=g.x,H=g.y,st=g.width,J=g.height,g.r=W.r,W=g}else Y=W.x,H=W.y,st=W.width,J=W.height;W.r?q(ot,W):ot.rect(Y,H,st,J)},tt.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},tt}(dt.ZP);xt.prototype.type="rect";var nt=xt},96449:function(Pe,ee,z){var F=z(12012),dt=z(66210),q=function(){function yt(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return yt}(),vt=function(yt){(0,F.ZT)(gt,yt);function gt(xt){return yt.call(this,xt)||this}return gt.prototype.getDefaultShape=function(){return new q},gt.prototype.buildPath=function(xt,nt){var Z=nt.cx,tt=nt.cy,ot=Math.PI*2;xt.moveTo(Z+nt.r,tt),xt.arc(Z,tt,nt.r,0,ot,!1),xt.moveTo(Z+nt.r0,tt),xt.arc(Z,tt,nt.r0,0,ot,!0)},gt}(dt.ZP);vt.prototype.type="ring",ee.Z=vt},29902:function(Pe,ee,z){z.d(ee,{C:function(){return X}});var F=z(12012),dt=z(66210),q=z(70324),vt=Math.PI,yt=vt*2,gt=Math.sin,xt=Math.cos,nt=Math.acos,Z=Math.atan2,tt=Math.abs,ot=Math.sqrt,W=Math.max,Y=Math.min,H=1e-4;function st(K,G,k,R,T,P,M,b){var w=k-K,C=R-G,V=M-T,B=b-P,ut=B*w-V*C;if(!(ut*ut<H))return ut=(V*(G-P)-B*(K-T))/ut,[K+ut*w,G+ut*C]}function J(K,G,k,R,T,P,M){var b=K-k,w=G-R,C=(M?P:-P)/ot(b*b+w*w),V=C*w,B=-C*b,ut=K+V,it=G+B,lt=k+V,rt=R+B,ct=(ut+lt)/2,St=(it+rt)/2,at=lt-ut,mt=rt-it,Dt=at*at+mt*mt,wt=T-P,Pt=ut*rt-lt*it,bt=(mt<0?-1:1)*ot(W(0,wt*wt*Dt-Pt*Pt)),Ot=(Pt*mt-at*bt)/Dt,Bt=(-Pt*at-mt*bt)/Dt,Ht=(Pt*mt+at*bt)/Dt,Qt=(-Pt*at+mt*bt)/Dt,re=Ot-ct,ye=Bt-St,he=Ht-ct,be=Qt-St;return re*re+ye*ye>he*he+be*be&&(Ot=Ht,Bt=Qt),{cx:Ot,cy:Bt,x0:-V,y0:-B,x1:Ot*(T/wt-1),y1:Bt*(T/wt-1)}}function g(K){var G;if((0,q.kJ)(K)){var k=K.length;if(!k)return K;k===1?G=[K[0],K[0],0,0]:k===2?G=[K[0],K[0],K[1],K[1]]:k===3?G=K.concat(K[2]):G=K}else G=[K,K,K,K];return G}function Q(K,G){var k,R=W(G.r,0),T=W(G.r0||0,0),P=R>0,M=T>0;if(!(!P&&!M)){if(P||(R=T,T=0),T>R){var b=R;R=T,T=b}var w=G.startAngle,C=G.endAngle;if(!(isNaN(w)||isNaN(C))){var V=G.cx,B=G.cy,ut=!!G.clockwise,it=tt(C-w),lt=it>yt&&it%yt;if(lt>H&&(it=lt),!(R>H))K.moveTo(V,B);else if(it>yt-H)K.moveTo(V+R*xt(w),B+R*gt(w)),K.arc(V,B,R,w,C,!ut),T>H&&(K.moveTo(V+T*xt(C),B+T*gt(C)),K.arc(V,B,T,C,w,ut));else{var rt=void 0,ct=void 0,St=void 0,at=void 0,mt=void 0,Dt=void 0,wt=void 0,Pt=void 0,bt=void 0,Ot=void 0,Bt=void 0,Ht=void 0,Qt=void 0,re=void 0,ye=void 0,he=void 0,be=R*xt(w),Be=R*gt(w),Ze=T*xt(C),qe=T*gt(C),pr=it>H;if(pr){var wr=G.cornerRadius;wr&&(k=g(wr),rt=k[0],ct=k[1],St=k[2],at=k[3]);var Or=tt(R-T)/2;if(mt=Y(Or,St),Dt=Y(Or,at),wt=Y(Or,rt),Pt=Y(Or,ct),Bt=bt=W(mt,Dt),Ht=Ot=W(wt,Pt),(bt>H||Ot>H)&&(Qt=R*xt(C),re=R*gt(C),ye=T*xt(w),he=T*gt(w),it<vt)){var Sr=st(be,Be,ye,he,Qt,re,Ze,qe);if(Sr){var Vr=be-Sr[0],sn=Be-Sr[1],cr=Qt-Sr[0],or=re-Sr[1],Dr=1/gt(nt((Vr*cr+sn*or)/(ot(Vr*Vr+sn*sn)*ot(cr*cr+or*or)))/2),ze=ot(Sr[0]*Sr[0]+Sr[1]*Sr[1]);Bt=Y(bt,(R-ze)/(Dr+1)),Ht=Y(Ot,(T-ze)/(Dr-1))}}}if(!pr)K.moveTo(V+be,B+Be);else if(Bt>H){var Ne=Y(St,Bt),He=Y(at,Bt),Vt=J(ye,he,be,Be,R,Ne,ut),le=J(Qt,re,Ze,qe,R,He,ut);K.moveTo(V+Vt.cx+Vt.x0,B+Vt.cy+Vt.y0),Bt<bt&&Ne===He?K.arc(V+Vt.cx,B+Vt.cy,Bt,Z(Vt.y0,Vt.x0),Z(le.y0,le.x0),!ut):(Ne>0&&K.arc(V+Vt.cx,B+Vt.cy,Ne,Z(Vt.y0,Vt.x0),Z(Vt.y1,Vt.x1),!ut),K.arc(V,B,R,Z(Vt.cy+Vt.y1,Vt.cx+Vt.x1),Z(le.cy+le.y1,le.cx+le.x1),!ut),He>0&&K.arc(V+le.cx,B+le.cy,He,Z(le.y1,le.x1),Z(le.y0,le.x0),!ut))}else K.moveTo(V+be,B+Be),K.arc(V,B,R,w,C,!ut);if(!(T>H)||!pr)K.lineTo(V+Ze,B+qe);else if(Ht>H){var Ne=Y(rt,Ht),He=Y(ct,Ht),Vt=J(Ze,qe,Qt,re,T,-He,ut),le=J(be,Be,ye,he,T,-Ne,ut);K.lineTo(V+Vt.cx+Vt.x0,B+Vt.cy+Vt.y0),Ht<Ot&&Ne===He?K.arc(V+Vt.cx,B+Vt.cy,Ht,Z(Vt.y0,Vt.x0),Z(le.y0,le.x0),!ut):(He>0&&K.arc(V+Vt.cx,B+Vt.cy,He,Z(Vt.y0,Vt.x0),Z(Vt.y1,Vt.x1),!ut),K.arc(V,B,T,Z(Vt.cy+Vt.y1,Vt.cx+Vt.x1),Z(le.cy+le.y1,le.cx+le.x1),ut),Ne>0&&K.arc(V+le.cx,B+le.cy,Ne,Z(le.y1,le.x1),Z(le.y0,le.x0),!ut))}else K.lineTo(V+Ze,B+qe),K.arc(V,B,T,C,w,ut)}K.closePath()}}}var j=function(){function K(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return K}(),O=function(K){(0,F.ZT)(G,K);function G(k){return K.call(this,k)||this}return G.prototype.getDefaultShape=function(){return new j},G.prototype.buildPath=function(k,R){Q(k,R)},G.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},G}(dt.ZP);O.prototype.type="sector";var X=O},72352:function(Pe,ee,z){z.d(ee,{Cv:function(){return Q},Gk:function(){return R},H3:function(){return G},I1:function(){return X},Pn:function(){return tt},R:function(){return O},gA:function(){return T},gO:function(){return K},i2:function(){return st},jY:function(){return Y},m1:function(){return k},mU:function(){return H},n1:function(){return J},oF:function(){return P},qV:function(){return W},ut:function(){return gt},zT:function(){return nt}});var F=z(70324),dt=z(96170),q=z(54490),vt=z(36379).lW,yt=Math.round;function gt(M){var b;if(!M||M==="transparent")M="none";else if(typeof M=="string"&&M.indexOf("rgba")>-1){var w=(0,dt.parse)(M);w&&(M="rgb("+w[0]+","+w[1]+","+w[2]+")",b=w[3])}return{color:M,opacity:b==null?1:b}}var xt=1e-4;function nt(M){return M<xt&&M>-xt}function Z(M){return yt(M*1e3)/1e3}function tt(M){return yt(M*1e4)/1e4}function ot(M){return yt(M*10)/10}function W(M){return"matrix("+Z(M[0])+","+Z(M[1])+","+Z(M[2])+","+Z(M[3])+","+tt(M[4])+","+tt(M[5])+")"}var Y={left:"start",right:"end",center:"middle",middle:"middle"};function H(M,b,w){return w==="top"?M+=b/2:w==="bottom"&&(M-=b/2),M}function st(M){return M&&(M.shadowBlur||M.shadowOffsetX||M.shadowOffsetY)}function J(M){var b=M.style,w=M.getGlobalScale();return[b.shadowColor,(b.shadowBlur||0).toFixed(2),(b.shadowOffsetX||0).toFixed(2),(b.shadowOffsetY||0).toFixed(2),w[0],w[1]].join(",")}function g(M){var b=[];if(M)for(var w=0;w<M.length;w++){var C=M[w];b.push(C.id)}return b.join(",")}function Q(M){return M&&!!M.image}function j(M){return M&&!!M.svgElement}function O(M){return Q(M)||j(M)}function X(M){return M.type==="linear"}function K(M){return M.type==="radial"}function G(M){return M&&(M.type==="linear"||M.type==="radial")}function k(M){return"url(#"+M+")"}function R(M){var b=M.getGlobalScale(),w=Math.max(b[0],b[1]);return Math.max(Math.ceil(Math.log(w)/Math.log(10)),1)}function T(M){var b=M.x||0,w=M.y||0,C=(M.rotation||0)*F.I3,V=(0,F.pD)(M.scaleX,1),B=(0,F.pD)(M.scaleY,1),ut=M.skewX||0,it=M.skewY||0,lt=[];return(b||w)&&lt.push("translate("+b+"px,"+w+"px)"),C&&lt.push("rotate("+C+")"),(V!==1||B!==1)&&lt.push("scale("+V+","+B+")"),(ut||it)&&lt.push("skew("+yt(ut*F.I3)+"deg, "+yt(it*F.I3)+"deg)"),lt.join(" ")}var P=function(){return q.Z.hasGlobalWindow&&(0,F.mf)(window.btoa)?function(M){return window.btoa(unescape(encodeURIComponent(M)))}:typeof vt!="undefined"?function(M){return vt.from(M).toString("base64")}:function(M){return null}}()},96170:function(Pe,ee,z){z.r(ee),z.d(ee,{fastLerp:function(){return O},fastMapToColor:function(){return X},lerp:function(){return K},lift:function(){return Q},lum:function(){return P},mapToColor:function(){return G},modifyAlpha:function(){return R},modifyHSL:function(){return k},parse:function(){return st},random:function(){return M},stringify:function(){return T},toHex:function(){return j}});var F=z(86280),dt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function q(b){return b=Math.round(b),b<0?0:b>255?255:b}function vt(b){return b=Math.round(b),b<0?0:b>360?360:b}function yt(b){return b<0?0:b>1?1:b}function gt(b){var w=b;return w.length&&w.charAt(w.length-1)==="%"?q(parseFloat(w)/100*255):q(parseInt(w,10))}function xt(b){var w=b;return w.length&&w.charAt(w.length-1)==="%"?yt(parseFloat(w)/100):yt(parseFloat(w))}function nt(b,w,C){return C<0?C+=1:C>1&&(C-=1),C*6<1?b+(w-b)*C*6:C*2<1?w:C*3<2?b+(w-b)*(2/3-C)*6:b}function Z(b,w,C){return b+(w-b)*C}function tt(b,w,C,V,B){return b[0]=w,b[1]=C,b[2]=V,b[3]=B,b}function ot(b,w){return b[0]=w[0],b[1]=w[1],b[2]=w[2],b[3]=w[3],b}var W=new F.ZP(20),Y=null;function H(b,w){Y&&ot(Y,w),Y=W.put(b,Y||w.slice())}function st(b,w){if(b){w=w||[];var C=W.get(b);if(C)return ot(w,C);b=b+"";var V=b.replace(/ /g,"").toLowerCase();if(V in dt)return ot(w,dt[V]),H(b,w),w;var B=V.length;if(V.charAt(0)==="#"){if(B===4||B===5){var ut=parseInt(V.slice(1,4),16);if(!(ut>=0&&ut<=4095)){tt(w,0,0,0,1);return}return tt(w,(ut&3840)>>4|(ut&3840)>>8,ut&240|(ut&240)>>4,ut&15|(ut&15)<<4,B===5?parseInt(V.slice(4),16)/15:1),H(b,w),w}else if(B===7||B===9){var ut=parseInt(V.slice(1,7),16);if(!(ut>=0&&ut<=16777215)){tt(w,0,0,0,1);return}return tt(w,(ut&16711680)>>16,(ut&65280)>>8,ut&255,B===9?parseInt(V.slice(7),16)/255:1),H(b,w),w}return}var it=V.indexOf("("),lt=V.indexOf(")");if(it!==-1&&lt+1===B){var rt=V.substr(0,it),ct=V.substr(it+1,lt-(it+1)).split(","),St=1;switch(rt){case"rgba":if(ct.length!==4)return ct.length===3?tt(w,+ct[0],+ct[1],+ct[2],1):tt(w,0,0,0,1);St=xt(ct.pop());case"rgb":if(ct.length>=3)return tt(w,gt(ct[0]),gt(ct[1]),gt(ct[2]),ct.length===3?St:xt(ct[3])),H(b,w),w;tt(w,0,0,0,1);return;case"hsla":if(ct.length!==4){tt(w,0,0,0,1);return}return ct[3]=xt(ct[3]),J(ct,w),H(b,w),w;case"hsl":if(ct.length!==3){tt(w,0,0,0,1);return}return J(ct,w),H(b,w),w;default:return}}tt(w,0,0,0,1)}}function J(b,w){var C=(parseFloat(b[0])%360+360)%360/360,V=xt(b[1]),B=xt(b[2]),ut=B<=.5?B*(V+1):B+V-B*V,it=B*2-ut;return w=w||[],tt(w,q(nt(it,ut,C+1/3)*255),q(nt(it,ut,C)*255),q(nt(it,ut,C-1/3)*255),1),b.length===4&&(w[3]=b[3]),w}function g(b){if(b){var w=b[0]/255,C=b[1]/255,V=b[2]/255,B=Math.min(w,C,V),ut=Math.max(w,C,V),it=ut-B,lt=(ut+B)/2,rt,ct;if(it===0)rt=0,ct=0;else{lt<.5?ct=it/(ut+B):ct=it/(2-ut-B);var St=((ut-w)/6+it/2)/it,at=((ut-C)/6+it/2)/it,mt=((ut-V)/6+it/2)/it;w===ut?rt=mt-at:C===ut?rt=1/3+St-mt:V===ut&&(rt=2/3+at-St),rt<0&&(rt+=1),rt>1&&(rt-=1)}var Dt=[rt*360,ct,lt];return b[3]!=null&&Dt.push(b[3]),Dt}}function Q(b,w){var C=st(b);if(C){for(var V=0;V<3;V++)w<0?C[V]=C[V]*(1-w)|0:C[V]=(255-C[V])*w+C[V]|0,C[V]>255?C[V]=255:C[V]<0&&(C[V]=0);return T(C,C.length===4?"rgba":"rgb")}}function j(b){var w=st(b);if(w)return((1<<24)+(w[0]<<16)+(w[1]<<8)+ +w[2]).toString(16).slice(1)}function O(b,w,C){if(!(!(w&&w.length)||!(b>=0&&b<=1))){C=C||[];var V=b*(w.length-1),B=Math.floor(V),ut=Math.ceil(V),it=w[B],lt=w[ut],rt=V-B;return C[0]=q(Z(it[0],lt[0],rt)),C[1]=q(Z(it[1],lt[1],rt)),C[2]=q(Z(it[2],lt[2],rt)),C[3]=yt(Z(it[3],lt[3],rt)),C}}var X=O;function K(b,w,C){if(!(!(w&&w.length)||!(b>=0&&b<=1))){var V=b*(w.length-1),B=Math.floor(V),ut=Math.ceil(V),it=st(w[B]),lt=st(w[ut]),rt=V-B,ct=T([q(Z(it[0],lt[0],rt)),q(Z(it[1],lt[1],rt)),q(Z(it[2],lt[2],rt)),yt(Z(it[3],lt[3],rt))],"rgba");return C?{color:ct,leftIndex:B,rightIndex:ut,value:V}:ct}}var G=K;function k(b,w,C,V){var B=st(b);if(b)return B=g(B),w!=null&&(B[0]=vt(w)),C!=null&&(B[1]=xt(C)),V!=null&&(B[2]=xt(V)),T(J(B),"rgba")}function R(b,w){var C=st(b);if(C&&w!=null)return C[3]=yt(w),T(C,"rgba")}function T(b,w){if(!(!b||!b.length)){var C=b[0]+","+b[1]+","+b[2];return(w==="rgba"||w==="hsva"||w==="hsla")&&(C+=","+b[3]),w+"("+C+")"}}function P(b,w){var C=st(b);return C?(.299*C[0]+.587*C[1]+.114*C[2])*C[3]/255+(1-C[3])*w:0}function M(){return T([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}},1205:function(Pe,ee,z){z.d(ee,{U5:function(){return M},iR:function(){return R},Pc:function(){return T},AA:function(){return P}});var F=z(12012),dt=z(66210),q=z(29436),vt=z(85755),yt=q.Z.CMD,gt=[[],[],[]],xt=Math.sqrt,nt=Math.atan2;function Z(b,w){if(w){var C=b.data,V=b.len(),B,ut,it,lt,rt,ct,St=yt.M,at=yt.C,mt=yt.L,Dt=yt.R,wt=yt.A,Pt=yt.Q;for(it=0,lt=0;it<V;){switch(B=C[it++],lt=it,ut=0,B){case St:ut=1;break;case mt:ut=1;break;case at:ut=3;break;case Pt:ut=2;break;case wt:var bt=w[4],Ot=w[5],Bt=xt(w[0]*w[0]+w[1]*w[1]),Ht=xt(w[2]*w[2]+w[3]*w[3]),Qt=nt(-w[1]/Ht,w[0]/Bt);C[it]*=Bt,C[it++]+=bt,C[it]*=Ht,C[it++]+=Ot,C[it++]*=Bt,C[it++]*=Ht,C[it++]+=Qt,C[it++]+=Qt,it+=2,lt=it;break;case Dt:ct[0]=C[it++],ct[1]=C[it++],(0,vt.Ne)(ct,ct,w),C[lt++]=ct[0],C[lt++]=ct[1],ct[0]+=C[it++],ct[1]+=C[it++],(0,vt.Ne)(ct,ct,w),C[lt++]=ct[0],C[lt++]=ct[1]}for(rt=0;rt<ut;rt++){var re=gt[rt];re[0]=C[it++],re[1]=C[it++],(0,vt.Ne)(re,re,w),C[lt++]=re[0],C[lt++]=re[1]}}b.increaseVersion()}}var tt=z(70324),ot=Math.sqrt,W=Math.sin,Y=Math.cos,H=Math.PI;function st(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])}function J(b,w){return(b[0]*w[0]+b[1]*w[1])/(st(b)*st(w))}function g(b,w){return(b[0]*w[1]<b[1]*w[0]?-1:1)*Math.acos(J(b,w))}function Q(b,w,C,V,B,ut,it,lt,rt,ct,St){var at=rt*(H/180),mt=Y(at)*(b-C)/2+W(at)*(w-V)/2,Dt=-1*W(at)*(b-C)/2+Y(at)*(w-V)/2,wt=mt*mt/(it*it)+Dt*Dt/(lt*lt);wt>1&&(it*=ot(wt),lt*=ot(wt));var Pt=(B===ut?-1:1)*ot((it*it*(lt*lt)-it*it*(Dt*Dt)-lt*lt*(mt*mt))/(it*it*(Dt*Dt)+lt*lt*(mt*mt)))||0,bt=Pt*it*Dt/lt,Ot=Pt*-lt*mt/it,Bt=(b+C)/2+Y(at)*bt-W(at)*Ot,Ht=(w+V)/2+W(at)*bt+Y(at)*Ot,Qt=g([1,0],[(mt-bt)/it,(Dt-Ot)/lt]),re=[(mt-bt)/it,(Dt-Ot)/lt],ye=[(-1*mt-bt)/it,(-1*Dt-Ot)/lt],he=g(re,ye);if(J(re,ye)<=-1&&(he=H),J(re,ye)>=1&&(he=0),he<0){var be=Math.round(he/H*1e6)/1e6;he=H*2+be%2*H}St.addData(ct,Bt,Ht,it,lt,Qt,he,at,ut)}var j=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,O=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function X(b){var w=new q.Z;if(!b)return w;var C=0,V=0,B=C,ut=V,it,lt=q.Z.CMD,rt=b.match(j);if(!rt)return w;for(var ct=0;ct<rt.length;ct++){for(var St=rt[ct],at=St.charAt(0),mt=void 0,Dt=St.match(O)||[],wt=Dt.length,Pt=0;Pt<wt;Pt++)Dt[Pt]=parseFloat(Dt[Pt]);for(var bt=0;bt<wt;){var Ot=void 0,Bt=void 0,Ht=void 0,Qt=void 0,re=void 0,ye=void 0,he=void 0,be=C,Be=V,Ze=void 0,qe=void 0;switch(at){case"l":C+=Dt[bt++],V+=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"L":C=Dt[bt++],V=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"m":C+=Dt[bt++],V+=Dt[bt++],mt=lt.M,w.addData(mt,C,V),B=C,ut=V,at="l";break;case"M":C=Dt[bt++],V=Dt[bt++],mt=lt.M,w.addData(mt,C,V),B=C,ut=V,at="L";break;case"h":C+=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"H":C=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"v":V+=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"V":V=Dt[bt++],mt=lt.L,w.addData(mt,C,V);break;case"C":mt=lt.C,w.addData(mt,Dt[bt++],Dt[bt++],Dt[bt++],Dt[bt++],Dt[bt++],Dt[bt++]),C=Dt[bt-2],V=Dt[bt-1];break;case"c":mt=lt.C,w.addData(mt,Dt[bt++]+C,Dt[bt++]+V,Dt[bt++]+C,Dt[bt++]+V,Dt[bt++]+C,Dt[bt++]+V),C+=Dt[bt-2],V+=Dt[bt-1];break;case"S":Ot=C,Bt=V,Ze=w.len(),qe=w.data,it===lt.C&&(Ot+=C-qe[Ze-4],Bt+=V-qe[Ze-3]),mt=lt.C,be=Dt[bt++],Be=Dt[bt++],C=Dt[bt++],V=Dt[bt++],w.addData(mt,Ot,Bt,be,Be,C,V);break;case"s":Ot=C,Bt=V,Ze=w.len(),qe=w.data,it===lt.C&&(Ot+=C-qe[Ze-4],Bt+=V-qe[Ze-3]),mt=lt.C,be=C+Dt[bt++],Be=V+Dt[bt++],C+=Dt[bt++],V+=Dt[bt++],w.addData(mt,Ot,Bt,be,Be,C,V);break;case"Q":be=Dt[bt++],Be=Dt[bt++],C=Dt[bt++],V=Dt[bt++],mt=lt.Q,w.addData(mt,be,Be,C,V);break;case"q":be=Dt[bt++]+C,Be=Dt[bt++]+V,C+=Dt[bt++],V+=Dt[bt++],mt=lt.Q,w.addData(mt,be,Be,C,V);break;case"T":Ot=C,Bt=V,Ze=w.len(),qe=w.data,it===lt.Q&&(Ot+=C-qe[Ze-4],Bt+=V-qe[Ze-3]),C=Dt[bt++],V=Dt[bt++],mt=lt.Q,w.addData(mt,Ot,Bt,C,V);break;case"t":Ot=C,Bt=V,Ze=w.len(),qe=w.data,it===lt.Q&&(Ot+=C-qe[Ze-4],Bt+=V-qe[Ze-3]),C+=Dt[bt++],V+=Dt[bt++],mt=lt.Q,w.addData(mt,Ot,Bt,C,V);break;case"A":Ht=Dt[bt++],Qt=Dt[bt++],re=Dt[bt++],ye=Dt[bt++],he=Dt[bt++],be=C,Be=V,C=Dt[bt++],V=Dt[bt++],mt=lt.A,Q(be,Be,C,V,ye,he,Ht,Qt,re,mt,w);break;case"a":Ht=Dt[bt++],Qt=Dt[bt++],re=Dt[bt++],ye=Dt[bt++],he=Dt[bt++],be=C,Be=V,C+=Dt[bt++],V+=Dt[bt++],mt=lt.A,Q(be,Be,C,V,ye,he,Ht,Qt,re,mt,w);break}}(at==="z"||at==="Z")&&(mt=lt.Z,w.addData(mt),C=B,V=ut),it=mt}return w.toStatic(),w}var K=function(b){(0,F.ZT)(w,b);function w(){return b!==null&&b.apply(this,arguments)||this}return w.prototype.applyTransform=function(C){},w}(dt.ZP);function G(b){return b.setData!=null}function k(b,w){var C=X(b),V=(0,tt.l7)({},w);return V.buildPath=function(B){if(G(B)){B.setData(C.data);var ut=B.getContext();ut&&B.rebuildPath(ut,1)}else{var ut=B;C.rebuildPath(ut,1)}},V.applyTransform=function(B){Z(C,B),this.dirtyShape()},V}function R(b,w){return new K(k(b,w))}function T(b,w){var C=k(b,w),V=function(B){(0,F.ZT)(ut,B);function ut(it){var lt=B.call(this,it)||this;return lt.applyTransform=C.applyTransform,lt.buildPath=C.buildPath,lt}return ut}(K);return V}function P(b,w){for(var C=[],V=b.length,B=0;B<V;B++){var ut=b[B];C.push(ut.getUpdatedPathProxy(!0))}var it=new dt.ZP(w);return it.createPathProxy(),it.buildPath=function(lt){if(G(lt)){lt.appendPath(C);var rt=lt.getContext();rt&&lt.rebuildPath(rt,1)}},it}function M(b,w){w=w||{};var C=new dt.ZP;return b.shape&&C.setShape(b.shape),C.setStyle(b.style),w.bakeTransform?Z(C.path,b.getComputedTransform()):w.toLocal?C.setLocalTransform(b.getComputedTransform()):C.copyTransform(b),C.buildPath=b.buildPath,C.applyTransform=C.applyTransform,C.z=b.z,C.z2=b.z2,C.zlevel=b.zlevel,C}},32389:function(Pe,ee,z){z.r(ee),z.d(ee,{dispose:function(){return He},disposeAll:function(){return Vt},getInstance:function(){return le},init:function(){return Ne},registerPainter:function(){return Ee},version:function(){return Fe}});var F=z(54490),dt=z(70324),q=z(12012),vt=z(85755),yt=function(){function Xt($t,ie){this.target=$t,this.topTarget=ie&&ie.topTarget}return Xt}(),gt=function(){function Xt($t){this.handler=$t,$t.on("mousedown",this._dragStart,this),$t.on("mousemove",this._drag,this),$t.on("mouseup",this._dragEnd,this)}return Xt.prototype._dragStart=function($t){for(var ie=$t.target;ie&&!ie.draggable;)ie=ie.parent||ie.__hostTarget;ie&&(this._draggingTarget=ie,ie.dragging=!0,this._x=$t.offsetX,this._y=$t.offsetY,this.handler.dispatchToElement(new yt(ie,$t),"dragstart",$t.event))},Xt.prototype._drag=function($t){var ie=this._draggingTarget;if(ie){var Zt=$t.offsetX,pe=$t.offsetY,ve=Zt-this._x,we=pe-this._y;this._x=Zt,this._y=pe,ie.drift(ve,we,$t),this.handler.dispatchToElement(new yt(ie,$t),"drag",$t.event);var Ue=this.handler.findHover(Zt,pe,ie).target,ur=this._dropTarget;this._dropTarget=Ue,ie!==Ue&&(ur&&Ue!==ur&&this.handler.dispatchToElement(new yt(ur,$t),"dragleave",$t.event),Ue&&Ue!==ur&&this.handler.dispatchToElement(new yt(Ue,$t),"dragenter",$t.event))}},Xt.prototype._dragEnd=function($t){var ie=this._draggingTarget;ie&&(ie.dragging=!1),this.handler.dispatchToElement(new yt(ie,$t),"dragend",$t.event),this._dropTarget&&this.handler.dispatchToElement(new yt(this._dropTarget,$t),"drop",$t.event),this._draggingTarget=null,this._dropTarget=null},Xt}(),xt=gt,nt=z(10563),Z=z(11300),tt=function(){function Xt(){this._track=[]}return Xt.prototype.recognize=function($t,ie,Zt){return this._doTrack($t,ie,Zt),this._recognize($t)},Xt.prototype.clear=function(){return this._track.length=0,this},Xt.prototype._doTrack=function($t,ie,Zt){var pe=$t.touches;if(pe){for(var ve={points:[],touches:[],target:ie,event:$t},we=0,Ue=pe.length;we<Ue;we++){var ur=pe[we],gr=Z.eV(Zt,ur,{});ve.points.push([gr.zrX,gr.zrY]),ve.touches.push(ur)}this._track.push(ve)}},Xt.prototype._recognize=function($t){for(var ie in Y)if(Y.hasOwnProperty(ie)){var Zt=Y[ie](this._track,$t);if(Zt)return Zt}},Xt}();function ot(Xt){var $t=Xt[1][0]-Xt[0][0],ie=Xt[1][1]-Xt[0][1];return Math.sqrt($t*$t+ie*ie)}function W(Xt){return[(Xt[0][0]+Xt[1][0])/2,(Xt[0][1]+Xt[1][1])/2]}var Y={pinch:function(Xt,$t){var ie=Xt.length;if(ie){var Zt=(Xt[ie-1]||{}).points,pe=(Xt[ie-2]||{}).points||Zt;if(pe&&pe.length>1&&Zt&&Zt.length>1){var ve=ot(Zt)/ot(pe);!isFinite(ve)&&(ve=1),$t.pinchScale=ve;var we=W(Zt);return $t.pinchX=we[0],$t.pinchY=we[1],{type:"pinch",target:Xt[0].target,event:$t}}}}},H=z(16128),st="silent";function J(Xt,$t,ie){return{type:Xt,event:ie,target:$t.target,topTarget:$t.topTarget,cancelBubble:!1,offsetX:ie.zrX,offsetY:ie.zrY,gestureEvent:ie.gestureEvent,pinchX:ie.pinchX,pinchY:ie.pinchY,pinchScale:ie.pinchScale,wheelDelta:ie.zrDelta,zrByTouch:ie.zrByTouch,which:ie.which,stop:g}}function g(){Z.sT(this.event)}var Q=function(Xt){(0,q.ZT)($t,Xt);function $t(){var ie=Xt!==null&&Xt.apply(this,arguments)||this;return ie.handler=null,ie}return $t.prototype.dispose=function(){},$t.prototype.setCursor=function(){},$t}(nt.Z),j=function(){function Xt($t,ie){this.x=$t,this.y=ie}return Xt}(),O=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],X=new H.Z(0,0,0,0),K=function(Xt){(0,q.ZT)($t,Xt);function $t(ie,Zt,pe,ve,we){var Ue=Xt.call(this)||this;return Ue._hovered=new j(0,0),Ue.storage=ie,Ue.painter=Zt,Ue.painterRoot=ve,Ue._pointerSize=we,pe=pe||new Q,Ue.proxy=null,Ue.setHandlerProxy(pe),Ue._draggingMgr=new xt(Ue),Ue}return $t.prototype.setHandlerProxy=function(ie){this.proxy&&this.proxy.dispose(),ie&&(dt.S6(O,function(Zt){ie.on&&ie.on(Zt,this[Zt],this)},this),ie.handler=this),this.proxy=ie},$t.prototype.mousemove=function(ie){var Zt=ie.zrX,pe=ie.zrY,ve=R(this,Zt,pe),we=this._hovered,Ue=we.target;Ue&&!Ue.__zr&&(we=this.findHover(we.x,we.y),Ue=we.target);var ur=this._hovered=ve?new j(Zt,pe):this.findHover(Zt,pe),gr=ur.target,Ir=this.proxy;Ir.setCursor&&Ir.setCursor(gr?gr.cursor:"default"),Ue&&gr!==Ue&&this.dispatchToElement(we,"mouseout",ie),this.dispatchToElement(ur,"mousemove",ie),gr&&gr!==Ue&&this.dispatchToElement(ur,"mouseover",ie)},$t.prototype.mouseout=function(ie){var Zt=ie.zrEventControl;Zt!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",ie),Zt!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:ie})},$t.prototype.resize=function(){this._hovered=new j(0,0)},$t.prototype.dispatch=function(ie,Zt){var pe=this[ie];pe&&pe.call(this,Zt)},$t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},$t.prototype.setCursorStyle=function(ie){var Zt=this.proxy;Zt.setCursor&&Zt.setCursor(ie)},$t.prototype.dispatchToElement=function(ie,Zt,pe){ie=ie||{};var ve=ie.target;if(!(ve&&ve.silent)){for(var we="on"+Zt,Ue=J(Zt,ie,pe);ve&&(ve[we]&&(Ue.cancelBubble=!!ve[we].call(ve,Ue)),ve.trigger(Zt,Ue),ve=ve.__hostTarget?ve.__hostTarget:ve.parent,!Ue.cancelBubble););Ue.cancelBubble||(this.trigger(Zt,Ue),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(ur){typeof ur[we]=="function"&&ur[we].call(ur,Ue),ur.trigger&&ur.trigger(Zt,Ue)}))}},$t.prototype.findHover=function(ie,Zt,pe){var ve=this.storage.getDisplayList(),we=new j(ie,Zt);if(k(ve,we,ie,Zt,pe),this._pointerSize&&!we.target){for(var Ue=[],ur=this._pointerSize,gr=ur/2,Ir=new H.Z(ie-gr,Zt-gr,ur,ur),hn=ve.length-1;hn>=0;hn--){var Rr=ve[hn];Rr!==pe&&!Rr.ignore&&!Rr.ignoreCoarsePointer&&(!Rr.parent||!Rr.parent.ignoreCoarsePointer)&&(X.copy(Rr.getBoundingRect()),Rr.transform&&X.applyTransform(Rr.transform),X.intersect(Ir)&&Ue.push(Rr))}if(Ue.length)for(var Nn=4,Vn=Math.PI/12,yi=Math.PI*2,Fi=0;Fi<gr;Fi+=Nn)for(var Ci=0;Ci<yi;Ci+=Vn){var ri=ie+Fi*Math.cos(Ci),eo=Zt+Fi*Math.sin(Ci);if(k(Ue,we,ri,eo,pe),we.target)return we}}return we},$t.prototype.processGesture=function(ie,Zt){this._gestureMgr||(this._gestureMgr=new tt);var pe=this._gestureMgr;Zt==="start"&&pe.clear();var ve=pe.recognize(ie,this.findHover(ie.zrX,ie.zrY,null).target,this.proxy.dom);if(Zt==="end"&&pe.clear(),ve){var we=ve.type;ie.gestureEvent=we;var Ue=new j;Ue.target=ve.target,this.dispatchToElement(Ue,we,ve.event)}},$t}(nt.Z);dt.S6(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Xt){K.prototype[Xt]=function($t){var ie=$t.zrX,Zt=$t.zrY,pe=R(this,ie,Zt),ve,we;if((Xt!=="mouseup"||!pe)&&(ve=this.findHover(ie,Zt),we=ve.target),Xt==="mousedown")this._downEl=we,this._downPoint=[$t.zrX,$t.zrY],this._upEl=we;else if(Xt==="mouseup")this._upEl=we;else if(Xt==="click"){if(this._downEl!==this._upEl||!this._downPoint||vt.TK(this._downPoint,[$t.zrX,$t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(ve,Xt,$t)}});function G(Xt,$t,ie){if(Xt[Xt.rectHover?"rectContain":"contain"]($t,ie)){for(var Zt=Xt,pe=void 0,ve=!1;Zt;){if(Zt.ignoreClip&&(ve=!0),!ve){var we=Zt.getClipPath();if(we&&!we.contain($t,ie))return!1;Zt.silent&&(pe=!0)}var Ue=Zt.__hostTarget;Zt=Ue||Zt.parent}return pe?st:!0}return!1}function k(Xt,$t,ie,Zt,pe){for(var ve=Xt.length-1;ve>=0;ve--){var we=Xt[ve],Ue=void 0;if(we!==pe&&!we.ignore&&(Ue=G(we,ie,Zt))&&(!$t.topTarget&&($t.topTarget=we),Ue!==st)){$t.target=we;break}}}function R(Xt,$t,ie){var Zt=Xt.painter;return $t<0||$t>Zt.getWidth()||ie<0||ie>Zt.getHeight()}var T=K,P=z(59330),M=z(53197),b=!1;function w(){b||(b=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function C(Xt,$t){return Xt.zlevel===$t.zlevel?Xt.z===$t.z?Xt.z2-$t.z2:Xt.z-$t.z:Xt.zlevel-$t.zlevel}var V=function(){function Xt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=C}return Xt.prototype.traverse=function($t,ie){for(var Zt=0;Zt<this._roots.length;Zt++)this._roots[Zt].traverse($t,ie)},Xt.prototype.getDisplayList=function($t,ie){ie=ie||!1;var Zt=this._displayList;return($t||!Zt.length)&&this.updateDisplayList(ie),Zt},Xt.prototype.updateDisplayList=function($t){this._displayListLen=0;for(var ie=this._roots,Zt=this._displayList,pe=0,ve=ie.length;pe<ve;pe++)this._updateAndAddDisplayable(ie[pe],null,$t);Zt.length=this._displayListLen,(0,P.Z)(Zt,C)},Xt.prototype._updateAndAddDisplayable=function($t,ie,Zt){if(!($t.ignore&&!Zt)){$t.beforeUpdate(),$t.update(),$t.afterUpdate();var pe=$t.getClipPath();if($t.ignoreClip)ie=null;else if(pe){ie?ie=ie.slice():ie=[];for(var ve=pe,we=$t;ve;)ve.parent=we,ve.updateTransform(),ie.push(ve),we=ve,ve=ve.getClipPath()}if($t.childrenRef){for(var Ue=$t.childrenRef(),ur=0;ur<Ue.length;ur++){var gr=Ue[ur];$t.__dirty&&(gr.__dirty|=M.YV),this._updateAndAddDisplayable(gr,ie,Zt)}$t.__dirty=0}else{var Ir=$t;ie&&ie.length?Ir.__clipPaths=ie:Ir.__clipPaths&&Ir.__clipPaths.length>0&&(Ir.__clipPaths=[]),isNaN(Ir.z)&&(w(),Ir.z=0),isNaN(Ir.z2)&&(w(),Ir.z2=0),isNaN(Ir.zlevel)&&(w(),Ir.zlevel=0),this._displayList[this._displayListLen++]=Ir}var hn=$t.getDecalElement&&$t.getDecalElement();hn&&this._updateAndAddDisplayable(hn,ie,Zt);var Rr=$t.getTextGuideLine();Rr&&this._updateAndAddDisplayable(Rr,ie,Zt);var Nn=$t.getTextContent();Nn&&this._updateAndAddDisplayable(Nn,ie,Zt)}},Xt.prototype.addRoot=function($t){$t.__zr&&$t.__zr.storage===this||this._roots.push($t)},Xt.prototype.delRoot=function($t){if($t instanceof Array){for(var ie=0,Zt=$t.length;ie<Zt;ie++)this.delRoot($t[ie]);return}var pe=dt.cq(this._roots,$t);pe>=0&&this._roots.splice(pe,1)},Xt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Xt.prototype.getRoots=function(){return this._roots},Xt.prototype.dispose=function(){this._displayList=null,this._roots=null},Xt}(),B=V,ut=z(75820),it=z(70295);function lt(){return new Date().getTime()}var rt=function(Xt){(0,q.ZT)($t,Xt);function $t(ie){var Zt=Xt.call(this)||this;return Zt._running=!1,Zt._time=0,Zt._pausedTime=0,Zt._pauseStart=0,Zt._paused=!1,ie=ie||{},Zt.stage=ie.stage||{},Zt}return $t.prototype.addClip=function(ie){ie.animation&&this.removeClip(ie),this._head?(this._tail.next=ie,ie.prev=this._tail,ie.next=null,this._tail=ie):this._head=this._tail=ie,ie.animation=this},$t.prototype.addAnimator=function(ie){ie.animation=this;var Zt=ie.getClip();Zt&&this.addClip(Zt)},$t.prototype.removeClip=function(ie){if(ie.animation){var Zt=ie.prev,pe=ie.next;Zt?Zt.next=pe:this._head=pe,pe?pe.prev=Zt:this._tail=Zt,ie.next=ie.prev=ie.animation=null}},$t.prototype.removeAnimator=function(ie){var Zt=ie.getClip();Zt&&this.removeClip(Zt),ie.animation=null},$t.prototype.update=function(ie){for(var Zt=lt()-this._pausedTime,pe=Zt-this._time,ve=this._head;ve;){var we=ve.next,Ue=ve.step(Zt,pe);Ue&&(ve.ondestroy(),this.removeClip(ve)),ve=we}this._time=Zt,ie||(this.trigger("frame",pe),this.stage.update&&this.stage.update())},$t.prototype._startLoop=function(){var ie=this;this._running=!0;function Zt(){ie._running&&((0,ut.Z)(Zt),!ie._paused&&ie.update())}(0,ut.Z)(Zt)},$t.prototype.start=function(){this._running||(this._time=lt(),this._pausedTime=0,this._startLoop())},$t.prototype.stop=function(){this._running=!1},$t.prototype.pause=function(){this._paused||(this._pauseStart=lt(),this._paused=!0)},$t.prototype.resume=function(){this._paused&&(this._pausedTime+=lt()-this._pauseStart,this._paused=!1)},$t.prototype.clear=function(){for(var ie=this._head;ie;){var Zt=ie.next;ie.prev=ie.next=ie.animation=null,ie=Zt}this._head=this._tail=null},$t.prototype.isFinished=function(){return this._head==null},$t.prototype.animate=function(ie,Zt){Zt=Zt||{},this.start();var pe=new it.Z(ie,Zt.loop);return this.addAnimator(pe),pe},$t}(nt.Z),ct=rt,St=300,at=F.Z.domSupported,mt=function(){var Xt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],$t=["touchstart","touchend","touchmove"],ie={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},Zt=dt.UI(Xt,function(pe){var ve=pe.replace("mouse","pointer");return ie.hasOwnProperty(ve)?ve:pe});return{mouse:Xt,touch:$t,pointer:Zt}}(),Dt={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wt=!1;function Pt(Xt){var $t=Xt.pointerType;return $t==="pen"||$t==="touch"}function bt(Xt){Xt.touching=!0,Xt.touchTimer!=null&&(clearTimeout(Xt.touchTimer),Xt.touchTimer=null),Xt.touchTimer=setTimeout(function(){Xt.touching=!1,Xt.touchTimer=null},700)}function Ot(Xt){Xt&&(Xt.zrByTouch=!0)}function Bt(Xt,$t){return(0,Z.OD)(Xt.dom,new Qt(Xt,$t),!0)}function Ht(Xt,$t){for(var ie=$t,Zt=!1;ie&&ie.nodeType!==9&&!(Zt=ie.domBelongToZr||ie!==$t&&ie===Xt.painterRoot);)ie=ie.parentNode;return Zt}var Qt=function(){function Xt($t,ie){this.stopPropagation=dt.ZT,this.stopImmediatePropagation=dt.ZT,this.preventDefault=dt.ZT,this.type=ie.type,this.target=this.currentTarget=$t.dom,this.pointerType=ie.pointerType,this.clientX=ie.clientX,this.clientY=ie.clientY}return Xt}(),re={mousedown:function(Xt){Xt=(0,Z.OD)(this.dom,Xt),this.__mayPointerCapture=[Xt.zrX,Xt.zrY],this.trigger("mousedown",Xt)},mousemove:function(Xt){Xt=(0,Z.OD)(this.dom,Xt);var $t=this.__mayPointerCapture;$t&&(Xt.zrX!==$t[0]||Xt.zrY!==$t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Xt)},mouseup:function(Xt){Xt=(0,Z.OD)(this.dom,Xt),this.__togglePointerCapture(!1),this.trigger("mouseup",Xt)},mouseout:function(Xt){Xt=(0,Z.OD)(this.dom,Xt);var $t=Xt.toElement||Xt.relatedTarget;Ht(this,$t)||(this.__pointerCapturing&&(Xt.zrEventControl="no_globalout"),this.trigger("mouseout",Xt))},wheel:function(Xt){wt=!0,Xt=(0,Z.OD)(this.dom,Xt),this.trigger("mousewheel",Xt)},mousewheel:function(Xt){wt||(Xt=(0,Z.OD)(this.dom,Xt),this.trigger("mousewheel",Xt))},touchstart:function(Xt){Xt=(0,Z.OD)(this.dom,Xt),Ot(Xt),this.__lastTouchMoment=new Date,this.handler.processGesture(Xt,"start"),re.mousemove.call(this,Xt),re.mousedown.call(this,Xt)},touchmove:function(Xt){Xt=(0,Z.OD)(this.dom,Xt),Ot(Xt),this.handler.processGesture(Xt,"change"),re.mousemove.call(this,Xt)},touchend:function(Xt){Xt=(0,Z.OD)(this.dom,Xt),Ot(Xt),this.handler.processGesture(Xt,"end"),re.mouseup.call(this,Xt),+new Date-+this.__lastTouchMoment<St&&re.click.call(this,Xt)},pointerdown:function(Xt){re.mousedown.call(this,Xt)},pointermove:function(Xt){Pt(Xt)||re.mousemove.call(this,Xt)},pointerup:function(Xt){re.mouseup.call(this,Xt)},pointerout:function(Xt){Pt(Xt)||re.mouseout.call(this,Xt)}};dt.S6(["click","dblclick","contextmenu"],function(Xt){re[Xt]=function($t){$t=(0,Z.OD)(this.dom,$t),this.trigger(Xt,$t)}});var ye={pointermove:function(Xt){Pt(Xt)||ye.mousemove.call(this,Xt)},pointerup:function(Xt){ye.mouseup.call(this,Xt)},mousemove:function(Xt){this.trigger("mousemove",Xt)},mouseup:function(Xt){var $t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Xt),$t&&(Xt.zrEventControl="only_globalout",this.trigger("mouseout",Xt))}};function he(Xt,$t){var ie=$t.domHandlers;F.Z.pointerEventsSupported?dt.S6(mt.pointer,function(Zt){Be($t,Zt,function(pe){ie[Zt].call(Xt,pe)})}):(F.Z.touchEventsSupported&&dt.S6(mt.touch,function(Zt){Be($t,Zt,function(pe){ie[Zt].call(Xt,pe),bt($t)})}),dt.S6(mt.mouse,function(Zt){Be($t,Zt,function(pe){pe=(0,Z.iP)(pe),$t.touching||ie[Zt].call(Xt,pe)})}))}function be(Xt,$t){F.Z.pointerEventsSupported?dt.S6(Dt.pointer,ie):F.Z.touchEventsSupported||dt.S6(Dt.mouse,ie);function ie(Zt){function pe(ve){ve=(0,Z.iP)(ve),Ht(Xt,ve.target)||(ve=Bt(Xt,ve),$t.domHandlers[Zt].call(Xt,ve))}Be($t,Zt,pe,{capture:!0})}}function Be(Xt,$t,ie,Zt){Xt.mounted[$t]=ie,Xt.listenerOpts[$t]=Zt,(0,Z.Oo)(Xt.domTarget,$t,ie,Zt)}function Ze(Xt){var $t=Xt.mounted;for(var ie in $t)$t.hasOwnProperty(ie)&&(0,Z.xg)(Xt.domTarget,ie,$t[ie],Xt.listenerOpts[ie]);Xt.mounted={}}var qe=function(){function Xt($t,ie){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=$t,this.domHandlers=ie}return Xt}(),pr=function(Xt){(0,q.ZT)($t,Xt);function $t(ie,Zt){var pe=Xt.call(this)||this;return pe.__pointerCapturing=!1,pe.dom=ie,pe.painterRoot=Zt,pe._localHandlerScope=new qe(ie,re),at&&(pe._globalHandlerScope=new qe(document,ye)),he(pe,pe._localHandlerScope),pe}return $t.prototype.dispose=function(){Ze(this._localHandlerScope),at&&Ze(this._globalHandlerScope)},$t.prototype.setCursor=function(ie){this.dom.style&&(this.dom.style.cursor=ie||"default")},$t.prototype.__togglePointerCapture=function(ie){if(this.__mayPointerCapture=null,at&&+this.__pointerCapturing^+ie){this.__pointerCapturing=ie;var Zt=this._globalHandlerScope;ie?be(this,Zt):Ze(Zt)}},$t}(nt.Z),wr=pr,Or=z(96170),Sr=z(62623),Vr=z(2574);var sn={},cr={};function or(Xt){delete cr[Xt]}function Dr(Xt){if(!Xt)return!1;if(typeof Xt=="string")return(0,Or.lum)(Xt,1)<Sr.Ak;if(Xt.colorStops){for(var $t=Xt.colorStops,ie=0,Zt=$t.length,pe=0;pe<Zt;pe++)ie+=(0,Or.lum)($t[pe].color,1);return ie/=Zt,ie<Sr.Ak}return!1}var ze=function(){function Xt($t,ie,Zt){var pe=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,Zt=Zt||{},this.dom=ie,this.id=$t;var ve=new B,we=Zt.renderer||"canvas";sn[we]||(we=dt.XP(sn)[0]),Zt.useDirtyRect=Zt.useDirtyRect==null?!1:Zt.useDirtyRect;var Ue=new sn[we](ie,ve,Zt,$t),ur=Zt.ssr||Ue.ssrOnly;this.storage=ve,this.painter=Ue;var gr=!F.Z.node&&!F.Z.worker&&!ur?new wr(Ue.getViewportRoot(),Ue.root):null,Ir=Zt.useCoarsePointer,hn=Ir==null||Ir==="auto"?F.Z.touchEventsSupported:!!Ir,Rr=44,Nn;hn&&(Nn=dt.pD(Zt.pointerSize,Rr)),this.handler=new T(ve,Ue,gr,Ue.root,Nn),this.animation=new ct({stage:{update:ur?null:function(){return pe._flush(!0)}}}),ur||this.animation.start()}return Xt.prototype.add=function($t){$t&&(this.storage.addRoot($t),$t.addSelfToZr(this),this.refresh())},Xt.prototype.remove=function($t){$t&&(this.storage.delRoot($t),$t.removeSelfFromZr(this),this.refresh())},Xt.prototype.configLayer=function($t,ie){this.painter.configLayer&&this.painter.configLayer($t,ie),this.refresh()},Xt.prototype.setBackgroundColor=function($t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor($t),this.refresh(),this._backgroundColor=$t,this._darkMode=Dr($t)},Xt.prototype.getBackgroundColor=function(){return this._backgroundColor},Xt.prototype.setDarkMode=function($t){this._darkMode=$t},Xt.prototype.isDarkMode=function(){return this._darkMode},Xt.prototype.refreshImmediately=function($t){$t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},Xt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},Xt.prototype.flush=function(){this._flush(!1)},Xt.prototype._flush=function($t){var ie,Zt=lt();this._needsRefresh&&(ie=!0,this.refreshImmediately($t)),this._needsRefreshHover&&(ie=!0,this.refreshHoverImmediately());var pe=lt();ie?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:pe-Zt})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Xt.prototype.setSleepAfterStill=function($t){this._sleepAfterStill=$t},Xt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},Xt.prototype.refreshHover=function(){this._needsRefreshHover=!0},Xt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},Xt.prototype.resize=function($t){$t=$t||{},this.painter.resize($t.width,$t.height),this.handler.resize()},Xt.prototype.clearAnimation=function(){this.animation.clear()},Xt.prototype.getWidth=function(){return this.painter.getWidth()},Xt.prototype.getHeight=function(){return this.painter.getHeight()},Xt.prototype.setCursorStyle=function($t){this.handler.setCursorStyle($t)},Xt.prototype.findHover=function($t,ie){return this.handler.findHover($t,ie)},Xt.prototype.on=function($t,ie,Zt){return this.handler.on($t,ie,Zt),this},Xt.prototype.off=function($t,ie){this.handler.off($t,ie)},Xt.prototype.trigger=function($t,ie){this.handler.trigger($t,ie)},Xt.prototype.clear=function(){for(var $t=this.storage.getRoots(),ie=0;ie<$t.length;ie++)$t[ie]instanceof Vr.Z&&$t[ie].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},Xt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,or(this.id)},Xt}();function Ne(Xt,$t){var ie=new ze(dt.M8(),Xt,$t);return cr[ie.id]=ie,ie}function He(Xt){Xt.dispose()}function Vt(){for(var Xt in cr)cr.hasOwnProperty(Xt)&&cr[Xt].dispose();cr={}}function le(Xt){return cr[Xt]}function Ee(Xt,$t){sn[Xt]=$t}var Fe="5.4.3"}}]);
